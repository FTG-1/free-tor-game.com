<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Polling versus push notifications &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070868 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070868" class="post-1070868 software type-software status-publish hentry category-software tag-asp-net tag-c tag-iis tag-mysql tag-sql-server"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Polling versus push notifications</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">asp.net</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">iis</span><span class="mr-2 badge badge-primary">MySQL</span><span class="mr-2 badge badge-danger">sql server</span></p><div class="entry-content"><p>I have a hybrid web app for android. The webpage or website the app shows is in asp.net. The javascript for the webpage running in the webview of the app is sending out an ajax request every 10 seconds to an asp.net page which queries a database server for refreshed data and returns the needed values as a result of the ajax call. <strong>Note, this is expected to be a very high volume site.</strong></p><p>Often the data will be the same. I am considering using push notifications instead of the page having to poll every 10 secs, so that data is only sent when it is different. I am looking into what is called SignalR to do this and it doesn&#39;t look that bad.</p><p><strong>What I want is a solution that is the least overhead to the web server (IIS8) and the database server (Sql Server 2014).</strong> So if push notifications are sent out, I think the web server would have to keep track of each launched instance of the webpage as a session rather than every page instance being static and stateless as it normally is.</p><p><strong>So what does this mean to the web server and database server in terms of using up processing time and resources? Is it more efficient for the web server to create and manage all of these sessions than it is for the web server and database server to handle polling requests from everyone?</strong></p><p>To be clear, imagine polling for a delivery driver&#39;s location and the driver&#39;s stops. The driver&#39;s stops might not change at all or only occasionally, but the driver will change every time his or her location changes. Should I poll for all info every 10 secs so that any changes are guaranteed to be picked up, or should only the info that needs to be sent be sent out and only when it needs to be sent?</p><p>Thanks in advance for your opinions and advice.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Events and Subscribers</h2><p>When you make the shift from polling to event notifications, the best way to think about it is in terms of events and subscribers.</p><p>In your concept, you imagine the web server maintaining a session state for each instance of the client, and effectively polling the database on its behalf in order to know when to send the notification to the client.</p><p>You are right to be concerned about the impact on server resources of this approach!  You haven&#39;t yet fully leveraged the power of notifications, you&#39;ve just shifted where the polling happens.</p><p>A more effective way is for clients to register themselves to receive a notification when a particular piece of data changes.  Then, when that data changes, publish a notification that the data has changed.  Let the notification framework identify who has registered to receive a notification (subscribed) and to let them know.</p><p>One way to do this with signalr is through &#39;groups&#39;.  Exactly how it should be structured depends on your data model, but using your example, you could have a group per driver.  A simplified view of the sequence:</p><ol><li>The client app starts and initiates a connection to the signalr endpoint</li><li>The client app subscribes to notifications about a particular driver<ol><li>There are many ways to do this, but if you are using signalr, you can <a href="http://www.asp.net/signalr/overview/guide-to-the-api/hubs-api-guide-javascript-client#callserver" rel="nofollow">directly call server methods from the client</a></li><li>The server would add the client into a group for the requested driver</li></ol></li><li>When the driver reports a new location, tell signalr to send a message to the group for that driver<ol><li>Strictly speaking in signalr, this is done by <a href="http://www.asp.net/signalr/overview/guide-to-the-api/hubs-api-guide-server#callfromhub" rel="nofollow">invoking a client side method from the server</a></li><li>The client now has the updated info and can refresh the page</li><li>If there are no clients registered in the group, signalr will do nothing</li><li>If there are multiple clients registered in the group, signalr will invoke the same method (with arguments) on all of them</li><li>You can further decouple the &#39;write operation&#39; which updates the data from the code which sends the notification via signalr through a concept such as <a href="http://udidahan.com/2009/06/14/domain-events-salvation/" rel="nofollow">domain events</a></li></ol></li></ol><p>This way you receive notifications on the client, without polling anywhere.</p><h2>Edit to add - Efficiency</h2><p>Following your comment, a few notes on efficiency using your example of a chat application:</p><p><strong>With polling approach</strong>, you are using the following resources:</p><ul><li>storage (db/memory):<ul><li>list of who is talking to who</li><li>chat message history with appropriate metadata so that the poll request can identify new messages since the last request</li></ul></li><li>computation<ul><li>handling new messages pushed in by the client - storing them appropriately<ul><li>you&#39;d have one request per new chat message</li></ul></li><li>handling poll requests by the clients - querying for new messages and returning them - would happen on every poll from every client<ul><li>if you have 500 clients, some of whom are idle, you&#39;d still have 50 requests per second</li></ul></li></ul></li></ul><p>Scalability:</p><ol><li>Your storage load grows with number of active clients, and with chat activity</li><li>Your compute load grows with message chat activity and with number of connected clients</li></ol><p><strong>With a signalr notification approach</strong>, you have:</p><ul><li>storage<ul><li>list of who is talking to who (signalr will do this for you for free with it&#39;s &#39;group&#39; system</li><li>chat messages (optional - only if you want a chat log on the server - and could be persisted asynchronously)</li></ul></li><li>computation<ul><li>handling new messages pushed in by the client, which includes asking signalr to propagate them to the members of the group<ul><li>one request per new chat message</li></ul></li></ul></li></ul><p>Scalability:</p><ol><li>Your storage load grows with the number of active clients only</li><li>Your compute load grows with message chat activity only</li></ol><p>Based on that, I think the notification approach is more efficient.  As you can see, while signalr will maintain the group membership list, you have to do that anyway even if you go down a polling approach.</p><h2>Terminology Note</h2><ul><li><strong>Push Notifications</strong> have a well defined meaning in this space, which permits sending a notification via the mobile device&#39;s operating system, which permits the notification to appear in the device&#39;s notification list even if your app isn&#39;t running - e.g. <a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html" rel="nofollow">Apple Push Service</a> &amp; <a href="https://developers.google.com/cloud-messaging/" rel="nofollow">Google Cloud Messaging</a>.  Strictly speaking, signalr won&#39;t give you that, as your app must be running to receive the signalr client invocation.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-best-practices-and-etiquette-for-setting-up-email-notifications/'>C# &#8211; Best Practices and Etiquette for Setting up Email Notifications</a></li><li class="list-group-item"><a href='../c-designing-a-scalable-and-robust-retry-mechanism/'>C# &#8211; Designing a scalable and robust retry mechanism</a></li><li class="list-group-item"><a href='../idea-to-develop-a-caching-server-between-iis-and-sql-server/'>Idea to develop a caching server between IIS and SQL Server</a></li><li class="list-group-item"><a href='../java-improve-the-speed-of-a-tomcat-server-with-mysql/'>Java &#8211; Improve the speed of a Tomcat Server with MySQL</a></li><li class="list-group-item"><a href='../c-best-way-to-get-push-notifications-to-server-from-ms-sql-server/'>C# &#8211; Best way to get push notifications to server from MS SQL Server</a></li><li class="list-group-item"><a href='../java-websockets-vs-ajax-call-for-scheduled-event/'>Java &#8211; WebSockets vs Ajax call for scheduled event</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>