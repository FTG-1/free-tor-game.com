<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Injecting DAO dependencies into Service Class in Core Java &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087734 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087734" class="post-1087734 software type-software status-publish hentry category-software tag-dependencies tag-design-patterns tag-java tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Injecting DAO dependencies into Service Class in Core Java</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">dependencies</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">object-oriented</span></p><div class="entry-content"><p>We don&#39;t have any frameworj like Spring where we can inject dependencies using annotations or xml file.<br /> We have handler classes, service classes and dao classes.</p><p>Handler classes access service which perform business logic to get the data to be persisted into the db using dao layer.</p><p>Now I have seen that in our project we are adding the dao dependencies in the Service class by declaring them as shown below:</p><p>TestService.java</p><pre><code>Class ServiceImpl{

    private static final TestAccessor accessor = TestAcceessor.Instance;

}
</code></pre><p>Here the <code>TestAcceessor</code> is an <code>enum</code> and is made Singleton.</p><p>My questions are as follows:</p><ol><li><blockquote><p>Is implementing the Accessors singleton using enum and then declaring<br /> them as shown above(<code>static final</code>) means there is no tight coupling<br /> between our project&#39;s <code>Service</code> class and <code>DAO</code> class?</p></blockquote><p>IMO there is no tight coupling as we are just accessing the enum constant and any change to <code>DAO</code> enum doesn&#39;t make us change the service class.</p></li><li><blockquote><p>Since we are accessing <code>Service</code> classes from <code>Handler</code> classes, how can<br /> we inject DAO dependencies if required into service(We don&#39;t use<br /> Spring) class?</p></blockquote><p>IMO we don&#39;t want to do that from Handler as that would expose our <code>DAO</code> classes to <code>Handler</code> and thus make them insecure.</p></li></ol></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I don&#39;t understand this code:</p><pre><code>Class ServiceImpl{

    private static final TestAccessor accessor = TestAcceessor.Instance;

}
</code></pre><p>ServiceImple <strong>knows</strong> it&#39;s being tested? It always gets a <code>TestAccessor</code>?</p><p>The <a href="https://blog.ploeh.dk/2014/06/10/pure-di/" rel="nofollow noreferrer">pure dependency injection</a> version of this code looks like this:</p><pre><code>public static void main(String[] args) {

    TestAccessor testAccessor = new TestAccessor();
    ServiceImple service = new ServiceImple(testAccessor);

    service.start();
}

Class ServiceImpl{

    ServiceImpl(Accessor accessor){
        this.accessor = accessor;
    }
    Accessor accessor;

    ...
}
</code></pre><p>Here <code>serviceImple</code> has no idea what kind of Accessor it&#39;s using or where to find it. You can feed it anything it knows how to talk to. You don&#39;t have to change any globally located anything to do that.</p><p>Now you don&#39;t have to do it this way. But, using the locating method:</p><p>Show me how you do polymorphism.</p><p>The fact that your classes have no state means nothing to me. I make stateless instances all the time. Doesn&#39;t hurt a thing. Instance state isn&#39;t the only reason to have an instance. The ability to polymorphically deploy messages (events and commands) is also important. Tell me how you do that.</p><p>Injecting doesn&#39;t mean locating. You are not using dependency injection. You are using a <a href="https://martinfowler.com/articles/injection.html" rel="nofollow noreferrer">service locator</a>. Yours is just distributed as static method getters.</p><blockquote><p>IMO there is no tight coupling as we are just accessing the enum constant and any change to DAO enum doesn&#39;t make us change the service class.</p></blockquote><p>That still means you&#39;re stuck with one service class. That&#39;s the coupling. The coupling is in the form that things KNOW where to find their dependencies. Done this way you can&#39;t achieve polymorphism by simply handing them different things. You have to change whats where they expect to find their dependencies. That makes achieving polymorphism difficult because if you change the dependency that where your class expects to find it you&#39;ve changed that dependency for <em>everything</em> that uses it. That&#39;s called a global. Reasoning about the impact of messing with them is hard.</p><p>People often trot out testability as the argument against this kind of coupling but that misses the real point. There are many frameworks that use reflection tricks unshoot yourself in the foot when you work this way. These bandaids aren&#39;t going to heal the bullet wound of global dependencies.</p><p>Not knowing where your dependencies come from is nice because now finding them is not your problem. It means you can focus on using the dependencies. It means you know what you&#39;re using was meant for you because they were given specifically to you.</p><p>Doesn&#39;t that just move the problem somewhere else? Yes it does. You can create everything in <code>main()</code> and inject from there. You can a simple factory method that locates the dependencies and then injects them. What? Yes I said locates. Locating isn&#39;t evil. It&#39;s just best done by construction code in classes/moduals/main that doesn&#39;t have to know how to use anything. This is the <a href="http://www.netobjectives.net/files/books/esad/essential-skills-separate-use-from-construction.pdf" rel="nofollow noreferrer">separate use from construction</a> principle. It&#39;s important enough that if you do use static methods to build instances they shouldn&#39;t hang off the same class name that instantiate unless you know some damn good default dependencies.</p><p>You shouldn&#39;t make it unimaginable to write a different static factory method that builds the instance with different dependencies. This should be no more difficult then giving the new factory a good name.</p><p>Show me how you have the ability to separate use and construction decisions like this I&#39;ll forget about <a href="https://www.kenneth-truyers.net/2014/11/19/how-to-use-pure-di/" rel="nofollow noreferrer">pure dependency injection</a>. Show me how you do polymorphism.</p><blockquote><blockquote><p>Since we are accessing Service classes from Handler classes, how can we inject DAO dependencies if required into service(We don&#39;t use Spring) class?</p></blockquote><p>IMO we don&#39;t want to do that from Handler as that would expose our DAO classes to Handler and thus make them insecure.</p></blockquote><p>Unless you have a <code>SecurityManager</code> Hanging DAO&#39;s off static finals wont secure them either thanks to <a href="https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection">reflection</a>. Just because you want to control access to something doesn&#39;t mean it has to exist in only one place or only have one form.</p><p>Look into <a href="https://docs.oracle.com/javase/7/docs/api/java/security/GuardedObject.html" rel="nofollow noreferrer">GuardedObject</a> to control access to an object. Then you can pass it to whatever.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-service-layer-vs-dao-why-both/'>Java &#8211; Service layer vs DAO &#8212; Why both</a></li><li class="list-group-item"><a href='../java-converting-static-utility-class-into-singleton/'>Java &#8211; Converting static utility class into singleton</a></li><li class="list-group-item"><a href='../java-using-prototype-non-spring-managed-beans-in-spring-web-application/'>Java &#8211; Using prototype/non-Spring managed beans in Spring Web application</a></li><li class="list-group-item"><a href='../c-wpf-dialog-service-as-injectable-service-or-a-static-class/'>C# &#8211; WPF, Dialog Service as injectable Service or a Static class</a></li><li class="list-group-item"><a href='../object-oriented-depend-on-abstractions-not-on-concretions-what-is-the-exact-meaning-of-this-term/'>Object-oriented &#8211; “Depend on abstractions, not on concretions” what is the exact meaning of this term</a></li><li class="list-group-item"><a href='../c-design-pattern-how-to-inject-dependencies-into-a-command-pattern/'>C# &#8211; Design pattern: How to inject dependencies into a Command pattern</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>