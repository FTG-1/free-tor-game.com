<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; Best way to parse a file &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069769 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069769" class="post-1069769 software type-software status-publish hentry category-software tag-design tag-parsing tag-php tag-web-development"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; Best way to parse a file</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design</span><span class="mr-2 badge badge-info">parsing</span><span class="mr-2 badge badge-warning">PHP</span><span class="mr-2 badge badge-primary">web-development</span></p><div class="entry-content"><p>I&#39;m trying to find a better solution for making a parser to some of the famous file formats out there such as: <a href="http://en.wikipedia.org/wiki/EDIFACT" rel="nofollow">EDIFACT</a> and <a href="http://en.wikipedia.org/wiki/TRADACOMS" rel="nofollow">TRADACOMS</a>.</p><p>If you aren&#39;t familiar with these standards then check out this example from Wikipedia:</p><blockquote><p>See below for an example of an EDIFACT message used to answer to a<br /> product availability request:-</p></blockquote><pre><code>UNA:+.? &#39;
UNB+IATB:1+6XPPC+LHPPC+940101:0950+1&#39;
UNH+1+PAORES:93:1:IA&#39;
MSG+1:45&#39;
IFT+3+XYZCOMPANY AVAILABILITY&#39;
ERC+A7V:1:AMD&#39;
IFT+3+NO MORE FLIGHTS&#39;
ODI&#39;
TVL+240493:1000::1220+FRA+JFK+DL+400+C&#39;
PDI++C:3+Y::3+F::1&#39;
APD+714C:0:::6++++++6X&#39;
TVL+240493:1740::2030+JFK+MIA+DL+081+C&#39;
PDI++C:4&#39;
APD+EM2:0:130::6+++++++DA&#39;
UNT+13+1&#39;
UNZ+1+1&#39;
</code></pre><p>The UNA segment is optional. If present, it specifies the special characters that are to be used to interpret the remainder of the message. There are six characters following UNA in this order:</p><ul><li>component data element separator (: in this sample)</li><li>data element separator (+ in this sample)</li><li>decimal notification (. in this sample)</li><li>release character (? in this sample)</li><li>reserved, must be a space</li><li>segment terminator (&#39; in this sample)</li></ul><hr/><p>As you can see it&#39;s just some data formatted in a special way waiting to be parsed (much like <strong>XML</strong> files).</p><p>Now my system is built on PHP and I was able to create parser using regular expressions for each segment, but the problem is not everybody implements the standard perfectly.</p><p>Some suppliers tend to ignore optional segments and fields entirely. Others may choose to send more data than others. That&#39;s why I was forced to create validators for segments and fields to test if the file was correct or not.</p><p>You can imagine the nightmare of regular expressions I&#39;m having right now. In addition each supplier needs many modifications to the regular expressions that I tend to build a parser for each supplier.</p><hr/><p><strong>Questions:</strong></p><p>1- Is this the best practice for parsing files (using regular expressions)?</p><p>2- Is there a better solution for parsing files (maybe there are ready made solution out there)? Will it be able to show what segment is missing or if the file is corrupted?</p><p>3- If I have to build my parser anyway what design pattern or methodology should I use?</p><p><strong>Notes:</strong></p><p>I read somewhere about yacc and ANTLR, but I don&#39;t know if they match my needs or not!</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>What you need is a true parser. Regular expressions handle lexing, not parsing. That is, they identify tokens within your input stream. Parsing is the context of the tokens, I.E. who goes where and in what order.</p><p>The classic parsing tool is <a href="http://www.gnu.org/software/bison/manual/html_node/#Top" rel="nofollow noreferrer">yacc/bison</a>. The classic lexer is <a href="http://flex.sourceforge.net/manual/#Top" rel="nofollow noreferrer">lex/flex</a>. Since php allows for <a href="https://stackoverflow.com/a/706980/724357">integrating C code</a>, you can use flex and bison to build your parser, have php call it on the input file/stream, and then get your results.</p><p>It will be <a href="http://swtch.com/~rsc/regexp/regexp1.html" rel="nofollow noreferrer">blazing fast</a>, and far easier to work with <em>once you understand the tools</em>. I suggest reading <a href="http://shop.oreilly.com/product/9781565920002.do" rel="nofollow noreferrer">Lex and Yacc 2nd Ed.</a> from O&#39;Reilly. For an example, I&#39;ve set up a <a href="https://github.com/srathbun/example-parser" rel="nofollow noreferrer">flex and bison project on github</a>, with a makefile. It is cross compilable for windows if necessary.</p><p>It <em>is</em> complex, but as you found out, what you need done is complex. There is a great deal of &#34;stuff&#34; that must be done for a properly working parser, and flex and bison deal with the mechanical bits. Otherwise, you find yourself in the unenviable position of writing code at the same abstraction layer as assembly.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../getting-data-from-a-webpage-in-a-stable-and-efficient-way/'>Getting data from a webpage in a stable and efficient way</a></li><li class="list-group-item"><a href='../java-generic-file-parser-design-in-java-using-the-strategy-pattern/'>Java &#8211; Generic file parser design in Java using the Strategy pattern</a></li><li class="list-group-item"><a href='../php-how-to-choose-a-proper-parser-generator-for-php/'>Php &#8211; How to choose a proper parser generator for PHP</a></li><li class="list-group-item"><a href='../java-object-oriented-parser-model-review/'>Java &#8211; Object oriented parser model review</a></li><li class="list-group-item"><a href='../an-elegant-way-to-split-text-into-words-combined-with-adjacent-punctuation-and-determine-which-punctuation-mark-it-is/'>An elegant way to split text into words combined with adjacent punctuation and determine which punctuation mark it is</a></li><li class="list-group-item"><a href='../is-it-wrong-to-parse-yaml-true-as-a-string/'>Is it wrong to parse YAML `true` as a string</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>