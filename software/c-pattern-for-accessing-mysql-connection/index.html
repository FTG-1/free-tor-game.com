<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Pattern for Accessing MySQL connection &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079072 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079072" class="post-1079072 software type-software status-publish hentry category-software tag-c tag-design-patterns tag-mysql"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Pattern for Accessing MySQL connection</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">MySQL</span></p><div class="entry-content"><p>We have an application which is C++ trying to access MySQL database.</p><p>There are several (about 5 or so) threads in the application (with Boost library for threading) and in each thread has a few objects, each of which is trying to access Database for its&#39; own purpose. It has a simple ORM kind of model but that really is not an important factor here.</p><p>There are three potential access patterns i can think of:</p><ol><li><p>There could be single <code>connection object</code> per application or thread and is shared between all (or group). The object needs to be thread safe and there will be contentions but MySQL will not be fired with too many connections.</p></li><li><p>Every object could initiate connection on its own. The database needs to take care of concurrency (which i think MySQL can) and the design could be much simpler. There could be two possibilities here.<br /> a. either object keeps a persistent connection for its life OR<br /> b. object initiate connection as and when needed.</p></li><li><p>To simplify the contention as in case of 1 and not to create too many sockets as in case of 2, we can have group/set based connections. So there could be there could be more than one connection (say N), each of this connection could be shared connection across M objects.</p></li></ol><p>Naturally, each of the pattern has different resource cost and would work under different constraints and objectives.</p><p>What criteria should i use to choose the pattern of this for my own application?</p><p>What are some of the advantages and disadvantages of each of these pattern over the other?</p><p>Are there any other pattern which is better?</p><hr/><p>PS: I have been through these questions:<br /> <a href="https://softwareengineering.stackexchange.com/questions/148879/mysql-one-connection-vs-multiple">mysql, one connection vs multiple</a><br /> and<br /> <a href="https://softwareengineering.stackexchange.com/questions/140788/mysql-with-mutiple-threads-and-processes">MySQL with mutiple threads and processes</a><br /> But they don&#39;t quite answer exactly what i am trying to ask.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><ol><li>There could be single connection object per application or thread and is shared between all (or group). The object needs to be thread safe and there will be contentions but MySQL will not be fired with too many connections.</li></ol></blockquote><p>This is essentially doing what the server is already doing, on client side. Unless the client side may fire a crazy number of connections and you don&#39;t have control on it, better just create connections and let server handles the synchronization.</p><p>Your second option does not necessarily incur a lot of connections. Take a look at <a href="http://en.wikipedia.org/wiki/Scope_(computer_science)#Dynamic_scoping" rel="nofollow">Dynamic Scoping</a>. It&#39;s easy to implement dynamic scoping in C++ so you basic have one connection per thread.</p><p>The 3rd option is more or less as opposite to option 1 - if you stick with one connection per thread approach, why not simply restrict the number of threads?</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-best-way-to-have-a-central-data-repository/'>C++ &#8211; Best way to have a central data repository</a></li><li class="list-group-item"><a href='../javascript-thesql-one-connection-vs-multiple/'>Javascript &#8211; thesql, one connection vs multiple</a></li><li class="list-group-item"><a href='../design-pattern-for-complex-data-modeling/'>Design Pattern for Complex Data Modeling</a></li><li class="list-group-item"><a href='../c-best-creational-pattern-for-loggers-in-a-multi-threaded-system/'>C++ &#8211; Best Creational Pattern for loggers in a multi-threaded system</a></li><li class="list-group-item"><a href='../c-an-appropriate-way-for-managing-a-mysql-connection-through-c/'>C# &#8211;  an appropriate way for managing a MySQL connection through C#</a></li><li class="list-group-item"><a href='../java-a-good-way-to-program-for-closing-a-long-running-mysql-connection-and-re-open-it-at-intervals/'>Java &#8211; A good way to program for closing a long running MySQL connection and re-open it at intervals</a></li><li class="list-group-item"><a href='../java-is-storing-the-connection-pool-in-a-singleton-a-bad-practice/'>Java &#8211; Is storing the connection pool in a singleton a bad practice</a></li><li class="list-group-item"><a href='../database-is-it-okay-to-keep-open-the-mysql-database-connection-open-through-out-the-application-or-open-and-close-connection-query-wise/'>Database &#8211; Is it okay to keep open the MySQL database connection open through out the Application or open and close connection query-wise</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>