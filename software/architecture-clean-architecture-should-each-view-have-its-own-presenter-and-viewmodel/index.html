<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture &#8211; Clean Architecture: Should each view have its own presenter and viewmodel &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070642 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070642" class="post-1070642 software type-software status-publish hentry category-software tag-architecture tag-clean-architecture"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture &#8211; Clean Architecture: Should each view have its own presenter and viewmodel</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">clean-architecture</span></p><div class="entry-content"><p>I am still thinking about clean architecture and just ran into a question regarding the higher levels (Views and Presenters)<br /> I am posting Uncle Bobs picture first here that you remember what I am talking about:</p><p><a href="../../../i.stack.imgur.com/rXnso.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/rXnso.png" alt="enter image description here"/></a></p><p>Lets say I have a small application where CRUD operations can be performed for customers.</p><p>Lets also say there are three ways to output the customer data to the user:</p><ul><li>A form component, where a new customer with name and birthdate can be updated.</li></ul><p>(The same form is also used to create a new customer, but in this case I do not need to load existing data)</p><ul><li>A detail component where the name and birthdate of the customer are shown on the screen.</li><li>A PDF-Export where a customer should be displayed in a PDF with the birthdate in US-Format. If the customer is exactly 60 years old, the birthdate should be decorated with special color &#8211; these customers get a present. ðŸ™‚</li></ul><p>Now lets say I want to implement this.<br /> My approach for this looks like this:</p><p><a href="../../../i.stack.imgur.com/ltmLx.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/ltmLx.png" alt="enter image description here"/></a></p><p>You can see that I have only one class for output data (one file) and also just one abtract presenter class that gets the OutputData.</p><p>But then I have three concrete presenters with three concrete view models that are responsible for my views.<br /> Now my doubts:</p><ol><li><p>Is this correct? Did I understand the clean architecture?</p></li><li><p>My concrete presenters and my viewmodels for the HTML form and the HTML detail are exactly the same. This feels redundant. Should I    avoid this and re-use my view models for both scenarios? Or should I    stick with the borders, as the requirements of the future might    change for forms, so that I need seperate models/concrete presenters?</p></li><li><p>If I finally want no US-Format in the date anymore, but lets say&#8230; european one. Do I need a new concrete presenter, just for    this? Or should the presenter ask the use-case for the global format    of the application and then decide on the base of that?</p></li><li><p>If customers that are 60 should receive a birthday present &#8211; this logic has to be in a use case. But I am a little lost where this    would go&#8230; Probably another use case that gets every night all    customers from the repository that are 60 and sends a present&#8230; ?    But this would not relate at all with the decoration in my view    model? So the information about the number &#34;60&#34; would be in my    viewmodel and my use case? Two redundant times? Or how?</p></li></ol></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>Is this correct? Did I understand the clean architecture?</p></blockquote><p>If you want to create a solution consistent with clean architecture you have a number of issues.</p><p><a href="../../../i.stack.imgur.com/ObD0j.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/ObD0j.png" alt="enter image description here"/></a></p><p>Dependencies should only cross boundaries going in one direction. That keeps the inside from needing to know about the outside. That means the outside can change and the inside won&#39;t care. This also helps keep your object graph <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" rel="noreferrer">acyclical</a>. It keeps code changes from cycling through your code. Instead of dependencies tending to form a maze they they tend to form trees.</p><blockquote><p>My concrete presenters and my viewmodels for the HTML form and the HTML detail are exactly the same. This feels redundant. Should I avoid this and re-use my view models for both scenarios? Or should I stick with the borders, as the requirements of the future might change for forms, so that I need separate models/concrete presenters?</p></blockquote><p>Your <code>View Model</code> and <code>Output Data</code> objects shouldn&#39;t be the same. If they are that means the <code>Presenter</code> hasn&#39;t done anything useful. It&#39;s not the views job to transform how data is presented. That&#39;s the presenters job.</p><blockquote><p>If I finally want no US-Format in the date anymore, but lets say... european one. Do I need a new concrete presenter, just for this? Or should the presenter ask the use-case for the global format of the application and then decide on the base of that?</p></blockquote><p>Your <code>Database</code>, and <code>Entities</code> should have an agreed on way to store dates. But your <code>Presenters</code> should be free to present those dates in any form they wish.</p><blockquote><p>If customers that are 60 should receive a birthday present - this logic has to be in a use case. But I am a little lost where this would go... Probably another use case that gets every night all customers from the repository that are 60 and sends a present... ? But this would not relate at all with the decoration in my view model? So the information about the number &#34;60&#34; would be in my viewmodel and my use case? Two redundant times? Or how?</p></blockquote><p>If a user typed in a date, or selected today&#39;s date, and sent that date to the correct <code>Controller</code> it would build an <code>Input Data</code> with that date in it, using a way to express dates that the <code>Controller</code> and <code>Use Case</code> agree on.</p><p>The <code>Controller</code> then calls the correct <code>Use Case Interactor</code> and passes the <code>Input Data</code>. The <code>Use Case Interactor</code> uses either the <code>Entities</code> or the <code>Data Access</code> (or both) to get a list of people with birthdays on this date and uses that list to build <code>Output Data</code>. <code>Output Data</code> need not be a result set. It can conform to any structure that the <code>Use Case</code> and <code>Presenter</code> agree on. It may simply be a collection.</p><p>The <code>Use Case</code> calls the <code>Presenter</code> and passes the <code>Output Data</code>. The <code>Presenter</code> is now free to put last name first, first name first, draft happy birthday emails to be sent to each person, or send one email with a list of these people to a florist. Which one it does depends entirely on which presenter you configured to receive this.</p><p>Views should not do real work. They should be striped of interesting logic and simply be things you throw data at. Data that is already in its final form.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-loose-coupling-presenter-to-view-in-mvp/'>Design &#8211; Loose Coupling Presenter to View in MVP</a></li><li class="list-group-item"><a href='../architecture-how-many-presenters-should-i-use-in-proper-mvp/'>Architecture &#8211; How many presenters should I use in proper MVP</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-use-case-containing-the-presenter-or-returning-data/'>Architecture &#8211; Clean Architecture: Use case containing the presenter or returning data</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-what-is-the-view-model/'>Architecture &#8211; Clean Architecture: What is the View Model</a></li><li class="list-group-item"><a href='../c-implementing-clean-architecture/'>C# &#8211; Implementing clean architecture</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>