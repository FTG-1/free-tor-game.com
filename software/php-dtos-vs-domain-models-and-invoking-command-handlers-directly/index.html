<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; DTOs vs Domain Models and invoking Command Handlers directly &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073441 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073441" class="post-1073441 software type-software status-publish hentry category-software tag-api tag-architecture tag-design-patterns tag-php tag-soap"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; DTOs vs Domain Models and invoking Command Handlers directly</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">Architecture</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">PHP</span><span class="mr-2 badge badge-danger">soap</span></p><div class="entry-content"><p>I was just hoping someone might be able to answer a few questions I have regarding the proper design of DTOs and Domain Models. I&#39;m currently working on a project which involves leveraging a SOAP API.</p><p>Since we&#39;re working with SOAP we have the added benefit of generating a number of objects (DTOs) using the provided WSDL file. I&#39;ve also subsequently built a number of commands which are allowing us to better encapsulate the intent of each request and simplify our interface to the API.</p><p>Each command handler has an associated &#34;command&#34; object which stores all of the necessary data to complete the request successfully.</p><p>I actually have three questions regarding this approach:</p><p>1) Is it unusual to call command handlers directly, thereby replacing the Command Bus as our invoker. Obviously we would lose the ability (at least in these select instances) to pass our commands into a queuing application which would allow us to execute the command in a non-sequential order.</p><p>However, I have identified some cases where we would actually need to parse the API response data on runtime. Could this be construed as a potential issue in the design of our application?</p><p>2) We&#39;re currently performing validation on the request data before passing it into our immutable command objects. However, there may be some cases where we need parse data from the DB/CLI prior to initializing our commands.</p><p>As a result, I&#39;ve considered placing our validation logic into the command objects themselves. If validation fails then a exception might be thrown. Does this seem like a reasonable approach or am I again violating some design principles?</p><p>3) This may sound foolish but what exactly is the difference between a Domain Object and a DTO. I&#39;ve heard the command objects themselves being referred to as a DTO yet they appear to belong to the domain layer (unless I&#39;m mistaken).</p><p>Could the command object be more accurately described as a DTO or a Domain Model?</p><p>Thanks again.<br /> I do appreciate the feedback.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Unfortunately, I am not sure what your first question really means, therefore am unable to answer that, but I can help you with the rest.</p><blockquote><p>2) We&#39;re currently performing validation on the request data before
 passing it into our immutable command objects. However, there may be
 some cases where we need parse data from the DB/CLI prior to
 initializing our commands.</p><p>As a result, I&#39;ve considered placing our validation logic into the
 command objects themselves. If validation fails then a exception might
 be thrown. Does this seem like a reasonable approach or am I again
 violating some design principles?</p></blockquote><p>What you should ask yourself is why are you dealing with invalid objects in the first place so that they require validation after they are created?</p><p>There are two situations why this could happen:</p><ul><li>you do not trust the variables which are used when an object is created</li><li>you do not trust the objects themselves, you do not believe, that what they are doing with their data is perfect</li></ul><p>Both of these cases are bad, but the second one is much worse.</p><p>The first case can and does happen, when you use variables, which the user has control over. Ie. he can input anything he want. This is something you really have no control over, so you need to make sure to check <em>all</em> options before creating an object.</p><p>The second case happens when, even though you model a class, you do not trust the class does what it is supposed to do. Do you perhaps expose too much of its internal structure, giving the programmer too many posibilities on how to operate on the object, perhaps having simple getters and setters, instead of actual methods?</p><p>I said the second case is worse. The reason why it is worse is because you do not trust your own domain. And if you cannot trust it, then who?</p><blockquote><p>3) This may sound foolish but what exactly is the difference between a
 Domain Object and a DTO. I&#39;ve heard the command objects themselves
 being referred to as a DTO yet they appear to belong to the domain
 layer (unless I&#39;m mistaken).</p></blockquote><p><strong>DTO</strong> is a very simple and stupid object which consists only from getters and setters and glues small chunks of seemingly related information together to make one larger structure, so the data requests may be reduced.</p><p><a href="http://martinfowler.com/eaaCatalog/dataTransferObject.html" rel="nofollow">Martin Fowler</a> provides a simple example of a DTO object.</p><hr/><p><strong>Domain model</strong> is an object containing your business logic. It is an object which should have no methods starting with the prefix <code>set</code>, it should follow the <em>Tell, Don&#39;t ask</em> principle, etc. The domain is the core of your application, the domain objects make sure, everything works well, they throw domain exceptions on invalid operations to make sure, they are always in a valid state.</p><p>The <em>Tell, Don&#39;t ask</em> principle provides encapsulation. It turns this:</p><pre><code>if (personObject.GetSex() == &#34;Male&#34;) { ... }
</code></pre><p>into this:</p><pre><code>if (personObject.IsMale()) { ... }
</code></pre><p>The programmer using a <code>Person</code> class no longer cares, how the <code>Sex</code> property is represented, if it is a <code>string</code>, an <code>enum</code> or a <code>boolean</code>. The only thing it cares about is the <code>Person::IsMale : boolean</code> method.</p><p><strong>Domain model summary:</strong> It is an object containing data which are directly tied to it (no persistence logic is allowed, the object has to deal only with its own data) and encapsulates operations to make sure once created, it will never find itself in an invalid state.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-command-handlers-and-ddd/'>C# &#8211; Command handlers and DDD</a></li><li class="list-group-item"><a href='../exposing-domain-models-over-api/'>Exposing domain models over API</a></li><li class="list-group-item"><a href='../php-how-to-prevent-multiple-form-submissions-when-user-reloads-the-page/'>Php &#8211; How to prevent multiple form submissions when user reloads the page</a></li><li class="list-group-item"><a href='../dto-can-be-considered-as-business-objects-with-behavior/'>DTO can be considered as Business objects (with behavior)</a></li><li class="list-group-item"><a href='../use-dto-pattern-or-serialize-domain-objects/'>Use DTO Pattern or Serialize Domain Objects</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>