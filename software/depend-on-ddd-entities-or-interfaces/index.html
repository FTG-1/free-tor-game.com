<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Depend on DDD Entities or Interfaces &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081315 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081315" class="post-1081315 software type-software status-publish hentry category-software tag-dependency-inversion tag-domain-driven-design tag-entity tag-interfaces"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Depend on DDD Entities or Interfaces</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">dependency-inversion</span><span class="mr-2 badge badge-info">domain-driven-design</span><span class="mr-2 badge badge-warning">entity</span><span class="mr-2 badge badge-primary">interfaces</span></p><div class="entry-content"><p>My understanding is that the <a href="https://en.wikipedia.org/wiki/Dependency_inversion_principle" rel="nofollow noreferrer">dependency inversion principle</a> does not apply to <a href="https://en.wikipedia.org/wiki/Domain-driven_design" rel="nofollow noreferrer">entities</a>, because entities basically <em>are</em> your application &#8211; it generally doesn&#39;t make sense to swap out a different implementation of, for example, Student.</p><p>However, one of my coworkers brought up a point. We work for an umbrella company that owns other companies. Often, the logic is very similar and the entities can just have a few &#34;if(Company==1){&#8230;}else{&#8230;}&#34; in them. Occasionally, however, there are many differences between them.</p><p>In this case, it was suggested to have, for example, a Class Teacher entity that contains IEnumerable, as well as two separate entities, StudentCompany1 and StudentCompany2 that implement IStudent.</p><p>In this case, would it make sense to do such a thing? Or should the logic all go into Student, even if complicated? Or maybe some other solution, such as inheritance? Or is my original assumption wrong, and entities should not depend on each other but rather on abstractions of each other?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Well, well, let&#39;s get something that is bothering me out of the way first...</p><pre><code>if (Company == 1)
{
    //This is how code should NEVER look like
}
</code></pre><p>OK, now that I took it out of me it, let&#39;s get to the point!</p><h1>Short Answer</h1><p>The short answer to your question is <strong>yes</strong>, it does make sense to make entities depend on abstractions in some occasions. Once you translate your Domain Design to an Object-Oriented library, different rules come into play and, by these rules, there are no &#34;Entities&#34;... it&#39;s just values, abstractions and behaviors, so <strong>anything is allowed</strong> (as long as it makes your life easier, of course)!</p><h1>Long Answer</h1><p>Object-Oriented Programming and Domain-Driven Design are <strong>not the same thing</strong>, nor are they each other&#39;s &#34;blessing&#34;. They are distinct philosophies, dealing with distinct problem domains. Entities represent something almost entirely philosophical in Domain-Driven Design, as do aggregate roots, value objects, etc. Putting them all together using Object-Oriented Programming is simply using a <strong>means</strong> (one of many, really) to achieve an <strong>end</strong>.</p><p>Entities happen to be representable as state-holding units (what we call classes) and these can be aggregated in other such units to enforce a desired consistency between otherwise unrelated elements (or elements related to each other only through philosophical descriptions and meanings). In that sense, a Student and a Teacher are expected to be found close to some School or Department entity conceptually. These relations are not always straightforward and, more often than not, they are not unique.</p><p>Using Object-Oriented Programming techniques helps you <strong>define</strong> your domain model and <strong>describe</strong> the state of all entities, as well as the relations between different entities. The point here is that you must remember that when talking about O-OP and D-DD, you are actually talking about <strong>two different things</strong> and, therefore, there is no &#34;natural&#34; way to translate or exchange concepts or ideas between the two. That is to say, just because Object-Oriented Programming thrives on abstractions and is heavily based on contracts (interfaces), it is not necessary that D-DD can also benefit from these concepts (all the more as D-DD speaks of contracts as the relations between concrete elements of reality). Think about, for example, how useful an abstraction of a Point with 2 coordinates would be, in almost any domain. What else can play the role of a Point besides... a Point? Why make a Point an interface, then?</p><h1>Because...</h1><p>Entities have state but they can also have <strong>behavior</strong>. And while state is tangibly defined, behavior can always be abstracted away! This is where interfaces come into play! Let&#39;s get back to your original question and thought:</p><blockquote><p>[...] it generally doesn&#39;t make sense to swap out a different implementation of, for example, Student.</p></blockquote><p>If you think of a Student entity as, for example, a human with a Name, an ID, an Age, a Sex, the Courses they are enrolled in, etc. indeed, <strong>it does not</strong>. Then you don&#39;t need O-OP to achieve anything. You can create an elaborate database and get away with equally elaborate queries about everything.</p><p>But how about thinking of a Student entity as a dynamic element with behavior. What if the Student object is <strong>tasked</strong> to give you information useful for your problem, rather than act as a data container? What may not appear very intuitive right now, it just might when you consider some use cases. Compare, for example, the following two definitions (C#-like code):</p><pre><code>
public class StudentEntity
{
    ...

    //OK, you could have a dedicated type for Age,
    //but let&#39;s keep it simple for the moment.
    public int Age { get; }

    ...
}

public interface IStudent
{
    bool IsAdult();
}
</code></pre><p>If the <code>StudentEntity</code> is your implementation, you need a number of <code>Service</code> objects to perform, for example, queries with respect to the StudentEntity. Compare, then, the following two excerpts:</p><p>Excerpt 1 is based on the StudentEntity class to retrieve information and make &#34;judgments&#34;.</p><pre><code>public class StudentQueryService
{
    public bool IsStudentAdult(StudentEntity student)
    {
        if (Country == Countries.Germany)
        {
            return student.Age &gt;= 18;
        }
        else if (Country == Countries.Japan)
        {
            //It may get even more complicated...
            if (date of check is before 31 March 2022)
            {
                return student.Age &gt;= 20;
            }
            else
            {
                return student.Age &gt;= 18;
            }
        }
        else if (...)
        {
            ..
        }
        //and so forth!
    }
}
</code></pre><p>Excerpt 2 simply relies on asking the interface, so the unknown implementation behind the interface answers.</p><pre><code>public abstract class StudentBase : IStudent
{
    protected int _age;

    public abstract bool IsAdult();
}

public class SwedishStudent : StudentBase
{
    public override bool IsAdult() =&gt; _age &gt;= 18;
}

public class JapaneseStudent : StudentBase
{
    public override bool IsAdult()
    {
        if (date of check is before 31 March 2022)
        {
            return _age &gt;= 20;
        }
        else
            return _age &gt;= 18;
    }
}

//And so forth...
</code></pre><p>How well does the first excerpt fare in comparison to the second in terms of maintainability? Well, frankly, <strong>not too well</strong>. If the law changes, you have to inspect ALL ### lines to ensure that the new legislation is now correctly represented. Compare that to just focusing on ThaiStudent and simply correcting 1-2 lines of code, so they can keep using it in Thailand after your latest update patch!</p><p>OK, I have to admit that the example above is extraordinarily detached from reality, but the purpose is to make it clear that interfaces are just a means to an end (i.e. to abstract behavior) and it doesn&#39;t matter if you employ them to abstract away the specifics of an OS service, a web-request or the behavior of a Domain Entity. They <strong>always</strong> have a <strong>potential</strong> to be useful!</p><p>In short, if you want a truly useful (and far from anemic) Domain Model, you can &#34;drag&#34; your rules, limitations, interaction constraints, etc. <strong>inside</strong> the Domain elements, as behavior (i.e. methods). &#34;Blessing&#34; some of your Domain Entities with behavior will lead you to wonder whether these could be enacted differently based on circumstances. So, in these cases, if you want to stay as clear as possible of <code>if{...} else if {...} else if {...}</code> chaos zones, you would create different implementations of domain entity interfaces for your domain entities, at least where it makes sense to do so.</p><p>Just because, in the real world, we (hopefully) don&#39;t discriminate between students of different nationalities, let alone we don&#39;t really ask students whether they are of legal age and just trust their answers, in the O-OP world, tasking the relevant entities with the management of such complications and details effectively hides them from us and lets us focus on developing the rest of the code with somewhat less of an information burden.</p><p>Remember, we borrowed ideas from O-OP and applied them to D-DD. It is was <strong>totally unnecessary</strong> but it offered a layer of flexibility that has the real potential to ease maintenance in the long run!</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-why-are-interfaces-more-helpful-than-superclasses-in-achieving-loose-coupling/'>Object-oriented &#8211; Why are interfaces more helpful than superclasses in achieving loose coupling</a></li><li class="list-group-item"><a href='../php-ddd-creating-reusable-modules-and-service-type-distinctions-domain-infrastructure-application/'>Php &#8211; DDD: Creating reusable modules and service type distinctions (Domain, Infrastructure, Application)</a></li><li class="list-group-item"><a href='../coding-to-interfaces-vs-abstract-inheritance/'>Coding to Interfaces vs Abstract Inheritance</a></li><li class="list-group-item"><a href='../how-to-deal-with-ui-data-requirements-in-ddd/'>How to deal with UI data requirements in DDD</a></li><li class="list-group-item"><a href='../domain-vs-entities-model-domain-driven-design-ddd/'>Domain vs Entities model? Domain-Driven-Design (DDD)</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>