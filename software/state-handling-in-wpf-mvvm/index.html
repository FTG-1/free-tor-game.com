<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>State handling in WPF-MVVM &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081212 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081212" class="post-1081212 software type-software status-publish hentry category-software tag-mvvm tag-state tag-wpf"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">State handling in WPF-MVVM</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">mvvm</span><span class="mr-2 badge badge-info">state</span><span class="mr-2 badge badge-warning">wpf</span></p><div class="entry-content"><p>I am looking for advice on handling states in a WPF MVVM environment.</p><p>As an example, assume we have</p><p><a href="../../../i.stack.imgur.com/1AkDb.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/1AkDb.png" alt="enter image description here"/></a></p><ul><li>A TreeView (or some other ItemsControl) with some items and</li><li>a button that is enabled when an item is selected.</li></ul><p>My ViewModel contains a property <code>SelectedItem</code> that is bound to the <code>SelectedItem</code> of the TreeView.</p><p>When the Button is clicked, we change to &#34;special state&#34;: the current <code>SelectedItem</code> is stored somewhere for later reference (let&#39;s call the storing variable <code>FirstSelectedItem</code>). Then the Selection is cleared, the Button is disabled and the user is supposed to select an item again (can be any item, even the same one). So we get some entry in <code>SelectedItem</code>. Then the data of the item stored in <code>FirstSelectedItem</code> is changed depending on <code>SelectedItem</code> (change some internal properties that are not visible in the view). After this is done, <code>SelectedItem</code> is restored to contain <code>FirstSelectedItem</code>, the Button is enabled and the view is in &#34;normal state&#34; again.</p><p>I would like to know how you approach such problems in WPF. For me it is important to use the MVVM pattern and use codebehind only to redirect stuff to the ViewModel, <strong>and that it is possible to give every UI element a different look and behaviour depending on the current state</strong>. In a more complicated example, it might be that some controls become disabled or show up or execute another command than usual when a certain state is current.</p><p>For the looks, I think a way would be to have some property <code>State</code> in the ViewModel. The UI elements can then somehow make their looks dependent on that state (although I don&#39;t know how, but I&#39;m sure it&#39;s possible).</p><p>For the behaviour, I have no idea. As far as I know, a Button can bind to one Command, and only one. Or can the binding be changed depending on <code>State</code>?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If I understand what you are saying, you need some UI cue to denote when the <code>State</code> property changes. There are many ways to do it in pure MVVM.</p><p>You could use a <a href="https://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter(v=vs.110).aspx" rel="nofollow noreferrer">ValueConverter</a> to convert the value of the state to a System.Windows.Visibility value have that bound to the visibility of certain elements in order to facilitate visibility changes based on the <code>State</code> property. You could do the same with a converter to convert state to a boolean in order to facilitate <code>IsEnabled</code> or <code>IsReadOnly</code> changes too.</p><p>Then, if you wanted the button command to change depending on the state you could change the binding and raise a <code>PropertyChanged</code> on the command for the button. Or just change the underlying method if you are using something like a <a href="https://msdn.microsoft.com/en-us/magazine/dn237302.aspx" rel="nofollow noreferrer">RelayCommand seen here</a>. Or you could just have a command that executes some routine that is affected by the <code>State</code> property. Or maybe pass in the state as a command parameter.</p><p>You could also use <a href="https://msdn.microsoft.com/en-us/library/ms742521(v=vs.110).aspx" rel="nofollow noreferrer">DataTemplates</a> and bind a DataTemplate to the <code>State</code> property.</p><p>Facilitating a state change, depending on what that means, could be business logic, and that should probably not go in the ViewModel (Unless, like Rachel said, it is a very small app with limited need for abstraction). However, what you are attempting to do with the UI can be done with bindings and ViewModel property changes/notifications. There are 1,000 ways to skin a cat, you just need to find the one that best suits you.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../creating-controls-dynamically-in-the-code-behind-or-viewmodel/'>Creating controls dynamically in the code-behind or ViewModel</a></li><li class="list-group-item"><a href='../architecture-wpf-mvvm-ef-poco-guidance-required-on-simple-architecture/'>Architecture &#8211; WPF, MVVM, EF, POCO guidance required on simple architecture</a></li><li class="list-group-item"><a href='../again-mvvm-mvp-story-passing-interface-of-a-view-to-its-view-model-why-it-is-bad/'>Again MVVM / MVP story , passing interface of a view to its view model why it is bad</a></li><li class="list-group-item"><a href='../good-formal-pattern-to-manage-state-in-mvvm/'>Good formal pattern to manage state in MVVM</a></li><li class="list-group-item"><a href='../wpf-mvvm-loading-data-on-startup/'>WPF MVVM Loading data on startup</a></li><li class="list-group-item"><a href='../c-overall-view-validation-with-a-datagrid-and-keeping-to-mvvm/'>C# &#8211; Overall view validation with a datagrid and keeping to MVVM</a></li><li class="list-group-item"><a href='../state-of-selected-items-in-view-or-viewmodel/'>State of selected items in view or viewmodel</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>