<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; How to check if app is offline &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079572 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079572" class="post-1079572 software type-software status-publish hentry category-software tag-android tag-android-development tag-design tag-polling tag-web-services"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; How to check if app is offline</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">android</span><span class="mr-2 badge badge-info">android-development</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">polling</span><span class="mr-2 badge badge-danger">web services</span></p><div class="entry-content"><p>I am developing internal Android apps for the company I work for. In various places in the apps I need to connect to an internal server. This server is shutdown for maintenance for a period of time every night so there are times when it is not available.  There may also be times when the wi-fi connection on the tablet drops.</p><p>If a tablet can&#39;t connect to the server (either due to wi-fi being down or because the server is down) I want the app to work in an offline mode &#8211; basically displaying data from the local database rather than getting live data from the server database.  Also any data to be uploaded to the server should be queued until back online.</p><p>I am considering having a background service that runs a check every X seconds to see if the wi-fi is connected and if so, check if the server is available (via an HTTP HEAD request).  It would then send out a broadcast to say if online or offline and other apps could receive this broadcast and save the connection status.  Then whenever there is any activity in the apps requiring access to the server, they can check the status first and decide how to behave.</p><p>The downside to this is that the service would constantly be running in the background and could  cause performance issues / battery drainage, although having done a little testing I haven&#39;t seen any evidence of this yet so I don&#39;t know whether it would actually ever be a problem.</p><p>So what I&#39;m wondering is whether this method is a good idea or not and if there is a better way to check whether online or offline.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You are leaving the radios turned on practically the whole time and this will undoubtedly use up battery.</p><p>I do see your motivation, however. A decent compromise is to assume that the app is online unless it turns out not to be. If it turns out not to be, <em>and it would like to be</em>, then poll for a connection at long intervals, lengthening as time goes on. 1 second, 5 seconds, 15 seconds, 1 minute, 5 minutes, 15 minutes.</p><p>In addition, every time the app would - as a result of user activity - try to connect to the server, let it try. That will keep the &#34;am I online?&#34; status a little bit fresher, and there is a general principle in mobile app design that when radios are activated because the user asks for them to be, that is not a waste of battery.</p><p>Finally, if your UI can accommodate some sort of Refresh action (a button or a pull-down action) then by all means let that attempt to connect.</p><p>Note: iOS has the ability for an app to be notified by the operating system about a change in connectivity state. I don&#39;t know if there is something similar in Android. The nice thing about this is that the OS can decide when to do its connectivity checks (for example, when it has the radios on for something else already). Even so, that connectivity monitoring is only done when an attempt to contact the server has been made, and failed.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-is-restful-api-appropriate-for-services-which-are-nearly-computational-in-nature/'>Rest &#8211; Is RESTful API appropriate for services which are nearly computational in nature</a></li><li class="list-group-item"><a href='../design-pattern-for-checking-online-service-availability/'>Design &#8211; Pattern for checking online service availability</a></li><li class="list-group-item"><a href='../conflict-resolution-for-two-way-sync-offline-sync/'>Conflict resolution for two-way sync offline sync</a></li><li class="list-group-item"><a href='../whats-the-best-implementation-for-offline-mobile-app-synchronization/'>What&#8217;s the best implementation for offline mobile app synchronization</a></li><li class="list-group-item"><a href='../java-clean-architecture-apps-that-rely-heavily-on-background-services/'>Java &#8211; Clean Architecture: Apps that rely heavily on background services</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>