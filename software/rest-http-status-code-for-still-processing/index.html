<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; HTTP Status Code for &#8220;Still Processing&#8221; &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063668 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063668" class="post-1063668 software type-software status-publish hentry category-software tag-http tag-rest"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; HTTP Status Code for &#8220;Still Processing&#8221;</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">http</span><span class="mr-2 badge badge-info">rest</span></p><div class="entry-content"><p>I&#39;m building a RESTful API that supports queuing long-running tasks for eventual handling.</p><p>The typical workflow for this API would be:</p><ol><li>User fills in form</li><li>Client posts data to API</li><li>API returns 202 Accepted</li><li>Client redirects user to a unique URL for that request (<code>/results/{request_id}</code>)</li><li>~eventually~</li><li>Client visits URL again, and sees the results on that page.</li></ol><p>My trouble is on step 6. Any time a user visits the page, I file a request to my API (<code>GET /api/results/{request_id}</code>). Ideally, the task will have been completed by now, and I&#39;d return a 200 OK with the results of their task.</p><p>But users are pushy, and I expect many overzealous refreshes, when the result is not yet finished processing.</p><p>What is my best option for a status code to indicate that:</p><ul><li>this request exists,</li><li>it&#39;s not done yet,</li><li>but it also hasn&#39;t failed.</li></ul><p>I don&#39;t expect a single code to communicate all of that, but I&#39;d like something that lets me pass metadata instead of having the client expect content.</p><p>It could make sense to return a 202, since that would have no other meaning here: it&#39;s a <code>GET</code> request, so nothing is possibly being &#34;accepted.&#34; Would that be a reasonable choice?</p><p>The obvious alternative to all this &#8212; which functions, but defeats one purpose of status codes &#8212; would be to always include the metadata:</p><pre><code>200 OK

{
    status: &#34;complete&#34;,
    data: {
        foo: &#34;123&#34;
    }
}
</code></pre><p>&#8230;or&#8230;</p><pre><code>200 OK

{
    status: &#34;pending&#34;
}
</code></pre><p>Then client-side, I would (sigh) <code>switch</code> on <code>response.data.status</code> to determine whether the request was completed.</p><p>Is this what I should be doing? Or is there a better alternative? This just feels so Web 1.0 to me.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>HTTP 202 Accepted (HTTP/1.1)</h2><p>You are looking for <strong><code>HTTP 202 Accepted</code></strong> status. See <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" rel="nofollow noreferrer">RFC 2616</a>:</p><blockquote><p>The request has been accepted for processing, but the processing has not been completed.</p></blockquote><h2>HTTP 102 Processing (WebDAV)</h2><p><a href="https://www.rfc-editor.org/rfc/rfc2518#section-10.1" rel="nofollow noreferrer">RFC 2518</a> suggests using <code>HTTP 102 Processing</code>:</p><blockquote><p>The 102 (Processing) status code is an interim response used to
inform the client that the server has accepted the complete request,
but has not yet completed it.</p></blockquote><p>but it has a caveat:</p><blockquote><p>The server MUST send a final response after the request has been completed.</p></blockquote><p>I&#39;m not sure how to interpret the last sentence. Should the server avoid sending anything during the processing, and respond only <em>after</em> the completion? Or it only forces to <em>end</em> the response only when the processing terminates? This could be useful if you want to report progress. Send HTTP 102 and flush response byte by byte (or line by line).</p><p>For instance, for a long but linear process, you can send one hundred dots, flushing after each character. If the client side (such as a JavaScript application) knows that it should expect exactly 100 characters, it can match it with a progress bar to show to the user.</p><p>Another example concerns a process which consists of several non-linear steps. After each step, you can flush a log message which would eventually be displayed to the user, so that the end user could know how the process is going.</p><h2>Issues with progressive flushing</h2><p>Note that while this technique has its merits, <strong>I wouldn&#39;t recommend it</strong>. One of the reasons is that it forces the connection to remain open, which could hurt in terms of service availability and doesn&#39;t scale well.</p><p>A better approach is to respond with <code>HTTP 202 Accepted</code> and either let the user to get back to you later to determine whether the processing ended (for instance by calling repeatedly a given URI such as <code>/process/result</code> which would respond with HTTP 404 Not Found or <a href="https://softwareengineering.stackexchange.com/questions/316208/http-status-code-for-still-processing/316211?noredirect=1#comment669515_316211">HTTP 409 Conflict</a> until the process finishes and the result is ready), or notify the user when the processing is done if you&#39;re able to call the client back for instance through a message queue service (<a href="https://aws.amazon.com/sqs/" rel="nofollow noreferrer">example</a>) or WebSockets.</p><h2>Practical example</h2><p>Imagine a web service which converts videos. The entry point is:</p><pre><code>POST /video/convert
</code></pre><p>which takes a video file from the HTTP request and does some magic with it. Let&#39;s imagine that the magic is CPU-intensive, so it cannot be done in real-time during the transfer of the request. This means that once the file is transferred, the server will respond with a <code>HTTP 202 Accepted</code> with some JSON content, meaning “Yes, I got your video, and I&#39;m working on it; it will be ready somewhere in the future and will be available through the ID 123.”</p><p>The client has a possibility to subscribe to a message queue to be notified when the processing finishes. Once it is finished, the client can download the processed video by going to:</p><pre><code>GET /video/download/123
</code></pre><p>which leads to an <code>HTTP 200</code>.</p><p>What happens if the client queries this URI before receiving the notification? Well, the server will respond with <code>HTTP 404</code> since, indeed, the video doesn&#39;t exist yet. It may be currently prepared. It may never been requested. It may exist some time in the past and be removed later. All that matters is that the resulting video is not available.</p><p>Now, what if the client cares not only about the final video, but also about the progress (which would be even more important if there is no message queue service or any similar mechanism)?</p><p>In this case, you can use another endpoint:</p><pre><code>GET /video/status/123
</code></pre><p>which would result a response similar to this:</p><pre><code>HTTP 200
{
    &#34;id&#34;: 123,
    &#34;status&#34;: &#34;queued&#34;,
    &#34;priority&#34;: 2,
    &#34;progress-percent&#34;: 0,
    &#34;submitted-utc-time&#34;: &#34;2016-04-19T13:59:22&#34;
}
</code></pre><p>Doing the request over and over will show the progress until it&#39;s:</p><pre><code>HTTP 200
{
    &#34;id&#34;: 123,
    &#34;status&#34;: &#34;done&#34;,
    &#34;progress-percent&#34;: 100,
    &#34;submitted-utc-time&#34;: &#34;2016-04-19T13:59:22&#34;
}
</code></pre><p>It is crucial to make a difference between those three types of requests:</p><ul><li><code>POST /video/convert</code> queues a task. It should be called only once: calling it again would queue an additional task.</li><li><code>GET /video/download/123</code> concerns the <em>result</em> of the operation: the <em>resource</em> is the video. The processing—that is what happened under the hood to <em>prepare</em> the actual result prior to request and independently to the request—is irrelevant here. It can be called once or several times.</li><li><code>GET /video/status/123</code> concerns the processing <em>per se</em>. It doesn&#39;t queue anything. It doesn&#39;t care about the resulting video. The <em>resource</em> is the processing itself. It can be called once or several times.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../when-to-use-http-status-code-404-in-an-api/'>When to use HTTP status code 404 in an API</a></li><li class="list-group-item"><a href='../request-content-type-of-http-errors/'>Request content-type of HTTP errors</a></li><li class="list-group-item"><a href='../rest-do-web-applications-use-http-as-a-transport-layer-or-do-they-count-as-an-integral-part-of-the-http-server/'>Rest &#8211; Do web applications use HTTP as a transport layer, or do they count as an integral part of the HTTP server</a></li><li class="list-group-item"><a href='../should-i-use-http-status-codes-to-describe-application-level-events/'>Should I use HTTP status codes to describe application level events</a></li><li class="list-group-item"><a href='../what-http-status-code-to-return-if-multiple-actions-finish-with-different-statuses/'>What HTTP status code to return if multiple actions finish with different statuses</a></li><li class="list-group-item"><a href='../rest-good-practice-for-status-code-returned-by-restful-api-when-validating-a-token/'>Rest &#8211; Good practice for status code returned by restful API when validating a token</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>