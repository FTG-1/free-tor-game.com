<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Can you apply the same lexer rules to all programming languages &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083538 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083538" class="post-1083538 software type-software status-publish hentry category-software tag-lexer tag-programming-languages"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Can you apply the same lexer rules to all programming languages</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">lexer</span><span class="mr-2 badge badge-info">programming-languages</span></p><div class="entry-content"><p>I&#39;m trying to understand the theory behind a lexer with the purpose of building one  (just for my own fun and experience and to compensate for not taking proper CS courses :)).</p><p>What I have yet to understand is if lexer theory is the same no matter what language you are analyzing? Is it just about splitting white space then try to figure out what each text represents or is it more than that?</p><p>In other words, does the generation of tokens depend on the language being analyzed or is it just about white space? Can you apply the same lexer rules to all programming languages? For example if I have a lexer that tokenizes Java code can I use it for Python or not, since whitespace in Python has other meaning?</p><p>For example, I found a nice Python project (<a href="http://pygments.org/">Pygments</a>) which seems to provide a working core that allows you to later plugin rules for each of your favorite language (what are the keywords, the comments etc).</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>No you can&#39;t. Here is a nonsense snippet of Lisp:</p><pre><code>(*foo-bar* &#39;baz 14)
</code></pre><p>What are the tokens in this snippet? The answer is something like</p><pre><code>LPAREN
SYMBOL  &#34;*foo-bar*&#34;
QUOTE
SYMBOL  &#34;baz&#34;
INTEGER &#34;14&#34;
RPAREN
</code></pre><p>Lisps have very liberal rules what can be inside an identifer: hyphens <code>-</code>, asterisks <code>*</code> and many other characters are allowed. Expressions can be quoted which prevents their evaluation, in many dialects this is done by prepending a <code>&#39;</code> to that expression.</p><p>A lexer needs to be aware of the language that it&#39;s parsing. If we would have used a C language lexer on the above code, we would get an error because <code>&#39;</code> introduces a character literal which also requires a closing <code>&#39;</code> – none is present here. Our C tokenizer might produce:</p><pre><code>LPAREN
OP_STAR
IDENTIFIER &#34;foo&#34;
OP_MINUS
IDENTIFIER &#34;bar&#34;
OP_STAR
ERROR character literal isn&#39;t terminated: expected »&#39;« after »&#39;b«
</code></pre><p>For each language we want to lex, we have to write special rules. Every language is unique, and many languages do have subtle differences. Here, the identifiers are so very different that the token streams have lost any resemblance of each other. However, some languages inherit syntax from each other. For a very simple snippet like <code>foo.bar(baz)</code>, a lexer written for C++ and one for Python might produce comparable results.</p><h3>But why do we actually use Lexers?</h3><p>Formally, lexers are <em>not</em> needed. We can describe a language without them just fine. Lexers are a performance optimization. Lexers are basically very restricted preprocessors for a parser that can match the input very efficiently (e.g. implemented as a state machine). The lexer then emits <em>tokens</em>, which are larger building blocks (a token is a pairing of a type or ID with a string). It is then the job of the parser to combine these tokens in a hierarchical structure (generally, an <em>abstract syntax tree</em>). This frees the parser from doing character-level operations, which makes it more efficient and easier to maintain (I have written parser without this separation. It works, but is annoying).</p><p>And here we have another problem: A lexer is written for a specific parser. The two work in tandem and cannot be recombined willy-nilly with other lexers or parsers. In the above token streams I have called the &#34;(&#34; operator <code>LPAREN</code>. But a different grammar might require a <code>OP_LP</code> symbol instead.</p><h3>So for a variety of reasons, it&#39;s impossible to write one lexer to rule them all.</h3><p>Each language needs it&#39;s own lexer. But we can take shortcuts and use programs that generate specialized lexers for us from some specification. Often, tools like <code>lex</code> are used for this. If performance is not an issue, I use the regular expressions library from the host language to cobble together a simple lexer, e.g. in Perl:</p><pre class="lang-perl prettyprint-override"><code># a primitive Lisp lexer
my %tokens = (
  LPAREN =&gt; qr/[(]/,
  RPAREN =&gt; qr/[)]/,
  SYMBOL =&gt; qr/[^\s()&#39;]+/,
  QUOTE  =&gt; qr/[&#39;]/,
  INTEGER =&gt; qr/[1-9][0-9]*/,
);
my $space = qr/\s+/;

my $input = &#34;(*foo-bar* &#39;baz 14)&#34;;
my $pos = 0;
my $length = length $input;

POSITION:
while ($pos &lt; $length) {
  pos($input) = $pos;
  $pos += length $1 and next if $input =~ /\G($space)/gc;

  for my $name (keys %tokens) {
    if ($input =~ /\G($tokens{$name})/gc) {
      print &#34;$name -- $1\n&#34;;
      $pos += length $1;
      next POSITION;
    }
  }

  die &#34;No token matched, just before:\n&#34;, (substr $input, $pos, 20), &#34;\n&#34;;
}
</code></pre><p>Output:</p><pre><code>LPAREN -- (
SYMBOL -- *foo-bar*
QUOTE -- &#39;
SYMBOL -- baz
SYMBOL -- 14
RPAREN -- )
</code></pre><p>But we can easily change the token definitions:</p><pre class="lang-perl prettyprint-override"><code># an incomplete C lexer
my %tokens = (
  LPAREN =&gt; qr/[(]/,
  RPAREN =&gt; qr/[)]/,
  IDENTIFIER =&gt; qr/[a-zA-Z_][a-zA-Z0-9_]*/,
  CHARACTER  =&gt; qr/[&#39;](?:[^&#39;\\]|\\.)[&#39;]/,
  INTEGER =&gt; qr/[1-9][0-9]*/,
  OP_STAR =&gt; qr/[*]/,
  OP_MINUS =&gt; qr/[-]/,
);
my $space = qr/\s+/;
</code></pre><p>which changes the output to:</p><pre><code>LPAREN -- (
OP_STAR -- *
IDENTIFIER -- foo
OP_MINUS -- -
IDENTIFIER -- bar
OP_STAR -- *
No token matched, just before:
&#39;baz 14)
</code></pre><p>We didn&#39;t write a new lexer, we just updated the token definitions.</p><h3>What to do now:</h3><ul><li><p>As a preparation, understand and implement the <em>Shunting-Yard Algorithm</em>. This will teach you about a simple stack machine.</p></li><li><p>Read up on <em>grammars</em> and <em>languages</em> in computer science. Learn what a <em>rule</em> is.</p></li><li><p>Read up on <em>Extended Backus-Naur Form</em> notation, even if you don&#39;t immediately understand it. This is a way to write down grammars, and grammars are a way to describe languages (e.g. programming languages).</p></li><li><p>Understand the implications of the <em>Chomsky Hierarchy</em>. Here are the three important levels:</p><ul><li><em>Regular Languages</em> can be matched very efficiently. Lexers usually operate on this level.</li><li><em>Context-Free Languages</em> are the basis for the description of many programming languages. Various parsing strategies can match various subsets. You will want to read up on <em>LL</em>, <em>LR</em>, and <em>PEG</em> at least.</li><li><em>Context-Sensitive Languages</em> are even more general, but they are vastly more difficult to parse. Note that many regex libraries like PCRE have context-sensitive features.</li></ul><p>Note that real programming languages are not context-free – semantic whitespace as in Python, here-docs as in Bash, and optional end tags in HTML are there to mess up most elegant descriptions (but tricks exist to fake a context-free grammar even then).</p></li><li><p>Write a simple recursive-descent parser yourself that can evaluate simple arithmetics like <code>1 + 2 * 3</code> and manages operator precedence correctly. Using a lexer is not necessary for this. Add parens to your language, then some functions like <code>abs</code> or <code>sin</code>. Post your solution on <a href="https://codereview.stackexchange.com/">codereview</a> to get tips on how to do it better.</p></li><li><p>Now that you&#39;ve learned how to parse stuff yourself, you may enjoy helping tools like parser generators. As an exercise, pick a simple language like <a href="http://json.org/" rel="nofollow noreferrer">JSON</a> and write a parser for it with your tool of choice. Return to codereview for criticism.</p></li></ul><p>If you have any problems on the way, ask here on programmers or over on stackoverflow, depending on whether the question is conceptual or implementation-related.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../python-coming-up-with-tokens-for-a-lexer/'>Python &#8211; Coming up with tokens for a lexer</a></li><li class="list-group-item"><a href='../are-all-languages-basically-the-same/'>Are all languages basically the same</a></li><li class="list-group-item"><a href='../the-proper-way-to-distinguish-between-keywords-and-identifiers/'>The proper way to distinguish between keywords and identifiers</a></li><li class="list-group-item"><a href='../should-i-use-a-source-to-source-or-a-traditional-compiler-in-order-to-develop-the-own-programming-language/'>Should I use a source-to-source or a traditional compiler in order to develop the own Programming Language</a></li><li class="list-group-item"><a href='../a-language-prefer-indentation-over-explicit-markers-for-blocks/'>A language prefer indentation over explicit markers for blocks</a></li><li class="list-group-item"><a href='../is-it-appropite-for-a-tokenizer-to-use-regex-to-gather-tokens/'>Is it appropite for a tokenizer to use regex to gather tokens</a></li><li class="list-group-item"><a href='../should-the-lexer-allow-what-is-obviously-a-syntax-error/'>Should the lexer allow what is obviously a syntax error</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>