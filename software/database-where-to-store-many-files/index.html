<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; Where to store many files &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084477 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084477" class="post-1084477 software type-software status-publish hentry category-software tag-blob tag-database tag-files"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; Where to store many files</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">blob</span><span class="mr-2 badge badge-info">database</span><span class="mr-2 badge badge-warning">files</span></p><div class="entry-content"><p>I have 500.000 files with the combined size of 350GB. So an average file has 0.7MB size. Each file has metadata: 1 to 100 keywords and optionally a short description. I need to filter the files and find the keywords of the search expression in the keywords of the files and in the descriptions. Note that some of the files are text files, so by those, I need to find the keywords in the file as well, which means full-text search.</p><ol><li>Should I store the metadata and the files in the same database, or should I store the metadata and the text files in the same database and the binary files somewhere else?</li><li>What type of database can store so many files?</li></ol><p>Note that the databases are RAID protected, but I can have a not RAID protected filesystem cache, for the case they would make streaming slow.</p><p>I am concerned only about the <strong>performance</strong> of search and file access, not consistency, convenience, security or resource utilization. I can use even the file system if that makes things faster.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Where to store the files ?</h2><p>The question of whether or not to store the files in the database has to be considered under several angles:</p><ul><li><p><strong>Consistency</strong>:  storing metadata and the files (as BLOB) together in the database ensures that what belongs together remain together. No fear of inconsistency if insertion is interupted, no separate storage location to manage with absolute or relative url in the database.</p></li><li><p><strong>Convenience</strong>:  you may move/backup/replicate/monitor your database if you need just using the database tools.  With separate files, you have to organize all theser operations.  It is not necessarily difficult, but you have to take care of it.</p></li><li><p><strong>Security</strong>: most DBMS offer you some authorization mechanismsfor user access, and even encryption if needed. So having the file in the DMBMS ensures that nobody tampers with the files, and only those having the necessary DB priviledges can access it.  With separate files outside the database, its much more difficult to organize this (unless you&#39;re on a server and the clients can&#39;t access directly to the folders).</p></li><li><p><strong>Performance:</strong> this is something that you have to check carefully with the DBMS that you&#39;ll choose:  the API for accessing BLOBs might require some overhead to transfer from/to the database in smaller chunks.  So you need to be careful to request this object only if necessary.   Here with files in the file system, it&#39;s faster to access the raw data when it is needed.  However with so many files, you might have to distribute them across several folders, in order not to to suffer from the search performance of every filename in a huge directory.</p></li><li><p><strong>Resources:</strong> If you would consider using some in-memory database for accelerating your &#34;semantic&#34; work on metadata, then it would be very costly to store as well all the plain data in memory.  There, separate files could really be of advantage.</p></li></ul><p>Not knowing what exactly your application is doing, it wouldn&#39;t be wise to advise you firmly on one way or the other.</p><h2>Real life examples</h2><ul><li>At my company we use a huge ERP. The records of the financial transactions in the database  refer to  scanned financial documents that are stored outside the DB on a distinct content server.  The content server is a kind of web server, that locally stores the image files (JPG, PDF, ...) in its local file system.  The security of access is organized via a complex URL validation scheme.</li><li>Another system stores scanned documents for an activity not covered by the ERP.  The images are stored directly in the database.</li></ul><p>So in practice, both approaches will work. The first is based on standard software products.  The second was developed in-house. From the point of view of performance, they both are very similar because images are accessed from the client (i.e. the potential overhead in BLOB management on DB side, are compensated by the overhead of an additional transfer with the additional webserver).</p><h2>Relational or not ?</h2><p>If you go relational, you may want to manage:</p><ul><li>the file-records (e.g.identification, some unique metadata, and the BLOB).</li><li>the keywords (metadata + filtered list of plain text words)</li><li>the association of keywords to file-records (many to many).</li></ul><p>There is no doubt that performance and the flexibility will be there, because searching for keys, merging several searches, etc.. is the core business of an RDBMS.  But you&#39;ll have to work out how to best structure the metadata.</p><p>You could also opt for a <a href="http://nosql-database.org/" rel="nofollow noreferrer">NoSQL</a> database. They are more flexible on the data structure.  Intuitively I&#39;d suggest to start to have a look at the document databases. If however you prefer to keep the files out of the database, you could be more interested in a key-value store, or even a large column store if you&#39;d manage different kind of keywords for different kind of metadata.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-is-it-a-bad-practice-to-store-large-files-10-mb-in-a-database/'>Database &#8211; Is it a bad practice to store large files (10 MB) in a database</a></li><li class="list-group-item"><a href='../implementation-ideas-to-store-multiple-files-within-a-single-file-for-faster-access/'>Implementation ideas to store multiple files within a single file for faster access</a></li><li class="list-group-item"><a href='../database-elasticsearch-and-relational-database-combination/'>Database &#8211; Elasticsearch and relational database combination</a></li><li class="list-group-item"><a href='../java-how-to-properly-serve-large-video-files-stored-outside-a-mysql-database/'>Java &#8211; How to properly serve large video files stored outside a MySQL database</a></li><li class="list-group-item"><a href='../database-store-file-in-filesystem-and-its-metadata-to-the-database-atomicly/'>Database &#8211; Store file in filesystem, and its metadata to the database atomicly</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>