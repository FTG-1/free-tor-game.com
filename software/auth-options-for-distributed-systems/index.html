<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Auth options for distributed systems &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070830 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070830" class="post-1070830 software type-software status-publish hentry category-software tag-authentication tag-authorization tag-oauth2"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Auth options for distributed systems</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">authentication</span><span class="mr-2 badge badge-info">authorization</span><span class="mr-2 badge badge-warning">oauth2</span></p><div class="entry-content"><p>I am in the process of designing 3 components that will work in symphony with one another:</p><ul><li>A RESTful web service which requires <code>BasicAuth</code> over HTTPS on all calls, and which is what actually does all the heavy lifting for my system (does the work)</li><li>A web UI that translates end user actions into API calls to the above-mentioned web service; hence the UI is &#34;backed by&#34; the WS</li><li>A command-line interface (CLI) tool that developers can install and run locally, that also translates commands into API calls to the WS (hence it too is &#34;backed by&#34; the WS)</li></ul><p>One of the first hurdles I&#39;m trying to cross is with respect to authentication and authorization.</p><p>Let&#39;s pretend that the WS uses a LDAP/directory service (like AD or perhaps Apache DS) as its authentication realm. Meaning, when an API call come in over the wire (say, an <code>HTTPS GET</code> for some resource), the <code>BasicAuth</code> credentials are extracted from the request, and forwarded on to the LDAP service to determine whether this is a valid user or not. If they are authenticated, then let&#39;s say that a separate authorization realm, perhaps a database, is used for determining whether or not the identified user <em>can do</em> what they are attempting in the HTTPS request. So far, so good.</p><p>In the case of the CLI tool, the user will have to authenticate prior to running any commands, and so this model works just fine, as a single user will only ever be operating the same CLI instance at a given time.</p><p>The problem comes when we try integrating the web app (UI) with the WS, because many people could be logged on to the app at the same time, all with different permissions dictating which underlying API calls they&#39;re allowed to make.</p><p>As far as I see it, it <em>looks</em> like I have but 4 options here:</p><ul><li><strong>Cached Credentials</strong>: After logging into the app, the credentials are somehow, <em>somewhere</em> cached (such that the app has access to them), and the app doesn&#39;t enforce any kind of authorization policy itself. When users attempt to do things that generate API calls under the hood, their credentials are looked up from the cache, and forwarded on with the API calls. If the WS determines they aren&#39;t authorized, it sends back an error.</li><li><strong>Service-Level Accounts</strong>: The app and the WS both use the same authentication/authorization realms, except the web UI now enforces authorization on what users can actually see and do inside the app. If they&#39;re allowed to do something that generates an underlying API call, the app sends service account credentials (e.g. <code>myapp-admin-user</code>) with each API call on the user&#39;s behalf.</li><li><strong>OAuthv2</strong>: I have no idea what OAuth is or if its applicable for this scenario, but feel it may be a solution here somehow.</li><li><strong>Token Servers</strong>: Use a token server such as <a href="http://jasig.github.io/cas/4.0.x/">CAS</a> or maybe Kerberos to vouch for users, in a similar way as the Service-Level Account option behaves. Here, when a user logs into the app successfully, the token server sends the app back a session UUID, and also registers that UUID with the WS. Every time the app generates an API call, it tacks the UUID on to the request, which is then validates on the WS side.</li></ul><p>The &#34;<strong>Cached Credentials</strong>&#34; option just <em>feels</em> like an aberration of everything that is good and wholesome in security-land. It just feels wrong to cache credentials anywhere, ever.</p><p>The &#34;<strong>Token Server</strong>&#34; option seems valid for an SSO type setup, but not in this particular case and <em>feels</em> awkward to me. I also think there&#39;s no good way to use the session UUID concept <em>and</em> <code>BasicAuth</code>/HTTPS at the same time.</p><p>So this leaves OAuthv2, which I know nothing about, and &#34;<strong>Service-Level Account (SLA)*</strong>&#34; as the only remaining options. The SLA option seems OK, but has a few following drawbacks:</p><ul><li>It requires the service account to basically have &#34;god privileges&#34; over the WS. In other words, once the app deems a user is allowed to click a button or do something in the UI, that translates to an unconditional API call by the service account being used by the UI. This just feels bad, mkay?</li><li>It occurs to me that maintaining two sets of permissions (the permission set for each user of the app, and then the permission set for the service account used by the app against the WS) can result with the permissions getting out of synch with each other somehow</li></ul><p>So it appears that I don&#39;t really have any good options here. Surely I can&#39;t be the first dev to run into this, but asking the Google Gods have not helped me much here. Any ideas?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>There are many reasons not to use basic authentication scheme to protect Web API services.</p><p>In order to use the service, the client needs to keep the password somewhere in clear text to send it along with each request.</p><p>The verification of a password should be very slow (to counter brute force attacks), which would hamper scalability of your service. On the other hand, security token validation can be quick (digital signature verification).</p><p><a href="http://oauth.net/2/" rel="nofollow noreferrer">OAuth2</a> does offer solutions for each of your use cases. Your web application can use the <a href="https://www.rfc-editor.org/rfc/rfc6749#section-1.3.1" rel="nofollow noreferrer">code grant</a>, which gives it an access token it can use to talk to your API.</p><p>Your web application will redirect the user&#39;s browser to the authorization server. It will prompt the user for credentials (or smart card, or two-factor auth code) and return a code to the browser, which the client (your web application) can use to get an access token from the authorization server.</p><p>Your application will also get back a refresh token with which it can get a new access token if the current token expires.</p><p>Your CLI application can use the <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.3" rel="nofollow noreferrer">resource owner credentials grant</a>. You will prompt the user for credentials and submit them to the authorization server to acquire an access and refresh token. Once your CLI application has the token, you can discard the user&#39;s password in memory.</p><p>Both clients (web app and command-line client) need to be registered up front with the authorization server.</p><p>Your authorization server may well talk to a LDAP/directory service (identity provider or IdP) to do the actual authentication.</p><p>Your web API service only needs to verify the incoming JWT token and establish what the user is allowed to do (authorization).</p><p>If you are the victim of a man-in-the-middle attack and you lose your access token, the attacker only has a limited time (token lifetime) to use it. A password is typically valid for much longer. Refresh tokens can be revoked in case they get lost.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>