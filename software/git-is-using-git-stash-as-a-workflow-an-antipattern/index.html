<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Git &#8211; Is using Git Stash as a workflow an antipattern &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070080 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070080" class="post-1070080 software type-software status-publish hentry category-software tag-git tag-teamwork tag-workflows"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Git &#8211; Is using Git Stash as a workflow an antipattern</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">git</span><span class="mr-2 badge badge-info">teamwork</span><span class="mr-2 badge badge-warning">workflows</span></p><div class="entry-content"><p>I&#39;ve recently been looking at how me and my team uses Git and how our workflows work. We currently use a feature-branch workflow which seems to work well.</p><p>I&#39;ve also seen some individuals on our team use workflow based on <a href="http://git-scm.com/book/en/Git-Tools-Stashing">git stash</a>. The workflow goes something like this:</p><ul><li>Work on a main branch (like <code>master</code>)</li><li>Make commits as you go</li><li>If you need to get changes or switch branches, push your uncommitted changes onto the stash</li><li>Once your updating is done, pop the changes off the stash.</li></ul><p>I should mention that this workflow is used <em>instead of</em> a feature branch workflow. Instead of taking a branch and working on it, developers here only ever work on a single branch and push/pop off the stack as they see fit.</p><p>I actually don&#39;t think this is a great workflow, and branching would be more appropriate than using git stash in this way. I can see the value of git stash as an emergency operation, but not for using it in a daily, regular workflow.</p><p>Would using git stash regularly be considered an anti-pattern? If so, what are some specific problems that could arise? If not, what are the benefits?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>From the <a href="http://git-scm.com/book/en/Git-Tools-Stashing">Git SCM Book</a>:</p><blockquote><p>Often, when you’ve been working on part of your project, things are in a messy state and you want to switch branches for a bit to work on something else. The problem is, you don’t want to do a commit of half-done work just so you can get back to this point later. The answer to this issue is the git stash command.</p><p>Stashing takes the dirty state of your working directory — that is, your modified tracked files and staged changes — and saves it on a stack of unfinished changes that you can reapply at any time.</p></blockquote><p>Given this description, I would say this is an Anti Pattern. An overly simplified explanation of Git Stash would be that it is the &#34;Cut and Paste&#34; of source control. You take a bunch of changed files, &#34;stash&#34; them away in a holding pen outside of Git&#39;s normal branching workflow, and then reapply those changes to a different branch at a later date.</p><p>Going back a little further, <em>committing to master is the anti pattern</em> here. Use branches. That&#39;s what they were designed for.</p><p>It really boils down to this:</p><p>You can hammer a screw into the wall and it will hold up a picture, but using a screwdriver is what you should do. Don&#39;t use a hammer when the screwdriver is sitting right beside you.</p><h2>About Committing &#34;Broken&#34; Code</h2><p>While the following is opinion, I have come to this opinion from experience.</p><p>Commit early, and commit often. Commit as much broken code as you want. View your local commit history as &#34;save points&#34; while you hack away at something. Once you&#39;ve done a logical piece of work, make a commit. Sure it might break everything, but that doesn&#39;t matter as long as you don&#39;t <strong>push</strong> those commits. Before pushing, rebase and squash your commits.</p><ol><li>Create new branch</li><li>Hack hack hack</li><li>Commit broken code</li><li>Polish the code and make it work</li><li>Commit working code</li><li>Rebase and Squash</li><li>Test</li><li>Push when tests are passing</li></ol><p>For the OP, this <a href="https://lkml.org/lkml/2009/6/22/625">Linux kernal message thread</a> might be of interest, because it kind of sounds like some members of the OP&#39;s team is using Git in a similar manner.</p><p>@RibaldEddie said in a comment below:</p><blockquote><p>First of all, a stash is not outside of a &#34;branching workflow&#34; since under the hood a stash is just another branch.</p></blockquote><p>(at the risk of incurring the wrath of many people)</p><p>Linus said:</p><blockquote><p>With &#34;git stash&#34;, you can have multiple different stashed things too, but 
 they don&#39;t queue up on each other - they are just random independent 
 patches that you&#39;ve stashed away because they were inconvenient at some 
 point.</p></blockquote><p>What I think @RibaldEddie is trying to say is that you can use <code>git stash</code> in a feature branch workflow -- and this is true. It&#39;s not the use of <code>git stash</code> that is the problem. It is the combination of committing to master and using <code>git stash</code>. <em>This is an anti pattern.</em></p><h2>Clarifying <code>git rebase</code></h2><p>From @RibaldEddie&#39;s comment:</p><blockquote><p>Rebasing is much more like copy-pasting <strong>and even worse modifies committed history.</strong></p></blockquote><p>(Emphasis mine)</p><p>Modifying commit history is not a bad thing, as long as it is <em>local commit history</em>. If you rebase commits that you&#39;ve already pushed, you&#39;ll essentially orphan anyone else using your branch. This is bad.</p><p>Now, say you&#39;ve made several commits during the course of a day. Some commits were good. Some... not so good. The <code>git rebase</code> command in conjunction with squashing your commits is a good way to clean up your local commit history. It&#39;s nice to merge in one commit to public branches because it keeps the commit history of your team&#39;s shared branches clean. After rebasing, you&#39;ll want to test again, but if tests pass then you can push one clean commit instead of several dirty ones.</p><p>There is another interesting Linux Kernel thread on <a href="http://www.mail-archive.com/dri-devel@lists.sourceforge.net/msg39091.html">clean commit history</a>.</p><p>Again, from Linus:</p><blockquote><p>I want clean history, but that really means (a) clean and (b) history.</p><p>People can (and probably should) rebase their <em>private</em> trees (their own work). That&#39;s a <em>cleanup</em>. But never other peoples code. That&#39;s a &#34;destroy history&#34;</p><p>So the history part is fairly easy. There&#39;s only one major rule, and one 
 minor clarification:</p><ul><li><p>You must never EVER destroy other peoples history. You must not rebase 
 commits other people did. Basically, if it doesn&#39;t have your sign-off 
 on it, it&#39;s off limits: you can&#39;t rebase it, because it&#39;s not yours.</p><p>Notice that this really is about other peoples <em>history</em>, not about 
 other peoples <em>code</em>. If they sent stuff to you as an emailed patch, 
 and you applied it with &#34;git am -s&#34;, then it&#39;s their code, but it&#39;s <em>your</em> history.</p><p>So you can go wild on the &#34;git rebase&#34; thing on it, even though you 
 didn&#39;t write the code, as long as the commit itself is your private 
 one.</p></li><li><p>Minor clarification to the rule: once you&#39;ve published your history in 
 some public site, other people may be using it, and so now it&#39;s clearly 
 not your <em>private</em> history any more.</p><p>So the minor clarification really is that it&#39;s not just about &#34;your 
 commit&#34;, it&#39;s also about it being private to your tree, and you haven&#39;t 
 pushed it out and announced it yet.</p></li></ul><p>...</p><p>Now the &#34;clean&#34; part is a bit more subtle, although the first rules are 
 pretty obvious and easy:</p><ul><li><p>Keep your own history readable</p><p>Some people do this by just working things out in their head first, and 
 not making mistakes. but that&#39;s very rare, and for the rest of us, we 
 use &#34;git rebase&#34; etc while we work on our problems.</p><p><strong>So &#34;git rebase&#34; is not wrong. But it&#39;s right only if it&#39;s YOUR VERY OWN 
 PRIVATE git tree.</strong></p></li><li><p>Don&#39;t expose your crap.</p><p>This means: if you&#39;re still in the &#34;git rebase&#34; phase, you don&#39;t push 
 it out. If it&#39;s not ready, you send patches around, or use private git 
 trees (just as a &#34;patch series replacement&#34;) that you don&#39;t tell the 
 public at large about.</p></li></ul></blockquote><p>(emphasis mine)</p><h2>Conclusion</h2><p>In the end, the OP has some developers doing this:</p><pre><code>git checkout master
(edit files)
git commit -am &#34;...&#34;
(edit files)
git stash
git pull
git stash (pop|apply)
</code></pre><p>There are two problems here:</p><ol><li>Developers are committing to master. Lock this down immediately. Really, this is <em>the biggest</em> problem.</li><li>Developers are constantly using <code>git stash</code> and <code>git pull</code> on master when they should be using feature branches.</li></ol><p>There is nothing wrong with using <code>git stash</code> -- especially before a pull -- but using <code>git stash</code> in this manner is an anti pattern when there are better workflows in Git.</p><p>Their use of <code>git stash</code> a red herring. It is not the problem. Committing to master is the problem.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../git-workflow-advise-a-newbie/'>Git workflow &#8211; advise a newbie</a></li><li class="list-group-item"><a href='../git-examples-of-continuous-integration-workflow-using-git/'>Git &#8211; Examples of continuous integration workflow using git</a></li><li class="list-group-item"><a href='../git-workflow-for-small-teams/'>Git workflow for small teams</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>