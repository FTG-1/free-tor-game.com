<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; What happens to lock&#8217;s state and methods when a thread acquires a lock &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080409 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080409" class="post-1080409 software type-software status-publish hentry category-software tag-java tag-multithreading"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; What happens to lock&#8217;s state and methods when a thread acquires a lock</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">multithreading</span></p><div class="entry-content"><p>Assume I have following class</p><pre><code>class Student{
   void method1(){
     // Do Something
   }
   void method2(){
     // Do Something
   }
</code></pre><p>}</p><p>And the object of this class is used as monitor in synchronization in some piece of the code as</p><pre><code>class ProcessingThread implements Runnable {
   void someMethod(){
     synchronized(student){    // student object is used as lock. Thread T1 acquires a lock on student.
       // critical section of code
     }
   }
}
</code></pre><p>When a thread T1 acquires a lock on the student object, and enters into the critical section of the code, at the same time can some another thread T2 executes a method on the student object i.e.</p><pre><code>class College{
   void assignTopic(){
      student.method1();   // Thread T2 working on student object when 
                           // Thread T1 has acquired a lock on student
   }
}
</code></pre><p>I want to know that what happens to the methods / variables of the locked object when it is acquired by a thread?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>What happens when a thread acquires a lock?</p></blockquote><p>No other thread can acquire that lock until it&#39;s released.</p><p>Note that this is <strong>all</strong> that happens. Only methods called via <em>other threads</em> are affected. Only other threads that compete for <em>the same lock</em> are affected at all.</p><p>This means that the holding thread can do whatever it likes, just as before the lock. Other threads cannot acquire that lock, but they can do everything else. That includes mutating the state of <code>student</code>, unless <em>all</em> of <code>student&#39;s</code> mutating methods and fields are protected by <em>the same lock</em>. If there is a mutating method that isn&#39;t <code>synchronized</code>, or synchronizes via a different lock, the &#34;locked&#34; object can still change unpredictably.</p><p>To elaborate: as ratchet freak&#39;s answer says, obtaining a lock on an object doesn&#39;t protect it from changing <em>unless all possible users pledge to obtain the same lock before changing it</em>. This is hard to enforce because most languages don&#39;t have built-in support for questions of mutability, only for locking. It can also lead to problems because obtaining multiple locks can easily cause deadlock; you need a clear policy in which order to obtain locks, and everyone has to follow them all the time. Again, this is easy to get wrong, and few languages give you any support enforcing it.</p><p>This is why reasoning about thread-safety is hard: a single chink in the armor completely negates all consistency assertions you wanted to make, and thread-safety is not preserved under composition (two components that were proven to be thread-safe might not be thread-safe when used together, for instance because they use <strong>different</strong> locks and not the same one).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-plagued-by-multithreaded-bugs/'>C++ &#8211; Plagued by multithreaded bugs</a></li><li class="list-group-item"><a href='../java-how-to-manage-udp-client-server-state/'>Java &#8211; How to manage UDP client-server state</a></li><li class="list-group-item"><a href='../c-memory-allocation-of-classes-that-dont-have-any-global-data-and-locks/'>C# &#8211; Memory allocation of Classes that don&#8217;t have any global data and locks</a></li><li class="list-group-item"><a href='../java-how-to-make-a-universal-construction-more-efficient/'>Java &#8211; How to make a universal construction more efficient</a></li><li class="list-group-item"><a href='../java-can-multiple-synchronized-methods-in-same-object-run-concurrently/'>Java &#8211; Can multiple synchronized methods in same object run concurrently</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>