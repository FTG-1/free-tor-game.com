<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>What are the functional equivalents of imperative break statements and other loop checks &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1068927 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1068927" class="post-1068927 software type-software status-publish hentry category-software tag-clojure tag-functional-programming tag-haskell"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">What are the functional equivalents of imperative break statements and other loop checks</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">clojure</span><span class="mr-2 badge badge-info">functional programming</span><span class="mr-2 badge badge-warning">haskell</span></p><div class="entry-content"><p>Let&#39;s say, I&#39;ve the below logic. How to write that in Functional Programming?</p><pre><code>    public int doSomeCalc(int[] array)
    {
        int answer = 0;
        if(array!=null)
        {
            for(int e: array)
            {
                answer += e;
                if(answer == 10) break;
                if(answer == 150) answer += 100;
            }
        }
        return answer;
    }
</code></pre><p>The examples in most blogs, articles&#8230; I see just explains the simple case of one straight forward math function say &#39;Sum&#39;.<br /> But, I have a logic similar to the above written in Java and would like to migrate that to functional code in Clojure.<br /> If we can&#39;t do the above in FP, then the kind of promotions for FP doesn&#39;t state this explicitly.</p><p>I know that the above code is totally imperative. It was not written with the forethought of migrating it to FP in future.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The closest equivalent to looping over an array in most functional languages is a <code>fold</code> function, i.e. a function that calls a user-specified function for each value of the array, passing an accumulated value along the chain.  In many functional languages, <code>fold</code> is augmented by a variety of additional functions that provide extra features, including the option to stop early when some condition arises.  In lazy languages (e.g. Haskell), stopping early can be achieved simply by not evaluating any further along the list, which will cause additional values to never be generated.  Therefore, translating your example to Haskell, I would write it as:</p><pre><code>doSomeCalc :: [Int] -&gt; Int
doSomeCalc values = foldr1 combine values
  where combine v1 v2 | v1 == 10  = v1
                      | v1 == 150 = v1 + 100 + v2
                      | otherwise = v1 + v2
</code></pre><p>Breaking this down line by line in case you&#39;re not familiar with Haskell&#39;s syntax, this works like this:</p><pre><code>doSomeCalc :: [Int] -&gt; Int
</code></pre><p>Defines the type of the function, accepting a list of ints and returning a single int.</p><pre><code>doSomeCalc values = foldr1 combine values
</code></pre><p>The main body of the function: given argument <code>values</code>, return <code>foldr1</code> called with arguments <code>combine</code> (which we&#39;ll define below) and <code>values</code>. <code>foldr1</code> is a variant of the fold primitive that starts with the accumulator set to the first value of the list (hence the <code>1</code> in the function name), then combines it using the user specified function from left to right (which is usually called a <em>right fold</em>, hence the <code>r</code> in the function name).  So <code>foldr1 f [1,2,3]</code> is equivalent to <code>f 1 (f 2 3)</code> (or <code>f(1,f(2,3))</code> in more conventional C-like syntax).</p><pre><code>  where combine v1 v2 | v1 == 10  = v1
</code></pre><p>Defining the <code>combine</code> local function: it receives two arguments, <code>v1</code> and <code>v2</code>.  When <code>v1</code> is 10, it just returns <code>v1</code>.  In this case, <em>v2 is never evaluated</em>, so the loop stops here.</p><pre><code>                      | v1 == 150 = v1 + 100 + v2
</code></pre><p>Alternatively, when v1 is 150, adds an extra 100 to it, and adds v2.</p><pre><code>                      | otherwise = v1 + v2
</code></pre><p>And, if neither of those conditions is true, just adds v1 to v2.</p><p>Now, this solution is somewhat specific to Haskell, because the fact that a right fold terminates if the combining function doesn&#39;t evaluate its second argument is caused by Haskell&#39;s lazy evaluation strategy.  I don&#39;t know Clojure, but I believe it uses strict evaluation, so I would expect it to have a <code>fold</code> function in its standard library that includes specific support for early termination.  This is often called <code>foldWhile</code>, <code>foldUntil</code> or similar.</p><p>A quick look at the Clojure library documentation suggests that it is a little different from most functional languages in naming, and that <code>fold</code> isn&#39;t what you&#39;re looking for (it&#39;s a more advanced mechanism aimed at enabling parallel computation) but <a href="https://clojuredocs.org/clojure.core/reduce" rel="noreferrer"><code>reduce</code></a> is the more direct equivalent.  Early termination occurs if the <code>reduced</code> function is called within your combining function.  I&#39;m not 100% sure I understand the syntax, but I suspect what you&#39;re looking for is something like this:</p><pre><code>(reduce 
    (fn [v1 v2]
        (if (= v1 10) 
             (reduced v1)
             (+ v1 v2 (if (= v1 150) 100 0))))
    array)
</code></pre><p>NB: both translations, Haskell and Clojure, are not quite right for this specific code; but they convey the general gist of it -- see discussion in the comments below for specific problems with these examples.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/differences-between-imperative-language-and-functional-language-debuggers/'>Differences between imperative-language and functional-language debuggers</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/banana-split-and-fusion-in-functional-programming/'>Banana split and fusion in functional programming</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/what-makes-functional-programming-languages-declarative-as-opposed-to-imperative/'>What makes functional programming languages declarative as opposed to Imperative</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/functional-programming-best-practices/'>Functional Programming best practices</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>