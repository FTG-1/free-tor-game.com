<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Performance of Scala compared to Java &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064566 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064566" class="post-1064566 software type-software status-publish hentry category-software tag-java tag-performance tag-scala"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Performance of Scala compared to Java</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">performance</span><span class="mr-2 badge badge-warning">scala</span></p><div class="entry-content"><p>First of all I would like to make it clear that this is not a language-X-versus-language-Y question to determine which is better.</p><p>I have been using Java for a long time and I intend to keep using it. Parallel to this, I am currently learning Scala with great interest: apart from minor things that take some getting used to my impression is that I can really work very well in this language.</p><p>My question is: how does software written in Scala compare to software written in Java in terms of execution speed and memory consumption?<br /> Of course, this is a difficult question to answer in general, but I would expect that higher level constructs such as pattern matching, higher-order functions, etc, introduce some overhead.</p><p>However, my current experience in Scala is limited to small examples under 50 lines of code and I haven&#39;t run any benchmarks up to now. So, I have no real data.</p><p>If it turned out that Scala <em>does have</em> some overhead wrt Java, does it make sense to have mixed Scala / Java projects, where one codes the more complex parts in Scala and the performance-critical parts in Java? Is this a common practice?</p><p><strong>EDIT 1</strong></p><p>I have run a small benchmark: build a list of integers, multiply each integer by two and put it in a new list, print the resulting list. I wrote a Java implementation (Java 6) and a Scala implementation (Scala 2.9). I have run both on Eclipse Indigo under Ubuntu 10.04.</p><p>The results are comparable: 480 ms for Java and 493 ms for Scala (averaged over 100 iterations). Here are the snippets I have used.</p><pre><code>// Java
public static void main(String[] args)
{
    long total = 0;
    final int maxCount = 100;
    for (int count = 0; count &lt; maxCount; count++)
    {
        final long t1 = System.currentTimeMillis();

        final int max = 20000;
        final List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();
        for (int index = 1; index &lt;= max; index++)
        {
            list.add(index);
        }

        final List&lt;Integer&gt; doub = new ArrayList&lt;Integer&gt;();
        for (Integer value : list)
        {
            doub.add(value * 2);
        }

        for (Integer value : doub)
        {
            System.out.println(value);
        }

        final long t2 = System.currentTimeMillis();

        System.out.println(&#34;Elapsed milliseconds: &#34; + (t2 - t1));
        total += t2 - t1;
    }

    System.out.println(&#34;Average milliseconds: &#34; + (total / maxCount));
}

// Scala
def main(args: Array[String])
{
    var total: Long = 0
    val maxCount    = 100
    for (i &lt;- 1 to maxCount)
    {
        val t1   = System.currentTimeMillis()
        val list = (1 to 20000) toList
        val doub = list map { n: Int =&gt; 2 * n }

        doub foreach ( println )

        val t2 = System.currentTimeMillis()

        println(&#34;Elapsed milliseconds: &#34; + (t2 - t1))
        total = total + (t2 - t1)
    }

    println(&#34;Average milliseconds: &#34; + (total / maxCount))
}
</code></pre><p>So, in this case it seems that the Scala overhead (using range, map, lambda) is really minimal, which is not far from the information provided by<br /> World Engineer.</p><p>Maybe there are other Scala constructs that should be used with care because they are particularly <em>heavy</em> to execute?</p><p><strong>EDIT 2</strong></p><p>Some of you pointed out that the println&#39;s in the inner loops take up most of<br /> the execution time. I have removed them and set the size of the lists to 100000 instead of 20000. The resulting average was 88 ms for Java and 49 ms for Scala.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>There&#39;s one thing that you can do concisely and efficiently in Java that you can&#39;t in Scala: enumerations. For everything else, even for constructs that are slow in Scala&#39;s library, you can get efficient versions working in Scala.</p><p>So, for the most part, you don&#39;t need to add Java to your code. Even for code that uses enumeration in Java, there&#39;s often a solution in Scala that is adequate or good -- I place the exception on enumerations that have extra methods and whose int constant values are used.</p><p>As for what to watch out for, here are some things.</p><ul><li><p>If you use the enrich my library pattern, always convert to a class. For example:</p><pre><code>// WRONG -- the implementation uses reflection when calling &#34;isWord&#34;
implicit def toIsWord(s: String) = new { def isWord = s matches &#34;[A-Za-z]+&#34; }

// RIGHT
class IsWord(s: String) { def isWord = s matches &#34;[A-Za-z]+&#34; }
implicit def toIsWord(s: String): IsWord = new IsWord(s)
</code></pre></li><li><p>Be wary of collection methods -- because they are polymorphic for the most part, JVM does not optimize them. You need not avoid them, but pay attention to it on critical sections. Be aware that <code>for</code> in Scala is implemented through method calls and anonymous classes.</p></li><li><p>If using a Java class, such as <code>String</code>, <code>Array</code> or <code>AnyVal</code> classes that correspond to Java primitives, prefer the methods provided by Java when alternatives exist. For example, use <code>length</code> on <code>String</code> and <code>Array</code> instead of <code>size</code>.</p></li><li><p>Avoid careless use of implicit conversions, as you can find yourself using conversions by mistake instead of by design.</p></li><li><p>Extend classes instead of traits. For example, if you are extending <code>Function1</code>, extend <code>AbstractFunction1</code> instead.</p></li><li><p>Use <code>-optimise</code> and specialization to get most of Scala.</p></li><li><p>Understand what is happening: <code>javap</code> is your friend, and so are a bunch of Scala flags that show what&#39;s going on.</p></li><li><p>Scala idioms are designed to improve correctness and make the code more concise and maintainable. They are not designed for speed, so if you need to use <code>null</code> instead of <code>Option</code> in a critical path, do so! There&#39;s a reason why Scala is multi-paradigm.</p></li><li><p>Remember that the true measure of performance is running code. See <a href="https://stackoverflow.com/q/7084212/53013">this question</a> for an example of what may happen if you ignore that rule.</p></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-why-use-scala-over-java/'>Java &#8211; Why Use Scala over Java</a></li><li class="list-group-item"><a href='../java-would-scala-be-a-good-choice-instead-of-java/'>Java &#8211; Would scala be a good choice instead of Java</a></li><li class="list-group-item"><a href='../java-do-you-need-to-know-java-before-trying-scala/'>Java &#8211; Do you need to know Java before trying Scala</a></li><li class="list-group-item"><a href='../java-scalablity-of-scala-over-java/'>Java &#8211; scalablity of Scala over Java</a></li><li class="list-group-item"><a href='../java-can-scala-be-considered-a-functional-superset-of-java/'>Java &#8211; Can Scala be considered a functional superset of Java</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>