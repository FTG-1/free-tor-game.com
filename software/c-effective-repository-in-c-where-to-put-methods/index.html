<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Effective Repository in C# &#8211; Where to put methods &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084892 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084892" class="post-1084892 software type-software status-publish hentry category-software tag-c tag-design-patterns tag-repository"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Effective Repository in C# &#8211; Where to put methods</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">repository</span></p><div class="entry-content"><p>I&#39;m trying to build a new application using the Repository pattern for the first time and I&#39;m a little confused about using a Repository. Suppose I have the following classes:</p><pre><code>public class Ticket
{

}
public class User
{
   public List&lt;Ticket&gt;AssignedTickets { get; set; }
}
public class Group
{
   public List&lt;User&gt; GroupMembers { get;set; }
   public List&lt;Ticket&gt; GroupAssignedTickets { get;set; }
}
</code></pre><p>I need methods that can populate these collections by fetching data from the database.</p><p>I&#39;m confused as to which associated Repository class I should put those methods in. Should I design my repositories so that everything <em>returning</em> type T goes in the repository for type T as such?</p><pre><code>public class TicketRepository
{
   public List&lt;Ticket&gt; GetTicketsForGroup(Group g) { }
   public List&lt;Ticket&gt; GetTicketsForUser(User u) { }
}
public class UserRepository
{
  public List&lt;User&gt; GetMembersForGroup(Group g) { }
}
</code></pre><p>The obvious drawback I see here is that I need to start instantiating a lot of repositories. What if my User also has assigned Widgets, Fidgets, and Lidgets? When I populate a User, I need to instantiate a WidgetRepository, a FidgetRepository, and a LidgetRepository all to populate a single user.</p><p>Alternatively, do I construct my repository so that everything <em>requesting</em> based on type T is lumped into the repository for type T as listed below?</p><pre><code>public class GroupRepository
{
    public List&lt;Ticket&gt; GetTickets(Group g) { }
    public List&lt;User&gt; GetMembers(Group g) { }
}
public class UserRepository
{
   public List&lt;Ticket&gt; GetTickets(User u) { }
}
</code></pre><p>The advantage I see here is that if I now need my user to have a collection of Widgets, Fidgets, and Lidgets, I just add the necessary methods to the UserRepository pattern and don&#39;t need to instantiate a WidgetRepository, FidgetRepository, and LigetRepository class every time I want to create a user, but now I&#39;ve scattered the concerns for a user across several different repositories.</p><p>I&#39;m really not sure which way is right, if any. Any suggestions?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The second option seems like you are defining your repository based on your requirements for this given application vs 1 repository per &#34;table&#34; which could be more flexible for other areas of your app that might come up or other applications that might not group stuff like your current app does. Yes, it means you&#39;ll have a fair amount of repositories, but then they are reusable inside any project that needs access to said repository.</p><p>I generally make repositories per &#34;table&#34; (I work in DB mostly) and then make &#34;service&#34; classes (some say UnitofWork I think) that group repositories and has an interface to give functionality to that service.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-manager-container-class-vs-static-class-methods/'>C# &#8211; Manager/Container class vs static class methods</a></li><li class="list-group-item"><a href='../c-entity-framework-5-separating-business-logic-from-model-repository/'>C# &#8211; Entity Framework 5, separating business logic from model &#8211; Repository</a></li><li class="list-group-item"><a href='../what-should-a-repository-really-do/'>What should a repository really do</a></li><li class="list-group-item"><a href='../c-how-to-populate-lazy-object-from-database/'>C# &#8211; How to populate Lazy object from database</a></li><li class="list-group-item"><a href='../how-does-the-aggregate-root-concept-and-the-repository-pattern-solve-dry-in-database-operations/'>How does the Aggregate Root concept and the Repository Pattern solve DRY in database operations</a></li><li class="list-group-item"><a href='../c-avoid-core-layer-referencing-dal-when-defining-repository-interface/'>C# &#8211; Avoid core layer referencing DAL when defining repository interface</a></li><li class="list-group-item"><a href='../c-repository-pattern-and-joined-queries/'>C# &#8211; Repository Pattern and Joined Queries</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>