<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Undefined behaviour in Java &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070101 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070101" class="post-1070101 software type-software status-publish hentry category-software tag-c tag-java tag-undefined-behavior"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Undefined behaviour in Java</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">java</span><span class="mr-2 badge badge-warning">undefined-behavior</span></p><div class="entry-content"><p>I was reading <a href="https://stackoverflow.com/questions/367633/what-are-all-the-common-undefined-behaviour-that-a-c-programmer-should-know-ab">this question on SO</a> which discusses some common undefined behavior in C++, and I wondered: does Java also have undefined behaviour?</p><p>If that is the case, then what are some common causes of undefined behaviour in Java?</p><p>If not, then which features of Java make it free from such behaviours and why haven&#39;t the latest versions of C and C++ been implemented with these properties?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>In Java, you can consider behavior of incorrectly synchronized program undefined.</p><p>Java 7 JLS uses word &#34;undefined&#34; once, in <a href="http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.8" rel="nofollow noreferrer">17.4.8. Executions and Causality Requirements</a>:</p><blockquote><p><sup>We use <code>f|d</code> to denote the function given by restricting the domain of <code>f</code> to <code>d</code>. For all <code>x</code> in <code>d</code>, <code>f|d(x) = f(x)</code>, and for all <code>x</code> not in <code>d</code>, <code>f|d(x)</code> is <strong>undefined</strong>...</sup></p></blockquote><p>Java API documentation specifies some cases when results are undefined - for example, in (deprecated) constructor <a href="http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html#Date(int,%20int,%20int)" rel="nofollow noreferrer">Date(int year, int month, int day)</a>:</p><blockquote><p><sup>The result is <strong>undefined</strong> if a given argument is out of bounds...</sup></p></blockquote><p>Javadocs for <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection)" rel="nofollow noreferrer">ExecutorService.invokeAll(Collection)</a> state:</p><blockquote><p><sup>The results of this method are <strong>undefined</strong> if the given collection is modified while this operation is in progress...</sup></p></blockquote><p>Less formal kind of &#34;undefined&#34; behavior can be found for example in <a href="http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html" rel="nofollow noreferrer">ConcurrentModificationException</a>, where API docs use term &#34;best effort&#34;:</p><blockquote><p><sup>Note that fail-fast behavior cannot be guaranteed as it is, generally speaking, impossible to make any hard guarantees in the presence of unsynchronized concurrent modification. Fail-fast operations throw <code>ConcurrentModificationException</code> on a <strong>best-effort</strong> basis. Therefore, it would be wrong to write a program that depended on this exception for its correctness...</sup></p></blockquote><hr/><h2>Appendix</h2><p>One of the question <a href="https://softwareengineering.stackexchange.com/questions/153843/undefined-behaviour-in-java/153848#comment292589_153843">comments</a> refers to an article by Eric Lippert which provides helpful introduction into topic matters: <strong><a href="http://blogs.msdn.com/b/ericlippert/archive/2012/06/18/implementation-defined-behaviour.aspx" rel="nofollow noreferrer" title="Eric Lippertâ€™s Blog - Fabulous Adventures In Coding">Implementation-defined behaviour</a></strong>.</p><p>I recommend this article for the language-agnostic reasoning, although it is worth keeping in mind that author targets C#, not Java.</p><blockquote><p>Traditionally we say that a programming language idiom has <strong>undefined behaviour</strong> if use of that idiom can have any effect whatsoever; it can work the way you expect it to or it can erase your hard disk or crash your machine. Moreover, the compiler author is under no obligation to warn you about the undefined behaviour. (And in fact, there are some languages in which programs that use &#34;undefined behaviour&#34; idioms are permitted by the language specification to crash the compiler!)...</p><p>By contrast, an idiom that has <strong>implementation-defined behaviour</strong> is behaviour where the compiler author has several choices about how to implement the feature, and must choose one. As the name implies, implementation-defined behaviour is at least defined. For example, C# permits an implementation to throw an exception or produce a value when an integer division overflows, but the implementation must pick one. It cannot erase your hard disk...</p><p><strong>What are some of the factors that lead a language design committee to leave certain language idioms as undefined or implementation-defined behaviours?</strong></p><p>The first major factor is: <strong>are there two existing implementations of the language in the marketplace that disagree on the behaviour of a particular program?</strong> ...</p><p>The next major factor is: <strong>does the feature naturally present many different possibilities for implementation, some of which are clearly better than others?</strong> ...</p><p>A third factor is: <strong>is the feature so complex that a detailed breakdown of its exact behaviour would be difficult or expensive to specify?</strong> ...</p><p>A fourth factor is: <strong>does the feature impose a high burden on the compiler to analyze?</strong> ...</p><p>A fifth factor is: <strong>does the feature impose a high burden on the runtime environment?</strong> ...</p><p>A sixth factor is: <strong>does making the behaviour defined preclude some major optimization?</strong> ...</p><p>Those are just a few factors that come to mind; there are of course many, many other factors that language design committees debate before making a feature &#34;implementation defined&#34; or &#34;undefined&#34;.</p></blockquote><p><sub>Above is only a very brief coverage; full article contains explanations and examples for the points mentioned in this excerpt; it is <em>much</em> worth reading. For example, details given for the &#34;sixth factor&#34; can give one an insight into motivation for many statements in Java Memory Model (<a href="http://jcp.org/en/jsr/detail?id=133" rel="nofollow noreferrer" title="specification page at jcp.org">JSR 133</a>), helping to understand why some optimizations are allowed, leading to undefined behavior while others are prohibited, leading to limitations like <em>happen-before</em> and <em>causality requirements</em>.</sub></p><blockquote class="spoiler"><p> <sub>None of the article materials is particularly new to me but I&#39;ll be damned if I ever seen it presented in such an elegant, consise and understandable way. Amazing.</sub></p></blockquote></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/c-philosophy-behind-undefined-behavior/'>C++ &#8211; Philosophy behind Undefined Behavior</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/why-is-xx-undefined/'>Why is x=x++ undefined</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-how-will-the-new-development-of-java-influence-its-interoperability-with-languages-like-scala-and-clojure/'>Java &#8211; How will the new development of Java influence its interoperability with languages like Scala and Clojure</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-undefined-behavior-in-principle/'>C++ &#8211; Undefined behavior, in principle</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/when-did-undefined-behavior-in-c-jump-the-causality-barrier/'>When did Undefined Behavior in C jump the causality barrier</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>