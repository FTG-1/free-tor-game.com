<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Nested Entities and calculation on leaf entity property &#8211; SQL or NoSQL approach &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084830 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084830" class="post-1084830 software type-software status-publish hentry category-software tag-c tag-database-design tag-graph-databases tag-nosql tag-sql"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Nested Entities and calculation on leaf entity property &#8211; SQL or NoSQL approach</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">database-design</span><span class="mr-2 badge badge-warning">graph-databases</span><span class="mr-2 badge badge-primary">nosql</span><span class="mr-2 badge badge-danger">sql</span></p><div class="entry-content"><p>I am working on a hobby project called Menu/Recipe Management.</p><p>This is how my entities and their relations look like.</p><p>A <code>Nutrient</code> has properties <code>Code</code> and <code>Value</code></p><p>An <code>Ingredient</code> has a collection of <code>Nutrients</code></p><p>A <code>Recipe</code> has a Collection of <code>Ingredients</code> and occasionally can have a collection of other <code>recipes</code></p><p>A <code>Meal</code> has a Collection of <code>Recipes</code> and <code>Ingredients</code></p><p>A <code>Menu</code> has a Collection of <code>Meals</code></p><p>The relations can be depicted as</p><p><img src="../../../i.stack.imgur.com/Un7Pr.png" alt="Menu Entities and Relationships"/></p><p>In one of the pages, for a selected menu I need to display the effective nutrients information calculated based on its constituents (Meals, Recipes, Ingredients and the corresponding nutrients).</p><p>As of now am using SQL Server to store the data and I am navigating the chain from my C# code, starting from each meal of the menu and then aggregating the nutrient values.</p><p>I think this is not an efficient way as this calculation is being done every time the page is requested and the constituents change occasionally.</p><p>I was thinking about a having a background service that maintains a table called MenuNutrients (<code>{MenuId, NutrientId, Value}</code>) and will populate/update this table with the effective nutrients when any of the component (Meal, Recipe, Ingredient) changes.</p><p>I feel that a GraphDB would be a good fit for this requirement, but my exposure to NoSQL is limited.</p><p>I want to know what are the alternative solutions/approaches to this requirement of displaying the nutrients of a given menu.</p><p>Hope my description of the scenario is clear.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Based on the requirements and  architecture, there may be performance improvement options:<br/></p><ul><li><p>You may use <a href="http://msdn.microsoft.com/en-us/library/aa933148(SQL.80).aspx" rel="nofollow noreferrer">indexed views</a>(matrialized) To <a href="http://msdn.microsoft.com/en-us/library/dd171921(SQL.100).aspx" rel="nofollow noreferrer">improve read
performance</a> on RDBMS(Sql server) level.<br/> Basically, all you
need to do is:<br/> <em>Create a regular view.</em><br/> <em>Create a clustered index
on that view</em>.<br/></p></li><li><p>Using a cashing mechanism in application level will improve
performance.<br/> If its possible and feasible to use cashing, having
a cash strategy like <a href="https://stackoverflow.com/questions/11502584/asp-net-cache-singleton-pattern">singleton lazy cashing</a> will help you.</p></li></ul><p><strong>NoSql:</strong><br/> There are lots of good articles about Sql vs NoSql, like <a href="https://stackoverflow.com/questions/1476295/when-to-use-mongodb-or-other-document-oriented-database-systems/1477354#1477354">this</a> and <a href="https://stackoverflow.com/questions/37823/good-reasons-not-to-use-a-relational-database/37852#37852">this</a><br/><br/> <em>The parts interests me :</em> <br/><br/><strong>Where to use NoSql:</strong></p><blockquote><p>If your DB is <a href="http://en.wikipedia.org/wiki/Third_normal_form" rel="nofollow noreferrer">3NF</a> <strong>and you don’t do any joins</strong> (you’re just selecting a
 bunch of tables and putting all the objects together, AKA what most
 people do in a web app.</p></blockquote><p><strong>When used be ready to:</strong> <br/></p><blockquote><ul><li>You end up writing jobs to do things like joining data from different    tables/collections, something that an RDBMS would do for you automatically.</li><li>Your query capabilities with NoSQL are drastically crippled. MongoDb may be the closest thing to SQL but it is still extremely far behind. Trust me. SQL queries are super intuitive, flexible and powerful. NoSql queries are not.</li><li>MongoDb queries can retrieve data from only one collection and take    advantage of only one index. And MongoDb is probably one of the most flexible NoSQL databases. In many scenarios, this means more round-trips to the server to find related records. And then you start  de-normalizing data - which means background jobs.</li><li>The fact that it is not a relational database means that you won&#39;t    have (thought by some to be bad performing) foreign key constrains to  ensure that your data is consistent. I assure you this is eventually is going to create data inconsistencies in your database. Be prepared. Most likely you will start writing processes or checks to keep your database consistent, which will probably not perform better than letting the RDBMS do it for you.</li><li>Forget about mature frameworks like hibernate.</li></ul></blockquote><p>Beside deciding to use or not to use NoSql, a helpful article on <a href="http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis" rel="nofollow noreferrer">NOSQL DBMS Comparison and the intention of them could be found here</a> as some of them are focused on high reads, low writes, map-reduce, HA ... <br/> Having a look at the <a href="http://db-engines.com/en/ranking" rel="nofollow noreferrer">ranking and popularity of them</a>, by category may be usefull.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-rails-and-mongoid-best-way-to-implement-sharing-system/'>Database &#8211; Rails and Mongoid best way to implement sharing system</a></li><li class="list-group-item"><a href='../database-an-algorithm-for-finding-subset-matching-criteria/'>Database &#8211; An algorithm for finding subset matching criteria</a></li><li class="list-group-item"><a href='../how-to-design-role-based-access-control/'>How to design role based access control</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>