<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Domain Models with complex properties construction &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087996 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087996" class="post-1087996 software type-software status-publish hentry category-software tag-c tag-design tag-domain-driven-design tag-domain-model tag-dto"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Domain Models with complex properties construction</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">domain-driven-design</span><span class="mr-2 badge badge-primary">domain-model</span><span class="mr-2 badge badge-danger">dto</span></p><div class="entry-content"><p>According to this <a href="https://enterprisecraftsmanship.com/2014/12/27/dont-use-ids-domain-entities/" rel="nofollow noreferrer">article</a>: Using Ids in Domain Models is not a good practice.<br /> We should reference the entire domain model instead.</p><p>In this case, when we want to provide only Getters for our properties, we have no choice but to use the constructor parameters to pass all the data.</p><p>example :</p><pre><code>class Car {

    public Car(string name, Model model, Engine engine){
        Name = name;
        Model model = model;
        Engine = engine;
    }

    public string Name {get;}
    public Model Model {get;}
    public Engine Engine {get}
}
</code></pre><p>In a case where we receive a DTO from the front end for example:</p><pre><code>class CarDto {
    public string Name {get;set;}
    public long ModelId {get;set;}
    public long EngineId {get;set;}
}
</code></pre><p>How to construct the domain model from this?</p><ul><li>Should we fetch the Engine and Model from the database by their ids before building the domain model ?</li></ul><p>Also in the case when in our Domain Model we have some complex properties that are not always set, is it enough to just pass null as a parameter, or they shouldn&#39;t appear at all in the constructor, and give them a Setter ?</p><p><strong><em>Any other suggestion is welcome.</em></strong></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><em>Q: <strong>Should we fetch the Engine and Model from the database by their ids before building the domain model ?</strong></em></p><p>Yes, this&#39;s what <em>repositories</em> do. If <code>Car</code> is an aggregate, the repository should be capable of fetching whatever <code>Car</code> needs for its initialization. It might load <code>Engine</code> and <code>Model</code> directly from the data store or ask for them to other components. You also could use services to retrieve <code>Engine</code> and <code>Model</code> and send&#39;em to the repository alongside with the attribute <code>name</code>.</p><p><em>Q: <strong>Also in the case when in our Domain Model we have some complex properties that are not always set, is it enough to just pass null as a parameter, or they shouldn&#39;t appear at all in the constructor, and give them a Setter ?</strong></em></p><p>If any of the attributes are optional, it&#39;s important to make this as clear and explicit as possible. This said, it&#39;s preferable to take them off the constructor and define <em>setters</em> (or methods with the due parametrization) because it simplifies the code and improves readability.</p><p>To initialise entities in different states, you could overload constructors or create static factory methods.<sup>2</sup></p><p>If you are concerned about the access to the <em>setters</em> you have different ways to control it. The first that comes to mind is through access modifiers. However, you could rely on well-known OOP design practices (inversion of control or interface segregation to mention any) or design patterns.<sup>1</sup></p><p><em>S: <strong>Using Ids in Domain Models is not a good practice</strong></em></p><p>That&#39;s fairly true, overall when we turn the persistence model into the domain one. In such cases, the implementation details of the persistence bypass the boundaries of the persistence and become part of the implementation detail of the domain too. Raw strings and numbers become identifiers when, from the DDD standpoint, they are most likely the worst representation for an identifier. In DDD, identifying entities and aggregates might take something else than a simple string.</p><p>Since @Casablanca has mentioned Vaughn Vernon, I will share another <a href="http://www.informit.com/articles/article.aspx?p=2020371" rel="nofollow noreferrer">link</a> where he speaks about correlating boundaries (aggregates) through identifiers.</p><hr/><p><sup>1: Defensive programming as security is a matter of costs vs benefits. Don&#39;t go crazy making everything private (narrowing down scopes to the absurd) at expenses of simplicity and readability. Unless you have a good reason for it.</sup></p><p><sup>2: Some languages implement the notion of <em>optional</em> parameter. As soon the intention is clear (what&#39;s optional and what&#39;s not), these parameters should work too.</sup></p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-design-many-properties-complex-constructor-and-equality/'>C# Design, many properties, complex constructor and equality</a></li><li class="list-group-item"><a href='../how-should-i-include-third-party-models-in-the-domain-model/'>How should I include third-party models in the domain model</a></li><li class="list-group-item"><a href='../mvc-do-mvc-web-frameworks-favor-anemic-domain-model-in-order-to-avoid-duplication/'>Mvc &#8211; Do MVC web frameworks favor anemic domain model in order to avoid duplication</a></li><li class="list-group-item"><a href='../exposing-domain-models-over-api/'>Exposing domain models over API</a></li><li class="list-group-item"><a href='../architecture-domain-model-design-best-practices-for-robust-fluency-encapsulation-and-extensibility/'>Architecture &#8211; Domain Model Design &#8211; Best Practices for Robust Fluency, Encapsulation, and Extensibility</a></li><li class="list-group-item"><a href='../modeling-request-response-in-domain-driven-design/'>Modeling request/response in domain driven design</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>