<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; When to use Future vs Listener &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073826 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073826" class="post-1073826 software type-software status-publish hentry category-software tag-callbacks tag-concurrency tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; When to use Future<> vs Listener</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">callbacks</span><span class="mr-2 badge badge-info">concurrency</span><span class="mr-2 badge badge-warning">java</span></p><div class="entry-content"><p>I&#39;ve started working on an existing project (an sdk) at work, and the code base uses listeners like there&#39;s no tomorrow. Pretty much every second method takes some sort of listener argument and I have yet to find an occurrence where the listener is not the calling class or an anonymous class declared when the method is called.</p><p>My question is: when/why is it appropriate to use a Listener over Future&lt;&gt; in this way?</p><pre><code>// Util methods
static void postSuccess(Listener listener, Object object) {
    Util.runOnUI(() -&gt; { listener.success(object); });
}
static void postError(Listener, Exception ex) {
    Util.runOnUI(() -&gt; { listener.failure(ex); });
}

void foo ( Bar bar, Listener listener ) {
    executor.submit(() -&gt; {
        try {
            // work_on() is a potentially long running function
            Result res = work_on( bar );
            Util.postSuccess(listener, res)
         }
         catch (Exception ex) {
            Util.postError(listener, ex);
         }
     }
}
</code></pre><p>In the above code the caller has no control over when the listener&#39;s method is invoked. The following code would allow the caller to decide whether to wait or check it later and generally seems to provide more control:</p><pre><code>Future&lt;Result&gt; foo ( Bar bar ) {
    return executor.submit(() -&gt; { return workOn( bar ) };
}
</code></pre><p>Apologies if I&#39;m missing something obvious, I&#39;m only out of college three months, but this listener code smells bad to me.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>With both alternatives, you can achieve the same functionality: running some long piece of code without blocking the caller and provide a mean to give the result later.</p><p>But from my own experience, I always foster <code>Future</code> over callback for the following reasons:</p><ul><li>Program flow is much harder to understand with callbacks than with <code>Future</code>. The flow is like &#34;jumping&#34; making it also hard to debug.</li><li>Callbacks denature the method&#39;s signature. When you look at <code>void foo(Bar bar, Listener listener)</code>, first: it returns <code>void</code> although we would have expected this method to return something in a synchronous context. Second: the parameters list is polluted with a <code>Listener</code> that has nothing to do with the domain (= visual noise). On the other hand, with a <code>Future</code> the intent is clearer: <em>I need a <code>Bar</code> in order to deliver you a <code>Result</code>, but not directly, only in some future</em>.</li><li>You can end up in the <a href="https://stackoverflow.com/questions/32610724/how-to-avoid-piling-up-callbacks-or-callback-hell">callback hell</a>. With <code>Future</code> your code stays more composable and evolutive. By the way, Java 8 is also shipped with a whole new API called <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html" rel="noreferrer">CompletableFuture</a> that makes the usage of asynchronism more expressive and relies on <code>Future</code>.</li><li>With callbacks, you enforce the thread in which the listener is called (in your case the UI thread). But what if the user doesn&#39;t want the callback to be run in the UI thread ? It&#39;s too late because this dependency has been hardcoded in <strong>your</strong> code and the caller is stuck. With <code>Future</code> the caller is free to choose the thread he wants to handle the result in.</li><li>Callbacks can create a lot of garbage threads if done carelessly because each listener has to be invoked in another thread (this is, however, not the case in your example since you always use the UI thread). With <code>Future</code> only one thread is involved.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/java-how-does-a-programmer-used-to-static-languages-cope-with-lack-of-javascript-tooling/'>Java &#8211; How does a programmer used to static languages cope with lack of Javascript tooling</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-generics-how-to-strike-a-balance-between-expressiveness-and-simplicity/'>Java Generics &#8211; how to strike a balance between expressiveness and simplicity</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-performance-benefit-to-using-the-method-reference-syntax-instead-of-lambda-syntax-in-java-8/'>Java &#8211;  performance benefit to using the method reference syntax instead of lambda syntax in Java 8</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-should-constructors-ever-be-used-only-for-side-effects/'>Java &#8211; Should constructors ever be used only for side-effects</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-does-java-have-void-methods/'>Java &#8211; Why does Java have `void` methods</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-should-a-standard-factory-always-generate-a-new-instance/'>Java &#8211; Should a standard factory always generate a new instance</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>