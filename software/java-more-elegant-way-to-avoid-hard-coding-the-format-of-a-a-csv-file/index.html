<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; More elegant way to avoid hard coding the format of a a CSV file &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069653 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069653" class="post-1069653 software type-software status-publish hentry category-software tag-coding-style tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; More elegant way to avoid hard coding the format of a a CSV file</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">coding-style</span><span class="mr-2 badge badge-info">java</span></p><div class="entry-content"><p>I know this is trivial issue, but I just feel this can be more elegant.</p><p>So I need to write/read data files for my program, lets say they are CSV for now.  I can implement the format as I see fit, but I may have need to change that format later.  The simply thing to do is something like</p><pre><code>out.write(For.getValue()+&#34;,&#34;+bar.getMinValue()+&#34;,&#34;+fi.toString());
</code></pre><p>This is easy to write, but obviously is guilty of hard coding and the general &#39;magic number&#39; issue.  The format is hard-coded, requires parsing of the code to figure out the file format, and changing the format requires changing multiple methods.</p><p>I could instead have my constants specifying the location that I want each variable to be saved in the CSV file to remove some of the &#39;magic numbers&#39;; then save/load into the an array at the location specified by the constants:</p><pre><code>int FOO_LOCATION=0;
int BAR_MIN_VAL_LOCATION=1;
int FI_LOCATION=2
int NUM_ARGUMENTS=3;

String[] outputArguments=new String[NUM_ARGUMENTS];
outputArguments[FOO_LOCATION] = foo.getValue();
outputArgumetns[BAR_MIN_VAL_LOCATION] = bar.getMinValue();
outptArguments[FI_LOCATOIN==fi.toString();

writeAsCSV(outputArguments);
</code></pre><p>But this is&#8230;extremely verbose and still a bit ugly.  It makes it easy to see the format of existing CSV and to swap the location of variables within the file easily.  However, if I decide to add an extra value to the csv I need to not only add a new constant, but also modify the read and write methods to add the logic that actually saves/reads the argument from the array; I still have to hunt down every method using these variables and change them by hand!</p><p>If I use Java enums I can clean this up slightly, but the real issue is still present.  Short of some sort of functional programming (and java&#39;s inner classes are too ugly to be considered functional) I still have no obvious way of clearly expressing what variable is associated with each constant short of writing (and maintaining) it in the read/write methods.  For instance I still need to write somewhere that the FOO_LOCATION specifies the location of foo.getValue().</p><p>It seems as if there should be a prettier, easier to maintain, manner for approaching this?</p><p>Incidentally, I&#39;m working in java at the moment, however, I am interested conceptually about the design approach regardless of language.  Some library in java that does all the work for me is definitely welcome (though it may prove more hassle to get permission to add it to the codebase then to just write something by hand quickly), but what I&#39;m really asking is more about how to write elegant code if you had to do this by hand.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Regardless of language, if you don&#39;t want to hard code the values, then one will need some sort of meta data that describes how the data will be mapped, formatted, and output.</p><p>In this example, it could be called a mapper or formatter.</p><p>Map/format files (XML, JSON, or simliar) would describe how the data would be formatted and written.  Your application would read in the map/format file and use it to create the output.</p><p>Then your application could format the CSV anyway you see fit, without a programming change.  One could also extend this to flat or fixed formats and XML as well.  Then your code is generic as it uses the mapping meta data to create the CSV file.</p><p>For the CSV case, at a high level one would need to describe:</p><ul><li>Name and Order of fields</li><li>Delimiter (Sometimes comma is not used)</li><li>Whether or not to include a header</li><li>Whether or not to include quotes around the data</li></ul><p>Just as a side note, there is a time difference to develop the two applications.  Hardcoded field values are much faster to develop, although as you have pointed out less elegant.  But if you need to get something done quickly, the aproach is OK.</p><p>Developing something more generic would take more time up front, but if your producing a lot of CSV formatted files of different format, in the long run one would get ROI on it.</p><p>With this approach, one can also write some sort of nice &#34;GUI&#34; for business analysts to use to create the map files so developers will be less involved in the overall process.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-should-a-string-constant-be-defined-if-its-only-going-to-be-used-once/'>Java &#8211; Should a string constant be defined if it&#8217;s only going to be used once</a></li><li class="list-group-item"><a href='../java-rest-api-how-to-check-for-duplicate-before-inserting-record/'>Java &#038; REST API: How to check for duplicate before inserting record</a></li><li class="list-group-item"><a href='../sql-query-and-java-constant-abuse/'>SQL Query and Java Constant Abuse</a></li><li class="list-group-item"><a href='../magic-numbers-locality-and-readability/'>Magic numbers, locality and readability</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>