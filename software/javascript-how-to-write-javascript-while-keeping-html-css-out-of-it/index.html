<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Javascript &#8211; How to write JavaScript while keeping HTML/CSS out of it &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084259 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084259" class="post-1084259 software type-software status-publish hentry category-software tag-html tag-javascript tag-jquery tag-json tag-separation-of-concerns"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Javascript &#8211; How to write JavaScript while keeping HTML/CSS out of it</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">html</span><span class="mr-2 badge badge-info">javascript</span><span class="mr-2 badge badge-warning">jquery</span><span class="mr-2 badge badge-primary">json</span><span class="mr-2 badge badge-danger">separation-of-concerns</span></p><div class="entry-content"><p>What is / are some recommended ways to write JavaScript as to control behavior of showing HTML on screen, while keeping well-maintainable code?  Basically, I started to look for ways to keep HTML/CSS out of JS (assuming it&#39;s the recommended practice), but I might as well check into the latest ways of writing JavaScript well.  See below for more details.</p><p><strong>My specific problem</strong></p><p>I have JS files that look something like this:</p><pre class="lang-js prettyprint-override"><code>var selection = eval(&#34;(&#34; + document.getElementById(&#34;result&#34;).innerHTML + &#34;)&#34;);

if (selection[index].selected) {
    result += &#39;&lt;TABLE class=&#34;list_grey&#34; style=&#34;float: left; margin-left: 20px;&#34;&gt;&#39;;
    result += &#39;&lt;TR&gt;&#39;;
    result += &#39;&lt;TH colspan=&#34;2&#34;&gt;Data&lt;/TH&gt;&#39;;
    result += &#39;&lt;/TR&gt;&#39;;

    var flag = &#34;All&#34;;

    if (selection[index].flag == &#39;P&#39;)
        flag = &#34;Premium&#34;;

    result += &#39;&lt;TR&gt;&#39;;
    result += &#39;&lt;TD&gt;Flag&lt;/TD&gt;&#39;;
    result += &#39;&lt;TD&gt;&#39; + flag + &#39;&lt;/TD&gt;&#39;;
    result += &#39;&lt;/TR&gt;&#39;;
    result += &#39;&lt;/TABLE&gt;&#39;;
}

document.getElementById(&#39;final&#39;).innerHTML = result;
</code></pre><p>In fact, entire JS codebase I work with is plagued by this.  You can see here HTML, CSS JS, and JSON (<code>selection</code> var gets its content from JSON prepared by PHP earlier).  I want to make this better.</p><p><strong>My experience level</strong></p><p>I am new to writing good JS or to having experience with JS patterns, tools, tips, techniques, and so on.  I am looking for help with those.</p><p><strong>My specific issue:</strong></p><p>I have a series of tables and data to be shown to the user.  It is a &#34;series&#34;, so user can select which &#34;element&#34; of the series is currently active on the screen.  An &#34;element&#34; is essentially an HTML partial (with JS and CSS and HTML), and is described below:</p><p>&#34;element&#34;:  a block of HTML that serves as static data (tables, titles, and divs), and a long JSON string that encodes some previously prepared data.  JSON string is assigned to a JS variable and that JSON data/JS variable stores records numbered <code>1</code> through <code>n</code>, where each <code>i</code> holds various data to be injected into the block of HTML, forming &#34;HTML partial&#34;.</p><p>I have navigational buttons on the screen, allowing user to step through the &#34;series&#34;, where the HTML is the same, but the data inside it changes.</p><p>I am looking for a good way to write this &#34;step through HTML blocks&#34; functionality using what is considered to be good maintainable JS code.  Namely, I am looking for the following characteristics:</p><ul><li>separation of concern</li><li>cleaner code &#8211; I need tools or techniques to allow me to avoid mixing HTML with JS with CSS (as in seen my example), unless where necessary or convenient.  (what I have now is not convenient)</li><li>I prefer techniques rather than tools, but open to considering/evaluating well-established tools.  By &#34;techniques&#34;, I mean pure JS, HTML, CSS, PHP approaches.  By &#34;tools&#34;, I currently know and trust jQuery, and for other tools prefer to have some track record to them.</li></ul><p><strong>Note on HTML visibility/hiding</strong></p><p>I should also perhaps note that in my case HTML is static, aka it does not change structurally, as I step through the elements.  However, based on the JSON/selection variable, some blocks of HTML are show/hidden (as is shown in my example).  Once they are shown/hidden at page render time, they stay shown/hidden throughout stepping through selection.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Use a mvw (model/view/whatever) pattern</h2><ul><li>model: &#34;pure&#34; javascript library modelling abstract concepts. This part usually contains objects &amp; methods names related to the application domain (car business -&gt; car objects / insurance contracts) and the data access logic.</li><li>view: a custom language describing how your UI look like. Preferably, the language should be close to HTML.</li><li>something to make both part communicate without having one depend too much on the other. A change in the model data must result in a change in the corresponding elements of the view (model -&gt; view). A mouse click mouse result in a method call somewhere in the model (view -&gt; model).</li></ul><p>With those concepts, you can choose different stacks</p><ul><li>You can use a big framework such as angular. The views are html dom template. The model is divided between controllers &amp; services.</li><li>you can use backbone (~model) + jquery (~view)</li><li>you can use react.js</li></ul><p>... the list goes on. The number of tools available is actually pretty scary. Check <a href="http://todomvc.com/" rel="nofollow">http://todomvc.com/</a> for a nice list of examples.</p><h2>Example solution with angular</h2><p>In angular, the connection between the model &amp; the view is performed with a viewmodel &amp; dual way data binding. A view model is a javascript object. Both the view &amp; the model can read &amp; write to this object, and react to changes.</p><p>in your view, you write the HTML:</p><pre><code>&lt;TABLE class=&#34;list_grey&#34; style=&#34;float: left; margin-left: 20px;&#34; ng-hide=&#34;hideAll&#34;&gt;
&lt;TR ng-repeat=&#34;row in rows&#34;&gt;
    &lt;td ng-repeat=&#34;val in row&#34; ng-class=&#34;{selected : val.sel}&#34;&gt; {{ val.label }} &lt;/td&gt;
&lt;/TR&gt;
&lt;/TABLE&gt;
</code></pre><p>in your controller, you only deal with javascript values:</p><pre><code>$scope.rows = [
    [{label : &#34;foo&#34;}, {label : &#34;bar&#34;}],
    [{label : &#34;foo2&#34;}, {label : &#34;bar2&#34;, sel : true}]
]

$scope.hideAll = false;
</code></pre><p><code>ng-repeat</code> allows you to display a list of items. <code>ng-class</code> &amp; <code>ng-hide</code> are used to control the class &amp; visibility of the elements.</p><h2>Closing words</h2><p>Using other frameworks, the resulting organization may vary, but the essential separation still exists. In react.js, the data binding is unidirectional, which implies different construct. The mvw framework usually deals with the communication between the components, so you don&#39;t have to use jquery at all.</p><p>This is a good thing if your project isn&#39;t trivial. Managing a complex app with only jquery can lead to a mess of callback interactions which may become hard to maintain.</p><p>Using a full mvw framework such as angular or ember requires some learning. Some other libraries have a smaller scope such as react.js &amp; knockout.js.</p><p>Of course you don&#39;t have to start learning one of these tools right now. The important thing is to achieve the separation between the view &amp; the model. You can use jquery to write functions which will edit the dom according to observation made on a pure javascript library.</p><p>You can also use jquery to write the (view -&gt; model) callbacks. (model -&gt; view) can be written using publisher/observer. This part should be as small as possible, and be the only thing connecting the model and the views.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../javascript-how-to-write-html-css-and-javascript-to-make-back-end-developers-work-easier/'>Javascript &#8211; How to write HTML, CSS, and JavaScript to make back-end developers work easier</a></li><li class="list-group-item"><a href='../javascript-when-should-javascript-generate-html/'>Javascript &#8211; When should JavaScript generate HTML</a></li><li class="list-group-item"><a href='../javascript-front-end-development-test-html-css-jquery-javascript/'>Javascript &#8211; front end development test &#8211; html/css/jquery/javascript</a></li><li class="list-group-item"><a href='../should-i-write-html-or-css-first/'>Should I write HTML or CSS first</a></li><li class="list-group-item"><a href='../javascript-tight-coupling-between-javascript-html-and-css-a-more-modern-approach/'>Javascript &#8211; Tight Coupling Between Javascript, HTML, and CSS: A More Modern Approach</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>