<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; MVC content management framework with an admin panel &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080805 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080805" class="post-1080805 software type-software status-publish hentry category-software tag-content-management tag-design-patterns tag-mvc tag-php"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; MVC content management framework with an admin panel</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">content-management</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">mvc</span><span class="mr-2 badge badge-primary">PHP</span></p><div class="entry-content"><p>I&#39;ve lately been developing my own MVC content management system using PHP and, at least in my mind, am a little stuck with the system design. I believe this would apply to building a content management system with an existing MVC framework as well.</p><p>This is going to be a little difficult to explain, so sorry in advance for the lengthy dilemma.</p><p><strong>A little intro to the system:</strong></p><p>Currently my routes look a little like this (stored as JSON):</p><pre><code>{
    &#34;/admin/:controller/:action/:params&#34;:&#34;&#34;,
    &#34;/admin/:controller/:params&#34;:&#34;AdminController&#34;,
    &#34;/admin&#34;:&#34;AdminController&#34;,
    &#34;/:page?/:subpage?&#34;:&#34;IndexController&#34;
}
</code></pre><p>The routes are the keys, the default controllers are the values. If there isn&#39;t a default controller the router falls through to the next rule. I&#39;ve done this to separate the front end of the site from the admin panel.</p><p>The controllers are all in one directory for the time being, although this is destined to change. They either return a template that&#39;s been populated with data from their respective model or simply modify the request they were instantiated with.</p><p><strong>The problem:</strong></p><p>My problem is with deciding how to implement separate controllers that concern the same model for the front end and the back end in a modular way.</p><p>For example, I have a page in the admin panel that allows an administrator to enter some private information that&#39;s intended only to be accessible on the front end with a username and password. Imagine this is handled by an <code>InfoController</code> in the back end, for editing the private information, matched by the route <code>/admin/info</code>.</p><p>What if I wanted to create a route for the front end, for accessing the private information, with the same name as in the admin panel (<code>/info</code>)?</p><p>The problem makes more sense in context with the solutions I&#39;ve considered, I think.</p><p><strong>Solutions I&#39;ve considered:</strong></p><ol><li>My first thought was to append all admin-related controllers with<br /> <code>Admin</code> &#8211; so <code>AdminInfoController</code> and <code>InfoController</code> &#8211; but I&#39;m<br /> interested in eventually having a modular system where all the routes,<br /> controllers and views (and CSS/JavaScript if needed) pertaining to the <code>Info</code> model would be in their own directory structure (something like <code>/modules/info</code>).</li><li>With the desire for modularity in mind, I thought about matching routes a bit like <code>/:module/:controller/:action</code>, but this would then imply that the admin panel is itself a module, which would need access to all the modules the front end can use. Would that make sense?</li><li>The design I&#39;ve thought about the most is to have the admin and front end as two distinguished, core concepts of the framework. They would share modules that contain controllers and views for both.</li></ol><p>Ultimately I&#39;m looking for input on the best approach here, any alternatives, and whether I&#39;m totally over-thinking this.</p><p>It feels a bit like I&#39;ve driven myself crazy with the pursuit of my ideal system design that keeps with the MVC pattern (is it even the right thing for a system like this?). Thanks for reading, I hope it made sense.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I solved this when I started using service providers with a dependency injection container to implement a module system.</p><p>Treating modules as service providers for the application is what worked best, whether they are providing new services or providing to data to existing services, like routes.</p><p>The admin panel has itself become a module that simply provides admin related routes and services to the container. Any other modules can do the same thing.</p><p><strong>Default routes</strong> in the config look like this in JSON format:</p><pre><code>{
    &#34;/:controller/:action/:params&#34;: {
        &#34;namespace&#34;: &#34;Darya\\Core\\Controllers&#34;
    },
    &#34;/:controller/:params&#34;: {
        &#34;namespace&#34;: &#34;Darya\\Core\\Controllers&#34;
    },
    &#34;/:page?/:subpage?&#34;: &#34;Darya\\Core\\Controllers\\IndexController&#34;
}
</code></pre><p><strong>Module routes</strong> can look like this when defined in a module class (a service provider):</p><pre><code>// Route path to namespace prefixes:
// &#34;/admin/info&#34; would become &#34;Darya\Module\Admin\Controllers\InfoController&#34;
$router-&gt;add(array(
    &#39;/admin/:controller/:action/:params&#39;  =&gt; &#39;Darya\Module\Admin\Controllers&#39;,
    &#39;/admin/:controller/:params&#39;          =&gt; &#39;Darya\Module\Admin\Controllers&#39;,
    &#39;/:controller/:action/:params&#39;        =&gt; &#39;Darya\Module\Controllers&#39;
    &#39;/:controller/:params&#39;                =&gt; &#39;Darya\Module\Controllers&#39;
));
</code></pre><p>This way all the URLs of the application are nice and extensible. The next problem is deciding on route priorities, but that becomes off topic.</p><p>Dependency injection is your friend. :)</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-good-way-to-use-the-front-controller-pattern-for-command-line-applications/'>Php &#8211;  good way to use the front controller pattern for command line applications</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>