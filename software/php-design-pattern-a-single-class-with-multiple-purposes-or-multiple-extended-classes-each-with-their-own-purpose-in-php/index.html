<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; Design Pattern: A single class with multiple purposes, or multiple extended classes each with their own purpose in PHP &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082303 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082303" class="post-1082303 software type-software status-publish hentry category-software tag-design-patterns tag-file-handling tag-io tag-php"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; Design Pattern: A single class with multiple purposes, or multiple extended classes each with their own purpose in PHP</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span><span class="mr-2 badge badge-info">file handling</span><span class="mr-2 badge badge-warning">io</span><span class="mr-2 badge badge-primary">PHP</span></p><div class="entry-content"><p>I&#39;m working on a PHP framework called Carbon CMS. This framework will be used as base to build larger web applications on top of it. This framework should provide all kinds of interfaces such as database access, caching and so on.<br /> Currently I&#39;m working on the IO and file handling part of the framework. This question will be about the design pattern I should use, whether I should use a single, or multiple classes that extend each other. In this case, the question will be asked with file systems in mind, because this applies to the problem I&#39;m having, and should make it easier to understand the question itself because an example is given. So keep in mind, that this design-pattern question also applies to other cases.</p><p>My idea is to built a class, or multiple classes that reference to a file, directory or symbolic link on the file system by it&#39;s path. Then, these class(es) should also provide an interface to read/write files, to list directories and so on. Think of the <code>File</code> class in Java, or the <code>File</code>, <code>Dir</code> classes in Qt.</p><p>The question I&#39;m having is what kind of structure or design pattern I should use in this case. I could create a single <code>File</code> class that has all the functionality included, not just for files, but also for directories and symbolic link. But I could also create multiple classes, such as <code>Path</code>, <code>File</code>, <code>Directory</code> and <code>SymbolicLink</code>. So, there are two possible ways I can think of:</p><ol><li>Using <strong>a single</strong> <code>File</code> <strong>class</strong>. This class holds the reference (path) to a file system entry such as a file or directory. This class includes functionality both for files, directories and symbolic links, such as reading/writing files or listing directory contents.</li><li>Using <strong>multiple classes</strong>, which extend each other. A <code>Path</code> class (or something similar) holds the reference (path) to the file system entry such as a file or directory. And only contains the basic functionality which could be used on all three different file system entry types (files, directories and symbolic links). Think of features such as <code>Path::isFile()</code>, <code>Path::getPath()</code> or <code>Path::exists()</code>. Then three other classes are used for the different file system entry types called <code>File</code>, <code>Directory</code> and <code>SymbolicLink</code>, all of these classes extend the <code>Path</code> class to implement it&#39;s basic functionality and the path reference. These three classes contain the functionality for that specific entry type. So, methods to read and write files would be found in the <code>File</code> class; <code>File::getContents();</code>, and a method to list the contents of a directory would be placed in the <code>Directory</code> class; <code>Directory::list();</code>.</li></ol><p>So, to clarify my question. Should I go for the first option, and create a single <code>File</code> class which handles everything regarding IO and file handling. Or should I go with the second option and create multiple classes. Where each class is for a specific type of file system entry (except the <code>Path</code> class, which will be used for all three types).</p><p>Now, if going for the first option. Functions such as <code>listContents()</code> (to list directory contents) could easily be called on a path that references a file. It would be impossible to list the directory contents of a file, thus calls like this would return <code>null</code>, or something similar indicating the directory couldn&#39;t be listed. When using the second option, this would be a bit different. The <code>listContents()</code> method would only be available for <code>Directory</code> instances, and these instances should reference to a directory anyway. Of course, it would be possible that the referenced path doesn&#39;t exist, but that could be the case with both options.</p><p>There are a few pro&#39;s and con&#39;s for both options. Here are some I can think of:</p><ul><li>Going for the first option, with a single class:<ol><li>Casting instances isn&#39;t required to use entry specific operations when using <code>File</code>&#39;s.</li><li>Creates one huge interface for everything, which makes it messier and allows certain operations to be used on incompatible file system entry types, such as listing directory contents on a file.</li></ol></li><li>Going for the second option, with multiple classes:<ol><li>Casting instances, and instance type checking is required to use entry specific operations when using <code>Path</code>&#39;s.</li><li>Creates a separate interface for each file system entry type, which makes it less messy, and also prevents the use of most operations on incompatible file system entry types.</li></ol></li></ul><p>The framework will be open to the public and will be used by multiple people, thus I&#39;m looking for the option that is the easiest to use, doesn&#39;t have a performance impact if possible and the option that suits this ground the best.</p><p>Here&#39;s some sample code, to show off the very basic structure of both options.<br /> When using a single class, with option one:</p><pre><code>class File {
    private $path;

    public function __construct($path) {
        $this-&gt;path = $path;
    }

    public function getPath() {
        return $this-&gt;path;
    }

    public function getContents() {
        // Return the contents of a file
    }

    public function listContents() {
        // Return the contents of a directory
    }
}
</code></pre><p>When using multiple classes, with option two:</p><pre><code>class Path {
    private $path;

    public function __construct($path) {
        $this-&gt;path = $path;
    }

    public function getPath() {
        return $this-&gt;path;
    }
}

class File extends Path {
    public function getContents() {
        // Return the contents of a file
    }
}

class Directory extends Path {
    public function listContents() {
        // Return the contents of a directory
    }
}
</code></pre><p>I should note that all the methods noted in this question, such as <code>Path::getPath();</code> or <code>Directory::listContents();</code> are non-static and have to be called on the instance of the class.</p><p>Java uses a single <code>File</code> class, which would be similar to first option I gave with a single class. There are some classes available such as a <code>DirectoryIterator</code> but classes like this would be created anyway, and don&#39;t depend on the first or second option. On the other hand, Qt uses something similar to the second option I gave, as far as I know.</p><p>So finally; What would be the best option, and why?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I think you are touching two often discussed topics here:</p><ul><li>Monolithic classes vs small components</li><li>Composition vs inheritance</li></ul><p><em>The following is a conclusion from what I&#39;ve read and learned when I had similar problems to solve.</em></p><p><strong>Monolithic vs components</strong></p><p>Usually you should go for components that provide a model of the reality instead of building big monolithic blocks. Small components are easier to test and debug and harder to break.</p><p><strong>Composition vs Inheritance</strong></p><p>If you can go without inheritance you should.
In your case the only common piece of File and Directory is that it has a path.
Note the <code>HAS A</code> relation here. In fact the path is a property.
Neither a directory nor a file is a path.</p><p>So - what you should go for is composition instead of inheritance.
Please see <a href="http://en.wikipedia.org/wiki/Composition_over_inheritance" rel="nofollow">http://en.wikipedia.org/wiki/Composition_over_inheritance</a> for an introduction.</p><p><strong>How to hold things together</strong></p><ul><li>Look for the <em>factory pattern</em> for returning a file or a directory depending on the type of file system object</li><li>Use an <em>interface</em> to define methods that both <code>File</code> and <code>Path</code> need to implement.</li><li>If both need the same functionality define a class for it. Usually the methods in this class are static. A trivial example would be a class <code>FilesystemPermission</code> that provides a method <code>::show($file_or_directory_object)</code></li></ul><p>By the way - reading &#39;The Pragmatic Programmer&#39; (look it up in the bookstore of your choice) covers such problems in depth - go for it if you haven&#39;t read it yet (every programmer should!).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-method-that-loads-data-from-one-of-two-file-formats/'>Design: Method that loads data from one of two file formats</a></li><li class="list-group-item"><a href='../php-many-include-files-vs-one-large-include-file/'>Php &#8211; many include files vs one large include file</a></li><li class="list-group-item"><a href='../php-single-complex-or-multiple-simple-autoload-functions/'>Php &#8211; Single complex or multiple simple autoload functions</a></li><li class="list-group-item"><a href='../hard-coded-file-paths-solution/'>Hard Coded File Paths &#8211; Solution</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>