<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to deal with UI data requirements in DDD &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087349 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087349" class="post-1087349 software type-software status-publish hentry category-software tag-cqrs tag-design-patterns tag-domain-driven-design tag-event-sourcing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to deal with UI data requirements in DDD</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">cqrs</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">domain-driven-design</span><span class="mr-2 badge badge-primary">event-sourcing</span></p><div class="entry-content"><p>I&#39;m using DDD and a CQRS/Event Sourcing architecture so my domain logic is separated in a microservice (e.g: command service) and the read side is in another microservice (e.g: query service).</p><p>We often struggle with domain experts when defining requirements. Unfortunately the Product Owner is too aware of the technical implementation and he tends to create requirements for our domain logic without any logic at all just because he &#34;needs&#34; to have some use cases where the end user can view certain information.</p><p>My position is that <strong>domain driven design is driven by behavior and not by data</strong>, therefore we should model in our domain (i.e: events) just the behavior and then include just the data meaningful for that behavior but not the rest of the data if its purpose to be in our domain is just because we want to have a UI that displays that data. My opinion is that if we don&#39;t do anything with this data other than displaying it, then we could simply display the same data but queried from a different domain&#39;s projection (it&#39;s produced by other capability) since they already have the same data.</p><p>The real issue here is that due to a business structure change our capability is now quite anemic and our business logic is simply a dispatcher, not a complex domain at all and we are not getting any benefit from event sourcing or CQRS.</p><p>The question is: is there any guidelines or literature around this problem that can support my position? Or is it acceptable to have some data pass through our anticorruption layer and reach our domain just because we want to display it in a UI that belongs to us without doing anything at all with it?</p><p>PS: As an example we can think of a capability in charge of <em>Product Inventory &amp; Reservations</em> and our capability <em>Bookings</em> and the question would be: should Booking have data and events replicating what already is available in Product Inventory/Reservation capability regarding product details just because we want to see product info in a UI within the context of a booking? Or is it ok to keep our domain agnostic and just query their data in our UI?</p><p>Thanks</p><hr/><p><strong>UPDATE 1:</strong> After reading 3 of the answers (thank you!, btw) I agree with some of the points made and I can see some of the value that having <em>duplicated</em> data adds to the read use cases even at the price of having to model this data as part of my domain events, without any logic whatsoever, just to have them ready to be consumed in the query service. However it still feels wrong to me so let me add further context and thoughts and please feel free to update your answers if you change your mind.</p><p>Assume my organization has bounded contexts defined. Within a bounded context there are business capabilities which are vertical sections of the business in charge of everything, from pixel to data. Each capability has its own microservice with its own aggregate roots defining the transaction boundaries for each use case. The communication between capabilities is asynchronous (event-based)</p><p>Also assume we want to embrace the idea of Micro-UI where each capability is in charge of displaying the info they own.</p><p>Does this change your answer? If we had the possibility to have <em>Product Inventory &amp; Reservations</em> displaying the product info in a section of the UI thanks to their micro-UI widget, <strong>would you still favor the idea of &#34;polluting&#34; <em>Booking</em> domain</strong> (i.e: making booking aggregates aware of product info) just because some business experts say that they want to see product info in the same page where the user is viewing a specific booking but without doing anything with this info in our domain? (e.g: there is no write use case which validation depends on any of these product info fields)</p><p>It seems to me your answers, although valid, focus on pragmatism and performance for read use cases, so that&#39;s why I ask this ðŸ™‚</p><p>As a side note I try to embrace Greg Young&#39;s idea that every query service composed of projections should be able to be re-built from the event log at any time (i.e: the event sourcing basis) so that a query service should be able to be thrown away and rebuilt by replaying all the events from the beginning of times in an infinite cache fashion.</p><p>In order to do that, I would need to have all the product info in the form of our own domain replayable events, which means that my domain has to subscribe to all the events that notify of any change on any product info and include this info in our own domains (making it part of our ubiquitous language). This is fine for many cases, but imagine that <em>Product Inventory &amp; Reservations</em> evolves further and has more and more events that affect their product reservations.</p><p>The approach then does not seem that pragmatic to me anymore since we&#39;d have to subscribe to more &#34;external&#34; events in order to keep our cached product info up to date and maybe the business would want every new product info field also in &#34;our&#34; booking UI forcing us to also keep up to date with their new event &#34;versions&#34; and adding more coupling.</p><p>My gut feeling is that business does not have their head around this way of working and they keep thinking from the point of view of data requirements rather than behavior requirements. If you were in my position, would you &#34;fight&#34; for moving the responsibility of displaying product info to <em>Product Inventory &amp; Reservations</em>&#39;s micro-UI? or that does not change your answer and you still consider it&#39;s ok to view UI-data requirements as business-logic?</p><p>I know it&#39;s a bit of an opinionated thing and that&#39;s why <strong>I was trying to find some literature around this</strong>. If I go to business and tell them to stop polluting our domain with things we don&#39;t need that could be achieved by the capability that owns the data, they may not listen to me, but if I go with a Greg Young or Udi Dahan&#39;s article to support my view they may think about it! ðŸ™‚</p><hr/><p><strong>UPDATE 2:</strong><br /> I think the debate here summarizes on which approach is better for scenarios where business requirements are not behavior driven but data/view driven:</p><ol><li><strong>aggregate info at domain level</strong>, the write side (even when there&#39;s no logic around this data) by caching other domain info and including it in our ubiquitous language.</li><li><strong>aggregate info at query service level</strong>, the read side (this is fine <strong>as long as the read models are replay-able</strong>) so that our read layer can serve the combined info as if it was &#34;ours&#34; (who cares as long as it&#39;s there?). The main goal for this layer is to be able to serve info as quick as possible and fully consistent with what has happened on the write side. So no runtime transformation for read operations, info stored in the very same way it&#39;s to be consumed.</li><li>aggregate info at UI level with a micro-UI approach. Each capability has its own UI widgets and the info is displayed by the capability that owns <strong>and understands</strong> that info. This is the most technical challenging of all, but the cleanest in my opinion.</li></ol><p>In our case the most pragmatic one is the number 2 where the info is merged together (through replayable events&#39; creating projections) so that the info will be on the UI and the business should not care how did we implement this.</p><p><strong>Isn&#39;t actually the point of CQRS to view the write side (where there is a domain, behaviour rules) differently from the read side and therefore not polluting domain objects with read-requirements?</strong><br /> Then why to suggest including external info in our domain for the solely purpose of satisfying read-requirements? What if there&#39;s another way? (i.e: a micro UI approach, or a composing at query side).</p><p>I think I&#39;m actually embracing CQRS whilst remaining pragmatic when I say that if a business requirements is data-driven to satisfy a UI, I&#39;d have the UI or query layers worry about this but leave domain and write side out of it as long as I can guarantee that the info will be at UI and the read side is independently scalable, consistent, rebuildable and quick performing to serve info.</p><p>Thanks again for your comments. It&#39;s good to read other people&#39;s point of view.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your Query/View models are being created for data purpose; They are not part of your domain. You typically use Domain modeling for writes, not reads.</p><p>You donâ€™t need DDD to read data. But you do need a well-defined and structured domain model for data validation and modification.</p><p>By that logic, you can construct any number of UI-tailored query models to answer queries for frontend screens. It&#39;s good practice to store data in Query models in a ready-to-ship format that you can fetch and return to the frontend.</p><p>If that means creating duplicated, consolidated structures with denormalized data because the frontend demands it that way, it&#39;s perfectly fine. This thought process gives you excellent performance during reads; you don&#39;t do any processing.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../domain-driven-design-with-eventual-consistency/'>Domain driven design with eventual consistency</a></li><li class="list-group-item"><a href='../how-to-model-domain-events-so-that-the-denormalizers-can-fill-highly-denormalized-read-models/'>How to model domain events so that the denormalizers can fill highly denormalized read models</a></li><li class="list-group-item"><a href='../cqrs-with-an-event-log-and-without-event-sourcing/'>CQRS with an Event Log and without Event Sourcing</a></li><li class="list-group-item"><a href='../what-are-the-problems-with-command-handlers-returning-data-in-cqrs/'>What are the problems with command handlers returning data in CQRS</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>