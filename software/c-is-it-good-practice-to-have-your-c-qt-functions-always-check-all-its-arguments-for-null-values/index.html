<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Is it good practice to have your C++/Qt functions always check all its arguments for null values &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072331 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072331" class="post-1072331 software type-software status-publish hentry category-software tag-c tag-coding-style tag-null tag-parameters tag-qt"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Is it good practice to have your C++/Qt functions always check all its arguments for null values</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">coding-style</span><span class="mr-2 badge badge-warning">null</span><span class="mr-2 badge badge-primary">parameters</span><span class="mr-2 badge badge-danger">qt</span></p><div class="entry-content"><h1>Backstory</h1><p>While developing with Qt Signal/Slots, I came across a few segmentation faults that had me puzzled as to what was causing it. Eventually I figured out that you could actually pass a slot function without providing it any of its arguments, which of course would cause a Segmentation Fault if the argument was used.</p><p>To avoid this pitfall, I am getting into the habit of checking all my arguments to make sure they are not <code>NULL</code>:</p><pre><code>void MyClass::setMyString(QString input)
{
    if (input.isNull()) {
        qDebug() &lt;&lt; &#34;Error: setMyString() received NULL argument&#34;;
        return;
    }

    m_MyString = input;
    emit myStringChanged();
}
</code></pre><p>I&#39;m thinking I ought to do this with <strong>all</strong> my functions from now on. Part of the reasoning is that I figure that it can not hurt to do this, and that if I or someone else ever needs to re-factor my code, it is less likely they will omit a necessary null value check.</p><h1>Questions:</h1><ol><li>Is this an acceptable style in <strong>all</strong> or <strong>most</strong> circumstances?</li><li>Should I be introducing a runtime error, halting the program, instead of simply returning the function?</li><li>Does this style of coding improve security?</li><li>Does this style of coding improve stability?</li><li>Are there any performance considerations, to the extent that checking for null values may take longer depending on the type?</li><li>Beyond c++ and Qt, what other languages benefit from this style?</li><li>Are there any significant drawbacks worth considering?</li></ol></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Kind of echoing Basile here but with a slightly more negative tone. I&#39;d say &#34;yes&#34; too, but be careful with that if you are allowing <em>silent</em> violations of preconditions. As a personal example, I worked in a C codebase that did this kind of stuff through an API:</p><pre><code>int f(struct Foo* foo)
{
    if (!foo)
        return error;
    ...
    return success;
}
</code></pre><p>Perhaps even with a debug log in the middle. Yet it was a massive codebase, tens of millions of lines of code, over 30 years of development, and with pretty shoddy standards. The warnings in places like logs were filled to the brim with developers having developed the habit of ignoring the output.</p><p>I found, most unfortunately, when trying to change such error checks into obnoxiously-loud assertions that there were thousands of places in the system that were violating these preconditions and simply ignoring the errors (if there were any reported, some functions just returned without doing anything in those cases). The developers just worked around it and kept trying stuff and adding more code until their code &#34;worked&#34;, blissfully unaware of their original mistake that they were passing nulls to a function that did not allow it.</p><p>As a result, I strongly recommend doing like this:</p><pre><code>void MyClass::setMyString(QString input)
{
    assert(!input.isNull() &amp;&amp; &#34;Error: setMyString() received NULL argument.&#34;);
    m_MyString = input;
    emit myStringChanged();
}
</code></pre><p>This will bring your application to a grinding halt if the assertion fails, showing you the precise source file and line number in which the assertion failed along with this message.</p><p>This is for cases where your function is not allowed to receive null (in your case, &#34;null&#34; here means &#34;empty string&#34;). For ones that are allowed, you might simply do something else, but it wouldn&#39;t be reporting a bug (for that, use the loud and obnoxious <code>assert</code> which cannot be ignored).</p><p>An example of where you might use <code>if</code> might be like this:</p><pre><code>bool do_something(int* out_count = 0)
{
    ...
    if (out_count)
       *out_count = ...; // write the result back.
    return true;
}
</code></pre><p>For ones that are not allowed to receive a null, use references when possible. However, you might still encounter &#34;nulls&#34; if you accept smart pointers, e.g., or if you expand your definition of &#34;null&#34; to include empty strings as another example. In those cases, <code>assert</code> your preconditions liberally if you can. <code>assert</code> has the advantage of not only bringing your application to a grinding halt (good thing), but also pointing out where it was brought to a grinding halt even outside of a debugging session (but still with a debug build, e.g.), and it&#39;s also an effective means of documentation.</p><p><code>qDebug</code> is a little too silent usually. A team with good habits that <em>never</em> allows those outputs to be ignored might get away with keeping those to zero. But an <code>assert</code> will protect you even against the sloppiest teams by bringing the entire process to a grinding halt, making these programmer errors impossible to ignore. Another minor benefit of <code>assert</code> is that it can&#39;t slow down your release (production) builds, while <code>if (...) qDebug(...)</code> will.</p><p>For errors caused by external sources outside of your control (ex: failing to connect to a server that was down, failing to allocate a huge block of memory, trying to read from a file the user tried to load that was corrupt, etc), throw exceptions, but not for programmer bugs like accessing an array out of bounds or receiving a null in a place that never should receive null (unless you&#39;re working in a very mission-critical software where the software attempts to gracefully recover from even programmer bugs as opposed to making them as easy to detect and reproduce as possible). For these cases, <code>assert</code>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-how-will-you-handle-null-values-in-your-application/'>Database &#8211; How will you handle NULL values in your application</a></li><li class="list-group-item"><a href='../functions-that-only-call-other-functions-is-this-a-good-practice/'>Functions that only call other functions. Is this a good practice</a></li><li class="list-group-item"><a href='../should-one-check-for-null-if-he-does-not-expect-null/'>Should one check for null if he does not expect null</a></li><li class="list-group-item"><a href='../null-values-stored-or-are-they-stored-at-all/'>Null values stored, or are they stored at all</a></li><li class="list-group-item"><a href='../java-check-parameters-annotated-with-nonnull-for-null/'>Java &#8211; Check parameters annotated with @Nonnull for null</a></li><li class="list-group-item"><a href='../design-null-values-vs-empty-singleton-for-optional-fields/'>Design &#8211; null values vs &#8220;empty&#8221; singleton for optional fields</a></li><li class="list-group-item"><a href='../is-it-bad-practice-to-resolve-null-arguments-to-default-static-variables/'>Is it bad practice to resolve null arguments to default static variables</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>