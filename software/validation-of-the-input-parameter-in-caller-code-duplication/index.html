<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Validation of the input parameter in caller: code duplication &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1066924 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1066924" class="post-1066924 software type-software status-publish hentry category-software tag-coding-standards tag-dry tag-validation"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Validation of the input parameter in caller: code duplication</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">coding-standards</span><span class="mr-2 badge badge-info">dry</span><span class="mr-2 badge badge-warning">validation</span></p><div class="entry-content"><p>Where is the best place to validate input parameters of function: in caller or in function itself?</p><p>As I would like to improve my coding style, I try to find the best practices or some rules for this issue. When and what is better.</p><p>In my previous projects, we used to check and treat every input parameter inside the function, (for example if it is not null). Now, I have read here in some answers and also in Pragmatic Programmer book, that the validation of input parameter is responsibility of caller.</p><p>So it means, that I should validate the input parameters before calling of the function. Everywhere the function is called. And that raises one question: doesn&#39;t it create a duplication of checking condition everywhere the function is called?</p><p>I am not interested just in null conditions, but in validation of any input variables (negative value to <code>sqrt</code> function, divide by zero, wrong combination of state and ZIP code, or anything else)</p><p>Are there some rules how to decide where to check the input condition?</p><p>I am thinking about some arguments:</p><ul><li>when the treating of invalid variable can vary, is good to validate it in caller side (e.g <code>sqrt()</code> function &#8211; in some case I may want to work with complex number, so I treat the condition in caller)</li><li>when the check condition is the same in every caller, it is better to check it inside the function, to avoid duplications</li><li>validation of input parameter in caller takes place only one before calling of many functions with this parameter. Therefore the validation of a parameter in each function is not effective</li><li>the right solution depends on the particular case</li></ul><p>I hope this question is not duplicate of any other, I searched for this issue and I found similar questions but they don&#39;t mention exactly this case.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>It depends.</strong> Deciding where to put validation should be based on the <strong>description and strength of the contract</strong> <em>implied (or documented)</em> by the method. Validation is a good way to bolster adherence to a specific contract. If for whatever reason the method has a very strict contract, then yes, it is up to you to check before calling.</p><p>This is an especially important concept when you create a <strong>public method</strong>, because you are basically advertising that some method performs some operation. <em>It better do what you say it does!</em></p><p>Take the following method as an example:</p><pre><code>public void DeletePerson(Person p)
{            
    _database.Delete(p);
}
</code></pre><p>What is the contract implied by <code>DeletePerson</code>?  The programmer can only assume that if any <code>Person</code> is passed in, it will be deleted. However, we know that this isn&#39;t always true.  What if <code>p</code> is a <code>null</code> value?  What if <code>p</code> doesn&#39;t exist in the database? What if the database is disconnected? Therefore, <strong>DeletePerson does not appear to fulfill its contract well.</strong> Sometimes, it deletes a person, and sometimes it throws a NullReferenceException, or a DatabaseNotConnectedException, or sometimes it does nothing (such as if the person is already deleted).</p><p>APIs like this are notoriously difficult to use, because when you call this &#34;black box&#34; of a method, all sorts of terrible things can happen.</p><p>Here are a couple of ways you can improve the contract:</p><ul><li><p><strong>Add validation and add an exception to the contract.</strong> This makes the contract <em>stronger</em>, but requires that the caller perform validation. The difference, however, is that now they know their requirements. In this case I communicate this with a C# XML comment, but you could instead add a <code>throws</code> (Java), use an <code>Assert</code>, or use a contract tool like Code Contracts.</p><pre><code>///&lt;exception&gt;ArgumentNullException&lt;/exception&gt;
///&lt;exception&gt;ArgumentException&lt;/exception&gt;
public void DeletePerson(Person p)
{            
    if(p == null)
        throw new ArgumentNullException(&#34;p&#34;);
    if(!_database.Contains(p))
        throw new ArgumentException(&#34;The Person specified is not in the database.&#34;);

    _database.Delete(p);
}
</code></pre><p><sub>Side note: The argument against this style is often that it causes excessive pre-validation by all calling code, but in my experience this is often not the case. Think of a scenario where you are trying to delete a null Person. How did that happen? Where did the null Person come from? If this is a UI, for example, why was the Delete key handled if there is no current selection? If it were already deleted, shouldn&#39;t it have been removed from the display already? Obviously there are exceptions to this, but as a project grows you will often thank code like this for preventing bugs to permeate deep into the system.</sub></p></li><li><p><strong>Add validation and code defensively.</strong> This makes the contract <em>looser</em>, because now this method does more than just deletes the person. <em>I changed the method name to reflect this, but might not be necessary if you are consistent in your API.</em> This approach has its pros and cons. The pro being that that you can now call <code>TryDeletePerson</code> passing in all sorts of invalid input and never worry about exceptions. The con, of course, is that users of your code will probably call this method too much, or it might make debugging difficult in cases where p is null.  This could be considered a mild violation of the <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle</a>, so keep that mind if a flame war erupts.</p><pre><code>public void TryDeletePerson(Person p)
{            
    if(p == null || !_database.Contains(p))
        return;

    _database.Delete(p);
}
</code></pre></li><li><p><strong>Combine approaches.</strong> Sometimes you want a little of both, where you want external callers to follow the rules closely (to force them to code responsible), but you want your private code to be flexible.</p><pre><code>///&lt;exception&gt;ArgumentNullException&lt;/exception&gt;
///&lt;exception&gt;ArgumentException&lt;/exception&gt;
public void DeletePerson(Person p)
{            
    if(p == null)
        throw new ArgumentNullException(&#34;p&#34;);
    if(!_database.Contains(p))
        throw new ArgumentException(&#34;The Person specified is not in the database.&#34;);

    TryDeletePerson(p);
}

internal void TryDeletePerson(Person p)
{            
    if(p == null || !_database.Contains(p))
        return;

    _database.Delete(p);
}
</code></pre></li></ul><p>In my experience, concentrating on the contracts you implied rather than a hard rule works best.  Defensive coding appears to work better in cases where it&#39;s hard or difficult for the caller to determine whether an operation is valid. Strict contracts appear to work better where you expect the caller to only make method calls when they really, really make sense.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../when-should-pointers-be-checked-for-null-in-c/'>When should pointers be checked for NULL in C</a></li><li class="list-group-item"><a href='../in-a-domain-driven-development-ddd-have-a-validation-on-a-dto-that-calls-a-external-service-is-wrong-if-yes-where-should-it-be/'>In a Domain Driven Development DDD, have a validation on a DTO that calls a external service is wrong, if yes, where should it be</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>