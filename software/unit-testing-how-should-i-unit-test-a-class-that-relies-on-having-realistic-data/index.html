<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; How should I unit-test a class that relies on having realistic data &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083110 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083110" class="post-1083110 software type-software status-publish hentry category-software tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; How should I unit-test a class that relies on having realistic data</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">unit testing</span></p><div class="entry-content"><p>I have a class that encapsulates the results of a scientific measurement. I’m building in unit tests from the beginning, but I don’t have a lot of experience with unit testing and I’m not sure which behaviors I should be testing and how.</p><p>My class does three kinds of things:</p><ol><li>Reads measurement data from a file (or a string) into its instance variables</li><li>Writes its measurement data out to a file or a string</li><li>Performs calculations on its data (e.g. getting the average of a set of numbers)</li></ol><p>My approach right now is to include a known-good example data file in my <code>test</code> directory. One test reads the data in from the file, passes it to my class, and makes sure that it meets some basic sanity checks. Another test passes the file’s <em>filename</em> to my class, lets the class read it, and runs the same tests. The remainder of the tests read the data in from the file, pass it to my class, and check that the results of the data-processing methods are correct, given what I know about that data set.</p><p>This seems pretty tangled, though. The tests that check (3) implicitly assume that the behaviors of (1) are correct, since it’s the functions in (1) that are being used to populate the class in the first place. And the tests of (1) could benefit from the extensive checks done by the tests for (3). Am I structuring my unit tests poorly, or is this just a natural result of the fact that I need to use a specific dataset in my tests?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>What you&#39;re doing is integration testing, because as you can probably tell, your tests have dependencies on other parts of your code. This is fine, but it&#39;s good to know when you&#39;re looking at articles/examples/etc. online.</p><p>Some points to consider, and things to remember:</p><ul><li><strong>Arrange</strong>, <strong>Act</strong>, <strong>Assert</strong>. All tests have these 3 steps.<ul><li>Need more steps? You&#39;re probably testing too much for 1 test</li><li>No Arrange? You have external dependencies, which almost always makes tests flaky and unreliable.</li><li>Lots of Arrange code usually means lots of dependencies, and system-state types of dependencies. That&#39;s a recipe for fragile code.</li><li>No Act? Often tests the compiler. Leave that to compiler developers.</li><li>Lots of Act(s)? You&#39;re probably testing too much for 1 test again.</li><li>No Assert? Often the case when you want to test that &#34;no errors occurred&#34;. No errors != working correctly.</li><li>Lots of Asserts? The code under test might be doing too much/touching too many systems. Try refactoring and testing the individual bits instead.</li></ul></li><li>Tests should exist on their own. Avoid scenarios where something that tests <em>3</em> depends on the code that does <em>1</em>. Instead, look to replace the code that does <em>1</em> with test code. In your scenario: try manually setting the values to what you want them to be in the test&#39;s <strong>Arrange</strong> step, then perform the <strong>Act</strong> ion (the calculations), then <strong>Assert</strong> the result.</li><li>Happy-path tests are often a waste of time. Best-case scenarios almost always work. Your tests should be trying to force errors and edge cases.<ul><li>Do you have a test that passes bad streams to be processed?</li><li>Do you have a test that passes null/non-existant filenames to be processed?</li><li>What happens if the numeric values to compute are not numeric, or when parsed are <strong>huge</strong>, or produce huge values when computed?</li></ul></li><li>Surprisingly writing tests rarely confirms that what you&#39;ve done is right. Instead they give you insight into how usable, stable, and flexible your design is.</li></ul><p>edit&gt; This has already been accepted, but I wanted to add something that I learned long ago via <a href="http://pragprog.com/book/utc2/pragmatic-unit-testing-in-c-with-nunit" rel="noreferrer">Pragmatic Unit Testing</a>:</p><p><em>Unit Testing with your <strong>Right BICEP</strong></em></p><ul><li>Are the results <strong>Right</strong> ?</li><li>CORRECT <strong>B</strong> oundary Conditions<ul><li><strong>C</strong> onform to expected format</li><li><strong>O</strong> rdered correctly</li><li><strong>R</strong> ange is correct</li><li><strong>R</strong> eferences to external dependencies are safe</li><li><strong>E</strong> xistence (null etc.)</li><li><strong>C</strong> ardinality</li><li><strong>T</strong> iming (things happen in the right order, with the correct timing)</li></ul></li><li><strong>I</strong> nverse relationships</li><li><strong>C</strong> ross-Check results with other means</li><li><strong>E</strong> rrors are forced</li><li><strong>P</strong> erformance characteristics are within acceptable bounds</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-how-should-i-write-a-test-for-a-pure-method-which-doesnt-return-anything/'>Unit-testing &#8211; How should I write a test for a pure method which doesn&#8217;t return anything</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>