<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# Design Pattern for workers with different input parameters &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1066298 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1066298" class="post-1066298 software type-software status-publish hentry category-software tag-c tag-design-patterns"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# Design Pattern for workers with different input parameters</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">design-patterns</span></p><div class="entry-content"><p>I&#39;m not sure which design pattern might help me solve this issue.</p><p>I have a class, &#39;Coordinator&#39;, which determines which Worker class should be used &#8211; without having to know about all the different types of Workers there are &#8211; it just calls a WorkerFactory and acts upon the common IWorker interface.</p><p>It then sets the appropriate Worker to work and returns the result of its &#39;DoWork&#39; method.</p><p>This has been fine&#8230; up until now; we have a new requirement for a new Worker class, &#34;WorkerB&#34; which requires an additional amount of information i.e. an additional input parameter, in order for it to do its work.</p><p>Its like we need an overloaded DoWork method with the extra input parameter&#8230;but then all the existing Workers would have to implement that method &#8211; which seems wrong as those Workers really dont need that method.</p><p>How can I refactor this to keep the Coordinator unaware of which Worker is being used and still allowing each Worker to get the information it requires to do its job but not have any Worker do things it doesn&#39;t need to?</p><p>There are a lot of existing Workers already.</p><p>I don&#39;t want to have to change any of the existing concrete Workers to accommodate the requirements of the new WorkerB class.</p><p>I thought maybe a Decorator pattern would be good here but I haven&#39;t seen any Decorators decorate an object with the same method but different parameters before&#8230;</p><p>Situation in code:</p><pre><code>public class Coordinator
{
    public string GetWorkerResult(string workerName, int a, List&lt;int&gt; b, string c)
    {
        var workerFactor = new WorkerFactory();
        var worker = workerFactor.GetWorker(workerName);

        if(worker!=null)
            return worker.DoWork(a, b);
        else
            return string.Empty;
    }
}

public class WorkerFactory
{
    public IWorker GetWorker(string workerName)
    {
        switch (workerName)
        {
            case &#34;WorkerA&#34;:
                return new ConcreteWorkerA();
            case &#34;WorkerB&#34;:
                return new ConcreteWorkerB();
            default:
                return null;
        }
    }
}

public interface IWorker
{
    string DoWork(int a, List&lt;int&gt; b);
}

public class ConcreteWorkerA : IWorker
{
    public string DoWork(int a, List&lt;int&gt; b)
    {
        // does the required work
        return &#34;some A worker result&#34;;
    }
}

public class ConcreteWorkerB : IWorker
{
    public string DoWork(int a, List&lt;int&gt; b, string c)
    {
        // does some different work based on the value of &#39;c&#39;
        return &#34;some B worker result&#34;;
    }

    public string DoWork(int a, List&lt;int&gt; b)
    {
        // this method isn&#39;t really relevant to WorkerB as it is missing variable &#39;c&#39;
        return &#34;some B worker result&#34;;
    }    
}
</code></pre></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You will need to generalize the arguments so that they fit into a single parameter with a base interface and a variable number of fields or properties.  Sort of like this:</p><pre><code>public interface IArgs
{
    //Can be empty
}

public interface IWorker
{
    string DoWork(IArgs args);
}

public class ConcreteArgsA : IArgs
{
    public int a;
    public List&lt;int&gt; b;
}

public class ConcreteArgsB : IArgs
{
    public int a;
    public List&lt;int&gt; b;
    public string c;
}

public class ConcreteWorkerA : IWorker
{
    public string DoWork(IArgs args)
    {
        var ConcreteArgs = args as ConcreteArgsA;
        if (args == null) throw new ArgumentException();
        return &#34;some A worker result&#34;;
    }
}

public class ConcreteWorkerB : IWorker
{
    public string DoWork(IArgs args)
    {
        var ConcreteArgs = args as ConcreteArgsB;
        if (args == null) throw new ArgumentException();
        return &#34;some B worker result&#34;;
    }
} 
</code></pre><p>Note the null checks... because your system is flexible and late-bound, it is also not type safe, so you will need to check your cast to make sure the arguments that are passed are valid.</p><p>If you really don&#39;t want to create concrete objects for every possible combination of arguments, you could use a <a href="https://msdn.microsoft.com/en-us/library/system.tuple(v=vs.110).aspx" rel="noreferrer">tuple</a> instead (wouldn&#39;t be my first choice.)</p><pre><code>public string GetWorkerResult(string workerName, object args)
{
    var workerFactor = new WorkerFactory();
    var worker = workerFactor.GetWorker(workerName);

    if(worker!=null)
        return worker.DoWork(args);
    else
        return string.Empty;
}

//Sample call
var args = new Tuple&lt;int, List&lt;int&gt;, string&gt;(1234, 
                                             new List&lt;int&gt;(){1,2}, 
                                             &#34;A string&#34;);    
GetWorkerResult(&#34;MyWorkerName&#34;, args);
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-design-question-is-this-good-case-for-proxy-pattern-or-over-done/'>Java &#8211; Design question: Is this good case for proxy pattern, or &#8220;over done&#8221;</a></li><li class="list-group-item"><a href='../java-should-i-add-parameters-to-instance-methods-that-use-those-instance-fields-as-parameters/'>Java &#8211; Should I add parameters to instance methods that use those instance fields as parameters</a></li><li class="list-group-item"><a href='../c-design-for-encoder-decoder-classes-with-different-stored-types/'>C++ design for encoder/decoder classes with different stored types</a></li><li class="list-group-item"><a href='../object-oriented-design-pattern-for-similar-classes-that-require-different-implementations/'>Object-oriented &#8211; Design pattern for similar classes that require different implementations</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>