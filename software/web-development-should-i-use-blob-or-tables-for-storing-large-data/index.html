<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Web-development &#8211; Should I use BLOB or Tables for storing large data &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1077404 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1077404" class="post-1077404 software type-software status-publish hentry category-software tag-architecture tag-blob tag-performance tag-rdbms tag-web-development"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Web-development &#8211; Should I use BLOB or Tables for storing large data</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">blob</span><span class="mr-2 badge badge-warning">performance</span><span class="mr-2 badge badge-primary">rdbms</span><span class="mr-2 badge badge-danger">web-development</span></p><div class="entry-content"><p><strong>Problem</strong></p><p>Currently investigating a solution to improve the performance of a web application. The application works well for small projects, but faces performance issues in the UI when working with large projects.</p><p><strong>The use case is the following:</strong></p><p>A user has to submit an excel document that contains 10000 line items. Each line item contains approximately 50 terms and each term can have one or more attributes.<br /> The system should support a project that can handle 200 users uploading such documents.<br /> A max of 10 users can concurrently be active. There can be multiple such large projects.</p><p>The database currently used is Oracle. We also need to ensure that the chosen solution will work well with an in-memory columnar RDBMS.</p><p>The existing functionality works well for small projects that has both a web UI and an excel interface. But the web UI has performance issues with large projects and we will solely rely on an excel interface.</p><p>The operations on the data involve upload/import, download/export, editing and reports.</p><p>All actions have to be transactional, since there are other updates within the RDBMS that occur as part of the upload. So this cannot be put in a non-transactional data source. There is at least one main operation where we need to load all the data. This operation can be done asynchronously.</p><p><strong>Existing solution</strong></p><p>Our existing solution which runs on tomcat and Oracle uses wide tables. This solution works well upto 1000 line items and then has performance issues on the application server.<br /> The performance issues relate to java object hydration and causes memory issues on the application server. This is because the wide table has a large number of null columns and the java objects that are created are large due to a large number of empty fields.</p><p><strong>Options</strong></p><p>In order to handle a larger number of line items we need to reduce the memory footprint of the existing solution.<br /> We are trying to decide between the following approaches:</p><ol><li>BLOB</li><li>Narrow table</li><li>Redesigned Java object (New)</li></ol><p><strong>BLOB solution</strong></p><p>One way to avoid the null values is to transform the excel document into a concise key value format that can be compressed and stored in the database as a BLOB per user.<br /> The advantage of this approach is:</p><ol><li>Use considerably less space in the DB.</li></ol><p>The drawbacks are:</p><ol><li>We are limited in what we can do, since there are some operations<br /> that will need to process data across all users.</li><li>A small edit will cause the whole BLOB to be rewritten and thus causing redo log<br /> growth.</li><li>Will be difficult to retrofit the existing UI against this model in the future</li><li>Maintain a new model for large projects</li></ol><p><strong>Narrow table</strong></p><p>This approach solves the null values by having a few fields with a row for each term. The number of null columns is reduced drastically. The java objects hydrated from these rows do not have empty fields and can be small in size. So the memory issue is alleviated.<br /> The advantages are:</p><ol><li>A narrow table is well suited for an in-memory columnar approach</li><li>Keeps open the possibility of reworking the UI to work against the new table structure</li></ol><p>The drawbacks are:</p><ol><li>Order of magnitude increase in the number of rows. A single project will end up having 10000x50x200 rows, i.e., 100 millions rows.</li><li>Maintain a new model since the UI will not be touched and that will go off the old model.</li></ol><p><strong>Redesigned java class</strong></p><p>Had not initially considered this approach but it looks like a good option.<br /> We use the existing data model, but revamp our java class backed by a map. Only the populated fields are held in this map. This avoids having a class with a large number of fields and hence reduces the memory footprint for a sparsely populated object.</p><p>The advantage</p><ol><li>Solves the application memory issue with the least impact of all 3 options</li><li>Uses the existing data model</li></ol><p>Drawbacks</p><ol><li>Does not get rid of empty columns in the DB. But I think we can live with this for now.</li><li>May not be the best format for a columnar in-memory RDBMS</li></ol><p><strong>Question</strong></p><blockquote><p>What is the best approach to take?</p></blockquote><hr/><p><strong>Update</strong><br /> As I was clearing up the description, a potential third option (Redesigned java class) dawned on me. So I am going to investigate it further as it looks promising with no model impact. Let me know if this is not a good option based on the use case and if you see any issues with it.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>The challenge is how should this information be stored efficiently in an RDBMS?</p></blockquote><p>The question <em>should</em> be <strong>why</strong> should this information be stored in a RDBMS at all?</p><p>What are you going to <em>do</em> with it once it&#39;s there?</p><p>If all you&#39;re going to do is &#34;save&#34; a spreadsheet into the database and then pull it back out again, then I&#39;d suggest you&#39;re wasting your time.  It&#39;s a file; put it in a file system where it belongs and from where you can [far more] easily retrieve it.</p><p>However ...</p><p>If you want to interrogate the &#34;uploaded&#34; data and &#34;slice and dice&#34; it, drawing summaries across the data uploaded by <em>many</em> users, then the database is most <em>definitely</em> the way to go.</p><p>OK, 100M rows <em>is</em> a lot but with proper indexing (and partitioning, if you have the option), your database will cope with it.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-would-these-two-scenarios-be-good-candidates-for-a-nosql-database/'>Database &#8211; Would these two scenarios be good candidates for a NoSQL database</a></li><li class="list-group-item"><a href='../best-solution-for-a-large-database-transaction/'>Best solution for a large database transaction</a></li><li class="list-group-item"><a href='../java-application-how-to-optimize-database-calls-and-space-time-which-is-more-important/'>Java application &#8211; How to optimize database calls and space &#038; time which is more important</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>