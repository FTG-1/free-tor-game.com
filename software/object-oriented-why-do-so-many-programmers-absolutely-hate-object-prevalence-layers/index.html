<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Why do so many programmers absolutely hate object prevalence layers &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080710 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080710" class="post-1080710 software type-software status-publish hentry category-software tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Why do so many programmers absolutely hate object prevalence layers</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">object-oriented</span></p><div class="entry-content"><p>Prevalence is a simple technique to provide ACID properties to an in-memory object model based on binary serialization and write-ahead logging.  It works like this:</p><ul><li>Start with a snapshot.  Serialize the object model and write it to a file.</li><li>Create a journal file.  For every call into the object model, serialize the call and its arguments.</li><li>When the journal gets too big, you&#39;re shutting down, or it&#39;s otherwise convenient, perform a checkpoint: write a new snapshot and truncate the journal.</li><li>To roll back or recover from a crash or power hit, load the last snapshot and re-execute all the calls recorded in the journal.</li></ul><p>The precautions needed to make this work are:</p><ul><li>Don&#39;t let mutable object references escape or enter the prevalence layer.  You need some sort of proxy or OID scheme, as if you were doing RPC.  (This is such a common newbie mistake it&#39;s been nicknamed the &#39;<a href="http://docs.codehaus.org/display/PREVAYLER/The+Baptism+Problem">baptism problem</a>&#39;.)</li><li>All the logic reachable from a call must be completely deterministic, and must not perform business-logic-meaningful I/O or OS calls.  Writing to a diagnostic log is probably OK, but getting the system time or launching an asynchronous delegate is generally not.  This is so that the journal replays identically even if it&#39;s restored on a different machine or at a different time.  (Most prevalence code provides an alternate time call to get the transaction timestamp.)</li><li>Writer concurrency introduces ambiguity in journal interpretation, so it is prohibited.</li></ul><p>Is it because &#8230;</p><ul><li>people developed a bad taste for them after trying to use one on a project that wasn&#39;t well suited<sup>*</sup> to it?</li><li>Klaus Wuestefeld&#39;s <a href="http://www.advogato.org/article/398.html">strident advocacy</a> <a href="http://www.theserverside.com/news/thread.tss?thread_id=30735">turned people off</a>?</li><li>people who like the imperative programming model dislike <a href="http://c2.com/cgi/wiki?SeparateIoFromCalculation">separating I/O from calculation</a>, preferring instead to interleave computation with I/O and threading calls?</li><li>prevalence layers are so conceptually simple and so intimately bound to the characteristics of the framework they inhabit that they&#39;re usually custom-rolled for the project, which makes them too alien/nonstandard/risky?</li><li>it&#39;s just too hard to keep straight what you have to be careful not to do?</li><li>newbies&#39; heads just seem to explode when faced with something that isn&#39;t the same kind of two-tier database-driven app they learned to write in school? ðŸ˜‰</li></ul><hr/><p><sup>*</sup>The <a href="http://www.prevayler.org/wiki/Prevalent Hypothesis">entire data set fits in RAM</a>, you don&#39;t need writer concurrency, and you don&#39;t need to do ad-hoc queries, reporting, or export to a data warehouse.  With apologies to SQLite, prevalence is an improvement on save-files, not a replacement for Oracle.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I think some of the problem is that they have a VERY specific use case (your not suited reason).  I have built and worked on systems that use this approach and when you have a problem that is actually this problem it can be a wonderful solution.</p><p>Another part is that it looks a whole lot like some of the more painful bits of custom data storage you used to find a lot of 10+ years ago and has some of the same pitfalls (think batch updated btreive for example) which brings in your &#34;too custom&#34; point, but also makes it difficult to find off the shelf parts that work politely with it.</p><p>The last part is that they can be damn difficult to query against in many cases and folks in general are pretty accustom to being able to get their answers right now.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-why-is-c-not-considered-an-object-oriented-language/'>Object-oriented &#8211; Why is C not considered an &#8216;object-oriented&#8217; language</a></li><li class="list-group-item"><a href='../object-oriented-programming-why-oriented/'>Object-Oriented Programming: Why &#8220;Oriented&#8221;</a></li><li class="list-group-item"><a href='../object-oriented-did-the-gradual-shift-in-methodology-of-writing-code-affect-system-performance-and-should-i-care/'>Object-oriented &#8211; Did the gradual shift in methodology of writing code affect system performance? And Should I care</a></li><li class="list-group-item"><a href='../object-oriented-how-to-a-object-have-many-types/'>Object-oriented &#8211; How to a object have many types</a></li><li class="list-group-item"><a href='../object-oriented-a-way-to-keep-object-between-layers-decoupled/'>Object-oriented &#8211; A way to keep object between layers decoupled</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>