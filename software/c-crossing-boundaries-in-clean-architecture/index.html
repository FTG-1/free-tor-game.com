<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; &#8220;Crossing Boundaries&#8221; in Clean Architecture &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1077350 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1077350" class="post-1077350 software type-software status-publish hentry category-software tag-architecture tag-c tag-dependency-management tag-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; &#8220;Crossing Boundaries&#8221; in Clean Architecture</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">dependency-management</span><span class="mr-2 badge badge-primary">design</span></p><div class="entry-content"><p>I am a layman without any programming-like education but I spent the better part of my free time to get into programming bots for some games in first AutoIt and then C++. I was introduced to programming in a very procedural style only using free functions. A couple of weeks ago, my focus shifted from actually making these bots to understanding how professional programmers are structuring their programs and inevitably I came across OOP, Design Patterns, SOLID and most recently Clean Architecture.</p><p>I want to say beforehand that I know full-well that these techniques are most likely counter-productive for the tiny programs I write; however, I want to get to know them out of the interest of learning.</p><p>I am currently trying to split the program into smaller parts to stick to the SRP and I’m sort of trying to implement the idea(s) behind the Clean Architecture. Since it’s an incredibly smaller program than what Clean is targeted at and since I’m most likely the only one who will be working on it, I am not too strict with the separation into Controllers, Presenters, ViewModels, Views and so on – also I’m not planning to separate the program into different DLLs in order to have the GUI in a completely different place. However, I am fond of the idea to have GUI absolutely dependent on the (business-) logic whilst the logic doesn’t know about the GUI at all, thus I will treat the GUI-Module as if it was in a different project. However, the “crossing of the boundaries” is something I cannot, for the life of me, understand how to implement, especially if it was from an external DLL to the application.</p><p>Correct me if I’m wrong: There is a Controller which sends a request to the Interactor-Object which will deal with several Entities and eventually return a result to the Presenter which takes care of the changes in the GUI. Basically, my input calls a function that returns some value after working with the app. This function-call is put into the Interactor-Object in the style of the Command-Pattern. It implements some Boundary-Interface* which is made public. That’s necessary to build the Controller in the first place since it needs to know the signatures it can call. Therefore, that interface becomes the access-point for the external DLL to send requests to the application.</p><p>However, wouldn’t the Interactor need to get references to the Business-Entities and the Presenter/s on construction so it can interact with them? The Controller cannot pass them into the Interactor as it doesn’t know anything about the Entities, which means the Controller would have to call an already built concretion of the Interactor – how is that being done? In my mind, the Application would have to pass the concrete Interactor to the Controller which is forbidden as the “inner circles” are not supposed to know about the outer ones.</p><p>This brings me to the second part, crossing the boundary outwards: How does the Interactor pass the response to an outer circle without knowing about it? I could imagine this is some sort of Observer-Pattern as the application does provide the interface the Presenter/s will have to implement, so the interactor does know the signature of the Presenters. However, this would require the Presenters to register themselves to a concrete Interactor-object which ends up in the same question as above.</p><p>Thank you in advance – any input would be appreciated.</p><p>TL;DR: Where do you instantiate UseCases/Interactors and how do you access these concretions from outside?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>First, let me strongly recommend that you read Robert Martin&#39;s book titled <a href="https://rads.stackoverflow.com/amzn/click/com/0134494164" rel="nofollow noreferrer" rel="nofollow noreferrer">Clean Architecture</a> if you haven&#39;t.
I assume that you have read it, but I don&#39;t know for sure, because many questions that are very similar to yours were asked before he even published said book.</p><p>If you have read his book, then go back and take a look at Chapter 26: &#39;The Main Component&#39; again.</p><p>If you don&#39;t own the book (and for anybody else who doesn&#39;t), let me summarize the given chapter for you.</p><p>The first few paragraphs of the chapter say:</p><blockquote><p>In every system, there is at least one component that creates, coordinates, and oversees the others. I call this component <em>main</em>.</p><p>The <em>Main</em> component is the ultimate detail--the lowest-level policy. It is the initial entry point of the system. Nothing, other than the operating system, depends on it. Its job is to create all the Factories, Strategies, and other global facilities, and then hand control over to the high-level abstract portions of the system.</p></blockquote><p>And the &#39;Conclusion&#39; section of that chapter says:</p><blockquote><p>Think of <em>Main</em> as a plugin to the application--a plugin that sets up the initial conditions and configurations, gathers all the outside resources, and then hands control over to the high-level policy of the application.</p></blockquote><p>Let me specify something really quick. I will mention (and already have mentioned) the word &#39;component&#39;, but technically a component is not a thing in the sense of code.
Put simply (maybe too simply), a &#39;component&#39; is just the word that Uncle Bob uses to refer to what is essentially a group of related code/code files (refer to his book if you want his actual definition).</p><p>Therefore, when I speak about a &#39;component&#39;, remember that I am actually talking about the code within that &#39;component&#39;.</p><p>How then does one component depend on another then?
Well, according to Uncle Bob, a component (a grouping of code) dependency is created any time you reference <strong>anything</strong> in a different component; whether that be an interface, a type definition, or even a simple variable name.</p><p>Keep this in mind, because technically a component <em>cannot</em> be injected into another.
When I speak of injecting one component into another, I am almost always talking about dependency injection specifically on the level of the interfaces/classes that are contained in those components.</p><p>Now, back to the quotes: those mean that the Main component, which is the entry point of your program (such as the &#39;main&#39; file in C++, or the first file to run in your NodeJS server, for example), should either instantiate the concrete classes and give (&#39;inject&#39; is the technical term for it) them to the dependents, or should give the dependents a Factory (which is a design pattern for those of you who don&#39;t know) whereby they can instantiate the concrete classes themselves.</p><p>In Chapter 14: &#39;Component Coupling&#39; of Robert Martin&#39;s book, he provides an image that I think illustrates the topic of Chapter 26 very nicely:</p><p><a href="../../../i.stack.imgur.com/wMBnI.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/wMBnI.png" alt="enter image description here"/></a></p><p><strong>Note:</strong> This is a <em>Component</em> dependency graph.</p><p>Notice how many components &#39;Main&#39; depends on but also notice how absolutely no components depend on &#39;Main&#39;.
This is because the &#39;Main&#39; component does all the wiring together of all the other components, so that they don&#39;t have to know about each others&#39; concrete class implementations but can instead depend only on the interfaces/abstractions.</p><p>Now that you (hopefully) have a basic understanding of what I&#39;m trying to say, let&#39;s discuss the order in which dependency injection happens.</p><p><strong>Note:</strong> It is important to be reminded that I am talking exclusively in the context of interfaces/classes after this point.</p><p>The order in which you create and inject the dependencies into each other depends (pun not intended) on two things:</p><ol><li>The <a href="https://martinfowler.com/articles/injection.html#InterfaceInjection" rel="nofollow noreferrer">dependency injection mechanism</a>;</li></ol><p>If you inject the dependencies through the constructor, then obviously the dependencies must be created <em>before</em> the dependent and injected into the dependent during its creation.</p><p>However, if you can inject the dependencies through a method on the dependent, then obviously the dependency can be created after the dependent and simply injected then.</p><p>If you are using an injection mechanism that can be done at any point (such as through a method), then the next point doesn&#39;t really apply.</p><ol start="2"><li>The kinds of the dependencies.</li></ol><p>Are the dependencies <strong>using</strong> dependencies, or are they <strong>implementing/inheriting</strong> dependencies?</p><p>For example, imagine that a concrete class inside of <code>Component B</code> <strong>uses</strong> an interface from <code>Component A</code>.</p><p><a href="../../../i.stack.imgur.com/68Ehe.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/68Ehe.png" alt="enter image description here"/></a></p><p>This means that the concrete class is expecting the interface to be <strong>implemented</strong> elsewhere by a different class.
It is only <strong>using</strong> the interface, not <strong>inheriting</strong> from it.</p><p>Now imagine that <code>Component C</code> has a concrete class in it that <strong>uses</strong> an interface that <em>is in the same</em> component as itself.
This concrete class does not <strong>implement</strong> said interface, it only <strong>uses</strong> it:</p><p><a href="../../../i.stack.imgur.com/udIt5.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/udIt5.png" alt="enter image description here"/></a></p><p>The <strong>implementation</strong> for the interface actually resides in <code>Component D</code> :</p><p><a href="../../../i.stack.imgur.com/77LBh.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/77LBh.png" alt="enter image description here"/></a></p><p>Let me phrase this again: Within <code>Component C</code>, a concrete class <strong>uses</strong> an interface, but that interface is actually <strong>implemented</strong> in <code>Component D</code>.</p><p>The &#39;<strong>uses</strong>&#39; and &#39;<strong>implements</strong>&#39; relationships are both equally dependencies, but this is the important part: when it comes to the order in which dependencies should be injected, only the &#39;<strong>uses</strong>&#39; relationships matter.</p><p>Let me illustrate that statement with an example:</p><p>First, let&#39;s imagine that you have a dependency graph that looks like this: <a href="../../../i.stack.imgur.com/XRFhK.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/XRFhK.png" alt="enter image description here"/></a></p><p>As I said earlier, the only relationships we&#39;re looking for in this context are the <strong>uses</strong> relationships, so consider only the black arrows.</p><p><code>Component #4</code> depends on <code>Component #3</code>; <code>Component #4</code> depends on <code>Component #2</code> which depends on <code>Component #1</code>;</p><p>Let&#39;s imagine that we&#39;re injecting all of the dependencies through constructors.</p><p>In pseudo-code, the <em>Main</em> component would look something like:</p><pre><code>// Instantiate the concrete implementation within Component #1:
implementation1 = new Implementation1() 

// Instantiate the concrete implementation within Component #2 while injecting its dependency into it:
implementation2 = new Implementation2(implementation1) 

// Instantiate the concrete implementation within Component #3:
implementation3 = new Implementation3() 

// Instantiate the concrete class within Component #4 while injecting both of its dependencies into it:
 implementation4 = new Implementation4(implementation2, implementation3)

// Okay, everything has been wired together, now hand control off to your highest level application logic.
</code></pre><p>It&#39;s important to note that <code>Implementation3</code> could have easily been instantiated before <code>Implementation1</code> and <code>Implementation2</code>, but I decided to instantiate them in numerical order, because it is easier to think about that way.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-clean-architecture-use-case-containing-the-presenter-or-returning-data/'>Architecture &#8211; Clean Architecture: Use case containing the presenter or returning data</a></li><li class="list-group-item"><a href='../architecture-uncle-bobs-clean-architecture-composed-entities/'>Architecture &#8211; Uncle Bob&#8217;s clean architecture &#8211; Composed entities</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-is-the-input-boundary-necessary/'>Architecture &#8211; Clean Architecture: Is the Input Boundary necessary</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-use-case-spanning-multiple-ui-elements/'>Architecture &#8211; Clean Architecture: Use case spanning multiple UI elements</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-should-each-view-have-its-own-presenter-and-viewmodel/'>Architecture &#8211; Clean Architecture: Should each view have its own presenter and viewmodel</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>