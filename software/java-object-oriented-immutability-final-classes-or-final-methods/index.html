<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Object oriented immutability: final classes or final methods &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067082 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067082" class="post-1067082 software type-software status-publish hentry category-software tag-java tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Object oriented immutability: final classes or final methods</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">object-oriented</span></p><div class="entry-content"><p>One of the things you see in numerous places in the standard java library is final classes. It is claimed that this is for immutability which I understand&#8230;to an extent.</p><p>Suppose you have a class:</p><pre><code>final public class ImmutableTest {
    private String value;
    public ImmutableTest(String value) {
        this.value = value;
    }
    public String getValue() {
        return this.value;
    }
}
</code></pre><p>You can say that the value is immutable because it can&#39;t be adapted after creation. However this limits usability of the class as no one can extend it (for example to use as a drop-in for a bad interfaceless design&#8230;).</p><p>Now suppose you have this class:</p><pre><code>public class ImmutableTest {
    private String value;
    public ImmutableTest(String value) {
        this.value = value;
    }
    final public String getValue() {
        return this.value;
    }
}
</code></pre><p>The &#34;value&#34; is still immutable but now at least people can extend the class. Someone once interjected: but if you extend it, the extended class is not guaranteed to be immutable!</p><p>While this is true, I think it is immaterial to the class itself.</p><p>If user A uses my ImmutableTest class everywhere in his code, he only has access to the &#34;value&#34; anyway which <strong>remains immutable</strong>. Unless he does explicit casting (in other words: he&#39;s aware that he&#39;s trying to access other stuff) he can&#39;t access a &#34;mutable&#34; part of the actual instance which means from the developer&#39;s point of view the class is as immutable as it should be, even if the actual instance has other mutable variables.</p><p>So in short: my opinion is that final classes are superfluous as final methods are all you need. I would love to hear arguments to the contrary though!</p><p><strong>UPDATE</strong></p><p>To clarify: I&#39;m not claiming that adding &#34;final&#34; to a class or its methods makes it immutable.</p><p>Suppose you have a class that is designed to be immutable but you do not make the methods or class final, a subclass can of course make it mutable again. This argument is used as to why some classes in the standard library are final. My opinion is that it should&#39;ve been enough to finalize the accessor methods to the immutable part and leave the class non-final.</p><p>This may leave the window open to the child objects <strong>adding</strong> mutable fields but the original set of fields would remain immutable hence satisfying the &#34;immutable&#34; requirement for the initial set of methods.</p><p><strong>UPDATE2</strong></p><p>The conclusion being that final classes have no real purpose except perhaps brevity which in itself is not enough of a reason to lose extensibility in my opinion.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Declaring immutable class <code>final</code> saves programmer from the need to <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="nofollow noreferrer" title="Don&#39;t repeat yourself">repeat declaring final</a> in each and every method declaration, over and over and over again.</p><p>In classes like <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html" rel="nofollow noreferrer">java.lang.String</a>, having over 60 methods, this is substantial save, as well as important guarantee that necessary modifier won&#39;t be omitted by mistake.</p><p>When object is intended to be immutable, mistakes to declare final method may be hard to detect, because there is no reliable way to tell whether programmer omitted final modifier intentionally or by mistake.</p><blockquote><p>final classes have no real purpose except perhaps brevity</p></blockquote><p>Besides brevity and helping to avoid mistakes, a strong benefit of declaring immutable class final is that this makes programmer&#39;s intent <em>explicit</em>, unambiguously communicating to API users that none of class methods are intended for override.</p><p>Alternative way, that is, declaring all methods final, lacks this important &#34;feature&#34;, as it leaves users of the API in the indecisive state, whether API designers intended to only protect some methods from overloading, and it only <a href="http://en.wikipedia.org/wiki/Programming_by_permutation" rel="nofollow noreferrer">accidentally</a> turned out that all of them got final, or there was a design decision to cover all the class.</p><blockquote><p><a href="https://softwareengineering.stackexchange.com/revisions/214462/1" title="quote source">my opinion is</a> that final classes are superfluous as final methods are all you need</p></blockquote><p>Given above, having final modifier for class doesn&#39;t look superfluous to me.</p><p>It is worth noting that <a href="http://docs.oracle.com/javase/tutorial/java/IandI/final.html" rel="nofollow noreferrer">Sun/Oracle Java tutorial</a> presents final classes as a matter of <em>usefulness</em> and not as that of convenience. If final classes purpose was mere brevity / syntactic sugar, one would expect tutorial to explain these as convenience.</p><blockquote><p>...you can also declare an entire class final. A class that is declared final cannot be subclassed. This is particularly useful, for example, when creating an immutable class like the <code>String</code> class.</p></blockquote></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-object-oriented-class-design/'>Java &#8211; Object-Oriented Class Design</a></li><li class="list-group-item"><a href='../object-oriented-is-protected-ever-reasonable-outside-of-virtual-methods-and-destructors/'>Object-oriented &#8211; is &#8216;protected&#8217; ever reasonable outside of virtual methods and destructors</a></li><li class="list-group-item"><a href='../java-using-public-final-rather-than-private-getters/'>Java &#8211; Using public final rather than private getters</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>