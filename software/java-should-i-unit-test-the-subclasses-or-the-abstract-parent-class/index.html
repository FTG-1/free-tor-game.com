<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Should I unit test the subclasses or the abstract parent class &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065055 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065055" class="post-1065055 software type-software status-publish hentry category-software tag-java tag-testing tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Should I unit test the subclasses or the abstract parent class</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">testing</span><span class="mr-2 badge badge-warning">unit testing</span></p><div class="entry-content"><p>I have a skeletal implementation, as in Item 18 from Effective Java (extended discussion <a href="https://stackoverflow.com/questions/13436995/why-and-when-to-use-skeletal-implementation-in-java">here</a>).<br /> It is an abstract class that provides 2 public methods methodA() and methodB() that call subclasses methods to &#34;fill the gaps&#34; that I can&#39;t define in an abstracted manner.</p><p>I developed it first by creating a concrete class and writing unit tests for it. When the second class came, I was able to extract common behavior, implement the &#34;missing gaps&#34; in the second class and it was ready (of course, the unit tests were created for the second subclass).</p><p>Time went by and now I have 4 subclasses, each implementing 3 short protected methods that are very specific to their concrete implementation, while the skeletal implementation does all the generic work.</p><p>My problem is that when I create a new implementation, I write the tests all over again:</p><ul><li>Does the subclass calls a given required method?</li><li>Does a given method has a given annotation?</li><li>Do I get the expected results from the method A?</li><li>Do I get the expected results from the method B?</li></ul><p>While see advantages with this approach:</p><ul><li>It documents the subclass requirements through tests</li><li>It may fail fast in case of a problematic refactoring</li><li>Test the subclass as a whole and through their public API (&#34;does methodA() work?&#34; and not &#34;does this protected method work?&#34;)</li></ul><p>The problem I have is that the tests for a new subclass are basically a no-brainer:<br /> &#8211; The tests are all the same in all subclasses, they just change the return type of the methods (the skeleton implementation is generic) and the properties I check on the assert part of the test.<br /> &#8211; Usually the subclasses have no tests that are specific for them</p><p>I like the way the tests focus on the result of the subclass itself and protects it from refactoring, but the fact that implementing the test became just &#34;manual work&#34; makes me think I am doing something wrong.</p><p>Is this issue common when testing class hierarchy? How can I avoid that?</p><p>ps: I thought about testing the skeleton class, but it also seems strange creating a mock of an abstract class to be able to test it. And I think that any refactoring on the abstract class that changes behavior that is not expected by the subclass would not be noticed as fast. My guts tell me that testing the subclass &#34;as a whole&#34; is the preferred approach here, but please feel free to tell me I am wrong ðŸ™‚</p><p>ps2: I&#39;ve googled and found many questions about the subject. One of them <a href="https://stackoverflow.com/questions/243274/how-to-unit-test-abstract-classes-extend-with-stubs">is this one</a> which has <a href="https://stackoverflow.com/a/2947823/504331">a great answer</a> from Nigel Thorne, my case would be his &#34;number 1.&#34; That would be great, but I can&#39;t refactor at this point, so I would have to live with this problem.<br /> If I could refactor, I would have each subclass as a strategy. That would be OK, but I would still test the &#34;main class&#34; and test the strategies, but I would not notice any refactoring that breaks the integration between main class and strategies.</p><p>ps3: I&#39;ve found some answers saying that &#34;it is acceptable&#34; to test the abstract class. I agree that this is acceptable, but I would like to know which is the preferred approach in this case (I am still starting with unit tests)</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I can&#39;t see how you&#39;d write tests for an <em>abstract</em> base class; you can&#39;t instantiate it, so you cannot have an instance of it <em>to</em> test.  You could create a &#34;dummy&#34;, concrete subclass just for the purposes of testing it - not sure how much use that would be.  YMMV.</p><p>Every time you create a new implementation (class), then you should be writing tests that exercise that new implementation.  Since parts of the functionality (your &#34;gaps&#34;) are implemented within <em>each</em> subclass, this is absolutely necessary; the output of each of the inherited methods may (and probably <em>should</em>) be different for each new implementation.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-automating-unit-test-creation/'>Php &#8211; Automating Unit Test Creation</a></li><li class="list-group-item"><a href='../unit-testing-how-to-unit-test-that-the-correct-implementation-of-an-interface-is-used/'>Unit-testing &#8211; How to unit test that the correct implementation of an interface is used</a></li><li class="list-group-item"><a href='../java-check-the-existence-of-an-annotation-in-an-unit-test/'>Java &#8211;  check the existence of an annotation in an unit test</a></li><li class="list-group-item"><a href='../java-is-this-unit-test-too-tightly-coupled-to-implementation/'>Java &#8211; Is this unit test too tightly coupled to implementation</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>