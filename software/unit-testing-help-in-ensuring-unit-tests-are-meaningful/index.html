<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; Help in ensuring unit tests are meaningful &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087478 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087478" class="post-1087478 software type-software status-publish hentry category-software tag-tdd tag-testing tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; Help in ensuring unit tests are meaningful</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">tdd</span><span class="mr-2 badge badge-info">testing</span><span class="mr-2 badge badge-warning">unit testing</span></p><div class="entry-content"><p>I&#39;ve just written a unit test for this function, which loops through a collection of dates and sets properties equal to true or false depending on whether they&#39;re before or after a given comparison date:</p><pre><code>public void CheckHistory(int months)
{
    var endDate = DateTime.Today.AddMonths(months);
    Dictionary&lt;Order, bool&gt; orders = new Dictionary&lt;Order, bool&gt;();

    foreach (var kvp in this.Orders)
    {
        if (kvp.Key.Date &gt;= endDate)
        {
            orders.Add(kvp.Key, true);
        }
        else
        {
            orders.Add(kvp.Key, false);
        }
    }
    this.OrderHistories = orders;
}
</code></pre><p>So here&#39;s the test I wrote:</p><pre><code>public void Assert_CheckHistory_SelectsCorrectDates()
{
    MyViewModel vm = GetVmWithMockRepository();
    vm.OrderHistories = new Dictionary&lt;OrderHistory, bool&gt;();

    OrderHistory ohOld = new OrderHistory();
    ohOld.MailingDate = DateTime.Today.AddMonths(-12);
    vm.OrderHistories.Add(ohOld, false);

    OrderHistory ohNew = new OrderHistory();
    ohNew.MailingDate = DateTime.Today.AddMonths(-3);
    vm.OrderHistories.Add(ohNew, false);

    vm.CheckOrderHist(-6);

    int selectedOrders = vm.OrderHistories.Where(o =&gt; o.Value == true).Count();
    Assert.AreEqual(1, selectedOrders, &#34;Unexpected number of selected Order Histories&#34;);
}
</code></pre><p>Nothing wrong there. Test passes and all is good with the world.</p><p>However, I&#39;m haunted by a nagging feeling that I&#39;m not actually testing anything useful, and am just writing tests for the sake out it.</p><p>I get this a <em>lot</em>. A creeping paranoia that the tests I&#39;m writing are incomplete in the sense that while they cover the lines of code in the target function, they don&#39;t really trap any likely problems and are therefore just a maintenance overhead.</p><p>Is that sample test worthwhile? Is even a badly-designed test worth worthwhile over no test at all? And most of all are there any principles to help programmers identify whether a test is useful or not, or to guide them in constructing useful tests in the future?</p><p>To be clear, I&#39;m adding tests to an existing application. Going test-first in true TDD style isn&#39;t possible.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>To quote the <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=203994" rel="nofollow noreferrer">&#34;Way of Testivus&#34;</a>,</p><blockquote><p>A bad test is better than no test</p></blockquote><p>Making sure that your test tells you that the code works is the point of the test.  When you are writing tests for code that has already been written, you are setting things up so that you can refactor it and be confident that you have not broken any current functionality.  If the test fails for no apparent reason, then the test is bad and should be fixed.  As long the test ensures the functionality of your application, the test has some value.</p><p>Writing these tests gives you confidence in your ability to refactor that code later on.  Because if you have done it right, the test will still pass.  You are giving yourself the confidence to change that code and not have to worry about breaking any old functionality.</p><p><a href="http://blog.cleancoder.com/uncle-bob/2014/04/25/MonogamousTDD.html" rel="nofollow noreferrer">Uncle Bob had a recent blog entry regarding this:</a></p><blockquote><p>If you have a test suite that you trust so much that you are willing to deploy the system based solely on those tests passing; and if that test suite can be executed in seconds, or minutes, then you can quickly and easily clean the code without fear.</p></blockquote><p>Your example test isn&#39;t all that good but it gives you more confidence that any changes you make will not affect the functionality.  You want to check that for a given state the method will output a specific response.  You trying to test what the code does rather than what the code is.  For legacy code like this, you will end up with tests that are more &#34;functional&#34; rather than &#34;unit&#34;.</p><p>Does having this test give you more confidence that any changes to the application did not result in the code being broken?  If not, then your test is not useful and you should get rid of it or change it.  Untested code will paralyze any useful changes that you can make later.</p><p>&#34;We can&#39;t make that change because we don&#39;t know everywhere that it is being used!&#34;  Your tests make that argument moot.  You know that the code all works because all the tests pass.</p><p>Tests also do not ensure bug-free code.  Your code may still have bugs but when they are discovered and you add a new test duplicating it.  You ensure that that bug NEVER happens again because then that test will fail.  And as long as you are running your tests often, this bug will always be checked for.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-are-asserts-or-unit-tests-more-important/'>Unit-testing &#8211; Are asserts or unit tests more important</a></li><li class="list-group-item"><a href='../unit-testing-what-are-the-disadvantages-of-writing-code-before-writing-unit-tests/'>Unit-testing &#8211; What are the disadvantages of writing code before writing unit tests</a></li><li class="list-group-item"><a href='../java-is-it-feasible-and-useful-to-auto-generate-some-code-of-unit-tests/'>Java &#8211; Is it feasible and useful to auto-generate some code of unit tests</a></li><li class="list-group-item"><a href='../unit-testing-are-integration-tests-meant-to-repeat-all-unit-tests/'>Unit-testing &#8211; Are integration tests meant to repeat all unit tests</a></li><li class="list-group-item"><a href='../are-the-tests-for-test-driven-development-tdd-always-unit-tests/'>Are the tests for test-driven development (TDD) always unit-tests</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>