<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Onion architecture: layer placement of business logic &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072227 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072227" class="post-1072227 software type-software status-publish hentry category-software tag-architecture tag-business-logic tag-c tag-onion-architecture"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Onion architecture: layer placement of business logic</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">business-logic</span><span class="mr-2 badge badge-warning">c</span><span class="mr-2 badge badge-primary">onion-architecture</span></p><div class="entry-content"><p>Where should the business logic for a project that utilizes Onion Architecture be placed?</p><p>In my case, it&#39;s a C#-based project, utilizing Web API and possibly a MVC UI for the presentation.  But that may not matter, since I&#39;m just curious about this conceptually.</p><p>The two diagrams below seem to be the most common ones that appear all over the web when I&#39;m Googling info on onion architecture:</p><p><a href="../../../i.stack.imgur.com/72iLom.jpg" rel="noreferrer"><img src="../../../i.stack.imgur.com/72iLom.jpg" alt="enter image description here"/></a><br /> <a href="../../../i.stack.imgur.com/6UvBzm.jpg" rel="noreferrer"><img src="../../../i.stack.imgur.com/6UvBzm.jpg" alt="enter image description here"/></a><br /> Enlarged images: <a href="../../../i.stack.imgur.com/72iLo.png" rel="noreferrer">diagram 1</a> and <a href="../../../i.stack.imgur.com/6UvBz.png" rel="noreferrer">diagram 2</a></p><p>If I&#39;m not mistaken, anything below the outer ring is considered the Core.</p><p>In <strong>Diagram #1</strong> the most outer of the Core (blue ring) contains service interfaces, and it shows that the purple outer ring has the logging, services, etc.  So does that mean the outer purple ring contains the service layer and business logic?</p><p>In <strong>Diagram #2</strong> it shows Application and Domain Services as a part of the Application Core (not just interfaces and the domain model).</p><p><strong>I feel that these two diagrams seem to define Onion Architecture completely different, but yet they seem to be the two primarily referenced.  Or am I reading this wrong?</strong></p><p><strong>Maybe the end-result is no different, and it&#39;s just a matter of how I&#39;m viewing the project layout in my head, but I&#39;ve been trying to think of the service layer as a part of the Infrastructure on the outer ring.  Is that a wrong way to think of it?</strong></p><p>My service layer classes can have repositories or other service classes injected.  The services themselves can be injected into the presentation layer projects (e.g. a Web API or MVC Controller) and from there converted into a presentable object (DTO or ViewModel) via Automapper.</p><p>Thank you</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>What you usually call &#34;business layer&#34; on a layered architecture here may be called domain model but that&#39;s not the point.</p><p>You say that a ring <strong>contains</strong> another and it&#39;s a conceptual error: <strong>any outer ring communicates with its inner ring and possibly with the core</strong>. Obviously UI doesn&#39;t contain domain logic (as tests do not contain application services).</p><p>Differences with a traditional layered architecture are more fundamental than the shape you use to sketch dependencies and in this case this memoizable name (and shape) doesn&#39;t really help to grasp the fundament difference: domain model is the central absolute source of truth for the entire system. Note the breaking difference: UI will use domain model, it&#39;s not limited to Application Services ring (despite what images may mistakenly induce to think). It doesn&#39;t mean that there is a direct dependency: interfaces and IoC are in-place to provide the required abstraction and isolation, the core point isn&#39;t to isolate each ring but to <strong>isolate your domain model from any external entity</strong>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-how-to-structure-a-domain-driven-design-in-an-onion-architecture/'>Architecture &#8211; How to structure a Domain Driven Design in an Onion Architecture</a></li><li class="list-group-item"><a href='../c-domain-driven-design-in-an-onion-architecture/'>C# &#8211; Domain Driven Design in an Onion Architecture</a></li><li class="list-group-item"><a href='../c-how-to-structure-an-onion-project/'>C# &#8211; How to structure an Onion project</a></li><li class="list-group-item"><a href='../java-what-are-application-and-domain-services-in-onion-architecture/'>Java &#8211; What are application and domain services in onion architecture</a></li><li class="list-group-item"><a href='../avoiding-repository-pattern-implementing-onion-architecture-with-dbcontext-only/'>Avoiding Repository pattern &#8211; implementing Onion Architecture with DbContext only</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>