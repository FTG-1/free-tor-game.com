<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Would Rebol (or Red) benefit from Lisp-style Macros &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087308 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087308" class="post-1087308 software type-software status-publish hentry category-software tag-macros tag-rebol"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Would Rebol (or Red) benefit from Lisp-style Macros</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">macros</span><span class="mr-2 badge badge-info">rebol</span></p><div class="entry-content"><p>As a <em>&#39;seasoned&#39;</em> Rebol developer with some knowledge of the world outside, I&#39;d be curious as to the utility/pitfalls of implementing Lisp-style macros in Rebol (and/or Red).</p><p>My understanding (always happy to revise) is that Lisp is able to preprocess code prior to evaluation/compilation, modifying that code according to the rules of the applicable macros. This can allow for more complex/expressive statements than otherwise, with efficiencies as those statements are expanded only once as a body of code is loaded. The macro rules themselves are relatively straightforward as the homoiconicity of Lisp allows the code to be manipulated by the same terms one would modify data.</p><p>As Rebol is also a homoiconic language, it stands that it too could accommodate macros between loading and evaluation with similarly expressive transformation grammar (though I&#39;d posit that Rebol&#39;s more freeform evaluation model—statements not generally bound by parentheses—makes it harder to identify the portions of code to be transformed).</p><p>My own inclination is that in the main, macros aren&#39;t really necessary in Rebol—you can already create complex code structures that are fairly efficient, and where more efficiency is desired, Rebol has the capabilities to accommodate without significant loss of expressivity. On the other had, <em>&#39;fairly&#39;</em> and <em>&#39;no significant loss&#39;</em> could be considered weasel words and macros do offer an efficiency/expressivity bump, but at what implementation cost?</p><p>Also, as in Rebol you can load code prior to evaluation, it would be possible to implement a mechanism for load-expand-evaluate at the user-level permitting third-party macro implementations.</p><p>This post is partly a response to <a href="http://chat.stackoverflow.com/transcript/message/24310579#24310579">this question</a> and everything (pretty much) I know about macros comes from <a href="http://chat.stackoverflow.com/rooms/291/conversation/jacob-explains-macros">this exchange</a>.</p><h1>Update</h1><p><a href="http://www.red-lang.org/2016/12/entering-world-of-macros.html" rel="nofollow noreferrer">Entering the World of Macros</a></p><p>Red introduced a rudimentary macro system in version 0.6.2. I have used them effectively to create <a href="https://github.com/rgchris/Scripts/blob/master/experimental/markup.reb" rel="nofollow noreferrer">cross-compatible scripts</a> that target both the Ren-C branch of Rebol 3 and Red.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This is the first time I hear about Rebol, but from a quick look at the Wikipedia page it seems to me that Rebol dialects are just like Lisp macros: they both receive ordinary code of the language that has passed lexical and syntactic(but not semantic!) processing, and process it with their own semantical rules.</p><p>So, Rebol will not benefit from Lisp macros, because it already has that feature under a different name, and having two core-language features that do exactly the same thing is bad - especially for languages that rely on <a href="https://en.wikipedia.org/wiki/Homoiconicity" rel="nofollow noreferrer">Homoiconicity</a>, where uniform simplicity in the syntax is the key to their magic.</p><h2>Update</h2><p>The asker explainer in the comments that macros have the advantage that they are expanded once, before the code execution, and injected into the code.</p><p>This, IMO, will make things worse, because it would mess up the order of parsing!</p><p>For example, let&#39;s say we have the Rebol command <code>foo x bar y</code>, where <code>foo</code> is a dialect and <code>bar</code> is a macro. What should the interpreter do? Depends on <code>foo</code>&#39;s arit:</p><ul><li>If <code>foo</code> accepts a single argument, that means we have two commands: <code>foo x</code> and <code>bar y</code>. So <code>bar y</code> needs to be expanded.</li><li>If <code>foo</code> accepts three arguments, that means that we have one command, and <code>bar</code> is the second argument of <code>foo</code>. This means <code>bar</code> shouldn&#39;t be expanded, and instead passed to <code>foo</code> as-is.</li></ul><p>The rules are clear - for a human, and probably for static compilers as well. But Rebol is dynamic and interpreted, so <code>foo</code> is only evaluated when it needs to be executed - but <code>bar</code> should be expanded before that happens! So now the interpreted needs to evaluate the dialects before it expands the macros, so it can expand the macros before it evaluated the dialect, and round and round the interpreted goes trying to resolve the circle...</p><p>Lisp doesn&#39;t have this problem, because:</p><ul><li>It&#39;s easy to know where a function/macro begins, because you need to put them in parenthesis. You can&#39;t have <code>foo x bar y</code> - you need to either have <code>(foo x bar y)</code> or <code>(foo x) (bar y)</code> or even <code>(foo x (bar y))</code>, so it&#39;s easy for the interpreter to know what you are trying to do.</li><li>Lisp doesn&#39;t have dialects - only functions and macros. And since functions don&#39;t control the evaluation of their arguments - macros always evaluate themselves. If Rebol didn&#39;t have dialects, and <code>foo</code> was a function, <code>foo x bar y</code> would require the interpreter to first evaluate <code>x</code>, <code>bar</code> and <code>y</code>, and since <code>bar</code> is a macro it would have expanded regardless of <code>foo</code>&#39;s arity, because <code>foo</code> has no control whatsoever on the evaluation of it&#39;s arguments.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-useful-are-lisp-macros/'>How useful are Lisp macros</a></li><li class="list-group-item"><a href='../what-are-the-typical-applications-of-lisp-macros/'>What are the typical applications of Lisp macros</a></li><li class="list-group-item"><a href='../byte-code-weaving-vs-lisp-macros/'>Byte code weaving vs Lisp macros</a></li><li class="list-group-item"><a href='../does-macros-support-make-scala-a-lisp-dialect/'>Does macros support make Scala a Lisp dialect</a></li><li class="list-group-item"><a href='../python-decorators-and-lisp-macros/'>Python decorators and Lisp macros</a></li><li class="list-group-item"><a href='../what-practical-problem-results-from-lack-of-hygienic-macros-in-clojure/'>What practical problem results from lack of hygienic macros in Clojure</a></li><li class="list-group-item"><a href='../how-to-a-compiler-be-written-for-a-language-that-allows-rewriting-code-at-runtime-such-as-lisp-macros/'>How to a compiler be written for a language that allows rewriting code at runtime (such as Lisp macros)</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>