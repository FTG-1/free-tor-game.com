<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Serialize Entity Framework Objects Without Lazy Loading &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075989 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075989" class="post-1075989 software type-software status-publish hentry category-software tag-asp-net tag-entity-framework tag-json tag-reflection tag-serialization"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Serialize Entity Framework Objects Without Lazy Loading</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">asp.net</span><span class="mr-2 badge badge-info">entity-framework</span><span class="mr-2 badge badge-warning">json</span><span class="mr-2 badge badge-primary">reflection</span><span class="mr-2 badge badge-danger">serialization</span></p><div class="entry-content"><p>I have a very specific scenario that I&#39;m not sure is possible to fully support:</p><p>I have an ASP.NET application that uses Entity Framework 6.3 for it&#39;s data management.</p><p>I also have a generic audit library that I use to log when specific types of data are viewed. This library is designed to be ignorant of the data/objects it logs. I would like to log entity framework created objects in json serialized format.</p><p>The issue I am running into is when I attempt to serialize Entity Framework objects with virtual references. The serialization process will trigger a lazy load on all virtual properties.</p><p>There are a few solutions that will stop this:</p><ol><li><p>Disable Lazy Loading for an EF Context:</p><p>public SomeContext()<br /> {<br /> this.Configuration.LazyLoadingEnabled = false;<br /> }</p></li><li><p>Create a DTO from the Entity Framework Object and serialize that instead.</p></li><li><p>Project the data into a new type when reading from the context.</p></li></ol><p>Unfortunately, options 1 and 3 are off the table. I can&#39;t go back and modify the context to satisfy the needs of the logger for various reasons, one of which is that I am not the &#34;owner&#34; of the projects I&#39;m modifying. Same goes for changing the data types returned.</p><p>Basically I am trying to enter logs without impacting the functionality of the application whatsoever.</p><p>That leaves option 2. I could create a temporary DTO, log that, and then dispose of it. The problem with this approach is that whoever is adding the log references would need an understanding of the objects to create a DTO. I guess I could use something like Automapper to assist with this, but again, it&#39;s definitely a lot more work just to get around the fact that we cannot simply serialize the EF object.</p><p>My question is, is there an option 4? Is there a way to serialize an EF object without triggering the lazy loading while also not impacting the way the application current works?</p><p>Perhaps I could do some reflection into the EF object and do either copy the object or more directly direct the serialization.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Here is my suggestion.</p><p>Create another partial class for one of your Entity classes.  Include in your partial class a <code>Serialize()</code> method that only serializes the fields that you want, and excludes those fields that are lazy loaded.</p><p>When you&#39;ve figured out how to do that reliably, either write by hand new partial classes for each of the remaining Entity classes, or create a T4 class that generates those classes for you.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-databinding-to-an-entity-framework-in-wpf/'>Design &#8211; Databinding to an Entity Framework in WPF</a></li><li class="list-group-item"><a href='../is-moving-entity-framework-objects-over-a-webservice-really-the-best-way/'>Is Moving Entity Framework objects over a webservice really the best way</a></li><li class="list-group-item"><a href='../c-entity-framework-and-eager-loading-and-enterprise-application-with-ddd-aproach/'>C# &#8211; Entity framework and Eager loading and enterprise application with DDD aproach</a></li><li class="list-group-item"><a href='../is-ddd-not-appropriate-for-the-website-or-should-i-introduce-a-query-layer/'>Is DDD not appropriate for the website or should I introduce a Query Layer</a></li><li class="list-group-item"><a href='../entity-framework-code-first-c-class-separation-and-eav/'>Entity Framework Code First, C# class separation and EAV</a></li><li class="list-group-item"><a href='../design-is-it-good-practice-to-use-entity-objects-as-data-transfer-objects/'>Design &#8211; Is it good practice to use entity objects as data transfer objects</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>