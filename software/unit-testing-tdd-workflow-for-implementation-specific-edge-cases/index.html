<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; TDD workflow for (implementation specific) edge cases &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087412 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087412" class="post-1087412 software type-software status-publish hentry category-software tag-code-organization tag-tdd tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; TDD workflow for (implementation specific) edge cases</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">code-organization</span><span class="mr-2 badge badge-info">tdd</span><span class="mr-2 badge badge-warning">unit testing</span></p><div class="entry-content"><p>When developing features with TDD, I create a test for each combination of feature and case. So, one test for creating user successfully, one for validation errors, and one for database errors. I don&#39;t test each one with many different types of data, in general, as I write the tests to flesh out features, less to catch errors. I don&#39;t think it&#39;s time-effective to write out several cases (even with a &#34;data provider&#34;) for every single feature I develop in order to validate that the feature works correctly in all cases.</p><p>Sometimes, though, there are certain implementation specific bugs to be wary of when implementing the feature. After writing the feature test that allows me to write the implementation, I&#39;ll notice that certain edge cases need to be tested more carefully because of the implementation.</p><p>How does one organize these tests with the rest of the feature-specific tests? Are the tests I&#39;m describing regression tests?</p><p><strong>Edit:</strong></p><p>I guess I wasn&#39;t clear about what I meant with &#34;different types of data&#34; and &#34;works well in all cases.&#34; My main issue is in writing implementation-specific tests&#8211;specifically the workflow and organization.</p><p>We <em>are</em> testing the interface. We&#39;re specifically testing the feature only, at first. But a certain implementation requires more tests.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If you can send in different types of data to your methods, and some of those types have a chance of working incorrectly, then you need to be testing those possibilities. Plain and simple.</p><p>However, if that is really the case, I think the actual problem is that your code is not set up cleanly. I smell problems.</p><p>What I&#39;m going to do is first talk about how to  refactor your code so that it can easily be tested. Then, I&#39;ll explain how you might approach testing a system like the one you&#39;ve described, if you have to (my hope is that you don&#39;t).</p><p><strong>Code Refatoring</strong> (the best solution)</p><p>First, lets talk about why your methods allow so many different types to be sent in when they don&#39;t work consistently with them. This is an obvious code smell that should probably be addressed. My guess is that you need to refactor your code so that this isn&#39;t a problem in the first place. An approach I would take might look like this:</p><ul><li>I&#39;m going to make sure that all objects sent to this method have a common interface</li><li>I&#39;m going to have the method only use this common interface to do what it needs</li><li>The objects themselves will each have their own implementation of the interface that will always work for that type of object.</li></ul><p>If you do this, you can now easily test the method and see that it is correctly using the common interface. You now know that this code is working no matter what object you put in. The interface is defined, so the correct action is taken.</p><p>You will also test each of the objects that implement the interface, and make sure that they have implemented it correctly for the type of object it is. Once you&#39;ve tested that, you are done, you know everything is working without a million different tests testing each object with each type.</p><p>To illustrate, I&#39;ve put together some pseudo-code to demonstrate. Lets say your code looks like this:</p><pre><code>function output_to_file (shape x) {
    if (x is a triangle) {
        // output to file
    } else if (x is a square) {
        // output to file
    } else if (x is a pentagon) {
       // output to a file
    }
}
</code></pre><p>Then your tests are going to require you to send every different type of shape to the output_to_file method. If you have a whole bunch of methods like this, and a whole bunch of shapes, you will need a whole bunch of tests. Every time you add a shape, you need to modify your output_to_file code and add tests. No fun at all. Not good code.</p><p>Instead, you need to refactor your code to look more like this:</p><pre><code>function output_to_file (shape x) {
    text = x.get_text_representation()
    save text to a file
}
</code></pre><p>Instead of handling the details of each shape, output_to_file just uses a common interface: the method get_text_representation.</p><p>Now to test output_to_file all you have to do is check that it is calling get_text_representation and putting the results in a file. If it is doing that, it is working. The output_to_file method now follows the &#34;open/closed&#34; principle. It is open to new types of objects being sent in (as long as they support the interface), but closed to the need for additional changes.</p><p>This means of course that our shapes need the get_text_representation function. But that is simple:</p><pre><code>class triangle {
    function get_text_representation {
       // return whatever
    }
}

class square {
    function get_text_representation {
       // return whatever
    }
}

//and so on
</code></pre><p>Now we test the get_text_representation method on each of those objects to make sure that they are working like they should. That method might be used in a variety of places, but we don&#39;t really care, as long as it is working right we know that other methods relying on it will work right.</p><p>By setting up our objects in a different way, we&#39;ve eliminated the need to test a whole bunch of different objects/method combinations. We test that the method is using the correct interface, and we test that the objects implement the interface correctly. Nothing more is needed. Yay!</p><p><strong>Testing More Cases</strong> (the less than best solution)</p><p>Now perhaps you&#39;ve been reading this so far, and you&#39;re thinking, &#34;well that is nice and all, but I can&#39;t do that, he doesn&#39;t understand my situation.&#34;</p><p>Ok, first, try really hard to refactor your code. I&#39;ll be worth it. Did you try? Ok then, I&#39;ll give you benefit of the doubt and assume you are in some type of complicated situation that can&#39;t be refactored the way it should be (but I still don&#39;t believe you).</p><p>Here&#39;s the deal: you have to test each possible different type of object with each different method. You just have to. If some of those object/method combinations can cause error, you must test. Sorry.</p><p>Now, if it seems tedious or repetitive to be testing the same methods with different types of input again and again, you can automate the process somewhat. A lot of people forget that you can code your tests to do repetitive things for you. Let me give an example of how you might set up your test:</p><pre><code>test_objects = {new triangle, new square, new pentagon .... }    

function test_output_to_file {
   foreach (test_objects as x) {
      output_to_file(x)
      assert everything is good
   }
}
</code></pre><p>This is really the best you can do if you can&#39;t refactor your code correctly. Is it tedious, yes. Is it clean, no. Refactor your code if you can, this isn&#39;t a good alternative.</p><p><strong>Conclusion</strong></p><p>In conclusion, the problem you are describing -- being able to send many different types of data to many different functions, some of which are not supported or buggy -- is probably an indication that your code isn&#39;t clean. Testing isn&#39;t the problem, and refactoring your code is the solution.</p><p>If for some reason refactoring isn&#39;t possible (I find that hard to believe!) then you are going to have to bite the bullet and test every combination. Make some structure that allows you to do that a little more easily.</p><p>I highly recommend anyone interested in creating clean, testable code to read the book <a href="http://www.e-reading.co.uk/bookreader.php/134601/Martin_-_Clean_Code_-_A_Handbook_of_Agile_Software_Craftsmanship.pdf" rel="nofollow"><em>Clean Code</em> by Robert C Martin</a>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../tdd-for-batch-processing-how-to-do-it/'>TDD for batch processing: How to do it</a></li><li class="list-group-item"><a href='../does-tdd-really-work-for-complex-projects/'>Does TDD really work for complex projects</a></li><li class="list-group-item"><a href='../unit-testing-tdd-and-complete-test-coverage-where-exponential-test-cases-are-needed/'>Unit-testing &#8211; TDD and complete test coverage where exponential test cases are needed</a></li><li class="list-group-item"><a href='../unit-testing-how-to-pick-the-testing-values-for-parameterized-tests-for-stateless-functions/'>Unit-testing &#8211; How to pick the testing values for parameterized tests for stateless functions</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>