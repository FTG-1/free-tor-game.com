<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; What are the disadvantages of self-encapsulation &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1071600 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1071600" class="post-1071600 software type-software status-publish hentry category-software tag-code-reuse tag-encapsulation tag-java tag-null tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; What are the disadvantages of self-encapsulation</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">code-reuse</span><span class="mr-2 badge badge-info">encapsulation</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">null</span><span class="mr-2 badge badge-danger">object-oriented</span></p><div class="entry-content"><h1>Background</h1><p>Tony Hoare&#39;s <a href="http://qconlondon.com/london-2009/presentation/Null+References%3a+The+Billion+Dollar+Mistake" rel="nofollow">billion dollar mistake</a> was the invention of <code>null</code>. Subsequently, a lot of code has become riddled with null pointer exceptions (segfaults) when software developers try to use (dereference) uninitialized variables.</p><p>In 1989, <a href="http://www.wirfs-brock.com/allen/files/tek/variables-limit-reusability.pdf" rel="nofollow">Wirfs-Brock and Wikerson</a> wrote:</p><blockquote><p>Direct references to variables severely limit the ability of programmers to reÔ¨Åne existing classes. The programming conventions described here structure the use of variables to promote reusable designs. We encourage users of all object-oriented languages to follow these conventions. Additionally, we strongly urge designers of object-oriented languages to consider the effects of unrestricted variable references on reusability.</p></blockquote><h1>Problem</h1><p>A lot of software, especially in Java, but likely in C# and C++, often uses the following pattern:</p><pre><code>public class SomeClass {
  private String someAttribute;

  public SomeClass() {
    this.someAttribute = &#34;Some Value&#34;;
  }

  public void someMethod() {
    if( this.someAttribute.equals( &#34;Some Value&#34; ) ) {
      // do something...
    }
  }

  public void setAttribute( String s ) {
    this.someAttribute = s;
  }

  public String getAttribute() {
    return this.someAttribute;
  }
}
</code></pre><p>Sometimes a band-aid solution is used by checking for <code>null</code> throughout the code base:</p><pre><code>  public void someMethod() {
    assert this.someAttribute != null;

    if( this.someAttribute.equals( &#34;Some Value&#34; ) ) {
      // do something...
    }
  }

  public void anotherMethod() {
    assert this.someAttribute != null;

    if( this.someAttribute.equals( &#34;Some Default Value&#34; ) ) {
      // do something...
    }
  }
</code></pre><p>The band-aid does not always avoid the null pointer problem: a race condition exists. The race condition is mitigated using:</p><pre><code>  public void anotherMethod() {
    String someAttribute = this.someAttribute;
    assert someAttribute != null;

    if( someAttribute.equals( &#34;Some Default Value&#34; ) ) {
      // do something...
    }
  }
</code></pre><p>Yet that requires two statements (assignment to local copy and check for <code>null</code>) every time a class-scoped variable is used to ensure it is valid.</p><h1>Self-Encapsulation</h1><p>Ken Auer&#39;s <em>Reusability Through Self-Encapsulation</em> (Pattern Languages of Program Design, Addison Wesley, New York, pp. 505-516, 1994) advocated self-encapsulation combined with lazy initialization. The result, in Java, would resemble:</p><pre><code>public class SomeClass {
  private String someAttribute;

  public SomeClass() {
    setAttribute( &#34;Some Value&#34; );
  }

  public void someMethod() {
    if( getAttribute().equals( &#34;Some Value&#34; ) ) {
      // do something...
    }
  }

  public void setAttribute( String s ) {
    this.someAttribute = s;
  }

  public String getAttribute() {
    String someAttribute = this.someAttribute;

    if( someAttribute == null ) {
      someAttribute = createDefaultValue();
      setAttribute( someAttribute );
    }

    return someAttribute;
  }

  protected String createDefaultValue() { return &#34;Some Default Value&#34;; }
}
</code></pre><p>All duplicate checks for <code>null</code> are superfluous: <code>getAttribute()</code> ensures the value is never <code>null</code> at a single location within the containing class.</p><p>Efficiency arguments should be fairly moot &#8212; modern compilers and virtual machines can inline the code when possible.</p><p>As long as variables are never referenced directly, this also allows for proper application of the <a href="http://en.wikipedia.org/wiki/Open/closed_principle" rel="nofollow">Open-Closed Principle</a>.</p><h1>Question</h1><p>What are the disadvantages of self-encapsulation, if any?</p><p>(Ideally, I would like to see references to studies that contrast the robustness of similarly complex systems that use and don&#39;t use self-encapsulation, as this strikes me as a fairly straightforward testable hypothesis.)</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The disadvantages are the inefficiency of the extra indirection, as you pointed out, and the fact that the compiler doesn&#39;t enforce it.  All it takes is your worst programmer using one unencapsulated reference to destroy the benefits.</p><p>Also, the right way to solve a null pointer problem isn&#39;t to replace it with a non-null default value with essentially the same characteristics.  The problem with null pointer dereferences isn&#39;t that they cause a segfault.  That&#39;s just a symptom.  The problem is that the programmer might not always handle an unexpected default/uninitialized value.  That problem still must be handled separately with your self-encapsulation pattern.</p><p>The right way to solve a null pointer problem is to not create the object until a semantically valid non-null value can be put into the attribute, and to destroy the object before it is necessary to set any of its attributes to null.  If there is never the possibility for a pointer to be null, there is never a need to check it.</p><p>Usually when people think an attribute must be null, they are trying to do too much in one class.  It often makes the code much cleaner to split it into two classes.  You can also split functions to avoid null assignments. <a href="https://softwareengineering.stackexchange.com/a/170333/3965">Here&#39;s</a> an example from another question where I refactored a function to avoid a problematic null assignment.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-object-oriented-programming-getters-setters-or-logical-names/'>Object-oriented &#8211; Object Oriented Programming: getters/setters or logical names</a></li><li class="list-group-item"><a href='../c-static-variable-usage-and-implications-on-threading/'>C# &#8211; Static variable &#8211; Usage and Implications on Threading</a></li><li class="list-group-item"><a href='../c-requiring-explicit-null-reference-handling/'>C# &#8211; Requiring Explicit Null Reference Handling</a></li><li class="list-group-item"><a href='../object-oriented-why-most-well-known-imperative-oo-languages-allow-unchecked-access-to-types-that-can-represent-a-nothing-value/'>Object-oriented &#8211; Why most &#8220;well-known&#8221; imperative/OO languages allow unchecked access to types that can represent a &#8216;nothing&#8217; value</a></li><li class="list-group-item"><a href='../java-checking-for-the-presence-of-optional-properties-of-an-object/'>Java &#8211; Checking for the presence of optional properties of an object</a></li><li class="list-group-item"><a href='../java-is-throwing-an-exception-an-anti-pattern-here/'>Java &#8211; Is throwing an exception an anti-pattern here</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>