<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; How to prevent &#8216;global variables&#8217; in a big project &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084312 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084312" class="post-1084312 software type-software status-publish hentry category-software tag-c tag-clang tag-gcc tag-variables"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; How to prevent &#8216;global variables&#8217; in a big project</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">clang</span><span class="mr-2 badge badge-warning">gcc</span><span class="mr-2 badge badge-primary">variables</span></p><div class="entry-content"><p>With &#39;global variables&#39;, I mean</p><ul><li>Variables on namespace level</li><li>Static data members in classes</li><li>Static variables in functions</li></ul><p>In a big C++ project I would like to have a mechanism (like a compiler option) to prevent such data in most parts. A compiler error or warning would be nice. Of course, at one point you have to instantiate your classes.</p><p>Conceptually we have the notion of &#34;runnables&#34; which is the code encapsulation. While provided by the platform project they can be &#39;instantiated&#39; and connected by the downstream project. Unfortunately, since usually there was only one instance of a type, devs used a lot of globals or statics. Needless to say this isn&#39;t good practise and you run into problems when doing two instances of a class later.</p><p>It&#39;s ok to have only one build preventing this (we have GCC, Clang, VS and GHS). I guess a linker option isn&#39;t applicable as the executable is linked in the downstream project and they instantiate the &#39;runnables&#39; on namespace level. Another idea would be to search the object (.o) files if they contain something for the data segment, but I&#39;m uncertain how to do that.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Some things can definitely be enforced by the compiler. Some other, unfortunately, cannot.</p><p>A good alternative to compiler warnings / errors is using a static analysis tool, configured appropriately according to your desires.</p><p>All &#34;automated&#34; solutions must be used as a tool during (the preparation of) a peer review.</p><p>As it was already suggested, the problem of global variables is more of a &#34;mentality&#34; problem, not related to syntax or anything. Keep reading about how you can deal with it (most important, using a static analysis tool and peer reviews, based on internal company regulations).</p><hr/><p>However, all the above will work only once there are some rules implemented at the workplace.</p><ul><li>There must be some &#34;development process&#34; implemented, specifying things like:<ul><li>how requirements will be written, to which level of detail;</li><li>how the source code must be written;</li><li>how everything will be verified and tested.</li></ul></li><li>regarding the &#34;how the source code must be written&#34;, there must be a coding guideline about it implemented in the company.</li></ul><p>There are many coding guidelines available, some of them freely available, some for some fee. You will find many of them on the internet. Study them and see what fits best to your environment.</p><p>A good starting point is the <a href="https://www.misra.org.uk/Buyonline/tabid/58/Default.aspx" rel="nofollow noreferrer"><strong>MISRA</strong></a> coding guidelines. They were created to be used by the automotive industry, so they tend to be very strict. However, they will give a good insight about how to think.</p><p>You will also find interesting information (not necessarily regarding global variables) on the <a href="https://www.gimpel.com/html/pcl.htm" rel="nofollow noreferrer"><strong>PC LINT site</strong></a>. I sometimes &#34;relax&#34; reading the <a href="https://www.gimpel.com/html/bugs.htm" rel="nofollow noreferrer"><strong>&#34;Bug of the month&#34; section</strong></a>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-are-utility-classes-with-nothing-but-static-members-an-anti-pattern-in-c/'>C++ &#8211; Are utility classes with nothing but static members an anti-pattern in C++</a></li><li class="list-group-item"><a href='../java-seeing-so-many-instantiable-classes-without-state/'>Java &#8211;  seeing so many instantiable classes without state</a></li><li class="list-group-item"><a href='../object-oriented-how-to-deal-with-global-variables-in-existing-legacy-code-or-whats-better-global-hell-or-pattern-hell/'>Object-oriented &#8211; How to deal with global variables in existing legacy code (or, what&#8217;s better, global hell or pattern hell)</a></li><li class="list-group-item"><a href='../c-metaprogramming-with-a-compiler-api-rather-than-with-c-features/'>C++: Metaprogramming with a compiler API rather than with C++ features</a></li><li class="list-group-item"><a href='../c-early-destruction-of-objects-in-c/'>C++ &#8211; Early destruction of objects in c++</a></li><li class="list-group-item"><a href='../c-best-practice-for-saving-state-in-a-c-shared-object/'>C++ &#8211; Best Practice for saving state in a C++ shared object</a></li><li class="list-group-item"><a href='../why-does-llvm-have-an-assembly-like-ir-rather-than-a-tree-like-ir-or-why-do-projects-target-llvm-ir-instead-of-clangs-ast/'>Why does LLVM have an assembly-like IR rather than a tree-like IR? Or: why do projects target LLVM IR instead of clang&#8217;s AST</a></li><li class="list-group-item"><a href='../rely-on-compiler-to-remove-unused-code-or-ifdef-out/'>Rely on compiler to remove unused code or #ifdef out</a></li><li class="list-group-item"><a href='../c-how-to-represent-functions-and-global-variables-in-uml/'>C++ &#8211; how to represent functions and global variables in UML</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>