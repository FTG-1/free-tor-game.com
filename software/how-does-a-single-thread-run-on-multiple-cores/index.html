<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How does a single thread run on multiple cores &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063552 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063552" class="post-1063552 software type-software status-publish hentry category-software tag-cpu tag-hardware tag-multi-core tag-multithreading"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How does a single thread run on multiple cores</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">cpu</span><span class="mr-2 badge badge-info">hardware</span><span class="mr-2 badge badge-warning">multi-core</span><span class="mr-2 badge badge-primary">multithreading</span></p><div class="entry-content"><p>I am trying to understand, at a high-level, how single threads run across multiple cores. Below is my best understanding. I do not believe it is correct though.</p><p>Based on my reading of <a href="https://en.wikipedia.org/wiki/Hyper-threading#/media/File:Hyper-threaded_CPU.png" rel="noreferrer">Hyper-threading</a>, it seems the OS organizes<br /> the instructions of all threads in such a way that they are not<br /> waiting on each other.  Then the front-end of the CPU further<br /> organizes those instructions by distributing one thread to each core,<br /> and distributes independent instructions from each thread among any<br /> open cycles.</p><p>So if there is only a single thread, then the OS will not do any optimization.  However, the front-end of the CPU will distribute independent instruction sets among each core.</p><p>According to <a href="https://stackoverflow.com/a/15936270">https://stackoverflow.com/a/15936270</a>, a specific programming language may create more or less threads, but it is irrelevant when determining what to do with those threads.  The OS and CPU handle this, so this happens regardless of the programming language used.</p><p><a href="../../../i.stack.imgur.com/GtRrw.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/GtRrw.png" alt="enter image description here"/></a></p><p>Just to clarify, I am asking about a single thread run across multiple cores, not about running multiple threads on a single core.</p><p>What is wrong with my summary?  Where and how is a thread&#39;s instructions split up among multiple cores?  Does the programming language matter?  I know this is a broad subject; I am hoping for a high-level understanding of it.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The operating system offers <a href="https://en.wikipedia.org/wiki/Preemption_(computing)#Time_slice" rel="noreferrer"><em>time slice</em></a>s of CPU to threads that are eligible to run.</p><p>If there is only one core, then the operating system schedules the most eligible thread to run on that core for a time slice.  After a time slice is completed, or when the running thread blocks on IO, or when the processor is interrupted by external events, the operating system reevaluates what thread to run next (and it could choose the same thread again or a different one).</p><p>Eligibility to run consists of variations on fairness and priority and readiness, and by this method various threads get time slices, some more than others.</p><p>If there are multiple cores, N, then the operating system schedules the most eligible N threads to run on the cores.</p><p><a href="https://en.wikipedia.org/wiki/Processor_affinity" rel="noreferrer"><em>Processor Affinity</em></a> is an efficiency consideration.  Each time a CPU runs a different thread than before, it tends to slow down a bit because its cache is warm for the previous thread, but cold to the new one.  Thus, running the same thread on the same processor over numerous time slices is an efficiency advantage.</p><p>However, the operating system is free to offer one thread time-slices on different CPUs, and it could rotate through all the CPUs on different time slices.  It cannot,  however, as <a href="https://softwareengineering.stackexchange.com/a/349974/">@gnasher729 says</a>, run one thread on multiple CPUs simultaneously.</p><p>Hyperthreading is a method in hardware by which a single <strong><em>enhanced</em></strong> CPU core can support execution of two or more <em>different</em> threads simultaneously.  (Such a CPU can offer additional threads at lower cost in silicon real-estate than additional full cores.) This enhanced CPU core needs to support additional state for the other threads, such as CPU register values, and also has coordination state &amp; behavior that enables sharing of functional units within that CPU without conflating the threads.</p><p>Hyperthreading, while technically challenging from a hardware perspective, from the programmer&#39;s perspective, the execution model is merely that of additional CPU cores rather than anything more complex.  So, the operating system sees additional CPU cores, though there are some new processor affinity issues as several hyperthreaded threads are sharing one CPU core&#39;s cache architecture.</p><hr/><p>We might naively think that two threads running on a hyperthreadded core each run half as fast as they would each with their own full core.  But this is not necessarily the case, since a single thread&#39;s execution is full of slack cycles, and some amount of them can be used by the other hyperthreaded thread.  Further, even during non-slack cycles, one thread may be using different functional units  than the other so simultaneous execution can occur.  The enhanced CPU for hyperthreading may have a few more of certain heavily used functional units specially to support that.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../parallelism-implies-concurrency-but-not-the-other-way-round-right/'>Parallelism implies concurrency but not the other way round right</a></li><li class="list-group-item"><a href='../how-to-program-thread-allocation-on-multicore-processors/'>How to program thread allocation on multicore processors</a></li><li class="list-group-item"><a href='../why-would-a-program-require-a-specific-minimum-number-of-cpu-cores/'>Why would a program require a specific minimum number of CPU cores</a></li><li class="list-group-item"><a href='../java-performance-of-sharing-single-object-with-multiple-threads-in-java/'>Java &#8211; Performance of sharing single object with multiple threads in Java</a></li><li class="list-group-item"><a href='../thread-synchronization-for-multiple-threads-accessing-a-message-stream/'>Thread synchronization for multiple threads accessing a message stream</a></li><li class="list-group-item"><a href='../c-one-process-using-stdthread-2-physical-cpus-4-cores-each-parallelism-level/'>C++ &#8211; One process using std::thread, 2 physical CPUs, 4 cores each, parallelism level</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>