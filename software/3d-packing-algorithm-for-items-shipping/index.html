<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>3d Packing algorithm for item&#8217;s shipping &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065468 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065468" class="post-1065468 software type-software status-publish hentry category-software tag-algorithms tag-heuristics"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">3d Packing algorithm for item&#8217;s shipping</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">algorithms</span><span class="mr-2 badge badge-info">heuristics</span></p><div class="entry-content"><p>I&#39;ve received a task to build a shipping estimative that suggests the best accomodation of goods on as few boxes as possible:</p><ol><li><p>There is a finite set of known retangular box sizes</p></li><li><p>There are many arbitrary retangular item to be packed inside boxes</p></li><li><p>The fewer boxes should be used the best. Because shipping two boxes 1x1x1 is way more expensive than one box 1x2x1. This should be the priority here.</p></li><li><p>It should also be optimized to use the smaller boxes as possible, as a second level priority. (eg.: if presented with a choice between one bigger box and two small, it should choose the bigger box)</p></li><li><p>Items can be rotated to fit the box, but the rotation have to be limited to increments of 45째 at a minimum (in my researches it seems that some configurations allow for a 45 degrees rotation to better fit retangular boxes inside a bigger retangular box), being 90째 rotations the standard to be taken.</p></li><li><p>Boxes have a weight limit and items have arbitrary weights (eg.: an item that is size is 1x1x1 can be havier than other 2x2x2 item)</p></li></ol><p>I&#39;ve researched a bit and found some abstracted algorithms on bin packing and the knapsack problem and came with the following somewhat bruteforce variation, similar to the best fit algorithm:</p><blockquote><ol><li><p>Sort the items in decrescent volume order (bigger first) on an &#34;items to pack&#34; list</p></li><li><p>For each item on this list:</p><ol><li><p>Choose the smaller box that is on the &#34;used boxes&#34; list and has enough remaining volume and weight limit to fit the item (I will use fit here to mean fitting the dimensions and weight)</p></li><li><p>If there is not such box, create a new box from the know set of possible box sizes that is the smallest size that can fit the item&#39;s dimensions and weight and add it to the list of &#34;used boxes&#34;.</p></li><li><p>If a box fits the item (using the fitting function bellow), add it to the list of &#34;this box&#39;s items&#34; and remove it from the &#34;items to fit&#34; list, marking it&#39;s relative 3d position inside the box.</p></li><li><p>Repeat from 2.1 until there is no item to be fitted on the &#34;items to pack&#34; list.</p></li></ol></li></ol></blockquote><p>The fitting check function used on step 2 above:</p><blockquote><ol><li><p>Check if the remaining volume of the box fits the volume of the item. If not, return false.</p></li><li><p>Check if the sum of &#34;box&#39;s items&#34; weight plus the current item weight is less or equal to the box weight limit. If not, return false.</p></li><li><p>Check the &#34;box&#39;s items&#34; list to choose the first box coordinate that has the smallest Y component and that has enough space for the item&#39;s width, depth and height, considering the other items placed as unavailable space.</p></li><li><p>If the item doesn&#39;t fit at it&#39;s current orientation rotate it on one of the 6 possible rotations, not assuming 45째 rotations for simplicity. (Rotations that result in sizes that where already tested can be skipped. Eg.: rotating a box 180째 gives the same dimmensions as the original position because all boxes and items have the same size for opposite faces and so can be skipped.)</p></li><li><p>If the item hasn&#39;t been rotated on all the possible ways back to its original orientation, try again from step 3.</p></li><li><p>If all rotations where tried and no fit was found, consider the current coordinate as unavailable space.</p></li><li><p>If there is not avaliable space to check, return false. Else, try again from step 3.</p></li></ol></blockquote><p>I want to know if there can be a best solution to my problem, given the presented constraints.</p><p>This seems to work on theory but I&#39;ve not tried it on code. I wish to know if I&#39;m going in the right direction or there are better, performant ways of doing this.</p><p>References would be great.</p><p><strong>Edit:</strong></p><p>I&#39;ve found some interesting 3rd party API that do what I want, but this will have to be disconnected, so I will not have access to these.</p><p>Some examples are:</p><ul><li><a href="http://v2.3dbinpacking.com/demo/main" rel="noreferrer">http://v2.3dbinpacking.com/demo/main</a></li><li><a href="http://www.packit4me.com/api" rel="noreferrer">http://www.packit4me.com/api</a></li></ul><p><strong>Edit 2:</strong></p><p>A real world example of problem to solve would be:</p><ul><li>I have 4 box sizes WxHxD: 10x12x18, 12x16x24, 16x20x30, 24x32x40</li><li>I have an order of 4 items, being 1 of size 6x8x10, 2x 22x14x30 and 1x 22x4x20</li></ul><p>How do I fit this items into any amount of boxes of one or more sizes using the fewer boxes as possible, using the smallest boxes possible and leaving less free space as possible?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Bin packing is very computationally difficult. Think of half of the problem: you want to pack product in shipping boxes with no wastage in the box. An optimal solution for that would require going through all possible subsets and all possible 3d arrangements of the product that needs to ship in one truck. I&#39;ll give you the optimal solution for that because I have a friend who does six impossible things before breakfast.</p><p>Now you just have to get all the boxes on the truck with no wastage. My friend does his second impossible thing and gives you the solution. Unfortunately, with the box sizes you selected above, there is empty space in the truck which could be reduced if you&#39;d chosen different (either larger or smaller) boxes in the first task. If you change the size of one box, at best you&#39;ll have to re-pack the truck; at worst, you may have to repack all of the boxes which is just as hard as the problem we started with. And, as with the first stage, you&#39;d have to try all possible 3d arrangements.</p><p>I found Skiena&#39;s The <a href="http://www.algorist.com/" rel="nofollow">Algorithm Design Manual</a> to be helpful for thinking about what class of algorithms suit which sorts of problems, but I mostly learned that good solutions for even mundane problems blow up in you face with computational difficulty. Most of what you are needing fit into the class of <a href="https://en.wikipedia.org/wiki/Bin_packing_problem" rel="nofollow">bin-packing problems</a> and that article is a good jumping off point. It is worth noting that some of the best algorithms for this are commercial products because this task pops up everywhere in logistics (what&#39;s the smallest number of train cars can I get my goods into? and such). There is considerable money to be made if the right heuristics can save a manufacturer 100 train cars a month.</p><p>Unfortunately, the literature on optimizing heuristics isn&#39;t nearly as large as for algorithms. If you try to go it alone, I guarantee that you&#39;ll be dreaming about moving rectangular prisms around by your second month. I had a cutting-stock problem that if I had to do again I&#39;d probably farm out to the experts (or their propriety software).</p><p>Thanks to @JTrana for the fine expansion of my comment.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../bloom-filters-or-similar-but-with-no-false-positive/'>Bloom filters or similar, but with no false positive</a></li><li class="list-group-item"><a href='../python-rectangle-packing/'>Python rectangle packing</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>