<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; How should I test randomness &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063225 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063225" class="post-1063225 software type-software status-publish hentry category-software tag-random tag-testing tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; How should I test randomness</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">random</span><span class="mr-2 badge badge-info">testing</span><span class="mr-2 badge badge-warning">unit testing</span></p><div class="entry-content"><p>Consider a method to randomly shuffle elements in an array. How would you write a simple yet robust unit test to make sure that this is working?</p><p>I&#39;ve come up with two ideas, both of which have noticeable flaws:</p><ul><li>Shuffle the array, then make sure its order differs from before. This sounds good, but fails if the shuffle happens to shuffle in the same order. (Improbable, but possible.)</li><li>Shuffle the array with a constant seed, and check it against the predetermined output. This relies on the random function always returning the same values given the same seed. However, this is <em>sometimes</em> an <a href="http://msdn.microsoft.com/en-us/library/system.random.aspx">invalid assumption</a>.</li></ul><p>Consider a second function which simulates dice rolls and returns a random number. How would you test this function? How would you test that the function&#8230;</p><ul><li>never returns a number outside the given bounds?</li><li>returns numbers in a valid distribution? (Uniform for one die, normal for large numbers of dice.)</li></ul><p>I&#39;m looking for answers offering insight into testing not only these examples but random elements of code in general. Are unit tests even the right solution here? If not, what sort of tests are?</p><hr/><p>Just to ease everyone&#39;s mind I&#39;m <em>not</em> writing my own random number generator.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I don&#39;t think unit tests are the right tool for testing randomness.  A unit test should call a method and test the returned value (or object state) against an expected value.  The problem with testing randomness is that there isn&#39;t an expected value for most of the things you&#39;d like to test.  You can test with a given seed, but that only tests <em>repeatability</em>.  It doesn&#39;t give you any way to measure <em>how random</em> the distribution is, or if it&#39;s even random at all.</p><p>Fortunately, there are a lot of statistical tests you can run, such as the <a href="https://en.wikipedia.org/wiki/Diehard_tests" rel="noreferrer">Diehard Battery of Tests of Randomness</a>.  See also:</p><ol><li><p><a href="https://stackoverflow.com/q/186619/1288">How to unit test a pseudo random number generator?</a></p><ul><li><a href="https://stackoverflow.com/a/186632/1288">Steve Jessop</a> recommends that you find a tested implementation of the same RNG algorithm that you&#39;re using and compare its output with selected seeds against your own implementation.</li><li><a href="https://stackoverflow.com/a/186627/1288">Greg Hewgill</a> recommends the <a href="http://fourmilab.ch/random/" rel="noreferrer">ENT</a> suite of statistical tests.</li><li><a href="https://stackoverflow.com/a/215478/1288">John D. Cook</a> refers readers to his CodeProject article <a href="http://www.codeproject.com/Articles/25172/Simple-Random-Number-Generation" rel="noreferrer">Simple Random Number Generation</a>, which includes an implementation of the Kolmogorov-Smirnov test mentioned in Donald Knuth&#39;s volume 2, Seminumerical Algorithms.</li><li>Several people recommend testing that the distribution of the numbers generated is uniform, the Chi-squared test, and testing that the mean and standard deviation are within the expected range.  (Note that testing the distribution alone is not enough.  [1,2,3,4,5,6,7,8] is a uniform distribution, but it&#39;s certainly not random.)</li></ul></li><li><p><a href="https://stackoverflow.com/q/311807/1288">Unit Testing with functions that return random results</a></p><ul><li><a href="https://stackoverflow.com/a/311829/1288">Brian Genisio</a> points out that mocking your RNG is one option for making your tests repeatable, and provides C# sample code.</li><li>Again, several more people point to using fixed seed values for repeatability and simple tests for uniform distribution, Chi-squared, etc.</li></ul></li><li><p><a href="http://c2.com/cgi/wiki?UnitTestingRandomness" rel="noreferrer">Unit Testing Randomness</a> is a wiki article that talks about many of the challenges already touched on when trying to test that which is, by its nature, not repeatable.  One interesting bit that I gleaned from it was the following:</p><blockquote><p>I&#39;ve seen winzip used as a tool to measure the randomness of a file of values before (obviously, the smaller it can compress the file the less random it is).</p></blockquote></li></ol></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-of-inherently-random-non-deterministic-algorithms/'>Unit-testing of inherently random/non-deterministic algorithms</a></li><li class="list-group-item"><a href='../how-do-functional-languages-handle-random-numbers/'>How do functional languages handle random numbers</a></li><li class="list-group-item"><a href='../unit-testing-ny-value-in-writing-a-unit-test-that-is-a-subset-of-another-test/'>Unit-testing &#8211; ny value in writing a unit test that is a subset of another test</a></li><li class="list-group-item"><a href='../java-testing-a-function-that-uses-random-number-generator/'>Java &#8211; Testing a function that uses random number generator</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>