<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Doesn&#8217;t repository pattern in clean architecture violate Dependency inversion principle &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069934 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069934" class="post-1069934 software type-software status-publish hentry category-software tag-clean-code tag-clean-architecture tag-design-patterns tag-object-oriented tag-object-oriented-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Doesn&#8217;t repository pattern in clean architecture violate Dependency inversion principle</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">clean code</span><span class="mr-2 badge badge-info">clean-architecture</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">object-oriented</span><span class="mr-2 badge badge-danger">object-oriented-design</span></p><div class="entry-content"><p>From what I have read and seen clean architecture assumes that you have some entities which know nothing about persistence though at the same layer as they reside there might be an interface which has a purpose to be a contract on how the entity should be read/updated/deleted.</p><pre class="lang-cs prettyprint-override"><code>// project Core
public class CarModel
{
    public string Name { get; set; }

    public void SomeImportantBehavior {}
}

public interface ICarModelRepository 
{
    CarModel FindByName(string name);
    CarModel Add(CarModel carModel);
}
</code></pre><p>Meanwhile another layer will hold the implementation of the interface:</p><pre class="lang-cs prettyprint-override"><code>// project Infrastructure or Persistence
public class CarModelRepository : ICarModelRepository
{
    public CarModel FindByName(string name)
    {
        return new CarModel { Name = name }; // the implementation is not really important here
    }

    public CarModel Add(CarModel carModel) {
        // somehow persist it here
        return carModel;
    }
}
</code></pre><p>So I&#39;ve got a question: doesn&#39;t repository implementation violate the DiP principle? Since it not only depends on abstraction but also on concrete implementation (<code>CarModel</code> in this case)?</p><p>Another example of this is <a href="https://github.com/ardalis/CleanArchitecture" rel="noreferrer">here</a>.</p><p>P.S. CarModel is a domain model with behavior</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The central idea of the DIP is to eliminate any direct dependencies between higher-level modules and lower-level modules. To achieve this, an abstract, stable interface is placed between them, upon which both layers depend instead.</p><p>In the repository pattern, the interface usually references the entity for which the repository is responsible. It therefore makes the lower level implementation (<code>CarModelRepository</code>) depend on a higher-level module entity (<code>CarModel</code>).</p><p>Replacing the concrete <code>CarModel</code> with an <code>ICarModel</code> interface does not really solve this problem. After all, the <code>CarModel</code> instance that we obtain through the repository implements various business rules and should therefore live in the business layer.</p><p>We could increase the separation between the business layer and the repository implementation. For example, we could provide a <code>CarModelFactory</code> (implemented in the business layer) that implements <code>ICarModelFactory</code> (part of the shared interface) to the repository. Alternatively, we might make the repository deal with <code>CarData</code> value objects rather than actual <code>CarModel</code> entities - and make the business layer instantiate the entities itself.</p><p>In most cases, this doesn&#39;t seem fruitful. Attempting to find an abstract interface between the two modules that is more stable than <code>CarModel</code> itself is almost always going to be futile. That&#39;s because, fundamentally, <code>CarModelRepository</code> is not intended to be a generic utility class. It&#39;s purpose is essentially to glue your specific domain model to the database.</p><p>As a result, trying to separate it from the domain model (or the database) doesn&#39;t really produce anything useful. In other words, the repository can be seen as an adapter between the domain model and the database driver - and therefore must be aware of both.</p><p>I should note that Martin&#39;s primary focus when introducing the DIP was to separate the higher level module from lower level modules, which the repository pattern achieves.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-open-close-principle-ocp-vs-dependency-inversion-principle-dip/'>Object-oriented &#8211; Open Close Principle (OCP) vs Dependency Inversion Principle (DIP)</a></li><li class="list-group-item"><a href='../design-how-to-implement-the-repository-pattern-for-an-app-that-will-change-its-database-from-sql-to-nosql-on-in-couple-of-years/'>Design &#8211; How to implement the repository pattern for an app that will change its database from sql to nosql on in couple of years</a></li><li class="list-group-item"><a href='../whats-the-difference-between-an-implementation-detail-and-a-technical-concern/'>What&#8217;s the difference between an implementation detail and a technical concern</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-use-case-containing-the-presenter-or-returning-data/'>Architecture &#8211; Clean Architecture: Use case containing the presenter or returning data</a></li><li class="list-group-item"><a href='../clean-architecture-and-repository-pattern/'>Clean architecture and Repository pattern</a></li><li class="list-group-item"><a href='../c-implementing-clean-architecture/'>C# &#8211; Implementing clean architecture</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>