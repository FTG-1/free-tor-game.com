<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211;  the correct reusable architecture using Entity Framework for common database tables and services &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081193 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081193" class="post-1081193 software type-software status-publish hentry category-software tag-c tag-code-reuse tag-database tag-enterprise-architecture tag-entity-framework"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211;  the correct reusable architecture using Entity Framework for common database tables and services</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">code-reuse</span><span class="mr-2 badge badge-warning">database</span><span class="mr-2 badge badge-primary">enterprise-architecture</span><span class="mr-2 badge badge-danger">entity-framework</span></p><div class="entry-content"><p><strong>Context</strong></p><p>I have a line of business application &#34;MyApp&#34; in C# using EF. Layers are separated as</p><ul><li>MyResusableLib.DataAccess // Class Lib: EF based utils, extension methods,</li><li>MyApp.DataAccess // Class Lib: EF edmx, generated Model classes</li><li>MyApp.DataServices // Class Lib: Depends on Model classes in MyApp.DataAccess <em>(Note: Services are just POCOs and has nothing to do with a web API. For example PaymentService.Storno(&#8230;))</em></li><li>etc</li></ul><p>I discovered, that some universal tables (at least five) will be common in all my future line of business applications. So implemented high level services should not be copied over MyApp1.DataServices to MyApp2.DataServices, instead  should be placed a newly created MyReusableLib.DataServices class lib</p><p><strong>Problem:</strong></p><p>The EF context and model classes will be in future created MyAppX.DataAccess. However MyReusableLib.DataServices depends on those model classes.</p><p><strong>Question:</strong></p><p>What is the best architecture to overcome the problem, and enjoy a MyReusableLib.DataServices with its high level services over the persistent storage?</p><p><strong>Proposed Solution:</strong></p><p>Only one solution comes in my mind, but I am not sure. Especially I do not know if there are drawbacks, and also do not know if there is a better practice. One for sure: I would like to end with a DRY solution.</p><ul><li>I will have two EF edmxs and contexts (pointing to the very same database when connection strings will be configured in my future MyAppX.)</li><li>The first EF edmx context will be defined in MyReusableLib.DataServices and will contain the five reusable tables/entites.The implemented services (also in the assembly) can use those model classes.</li><li>The second EF edmx context will be defined in my future MyAppX. Will contain all specific tables and will not contain the reusable tables.</li><li>The physical database for MyAppX will contain both the reusable tables and the specific tables.</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><ul><li><p>MyModels - class lib. No dependencies</p></li><li><p>IMyDataRepository - interface. Depends on MyModels</p></li><li><p>MyDataRepository_EfSql - depends on MyModels and IMyDataRepository<br/> and Entity framework</p><ul><li><p>private EF Context private EF Models</p></li><li><p>private EF Model to Domain Model mapping</p></li></ul></li><li><p>MyApplication - depends on all three. But the repository is loosely<br/> coupled via dependency injection</p></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-proper-efficient-structure-for-an-entity-layer/'>C# &#8211; Proper &#038; Efficient Structure for an entity layer</a></li><li class="list-group-item"><a href='../c-dependency-injection-with-n-tier-entity-framework-solution/'>C# &#8211; Dependency injection with n-tier Entity Framework solution</a></li><li class="list-group-item"><a href='../c-layered-architecture-using-entity-framework-with-different-class-libraries/'>C# &#8211; Layered architecture using Entity Framework with different class libraries</a></li><li class="list-group-item"><a href='../object-oriented-whats-a-good-approach-to-working-with-multiple-databases/'>Object-oriented &#8211; what&#8217;s a good approach to working with multiple databases</a></li><li class="list-group-item"><a href='../project-architecture-for-application-with-dynamic-database/'>Project architecture for application with dynamic database</a></li><li class="list-group-item"><a href='../c-multiple-apis-v-one-api/'>C# &#8211; Multiple APIs v One API</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>