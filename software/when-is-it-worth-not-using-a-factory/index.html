<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>When is it worth NOT using a Factory &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1074159 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1074159" class="post-1074159 software type-software status-publish hentry category-software tag-design-patterns tag-factory-method"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">When is it worth NOT using a Factory</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span><span class="mr-2 badge badge-info">factory-method</span></p><div class="entry-content"><p>I&#39;m employing TDD quite a bit these days and really enjoying myself &#8211; everything seems to flow better and be naturally better constructed and organized. However, while writing a bit of IO code, utilizing <code>System.IO.Stream</code>s, and I was wondering &#8211; when is it ever worth not using a factory? Because in <code>Stream</code>s case, it certainly seems better to not use a factory.</p><p>Generally, for more complex types that I have defined, such as a class that controls the authentication of something and interfaces with a database, you would probably use a dependency injection container and have this resolved at runtime without ever needing to <em>actually</em> create one.</p><p>However, in some circumstances, when you need to create a lot of these instances, you would create a Factory to construct that type &#8211; such as:</p><pre><code>class Foo
  Foo(Bar bar, Foobar foobar, Fuzz fuzz)
  ...
end
</code></pre><p>Here, because you don&#39;t want to expose how to directly create this object to the clients that need it, you expose a Factory that will create them and inject that into the client instead. This has the benefit of allowing you to replace the factory at any time you want with something else and is generally used for creating instances of types which have derived types.</p><pre><code>class FooFactory
   void Create(Bar, Foobar, Fuzz)
end
</code></pre><p>However, back to my <code>Stream</code> point &#8211; would it even be worth creating a Factory for a decorator around a Stream? For example, in my project I have <code>BinaryDataStream</code>, which reads my data from a Streeam. The BinaryData is in a custom format, and takes a Stream argument in it&#39;s constructor. Using <code>new</code> seems to violate everything I know that I&#39;ve learned since I started using TDD, <strong>because I am giving the dependent in which it needs to know explicitly about how to get it&#39;s collaborator</strong> However a factory seems overkill.</p><p>Thoughts?</p><p>EDIT: I think I need to clarify. I don&#39;t mean avoiding new() all the time, as obviously it has it&#39;s use in tying up dependencies and the like. <strong>however</strong>, I meant in the following situation (copy-pasta from comments):</p><blockquote><p>What I meant was that I have been told it is intrinsically evil to<br /> use the new() operator to a collaborator from inside the type that<br /> uses the collaborator, and that it is better to either a) pass an<br /> injected type or b) pass a factory (if you need to create an unknown<br /> number of those types). By using new() inside the collaborator you<br /> tie how to create that object and where to create it directly to the<br /> thing that requires it, and that it is better to inject a preconfigured<br /> instance into the constructor if you need one instance of it, or inject<br /> a factory into the constructor if you need to create multiple/undetermined<br /> number of instances</p></blockquote></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>Here, because you don&#39;t want to expose how to directly create this object to the clients that need it, you expose a Factory that will create them and inject that into the client instead.</p></blockquote><ol><li>If clients know the object exists, it&#39;s usually fine for them to know how to make it. If you have an <em>interface</em> then maybe you need some factory to make the concrete instance, but for TDD you&#39;re just going to mock it anyways.</li><li>Your example factory is just a passthru. Your client already knows everything needed to build the object, so replacing the factory is just as hard as replacing the constructor call.</li></ol><blockquote><p>When is it worth NOT using a Factory?</p></blockquote><p>This is the wrong mode of thought.</p><p>You should default to not using factories. Factories are only necessary when you need to abstract away object <strong>creation</strong>. Since you should (in general) limit the creation of objects that require such abstraction, you should use factories sparingly. Instead, most of your objects will just take some interface and not care where it came from.</p><p>Only add complexity when it is necessary.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-static-factory-vs-factory-as-a-singleton/'>Java &#8211; Static factory vs factory as a singleton</a></li><li class="list-group-item"><a href='../one-subclass-instead-of-composite-when-using-the-factory-method-design-pattern/'>One subclass instead of composite when using the Factory Method design pattern</a></li><li class="list-group-item"><a href='../object-oriented-using-a-simple-static-factory-vs-instantiating-directly-new-thing-vs-factory-creatething-whats-the-benefit/'>Object-oriented &#8211; Using a Simple/Static Factory vs. instantiating directly: new Thing() vs. factory.createThing() &#8211; what&#8217;s the benefit</a></li><li class="list-group-item"><a href='../client-vs-creator-in-factory-method-and-abstract-factory-patterns/'>Client vs Creator in Factory Method and Abstract Factory patterns</a></li><li class="list-group-item"><a href='../object-oriented-avoiding-constructors-with-many-arguments/'>Object-oriented &#8211; Avoiding constructors with many arguments</a></li><li class="list-group-item"><a href='../c-am-i-using-the-factory-method-design-pattern-correctly-or-which-creational-pattern-should-i-use/'>C# &#8211; Am I using the factory method design pattern correctly, or which creational pattern should I use</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>