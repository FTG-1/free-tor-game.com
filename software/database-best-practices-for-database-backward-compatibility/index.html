<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; Best practices for database backward compatibility &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078036 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078036" class="post-1078036 software type-software status-publish hentry category-software tag-architectural-patterns tag-backward-compatibility tag-database tag-design-patterns tag-version-control"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; Best practices for database backward compatibility</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">architectural-patterns</span><span class="mr-2 badge badge-info">backward compatibility</span><span class="mr-2 badge badge-warning">database</span><span class="mr-2 badge badge-primary">design-patterns</span><span class="mr-2 badge badge-danger">version control</span></p><div class="entry-content"><p>I am working on an app which has multiple versions deployed in the market. Different versions have modified databases and databases are to be synced between local storage and server storage by signed users. The problem is a user can have different versions of the app installed in different device and might want to keep database synced. Now due to different database versions (different schemes, i.e. altered columns or data types) its hard to get synced for same account. I wonder if there is any well known pattern to resolve this kind of issues. I believe this is a very common problem and must have some better approach to handle.</p><p>So far i am thinking to make a wrapper to convert one db version compliant data (received from server) to another db version compliant data (saved to local storage).</p><p><strong>Edit:</strong><br /> In response to @RobertHarveys comment, lets assume each database version has different scheme. For example new colums may be added in one version and old colum may be removed in later version. Moreover data type can be changed in other versions.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h1>Current Scenario:</h1><p><strong>DEVICE1</strong>:</p><ul><li>col1</li><li>col2</li><li>col3</li></ul><p><strong>DEVICE2</strong>:</p><ul><li>col1</li><li>col2</li><li>col4</li><li>col5</li></ul><p><strong>DEVICE3</strong>:</p><ul><li>col1</li><li>col3</li><li>col5</li></ul><p>And each device is connected to your &#34;server&#34;, i.e. there is a copy of the data on your side.</p><h1>Syncing:</h1><p>In order to synchronize in a meaningful way, the server component has to have a superset of all columns</p><p><strong>SERVER</strong>:</p><ul><li><p>col1</p></li><li><p>col2</p></li><li><p>col3</p></li><li><p>col4</p></li><li><p>col5</p></li></ul><p>Each device queries for a current representation of the server&#39;s state and update it&#39;s columns (e.g. Device2 picks 1,2,4,5) accordingly.</p><p>This should do the trick.</p><hr/><h1>Edit for answering questions from the comment section</h1><blockquote><p>what would be if the data type (of a column) is changed in one version?</p></blockquote><p>Depends on what you mean by <code>datatype is changed</code>? Say, you have in <code>V1</code> chosen <code>String</code> for <code>DOB</code> and in all other versions, you have a <code>Timestamp</code> there should be no problem: the update has to deal with a marshalled form and the process of unmarshalling should do the necessary conversions (writing a string into the DB or converting a string to a <code>Timestamp</code>).</p><p><strong>In general</strong>:
There should be one canonical form (&#34;the truth&#34;) on the server and each application should do the transposition to their needs.</p><blockquote><p>Also how do we deal with the naming for the columns (for example, Person (name, age, dob)) ? Do you think I should name like Person(&#39;name_v1, age_v1, dob_v1&#39;), Person(&#39;name_v2, height_v2, age_v2, dob_v2&#39;) etc. something like that?</p></blockquote><p>From what was written above should be clear: There is no need for special naming of different column_versions. Problematic: if you have some kind of length restrictions: the shortest one wins.</p><hr/><p>From what I read so far, I would recommend, seeing this only as a temporary solution and strongly recommend to motivate (via money, features, money&amp;features, whatever) people to upgrade to a newer version of your application. You and your customer will have less headaches.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-migration-upgrade-schema-deployed-on-client-machines/'>Database migration: upgrade schema deployed on client machines</a></li><li class="list-group-item"><a href='../net-framework-backward-compatibility/'>.NET framework backward compatibility</a></li><li class="list-group-item"><a href='../database-implementation-details-of-database-synchronisation-api/'>Database &#8211; Implementation details of database synchronisation API</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>