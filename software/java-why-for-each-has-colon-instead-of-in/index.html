<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Why for-each has colon instead of &#8220;in&#8221; &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083496 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083496" class="post-1083496 software type-software status-publish hentry category-software tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Why for-each has colon instead of &#8220;in&#8221;</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span></p><div class="entry-content"><p>From Java 5 language <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html" rel="nofollow noreferrer">guide</a>:</p><blockquote><p>When you see the colon (:) read it as &#34;in&#34;.</p></blockquote><p>Why not use <code>in</code> in the first place then?</p><p>This has been bugging me for years.<br /> Because it&#39;s inconsistent with the rest of the language.<br /> For example, in Java there are <code>implements</code>, <code>extends</code>, <code>super</code> for relations between types instead of symbols like in C++, Scala or Ruby.</p><p>In Java colon used in 5 <a href="https://stackoverflow.com/questions/2399590/java-what-does-the-colon-operator-do">contexts</a>.<br /> Three of which are inherited from C.<br /> And other two was endorsed by Joshua Bloch.<br /> At least, that was he sais during <a href="https://www.parleys.com/tutorial/the-closures-controversy" rel="nofollow noreferrer">&#34;The closures controversy&#34;</a> talk.<br /> This comes up when he criticises usage of a colon for mapping as inconsistent with for-each semantics.<br /> Which to me seems odd because it&#39;s the for-each abused expected patterns.<br /> Like <code>list_name/category: elements</code> or <code>laberl/term: meaning</code>.</p><p>I&#39;ve snooped around jcp and jsr, but did not found no sign of mailing list.<br /> No discussions on this matter found by google.<br /> Only newbies confused by the meaning of colon in <code>for</code>.</p><hr/><p>Main arguments against <code>in</code> provided so far:</p><ul><li>requires new keyword; and</li><li>complicates lexing.</li></ul><p>Let&#39;s look at relevant <a href="https://github.com/antlr/grammars-v4/blob/master/java/Java.g4" rel="nofollow noreferrer">grammar</a> definitions:</p><pre>statement
    :   &#39;for&#39; &#39;(&#39; forControl &#39;)&#39; statement
    |   ...
    ;

forControl
    :   enhancedForControl
    |   forInit? &#39;;&#39; expression? &#39;;&#39; forUpdate?
    ;

enhancedForControl
    :   variableModifier* type variableDeclaratorId &#39;:&#39; expression
    ;
</pre><p>Change from <code>:</code> to <code>in</code> don&#39;t bring additional complexity or requires new keyword.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Normal parsers as they are generally taught have a lexer stage before the parser touches the input. The lexer (also “scanner” or “tokenizer”) chops the input into small tokens that are annotated with a type. This allows the main parser to use tokens as terminal elements rather than having to treat each character as a terminal, which leads to noticeable efficiency gains. In particular, the lexer can also remove all comments and white space. However, a separate tokenizer phase means that keywords cannot also be used as identifiers (unless the language supports <a href="https://en.wikipedia.org/wiki/Stropping_(syntax)">stropping</a> which has somewhat fallen out of favour, or prefixes all identifiers with a sigil like <code>$foo</code>).</p><p>Why? Let&#39;s assume we have a simple tokenizer that understands the following tokens:</p><pre><code>FOR = &#39;for&#39;
LPAREN = &#39;(&#39;
RPAREN = &#39;)&#39;
IN = &#39;in&#39;
IDENT = /\w+/
COLON = &#39;:&#39;
SEMICOLON = &#39;;&#39;
</code></pre><p>The tokenizer will always match the longest token, and prefer keywords over identifiers. So <code>interesting</code> will be lexed as <code>IDENT:interesting</code>, but <code>in</code> will be lexed as <code>IN</code>, never as <code>IDENT:interesting</code>. A code snippet like</p><pre><code>for(var in expression)
</code></pre><p>will be translated to the token stream</p><pre><code>FOR LPAREN IDENT:var IN IDENT:expression RPAREN
</code></pre><p>So far, that works. But any variable <code>in</code> would be lexed as the keyword <code>IN</code> rather than a variable, which would break code. The lexer does not keep any state between the tokens, and cannot know that <code>in</code> should usually be a variable except when we are in a for loop. Also, the following code should be legal:</p><pre><code>for(in in expression)
</code></pre><p>The first <code>in</code> would be an identifier, the second would be a keyword.</p><p>There are two reactions to this problem:</p><h2>Contextual keywords are confusing, let&#39;s reuse keywords instead.</h2><p>Java has many reserved words, some of which have no use except for providing more helpful error messages to programmers switching to Java from C++. Adding new keywords breaks code. Adding contextual keywords is confusing to a reader of the code unless they have good syntax highlighting, and makes tooling difficult to implement because they&#39;ll have to use more advanced parsing techniques (see below).</p><p>When we want to extend the language, the only sane approach is to use symbols that previously were not legal in the language. In particular, these can&#39;t be identifiers. With the foreach loop syntax, Java reused the existing <code>:</code> keyword with a new meaning. With lambdas, Java added a <code>-&gt;</code> keyword which could not previously occur in any legal program (<code>--&gt;</code> would still be lexed as <code>&#39;--&#39; &#39;&gt;&#39;</code> which is legal, and <code>-&gt;</code> might have previously been lexed as <code>&#39;-&#39;, &#39;&gt;&#39;</code>, but that sequence would be rejected by the parser).</p><h2>Contextual keywords simplify languages, let&#39;s implement them</h2><p>Lexers are indisputably useful. But instead of running a lexer before the parser, we can run them in tandem with the parser. Bottom-up parsers always know the the set of token types that would be acceptable at any given location. The parser can then request the lexer to match any of these types at the current position. In a for-each loop, the parser would be at the position denoted by <code>·</code> in the (simplified) grammar after the variable has been found:</p><pre><code>for_loop = for_loop_cstyle | for_each_loop
for_loop_cstyle = &#39;for&#39; &#39;(&#39; declaration · &#39;;&#39; expression &#39;;&#39; expression &#39;)&#39;
for_each_loop = &#39;for&#39; &#39;(&#39; declaration · &#39;in&#39; expression &#39;)&#39;
</code></pre><p>At that position, the legal tokens are <code>SEMICOLON</code> or <code>IN</code>, but not <code>IDENT</code>. A keyword <code>in</code> would be entirely unambiguous.</p><p>In this particular example, top-down parsers wouldn&#39;t have a problem either since we can rewrite the above grammar to</p><pre><code>for_loop = &#39;for&#39; &#39;(&#39; declaration · for_loop_rest &#39;)&#39;
for_loop_rest =  · &#39;;&#39; expression &#39;;&#39; expression
for_loop_rest = · &#39;in&#39; expression
</code></pre><p>and all the tokens necessary for the decision can be seen without backtracking.</p><h2>Consider usability</h2><p>Java has always tended towards semantic and syntactic simplicity. For example, the language doesn&#39;t support operator overloading because it would make code far more complicated. So when deciding between <code>in</code> and <code>:</code> for a for-each loop syntax, we have to consider which is less confusing and more apparent to users. The extreme case would probably be</p><pre class="lang-none prettyprint-override"><code>for (in in in in())
for (in in : in())
</code></pre><p>(Note: Java has separate namespaces for type names, variables, and methods. I think this was a mistake, mostly. This does not mean later language design has to add <em>more</em> mistakes.)</p><p>Which alternative provides clearer visual separations between the iteration variable and the iterated collection? Which alternative can be recognized more quickly when you glance at the code? I&#39;ve found that separating symbols are better than a string of words when it comes to these criteria. Other languages have different values. E.g. Python spells out many operators in English so that they can be read naturally and are easy to understand, but those same properties can make it quite difficult to understand a piece of Python at a glance.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-null-pointer-instead-of-class-cast/'>Java &#8211; Why null pointer instead of class cast</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-does-scala-use-the-_-operator-for-package-import-instead-of-as-in-java/'>Java &#8211; Why does Scala use the &#8216;_&#8217; operator for package import instead of &#8216;*&#8217; as in Java</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-execution-time-is-different-each-time-in-java/'>Java &#8211; Why execution time is different each time in java</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-use-functional-operations-instead-of-a-for-loop/'>Java &#8211;  use &#8220;functional operations&#8221; instead of a for loop</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-take-a-string-input-instead-of-int-input-for-a-number/'>Java &#8211; Why take a String input instead of int input for a number</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-does-java-time-have-methods-for-creating-objects-instead-of-just-constructors/'>Java &#8211; Why does java.time have methods for creating objects instead of just constructors</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-does-java-use-an-override-annotation-instead-of-a-modifier/'>Java &#8211; Why does java use an @Override annotation, instead of a modifier</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-does-java-use-for-method-references-instead-of/'>Java &#8211; Why does Java use :: for method references instead of .</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>