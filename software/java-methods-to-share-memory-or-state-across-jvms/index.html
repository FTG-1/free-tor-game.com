<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Methods to share memory or state across JVMs &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069640 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069640" class="post-1069640 software type-software status-publish hentry category-software tag-java tag-memory"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Methods to share memory or state across JVMs</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">memory</span></p><div class="entry-content"><p>This is long question I know.  I have a few options for what I want.  I don&#39;t want to know &#34;this is obviously the best,&#34; but maybe any pros or cons I may be missing about the options, as well as any options I&#39;m unaware of.</p><p>We have a java application seperately run as multuple daemons, each a seperate JVM.  Right now SQL is used to store data and effecticvely our &#39;shared memory&#39;, but luckily not much is dynamic once in memory.</p><p>We will soon be dynamically creating and destroying connections and that will mean dynamic changes happening semi-fast and need something better then a SQL database.  We <em>think</em> all the dynamic stuff will happen in only one daemon, but we aren&#39;t certain.</p><p>We will need a faster method of saving and loading this state data, going to disk each time is just too slow.  The current database needs an overhaul for this change anyways, so we&#39;re open to modification or tossing of it as well.  We can re-learn all the state we keep in memory; but it&#39;s a slow process.  Persisting some or all of the data to a DB between runs to save time learning state at bootup is nice, if we can be certain it gets persisted right.</p><p>Ability to easily query a &#39;database&#39; to see current state for debugging is a major plus.</p><p>The solutions I have considered, and some of the pros &amp; cons are:</p><p>1) some sort of hibernate solution combined with an in-memory sql database.  I haven&#39;t used hibernate yet (really want to!), but I think it can address persistance and avoid stale objects between JVM&#39;s for us and sql will still be close to the speed of other options if in memory?  I don&#39;t know how much the overhead for this is or how it scales to multuple JVM&#39;s and possible (semi?) fast changes to data.  Presumable this is slower then all the other options, but think it&#39;s fast enough for our needs?</p><p>2) Have each JVM store it&#39;s own internal state without any shared system.  Use reliable intercommunication (probably JVM) to try to keep state consistent.  Most important state is in one daemon, so there won&#39;t be that much sharing of dynamic state, but still need to address inconsistent state and dataraces when it does occure.  I&#39;m uncertain of how we would want to record persistant state to allow fast reboot even if daemon dies unexpectedly.  Also, this solution would require implementing some quick messages to allow fetching a description of memory state to help debugging.  It would offer the highest performance once we get it right, but probably the most time consuming to implement (I anticipate obscure bugs due to data-race and inconsistent data?).</p><p>3) Use a system to allow some shared memory between JVMs.  Quick research suggested MappedByteBuffer and Ecache as possible options, there could be more.  Only looked into this a little so far so don&#39;t fully know pro&#39;s and cons yet.  Slightly afraid of creating a single point of failure if our memory is all shared.</p><p>4) Some sort of alternative I don&#39;t know about or possible merging of two of these idea.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The easiest and most stable method would probably to use an in-memory database (SQL or not). I&#39;m not sure what your data structure looks like, but a relatively competent DBA (or someone with a bit of Google Fu) should be able to configure the system to store the relevant tables in memory, assuming they fit.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-monitoring-c-applications/'>Java &#8211; Monitoring C++ applications</a></li><li class="list-group-item"><a href='../java-why-is-heap-size-fixed-on-jvms/'>Java &#8211; Why is heap size fixed on JVMs</a></li><li class="list-group-item"><a href='../what-are-the-pros-and-cons-of-inter-process-communication-done-via-sockets-vs-shared-memory/'>What are the pros and cons of Inter process communication done via sockets vs shared memory</a></li><li class="list-group-item"><a href='../c-in-memory-data-collection-objects-vs-database/'>C# &#8211; In-memory data collection object(s) vs database</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>