<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; Retrieving JSON and image representation of a resource &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087296 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087296" class="post-1087296 software type-software status-publish hentry category-software tag-hateoas tag-http tag-rest tag-web-api"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; Retrieving JSON and image representation of a resource</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">hateoas</span><span class="mr-2 badge badge-info">http</span><span class="mr-2 badge badge-warning">rest</span><span class="mr-2 badge badge-primary">web-api</span></p><div class="entry-content"><p>I am developing a RESTful API designed primarily (but not exclusively) for consumption by a web application. For the purposes of this question, the API is a set of GET endpoints. The main endpoint is <code>/people/</code> and understands a large amount of query parameters to refine the result set.</p><p>The web application&#39;s splash page initiates this request:</p><pre><code>GET http://my.api/people/
Accept: application/json
</code></pre><p>And this responds with a body of:</p><pre><code>{
  &#34;results&#34;: [
    {
      &#34;name&#34;: &#34;john&#34;,
      &#34;age&#34;: &#34;21&#34;,
      &#34;_links&#34;: {
        &#34;self&#34;: &#34;/people/john/&#34;
      }
    },
    ... more people ...
  ],
  &#34;_links&#34;: {
    &#34;self&#34;: &#34;/people/&#34;
  }
}
</code></pre><p>The <code>results</code> array is used by the web application to populate a list view of the people, with their name and age, and also an image of the person.</p><p>The image can be retrieved with such a request:</p><pre><code>GET http://my.api/people/john
Accept: image/png
</code></pre><p>From the perspective of the web application, this presents a number of difficulties.</p><ul><li><p>The <code>_links.self</code> of an individual person can be used in a HTML <code>&lt;img&gt;</code> element as the <code>src</code>, however the request generated by this has a header of <code>Accept: */*</code>, which does not sit well with the API as the global conventional default type is <code>application/json</code>.</p></li><li><p>The <code>image/png</code> request could be manually sent via Javascript but this can result in a large number of concurrent XHR requests, possibly beyond the concurrency limit of some browsers</p></li></ul><p>As I also have final say in the design of the API other possibilities are on the table:</p><ul><li><p>The <code>/people/</code> endpoint could be modified to return the image representation as Base64 (or some other text format) as part of the <code>application/json</code> response. This could also be excluded by default (and included manually with a <code>include=images</code> query parameter), so that requests are not forced to download image data for each response. This increases the response size massively, leading to slower response times for clients (especially mobile users) and potentially a cost increase due to increased outbound data from the hosting platform of the API.</p></li><li><p>The <code>/people/john</code> endpoint could be updated to default to an <code>image/png</code> response, however this goes against the grain of the rest of the API and is a change aimed exclusively at one client of the API.</p></li><li><p>The <code>/people/</code> endpoint could return, in each result&#39;s <code>_links</code> dictionary, a direct link to the image e.g. <code>my.api/images/people/john.png</code>. This is looking like the best option with few drawbacks, however I do not know how well this incorporates into REST / HATEOAS.</p></li></ul><p>What is the most appropriate solution, from a REST / HATEOAS architectural point of view, for retrieving the image representation of a resource as well as the JSON representation</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>What is the most appropriate solution, from a REST / HATEOAS architectural point of view, for retrieving the image representation of a resource as well as the JSON representation</p></blockquote><p>I would expect there to be a separate link relation for your images.</p><pre><code>  &#34;_links&#34;: {
    &#34;self&#34;: &#34;/people/john/&#34;,
    &#34;https://schema.org/image&#34;: &#34;???&#34;
  }
</code></pre><p>RFC 5988 describes both registered relation types and extension relation types.  In a quick skim of the <a href="https://schema.org/image" rel="nofollow noreferrer">link relation registry</a>, I didn&#39;t see a good match, so I think you are restricted to using an <a href="https://www.rfc-editor.org/rfc/rfc5988#section-4.2" rel="nofollow noreferrer">extension</a>, which are required to be URIs. <a href="https://schema.org/image" rel="nofollow noreferrer">Image</a> seems like a good choice from schema.org, but of course you could use spellings that are completely under your control if you prefer.</p><p>As far the target of that link relation, the <em>client</em> should just be treating that as an opaque value, so you can choose whatever spelling you think is going to make your life easier.</p><p>Choosing the same spelling for both the json and the image targets means that both representations will share the same key in the cache, and that in turn means that both representations will be <a href="https://www.rfc-editor.org/rfc/rfc7234#section-4.4" rel="nofollow noreferrer">invalidated</a> together if an unsafe request is successful.  (Of course, if you <em>don&#39;t</em> want that behavior, then sharing the same id is not going to be for your benefit).</p><p>As for the Accept headers, that depends on having clients that recognize your media type and its defined semantics.  For example, in HTML we have the <a href="https://www.w3.org/TR/html5/semantics-embedded-content.html#the-img-element" rel="nofollow noreferrer">img element</a>, and browsers that are smart enough to use different headers for fetching <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation/List_of_default_Accept_values#Values_for_an_image" rel="nofollow noreferrer">images</a> than they use by <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation/List_of_default_Accept_values#Values_for_an_image" rel="nofollow noreferrer">default</a>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-can-a-webservice-that-uses-json-over-post-be-classified-as-restful/'>Rest &#8211; Can a webservice that uses JSON over POST be classified as RESTful</a></li><li class="list-group-item"><a href='../rest-what-does-hateoas-offer-for-discoverability-and-decoupling-besides-ability-to-change-your-url-structure-more-or-less-freely/'>Rest &#8211; What does HATEOAS offer for discoverability and decoupling besides ability to change your URL structure more or less freely</a></li><li class="list-group-item"><a href='../rest-resource-representations-and-rest-api-documentation-tools/'>Rest &#8211; Resource representations and REST API documentation tools</a></li><li class="list-group-item"><a href='../rest-wrong-with-treating-a-client-session-as-a-resource-application-state-in-rest-architecture/'>Rest &#8211;  wrong with treating a client session as a resource/application state in REST architecture</a></li><li class="list-group-item"><a href='../rest-can-a-rest-api-return-multiple-resources-as-one-single-compound-resource/'>Rest &#8211; Can a REST API return multiple resources as one single compound resource</a></li><li class="list-group-item"><a href='../rest-what-does-hateoas-have-to-do-with-application-state/'>Rest &#8211; What does &#8220;HATEOAS&#8221; have to do with Application State</a></li><li class="list-group-item"><a href='../java-advantages-of-hateoas-based-restful-service/'>Java &#8211; Advantages of HATEOAS based RESTful service</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>