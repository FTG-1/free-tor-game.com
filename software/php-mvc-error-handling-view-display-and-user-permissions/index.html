<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>PHP MVC error handling, view display and user permissions &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079850 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079850" class="post-1079850 software type-software status-publish hentry category-software tag-error-handling tag-mvc tag-permissions tag-php tag-view"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">PHP MVC error handling, view display and user permissions</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">error handling</span><span class="mr-2 badge badge-info">mvc</span><span class="mr-2 badge badge-warning">permissions</span><span class="mr-2 badge badge-primary">PHP</span><span class="mr-2 badge badge-danger">view</span></p><div class="entry-content"><p>I am building a moderation panel from scratch in a MVC approach and a lot of questions cropped up during development. I would like to hear from others how they handle these situations.</p><ol><li><p><strong>Error handling</strong></p><p>Should you handle an error inside the class method or should the method return something anyway and you handle the error in controller? What about PDO exceptions, how to handle them? For example, let&#39;s say we have a method that returns true if the user exists in a table and false if he does not exist. What do you return in the catch statement? You can&#39;t just return false because then the controller assumes that everything is alright while the truth is that something must be seriously broken. Displaying the error from the method completely breaks the whole design. Maybe a page redirect inside the method?</p></li><li><p><strong>The proper way to show a view</strong></p><p>The controller right now looks something like this:</p><pre><code>include(&#39;view/header.php&#39;);
if ($_GET[&#39;m&#39;]==&#39;something&#39;) include(&#39;view/something.php&#39;);
elseif ($_GET[&#39;m&#39;]==&#39;somethingelse&#39;) include(&#39;view/somethingelse.php&#39;);
include(&#39;view/foter.php&#39;);
</code></pre><p>Each view also checks if it was included from the index page to prevent it being accessed directly.<br /> There is a view file for each different document body. Is this way of including different views ok or is there a more proper way?</p></li><li><p><strong>Managing user rights</strong></p><p>Each user has his own rights, what he can see and what he can do. Which part of the system should verify that user has the permission to see the view, controller or view itself? Right now I do permission checks directly in the view because each view can contain several forms that require different permissions and I would need to make a seperate file for each of them if it was put in the controller.<br /> I also have to re-check for the permissions everytime a form is submitted because form data can be easily forged.<br /> The truth is, all this permission checking and validating the inputs just turns the controller into a huge if/then/else cluster.</p><p>I feel like 90% of the time I am doing error checks/permissions/validations and very little of the actual logic. Is this normal even for popular frameworks?</p></li></ol></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>There is no single proper approach to your problems even within MVC pattern so simple answer to your questions does not exist.</p><blockquote><p>1 Error handling</p></blockquote><p>If you are using the PDO you can change error handling by setting PDO::ATTR_ERRMODE so you don&#39;t have to use exceptions but regardless of the way errors are returned it is a programmers responsibility to handle them properly. 
If your method is returning false if the user doesn&#39;t exists then the controller should check what value was returned. There is no such thing as &#34;controller assumes&#34; it only means that the programmer assumed and didn&#39;t check returned value.</p><p>There are different errors which should be handled in different way some of them may require only showing error message some of them may be critical (like no db connection). You can use messages, views or additional controller to handle errors.</p><blockquote><p>2 The proper way to show a view</p></blockquote><p>Code from your example would be usually handled by the layout (header, footer, different element placement) and by the controller (using different views depending on the request). It is not good idea to use &#39;include&#39; directly rather wrap it in the method. You can also create view class which would be responsible for handling views. view != .phtml</p><blockquote><p>3 Managing user rights</p></blockquote><p>In MVC pattern used for web applications there is usually additional &#34;front controller&#34; and permission checking will be handled there. You have to check for permission with each request and each request will require access to specific controller/method if you implement proper ACL it should resolve all your problems with user rights.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-in-mvc-can-should-basic-data-retrieval-from-the-model-be-done-in-the-view/'>Php &#8211; In MVC, can/should basic data retrieval from the Model be done in the View</a></li><li class="list-group-item"><a href='../web-development-php-mvc-pac-logged-in-admin-checks-placement/'>Web-development &#8211; PHP MVC/PAC &#8211; Logged In/Admin checks placement</a></li><li class="list-group-item"><a href='../php-where-to-put-which-code-in-mvc-model/'>Php &#8211; where to put which code in MVC model</a></li><li class="list-group-item"><a href='../object-oriented-correct-way-to-implementing-authorization-checks-in-asp-mvc/'>Object-oriented &#8211; Correct Way to Implementing Authorization Checks in ASP MVC</a></li><li class="list-group-item"><a href='../javascript-permission-system-using-php-and-js/'>Javascript &#8211; Permission system using PHP and JS</a></li><li class="list-group-item"><a href='../error-handling-in-nest-service-layer/'>Error handling in Nest service layer</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>