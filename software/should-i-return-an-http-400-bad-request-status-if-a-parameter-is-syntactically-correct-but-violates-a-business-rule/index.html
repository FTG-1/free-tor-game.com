<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Should I return an HTTP 400 (Bad Request) status if a parameter is syntactically correct, but violates a business rule &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063346 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063346" class="post-1063346 software type-software status-publish hentry category-software tag-api-design tag-http"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Should I return an HTTP 400 (Bad Request) status if a parameter is syntactically correct, but violates a business rule</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api-design</span><span class="mr-2 badge badge-info">http</span></p><div class="entry-content"><p>Say that I have a REST endpoint that takes an integer as a parameter:</p><pre><code>/makeWaffles?numberOfWaffles=3
</code></pre><p>In this case, I want the number to be positive because I can&#39;t make a negative number of waffles (and requesting 0 waffles is a waste of time). So I want to reject any request that does not contain a positive integer. I also want to reject a request that exceeds some maximum integer (let&#39;s say for now that it&#39;s MAX_INTEGER).</p><p>In the event that someone requests a non-positive number of waffles, should I return an HTTP 400 (Bad Request) status? My initial thought is yes: it is not a valid number for me to complete the request. However, <a href="https://www.rfc-editor.org/rfc/rfc7231#section-6.5.1" rel="nofollow noreferrer">the RFC</a> doesn&#39;t mention business rules as a reason to throw it:</p><blockquote><p>The 400 (Bad Request) status code indicates that the server cannot or will not process the request due to something that is perceived to be a client error (e.g., malformed request syntax, invalid request message framing, or deceptive request routing).</p></blockquote><p>A business rule doesn&#39;t fall under any of those three examples. It&#39;s syntactically correct, it&#39;s properly framed, and it&#39;s not deceptive request routing.</p><p>So should I return an HTTP 400 (Bad Request) status if a parameter is syntactically correct, but violates a business rule? Or is there a more appropriate status to return?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This is a great question, and still highly relevant given the historical context (and seemingly contradictory definitions) of the HTTP return codes.  Even among the answers to this question there are conflicting definitions.  This can be clarified by moving chronologically.</p><p><a href="https://www.rfc-editor.org/rfc/rfc2616" rel="nofollow noreferrer">RFC 2616</a> (June 1999)</p><blockquote><p>10.4.1 400 Bad Request</p></blockquote><blockquote><blockquote><p>The request could not be understood by the server due to malformed
syntax. The client SHOULD NOT repeat the request without
modifications.</p></blockquote></blockquote><p>As of this RFC, this status code specifically applied only to syntactically invalid requests.  There was a gap in the status codes for semantic validation.  Thus, when RFC 4918 came around, a new code was born.</p><p><a href="https://www.rfc-editor.org/rfc/rfc4918" rel="nofollow noreferrer">RFC 4918</a> (June 2007)</p><blockquote><p>11.2.  422 Unprocessable Entity</p></blockquote><blockquote><blockquote><p>The 422 (Unprocessable Entity) status code means the server
understands the content type of the request entity (hence a
415(Unsupported Media Type) status code is inappropriate), and the
syntax of the request entity is correct (thus a 400 (Bad Request)
status code is inappropriate) but was unable to process the contained
instructions.  For example, this error condition may occur if an XML
request body contains well-formed (i.e., syntactically correct), but
semantically erroneous, XML instructions.</p></blockquote></blockquote><p>422 Unprocessable Entity was created to fill the gap of semantic validation in the original specification of the 4xx status codes.  However, <strong>another relevant RFC came about in 2014 which generalized 400 to no longer be specific to syntax</strong>.</p><p><a href="https://www.rfc-editor.org/rfc/rfc7231" rel="nofollow noreferrer">RFC 7231</a> (June 2014, explicitly obsoletes RFC 2616)</p><blockquote><p>6.5.1.  400 Bad Request</p></blockquote><blockquote><blockquote><p>The 400 (Bad Request) status code indicates that the server cannot or
will not process the request due to something that is perceived to be
a client error (e.g., malformed request syntax, invalid request
message framing, or deceptive request routing).</p></blockquote></blockquote><p>Note that the 422 description says that the reason 400 is inappropriate is because 400 (as of RFC 2616) should be returned only for bad request syntax.  However, <strong>as of RFC 7231, the strict syntax-error definition no longer applies to 400</strong>.</p><p>Back to the question at hand:  While 422 is technically more specific, given this context, I could see either 400 or 422 being used for semantic validation of API parameters.  I&#39;m hesitant to use 422 in my own APIs because the definition of 422 is technically outdated at this point (although I don&#39;t know if that&#39;s officially recognized anywhere).  The article referenced in Fran&#39;s answer that encourages the use of 422 was written in 2012, two years before RFC 7231 clarified HTTP 400.  Just be sure to standardize on one or the other.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-invalid-operation-status-code-in-a-hateoas-rest-api/'>Rest &#8211; &#8220;Invalid operation&#8221; status code in a HATEOAS REST API</a></li><li class="list-group-item"><a href='../rest-how-to-indicate-to-a-web-server-the-language-of-a-resource/'>Rest &#8211; How to indicate to a web server the language of a resource</a></li><li class="list-group-item"><a href='../rest-do-web-applications-use-http-as-a-transport-layer-or-do-they-count-as-an-integral-part-of-the-http-server/'>Rest &#8211; Do web applications use HTTP as a transport layer, or do they count as an integral part of the HTTP server</a></li><li class="list-group-item"><a href='../is-http-426-acceptable-for-your-request-should-have-been-https/'>Is HTTP 426 acceptable for &#8220;Your request should have been HTTPS&#8221;</a></li><li class="list-group-item"><a href='../should-i-use-http-status-codes-to-describe-application-level-events/'>Should I use HTTP status codes to describe application level events</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>