<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture &#8211; Architecting a modular service application &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1077323 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1077323" class="post-1077323 software type-software status-publish hentry category-software tag-architecture tag-domain-driven-design tag-modules tag-soa tag-wcf"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture &#8211; Architecting a modular service application</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">domain-driven-design</span><span class="mr-2 badge badge-warning">modules</span><span class="mr-2 badge badge-primary">soa</span><span class="mr-2 badge badge-danger">wcf</span></p><div class="entry-content"><p>I&#39;m looking at architecting a new solution that is very modular by nature and would like to create a structure that supports that design to allow for easy future expansion, clear separation of concerns, licensing by module, etc.  Most of what I&#39;ve found on the web about modular or composite applications are UI-centric, focused on Silverlight, WPF, etc.  In my case, I am developing a WCF service application that will be consumed by other developers working on various UI projects.</p><p><strong>Background</strong></p><p>The goal of my project is to create a centralized source of business/domain logic to support several of our business applications that currently duplicate process, rules, etc.  And while not every benefit of modularity will be achieved, I&#39;d like to seize the opportunity to establish a framework that will leverage those parts we can take advantage of.</p><p>I&#39;ve started the design by looking at the API exposed by the service application.  It is clear that the services can be segregated along the modular lines that I was considering.  For instance, I will have FinanceService, InventoryService, PersonnelService, etc. services that group my service operations to provide high-cohesion in the API while keeping the coupling low so clients only have to consume the services that are pertinent to their application.</p><p>It makes sense to me that I can then have separate modules for each of these services, such as MyApp.Finance, MyApp.Inventory, My.Personnel and so on.  Cross-cutting concerns and shared types would be in the MyApp shared assembly.  From here I get a little tied up.</p><p>(Oh, I should mention that I&#39;ll be using an IoC container for Dependency Injection to keep the application loosely-coupled.  I won&#39;t mention which one because I don&#39;t want to open Pandora&#39;s box!)</p><p>In MyApp.ServiceHost, I will create a service host file (.svc) corresponding to each module, FinanceService.svc for example.  The service host needs the name of the service which corresponds to the information in the configuration file that contains the interface defining the service contract.  The IoC configuration is then used to map the concrete implementation of the interface to use.</p><p><strong>1. Should the service layer implement the API and delegate to the modules or should the modules be self-contained (in that they contain everything related to that module, including the service implementation)?</strong></p><p>One way of approaching the problem is to have a MyApp.Services &#34;module&#34; which contains the implementation of the service contracts. Each service class simply delegate to another class int eh appropriate module which contains the domain logic for the operation.  For example, the FinanceService WCF class in MyApp.Services delegates to another interface which is implemented in the Finance module to carry out the operation.  This would allow me to maintain a thin service facade and &#39;plug-in&#39; the implementation to the service implementation and eliminate the need for the modules to worry about WCF, for instance.</p><p>On the other hand, maybe it&#39;s preferred to have each module self-contained in that it has the interface and the implementation.  The service host refers to the service contract interface found in the module and the IoC is configured to use the appropriate implementation from the module as well. This means that adding a new module can be done with no changes to the service layer other than adding a new .svc file and IoC configuration information.</p><p>I&#39;m thinking about the impact if I switch from standard WCF to a RESTful service interface or maybe go to RIA services or something.  If each module contains the implementation of the service contract, then I have to make changes in every module if I change the service technology or approach.  But, if the facade is its own module, then I only have to swap out that part to make a change.  The modules would then have to implement a different set of contracts (interfaces), possibly defined in the shared assembly???</p><p><strong>2. What is the best way to handle sharing resources between modules and/or dependencies between modules?</strong></p><p>Take, for instance, a Receiving operation.  At first blush it makes sense that this goes into the Inventory module as receiving goods is an inventory function.  However, there is also a financial aspect in that we need to generate a Receipt and authorize payment.</p><p>On the one hand, I would expect to use some type of domain events / messaging to communicate the operation.  The Inventory module raises a GoodsReceivedEvent which is handled by the Financial module to generate the Receipt and initiate the payment process.  However, this means that the Financial module needs to know about the inventory items that were received.  I can simply refer to them by ID but what if I need additional information for the Receipt, such as the name and/or description, unit cost, etc.?  Does it make sense for each module to have their own version of an inventory item that is designed to suit the needs of that module?  In that case, the Financial module would have to perform its own lookup of the inventory items when handling the GoodsReceivedEvent.  Or do I now have to put my domain objects into a shared location (at which point I lose some cohesion)?</p><p>&#8230;</p><p>I used this example on purpose because I&#39;ve worked a lot with various ERP systems and know they are designed with this type of modularity &#8211; I just don&#39;t know how.  I also don&#39;t explicitly mention it above, but I prefer to follow Domain Driven Design principals in architecting the solution and believe that this type of modularity fits right into that area.</p><p>Any help getting my head wrapped around this is greatly appreciated.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>Does it make sense for each module to
 have their own version of an inventory
 item that is designed to suit the
 needs of that module? In that case,
 the Financial module would have to
 perform its own lookup of the
 inventory items when handling the
 GoodsReceivedEvent. Where do I draw
 the line between modularity and the
 need to share information?</p></blockquote><p>You will always have to accept trade-offs. That&#39;s all there&#39;s to say to your questions really. It has been a good practice to keep the entities in a separate assembly, so many applications keep them in a shared library. But that means that there&#39;re no (physical) business-logical boundries. Performing your own lookups means a lot of redundant code which I&#39;d only implement if you have special requirements in both the modules. Of course, looking at it from an architectural point of view, your Financial Module and your Inventory Module have to share a dependency anyway. The Financial Module is most likely dependent on the Inventory Module. If requirements permit you to let one module depend on another module, then I&#39;d say it&#39;s ok to encapsulate the entities within the modules they belong to the most. You&#39;ll need to find a good balance between physical distinction (shared dependencies) and maintenance. Too many shared dependencies could cause a maintenance nightmare of versions. Also, with an ORM there&#39;ll be troubles if you want to map new relations to existing entities or extend them from modules which depend on the module containing the entity.</p><p>If you don&#39;t use ORM then keep in mind all your modules probably share the same database anyway, as that&#39;s often the case. You could use that as a common ground.</p><p>You could also keep the data plain (in terms of CSV/resultsets e.g.) and use a central messaging service to notify modules that registered to it about new data with along with some meta information. That means no real dependencies, but sacrifices type safty and contracts and there can be troubles with malformed data. I guess that&#39;s how many big ERP systems do it.</p><p>So in short, you&#39;ll have to decide which kind of interface you want. More modularity leads to less contracts and vice versa.</p><p>Id&#39;probably use a shared library for my data objects and a central messaging service with a publish subscibe pattern, that seems the best solution to me.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../mvc-modular-enterprise-architecture-using-mvc-and-orchard-cms/'>Mvc &#8211; Modular enterprise architecture using MVC and Orchard CMS</a></li><li class="list-group-item"><a href='../c-domain-driven-design-and-wcf-services-architecture/'>C# &#8211; Domain driven design and WCF services architecture</a></li><li class="list-group-item"><a href='../php-ddd-creating-reusable-modules-and-service-type-distinctions-domain-infrastructure-application/'>Php &#8211; DDD: Creating reusable modules and service type distinctions (Domain, Infrastructure, Application)</a></li><li class="list-group-item"><a href='../object-oriented-do-you-put-business-logic-in-your-service-implementation/'>Object-oriented &#8211; Do you put business logic in your service implementation ? <comment on the design></a></li><li class="list-group-item"><a href='../java-package-naming-conventions-in-maven-modular-project/'>Java package naming conventions (in maven modular project)</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>