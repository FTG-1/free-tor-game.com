<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Hierarchical View/ViewModel/Presenters in MVPVM &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070693 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070693" class="post-1070693 software type-software status-publish hentry category-software tag-c tag-mvp tag-mvvm tag-net tag-wpf"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Hierarchical View/ViewModel/Presenters in MVPVM</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">mvp</span><span class="mr-2 badge badge-warning">mvvm</span><span class="mr-2 badge badge-primary">net</span><span class="mr-2 badge badge-danger">wpf</span></p><div class="entry-content"><p>I&#39;ve been working with MVVM for a while, but I&#39;ve recently started using MVPVM and I want to know how to create hierarchial View/ViewModel/Presenter app using this pattern.</p><p>In MVVM I would typically build my application using a hierarchy of Views and corresponding ViewModels e.g. I might define 3 views as follows:</p><p><img src="../../../i.stack.imgur.com/eHsn6.png" alt="View A"/></p><p>The View Models for these views would be as follows:</p><pre><code>public class AViewModel
{
    public string Text
    {
        get { return &#34;This is A!&#34;; }
    }

    public object Child1 { get; set; }    
    public object Child2 { get; set; }
}

public class BViewModel
{
    public string Text
    {
        get { return &#34;This is B!&#34;; }
    }
}

public class CViewModel
{
    public string Text
    {
        get { return &#34;This is C!&#34;; }
    }
}
</code></pre><p>In would then have some data templates to say that BViewModel and CViewModel should be presented using View B and View C:</p><pre><code>&lt;DataTemplate DataType=&#34;{StaticResource local:BViewModel}&#34;&gt;
    &lt;local:BView/&gt;
&lt;/DataTemplate&gt;
&lt;DataTemplate DataType=&#34;{StaticResource local:CViewModel}&#34;&gt;
    &lt;local:CView/&gt;
&lt;/DataTemplate&gt;
</code></pre><p>The final step would be to put some code in AViewModel that would assign values to Child1 and Child2:</p><pre><code>public AViewModel()
{
    this.Child1 = new AViewModel();
    this.Child2 = new BViewModel();
}
</code></pre><p>The result of all this would be a screen that looks something like:</p><p><img src="../../../i.stack.imgur.com/hXGz7.png" alt="enter image description here"/></p><p>Doing this in MVPVM would be fairly simple &#8211; simply moving the code in AViewModel&#39;s constructor to APresenter:</p><pre><code>public class APresenter 
{
    ....
    public void WireUp()
    {
        ViewModel.Child1 = new BViewModel();
        ViewModel.Child2 = new CViewModel();
     } 
}
</code></pre><p>But If I want to have business logic for BViewModel and CViewModel I would need to have a BPresenter and a CPresenter &#8211; the problem is, Im not sure where the best place to put these are.</p><p>I could store references to the presenter for AViewModel.Child1 and AViewModel.Child2 in APresenter i.e.:</p><pre><code>public class APresenter : IPresenter
{
    private IPresenter child1Presenter;
    private IPresenter child2Presenter;

    public void WireUp()
    {
        child1Presenter = new BPresenter();
        child1Presenter.WireUp();
        child2Presenter = new CPresenter();
        child2Presenter.WireUp();

        ViewModel.Child1 = child1Presenter.ViewModel;
        ViewModel.Child2 = child2Presenter.ViewModel;
    }
}
</code></pre><p>But this solution seems inelegant compared to the MVVM approach. I have to keep track of both the presenter and the view model and ensure they stay in sync. If, for example, I wanted a button on View A, which, when clicked swapped the View&#39;s in Child1 and Child2, I might have a command that did the following:</p><pre><code>var temp = ViewModel.Child1;
ViewModel.Child1 = ViewModel.Child2;
ViewModel.Child2 = temp;
</code></pre><p>This would work as far as swapping the view&#39;s on screen (assuming the correct Property Change notification code is in place), but now my APresenter.child1Presenter is pointing to the presenter for AViewModel.Child2, and APresenter.child2Presenter is pointing to the presenter for AViewModel.Child1. If something accesses APresenter.child1Presenter, any changes will actually happen to AViewModel.Child2. I can imagine this leading to all sorts of debugging fun.</p><p>I know that I may be misunderstanding the pattern, and if this is the case a clarification of what Im doing wrong would be appreciated.</p><p><strong>EDIT</strong> &#8211; this question is about WPF and the MVPVM design pattern, not ASP.NET and MVP.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>So I think you have some minor violation of MVVM | MVPVM patterns due to linkage you&#39;re creating between the views.  Neither pattern is all that verbose with respect to child windows though, so it&#39;s a bit of a murky area.</p><p>I think it&#39;s worth pointing out that the big advantage of MVPVM vs. MVVM is because of separating out business logic.  The VM becomes a data container and the P handles logic plus DAL access.  Bill Kratochvil&#39;s <a href="http://msdn.microsoft.com/en-us/magazine/hh580734.aspx" rel="nofollow">article on MVPVM</a> was a very good read.</p><p>Bill makes a comment regarding child windows and re-use that I think is apt:<br/> <code>In cases where a Presenter can be reused across enterprise applications, it’s likely a module would be better suited for the task—that is, you could create a login module (project) that could be reused by all of your enterprise applications.</code></p><p>Which kind of reinforces that you&#39;re in murky territory with two child components.</p><p>Regardless of MVVM or MVPVM, I think you would need either</p><ul><li><code>B-VM</code> and <code>C-VM</code> when using MVVM</li><li><code>B-P</code> and <code>C-P</code> <strong>and</strong> <code>B-VM</code> and <code>C-VM</code> when using MVPVM</li></ul><p>because they are functionally separate from A.  If they&#39;re not functionally separate, then why do they need their own Views?</p><p>I think the challenges you bring up with swapping ViewB and ViewC is because there is some blurring between object ownership and responsibilities.  Which is really just another way of asking if B and C are functionally separate from A or not.  If they are, then make them that way and if not, then don&#39;t set them up as independent.</p><p>For lightweight stuff without a lot of business logic that could be re-used, I think that MVPVM is more effort than it&#39;s worth with MVVM.  That&#39;s clearly a generality, and the business logic of your application may lend itself to being expressed more elegantly with MVPVM.  Based upon your question though, it sounds like MVVM may be sufficient for what you need.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-in-mvp-should-presenters-instantiate-and-control-other-presenters/'>Design &#8211; In MVP, should presenters instantiate and control other presenters</a></li><li class="list-group-item"><a href='../design-loose-coupling-presenter-to-view-in-mvp/'>Design &#8211; Loose Coupling Presenter to View in MVP</a></li><li class="list-group-item"><a href='../c-model-and-viewmodel-for-view/'>C# &#8211; Model and ViewModel for View</a></li><li class="list-group-item"><a href='../again-mvvm-mvp-story-passing-interface-of-a-view-to-its-view-model-why-it-is-bad/'>Again MVVM / MVP story , passing interface of a view to its view model why it is bad</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-what-is-the-view-model/'>Architecture &#8211; Clean Architecture: What is the View Model</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>