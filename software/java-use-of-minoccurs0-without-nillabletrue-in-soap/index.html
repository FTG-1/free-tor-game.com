<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; use of minOccurs=&#8221;0&#8243; without nillable=&#8221;true&#8221; in SOAP &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069378 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069378" class="post-1069378 software type-software status-publish hentry category-software tag-java tag-net tag-soap tag-w3c tag-wcf"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; use of minOccurs=&#8221;0&#8243; without nillable=&#8221;true&#8221; in SOAP</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">net</span><span class="mr-2 badge badge-warning">soap</span><span class="mr-2 badge badge-primary">w3c</span><span class="mr-2 badge badge-danger">wcf</span></p><div class="entry-content"><p>I have received an XSD from a 3rd party supplier generated from a Java based system; which is to be used to create a SOAP endpoint for us to receive data transfers. Their XSD does not make any use of the nillable attribute defined within the W3C/XSD namespace, for example:</p><pre><code>&lt;xs:complexType name=&#34;Customer&#34;&gt;
    &lt;xs:sequence&gt;
        &lt;xs:element minOccurs=&#34;1&#34; maxOccurs=&#34;1&#34; name=&#34;ID&#34; type=&#34;xs:integer&#34;/&gt;
        &lt;xs:element minOccurs=&#34;0&#34; maxOccurs=&#34;1&#34; name=&#34;TitleID&#34; type=&#34;xs:integer&#34;/&gt;
        &lt;xs:element minOccurs=&#34;0&#34; maxOccurs=&#34;1&#34; name=&#34;FirstName&#34; type=&#34;xs:string&#34;/&gt;
        &lt;xs:element minOccurs=&#34;0&#34; maxOccurs=&#34;1&#34; name=&#34;FamilyName&#34; type=&#34;xs:string&#34;/&gt;
        &lt;xs:element minOccurs=&#34;0&#34; maxOccurs=&#34;1&#34; name=&#34;PreviousName&#34; type=&#34;xs:string&#34;/&gt;
        &lt;xs:element minOccurs=&#34;0&#34; maxOccurs=&#34;1&#34; name=&#34;DateOfBirth&#34; type=&#34;xs:date&#34;/&gt;
    &lt;/xs:sequence&gt;
&lt;/xs:complexType&gt;
</code></pre><p>When speaking to the supplier it was mentioned &#34;<code>where minOccurs=&#34;0&#34;</code> and their is no value, elements will be omitted&#34;.</p><p>When we use the XSD Schema Definition Tool to create classes; the classes are generated correctly with 2 exceptions: the DateOfBirth and TitleID properties are not nullable.</p><p>Unless <code>nillable=&#34;true&#34;</code> is declared within the XSD for simple types, value types or not created as Nullable despite the <code>minOccurs=&#34;0&#34;</code> configuration. After some research I feel this interpretation is correct given information in the following articles:</p><ul><li><a href="http://www.w3schools.com/xml/schema_complex_indicators.asp" rel="nofollow noreferrer">http://www.w3schools.com/xml/schema_complex_indicators.asp</a></li><li><a href="https://www.w3.org/TR/xmlschema-0/" rel="nofollow noreferrer">https://www.w3.org/TR/xmlschema-0/</a></li><li><a href="https://www.w3.org/TR/xmlschema-1/#xsi_nil" rel="nofollow noreferrer">https://www.w3.org/TR/xmlschema-1/#xsi_nil</a></li><li><a href="https://www.w3.org/TR/xmlschema-0/" rel="nofollow noreferrer">https://www.w3.org/TR/xmlschema-0/</a></li><li><a href="http://www.w3schools.com/xml/el_element.asp" rel="nofollow noreferrer">http://www.w3schools.com/xml/el_element.asp</a></li><li><a href="http://docstore.mik.ua/orelly/xml/schema/ch11_03.htm" rel="nofollow noreferrer">http://docstore.mik.ua/orelly/xml/schema/ch11_03.htm</a></li><li><a href="https://msdn.microsoft.com/en-us/library/2b314yt2(v=vs.100).aspx" rel="nofollow noreferrer">https://msdn.microsoft.com/en-us/library/2b314yt2(v=vs.100).aspx</a></li><li><a href="https://stackoverflow.com/questions/774192/what-is-the-correct-way-to-represent-null-xml-elements">https://stackoverflow.com/questions/774192/what-is-the-correct-way-to-represent-null-xml-elements</a></li></ul><p>I have concluded from the above that <code>minOccurs=&#34;0&#34;</code> is a definition that states the element within the <strong>XML</strong> is optional, but does not have any particular meaning. It is clear that within a SOAP message; to communicate no value for a particular element <code>nill=&#34;true&#34;</code> should be used within an empty element.</p><p>When presenting this to our supplier; I have argued the missing nillable attributes leaves the XSD ambiguous and lacks intent when referenced to the standards, given than omitting elements does not state null, its only implied. The W3C states if a message needs to indicate an element is null, it should be explicitly stated. Their representative disagreed and argued that if there is no DateOfBirth (for example) they will remove the element for this in the SOAP message. They believe this is acceptable and conforms to the standards. From what I have read <a href="http://www.ibm.com/developerworks/webservices/library/ws-tip-null/" rel="nofollow noreferrer">here</a>, minOccurs/nillable have the same behavior in Java (maybe why they feel they don&#39;t have to use nillable attribute)</p><p>I know I can work around this but ultimately; it (potentially) has a significant increase on the amount of additional code required for the sake of our supplier not wanting to use the nill/nillable attribute in the XSD and SOAP message. I am building our SOAP API in WCF; upon deserialization I will have to check all the Specified properties that are generated to check for missing elements. This is because value types that are not not referenced in the xml message will be assigned their default values. Alternatively, I could go through the XSD and add them myself, which I feel is a bad idea. I will be changing their definitions and any new releases will require the same effort, which is currently every 3-6 months.</p><p>My questions are:</p><ul><li>Do you agree with arguments made by me or the supplier? If so why?</li><li>Am I correct in my suggestion Java treats these configurations the same?</li><li>If I am wrong, is there a way I can tell .Net to create nullable types for <code>minOccurs=&#34;0&#34;</code>?</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Apache CXF uses the following rationale:</p><blockquote><p>MinOccurs and Nillable</p><p>The default Aegis mapping is to assume that, since any Java object can be null, that the corresponding schema elements should have minOccurs of 0 and nillable of true. There are properties on the mappings to control this.</p></blockquote><pre><code>&lt;mappings&gt;
  &lt;mapping&gt;
    &lt;property name=&#39;everpresentProperty&#39; minOccurs=&#39;1&#39; nillable=&#39;false&#39;/&gt;
 &lt;/mapping&gt;
&lt;mappings&gt;
</code></pre><p>The W3C rationale is similar:</p><blockquote><p>An [XML Schema 1.0], or other [XML 1.0] document containing an [XML Schema 1.0] element , exhibits the NillableElement pattern identified using the URI [RFC 3986] <a href="http://www.w3.org/2002/ws/databinding/patterns/6/09/NillableElement" rel="nofollow noreferrer">http://www.w3.org/2002/ws/databinding/patterns/6/09/NillableElement</a> when the following [XPath 2.0] expression applied to a document or element node with a context node of //xs:schema results in an [XPath 2.0] node-set containing at least one node:</p></blockquote><pre><code>.//xs:element[@nillable = &#39;true&#39; and not(@minOccurs = &#39;0&#39;)]/ (@nillable)
</code></pre><p>The following example [XML Schema 1.0] extract illustrates the use of the NillableElement pattern within an [XML Schema 1.0] document [NillableElement]:</p><pre><code>&lt;xs:element name=&#34;nillableMiddleName&#34; type=&#34;ex:NillableMiddleName&#34; /&gt;
&lt;xs:complexType name=&#34;NillableMiddleName&#34;&gt;
  &lt;xs:sequence&gt;
    &lt;xs:element name=&#34;firstName&#34; type=&#34;xs:string&#34; /&gt;
    &lt;xs:element name=&#34;middleName&#34; type=&#34;xs:string&#34;  nillable=&#34;true&#34; /&gt;
    &lt;xs:element name=&#34;lastName&#34; type=&#34;xs:string&#34; /&gt;
  &lt;/xs:sequence&gt;
&lt;/xs:complexType&gt;
</code></pre><p>The following example [XML 1.0] element is valid against the above example [XML Schema 1.0] when included inside an instance document [NillableElement01]:</p><pre><code>&lt;ex:nillableMiddleName&gt;
  &lt;ex:firstName&gt;Paul&lt;/ex:firstName&gt;
  &lt;ex:middleName xsi:nil=&#34;true&#34;/&gt;
  &lt;ex:lastName&gt;Downey&lt;/ex:lastName&gt;
&lt;/ex:nillableMiddleName&gt;
</code></pre><p>as is the following element when included in an instance document [NillableElement02]:</p><pre><code>&lt;ex:nillableMiddleName&gt;
  &lt;ex:firstName&gt;Paul&lt;/ex:firstName&gt;
  &lt;ex:middleName&gt;Sumner&lt;/ex:middleName&gt;
  &lt;ex:lastName&gt;Downey&lt;/ex:lastName&gt;
&lt;/ex:nillableMiddleName&gt;
</code></pre><p><strong>References</strong></p><ul><li><p><a href="http://cxf.apache.org/docs/aegis-21.html" rel="nofollow noreferrer">Apache CXF -- Aegis (2.1)</a></p></li><li><p><a href="https://www.w3.org/TR/xmlschema-patterns/" rel="nofollow noreferrer">Basic XML Schema Patterns for Databinding Version 1.0</a></p></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-what-was-soap-invented-for/'>Rest &#8211; What was SOAP invented for</a></li><li class="list-group-item"><a href='../the-best-and-most-optimized-way-to-return-a-filestream-from-a-net-wcf-soap-service/'>The best and most optimized way to return a filestream from a .NET WCF SOAP service</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>