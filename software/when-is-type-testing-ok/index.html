<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>When is type testing OK &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069556 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069556" class="post-1069556 software type-software status-publish hentry category-software tag-type-systems"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">When is type testing OK</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">type-systems</span></p><div class="entry-content"><p>Assuming a language with some inherent type safety (e.g., not JavaScript):</p><p>Given a method that accepts a <code>SuperType</code>, we know that in most cases wherein we might be tempted to perform type testing to pick an action:</p><pre><code>public void DoSomethingTo(SuperType o) {
  if (o isa SubTypeA) {
    o.doSomethingA()
  } else {
    o.doSomethingB();
  }
}
</code></pre><p>We should usually, if not always, create a single, overridable method on the <code>SuperType</code> and do this:</p><pre><code>public void DoSomethingTo(SuperType o) {
  o.doSomething();
}
</code></pre><p>&#8230; wherein each subtype is given its own <code>doSomething()</code> implementation. The rest of our application can then be appropriately ignorant of whether any given <code>SuperType</code> is really a <code>SubTypeA</code> or a <code>SubTypeB</code>.</p><p>Wonderful.</p><p>But, we&#39;re still given <code>is a</code>-like operations in most, if not all, type-safe languages. And that suggests a potential need for explicit type testing.</p><p><strong>So, in what situations, if any, <em>should</em> we or <em>must</em> we perform explicit type testing?</strong></p><p><sup>Forgive my absent mindedness or lack of creativity. I know I&#39;ve done it before; but, it was honestly so long ago I can&#39;t remember if what I did was good! And in recent memory, I don&#39;t think I&#39;ve encountered a <em>need</em> to test types outside my cowboy JavaScript.</sup></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>&#34;Never&#34; is the canonical answer to &#34;when is type testing okay?&#34;
There&#39;s no
way to prove or disprove this; it is part of a system of beliefs about what
makes &#34;good design&#34; or &#34;good object-oriented design.&#34; It&#39;s also hokum.</p><p>To be sure, if you have an integrated set of classes
and also more than one or two functions that need that kind of
direct type testing, you&#39;re probably
DOING IT WRONG. What you really need is a method that&#39;s implemented differently in <code>SuperType</code> and its subtypes. This is part and parcel of object-oriented
programming, and the whole reason classes and inheritance exist.</p><p>In this case, explicitly type-testing is wrong not because type testing is
inherently wrong, but because the language already
has a clean, extensible, idiomatic way of accomplishing type
discrimination, and you didn&#39;t use it. Instead, you fell back to a
primitive, fragile, non-extensible idiom.</p><p>Solution: Use the idiom. As you
suggested, add a method to each of the classes, then let standard inheritance
and method-selection algorithms determine which case applies. Or if you can&#39;t
change the base types, subclass and add your method there.</p><p>So much for the conventional wisdom, and on to some answers. Some cases where
explicit type testing makes sense:</p><ol><li><p><strong>It&#39;s a one-off.</strong> If you had a lot of type discrimination to do,
you might extend the types, or subclass. But you don&#39;t. You have just
one or two places where you need explicit testing, so it&#39;s not worth
your while to go back and work through the class hierarchy to add
the functions as methods. Or it&#39;s not worth the practical effort to
add the kind of generality, testing, design reviews, documentation,
or other attributes of the base classes for such a simple, limited
usage. In that case, adding a function that does direct testing is rational.</p></li><li><p><strong>You can&#39;t adjust the classes.</strong> You think about subclassing--but you can&#39;t.
Many classes in Java, for
instance, are designated <code>final</code>.
You try to throw in a <code>public class ExtendedSubTypeA extends SubTypeA {...}</code> and the compiler tells you, in no uncertain terms, that what you&#39;re doing is
not possible. Sorry, grace and sophistication of the object oriented model!
Someone decided you can&#39;t extend their types! Unfortunately, many of the standard library
are <code>final</code>, and making classes <code>final</code> is common design guidance.
A function end-run is what&#39;s left available to you.</p><p>BTW, this isn&#39;t limited to statically typed languages. Dynamic language Python has a number of
base classes that, under the covers implemented in C, cannot really be modified.
Like Java, that includes most of the standard types.</p></li><li><p><strong>Your code is external.</strong> You are developing with classes and objects that come
from a range of database servers, middleware engines, and other codebases you can&#39;t
control or adjust. Your code is just a lowly consumer of objects generated elsewhere.
Even if you could subclass <code>SuperType</code>, you&#39;re not going to be able to get those
libraries on which you depend to generate objects in your subclasses. They&#39;re
going to hand you instances of the types they know, not your variants. This
isn&#39;t always the case...sometimes they are built for flexibility, and they dynamically
instantiate instances of classes that you feed them. Or they provide a mechanism to
register the subclasses you want their factories to construct. XML parsers seem particularly good at
providing such entry points; see e.g. <a href="http://fusesource.com/docs/esb/4.2/jaxws/JAXWSCustomTypeMappingJavaType.html" rel="noreferrer">a JAXB example in Java</a> or <a href="http://lxml.de/element_classes.html" rel="noreferrer">lxml in Python</a>. But most code bases do <em>not</em> provide
such extensions. They&#39;re going to hand you back the classes they were built with and
know about. It generally will not make sense to proxy their results into your custom
results just so you can use a purely object-oriented type selector.
If you&#39;re going to do type discrimination, you&#39;re going to have to do it
relatively crudely. Your type testing code then looks quite appropriate.</p></li><li><p><strong>Poor person&#39;s generics/multiple dispatch.</strong> You want to accept a variety of different types to your
code, and feel that having an array of very type-specific methods isn&#39;t graceful. <code>public void add(Object x)</code> seems logical, but not an array of <code>addByte</code>, <code>addShort</code>, <code>addInt</code>, <code>addLong</code>, <code>addFloat</code>, <code>addDouble</code>, <code>addBoolean</code>, <code>addChar</code>, and <code>addString</code> variants (to
name a few). Having functions or methods that take a high super-type and then
determine what to do on a type-by-type basis--they&#39;re not going to win you the
Purity Award at the annual Booch-Liskov Design Symposium, but
dropping the <a href="http://en.wikipedia.org/wiki/Hungarian_notation" rel="noreferrer">Hungarian naming</a> will give you a simpler API. In a sense, your <code>is-a</code> or <code>is-instance-of</code> testing
is simulating generic or multi-dispatch in a language context that doesn&#39;t natively
support it.</p><p>Built-in language support for both <a href="http://en.wikipedia.org/wiki/Generic_programming" rel="noreferrer">generics</a> and <a href="http://en.wikipedia.org/wiki/Duck_typing" rel="noreferrer">duck typing</a> reduce the need
for type checking
by making &#34;do something graceful and appropriate&#34; more likely. The <a href="http://en.wikipedia.org/wiki/Multiple_dispatch" rel="noreferrer">multiple
dispatch</a> / interface selection
seen in languages like Julia and Go similarly replace direct type testing with
built-in mechanisms for type-based selection of &#34;what to do.&#34;
But not all languages support these. Java e.g. is generally single-dispatch,
and its idioms are not super-friendly to duck typing.</p><p>But even with all these type discrimination features--inheritance, generics, duck typing,
and
multiple-dispatch--it&#39;s sometimes just convenient to have a single, consolidated
routine that makes the fact that you are doing something based on the type of the
object clear and immediate. In <a href="http://en.wikipedia.org/wiki/Metaprogramming" rel="noreferrer">metaprogramming</a> I have found it essentially unavoidable. Whether falling back to
direct type inquires constitutes &#34;pragmatism in action&#34; or &#34;dirty coding&#34;
will depend on your design philosophy and beliefs.</p></li></ol></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/generics-and-type-erasure/'>Generics and Type-erasure</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/type-systems-nominal-vs-structural-explicit-vs-implicit/'>Type systems: nominal vs. structural, explicit vs. implicit</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/why-is-type-inference-useful/'>Why is type inference useful</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/a-good-generic-type-system/'>A good generic type system</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>