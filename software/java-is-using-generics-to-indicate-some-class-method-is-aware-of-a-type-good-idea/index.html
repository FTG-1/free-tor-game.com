<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Is using generics to indicate some class/method is aware of a type good idea &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082817 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082817" class="post-1082817 software type-software status-publish hentry category-software tag-generics tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Is using generics to indicate some class/method is aware of a type good idea</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">generics</span><span class="mr-2 badge badge-info">java</span></p><div class="entry-content"><p>I&#39;m going to use Java for code/idea demonstration.</p><p>Imagine it&#39;s needed to define two interfaces: <em>Observer</em> and <em>Observable</em> (<a href="http://en.wikipedia.org/wiki/Observer_pattern" rel="nofollow">observer pattern</a>). It&#39;s a good idea to have two generic interfaces, so there is no restriction on <em>what is being observed</em>, <em>who is observing it</em> (is even using generics about this?).</p><p>Java has a concrete (non-final) <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html" rel="nofollow">Observable</a> class and an <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html" rel="nofollow">Observer</a> interface. You have to delegate <em>handling observers</em> and <em>notifying them on update</em> to the concrete Observer class. This is one way of implementing the pattern. I don&#39;t know if it&#39;s the best approach (probably is), but for the sake of this example let&#39;s assume every class/type who wants to be observable, must implement the <strong>Observable interface below</strong>, and handle everything itself.</p><p>We should not forget the original Observer and Observable interface/object were implemented in JDK1.0, when generics were not available.</p><p>Now the question: Is this a good idea to merely declare a generic type in an interface to denote that the implementing class needs to be <strong>aware</strong> of some specific type? Or it is totally wrong way of using generics?</p><p>See:</p><pre><code>public interface Observable&lt;T&gt; {
    // Only observers who are aware of type T are allowed.
    // But should really Observable be concerned about it?
    public void registerObserver(Observer&lt;? extends T&gt; o);
} 

// The T here denotes that implementing class will be aware of a type called T,
// (not that it can operate on a range of types).
public interface Observer&lt;T&gt; {
    // Observer is not aware of Observable interface directly. But it knows about T.
    public void update(T arg);
}
</code></pre><p><strong>VS</strong></p><pre><code>public interface Observable {
    // Is it an observer? then it is allowed. That&#39;s all we need to know.
    public void registerObserver(Observer o);

    // Observers will be passed the instance of observable, 
    // then they call this method to fetch arg.
    // something like:
    // for(Observer o: this.observers) o.update(this);
    public &lt;T&gt; T getArg();
} 

public interface Observer {
    // Pass me an Observable who returns T and i&#39;ll do the rest!
    public void update(Observable o);
}
</code></pre><p>I feel I&#39;m getting generics totally wrong.</p><p>P.S: Comparing this way of implementing the observer pattern (asking every type to re-implement these interfaces) vs the original java solution (delegation) we realize it&#39;s not really a good idea. It causes a lot of code duplicate. But it helps to understand generics better.</p><p><strong>Update</strong> The actual problem with <code>java.util.Observer</code> is <code>notifyObservers(Object arg)</code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html#notifyObservers(java.lang.Object)" rel="nofollow">[link to doc]</a> where <code>arg</code> is cast at runtime by observers. How can we avoid such cast?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>...the narrow answer to your question is, when you upcast an object into Object, then necessarily you have to downcast it to the specific type later -- unless you&#39;re going to use the Object methods like toString, or else do an end-run around the compiler&#39;s type checking with runtime introspection (e.g. Reflection).</p><p>When you upcast an object (e.g. <code>something.setAsObject(&#34;a string&#34;)</code>), you lose type information about that object. You can get it back in various ways, but generics is how to carry the type on <em>for</em> the compiler to know what to expect later, and doesn&#39;t require the downcast back to what it was before.</p><p>...</p><p>Java generics open the door for <a href="http://en.wikipedia.org/wiki/Parametric_polymorphism" rel="nofollow">parametric polymorphism</a>, which is a different type of polymorphism than we usually talk about in OO. It allows for creating &#34;container&#34; or &#34;wrapper&#34; types that add behaviors independent of underlying types. As wikipedia puts it, <a href="http://en.wikipedia.org/wiki/Parametric_polymorphism" rel="nofollow">&#34; a function or a data type can be written generically so that it can handle values identically without depending on their type&#34;</a></p><p>For example, for a <code>List&lt;T&gt;</code>, what the <code>&lt;T&gt;</code> says is that a list works the same regardless of whether it&#39;s a <code>List&lt;String&gt;</code> or a <code>List&lt;Integer&gt;</code>. You can perform the same operations, and when you&#39;re done you can retrieve objects of whatever type the list contains.</p><p>So, in a funny way, generics allow a type to be <em>unaware</em> of the underlying type. A <code>List&lt;T&gt;</code> <em>doesn&#39;t know, doesn&#39;t care,</em> what type it contains. An <code>Observer&lt;T&gt;</code> <em>doesn&#39;t know, doesn&#39;t care,</em> what type it&#39;s observing. It just provides certain semantics on top of that type.</p><p>This allows the code to avoid a downcast. Downcasts are viewed as bad in OO, because they raises the possibility of a runtime class cast exception -- you lose the benefit of type-checking by the compiler.</p><p>In your example, making your Observer interfaces generic is saying, &#34;I don&#39;t care what type I&#39;m observing, I&#39;m going to provide this Observer mechanism on top of it.&#34; Seems like an apt application of generics.</p><p>(For what it&#39;s worth, when you get into the business of combining parametric polymorphism (i.e. container types that add behaviors) with chained or fluent interfaces, you can create some really powerful and elegant programmatic APIs.)</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-generic-decorator-implementation/'>Java &#8211; Generic decorator implementation</a></li><li class="list-group-item"><a href='../java-design-pattern-for-object-conversion-java/'>Java &#8211; Design pattern for object conversion (java)</a></li><li class="list-group-item"><a href='../java-thoughts-on-refactoring-a-generic-dao/'>Java &#8211; Thoughts on refactoring a generic DAO</a></li><li class="list-group-item"><a href='../java-composite-and-observer-pattern-implementation/'>Java &#8211; Composite and Observer pattern implementation</a></li><li class="list-group-item"><a href='../object-oriented-how-to-avoid-object-cast-after-passing-a-parameter/'>Object-oriented &#8211; How to avoid object cast after passing a parameter</a></li><li class="list-group-item"><a href='../java-designing-generic-type-inheritance-hierarchy/'>Java &#8211; Designing generic type inheritance hierarchy</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>