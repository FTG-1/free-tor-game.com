<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Clean Architecture : Google/Facebook Login and data layer &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076805 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076805" class="post-1076805 software type-software status-publish hentry category-software tag-android tag-clean-code tag-google tag-login"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Clean Architecture : Google/Facebook Login and data layer</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">android</span><span class="mr-2 badge badge-info">clean code</span><span class="mr-2 badge badge-warning">google</span><span class="mr-2 badge badge-primary">login</span></p><div class="entry-content"><p>I&#39;m trying to find a way around the integration of Google and Facebook login for an Android application using the Clean Architecture.</p><p>My application has 3 Android Studio modules :</p><ul><li><strong>presentation</strong> : contains the Interface Adapter layer of the Clean Architecture (Presenters), along with all my UI (Activity, Fragment, Custom Views) (part of the Framework and Driver layer)</li><li><strong>domain</strong> : This is the Use Case layer of the Clean Architecture. It contains the business models, Use Cases, and repository interfaces</li><li><strong>data</strong> : This contains all the Driver and Framework classes, the libraries (retrofit, databases, etc) and repository implementations</li></ul><p>I would like to isolate the login specific SDKs in my <strong>data</strong> layer (which is a separate module in Android Studio).</p><p>The issue I have for this particular use case (Google login for example) is that the SDK need to talk directly to my Activity (<strong>presentation</strong> layer).<br /> Once I have built a specific object, I need to call <em>startActivityForResult</em> from an Activity, and I receive a callback in the <em>onActivityResult</em> method of my launching activity, containing the login informations.</p><p>These 2 things make an obligation to :</p><ul><li>either keep the Google/Facebook SDK dependencies in the <strong>presentation</strong> layer. <strong>BUT this violates the clean architecture principle, I would like to keep these dependencies in my data layer</strong></li><li>or add a call which will go through all my layers (presentation, domain and data) to give back the login informations from the <em>onActivityResult</em> method. <strong>BUT this means that I would modify my domain contract because of a particular login SDK</strong></li></ul><p>None of this seems OK. Do you know a proper way to handle this use case ?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If I understand you right, you&#39;re mapping your modules onto clean architecture like so:</p><blockquote><p>( <strong>Data</strong> ( <strong>Presentation</strong> ( <strong>Domain</strong> ( ) ) ) )</p></blockquote><p><a href="../../../i.stack.imgur.com/0KMMR.jpg" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/0KMMR.jpg" alt="enter image description here"/></a></p><p>That&#39;s fine. Names are a little different than I expected but it can work.</p><blockquote><p>I would like to isolate the login specific SDKs in my data layer (which is a separate module in Android Studio).</p></blockquote><p>That&#39;s a good instinct right there. Knowledge of which specific login SDK you are using should not be allowed to spread. Keep it in one place.</p><blockquote><p>The issue I have for this particular use case (Google login for example) is that the SDK need to talk directly to my Activity (presentation layer). Once I have built a specific object, I need to call startActivityForResult from an Activity, and I receive a callback in the onActivityResult method of my launching activity, containing the login informations.</p><p>These 2 things make an obligation to :</p><p>either keep the Google/Facebook SDK dependencies in the presentation layer. BUT this violates the clean architecture principle, I would like to keep these dependencies in my data layer</p></blockquote><p>Clean Architecture is not a principle but yes, this would be bad.</p><blockquote><p>or add a call which will go through all my layers (presentation, domain and data) to give back the login informations from the onActivityResult method. BUT this means that I would modify my domain contract because of a particular login SDK</p></blockquote><p>Remember it&#39;s knowledge of which specific SDK that we&#39;re using that we wish to isolate. The idea of logging in is definitely something that cuts through the layers. As you descend the layers knowledge about the details about the login should be being stripped away. So google&#39;s login SDK can live in your <code>Data</code> layer but <code>Presentation</code> should just be thinking of this as a login to present in some language/API that the SDK speaks. That is your <code>Output Port</code> here. <code>Domain</code> should be thinking of login without caring what language/API the SDK speaks.</p><p>So to me this seems ok. If you do it right.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-uncle-bobs-clean-architecture-an-entity-model-class-for-each-layer/'>Java &#8211; Uncle Bob&#8217;s clean architecture &#8211; An entity/model class for each layer</a></li><li class="list-group-item"><a href='../java-clean-architecture-too-many-use-case-classes/'>Java &#8211; Clean Architecture &#8211; Too many Use Case Classes</a></li><li class="list-group-item"><a href='../architecture-uncle-bobs-clean-architecture-composed-entities/'>Architecture &#8211; Uncle Bob&#8217;s clean architecture &#8211; Composed entities</a></li><li class="list-group-item"><a href='../java-clean-architecture-apps-that-rely-heavily-on-background-services/'>Java &#8211; Clean Architecture: Apps that rely heavily on background services</a></li><li class="list-group-item"><a href='../access-multiple-entities-in-repository-clean-architecture/'>Access multiple entities in repository &#8211; clean architecture</a></li><li class="list-group-item"><a href='../java-should-business-logic-be-in-the-app-or-in-the-backend/'>Java &#8211; Should business logic be in the app or in the backend</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>