<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>JavaScript extend vs mixin &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075580 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075580" class="post-1075580 software type-software status-publish hentry category-software tag-javascript tag-mixins tag-multiple-inheritance"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">JavaScript extend vs mixin</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">javascript</span><span class="mr-2 badge badge-info">mixins</span><span class="mr-2 badge badge-warning">multiple-inheritance</span></p><div class="entry-content"><p>After having read <a href="http://ericleads.com/2013/02/fluent-javascript-three-different-kinds-of-prototypal-oo/">Eric Elliott&#39;s Fluent JavaScript article</a>, I was and still am toughtful about the way to play with instance prototypes.</p><p>On one side, you have the <em>extending</em> inheritance&#8230;</p><pre><code>var B = function() {} ;
B.prototype = new A() ;
</code></pre><p>Or the new way of doing it&#8230;</p><pre><code>B.prototype = Object.create(A.prototype) ;
</code></pre><p>And on the other side, you have the <em>mixin</em>, creating a mix of multiple prototypes that will be inherited to instances.</p><pre><code>var B = function() {} ;
// Basic mixin from A
for (var m in A.prototype) B.prototype[m] = A.prototype[m] ;
</code></pre><hr/><ul><li><p>In his article, Eric Elliott encourages us to avoid extending types but to compose (mixin) sort of components objects/prototypes instead (see also <a href="https://github.com/stampit-org/stampit">Stampit on github</a>). I totally agree with that.</p></li><li><p>However, it seems to break one major feature (and philosophy) in JavaScript : <strong>Modularity</strong>. What I mean is the fact that altering prototypes will be automatically available for all instances by references.</p></li></ul><p>Here is a basic example of the prototype inheritance :</p><pre><code>var A = function() {} ;
A.prototype.fn = function() { return 1 ; } ;

var a = new A() ;
a.fn() ; // 1

A.prototype.fn = function() { return 2 ; } ;
a.fn() ; // 2
</code></pre><p>And now with an extended prototype :</p><pre><code>var B = function() {} ;
B.prototype = Object.create(A.prototype) ;

var b = new B() ;
b.fn() ; // 2, inherited from A.prototype
</code></pre><p>Okay this is working well, however we can&#39;t inherit from multiple prototypes ; plus classical inheritance is generally avoided.</p><p>The other solution would be mixin then :</p><pre><code>var D = function() {} ;
// Let&#39;s imagine a mixin function mixing D with some prototypes...
mixin(D, A.prototype, C.prototype, R.prototype) ;

var d = new D() ;
d.fn() ; // 2, inherited from A.prototype ? Let&#39;s see...

A.prototype.fn = function() { return 3 ; } ;
d.fn() ; // 2, what a shame...
</code></pre><p>Indeed, mixin only copy all functions from a prototype to another. This means there is no more references between those types, and thus modularity looks broken here (also tested with Stampit).</p><hr/><p>I&#39;m now thinking of a tweaky solution to keep references to original prototype objects and not only the functions inside.</p><p>What about cascading inheritances ?</p><ul><li><p>Not like <code>D &lt;- C &lt;- B &lt;- A</code>, as it will alter <em>B</em> and <em>C</em> and looks restrictive.</p></li><li><p>But like <code>D &lt;- (((p &lt;- A) &lt;- B) &lt;- C)</code>, where <em>p</em> is a private prototype reserved for <em>D</em> only. Neither <em>B</em> nor <em>C</em> will be altered, only <em>p</em> will be a straight cascade inheritance. <em>D</em> will have all methods from the listed prototypes, and if we want to inherit from another one, just restart the process from zero, like <code>D &lt;- ((((p &lt;- A) &lt;- B) &lt;- C) &lt;- R)</code>.</p></li></ul><p>The only drawback I see would be around performances. Each time we add a new inheritance, we&#39;ll have to restart the whole process : Indeed, after inheriting, we add new functions to the prototype (or override some), and this must be always at the end of the process, thus after R inheritance :</p><ul><li><p>Before : <code>D &lt;- ((((p &lt;- A) &lt;- B) &lt;- C) &lt;- {})</code> where <em>{}</em> is the set of new/overriding functions.</p></li><li><p>After : <code>D &lt;- (((((p &lt;- A) &lt;- B) &lt;- C) &lt;- R) &lt;- {})</code>, and not <code>... &lt;- {}) &lt;- R)</code>.</p></li></ul><p><em>Would it be interesting to have a little library for that ? I would be up for doing this, allowing multiple prototype inheritances.</em></p><hr/><p>So&#8230; what do you think about this all ?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>With Stampit, there is intentionally no link between prototype mixins and the original source, and that&#39;s by design, because altering the prototype of any instance could then alter the original prototype.</p><p>In your post, you seem to think that&#39;s a bad thing, but in practice, mutating prototypes after object instantiation has a myriad of wide-ranging side effects that can significantly impact both the robustness of the app (it&#39;s much harder to understand what changes will impact which objects. i.e., you think you&#39;re fixing a bug in your sprite animations, and suddenly your particle rendering engine breaks, because they share a common prototype), and performance (altering prototypes causes JS engines to throw away all their cached object property optimizations, including optimizations that impact the perf of <em>every piece of code that uses any descendent object</em>).</p><p>In other words, what you&#39;re trying to do is widely considered an anti-pattern in the JavaScript community.</p><p>Another interesting point: The new <a href="https://github.com/stampit-org/stamp-specification" rel="nofollow">Stamp specification</a> allows you to pass an instance into the stamp. If you do so, the stamp will not alter the original prototype, and the original prototype will actually appear in the prototype chain, meaning that what you&#39;re suggesting will be possible in the next version of Stampit -- but my warning that altering prototypes after instantiation is an anti-pattern still stands.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/javascript-objects-and-crockfords-the-good-parts/'>JavaScript objects and Crockford&#8217;s The Good Parts</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/object-oriented-how-come-javascript-being-a-prototype-based-language-doesnt-have-an-easy-way-to-access-the-prototype/'>Object-oriented &#8211; How come javascript, being a prototype based language, doesn&#8217;t have an easy way to access the prototype</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/javascript-when-to-use-prototypes-the-correct-usage-of-prototypes-javascript/'>Javascript &#8211; When to use Prototypes &#038; the correct usage of Prototypes ( Javascript )</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/object-oriented-parallel-hierarchies-partly-same-partly-different/'>Object-oriented &#8211; Parallel hierarchies &#8211; partly same, partly different</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>