<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Is it wasteful to create a new database table instead of using enum data type &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064435 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064435" class="post-1064435 software type-software status-publish hentry category-software tag-database-design tag-efficiency tag-enum tag-normalization"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Is it wasteful to create a new database table instead of using enum data type</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">database-design</span><span class="mr-2 badge badge-info">efficiency</span><span class="mr-2 badge badge-warning">enum</span><span class="mr-2 badge badge-primary">normalization</span></p><div class="entry-content"><p>Suppose I have 4 types of services I offer (they are unlikely to change often):</p><ul><li>Testing</li><li>Design</li><li>Programming</li><li>Other</li></ul><p>Suppose I have 60-80 of actual services that each fall into one of the above categories.  For example, &#39;a service&#39; can be &#34;Test Program using technique A&#34; and it is of type &#34;Testing&#34;.</p><p>I want to encode them into a database.  I came up with a few options:</p><p><strong>Option 0:</strong></p><p>Use <code>VARCHAR</code> directly to encode service type directly as a string</p><p><strong>Option 1:</strong></p><p>Use database <code>enum</code>.  But, <a href="https://web.archive.org/web/20180324095351/http://komlenic.com/244/8-reasons-why-mysqls-enum-data-type-is-evil/" rel="noreferrer">enum is evil</a></p><p><strong>Option 2:</strong></p><p>use two tables:</p><pre><code>service_line_item (id, service_type_id INT, description VARCHAR);
service_type (id, service_type VARCHAR);
</code></pre><p>I can even enjoy referential integrity:</p><pre><code>ALTER service_line_item 
    ADD FOREIGN KEY (service_type_id) REFERENCES service_type (id);
</code></pre><p>Sounds good, yes?</p><p>But I still have to encode things and deal with integers, i.e when populating the table.  Or I have to create elaborate programming or DB constructs when populating or dealing with the table.  Namely, JOINs when dealing with the database directly, or creating new object oriented entities on the programming side, and making sure I operate them correctly.</p><p><strong>Option 3:</strong></p><p>Don&#39;t use <code>enum</code>, do not use two tables, but just use an integer column</p><pre><code>service_line_item (
    id,
    service_type INT,        -- use 0, 1, 2, 3 (for service types)
    description VARCHAR
);
</code></pre><p>This is like a &#39;fake enum&#39; that requires more overhead on the code side of things, like i.e. knowing that <code>{2 == &#39;Programming&#39;}</code> and dealing with it appropriately.</p><p><strong>Question:</strong></p><p>Currently I have implemented it using <strong>Option 2</strong>, guided under concepts</p><ol><li>do not use enum (option 1)</li><li>avoid using a database as a spreadsheet (option 0)</li></ol><p>But I can&#39;t help to feel that seems wasteful to me in terms of programming and cognitive overhead &#8212; I have to be aware of two tables, and deal with two tables, vs one.</p><p>For a &#39;less wasteful way&#39;, I am looking at <code>Option 3</code>.  IT is lighter and requires essentially the same code constructs to operate (with slight modifications but complexity and structure is basically the same but with a single table)</p><p>I suppose ideally it is not always wasteful, and there are good cases for either option, but is there a good guideline as to when one should use Option 2 and when Option 3?</p><p><strong>When there are only two types (binary)</strong></p><p>To add a bit more to this question&#8230; in the same venue, I have a binary option of &#34;Standard&#34; or &#34;Exception&#34; Service, which can apply to the service line item.  I have encoded that using <strong>Option 3</strong>.</p><p>I chose not to create a new table just to hold values {&#34;Standard&#34;, &#34;Exception&#34;}.  So my column just holds {0, 1} and my column name is called <code>exception</code>, and my code is doing a translation from <code>{0, 1} =&gt; {STANDARD, EXCEPTION}</code> (which I encoded as constants in programming language)</p><p>So far not liking that way either&#8230;.. (not liking option 2 nor option 3).<br /> I do find option 2 superior to 3, but with more overhead, and still I cannot escape encoding things as integers no matter which option I use out of 2, and 3.</p><p><strong>ORM</strong></p><p>To add some context, after reading answers &#8211; I have just started using an ORM again (recently), in my case Doctrine 2.  After defining DB schema via Annotations, I wanted to populate the database.  Since my entire data set is relatively small, I wanted to try using programming constructs to see how it works.</p><p>I first populated <code>service_type</code>s, and then <code>service_line_item</code>s, as there was an existing list from an actual spreadsheet.  So things like &#39;standard/exception&#39; and &#39;Testing&#39; are all strings on the spreadsheet, and they have to be encoded into proper types before storing them in DB.</p><p>I found this SO answer: <a href="https://stackoverflow.com/questions/8750724/what-do-you-use-instead-of-enum-in-doctrine2/9057352#9057352">What do you use instead of ENUM in doctrine2?</a>,<br /> which suggested to not use DB&#39;s enum construct, but to use an <code>INT</code> field and to encode the types using &#39;const&#39; construct of the programming language.</p><p>But as pointed out in the above SO question, I can avoid using integers directly and use language constructs &#8212; constants &#8212; once they are defined&#8230;.</p><p>But still &#8230;. no matter how you turn it, if I am starting with <code>string</code> as a type, I have to first convert it to a proper type, even when using an ORM.</p><p>So if say <code>$str = &#39;Testing&#39;;</code>, I still need to have a block somewhere that does something like:</p><pre><code>switch($str):
{ 
    case &#39;Testing&#39;:  $type = MyEntity::TESTING; break;
    case &#39;Other&#39;:    $type = MyEntity::OTHER; break;
}
</code></pre><p>The good thing is you are not dealing with integers/magic numbers [instead, dealing with encoded constant quantities], but the bad thing is you can&#39;t auto-magically pull things in and out of the database without this conversion step, to my knowledge.</p><p>And that&#39;s what I meant, in part, by saying things like &#34;still have to encode things and deal with integers&#34;.  (Granted, now, after Ocramius&#39; comment, I won&#39;t have to deal directly with integers, but deal with named constants and some conversion to/from constants, as needed).</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Option #2, using reference tables, is the standard way of doing it.  It has been used by millions of programmers, and is known to work. It is a <em>pattern</em>, so anyone else looking at your stuff will immediately know what is going on. There exist libraries and tools that work on databases, saving you from lots and lots of work, that will handle it correctly.  The benefits of using it are innumerable.</p><p>Is it wasteful?  Yes, but only slightly.  Any half-decent database will always keep such frequently joined small tables cached, so the waste is generally imperceptible.</p><p>All other options that you described are ad hoc and hacky, including MySQL&#39;s <code>enum</code>, because it is not part of the SQL standard.  (Other than that, what sucks with <code>enum</code> is MySQL&#39;s implementation, not the idea itself.  I would not mind seeing it one day as part of the standard.)</p><p>Your final option #3 with using a plain integer is <em>especially</em> hacky.  You get the worst of all worlds: no referential integrity, no named values, no definitive knowledge within the database of what a value stands for, just arbitrary integers thrown all over the place.  By this token, you might as well quit using constants in your code, and start using hard-coded values instead. <code>circumference = radius * 6.28318530718;</code>.  How about that?</p><p>I think you should re-examine why you find reference tables onerous.  Nobody else finds them onerous, as far as I know.  Could it be that it is because you are not using the right tools for the job?</p><p>Your sentence about having to &#34;encode things and deal with integers&#34;, or having to &#34;create elaborate programming constructs&#34;, or &#34;creating new object oriented entities on the programming side&#34;, tells me that perhaps you may be attempting to do object-relational mapping (ORM) on the fly dispersed throughout the code of your application, or in the best case you may be trying to roll your own object-relational mapping mechanism, instead of using an existing ORM tool for the job, such as Hibernate.  All these things are a breeze with Hibernate.  It takes a little while to learn it, but once you have learned it, you can really focus on developing your application and forget about the nitty gritty mechanics of how to represent stuff on the database.</p><p>Finally, if you want to make your life easier when working directly with the database, there are at least two things that you can do, that I can think of right now:</p><ol><li><p>Create views that join your main tables with whatever reference tables they reference, so that each row contains not only the reference ids, but also the corresponding names.</p></li><li><p>Instead of using an integer id for the reference table, use a CHAR(4) column, with 4-letter abbreviations.  So, the ids of your categories would become &#34;TEST&#34;, &#34;DSGN&#34;, &#34;PROG&#34;, &#34;OTHR&#34;. (Their <em>descriptions</em> would remain proper English words, of course.)  It will be a bit slower, but trust me, nobody will notice.</p></li></ol><p>Finally, when there are only two types, most people just use a boolean column.  So, that &#34;standard/exception&#34; column would be implemented as a boolean and it would be called &#34;IsException&#34;.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-would-you-use-an-enumset-in-this-case/'>Java: would you use an EnumSet in this case</a></li><li class="list-group-item"><a href='../object-oriented-should-i-create-an-enum-mapping-to-the-database-table/'>Object-oriented &#8211; Should I create an Enum mapping to the database table</a></li><li class="list-group-item"><a href='../c-using-scoped-enums-for-bit-flags-in-c/'>C++ &#8211; Using scoped enums for bit flags in C++</a></li><li class="list-group-item"><a href='../how-to-represent-enum-types-in-a-public-api/'>How to represent (enum) types in a public API</a></li><li class="list-group-item"><a href='../how-to-unit-test-a-missing-case-in-a-switch-statement-where-all-cases-are-true/'>How to unit test a missing case in a switch statement where all cases are true</a></li><li class="list-group-item"><a href='../c-is-it-useful-to-keep-definition-entities-in-a-database-vs-using-an-enum/'>C# &#8211; Is it useful to keep &#8216;definition&#8217; entities in a database vs using an enum</a></li><li class="list-group-item"><a href='../java-several-enum-classes-that-declare-constants-with-the-same-names/'>Java &#8211; Several enum classes that declare constants with the same names</a></li><li class="list-group-item"><a href='../java-is-it-better-to-use-strings-or-int-to-reference-enums-outside-the-java-part-of-the-system/'>Java &#8211; Is it better to use strings or int to reference enums outside the java part of the system</a></li><li class="list-group-item"><a href='../database-enum-or-reference-table-when-dealing-with-maps/'>Database &#8211; Enum or reference table when dealing with maps</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>