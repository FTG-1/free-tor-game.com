<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to avoid global state without large function signatures &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076260 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076260" class="post-1076260 software type-software status-publish hentry category-software tag-functional-programming tag-globals tag-state"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to avoid global state without large function signatures</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">functional programming</span><span class="mr-2 badge badge-info">globals</span><span class="mr-2 badge badge-warning">state</span></p><div class="entry-content"><p>So, there are some good answers to this question, namely:<br /> <a href="https://softwareengineering.stackexchange.com/questions/148108/why-is-global-state-so-evil">Why is Global State so Evil?</a></p><p>I have a specific question about the alternatives Mikera proposed as the answer with the second most up-votes. All of them seem like they would be good ways to avoid using global state, but I want to know which of these alternatives is the best performance wise. Obviously this depends on the language you are using, but for my particular question I am asking about JavaScript. However, I think that this could apply to other languages like Java.</p><p>So, say I have a JavaScript function that calls 10 JavaScript functions in series (e.g. using the Node.JS async library in an async.series block, the scoping rules of async making this all the more difficult), and this serial operation requires shared variables to handle the state of the entire operation. This state information is no longer useful after the &#34;parent&#34; function returns. Now, one can avoid some of the need for a shared state by practicing good design while writing the functions, but in my specific case I&#39;ve determined that they all need to read and possible modify the shared state.</p><p>So, I can follow mikera&#39;s approach and:<br /> Instantiate a new function every time this &#34;parent&#34; function is called using a functor to create a closure, for example:</p><pre><code>function newFirstStep(sharedState)
{
    return function firstStep(a,b)
    { 
         //some logic with shared state
    }
}

function parentFunction()
{
    var sharedState = {&#34;functionStartTime&#34;: 1400232233};
    var step1 = newFirstStep(sharedState);
    step1(1, 2);
}
</code></pre><p>or define the functions inside the parent function:</p><pre><code>function parentFunction()
{
    var sharedState = {&#34;functionStartTime&#34;: 1400232233};
    function step1(a,b)
    {
        //logic with shared state
    }
    step1(1,2);
}
</code></pre><p>The second option screams &#34;bad for code re-use&#34; to me, as well as making it difficult to test <code>step1</code>.</p><p>The other alternative is to add an extra context object that I pass into each function call as another argument. When I was trying to figure out how to do this before, I thought it to be extremely clunky and ugly to have to add an extra argument for each shared state variable to every single function just to have the same state, but having just a single context object per mikera&#39;s suggestion means I only have to add one extra argument to each function. This is much more palatable. However, it just &#34;feels&#34; unnecessary to have to pass this around since all of them &#34;share&#34; it. Perhaps I am just way too obsessed over an extremely minor detail?</p><p>Anyway, so here is my question:<br /> If I use either of the possible ways to create a closure (functor or define directly in the parent function), it seems extremely inefficient to have to create 10 brand new functions <strong>every time</strong> I call this parent function. I mean, 95% of the functions are already defined. This just seems really inefficient&#8230; and I would feel the same way about doing that in a language like Java (creating new instances of objects all the time just to get a shared state).</p><p>So, is the context argument the best performance wise? I&#39;m tearing my hair out trying to decide on whether or not to use functors for each function or adding an extra context object argument to each function signature because none really seem like a &#34;great&#34; solution. Am I focusing on micro-micro-optimizations and just need to focus on writing the **** code?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Just write code.  Don&#39;t worry about performance unless performance is shown to be a problem.</p><p>And to the two you have, let me add a third.  Create a base object with all of the desired functions as methods, expecting <code>this</code> to have your state.  Then have your stateful objects set the base object as their <code>prototype</code>.  And now your methods simply exist, and get called, and state is passed around without having another visible parameter.</p><p>I am not a JavaScript programmer, and so don&#39;t have a strong opinion about which of these is best.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../why-is-global-state-so-evil/'>Why is Global State so Evil</a></li><li class="list-group-item"><a href='../are-closures-considered-impure-functional-style/'>Are closures considered impure functional style</a></li><li class="list-group-item"><a href='../using-queues-to-decouple-functions-avoid-direct-calling/'>Using queues to decouple functions/avoid direct calling</a></li><li class="list-group-item"><a href='../parametrize-methods-vs-global-variables/'>Parametrize methods vs global variables</a></li><li class="list-group-item"><a href='../c-when-programming-in-functional-style-do-you-have-a-single-application-state-that-you-weave-through-the-application-logic/'>C# &#8211; When programming in Functional style, do you have a single application state that you weave through the application logic</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>