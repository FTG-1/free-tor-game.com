<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; How to solve circular dependency &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063132 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063132" class="post-1063132 software type-software status-publish hentry category-software tag-circular-dependency tag-dependency-analysis tag-design tag-object-oriented-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; How to solve circular dependency</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">circular-dependency</span><span class="mr-2 badge badge-info">dependency analysis</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">object-oriented-design</span></p><div class="entry-content"><p>I have three classes that are circular dependant to each other:</p><p>TestExecuter execute requests of TestScenario  and save a report file using ReportGenerator class.<br /> So:</p><ul><li>TestExecuter depends on ReportGenerator to generate the report</li><li>ReportGenerator depends on TestScenario and on parameters set from TestExecuter.</li><li>TestScenario depends on TestExecuter.</li></ul><p>Can&#39;t figure out how to remove thoses dependencies.</p><pre class="lang-java prettyprint-override"><code>public class TestExecuter {

  ReportGenerator reportGenerator;  

  public void getReportGenerator() {
     reportGenerator = ReportGenerator.getInstance();
     reportGenerator.setParams(this.params);
     /* this.params several parameters from TestExecuter class example this.owner */
  }

  public void setTestScenario (TestScenario  ts) {
     reportGenerator.setTestScenario(ts); 
  }

  public void saveReport() {
     reportGenerator.saveReport();    
  }

  public void executeRequest() {
    /* do things */
  }
}
</code></pre><pre class="lang-java prettyprint-override"><code>public class ReportGenerator{
    public static ReportGenerator getInstance(){}
    public void setParams(String params){}
    public void setTestScenario (TestScenario ts){}
    public void saveReport(){}
}
</code></pre><pre class="lang-java prettyprint-override"><code>public class TestScenario {

    TestExecuter testExecuter;

    public TestScenario(TestExecuter te) {
        this.testExecuter=te;
    }

    public void execute() {
        testExecuter.executeRequest();
    }
}
</code></pre><pre class="lang-java prettyprint-override"><code>public class Main {
    public static void main(String [] args) {
      TestExecuter te = new TestExecuter();
      TestScenario ts = new TestScenario(te);

      ts.execute();
      te.getReportGenerator();
      te.setTestScenario(ts);
      te.saveReport()
    }
}
</code></pre><p>EDIT: in response to an answer, more details about my TestScenario class:</p><pre class="lang-java prettyprint-override"><code>public class TestScenario {
    private LinkedList&lt;Test&gt; testList;
    TestExecuter testExecuter;

    public TestScenario(TestExecuter te) {
        this.testExecuter=te;
    }

    public void execute() {
        for (Test test: testList) {
            testExecuter.executeRequest(test); 
        }
    }
}

public class Test {
  private String testName;
  private String testResult;
}

public class ReportData {
/*shall have all information of the TestScenario including the list of Test */
    }
</code></pre><p>An example of the xml file to be generated in case of a scenario containing two tests:</p><pre class="lang-java prettyprint-override"><code>&lt;testScenario name=&#34;scenario1&#34;&gt;
   &lt;test name=&#34;test1&#34;&gt;
     &lt;result&gt;false&lt;/result&gt;
   &lt;/test&gt;
   &lt;test name=&#34;test1&#34;&gt;
     &lt;result&gt;true&lt;/result&gt;
   &lt;/test&gt;
&lt;/testScenario &gt;
</code></pre></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Technically, you can resolve any cyclic dependency by using interfaces, as shown in the other answers. However, I recommend to rethink your design. I think it is not unlikely you can <strong>avoid</strong> the need for additional interfaces completely, while your design becomes even simpler.</p><p>I guess it is not necessary for a <code>ReportGenerator</code> to depend on a <code>TestScenario</code> directly. <code>TestScenario</code> seems to have two responsibilites: it is used for test execution, and it works also as a container for the results. This is a violation of the SRP. Interestingly, by resolving that violation, you will get rid of the cyclic dependency as well.</p><p>So instead of letting the report generator grab data from the test scenario, pass the data explicitly by using some value object. That means, replace</p><pre><code>   reportGenerator.setTestScenario(ts); 
</code></pre><p>by some code like</p><pre><code>reportGenerator.insertDataToDisplay(ts.getReportData()); 
</code></pre><p>The method <code>getReportData</code> needs to have a return type like <code>ReportData</code>, a value object which works as a container for the data to be displayed in the report. <code>insertDataToDisplay</code> is a method which expects an object of exactly that type.</p><p>This way, <code>ReportGenerator</code> and <code>TestScenario</code> will both depend on <code>ReportData</code>, which depends on nothing else, and the first two classes do not depend on each other any more.</p><p>As a second approach: to resolve the SRP violation let <code>TestScenario</code> be responsible for holding the results of a test execution, but not for calling the test executer. Consider to reorganize the code so not the test scenario accesses the test executer, but the test executer is started from outside and writes the results back into the <code>TestScenario</code> object. In the example you showed us, that will be possible by making the access to <code>LinkedList&lt;Test&gt;</code> inside of <code>TestScenario</code> public, and by moving the <code>execute</code> method from <code>TestScenario</code> to somewhere else, maybe directly into a <code>TestExecuter</code>, maybe into a new class <code>TestScenarioExecuter</code>.</p><p>That way, <code>TestExecuter</code> will depend on <code>TestScenario</code> and <code>ReportGenerator</code>, <code>ReportGenerator</code> will depend on <code>TestScenario</code>, too , but <code>TestScenario</code> will depend on nothing else.</p><p>And finally, a third approach: <code>TestExecuter</code> has too many responsibilities, too. It is responsible for executing tests as well as for providing a <code>TestScenario</code> to a <code>ReportGenerator</code>. Put these two responsibilities into two separate classes, and your cyclic dependency will vanish again.</p><p>There may be more variants to approach your problem, but I hope you get the general idea: your core problem are classes with <strong>too many responsibilities</strong>. Solve that problem, and you will get rid of the cyclic dependency automatically.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/java-object-oriented-class-design/'>Java &#8211; Object-Oriented Class Design</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/remove-circular-dependency/'>Remove circular dependency</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/circular-dependency-is-there-a-good-design-to-eliminate/'>Circular dependency &#8211; is there a good design to eliminate</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>