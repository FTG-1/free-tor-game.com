<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; How far to go with unit tests &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078328 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078328" class="post-1078328 software type-software status-publish hentry category-software tag-asp-net-mvc tag-c tag-net"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; How far to go with unit tests</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">asp.net-mvc</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">net</span></p><div class="entry-content"><p>A question asked many times before but with a specific slant twds mvc development.</p><p>I&#39;ve been a very good boy and have been coding all my controller actions with corresponding unit tests which has been great (if a little [read a LOT] repetitive at times). To be honest, I&#39;ve actually created a little T4 template to write most of the bare bones of the intial unit tests and then tweaked as appropriate as per usage. I will admit to not being quite sure how to handle tests in views that contain partialviews &#8211; but that&#39;s a story for another question.</p><p>Now, the difficult part for me to decide upon is just how deep the coverage should be in my service layer. The reason being that some of my service methods (for better or worse) actually perform a variety of linq queries which then supply discreet information to subsequent logic within the method. I know i could (should??) break these methods down to only call the required logic for each linq statement and then apply them within the method. However, in many instances, there is never any reuse of the linq &#39;functions&#39; and therefore it feels that this would refactor the code out a level too far.</p><p>What I&#39;m asking is, with complex logic occurring within a method, is it &#39;good enough&#39; to have a test method that simply asserts the required result and/or expected error, or should every logic line be simulted and tested too. the way I&#39;m seeing it, to do the testing correctly, then the method logic (line by line) should be getting some sort of coverage too. That however (in my naive opinion) could lead to a never ending cycle of trying to keep the test and the implemented method so closely aligned (which i know they should be) as to create a cottage industry in the tests themselves.</p><p>I know my question may offend a few of the TDD devotees who will see this as a no brainer. Not being in the TDD camp, this is a &#39;yes brainer&#39; for me, hence the question.</p><p>btw &#8211; had checked this out for ideas:</p><p><a href="http://dotnetslackers.com/articles/aspnet/Built-in-Unit-Test-for-ASP-NET-MVC-3-in-Visual-Studio-2010-Part-1.aspx" rel="nofollow">http://dotnetslackers.com/articles/aspnet/Built-in-Unit-Test-for-ASP-NET-MVC-3-in-Visual-Studio-2010-Part-1.aspx</a></p><p>looking fwd to the steady downvotes now ðŸ™‚</p><p><strong>[edit]</strong> &#8211; for the benefit of the single (well at the moment single!!) &#39;close&#39; voter. this question is <strong>not</strong> subjective. I&#39;m looking for concensus on a very focussed subject. I&#39;m not attempting to stir up negative passions, I&#39;m not looking to expose flaws in the technology &#8211; i&#39;m a HUGE fan. So please, drop a polite comment for my benefit if voting to close as it may help me to restructure the question if there&#39;s ambiguity or misinformation. this question could benefit a large chunk of the mvc population.</p><p>thank you!!</p><p>jim</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>First off what you are talking about doesn&#39;t sound quite like TDD. TDD implies a test first approach which is about driving the design of your system by following the pattern of <a href="http://www.agiledata.org/essays/tdd.html" rel="nofollow">Test-&gt;Code-&gt;Refactor</a>.  So perhaps your first problem is the purpose of your tests, are you writing them as you code?  If so I would expect that pretty much all of the logic within your test relates back to some unit test.  High code coverage is therefore an indirect result of applying TDD.</p><p>When you are doing TDD you write enough test code to motivate the code you want to write.  You also ensure the test <em>fails</em> first.  Basically ask yourself what is something this method needs to do.  Then you code it, but just enough to make the test pass, if it isn&#39;t what you are looking for then you write additional tests and then refactor the method.</p><p>Code coverage after the fact is not an effective method of measure your adherence to TDD, though you will typically find very high code coverage in code written using TDD do to the fact that all of the code should have been motivated by some test.</p><p>TDD tests serve to both drive the design and document and explain the design to others in plain language (so how you name your tests is very important).</p><p>However none of this rambling really answers your question directly so I&#39;ll just say, you should aim for pretty high code coverage of service (non-UI) code, especially whereever there is non-trival logic, and even better if the tests are written first ;-).  The fact is (though some may disagree) that more tests are generally better.  Many high quality open source projects have far more test code than running code.</p><p>Additionally, tests should be written whenever:</p><ol><li><p>You are writing new code, tests should drive and document your design and explain your assumptions about what the code should do.  The should be written before you code.</p></li><li><p>You found a bug, a failing test should demonstrate the bug. When the bug is fixed the test should pass.</p></li><li><p>You change code in a way that changes the nature of what a method or class does (though if a lot of tests fail when one area of the code changes this could indicate brittle tests).  This keeps the tests documenting the code correctly.</p></li></ol><p>Personally, I have found that learning TDD is an interesting challenge, and it takes time to develop a good &#34;gut feeling&#34; for it. Practice, practice, practice has been the best way to learn for me.  That and reading test code from open source projects and now also contributing to them while writing new tests with my changes.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-how-to-structure-unit-tests-for-a-gui-app-using-c-and-nunit/'>C# &#8211; How to structure unit tests for a GUI app using C# and NUnit</a></li><li class="list-group-item"><a href='../c-how-to-unit-test-audio/'>C# &#8211; How to unit test audio</a></li><li class="list-group-item"><a href='../c-is-this-method-of-writing-unit-tests-correct/'>C# &#8211; Is this method of writing Unit Tests correct</a></li><li class="list-group-item"><a href='../unit-testing-where-should-i-draw-the-line-between-unit-tests-and-integration-tests-should-they-be-separate/'>Unit-testing &#8211; Where should I draw the line between unit tests and integration tests? Should they be separate</a></li><li class="list-group-item"><a href='../c-ny-real-value-in-unit-testing-a-controller-in-asp-net-mvc/'>C# &#8211; ny real value in unit testing a controller in ASP.NET MVC</a></li><li class="list-group-item"><a href='../c-unit-test-a-crud-controller-mvc/'>C# &#8211; Unit Test a CRUD Controller MVC</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>