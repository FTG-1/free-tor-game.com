<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Semantic Versioning in OpenAPI with string &#8220;enum&#8221;: new values OK &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1085164 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1085164" class="post-1085164 software type-software status-publish hentry category-software tag-enum tag-openapi tag-semantic-versioning"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Semantic Versioning in OpenAPI with string &#8220;enum&#8221;: new values OK</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">enum</span><span class="mr-2 badge badge-info">openapi</span><span class="mr-2 badge badge-warning">semantic-versioning</span></p><div class="entry-content"><p>My team is preparing to add new capabilities to an <a href="https://github.com/OAI/OpenAPI-Specification" rel="nofollow noreferrer">OpenAPI</a> contract and our implementation of it.  There are pre-existing clients.  We are planning to take our API from v1.1 to v1.2 while fully respecting <a href="http://semver.org/" rel="nofollow noreferrer">semantic versioning</a>.</p><p>Our team is debating whether we must go to v2.0 instead of v1.2 if we add new possible values to a type definition like this (in yaml):</p><pre><code>Thing:
  type: object
  properties:
    field:
      type: string
      enum:
        - PreExistingValue1
        - PreExistingValue2
        - NewValue1
        - NewValue2
</code></pre><p>With <code>NewValue1</code> and <code>NewValue2</code> being newly introduced possibilities in v1.2.  The v1.1 API does not have these two values in the enum.</p><p><strong>EDIT</strong>: Our <code>Thing</code> is only used in the <em>response</em> data.</p><p>Basically my question is, is it OK to do this with a <em>minor</em> version increase, or must we bump up the <em>major</em> version number to change the API in this way?</p><p>I&#39;ll try not to reveal which side of this argument I&#39;m on and represent the for/against arguments as neutrally as I can:</p><ul><li>Arguing for only a minor version increase, one team member stated that ultimately, this field is a string, and that isn&#39;t changing, so it is OK for this string to take on new values and that is not a threat to backwards compatibility.  It is reasonable to expect a client to ignore a string value it does not understand in this field.</li><li>Arguing for only a minor version increase, one team member stated that the OpenAPI enum is &#34;just documentation&#34;, that fundamentally we are only declaring a string field in the contract, nothing more.</li><li>Arguing for a major version increase, one team member stated that because the contract defines it as an enum, the contract in effect carries a guarantee that the string will only have certain values; and with this change that guarantee is now broken.  Depending on choice of serialization framework in the client implementation, data using the new values may actually be rejected within framework code automatically.</li></ul><p>To me, this difference of opinion within the team seems to boil down to the question of how &#34;strong&#34; the enum concept is in OpenAPI &#8211; whether it is to be considered as part of the type definition or, as the one team member said, &#34;just documentation&#34;.</p><p>Within the specification, <code>enum</code> refers to <a href="https://datatracker.ietf.org/doc/html/draft-fge-json-schema-validation-00#section-5.5.1" rel="nofollow noreferrer">this IETF spec</a> which states of enum instances:</p><blockquote><p>An instance validates successfully against this keyword if its value is equal to one of the elements in this keyword&#39;s array value.</p></blockquote><p>But the specification does not say &#34;if and only if&#34;.  It just says &#34;if&#34;.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>It&#39;s my understanding that you have to increment the major version number if your code introduces breaking changes.</p><p>If <code>Thing</code> is used strictly for input and you&#39;re now accepting a couple of new values, then you won&#39;t break any existing code.</p><p>However, if you&#39;re returning <code>Thing</code> and I have code like</p><pre><code>switch (myThing) {
    case PreExistingValue1:
        doProcess1(myThing);
        break;
    case PreExistingValue2:
        doSomethingElse();
        break;
    default:
        throw new NotImplementedException();
}
</code></pre><p>returning new values <em>will</em> break my code.  That&#39;s something I&#39;d like to know about.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-would-you-use-an-enumset-in-this-case/'>Java: would you use an EnumSet in this case</a></li><li class="list-group-item"><a href='../c-using-scoped-enums-for-bit-flags-in-c/'>C++ &#8211; Using scoped enums for bit flags in C++</a></li><li class="list-group-item"><a href='../is-it-wasteful-to-create-a-new-database-table-instead-of-using-enum-data-type/'>Is it wasteful to create a new database table instead of using enum data type</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>