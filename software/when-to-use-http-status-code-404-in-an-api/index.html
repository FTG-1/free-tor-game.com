<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>When to use HTTP status code 404 in an API &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063022 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063022" class="post-1063022 software type-software status-publish hentry category-software tag-api tag-http tag-http-response"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">When to use HTTP status code 404 in an API</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">http</span><span class="mr-2 badge badge-warning">http-response</span></p><div class="entry-content"><p>I am working on a project and after arguing with people at work for about more than a hour. I decided to know what people on stack-exchange might say.</p><p>We&#39;re writing an API for a system, there is a query that should return a tree of Organization or a tree of Goals.</p><p>The tree of Organization is the organization in which the user is present, In other words, this tree should always exists. In the organization, a tree of goal should be always present. (that&#39;s where the argument started). In case where the tree doesn&#39;t exist, my co-worker decided that it would be right to answer response with status code 200. And then started asking me to fix my code because the application was falling apart when there is no tree.</p><p>I&#39;ll try to spare flames and fury.</p><p>I suggested to raise a 404 error when there is no tree. It would at least let me know that something is wrong. When using 200, I have to add special check to my response in the success callback to handle errors. I&#39;m expecting to receive an object, but I may actually receive an empty response because nothing is found. It sounds totally fair to mark the response as a 404. And then war started and I got the message that I didn&#39;t understand HTTP status code schema. So I&#39;m here and asking what&#39;s wrong with 404 in this case? I even got the argument &#34;It <strong>found</strong> nothing, so it&#39;s right to return 200&#34;. I believe that it&#39;s wrong since the tree should be always present. If we found nothing and we are expecting something, it should be a 404.</p><h1>More info,</h1><p>I forgot to add the urls that are fetched.</p><p>Organizations</p><pre><code>/OrgTree/Get
</code></pre><p>Goals</p><pre><code>/GoalTree/GetByDate?versionDate=...
/GoalTree/GetById?versionId=...
</code></pre><p>My mistake, both parameters are required. If any versionDate that can be parsed to a date is provided, it will return the closes revision. If you enter something in the past, it will return the first revision. If by Id with a id that doesn&#39;t exists, I suspect it&#39;s going to return an empty response with 200.</p><h3>Extra</h3><p>Also, I believe the best answer to the problem is to create default objects when organizations are created, having no tree shouldn&#39;t be a valid case and should be seen as an undefined behavior. There is no way an account can be used without both trees. For that reasons, they should be always present.</p><h1>also I got linked this (one similar but I can&#39;t find it)</h1><p><a href="../../../viswaug.files.wordpress.com/2008/11/http-headers-status1.png">http://viswaug.files.wordpress.com/2008/11/http-headers-status1.png</a></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>When in doubt, <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" rel="noreferrer">consult the documentation</a>. Reviewing the W3C definitions for HTTP Status codes, gives us this:</p><blockquote><p>200 OK - The request has succeeded. The information returned with the response is dependent on the method used in the request.</p><p>404 Not Found - The server has not found anything matching the Request-URI.</p></blockquote><p>In the context of your API, it very much depends on how queries are created and how objects are retrieved. But, my interpretation has always been that:</p><ul><li>If I ask for a particular object, and it exists return <code>200</code> code, if it doesn&#39;t exist return the correct <code>404</code> code.</li><li>But, if I ask for a set of objects that match a query, a null set is a valid response and I want that returned with a <code>200</code> code. The rationale for this is that the query was valid, it succeeded and the query returned nothing.</li></ul><p>So in this case <strong>you are correct</strong>, the service isn&#39;t <strong>searching</strong> for &#34;a specific thing&#34; it is <strong>requesting</strong> a particular thing, if that thing isn&#39;t found say that clearly.</p><p>I think Wikipedia puts it best:</p><blockquote><p>200 OK - ... The actual response will depend on the request method used. In a GET request, the response will contain an entity corresponding to the requested resource.</p><p>404 Not Found - The requested resource could not be found but may be available again in the future. Subsequent requests by the client are permissible.</p></blockquote><p>Seems pretty clear to me.</p><h2>Regarding the example requests</h2><pre><code>/GoalTree/GetByDate?versionDate=...
/GoalTree/GetById?versionId=...
</code></pre><p>For the format, you said, you always return the nearest revision to that date. It will never not return an object, so it should always be returning <code>200 OK</code>. Even if this were able to take a date range, and the logic were to return all objects within that timeframe returning 200 OK - 0 Results is ok, as that is what the request was for - the set of things that met that criteria.</p><p>However, the latter is different as you are asking for a <em>specific object</em>, presumably unique, with that identity. Returning <code>200 OK</code> in this case is wrong as the requested resource doesn&#39;t exist and is <strong>not found</strong>.</p><h2>Regarding choosing status codes</h2><ul><li><strong>2xx codes</strong> Tell a User Agent (UA) that <em>it did the right thing</em>, the request worked. It can keep doing this in the future.</li><li><strong>3xx codes</strong> Tell a UA what you asked probably used to work, but that thing is now elsewhere. In future the UA might <em>consider just going to the redirect</em>.</li><li><strong>4xx codes</strong> Tell a UA <em>it did something wrong</em>, the request it constructed isn&#39;t proper and shouldn&#39;t try it again, without at least some modification.</li><li><strong>5xx codes</strong> Tell a UA <em>the server is broken somehow</em>. But hey that query could work in the future, so there is no reason not to try it again. (except for 501, which is more of a 400 issue).</li></ul><p>You mentioned in a comment using a 5xx code, but your system is working. It was asked a query that doesn&#39;t work and needs to communicate that to the UA. No matter how you slice it, this is 4xx territory.</p><h2>Consider an alien querying our solar system</h2><blockquote><p>Alien: Computer, please tell me all planets that humans inhabit.</p><blockquote><p>Computer: 1 result found. Earth</p></blockquote><p>Alien: Computer, please tell me about <strong>Earth</strong>.</p><blockquote><p>Computer: Earth - Mostly Harmless.</p></blockquote><p>Alien: Computer, please tell me about all planets humans inhabit, outside the asteroid belt.</p><blockquote><p>Computer: 0 results found.</p></blockquote><p>Alien: Computer, please destroy Earth.</p><blockquote><p>Computer: 200 OK.</p></blockquote><p>Alien: Computer, please tell me about <strong>Earth</strong>.</p><blockquote><p>Computer: 404 - Not Found</p></blockquote><p>Alien: Computer, please tell me all planets that humans inhabit.</p><blockquote><p>Computer: 0 results found.</p></blockquote><p>Alien: Victory for the mighty Irken Empire!</p></blockquote></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../web-development-should-i-hide-certain-http-status-codes/'>Web-development &#8211; Should I hide certain HTTP status codes</a></li><li class="list-group-item"><a href='../rest-do-web-applications-use-http-as-a-transport-layer-or-do-they-count-as-an-integral-part-of-the-http-server/'>Rest &#8211; Do web applications use HTTP as a transport layer, or do they count as an integral part of the HTTP server</a></li><li class="list-group-item"><a href='../rest-json-api-specification-when-do-i-need-to-return-a-404-not-found/'>Rest &#8211; JSON API specification : When do I need to return a 404 not found</a></li><li class="list-group-item"><a href='../what-http-status-code-to-return-if-multiple-actions-finish-with-different-statuses/'>What HTTP status code to return if multiple actions finish with different statuses</a></li><li class="list-group-item"><a href='../java-spring4-error-handling-and-http-status-codes-returned-for-rest-services/'>Java &#8211; Spring4 error handling and HTTP status codes returned for REST services</a></li><li class="list-group-item"><a href='../rest-how-to-distinguish-when-a-404-status-is-real-in-restful-service/'>Rest &#8211; How to Distinguish When a 404 Status is Real in RESTFul Service</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>