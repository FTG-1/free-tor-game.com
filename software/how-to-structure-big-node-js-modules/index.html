<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to structure big Node.JS modules &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1085533 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1085533" class="post-1085533 software type-software status-publish hentry category-software tag-modules tag-node-js tag-project-structure"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to structure big Node.JS modules</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">modules</span><span class="mr-2 badge badge-info">node.js</span><span class="mr-2 badge badge-warning">project-structure</span></p><div class="entry-content"><p>I am working on a rather big Node.JS project with several thousand lines of code. It&#39;s not a homepage, but acts more like a configurable general purpose application server. As such it brings some parts which are useful in most projects I do.</p><p>The problem is that I easily lose overview in the core modules. So I did a bit of research and came up with an interesting structure based on C++ Header/Code file structures. I want to know if this structure is good in the long run (maintainability, testability, extensibility), how it can be improved and if there is already a (better) &#34;standard&#34; way of doing the structuring I did not find.</p><p>The structure has three kinds of files, where xxx is the module name and yyy is the method name.</p><ul><li>xxx.h.js: The &#34;header&#34; file, which contains the class and method declarations</li><li>xxx.yyy.c.js: The &#34;code&#34; files, which contain one method each (and possibly local helper functions)</li><li>index-xxx.js: The glue and main file for the module</li></ul><p>I would like to structure all my sub-modules like this and then use a loading-mechanism to load all modules, namespace them and finally use them globally.</p><p>Here&#39;s an example:</p><p><code>package.json</code></p><pre><code>{
    &#34;name&#34;: &#34;Foo&#34;,
    &#34;version&#34;: &#34;1.0.0&#34;,
    &#34;description&#34;: &#34;Does something in the core system&#34;,
    &#34;author&#34;: &#34;Marco Alka&#34;,
    &#34;main&#34;: &#34;index-foo.js&#34;
}
</code></pre><p></p><pre><code>// index-foo.js
&#39;use strict&#39;;

// return class
module.exports = require(&#39;./foo.h.js&#39;);

// overwrite definitions with declarations
// this part can and most probably will be done generically by my module loader. I write it down for easier overview.
require(&#39;./src/foo.bar.c.js&#39;);
require(&#39;./src/foo.baz.c.js&#39;);
</code></pre><p></p><pre><code>// foo.h.js
&#39;use strict&#39;;

/**
 * Easy-to-read interface/class
 * No obstructive code in my way
 */
module.exports = class Foo {

  constructor() {}

  /**
   * Put comments here
   */
  bar() { throw &#39;Not Implemented&#39;; }

  /**
   * More comments for methods
   * See how the method declarations+documentations nicely dominate the file?
   */
  baz() { throw &#39;Not Implemented&#39;; }
}
</code></pre><p></p><pre><code>// src/foo.bar.c.js
&#39;use strict&#39;;

// include header
var h = require(&#39;../foo.h.js&#39;);

// implement method Foo::bar
h.prototype.bar = function () {

  console.log(&#39;Foo.bar&#39;);
}
</code></pre><p></p><pre><code>// src/foo.baz.c.js
&#39;use strict&#39;;

// include header
var h = require(&#39;../foo.h.js&#39;);

// implement method Foo::bar
h.prototype.baz = function () {

  console.log(&#39;Foo.baz&#39;);
}
</code></pre><p> Example on how to use the whole thing from within the root folder</p><pre><code>&#39;use strict&#39;;

// later on a module loader will be used which loads the folder as module instead of the index file directly
var F = require(&#39;./index-foo.js&#39;);

// make object
var foo = new F();

// call method
foo.bar();
</code></pre><p>Output in console: <code>Foo.bar\n</code></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I&#39;m a newbie and I&#39;m pretty sure this is an opinion-based answer which is really outside the scope of the board.   With that, here&#39;s my practical experience:</p><ul><li>There are no implicitly bad ways to structure code, so long as the structure can be described simply.</li><li>The only thing bad about poor code structure is lack of discipline: if you consistently follow the structure when developing, then you or anyone else editing your code should be able to discern the context quickly.</li><li>Even if you are the only person on your development team (which is sounds like you are), use Git or some other kind of repository with good robust explanations for what you changed and why.</li></ul><p>It&#39;s been my experience that code structures are not usually the culprits for making things difficult to manage.   It&#39;s logical architecture and documentation.   If you have a good logical architecture that clearly defines modularity of functionality and you document what you&#39;ve done, it will be an investment that pays off.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-architecting-a-modular-service-application/'>Architecture &#8211; Architecting a modular service application</a></li><li class="list-group-item"><a href='../javascript-node-js-app-private-modules-where-to-put-them/'>Javascript &#8211; Node.js app private modules. Where to put them</a></li><li class="list-group-item"><a href='../javascript-how-should-i-structure-modules-in-an-angular-js-application/'>Javascript &#8211; How should I structure modules in an Angular.js application</a></li><li class="list-group-item"><a href='../unit-testing-unit-testing-in-node-js-and-mocking-modules/'>Unit-testing &#8211; Unit testing in node.js and mocking modules</a></li><li class="list-group-item"><a href='../python-setting-up-folders-and-importing-modules-in-python/'>Python &#8211; Setting up folders and importing modules in Python</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>