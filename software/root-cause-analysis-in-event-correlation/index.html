<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Root cause analysis in event correlation &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078280 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078280" class="post-1078280 software type-software status-publish hentry category-software tag-algorithms tag-event"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Root cause analysis in event correlation</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">algorithms</span><span class="mr-2 badge badge-info">event</span></p><div class="entry-content"><p>I&#39;m to write an event correlator module for the device we produce. When a fault occurs the resulting avalanche of logs about derivative conditions from various modules is readable only to a person skilled in the task &#8211; a layman will be utterly lost. The event correlator is supposed to solve this problem &#8211; find root cause and present a friendly message guiding the user to the origin of the problem.</p><p>I can collect tokenized events from all the modules and observe the internal state of the main module. I can even write history a few seconds back.</p><p>Now, the hard part and my actual question: writing the analysis algorithm. I tried the <a href="http://en.wikipedia.org/wiki/Event_correlation#Step-by-step_decomposition" rel="nofollow">Wikipedia page</a>, but it&#39;s awfully sketchy on the specific Root Cause Analysis part, and the <a href="http://en.wikipedia.org/wiki/Root_cause_analysis" rel="nofollow">RCA article</a> linked is more about a business practice than about something that can be phrased as computer algorithm. The net is full of event correlators as software to be bought or used, but I have trouble finding anything about making one.</p><p>So, summarizing:</p><ul><li>a history of events and states dumped at the moment of error (the &#34;black box&#34;)</li><li>a set of rules (preferably in human-editable form in some external file)</li><li>a set of root causes, derived from the events according to the rules.</li><li>a program interpreting these rules, then processing the black box through them and producing a set of root causes matching.</li></ul><p>How do I even approach writing something like that?</p><ul><li>What would be the format of the ruleset file and a parser for the rules &#8211; lexical parsing alone is easy enough but what would it produce?</li><li>How to represent <em>a rule</em> internally? As some kind of object probably, but how would that object look like? How to chain the rules together in a decision tree?</li><li>processing black box data through these rules. Seems an awful lot like running data through a script, but the data contains a lot of of noise. How to assure obtaining <em>some</em> results?</li></ul><p>Now, some caveats:</p><ul><li><p>I&#39;d prefer to avoid bayesian or other statistical approach &#8211; I&#39;d prefer a fully deterministic solution so that given set of conditions will produce the same result in laboratory analysis, and the precise set of rules is fully human-readable and human-editable.</p></li><li><p>Not all components are directly monitored, and some faults can be derived only indirectly. The root cause will not always be one particular message in the black box. Sometimes it will be something that led to a certain set of logs.</p></li><li><p>Not always the sequence of events is maintained, as messages sometimes are delayed on the message bus.</p></li><li><p>If the main power goes out, we&#39;re not guaranteed to capture all the data.</p></li></ul><p>Examples:</p><p>1.</p><ul><li>Module 1 reports halt; blockade line is active.</li><li>Module 2 reports halt; blockade line is active.</li><li>Module 4 reports halt; blockade line is active.</li><li>PSU module reports external power is okay, internal power has been disabled (per blockade line.)</li></ul><p>Root cause: Module 3 failed gracefully, serious hardware condition activated the blockade line correctly but it was unable to send its message out.</p><p>2.</p><ul><li>Module 1 reports halt; blockade line is active.</li><li>Module 2 reports halt; blockade line is active.</li><li>Module 4 reports halt; blockade line is active.</li><li>PSU module reports external power is okay, internal power has been disabled (per blockade line.)</li><li>Module 3 reports halt; No power in its output line. Activating the blockade line.</li></ul><p>Root cause: Burnt fuse of output line of Module 3</p><p>Now Module 3 was mean by sending out its message last, while pulling the blockade line first.</p><p>3.</p><ul><li>Module 3 reports halt; No power in its output line. Activating the blockade line.</li><li>Module 1 reports halt; blockade line is active.</li><li>PSU module reports external power is okay, internal power has been disabled (per blockade line.)</li><li>Module 2 reports halt; No power in its output line. Activating the blockade line.</li><li>Module 4 reports halt; No power in its output line. Activating the blockade line.</li></ul><p>Root cause: Main fuse of internal power disengaged. Likely reason: short circuit in the PSU or fuse disengaged manually.</p><p>Note how Module 1 got late with detecting lack of power, say, its output was inactive and the capacitors kept it active long enough that it detected blockade line (engaged by other modules) first, before detecting power failure. Also, normally PSU would report a fault condition of internal power going out, but it&#39;s simply slower &#8211; less sensitive than the output modules, and they will pull the blockade line before it detects power is out, and by then it will assume this is correct behavior. The difference between cases 2. and 3. is only the number of simultaneous &#34;no power&#34; faults: it&#39;s extremely unlikely several fuses go out at the same time, while using the main fuse to disable power for service works is the &#34;traditional&#34; approach and it is expectable at least a few modules will detect &#34;power out&#34; if the main fuse is disengaged.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>While this is a large and involved topic and hardly answerable as such, let me give you few pointers for your main questions:</p><blockquote><p>What would be the format of the ruleset file and a parser for the rules - lexical parsing alone is easy enough but what would it produce?</p></blockquote><p>The parser entirely depends on your <em>events</em>. Do you have access to in-memory events? do you have to parse the resulting log files? In either case, you can consider this a preparation of  input for the algorithm.</p><p>The most precise would be in-memory access to the running software/events, but from what you described, this may probably be impossible due to real-time requirements. On the other hand, if you have to parse the log-files and then derive some meaning from them, you ought to ensure that the logfiles are meaningfully parseable, i.e. developers should know that the log-files will be parsed by a tool and how the log messages should look like. If you want to support arbitrary log messages, you&#39;ll get into deep trouble.</p><p>Also take care not to bind yourself too close to the actual log message. Keep in mind the amount of change required if someone changes the spelling/wording of a log messages and how that affects your tool. Just think: &#34;Oh btw, there was a typo in the message and I fixed it.&#34; - &#34;Oh thanks.. so that&#39;s why we&#39;re getting the RCA wrong&#34;. You don&#39;t wanna go there.</p><blockquote><p>How to represent a rule internally? As some kind of object probably, but how would that object look like? How to chain the rules together in a decision tree?</p></blockquote><p>Why reinent the wheel? There are several industry-strength rule engines available, which have that already covered pretty well (f.ex. <a href="http://www.jboss.org/drools/drools-expert.html" rel="nofollow">JBoss&#39; Drools Expert</a>). Of course, you still need to do the usual evaluation-cycle to find out if a rule engine is suitable for your project&#39;s specific needs.</p><p>A completely different approach would be to use a programming language that is already based on rules. However, this requires that you/your team/your organisation is open-minded towards polyglot programming. Also bear in mind, that these languages are not exactly mainstream. We&#39;re talking about things like <a href="http://www.swi-prolog.org/" rel="nofollow">Prolog</a>, <a href="http://en.wikipedia.org/wiki/Datalog" rel="nofollow">Datalog</a>, or <a href="http://www.constraint-handling-rules.org/" rel="nofollow">CHR</a> here.</p><blockquote><p>processing black box data through these rules. Seems an awful lot like running data through a script, but the data contains a lot of of noise. How to assure obtaining some results?</p></blockquote><p>First off, rule engines are not the most performant things. They are supposed to work on a very high abstraction level, so it makes sense to filter the input first. As mentioned above, you shouldn&#39;t work with black box data, because it simply is way too complex (think: full blown natural language processing!). There needs to be some order or structure to the data you have to process.</p><p>It will be part of the input preparation to ensure that you filter out ineligible or otherwise uninteresting parts of the data. You may also want to consider an intermediate language where the log message / event data is represented in a standardized way that is fully under your control. In that case, changes to the original data only need to be adapted in the original parser and your tool&#39;s core remains unaffected.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/should-event-listeners-be-held-in-weak-references/'>Should event listeners be held in weak references</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/ddd-where-to-place-domain-event-handlers/'>DDD: Where to place domain event handlers</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>