<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Adding more responsibilities to Activities in a flexible way &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1085087 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1085087" class="post-1085087 software type-software status-publish hentry category-software tag-activity tag-android tag-design-patterns tag-strategy"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Adding more responsibilities to Activities in a flexible way</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">activity</span><span class="mr-2 badge badge-info">android</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">strategy</span></p><div class="entry-content"><p>I am considering how I can add tasks to Android Activities in a flexible way. I can only use implementation inheritance for one thing in Java and I would like to use it, if I use it at all, for something else.</p><p>I think I need to draw the <em>domain</em> first a bit:</p><p><em>Activities</em> are UI windows basically, with intrinsic lifecycle responsibilities enforced by the API. The <em>tasks</em> I speak of are UI-visible popovers that do some offline stuff and then disappear. They stem from AsyncTasks. The code of all of this is not a problem, I have this already, even pretty generalized with interfaces. I&#39;m looking at further design improvements I can make.</p><p>There are many type of activities and they could all work with some types of tasks. <em>For instance</em> a search window would have a task that adds one of the search results, let&#39;s say it&#39;s a book, to the collection of books in the main application. It allows you to add multiple, hence the popover. A window that displays the collection has a task that lets you export a book to an external file format. It won&#39;t stop you from browsing through your collection, yet it needs to display a progress bar as it may take a while to export.</p><p>A specific Task <em>exists</em> as a nested class in a specific Activity. It needs to be saved away and restored along with lifecycle events: there&#39;s a <code>onSaveInstanceState(Bundle)</code> and <code>onRestoreInstanceState(Bundle)</code> for that, among others. The Activity has a list of active tasks (or just a member for one task). Some UI event will create a new task and add it to the list, a la <code>onClick(): ATask task = new ATask(); task.execute(something);</code>.</p><p>Here&#39;s what I have <em>considered</em> so far:</p><ul><li><p><strong>Implementation inheritance</strong></p><p>Just move this task business to an abstract super class of all specific activities.</p></li><li><p><strong>Decorator pattern</strong></p><p>Create a TaskedActivityDecorator that would add this responsibility on any activity. The decorator would have to mimic the entire Activity interface as provided by the API, mostly passthroughs though. So this may already be a bit too heavyweight. It would also need to add the UI events/buttons that launch the task, which may not always be possible if the action is more consequential.</p><p>But the biggest problem I could come up with here is that Android uses a <strong>manifest</strong> to loosely couple all activities together. Therein you need to declare every specific activity or it can not be used. This is a problem because the decorator would work at runtime, with composition. I can&#39;t declare the decorator and add in the information that it needs to wrap a specific activity.</p><p>With <em>Android</em> I seem to end up with implementation inheritance a lot more than I&#39;d like to. Hence I have too much coupling or code duplication. The activities always easily grow out to big fat classes. Am I correct to say that that is partly because of existing design choices in the Android framework, such as the manifest taking away composition solutions, or the Context object? Am I correct to say that from the get-go it cuts away a significant amount of established design patterns in key areas, including the MVC pattern.</p></li><li><p><strong>Decorator with wrappers</strong>:</p><p>That I can&#39;t specify the decorator and the specific activity it applies to together in the manifest, doesn&#39;t mean I can&#39;t create classes that represent and arrange this composition. I could of course create many SpecificDecoratorActivity classes, that also implement the Activity interface and act like the decorator, and then wrap in the real specific activity. I&#39;m not sure if it solves my problem though. It seems like a lot of work, a lot of rubbish classes, and takes me far from my original goal.</p></li><li><p><strong>Strategy pattern</strong>:</p><p>If I can&#39;t skin the activity, then I&#39;d better outsource part of its guts. This will give me yet more connections though as the activities will need to know about the Strategy. The Strategy itself however will be more lightweight as a Decorator. Yet it feels not so much like Strategy where there is a choice of which one, but rather just moving part of the class to another class. I would call it TaskManager. And would I still pull up the strategies knowledge into an activity super class?</p></li><li><p><strong>Any other pattern?</strong>:</p></li></ul><p><em>Which pattern is the best choice? Don&#39;t shun your opinion on the specific Android case. No need to talk about tasks specifically.</em></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>First, I don&#39;t know anything about Android development, so I was waiting for someone else to answer you, but since you haven&#39;t gotten a lot of responses:</p><p>What about the Bridge pattern?  This isn&#39;t the canonical case described in <a href="http://en.wikipedia.org/wiki/Design_Patterns" rel="nofollow">Design Patterns</a>, but it sounds like it might fit, since what you want is to have separate hierarchies with implementation inheritance (one for tasks and one for activities).</p><p>This is similar to what you discussed as a strategy pattern, and yes, it is moving part of the class to another class, but to a new class that doesn&#39;t have the limitations (i.e., the manifest) of the old.  I&#39;m not sure this gives you more connections - a reference seems a weaker connection than a nested class.</p><p>As far as putting the strategies knowledge into an activity super class, you could, but you did state that you would rather use implementation inheritance for something else.  If so you could put into an interface instead.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/iterative-alternative-to-decorators/'>Iterative alternative to decorators</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-proper-workaround-for-multiple-inheritence-in-java-android/'>Java &#8211; Proper workaround for multiple inheritence in Java (Android)</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/design-is-context-inheritance-as-shown-by-head-first-design-patterns-duck-example-irrelevant-to-strategy-pattern/'>Design &#8211; Is context inheritance, as shown by Head First Design Patterns&#8217; Duck example, irrelevant to strategy pattern</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/decorator-design-pattern-in-swift/'>Decorator design pattern in swift</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-class-becoming-god-object-what-pattern-to-use/'>Java &#8211; Class becoming God Object what pattern to use</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>