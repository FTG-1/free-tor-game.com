<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>What should plugins use: hooks, events or something else &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076126 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076126" class="post-1076126 software type-software status-publish hentry category-software tag-event-programming tag-hooks tag-maintainability tag-plugins tag-readability"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">What should plugins use: hooks, events or something else</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">event-programming</span><span class="mr-2 badge badge-info">hooks</span><span class="mr-2 badge badge-warning">maintainability</span><span class="mr-2 badge badge-primary">plugins</span><span class="mr-2 badge badge-danger">readability</span></p><div class="entry-content"><p>Consider an app that allows plugins to react to its program flow.</p><p>I know 2 ways to achieve this: <strong>hooks</strong> and <strong>events</strong></p><p><strong>1. Hooks</strong></p><p>Use calls to empty functions inside the main program flow. These functions can be overriden by plugins.</p><p>For example, Drupal CMS implements hooks which are available to modules and themes. Here&#39;s an example of how hook is implemented in a <a href="https://api.drupal.org/api/drupal/includes!file.inc/function/file_copy/7">file_copy</a> function.</p><pre><code>function file_copy(stdClass $source, $destination = NULL, $replace = FILE_EXISTS_RENAME) {
    // ... [File copying routine]

    // Inform modules that the file has been copied.
    module_invoke_all(&#39;file_copy&#39;, $file, $source);

    return $file;
    // ...
}
</code></pre><p>A module can implement a <code>modulename_file_copy($file, $source)</code> function which will be called by the <code>module_invoke_all</code> in <code>file_copy</code>. After this function finishes, the <code>file_copy</code> will resume execution.</p><p><strong>2. Events</strong></p><p>Have the app dispatch events, which can be listened to by the plugins. After receiving an event that it&#39;s been subscribed to, a plugin will intercept the program flow and perform neccessary operations.</p><p>For example, a jQuery gallery plugin Fotorama <a href="http://fotorama.io/customize/api/">implements several events</a>. As an example, here&#39;s a part of its <code>show</code> method that fires the <code>fotorama:show</code> event.</p><pre><code>  that.show = function (options) {
    // ... [show the new frame]

    // [fire the event]
    options.reset || triggerEvent(&#39;show&#39;, {
      user: options.user,
      time: time
    });

    // ... [do lots of other stuff with navigation bars, etc.]
  };
</code></pre><p>A script can listen to this event and do something when it fires:</p><pre><code>$(&#39;.fotorama&#39;).on(
  &#39;fotorama:show&#39;,
  function (e, fotorama, extra) {
    console.log(e.type + (extra.user ? &#39; after userâ€™s touch&#39; : &#39;&#39;));
    console.log(&#39;transition duration: &#39; + extra.time);
  }
);
</code></pre><p><strong>QUESTION</strong></p><ol><li><p>Are there other mainstream ways to implement such plugin behaviour?</p></li><li><p>If not, when should one use hooks, and when should one use events? Considering the ultimate goal is to make the code <strong>more maintanable and readable, from both the app and the plugin developer&#39;s perspective?</strong></p></li></ol></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The main difference between a hook and event is loose coupling versus tight coupling.</p><p>A hook is a generic way to broadcast that something has happened. You can add new hooks without having to recompile plugins, and all hooks follow a generic design pattern. Once the hook API is defined it doesn&#39;t change so the coupling between the app and plugin isn&#39;t likely to break.</p><p>Events are more tightly coupled to the app. Events can define parameters that are attached to the event, and if you change those parameters you break the API with existing plugins.</p><p>They both achieve the same results. It just depends upon how you want to couple the plugin to the app.</p><p>Hooks can offer you a more dynamic coupling that isn&#39;t likely to break as new versions of your app are released, but the disadvantage is you don&#39;t get any compile time warnings that the plugins no longer are compatible.</p><p>Events offer you the ability to get compile time errors that the plugin needs to be modified, because some of the event signatures have changed.</p><p>You asked for alternative approaches.</p><p>Commands:</p><p>Instead of plugins responding to triggered events. Plugins push command objects to the application. Each command object implements an interface used by commands. When the application needs to execute a feature it runs all the commands for that feature. This is very much like events, except that it&#39;s implemented as objects instead of callback functions.</p><p>Macros:</p><p>Instead of plugins responding to when things happen. Plugins proactively cause things to happen. A macro is a small high-level language that runs above the application telling it what to do.</p><p>State Change Listeners:</p><p>Events are triggered by the application with forethought by the developer. The developer has to knowingly write code that issues the event. Instead, an alternative approach is to make objects automatically broadcast when their internal state has changed. Either the changing of a property or other indicators. Plugins can then listen for these specific state changes and react accordingly. The advantage of this approach is that the programmer does not have to remember to broadcast events. For example, there might be an Document object and the programmer sets a flag to mark that the document needs to be saved. This state change is broadcasted to listening plugins, and there could be a plugin that changes the document title to include an asterisk.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-designing-web-based-plugin-systems-correctly-so-they-dont-waste-as-many-resources/'>Php &#8211; Designing web-based plugin systems correctly so they don&#8217;t waste as many resources</a></li><li class="list-group-item"><a href='../designing-events-in-an-event-driven-event-sourced-architecture-and-managing-duplication/'>Designing events in an event-driven (event sourced) architecture and managing duplication</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>