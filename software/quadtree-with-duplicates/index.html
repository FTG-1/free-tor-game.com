<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Quadtree with duplicates &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078214 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078214" class="post-1078214 software type-software status-publish hentry category-software tag-data-structures tag-indexing tag-trees"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Quadtree with duplicates</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">data structures</span><span class="mr-2 badge badge-info">indexing</span><span class="mr-2 badge badge-warning">trees</span></p><div class="entry-content"><p>I&#39;m implementing a quadtree. For those who don&#39;t know this data structure, I am including the following small description:</p><blockquote><p>A <a href="http://en.wikipedia.org/wiki/Quadtree" rel="nofollow noreferrer" title="Quadtree (wikipedia)">Quadtree</a> is a data structure and is in the Euclidean plane<br /> what an Octree is in a 3-dimensional space. A common use of quadtrees<br /> is spatial indexing.</p><p>To summarize how they work, a quadtree is a collection — let&#39;s say of<br /> rectangles here — with a maximum capacity and an initial bounding box. When trying to insert an element into<br /> a quadtree which has reached its maximal capacity, the quadtree is<br /> subdivided into 4 quadtrees (a geometric representation of which will<br /> have a four times smaller area than the tree before insertion); each<br /> element is redistributed in the subtrees according to its position,<br /> ie. the top left bound when working with rectangles.</p><p>So a quadtree is either a leaf and has less elements than its capacity, or a tree with 4 quadtrees as children (usually north-west, north-east, south-west, south-east).</p></blockquote><p>My concern is that if you try to add duplicates, may it be the same element several times or several different elements with the same position, quadtrees have a fundamental problem with handling the edges.</p><p>For instance, if you work with a quadtree with a capacity of 1 and the unit rectangle as the bounding box:</p><pre><code>[(0,0),(0,1),(1,1),(1,0)]
</code></pre><p>And you try inserting twice a rectangle the upper-left bound of which is the origin:<br /> (or similarly if you try inserting it N+1 times in a quadtree with a capacity of N&gt;1)</p><pre><code>quadtree-&gt;insert(0.0, 0.0, 0.1, 0.1)
quadtree-&gt;insert(0.0, 0.0, 0.1, 0.1)
</code></pre><p>The first insert will not be a problem:<br /> <img src="../../../i.stack.imgur.com/p9NQa.png" alt="First insert"/></p><p>But then the first insert will trigger a subdivision (because the capacity is 1):<br /> <img src="../../../i.stack.imgur.com/a0Gxx.png" alt="Second insert, first subdivision"/></p><p>Both rectangles are thus put in the same subtree.</p><p>Then again, the two elements will arrive in the same quadtree and trigger a subdivison…<br /> <img src="../../../i.stack.imgur.com/laE9l.png" alt="Second insert, second subdivison"/></p><p>And so on, and so forth, the subdivision method will run indefinitely because (0, 0) will always be in the same subtree out of the four created, meaning an infinite recursion problem occurs.</p><p>Is it possible to have a quadtree with duplicates? (If not, one may implement it as a <code>Set</code>)</p><p>How can we solve this problem without breaking completely the architecture of a quadtree?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You&#39;re implementing a data structure, so you have to make implementation decisions.</p><p>Unless the quadtree has something specific to say about uniqueness - and I&#39;m not aware that it does - this is an implementation decision. It&#39;s orthogonal to the definition of a quadtree and you can choose to handle it however you want. The quadtree tells you how to insert and update keys, but not whether they have to be unique, or what you can attach to each node.</p><p>Making implementation decisions is not <em>reinventing the wheel</em>, at least no more than writing your own implementation in the first place.</p><p>For comparison, the C++ standard library offers a unique set, a non-unique multiset, a unique map (essentially a set of key-value pairs ordered &amp; compared only by the key) and a non-unique multimap. They&#39;re all typically implemented using the same red-black tree and none are <em>breaking the architecture</em>, simply because the definition of the red-black tree has nothing to say about the uniqueness of keys or the types stored in leaf nodes.</p><p>Finally, if you think there&#39;s research on this, find it, and then we can discuss it. Maybe there is some quadtree invariant I&#39;ve overlooked, or some additional constraint that allows better performance.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-thoughts-on-a-custom-data-structure-for-a-node-chain-implementation/'>Java &#8211; Thoughts on a custom data structure for a node/chain implementation</a></li><li class="list-group-item"><a href='../c-the-point-of-using-lists-over-vectors-in-c/'>C++ &#8211;  the point of using lists over vectors, in C++</a></li><li class="list-group-item"><a href='../is-a-tree-with-nodes-that-have-reference-to-parent-still-a-tree/'>Is a tree with nodes that have reference to parent still a tree</a></li><li class="list-group-item"><a href='../java-finding-the-closest-n-points-to-any-arbitrary-point-in-two-dimensions-r-tree-quadtree-spatial-index/'>Java &#8211; Finding the closest n points to any arbitrary point in two dimensions (r-tree, quadtree, spatial index)</a></li><li class="list-group-item"><a href='../tree-data-structure-with-multiple-root-nodes/'>Tree data structure with multiple root nodes</a></li><li class="list-group-item"><a href='../how-is-a-quadtree-stored-in-a-file/'>How is a quadtree stored in a file</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>