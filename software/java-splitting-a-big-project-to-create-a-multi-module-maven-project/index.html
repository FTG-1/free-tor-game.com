<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Splitting a big project to create a multi-module Maven project &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063825 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063825" class="post-1063825 software type-software status-publish hentry category-software tag-architecture tag-design tag-java tag-maven tag-web-development"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Splitting a big project to create a multi-module Maven project</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">maven</span><span class="mr-2 badge badge-danger">web-development</span></p><div class="entry-content"><p>I am working on a Spring-MVC application in which we are using Maven for dependency management. As the project is big, we are thinking of splitting the project into several parts. I had some doubts, which I hopefully will get answers here.</p><p>Currently, we are deploying a single WAR file as <code>ROOT.war</code> on Apache tomcat on our server. As the project is big, there are parts in the webapp like Notifications and Email, Third party services, PUSH (Cometd),REST API&#39;s, etc. Currently all of them are clubbed and are dependent on each other. For example, <code>Notification</code> object also depends on <code>Person</code> object, as Notifications are tailored for users.</p><p>The main intention of splitting the big project is to be able to work on individual modules, for bug fixes, adding features, testing, etc. And when satisfied, then only this module can be replaced on the server instead of the entire application. <strong>Is this possible?</strong></p><p>As I already mentioned before, there are dependencies and mappings between objects. How will those be managed across different sub-modules, <strong>or will just the import statements change to include other projects?</strong></p><p>As I said, the intention is to work on individual modules and be able to deploy them(preferably hot). Currently, we have only a single WAR file as <code>ROOT.war</code>. Will splitting create multiple war files, <strong>which are then referred by URL as <code>domain-name.com/module_name/some_mapping</code>?</strong></p><p>I am currently checking the documentation, but this is the primary objective we want to achieve with multi module provided by Maven and interested to know if this is feasible. If there is any more information required, please let me know.</p><p>Currently I am using a parent POM from spring as follows:</p><pre><code>&lt;parent&gt;
    &lt;groupId&gt;io.spring.platform&lt;/groupId&gt;
    &lt;artifactId&gt;platform-bom&lt;/artifactId&gt;
    &lt;version&gt;1.1.3.RELEASE&lt;/version&gt;
    &lt;relativePath /&gt;
&lt;/parent&gt;
</code></pre></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><em>Is it possible?</em></p><p>Yes certainly. I have, in the past, structured a few projects like this. Here are some bits I hope will get you started.</p><p>There are two main features of Maven you will use to weave things together:</p><ul><li><strong><a href="https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html" rel="nofollow noreferrer">Normal dependencies</a></strong></li><li><strong><a href="https://maven.apache.org/guides/mini/guide-multiple-modules.html" rel="nofollow noreferrer">Modules</a></strong></li></ul><h2>Divide and conquer</h2><p>You will need to split your projects into multiple independent ones. Here, by independent, I mean that all references to code outside the project is done through dependencies in Maven and not directly merging the source tree.</p><p>Depending on the state of your source tree, this could represent a lot of work.  That said, you are not doing it to shoehorn to Maven, but rather as a means to structure and sanitize your code base. Think of it as your toolshed, much easier to find things here:</p><p><a href="../../../i.stack.imgur.com/TWKsZ.jpg" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/TWKsZ.jpg" alt="Nice toolshed"/></a></p><p>than here:</p><p><a href="../../../i.stack.imgur.com/HwN8x.jpg" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/HwN8x.jpg" alt="Not-so-nice toolshed"/></a></p><p>Maven relies heavily on <a href="https://en.wikipedia.org/wiki/Convention_over_configuration" rel="nofollow noreferrer">convention</a>, so the better organized your stuff is, the more Maven can help you. That said, it may require you to re-organize to better fit its own convention, and if I have to give one piece of advice here, it&#39;s that it&#39;s MUCH easier to change your stuff to fit Maven&#39;s conventions than it is to try and configure Maven to understand your convention.</p><p>If these projects could be usable outside the main application, they could live as truly independent libraries and included through maven dependencies. They should live in their own repository (not in the application source tree) and should not depend on any part of the main application.</p><p>Core parts of your application, once split into projects, can be put together as modules. Typically, you will have them placed as sub-folder of the main source folder of your app.</p><p>Also, your parent POM for your app will contain the module declaration. You will also place in there all the common dependencies for your app as well as declare most of the build plugins and their configuration. In here also, I strongly recommend you place a group of properties for things such as the version of the application which you can reuse in the modules. Much easier to manage when everything have the same version and having the version in one place makes this just work.</p><h2>Tooling</h2><p>If you are a team larger than one, I would also strongly recommend that you install a repository for your Maven dependencies. Look at <a href="https://jfrog.com/artifactory/" rel="nofollow noreferrer">Artifactory</a>, <a href="https://www.sonatype.com/nexus-repository-oss" rel="nofollow noreferrer">Nexus</a> or <a href="http://archiva.apache.org/index.cgi" rel="nofollow noreferrer">Archiva</a>. You can configure the POM file to install to these directly so once running it should not be much of an overhead but will save your team a lot of time resolving the dependencies with the correct jar in the correct place.</p><p>On the subject of tooling, the next logical step here is a continuous integration system (<a href="https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins" rel="nofollow noreferrer">Jenkins</a>, there are many more). It will handle building the source, running the tests, and pushing to the artifactory. With all this in place, all you have to do is work the code and the rest just works.</p><p>Since you are packaging your app as a war, <a href="http://maven.apache.org/plugins/maven-war-plugin/" rel="nofollow noreferrer">maven can handle building the war</a> and place all the dependencies in their proper places without having to merge jar files or other similar work around, so no worries there.</p><h2>Example</h2><p>I could go on much longer here, but nothing beats a good example. Look on GitHub for projects of similar magnitude and see how they built their pom files and folder hierarchies. Look at more than one, some will fit your setup better than others. None really incarnate <em>the</em> truth, but you should find enough to fuel your thoughts on how to get it done.</p><p>Take <a href="https://github.com/jenkinsci/jenkins" rel="nofollow noreferrer">Jenkins</a> for example:</p><p>You can see their <a href="https://github.com/jenkinsci/jenkins/blob/master/pom.xml" rel="nofollow noreferrer">parent POM</a> is quite extensive.</p><p>They do use modules as you can see in this section:</p><pre class="lang-xml prettyprint-override"><code>&lt;modules&gt;
    &lt;module&gt;core&lt;/module&gt;
    &lt;module&gt;war&lt;/module&gt;
    &lt;module&gt;test&lt;/module&gt;
    &lt;module&gt;cli&lt;/module&gt;
&lt;/modules&gt;
</code></pre><p>And each module correspond to a sub-folder with the same name that also contains a POM. You could nest as many as you want like this, though do keep it within sanity levels ;).</p><h2>Start Small</h2><p>If you have never used Maven, I would suggest, however, you do not start with modules right away. Take it slow, start with, say, one of the simpler libraries you may have and make it a maven project. Then make your main application a simple maven project.  Once that work, start adding simple dependencies, then split your first module and so on.</p><p>Maven is a great tool, but it can also be a super pain in the neck, especially when things are not going your way. Starting with the whole whammy on your first go is a recipe for disaster (was for me!).</p><p>If things are a bit weird, you can always use <code>mvn help:effective-pom</code> command to see what Maven actually understood.</p><h2>Plugins</h2><p>From your comment, I understand better what you want to achieve. In this case, I would go for plugins approach.  Create a project that exposes the API of extension points where you want to isolate the work. Then you can use this as a dependency in a new project that will implement it. In your main application, just add the proper dependencies for these implementations (not using maven modules this time) and you should be good to go. Eventually, the main application project will carry nearly no source code, everything being done in external projects and loaded through dependencies.</p><p>You will need to re-deploy the whole application however with this approach, regardless if the core changed or not as the war is statically built from the dependencies, changing one of them implies rebuilding the whole thing. It sounds worst than it actually is. In effect, only the new changes will actually get built, the rest will basically be a copy of the previous jar(s). But since everything is in the war file, it will need to be re-built, and the server will need to be stopped and restarted.</p><p>If you need to go further, things get a tad bit more complicated, though not impossible. I would recommend you look into OSGI, <a href="http://felix.apache.org/" rel="nofollow noreferrer">Apache Felix</a> could get you started, though there are other implementations as well. This will allow you to take the external jar and make them into proper plugins. You will gain a lot more control on the runtime lifecycle of the components, opening the door to dynamic reloads and updates. It will, however, require major changes to your core, so again, probably not a good starting point. However, once you have a project that is well separated and have all the parts isolated the way you want, that could be a natural next step if starting and stopping the application on update is a major problem.</p><p>The basic difference between Modules and dependencies is this:</p><ul><li>Modules will live in the same source tree as the main application, as sub-folders ideally.</li><li>Dependencies can be anywhere.</li></ul><p>You can find the bible <a href="http://books.sonatype.com/mvnref-book/reference/" rel="nofollow noreferrer">here</a>.</p><p>Hope this helps, good luck.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-splitting-up-a-single-project-into-libraries/'>Design &#8211; Splitting up a single project into libraries</a></li><li class="list-group-item"><a href='../java-creating-webservices-using-spring-mvc-one-project-or-multiple-projects/'>Java &#8211; Creating webservices using spring-mvc. One project or multiple projects</a></li><li class="list-group-item"><a href='../java-best-way-to-structure-a-git-repository-for-maven/'>Java &#8211; Best way to structure a Git repository for Maven</a></li><li class="list-group-item"><a href='../continuous-integration-with-bamboo-and-maven-managing-version-numbers/'>Continuous Integration with Bamboo and Maven, Managing Version Numbers</a></li><li class="list-group-item"><a href='../design-organizing-maven-modules-and-spring-profiles/'>Design &#8211; Organizing maven modules and spring profiles</a></li><li class="list-group-item"><a href='../java-how-to-have-parent-and-child-modules-in-maven-that-both-package-as-jar-files/'>Java &#8211; How to have parent and child modules in Maven that both package as jar files</a></li><li class="list-group-item"><a href='../java-maven-versioning-for-multi-module-repository/'>Java &#8211; Maven: Versioning for multi module repository</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>