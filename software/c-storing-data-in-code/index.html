<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Storing data in code &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064288 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064288" class="post-1064288 software type-software status-publish hentry category-software tag-c"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Storing data in code</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span></p><div class="entry-content"><p>A few times in my past I&#39;ve wanted to store data in code. This would be data that seldom changes and is used in places where access to a database isn&#39;t possible, practical, or desirable. A small example would be storing a list of countries. For that you could do something like:</p><pre><code>public class Country
{
    public string Code { get; set; }
    public string EnglishName {get;set;}
}

public static class CountryHelper
{
    public static List&lt;Country&gt; Countries = new List&lt;Country&gt;
        {
            new Country {Code = &#34;AU&#34;, EnglishName = &#34;Australia&#34;},
            ...
            new Country {Code = &#34;SE&#34;, EnglishName = &#34;Sweden&#34;},
            ...
        };

    public static Country GetByCode(string code)
    {
        return Countries.Single(c =&gt; c.Code == code);
    }
}
</code></pre><p>I&#39;ve got away with doing this in the past because the data sets were relatively small and the objects pretty simple. Now I&#39;m working with something that will have more complex objects (5 &#8211; 10 properties each, some properties being dictionaries) and around 200 objects total.</p><p>The data itself changes very rarely and when it does change it&#39;s really not even that important. So rolling it into the next release version is perfectly fine.</p><p>I&#39;m planning to use T4 or ERB or some other templating solution to turn my data source into something that is stored statically in the assembly.</p><p>It seems my options are</p><ol><li>Store the data in XML. Compile the XML file as an assembly resource. Load data as needed, store loaded data into a Dictionary for repeat-use performance.</li><li>Generate some kind of static object or objects that are initialized at startup.</li></ol><p>I&#39;m pretty sure I understand the performance implications of option 1. At least, my hunch is that it wouldn&#39;t have stellar performance.</p><p>As for option 2, I don&#39;t know what to do. I don&#39;t know enough about the internals of the .NET framework to know the best way to actually store this data in C# code and the best ways to initialize it. I poked around using .NET reflector to see how <code>System.Globalization.CultureInfo.GetCulture(name)</code> works, since this is actually a very similar workflow to what I want. Unfortunately that trail ended at an <code>extern</code>, so no hints there. Is initializing a static property with all the data, as in my example, the way to go? Or would it be better to create the objects on demand and then cache them, like this?</p><pre><code>    private static readonly Dictionary&lt;string, Country&gt; Cache = new Dictionary&lt;string,Country&gt;(); 

    public static Country GetByCode(string code)
    {
        if (!Cache.ContainsKey(code))
            return Cache[code];

        return (Cache[code] = CreateCountry(code));
    }

    internal static Country CreateCountry(string code)
    {
        if (code == &#34;AU&#34;)
            return new Country {Code = &#34;AU&#34;, EnglishName = &#34;Australia&#34;};
        ...
        if (code == &#34;SE&#34;)
            return new Country {Code = &#34;SE&#34;, EnglishName = &#34;Sweden&#34;};
        ...
        throw new CountryNotFoundException();
    }
</code></pre><p>The advantage to creating them at once in a static member is that you can use LINQ or whatever else to look at all the objects and query them if you want. Though I suspect doing this has a startup performance penalty. I&#39;m hoping someone has experience with this and can share their opinions!</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I would go with option one. It&#39;s simple &amp; easy to read. Someone else looking at your code will understand it straight away. It&#39;ll also be easier to update your XML data if needs be. (Plus you could let the user update them if you have a nice front end and stored the files separately)</p><p>Only optimise it if you need to - premature optimisation is evil :)</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-why-does-shared-state-degrade-performance/'>C# &#8211; Why does shared state degrade performance</a></li><li class="list-group-item"><a href='../c-file-storage-for-a-blog-component-database-or-filesystem/'>C# &#8211; File storage for a blog component: database or filesystem</a></li><li class="list-group-item"><a href='../c-best-practices-for-serializing-persisting-string-object-dictionary-entities/'>C# &#8211; Best Practices for serializing/persisting String Object Dictionary entities</a></li><li class="list-group-item"><a href='../c-how-to-store-deal-with-data-available-to-other-classes/'>C# &#8211; How to store/deal with data available to other classes</a></li><li class="list-group-item"><a href='../c-application-to-read-xml-files-parsing-them-storing-locally-in-data-structure-and-writing-to-csv/'>C# application to read xml files, parsing them, storing locally in data structure and writing to csv</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>