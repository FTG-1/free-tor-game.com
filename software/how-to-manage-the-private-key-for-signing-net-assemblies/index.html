<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to manage the private key for signing .NET assemblies &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075716 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075716" class="post-1075716 software type-software status-publish hentry category-software tag-cryptography tag-net"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to manage the private key for signing .NET assemblies</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">cryptography</span><span class="mr-2 badge badge-info">net</span></p><div class="entry-content"><p>I write open source .NET class libraries as a hobby and thought about signing them. I can get Visual Studio to generate me a password protected public/private key pair and save it as a .pfx file, but I don&#39;t think I should do this for <em>each and every</em> project. One key pair should be enough, right?</p><p>Obviously I&#39;m not going to put my .pfx file with the source code in my online public repository: only the assemblies I release should be signed with my key pair. Other people can use their own keys if they want.</p><p>So I&#39;m left with some .pfx file that supposedly contains my public/private key pair.</p><ul><li>How do I manage my key pair effectively?</li><li>Where do I store it?</li><li>Do I have to import it somewhere?</li><li>How can I use it on both my PC and my laptop?</li><li>How do I prevent the <a href="https://stackoverflow.com/q/2815366/146622">key pair hell</a> when switching from PC to laptop?</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The method of storing the key pair depends very heavily on how badly you want to protect it from undesired use. Personally I store my keys in a folder protected by the standard ACLs (so anybody who manages to get admin access to my machine can get to my key pairs). For me that&#39;s good enough given that my key pairs aren&#39;t that valuable. Microsoft recommends using a <a href="http://msdn.microsoft.com/en-us/magazine/cc163583.aspx#S8" rel="nofollow">key container</a>.</p><p>If you want to avoid having to synchronize your key pairs between machines then it is probably best if you were to build the release version of the libraries on one single machine (either your PC or the laptop) and make that machine the &#39;build machine&#39;. In that case depending on where you are storing your key pair (in a file protected by ACLs or in a key container) you can use either one of these techniques:</p><p>If you keep the key pair in a <strong>file</strong>:</p><ol><li>Create public/private key pairs for both computers. You can copy the key pair but that&#39;s not required, generating individual ones for each machine is equally valid.</li><li>On each machine create an environment variable that points to the location of the key pair on that specific machine. Make sure the environment variables have the same name on both machines.</li><li><p>To allow you to share code between the machines and still use the machine specific key files add the following section to your C# project file.</p><pre><code>&lt;PropertyGroup&gt;
    &lt;SignAssembly&gt;true&lt;/SignAssembly&gt;
    &lt;DelaySign&gt;false&lt;/DelaySign&gt;
    &lt;AssemblyOriginatorKeyFile&gt;$(YOUR_ENVIRONMENT_VARIABLE_HERE)&lt;/AssemblyOriginatorKeyFile&gt;
&lt;/PropertyGroup&gt;
</code></pre></li></ol><p>If you also want the key to show up in the &#39;properties&#39; section of the project then you can add the following section</p><pre><code>&lt;None Include=&#34;$(YOUR_ENVIRONMENT_VARIABLE_HERE)&#34;&gt;
  &lt;Link&gt;Properties\App.snk&lt;/Link&gt;
&lt;/None&gt;
</code></pre><p>If you keep the key pair in a <strong>key container</strong>:</p><ol><li>Create public/private key pairs for both computers and store them in the key containers. Make sure you use the same name for the key container.</li><li><p>To allow you to share code between the machines and still use the machine specific key files add the following section to your C# project file.</p><pre><code>&lt;PropertyGroup&gt;
    &lt;SignAssembly&gt;true&lt;/SignAssembly&gt;
    &lt;DelaySign&gt;false&lt;/DelaySign&gt;
    &lt;KeyContainerName&gt;YOUR_CONTAINER_NAME_HERE&lt;/KeyContainerName&gt;
&lt;/PropertyGroup&gt;
</code></pre></li></ol><p>In this case I&#39;m not sure if you can link the key from the &#39;properties&#39; section (I suspect not).</p><p>Using either one of these ways allows MsBuild to find your key and use it during the build while still giving you a (semi-)portable way of dealing with different keys on different machines. Just make sure that you always build your release version of the libraries on the same machine (which will have one set of keys), otherwise you get releases done with different keys.</p><p>As for key-pair hell, the only thing you can&#39;t do is move the bin folders from one machine to another and expect partial builds to work. If you rebuild the libraries then there shouldn&#39;t be any problems.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../with-continuous-integration-in-net-is-it-acceptable-to-reference-dlls-of-rarely-changing-assemblies/'>With continuous integration in .NET, is it acceptable to reference DLLs of rarely-changing assemblies</a></li><li class="list-group-item"><a href='../where-to-store-the-private-key/'>Where to store the private key</a></li><li class="list-group-item"><a href='../how-do-we-isolate-dependencies-for-a-net-app-deploy-in-a-way-which-is-safe-for-a-strongly-named-assemblies/'>How do we isolate dependencies for a .Net app deploy in a way which is safe for a strongly-named assemblies</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>