<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to refactor when all your development is on branches &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075605 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075605" class="post-1075605 software type-software status-publish hentry category-software tag-branching tag-refactoring tag-version-control"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to refactor when all your development is on branches</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">branching</span><span class="mr-2 badge badge-info">refactoring</span><span class="mr-2 badge badge-warning">version control</span></p><div class="entry-content"><p>At my company, all of our development (bug fixes and new features) is done on separate branches. When it&#39;s complete, we send it off to QA who tests it on that branch, and when they give us the green light, we merge it into our main branch. This could take anywhere between a day and a year.</p><p>If we try to squeeze any refactoring in on a branch, we don&#39;t know how long it will be &#34;out&#34; for, so it can cause many conflicts when it&#39;s merged back in.</p><p>For example, let&#39;s say I want to rename a function because the feature I&#39;m working on is making heavy use of this function, and I found that its name doesn&#39;t really fit its purpose (again, this is just an example). So I go around and find every usage of this function, and rename them all to its new name, and everything works perfectly, so I send it off to QA.</p><p>Meanwhile, new development is happening, and my renamed function doesn&#39;t exist on any of the branches that are being forked off main. When my issue gets merged back in, they&#39;re all going to break.</p><p>Is there any way of dealing with this?</p><p>It&#39;s not like management will ever approve a refactor-only issue so it has to be squeezed in with other work. It can&#39;t be developed directly on main because all changes have to go through QA and no one wants to be the jerk that broke main so that he could do a little bit of non-essential refactoring.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>There are several problems that are mixing together to make refactoring challenging in this environment.  Mixed into this are some non-technical problems (&#34;but that&#39;s a management issue and a battle I&#39;ve yet to win&#34;).</p><p>The first problem to look at is the long running branch.  These branches have difficulty with tracking changes outside of the view of the developer. To address this:</p><ul><li>When the code is complete - give it a once over (let customer support look at it if they want), but merge it quickly into develop so that other changes that depend  it will be able to be picked up and changes that conflict are identified early in the process.</li><li>If, for some reason a brach does become long running while refactoring is going on, it tends to be good practice to merge from stable into the branch to pick up changes and refactoring.  Often this minimizes conflicts and surprises on merge from the feature branch into the stable branch.</li><li>All out integration testing needs to be done on <em>releases</em> - not <em>features</em>.  In this environment features may or may not be fully integrated with the system. While it is possible to do a sanity check on the feature in isolation, it doesn&#39;t identify issues upon the release.</li><li>From time of code completion to merge to (lets call it develop - branching from master / stable / release has its own issues of not picking up the latest development changes) shouldn&#39;t be too long.  The longer you wait, the more knowledge that is lost and the harder it is for the code to become integrated with other code lines.</li></ul><p>Another issue that is mixing into this is that I alluded to with the above points is the changing role of the branch over time.  It starts out as a development branch where developers commit, and then becomes a testing area (what testing is being done here that can be meaningful in the whole of the application?), which is then merged into stable (and presumably released - is it tested again?).</p><p>With a shorter feature start to end time it is easier for the refactoring to be able to be picked up by other branches.</p><p>Encourage developers to get the entire environment.  Just cherry-picking changes can lead to... lets say interesting developer environments.  While cherry-picking has its uses, for that to be the default mode of pulling changes into a branch can be worrisome.</p><p>Refactoring is something that ideally is done constantly, or if not constantly whenever there is a modicum of downtime.  Branch, do a simple refactoring, run the unit tests to verify everything is still working (its unit tested, right? <em>right?</em>) and then merge back into stable.  Pass around the information for other developers to pull those changes that you refactored into their own branches.</p><p>It is important for developers to own the quality of the code.  While the direction of the features comes from outside, and the time allocations are often not our own, code quality is something that it is necessary to take pride in and make time for.</p><p>You may find the following questions useful in the quest for allocating time for dealing with technical debt:</p><ul><li><a href="https://softwareengineering.stackexchange.com/questions/78998/should-technical-debt-be-scheduled-as-a-feature-or-a-chore-or-a-bug">Should technical debt be scheduled as a feature or a chore (or a bug)?</a></li><li><a href="https://softwareengineering.stackexchange.com/questions/43948/how-can-i-convince-management-to-deal-with-technical-debt">How can I convince management to deal with technical debt?</a><ul><li>Look also at the <a href="https://softwareengineering.stackexchange.com/questions/linked/43948?lq=1">linked</a> questions to this one - it is often cited in other questions that may be of value going and reading.</li></ul></li></ul><p>You may also wish to look at tools such as <a href="http://www.sonarqube.org/" rel="nofollow noreferrer">sonar</a> which can help identify the areas of the code that need the most work for refactoring.  The <a href="http://docs.codehaus.org/display/SONAR/Technical+Debt+Plugin" rel="nofollow noreferrer">technical debt plugin</a> is something that can be used to help point out the accumulation of debt over time in the code base.</p><p>Often it is necessary to point out that the <a href="http://en.wikipedia.org/wiki/Return_on_investment" rel="nofollow noreferrer" title="Return On Investment">ROI</a> for dealing with technical debt is a faster turnaround time for features and bug fixes from the development team.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/when-should-development-branches-be-created/'>When should development branches be created</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/source-control-roles-and-responsibilities-best-practices/'>Source Control: Roles and Responsibilities &#8211; Best Practices</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/branching-strategy-for-test-environment/'>Branching Strategy for Test Environment</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-far-should-we-rename-code-and-data-when-end-users-nomenclatures-change/'>How far should we rename code and data when end users nomenclatures change</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/git-how-to-manage-legacy-code-in-branches/'>Git &#8211; How to manage legacy code in branches</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>