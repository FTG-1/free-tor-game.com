<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Can one Aggregate Root have multiple subtypes &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083642 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083642" class="post-1083642 software type-software status-publish hentry category-software tag-aggregate tag-cqrs tag-domain-driven-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Can one Aggregate Root have multiple subtypes</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">aggregate</span><span class="mr-2 badge badge-info">cqrs</span><span class="mr-2 badge badge-warning">domain-driven-design</span></p><div class="entry-content"><p>I have a concept that I am struggling to design in a DDD CQRS manner, and I hope to find some insight.</p><p>In the old days (before I knew DDD) I would have used simple inheritance, and that&#39;s how my mind is wrapping around the following&#8230;</p><ul><li>I have a domain concept: <code>Property</code></li><li>There is a <code>SingleValueProperty</code> which has a <code>PropertyType</code> and a <code>Value</code></li><li>There is an <code>AttributedProperty</code> which has a collection of <code>Attributes</code></li></ul><p>The latter two are basically the same base concept as they share 8 class attributes, and would use the same <code>Commands</code> and <code>Events</code> to be managed in the domain. I am stuck at how to furnish them in the DDD Aggregate Root concept as it feels weird to have the <code>Repository</code> return different types of object.</p><p>On the other hand, I also feel that it&#39;s ok and still follows the SOLID principles, as this is what inheritance is for right?</p><p>Anyone got any hints on how to model this dilemma?</p><p>Edit:</p><p>I want to add more context as it may sway the consideration.</p><p>A <code>Property</code> is created with only it&#39;s main 8 attributes. After that the other aspects like addition of <code>Attributes</code> or choice of <code>PropertyType</code> are added to the <code>Property</code>. Does this mean 3 separate aggregate roots?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>DDD doesn&#39;t really specify how you write methods or classes, so I don&#39;t see inheritance as being in conflict with DDD, even with Aggregate Roots.</p><p>Aggregate Roots have identities that are used to referred to them from outside of the bounded context.  Assuming the object of subtypes all share the same identity space (e.g. their identities are unique within, that is, they don&#39;t overlap.) that is all that&#39;s needed.</p><blockquote><p>A <code>Property</code> is created with only it&#39;s main 8 attributes. After that the other aspects like addition of Attributes or choice of <code>PropertyType</code> are added to the Property. Does this mean 3 separate aggregate roots?</p></blockquote><p>You can determine whether you need multiple AR&#39;s by whether you have separate concepts to be independently referred to from outside the context.  In this case, the question you need to answer is whether an <code>Attribute</code> is added to the system and has a stable identity of its own that can be used from outside the bounded context.  If so, then it is certainly a candidate for being another AR.  If, on the other hand, these other <code>Attribute</code>s are referred to (and attached to the <code>Property</code> AR&#39;s) by their value/name then perhaps they do not merit being their own AR&#39;s.</p><p>It seems to me that you are introducing unnecessary complexity by separately categorizing single property type, in particular b/c you don&#39;t even know the true type until the (number of) properties are attached.</p><p>Is there a problem representing all property type as some multiple property type having a collection that has zero or more properties?  This also goes to the good question that @ConstantinGalbenu is asking about differentiated behavior.  Now, sure a property with no attributes and with one attribute and multiple attributes may have different behaviors but how different, and do you need inheritance to support tell don&#39;t ask by consuming callers.</p><p>I&#39;m not sure if this is so, though your question suggests that the entities can graduate from no attributes to single attribute to multiple attributes. If that is the case, use of a class hierarchy for that feels contraindicated to me (but still can be done, to be sure, if you want to destruct and reconstruct objects of new type with same identity).  The <code>is-a</code> relationship is meant to be stable, and if attributes can come (and maybe go) that shouldn&#39;t be part of the is-a relationship â€” that&#39;s just composition.</p><p>But back to the DDD aspect: DDD does not require separate AR&#39;s for subtypes, as it doesn&#39;t tell us how to implement class structure.  DDD&#39;s AR concept concerns itself with references and identities as seen by clients external to the bounded context.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-to-create-new-aggregate-root-in-cqrs/'>How to create new aggregate root in CQRS</a></li><li class="list-group-item"><a href='../c-ddd-identifying-aggregate-root-in-a-simple-example-application-domain/'>C# &#8211; DDD: Identifying aggregate root in a simple example application domain</a></li><li class="list-group-item"><a href='../cqrs-how-to-query-aggregate-root-using-others-fields-rather-than-guid-id/'>CQRS, How to query aggregate root using others fields rather than GUID (ID)</a></li><li class="list-group-item"><a href='../how-to-validate-command-before-executing-on-aggregate-when-validation-needs-to-query-data/'>How to validate command before executing on aggregate when validation needs to query data</a></li><li class="list-group-item"><a href='../architecture-aggregate-root-being-created-by-multiple-other-aggregate-roots/'>Architecture &#8211; Aggregate root being created by multiple other aggregate roots</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>