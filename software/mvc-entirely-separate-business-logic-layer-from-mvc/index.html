<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Mvc &#8211; Entirely separate business logic layer from MVC &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065944 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065944" class="post-1065944 software type-software status-publish hentry category-software tag-architecture tag-business-logic tag-design tag-mvc"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Mvc &#8211; Entirely separate business logic layer from MVC</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">business-logic</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">mvc</span></p><div class="entry-content"><p>We are currently refactoring our controller methods in ASP.NET MVC application.</p><p>At the beginning we&#39;ve separated data access layer (our goal was to remove LINQ from controllers entirely). Now we are thinking about another step &#8211; how to create a business logic layer to reduce number of lines and logic in controller. Currently we have something like this:</p><pre><code>public ActionResult CustomerProjects(some parameters)
{
    var collectionOfSomeType = this.CustomerRepository.GetSomeData();
    var anothercollection = this.ProjectsRepository.GetAnotherData(collectionOfSomeType);

    var viewModel = CreateSomeViewModel(anotherCollection);

    return View(&#34;Index&#34;, viewModel);
}
</code></pre><p>Of course it&#39;s just an example with four lines of code. We have some methods which are bigger (but still IMO not so bad). We injected our helper classes through IoC container, more complex logic sits there. But now we&#39;d like to remove even that parts.</p><p>Is it worth our time to create another layer which would be our &#39;last gate&#39; before controllers? The final result would be:</p><pre><code>public ActionResult CustomerProjects(some parameters)
{
    var viewModel = someSource.PrepareCustomerProjectsViewModel(params);

    return View(&#34;Index&#34;, viewModel);
}
</code></pre><p>What do you think?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>For me there is no question to be answered here, you should always strive to separate out your components as much as possible.</p><p>At a bare minimum, for every new project I create I do the exact following steps:</p><ul><li>1) Create a blank visual studio solution</li><li>2) Add an MVC project to it</li><li>3) Add a class library to it called the Business layer</li><li>4) Add a class library to it called the Data layer</li></ul><p>By doing this your following the good principles of n-Tier design.  Add into this some form of AOP (For example post-sharp or MVC Attributes) to handle any elements that are cross-cutting the layers, and you have a good solid architecture to work from.</p><p>NO RAW Data from your data layer should ever make it into your presentation layer (The MVC App) everything should be combined and flattened in your business layer.</p><p>The business layer should only ever handle DTO objects between itself and presentation, with raw data that it brings in from the data layer and then applies various rules too that are specific to your application domain.</p><p>With EF code first, and Nu-get packages such as auto-mapper, all of this is incredibly easy these days.</p><p>Use EF in your DAL to get your data using Linq, ADO or whatever you need.</p><p>Use auto-mapper to transform that data into DTO&#39;s to be passed to the business layer, then do any work you need before finally using auto-mapper to pass the resulting DTO up to your presentation.</p><p>Even if your NOT using MVC, adopting this strategy is win/win , even for WPF, Webforms, Winforms and much more.</p><p>If you do it correctly then the MVC portion essentially becomes a brain dead display of what the business layer is doing, and the ease with which you can remove your MVC app and put another UI on in it&#39;s place is frighteningly simple.</p><h1>Update 14/11/2014</h1><p>After reading the most recent comment added to this thread, I felt that adding this additional part to my answer was well warranted.</p><p>Good Architecture is about much more than just &#34;Pretty Code&#34;.</p><p>If you get your architecture wrong it can be the difference between crashing and burning and flying high in a blaze of glory.</p><p>I&#39;ve been doing I.T &amp; Software development in one form or another now since about 1979, and believe me I&#39;ve seen my fair share of failures and successes in that time.</p><p>When I first started, and I was still wet behind the ears, Object Oriented Programming wasn&#39;t even a thing, you lumped EVERYTHING into one source file, then you ran it through a compiler, then a linker with no kind of GUI stuff to help you.</p><p>Some of the code I wrote during these times, was incredibly messy, inefficient and completely horrible. As I grew, and learned however, I began to understand why this kind of code caused the problems it did, and while writing nice easy to read code is certainly an important skill, it&#39;s also very important to make sure that your surface area is also minimal and follows good standards.</p><p>I&#39;ve seen so many great projects fail (or at the very least struggle greatly) over the years, and each time it&#39;s been because of bad choices made at the architecture design level, I can&#39;t stress just how important it is to get the design and the plans right before you even touch a single line of code.</p><p>And while I&#39;m on the subject, code generators are just as dangerous.  If your code generator creates code from templates that YOU control, then great guns, but IF you depend on templates, where you have no control over how the output is generated, then your asking for trouble.  Visual Studio is a great tool, and amazing for creating fast solutions, but please make sure you know EXACTLY what it&#39;s creating behind the scenes when you click that button to do something.</p><p>If I get a library to develop against, the last thing I want to do, is to have to delve into the sources to tell me how it works, I depend on the architect who designed it, to guide me, by making logical choices, that are formed from a knowledge of great solid software craftsmanship practices.</p><p>I simply wouldn&#39;t trust anything that passed strings and discreet values around as though they where candy at a Christmas party, because... well how can I be sure what the type and responsibility of the variable/property/method actually is.</p><p>Who would you trust more to buy a house off?  A professional company who hired an Architect to survey, plan and design a complete set of plans, which a professional team of Builders, Roofers, Plasterers etc then worked as a team to implement, or the guy that lives at the end of your street who works in the building trade and knows a thing or two about building houses?</p><p>I know which my choice would be.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../mvc-pattern-splitting-model-into-data-access-and-business-logic-layers/'>Mvc pattern &#8211; splitting model into data-access and business logic layers</a></li><li class="list-group-item"><a href='../design-how-to-handle-complex-views-consisting-of-several-parts-in-mvc-web-application/'>Design &#8211; How to handle complex views (consisting of several parts) in MVC web application</a></li><li class="list-group-item"><a href='../mvc-sharing-code-logic-between-controllers-through-the-model-layer/'>Mvc &#8211; Sharing code logic between controllers, through the Model layer</a></li><li class="list-group-item"><a href='../mvc-where-to-put-user-interface-domain-model-manipulation-logic-transferring-data-from-the-view-to-domain-model/'>Mvc &#8211; Where to put User Interface/Domain Model manipulation logic (transferring data from the view to Domain Model)</a></li><li class="list-group-item"><a href='../mvc-database-search-logic-in-view-or-model/'>MVC &#8211; Database search logic in View or Model</a></li><li class="list-group-item"><a href='../architecture-how-to-structure-business-layer-logic-app-with-much-complicated-business-layer-logic-calculations-etc/'>Architecture &#8211; How to structure business layer logic (app with much complicated business layer logic, calculations etc.)</a></li><li class="list-group-item"><a href='../mvc-in-mvc-soa-architecture-what-is-the-rationale-for-placing-business-logic-in-models/'>Mvc &#8211; In MVC + SOA Architecture, What is the Rationale for Placing Business Logic in Models</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>