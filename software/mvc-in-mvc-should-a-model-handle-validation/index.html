<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Mvc &#8211; In MVC should a model handle validation &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065228 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065228" class="post-1065228 software type-software status-publish hentry category-software tag-architecture tag-mvc"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Mvc &#8211; In MVC should a model handle validation</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">mvc</span></p><div class="entry-content"><p>I am trying to re-architect a web application I developed to use the MVC pattern, but I&#39;m not sure if validation should be handled in the model or not. For example, I&#39;m setting up one of my models like this:</p><pre><code>class AM_Products extends AM_Object 
{
    public function save( $new_data = array() ) 
    {
        // Save code
    }
}
</code></pre><p><strong>First Question:</strong> So I&#39;m wondering if my save method should call a validation function on $new_data or assume that the data has already been validated?</p><p>Also, if it were to offer validation, I&#39;m thinking some of the model code to define data types would look like this:</p><pre><code>class AM_Products extends AM_Object
{
    protected function init() // Called by __construct in AM_Object
    {
        // This would match up to the database column `age`
        register_property( &#39;age&#39;, &#39;Age&#39;, array( &#39;type&#39; =&gt; &#39;int&#39;, &#39;min&#39; =&gt; 10, &#39;max&#39; =&gt; 30 ) ); 
    }
}
</code></pre><p><strong>Second Question:</strong> Every child class of AM_Object would run register_property for each column in the database of that specific object. I&#39;m not sure if this is a good way of doing it or not.</p><p><strong>Third Question:</strong> If validation should be handled by the model, should it return an error message or an error code and have the view use the code to display an appropriate message?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>First Answer:</strong> A key role of the model is to maintain integrity. However processing user input is a responsibility of a controller.</p><p>That is, the controller must translate user data (which most of the time is just strings) into something meaningful. This requires parsing (and may depend on such things as the locale, given that for example, there are different decimal operators etc.).<br/> So the actual validation, as in &#34;is the data well formed?&#34;, should be performed by the controller. However the verification, as in &#34;does the data make sense?&#34; should be performed within the model.</p><p>To clarify this with an example:<br/> Assume your application allows you to add some entities, with a date (an issue with a dead-line for example). You might have an API, where dates might be represented as mere Unix time stamps, while when coming from a HTML page, it will be a set of different values or a string in the format of MM/DD/YYYY. You don&#39;t want this information in the model. You want each controller to individually try to figure out the date. However, when the date is then passed to the model, the model must maintain integrity. For example, it might make sense to not allow dates in the past, or dates, that are on holidays/sundays, etc.</p><p>Your controller contains input (processing) rules. Your model contains business rules. You want your business rules to always be enforced, no matter what happens. Assuming you had business rules in the controller, then you&#39;d have to duplicate them, should you ever create a different controller.</p><p><strong>Second Answer:</strong> The approach does make sense, however the method could be made more powerful. Instead of the last parameter being an array, it should be an instance of <code>IContstraint</code> which is defined as:</p><pre><code>interface IConstraint {
     function test($value);//returns bool
}
</code></pre><p>And for numbers you could have something as</p><pre><code>class NumConstraint {
    var $grain;
    var $min;
    var $max;
    function __construct($grain = 1, $min = NULL, $max = NULL) {
         if ($min === NULL) $min = INT_MIN;
         if ($max === NULL) $max = INT_MAX;
         $this-&gt;min = $min;
         $this-&gt;max = $max;
         $this-&gt;grain = $grain;
    }
    function test($value) {
         return ($value % $this-&gt;grain == 0 &amp;&amp; $value &gt;= $min &amp;&amp; $value &lt;= $max);
    }
}
</code></pre><p>Also I don&#39;t see what <code>&#39;Age&#39;</code> is meant to represent, to be honest. Is it the actual property name? Assuming there&#39;s a convention by default, the parameter could simple go to the end of the function and be optional. If not set, it would default to the <a href="http://www.paulferrett.com/2009/php-camel-case-functions/">to_camel_case</a> of the DB column name.</p><p>Thus the example call would look like:</p><pre><code>register_property(&#39;age&#39;, new NumConstraint(1, 10, 30));
</code></pre><p>The point of using interfaces is that you can add more and more constraints as you go and they can be as complicated as you want. For a string to match a regular expression. For a date to be at least 7 days ahead. And so on.</p><p><strong>Third Answer:</strong> Every Model entity should have a method like <code>Result checkValue(string property, mixed value)</code>. The controller should call it <em>prior to</em> setting data. The <code>Result</code> should have all the information about whether the check failed, and in case it did, give reasons, so the controller can propagate those to the view accordingly.<br/> If a wrong value is passed to the model, the model should simply respond by raising an exception.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-how-to-structure-mvc-models-and-orm-models/'>Php &#8211; how to structure MVC models and ORM models</a></li><li class="list-group-item"><a href='../architecture-validation-and-data-persistence-in-a-domain-model/'>Architecture &#8211; Validation and data persistence in a domain model</a></li><li class="list-group-item"><a href='../mvc-business-rule-to-display-data-in-all-uppercase-how-to-handle/'>Mvc &#8211; Business rule to display data in all uppercase &#8211; how to handle</a></li><li class="list-group-item"><a href='../php-the-best-way-to-create-rest-api-error-response-model-and-error-codes-system/'>Php &#8211;  the best way to create REST API error response model and error codes system</a></li><li class="list-group-item"><a href='../mvc-checking-data-in-the-model-or-the-controller/'>MVC &#8211; Checking data in the model or the controller</a></li><li class="list-group-item"><a href='../database-getting-data-from-a-database-with-the-mvc-model/'>Database &#8211; Getting data from a database with the MVC model</a></li><li class="list-group-item"><a href='../php-where-to-put-which-code-in-mvc-model/'>Php &#8211; where to put which code in MVC model</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>