<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; What&#8217;s the proper way to model this real-world activity that seems to need circular references in OOP &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070726 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070726" class="post-1070726 software type-software status-publish hentry category-software tag-circular-dependency tag-game-development tag-java tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; What&#8217;s the proper way to model this real-world activity that seems to need circular references in OOP</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">circular-dependency</span><span class="mr-2 badge badge-info">game development</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">object-oriented</span></p><div class="entry-content"><p>I&#39;ve been wrestling with a problem in a Java project about circular references.  I&#39;m trying to model a real-world situation in which it seems the objects in question are interdependent and need to know about each other.</p><p>The project is a generic model of playing a board game.  The basic classes are non-specific, but are extended to deal with specifics of chess, backgammon and other games.  I coded this up as an applet 11 years ago with half a dozen different games, but the problem is that it&#39;s full of circular references.  I implemented it back then by stuffing all the intertwined classes in a single source file, but I get the idea that that&#39;s bad form in Java.  Now I want to implement a similar thing as an Android app, and I want to do things properly.</p><p>The classes are:</p><ul><li><p>RuleBook: an object that can be interrogated for such things as the<br /> initial layout of the Board, other initial game State information<br /> like who moves first, the Moves that are available, what happens to<br /> the game State after a proposed Move, and an evaluation of a current<br /> or proposed board position.</p></li><li><p>Board: a simple representation of a game board, which can be<br /> instructed to reflect a Move.</p></li><li><p>MoveList: a list of Moves.  This is dual-purpose: a choice of moves<br /> available at a given point, or a list of moves that have been made in<br /> the game.  It could be split into two near-identical classes, but<br /> that&#39;s not relevant to the question I&#39;m asking and may complicate it<br /> further.</p></li><li><p>Move: a single move.  It includes everything about the move as a list<br /> of atoms: pick up a piece from here, put it down there, remove a<br /> captured piece from there.</p></li><li><p>State: the full state information of a game in progress.  Not only<br /> the Board position, but a MoveList, and other state information such<br /> as who is to move now.  In chess one would record whether the king<br /> and rooks of each player have been moved.</p></li></ul><p>Circular references abound, for example: the RuleBook needs to know about the game State to determine what moves are available at a given time, but the game State needs to query the RuleBook for the initial starting layout and for what side effects accompany a move once it is made (e.g. who moves next).</p><p>I tried organising the new set of classes hierarchically, with RuleBook at the top as it needs to know about everything.  But this results in having to move lots of methods into the RuleBook class (such as making a move) making it monolithic and not particularly representative of what a RuleBook should be.</p><p>So what&#39;s the proper way to organise this?  Should I turn RuleBook into BigClassThatDoesAlmostEverythingInTheGame to avoid circular references, abandoning the attempt to model the real-world game accurately?  Or should I stick with the interdependent classes and coax the compiler into compiling them somehow, retaining my real-world model?  Or is there some obvious valid structure I&#39;m missing?</p><p>Thanks for any help you can give!</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>I&#39;ve been wrestling with a problem in a Java project about circular references.</p></blockquote><p>Java&#39;s garbage collector doesn&#39;t rely on reference counting techniques. Circular references do not cause any kind of problem in Java. Time spent eliminating perfectly natural circular references in Java is time wasted.</p><blockquote><p>I coded this up [...] but the problem is that it&#39;s full of circular references. I implemented it back then by <strong>stuffing all the intertwined classes in a single source file</strong>, [...]</p></blockquote><p>Not necessary. If you just compile all the source files at once (e.g., <code>javac *.java</code>), the compiler will resolve all forward references without problems.</p><blockquote><p>Or should I stick with the interdependent classes and coax the compiler into compiling them somehow, [...]</p></blockquote><p>Yes. Application classes are expected to be interdependent. Compiling all Java source files that belong to the same package at once isn&#39;t a clever hack, it&#39;s precisely the way Java is <em>supposed</em> to work.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-is-oop-the-dominant-programming-model-in-real-world/'>Object-oriented &#8211; is OOP the dominant programming model in real world</a></li><li class="list-group-item"><a href='../object-oriented-can-we-really-use-immutability-in-oop-without-losing-all-key-oop-features/'>Object-oriented &#8211; Can we really use immutability in OOP without losing all key OOP features</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>