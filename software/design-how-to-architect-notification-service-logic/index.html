<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; How to architect Notification service logic &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075255 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075255" class="post-1075255 software type-software status-publish hentry category-software tag-architecture tag-backend tag-design tag-design-patterns tag-microservices"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; How to architect Notification service logic</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">backend</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">design-patterns</span><span class="mr-2 badge badge-danger">microservices</span></p><div class="entry-content"><p>We are building a notification service whose work is to send push notification to end user. There are two types of notifications</p><ol><li><p>Group notification where we send same text notification to all user&#39;s in a group. This is easily achievable as everyone subscribe to a group and we send a notification to a group.</p></li><li><p>Personalised notification where we send specific text notification to each user.</p></li></ol><p>My question is (for Personalised notification) how best should we architect our notification service.</p><p>Approach 1: Do we keep logic of selecting users based on app logic on application service where we create message for each user and then send batches of users with message to notification service to send them?</p><p>Select Users based on application logic (on app server) -&gt; Loop over each user and make their custom message (on app server) -&gt; Make batches of 1K users with message and send to notification service (on app server) -&gt; Send notification (Notification service)</p><ul><li>Adds load on application server</li></ul><p>Approach 2: we let notification service directly access app database and fetch users, create their message and send them?</p><p>Select users -&gt; Loop over to make message -&gt; Send to each user (All on notification service)</p><ul><li>In this approach, notification service need to access app DB and lot of app logic go here, seems not right. As it will make notification service contains lot of app logic.</li><li>Take load off app server as everything needs to be done by notification service.</li></ul><p>What do you guys suggest? Is there any other approach we can consider.<br /> Considering we might need to send personalised notification to million users.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I think the answer to your question is how to identify service boundaries. Basic approach is that any service should possess all the data that is necessary for it to carry out its job. So services are defined not by horizontal layers, as it was the case in <a href="http://www.opengroup.org/soa/source-book/soa_refarch/p7.htm" rel="nofollow noreferrer">some</a> SOA guidelines, but rather by <a href="https://simpleprogrammer.com/2011/11/21/understanding-the-vertical-slice/" rel="nofollow noreferrer">vertical slices</a>. It&#39;s some concrete piece of business-functionality or a business-process, with its own controllers, domain logic, and ui. It should be autonomous, so it doesn&#39;t need any other service&#39;s data or behavior.</p><p>So considering your example, chances are that your notification service should be a part of some bigger logical service. For example, if your domain is about some retail network, and one day there is some huge discount, and you want to notify all your customers. You need to have your customer&#39;s phone number, information about discount (probably tailored to particular type of customer) and a notification text. Who manages discount business rules? Which service owns customers&#39; data? I bet it&#39;s a Sales service. So notification service is definitely a part of it. So this sales service should have its own database with all data need to send a notification.</p><p>If you&#39;re pondering on performance issues, it&#39;s okay to extract this notification functionality in its own physical machine, and in case of need just add some more machines. And there is no need to create a separate database for this newly extracted piece of functionality, since service boundaries are logical, not physical.</p><p>Here is a <a href="https://medium.com/@wrong.about/how-to-implement-soa-dc6bf08fba9a" rel="nofollow noreferrer">series of posts</a> addressing these issues in greater details.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-notifications-in-a-microservice-architecture-in-application-logic-vs-database-triggers/'>Database &#8211; Notifications in a microservice architecture: In Application Logic vs. Database Triggers</a></li><li class="list-group-item"><a href='../design-when-to-send-a-push-notification-to-a-chat-app/'>Design &#8211; When to send a push notification to a chat app</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>