<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Clean Architecture: May the Controller talk to the Presenter directly &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079882 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079882" class="post-1079882 software type-software status-publish hentry category-software tag-clean-architecture"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Clean Architecture: May the Controller talk to the Presenter directly</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">clean-architecture</span></p><div class="entry-content"><p>From what I understand from the &#39;Clean Architecture&#39;, the controller <strong>determines</strong> which usecase to execute dependent on the input of the user. If the input from the CLI for example is invalid, the controller already knows that something is wrong, so that the controller could directly talk to the presenter in order to show an error or does this violate anything? The following options I have in mind:</p><ol><li><p>The controller could have an extra usecase for that, so that the interactor sends a message to the Presenter. This seems to be like a detour. Is the idea of an extra usecase for wrong inputs in that case correct?</p></li><li><p>The Controller could directly talk to the presenter or would that violate something, because the presenter would depend on the controller.</p></li></ol><p>What is the idea of the &#39;Clean Architecture&#39; in that case?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If the controller talks directly to the presenter you lose the ability to independently swap out controllers and presenters. They are now entangled. They know about each other.</p><p>If the controller sticks to talking through an abstraction to something that implements, lets say, a Use Case Input Port, then it neither knows nor cares which presenter displays error messages.</p><p><a href="../../../i.stack.imgur.com/RJTrw.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/RJTrw.png" alt="enter image description here"/></a></p><p>You do not have to use an &#34;extra use case&#34;. Each use case can be capable of formulating their response regardless of whether that response indicates a result or an error.</p><p>Also, understand that the controller doesn&#39;t have to decide which use case it talks to. That is determined when this object graph is constructed. You don&#39;t see construction diagrammed here but none of this stuff builds itself if it wants to maintain independence. This decision could have been made in <code>main()</code>. It&#39;s a handy place to put construction code.</p><p>Regarding <a href="https://softwareengineering.stackexchange.com/questions/388379/clean-architecture-may-the-controller-talk-to-the-presenter-directly/388381?noredirect=1#comment854411_388381">davidh38&#39;s comment</a>:</p><blockquote><p>Why no extra usecase? Is the controller not doing something like if input == &#34;show data&#34; then ... else usecase.call_invalid_input. Can you elaborate on that please</p></blockquote><p>Remember that the Controllers job is to be an Interface Adapter. You don&#39;t put business rules here. The CLI Controller&#39;s job is to beat CLI input into something so uniform that nothing can tell that it came from the CLI rather than the web, the GUI, or whatever. Violations of business rule expectation are dealt with by things that understand those rules.</p><p>That doesn&#39;t mean that controllers never deal with errors. But there are many options for dealing with errors that do not require a special use case for them. Returning error codes and exceptions send the flow of control right back where it came from. In this case the blue ring. There may be times when that&#39;s appropriate. For example, something has happened that has destabilized the whole system in an unrecoverable way and now it&#39;s time to roll over and die before the system starts sending the president threatening emails.</p><p>The more interesting case is when there exists a value that can be passed to the use case that defies the expectations placed on it&#39;s type. I&#39;m not talking about null, since it&#39;s evil. I&#39;m talking about things with some semantic like empty string that make it obvious that displaying nothing without blowing up is OK. -1, &#34;N/A&#34;, and special symbols for unrecognized Unicode characters all come to mind.</p><p>And yes, you can have a use case for errors. All I said was that you don&#39;t have to use one. Most likely you&#39;re going to need a mix. Though hopefully you wont have to mix exceptions and error codes. Yuck.</p><p>Forgive me while I respond to <a href="https://softwareengineering.stackexchange.com/questions/388379/clean-architecture-may-the-controller-talk-to-the-presenter-directly/388381?noredirect=1#comment854375_388381">Lavi&#39;s comment</a> with what seems to have become a rant.</p><blockquote><p>If we want the controller to be reusable so that we can use the very same controller for the web as for the command line,</p></blockquote><p>Yes.</p><blockquote><p>the controller should not be in charge of instantiating the output port. Right?</p></blockquote><p>Yes.</p><blockquote><p>It should rather be informed alongside with the controller&#39;s inputs in every call.</p><p>If that were the case, the outer layer (the blue one in this case) should be responsible for the injection of the output port. Am I right?</p></blockquote><p>Clean Architecture doesn&#39;t tell you how to construct any of of this. You&#39;re looking at an object graph. Nothing Mr. Martin has published tells us how it got built. I&#39;ve talked about this <a href="https://softwareengineering.stackexchange.com/a/371973/131624">before</a>.</p><p>However, I&#39;m a fan of <a href="https://en.wikipedia.org/wiki/Reference_(C++)" rel="nofollow noreferrer">reference</a> <a href="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" rel="nofollow noreferrer">passing</a>. You&#39;ll probably find more recent info about that if you call it <a href="https://blog.ploeh.dk/2014/06/10/pure-di/" rel="nofollow noreferrer">Pure</a> <a href="https://en.wikipedia.org/wiki/Dependency_injection" rel="nofollow noreferrer">Dependency Injection</a> but rest assured, it&#39;s the same thing.</p><p>That&#39;s important to understand because it colors the way I approach this problem. You don&#39;t have to do it my way. But if you do here&#39;s what you think about:</p><p>How long do these things live? When is the earliest we can decide what they&#39;re going to be? How far up the call stack can we push their construction? Can we push construction all the way up to the program entry point? The highest place you can push this to, regardless of framework restrictions, was called <a href="http://blog.ploeh.dk/2011/07/28/CompositionRoot/" rel="nofollow noreferrer">the Composition Root by Mark Seemann</a>. In normal programs we call it <code>main()</code>.</p><p>Everything I see in this graph seems like something that could live for the entire life of the program. I see nothing here that must be ephemeral (a fancy way to describe things that blink in and out of existence). In other words, this object graph looks static. Guess what? <code>main()</code> is static.</p><p>That means we can build the whole thing before a single line of behavior code is executed. This pattern of <a href="http://www.netobjectives.net/files/books/esad/essential-skills-separate-use-from-construction.pdf" rel="nofollow noreferrer">build it before you run it</a> isn&#39;t just a dependency injection pattern. This is something server code authors do because server code has to be stable. Server code must stay up for months at a time. So it&#39;s really nice if you can separate code that has a fixed memory foot print from code that dynamically allocates memory as the program runs. Because a memory leak is not your friend. It&#39;s nice if the places you have to hunt for it are few. And yes, you can leak memory in Java and C#. Just hold a reference to an ephemeral object longer than you need it.</p><p>So if an object is going to live as long as the program I&#39;d prefer to build it in <code>main()</code> not the blue ring. That doesn&#39;t mean <code>main()</code> is a pile of procedural code. Use every language feature and <a href="https://en.wikipedia.org/wiki/Creational_pattern" rel="nofollow noreferrer">creational pattern</a> you like. Just make the behavior code wait until later.</p><p><code>main()</code> simply isn&#39;t in this diagram. When this object graph exists <code>main()</code> is on it&#39;s last line. Which is usually something like: <code>runner.start();</code>.</p><p>But like I said, Mr. Martin is utterly silent on construction here. So all that stuff is up to you.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-clean-architecture-use-case-containing-the-presenter-or-returning-data/'>Architecture &#8211; Clean Architecture: Use case containing the presenter or returning data</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-calling-a-usecase-from-the-controller/'>Architecture &#8211; Clean Architecture: Calling a Usecase from the Controller</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-is-the-input-boundary-necessary/'>Architecture &#8211; Clean Architecture: Is the Input Boundary necessary</a></li><li class="list-group-item"><a href='../php-clean-architecture-how-to-pass-request-data-towards-inner-domain-level-use-cases/'>Php &#8211; Clean Architecture &#8211; How to pass request data towards inner, domain level Use Cases</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-should-each-view-have-its-own-presenter-and-viewmodel/'>Architecture &#8211; Clean Architecture: Should each view have its own presenter and viewmodel</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>