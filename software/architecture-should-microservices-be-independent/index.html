<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture &#8211; Should microservices be independent &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070001 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070001" class="post-1070001 software type-software status-publish hentry category-software tag-architecture tag-microservices"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture &#8211; Should microservices be independent</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">microservices</span></p><div class="entry-content"><p>I have the following application:</p><p><a href="https://i.stack.imgur.com/gBphP.png" rel="noreferrer"><img src="https://i.stack.imgur.com/gBphP.png" alt="enter image description here"/></a></p><p>This application receives an API call (HTTP), does some internal work that usually includes reading or writing to a database that has 5 different tables, generates an XML file and then sends it to another system via a REST interface. This has around 5K lines of codes.</p><p>I&#39;m now studying the microservice architecture and see how my application would/should look like if I was using it. After reading a lot of stuff, I came to two different solutions:</p><ol><li><p>In the first one, each microservice only serve one or a very few HTTP requests. This is good because if one microsevice is down, only a small part of my previous big app is down, but the rest is still working. However, there is a lot of code duplication between each microservice. For example, each of them has more or less the same code to generate an XML template or send request to the southbound system. I know it can be overcome by using a shared library, but then each microservice needs to use the same programming language.</p><p><a href="https://i.stack.imgur.com/rMSnf.png" rel="noreferrer"><img src="https://i.stack.imgur.com/rMSnf.png" alt="enter image description here"/></a></p></li><li><p>Splitting the part of my app to smaller services. Here, I avoid code duplication and each service can use a different programming language, but if a single microservice is down, everything stops working. Moreover, this looks like a monolithic architecture, because I&#39;m just separating the layer with HTTP request instead of a class/functions interface. It seems maybe a bit easier to understand and maintain, but not really giving anything more.</p><p><a href="https://i.stack.imgur.com/dqaXz.png" rel="noreferrer"><img src="https://i.stack.imgur.com/dqaXz.png" alt="enter image description here"/></a></p></li></ol><p>I would like to have your opinion on my personal use case as I really struggle to understand how an application in a microservice world should be designed without a concrete example.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The objective of <a href="https://microservices.io/patterns/microservices.html" rel="noreferrer">microservices</a> is to provide <strong>independently deployable, loosely coupled, lean services</strong>. This means that you shall be able to change one of the microservices however you want, and can deploy it in production without changing the others.</p><p>Your scenario 1 indeed breaks the monolith down into smaller pieces.  But these are not independently deployable:</p><blockquote><p>However, there is a lot of code duplication between each microservice. (...) I know it can be overcome by using a shared library,</p></blockquote><p>If you change some functionality in the shared code, you no longer are sure that it&#39;s interoperable with the other service.  And if shared library is changed, you&#39;re no longer sure that the other service still compiles and could be patched for an emergency issue within minutes.</p><p>Your focus seems to be reliability and continuity of the microservices that you have extracted from your legacy monolith.  But the common code weakens the independent continuity of services:  if you have for example a vulnerability in your shared library, both services could easily be disrupted by the same hacker. Or suffer from the same nasty UB bug.</p><p>The reliability achieved with microservice is based on true independence on the functional axis. The focus is also more on scalability (see the <a href="https://microservices.io/articles/scalecube.html" rel="noreferrer">scale cube</a>):  microservices can offer horizontal duplication (i.e. several service instances for the same API - if one breaks down, the clones continue to work), not to speak about partitioning.</p><p>For scenario 2, you could consider implementing fault tolerance by implementing horizontal scalability, i.e. having several instances of the same service running on different nodes. It&#39;s a tough change since the services have to find each other dynamically. But then, if one of the service instance is down in the chain,  the other services upstream can find another working instance. A trick for achieveing this is to move from a <a href="https://microservices.io/patterns/communication-style/rpi.html" rel="noreferrer">synchronous communication</a> to <a href="https://microservices.io/patterns/communication-style/messaging.html" rel="noreferrer">asynchronous communication</a> via event queues or a message broker.</p><p>It&#39;s difficult based on the few elements you provide to confirm if approach 2 is the best one. Perhaps another <a href="https://chrisrichardson.net/post/refactoring/2019/10/09/refactoring-to-microservices.html" rel="noreferrer">decomposition strategy</a> could result in even lower coupling.</p><p>I could for example think of this one, which combines both of your approaches: migrating your common XML generator features into a &#34;Service Proxy&#34; (the name is arbitrary: it seemed to be a relay between your new microservices and other applications),  splitting the core of the monolith into <a href="https://microservices.io/patterns/decomposition/decompose-by-business-capability.html" rel="noreferrer">highly cohesive but loosely coupled capabilities</a>, and hiding the details of the split to the outside world behind an <a href="https://microservices.io/patterns/apigateway.html" rel="noreferrer">API gateway</a>:</p><p><a href="https://i.stack.imgur.com/MSRYd.png" rel="noreferrer"><img src="https://i.stack.imgur.com/MSRYd.png" alt="enter image description here"/></a></p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/architecture-communication-between-microservices-distinguishing-internal-calls-safely/'>Architecture &#8211; Communication between microservices &#8211; distinguishing internal calls safely</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/the-best-practice-when-it-comes-to-naming-microservices/'>The best practice when it comes to naming microservices</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/rest-microservices-and-data-storage/'>Rest &#8211; Microservices and data storage</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/architecture-microservices-monolithfirst/'>Architecture &#8211; Microservices: MonolithFirst</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/database-the-proper-way-to-synchronize-data-across-microservices/'>Database &#8211;  the proper way to synchronize data across microservices</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>