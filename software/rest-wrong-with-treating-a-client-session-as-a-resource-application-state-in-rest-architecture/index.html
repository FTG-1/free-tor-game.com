<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211;  wrong with treating a client session as a resource/application state in REST architecture &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086587 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086587" class="post-1086587 software type-software status-publish hentry category-software tag-api-design tag-architecture tag-hateoas tag-rest tag-session"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211;  wrong with treating a client session as a resource/application state in REST architecture</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api-design</span><span class="mr-2 badge badge-info">Architecture</span><span class="mr-2 badge badge-warning">hateoas</span><span class="mr-2 badge badge-primary">rest</span><span class="mr-2 badge badge-danger">session</span></p><div class="entry-content"><p>Given these example REST API / HATEOAS applications:</p><ol><li><a href="https://www.infoq.com/articles/webber-rest-workflow" rel="nofollow noreferrer">InfoQ How to GET a Cup of Coffee example</a></li><li><a href="https://www.youtube.com/watch?v=oG2rotiGr90" rel="nofollow noreferrer">Java Spring REST API example</a></li></ol><p>&#8230; where POST/PUT/PATCHING resources clearly alters the state/availability of (other) resources — for example in:</p><ol><li><p>(REST example API 1)</p><pre><code>PUT /order/1234 HTTP/1.1
...

&lt;order&gt;
...
  &lt;status&gt;preparing&lt;/status&gt;
...
&lt;/order&gt;
</code></pre><p>&#8230; alters the state of the order, such that certain order options are not available anymore;</p></li><li><p>(REST example API 2)</p><pre><code>PUT /games/1/doors/3 HTTP/1.1
...

{&#34;status&#34;: &#34;OPEN&#34;}
</code></pre><p>&#8230; alters the state of the game, such that certain game options are not available anymore</p></li></ol><p>— what would be wrong with treating a client session as a resource/an application state as well?</p><p>Consider this example, to see what I mean:</p><blockquote><p>Let&#39;s imagine API key <code>1234</code> is the owner of <code>/products/1</code> and only this API key is allowed to operate on/view this product.</p></blockquote><p>Request:</p><pre><code>GET /products/1 HTTP/1.1
</code></pre><p>Response:</p><pre><code>HTTP/1.1 403 Forbidden
</code></pre><p>Request:</p><pre><code>POST /sessions HTTP/1.1
Authorization: NiceAPI apikey=1234

&lt;session&gt;
  &lt;apiKey&gt;1234&lt;/apiKey&gt;
&lt;/session&gt;
</code></pre><p>Response:</p><pre><code>HTTP/1.1 201 Created
Location: /sessions/2ef4c...

// created session sent along for convenience
&lt;session&gt;
  &lt;hash&gt;2ef4c...&lt;/hash&gt;
  &lt;apiKey&gt;1234&lt;/apiKey&gt;
&lt;/session&gt;
</code></pre><hr/><p><sup>In response to <a href="https://softwareengineering.stackexchange.com/questions/320213/what-is-wrong-with-treating-a-client-session-as-a-resource-application-state-in#comment679913_320213">Richard Tingle&#39;s</a> comment, the above response could be adjusted to send a cookie, in stead of the hash in the session resource representation:</sup></p><pre><code>HTTP/1.1 201 Created
Set-Cookie: session=2ef4c...; Secure; HttpOnly
Location: /sessions/2ef4c...

&lt;session&gt;
  &lt;hash&gt;2ef4c...&lt;/hash&gt; // not necessary/desirable anymore
  &lt;apiKey&gt;1234&lt;/apiKey&gt;
&lt;/session&gt;
</code></pre><p><sup>&#8230; to bind the session resource to a client</sup></p><hr/><p>Request:</p><pre><code>GET /products/1 HTTP/1.1
X-Session: 2ef4c... // or a Cookie header, etc.
</code></pre><p>Response: (if server verified session resource exists)</p><pre><code>HTTP/1.1 200 OK
// product content
</code></pre><p>Request:</p><pre><code>DELETE /sessions/2ef4c... HTTP/1.1
Authorization: NiceAPI apikey=1234
</code></pre><p>Response: (if server verified session belonged to the API key)</p><pre><code>HTTP/1.1 204 No Content
// session resource successfully deleted
</code></pre><p>Request:</p><pre><code>GET /products/1 HTTP/1.1
</code></pre><p>Response:</p><pre><code>HTTP/1.1 403 Forbidden
</code></pre><hr/><p>I mean, in both earlier mentioned REST API / HATEOAS applications the operations valid for any particular resource was dependent on other resource states and/or earlier client actions, as well (e.g. it&#39;s part of the application logic).</p><p>Given that client state/session management is generally frowned upon when talking about REST, how are the earlier mentioned REST API / HATEOAS application states different than my proposed session as a resource/application state?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>what would be wrong with treating a client session as a resource/an application state as well?</p></blockquote><p>There is nothing wrong with that per say, the problem comes when you try and use application state (in the form of session resources) as a form of authentication.</p><p>You are basically saying that if the application is in this specific state then this client (say client X) is authenticated to access this resource. You have turned your resource state into an authentication system.</p><p>Roy Fielding lists the reasons not to do this.</p><p><a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#fig_5_3" rel="nofollow">https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#fig_5_3</a></p><ul><li><p>The authentication part of the system doesn&#39;t have to be aware of the current application state to authenticate a request. You could authenticate a request on a completely different server, or the same authentication could be used in different parts of the system without having to know resource state.</p></li><li><p>The system is more reliable. Imagine that the update to the session resource failed for some reason, or was updated by something else after the client got a session key. Is the user logged in? When the client tries to update the products resource the server rejects this, but the client doesn&#39;t know why. It must remember that previously it tried to log in via a session, go back and try that again. It then has to figure out from that resource why it can&#39;t get a session. Anyone has used a web site that uses sessions can testify how confusing it gets, all of a sudden a request can just fail and the site dumps you back out to the login page, even though there was nothing wrong with the request. Imagine now trying to parse what happened automatically via code.</p></li><li><p>The system scales better. Without the application having to track resources in relation to each other it allows the system to scale out. Yes updating a resource might have side effects (if I delete this resource, also delete this resource), but those are specific to the domain logic. It isn&#39;t something like if I create this session resource tell EVERY one of these resources that for the next 10 minutes this user can access them. That is a lot more application state to remember and vastly limits scalability and caching.</p></li></ul><p>Like a lot of advantages of REST these benefits only become apparent at a larger scale than one client talking to one web server. Scale beyond that and you will very quickly be cursing sessions.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-invalid-operation-status-code-in-a-hateoas-rest-api/'>Rest &#8211; &#8220;Invalid operation&#8221; status code in a HATEOAS REST API</a></li><li class="list-group-item"><a href='../rest-a-web-application-as-a-rest-api-client-how-to-handle-resource-identifiers/'>Rest &#8211; A Web application as a REST API client: how to handle resource identifiers</a></li><li class="list-group-item"><a href='../rest-single-page-app-permissions-represented-through-restful-apis/'>Rest &#8211; Single page app permissions represented through RESTful APIs</a></li><li class="list-group-item"><a href='../rest-how-to-handle-business-rules-with-a-rest-api/'>Rest &#8211; How to handle business rules with a REST API</a></li><li class="list-group-item"><a href='../rest-whats-the-point-with-hateoas-on-the-client-side/'>Rest &#8211; What&#8217;s the point with HATEOAS on the client-side</a></li><li class="list-group-item"><a href='../rest-best-solution-to-authorize-that-a-user-is-only-allowed-to-modify-act-with-their-own-resources-in-a-rest-api/'>Rest &#8211; Best solution to authorize that a user is only allowed to modify/act with their own resources in a REST API</a></li><li class="list-group-item"><a href='../rest-what-does-hateoas-have-to-do-with-application-state/'>Rest &#8211; What does &#8220;HATEOAS&#8221; have to do with Application State</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>