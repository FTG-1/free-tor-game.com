<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Domain driven design and WCF services architecture &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073807 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073807" class="post-1073807 software type-software status-publish hentry category-software tag-architecture tag-c tag-domain-driven-design tag-net tag-wcf"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Domain driven design and WCF services architecture</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">domain-driven-design</span><span class="mr-2 badge badge-primary">net</span><span class="mr-2 badge badge-danger">wcf</span></p><div class="entry-content"><p>I am trying to figure out how to architecture my project in the DDD paradigm (a complete beginner in DDD) and stumbled upon a problem about the implementation of the web services&#8230; These are some options that I see:</p><p><strong>Fat client, Fat server (option 1):</strong></p><ul><li>Server:<ul><li>Repository layer: talks to database and can return domain objects.</li><li>Domain layer: contains domain objects with business logic and validations.</li><li>Service layer: acts like a façade to the domain layer.</li><li>WCF layer: exposes the service layer to web methods. It maps domain objects to appropriate DTO objects.</li></ul></li><li>Client:<ul><li>Infrastructure layer: talks to server through WCF services. It maps DTO objects back to domain objects.</li><li>Domain layer: contains domain objects with business logic and validations.</li><li>Service layer: acts like a façade to the domain layer.</li><li>UI layer (WinForms): uses service layer to communicate with domain objects.</li></ul></li></ul><p>Good: because the domain layer is both on client and on server, the validations happens on both (good for clients &#8211; reduces number of calls to the server, good for server &#8211; because of &#39;never trust the user data&#39;).</p><p>Bad: validation happens twice, a lot of mapping needed (for example a simple query to the database: domain (returned by repository) -&gt; DTO (needed for WCF) -&gt; domain (needed by domain layer on client) -&gt; DTO (for WinForms). Any change in the domain should be deployed to server and client at the same time. Complicated?</p><p><strong>Fat client, thin server (option 2):</strong></p><ul><li><p>Server:</p><ul><li>Repository: talks to database and returns DTO objects.</li><li>WCF layer: exposes the database calls to web methods.</li></ul></li><li><p>Client: Exactly the same as in option 1.</p></li></ul><p>Good: on the client I can treat WCF services as a regular repository which returns DTO objects. Simpler as option nr. 1.</p><p>Bad: is it OK that the repository works on DTO-s instead of domain objects? Also &#8211; server doesn&#39;t perform any validation so it has to trust clients about the data.</p><p><strong>Thin client, fat server (option 3):</strong></p><ul><li><p>Server: Exactly the same as in option 1.</p></li><li><p>Client:</p><ul><li>Infrastructure layer: talks to server through WCF services.</li><li>UI layer (WinForms): uses presenters to communicate with the server via WCF calls in infrastructure layer.</li></ul></li></ul><p>Good: all domain logic is on the server.</p><p>Bad: the client doesn&#39;t contain any validation, so it can make a lot of unnecessary calls to the server.</p><hr/><p>I am leaning toward my first option, but it looks like I am overcomplicating things&#8230; Any advice or other options?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I&#39;d go with Option 3, with the following notes:</p><ol><li>Try and reduce the amount of domain logic that your clients need to know to get the job done. Create services that expose that data in meaningful (to your clients) ways, so that you can request collections of domain objects which fulfil certain criteria, rather than doing that crunching on your client.</li><li>Validation should be considered optional on the client-side as, you can never guarantee that future client implementations are going to be done properly. Therefore, always validate on the server side as if it hadn&#39;t been done elsewhere. Of course, clients <em>should</em> be validating on the client-side too.</li><li>Rather than mapping the WCF data back to full domain objects on the client side, consider mapping them to simpler ViewModel-type objects - a slimmed down version of your full domain objects only containing properties appropriate to the client - makes client programming simpler.</li></ol><p>The problem you&#39;re still faced with is lots of mapping. I guess this price is worth paying (and made easier with a tool such as <a href="http://automapper.codeplex.com/" rel="nofollow">AutoMapper</a>) because removing the client dependency on your domain model gives you breathing room to change your domain, tweak the mapping, without breaking any client code.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-software-design-idea-for-multi-tier-architecture/'>Architecture &#8211; Software Design Idea for multi tier architecture</a></li><li class="list-group-item"><a href='../c-is-this-a-good-visual-studio-solution-structure-for-a-domain-driven-design-restful-web-service/'>C# &#8211; Is this a good Visual Studio solution structure for a domain driven design RESTful web service</a></li><li class="list-group-item"><a href='../the-best-way-to-create-dtos-from-entities-and-update-entities-from-dtos-in-a-layered-architecture/'>The best way to create DTOs from entities and update entities from DTOs in a layered architecture</a></li><li class="list-group-item"><a href='../mvc-advice-on-architecture-wcf-mvc/'>Mvc &#8211; Advice on architecture (WCF / MVC)</a></li><li class="list-group-item"><a href='../c-architecture-how-to-pass-models-between-controllers-services-and-repositories/'>C# &#8211; Architecture: How to pass models between controllers, services and repositories</a></li><li class="list-group-item"><a href='../architecture-how-to-structure-a-domain-driven-design-in-an-onion-architecture/'>Architecture &#8211; How to structure a Domain Driven Design in an Onion Architecture</a></li><li class="list-group-item"><a href='../in-a-domain-driven-development-ddd-have-a-validation-on-a-dto-that-calls-a-external-service-is-wrong-if-yes-where-should-it-be/'>In a Domain Driven Development DDD, have a validation on a DTO that calls a external service is wrong, if yes, where should it be</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>