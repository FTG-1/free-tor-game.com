<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; Clean Architecture &#8211; How to pass request data towards inner, domain level Use Cases &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083772 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083772" class="post-1083772 software type-software status-publish hentry category-software tag-clean-architecture tag-object-oriented-design tag-php"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; Clean Architecture &#8211; How to pass request data towards inner, domain level Use Cases</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">clean-architecture</span><span class="mr-2 badge badge-info">object-oriented-design</span><span class="mr-2 badge badge-warning">PHP</span></p><div class="entry-content"><p>Use Case Interactor:</p><p><a href="../../../i.stack.imgur.com/LddSz.jpg" rel="noreferrer"><img src="../../../i.stack.imgur.com/LddSz.jpg" alt="Use Case Interactor"/></a></p><p>We can see it in this picture how does a request cross the layers until it reaches the <strong>Use Case Interactor</strong>.</p><p>How does the controller pass the request towards the Use Case Interactor? By the request i mean the data from the user ( maybe a form )</p><p>I understand that the Input Port is an interface, but how do you pass data across it towards Use Case Interactor?</p><p>Also, does every Use Case <strong>has it&#39;s own</strong> Input Port? If so, that doesn&#39;t make much sense, why not just use the Use Case as a reference in controller instead of adding a layer of abstraction with an interface. I mean what is the point? The layer in which controller resides knows about the layer where Use Case is located.<br /> What i mean by this is the following:<br /> If i have a class: <code>AddUserUseCase</code>, does that class need to have it&#39;s own input port (interface): <code>AddUserInputPort</code>. Or can we make something more generic, like <code>UserInputPort</code> and then have all <code>UserUseCases</code> implement that?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This picture shows a generalized view of various elements that form the components and the interfaces between the layers. When I say interfaces, I don&#39;t mean the interface types (like in C# and Java, represented in UML by the <code>&lt;&lt;interface&gt;&gt;</code> stereotype), but I use the term in a more general way - to denote the set of public (externally visible) elements exposed by a software component (so, public methods and properties in the case of a class, or the set of &#34;surface level&#34; classes of a component or a layer, etc.). The diagram is generalized in the sense that you don&#39;t have to have all the elements on it as classes in your program. You&#39;ll see what I mean in a moment.</p><blockquote><p>How does the controller pass the request towards the Use Case Interactor?</p></blockquote><p>So, the interface (in the sense described above) of the Use Case Interactor consists of <em>two</em> things - the Input Port interface type <em>and</em> the Request Model data structure. The Request Model is the input to the Interactor that goes through the input port; this doesn&#39;t have to be a class or a data structure, it could just be the list of parameters to a method defined on the input port - but is shown here in a more generalized way as its own thing. The Controller <em>interprets</em> the request (from the view), figures out what it means in terms of the business logic and the supported use cases, and then calls the appropriate method on the appropriate use case, with the appropriate parameters (so it either constructs a parameter list or an instance of the Request Model structure) - this is how the &#34;request&#34; (reinterpreted in the context of a given use case) is passed on.</p><p>Now, note that the Request Model is conceptually owned and defined by the use case, it&#39;s part of its interface (the so called <em>provided interface</em>), and that it <em>has</em> to be on that side of the architectural boundary, in order for the use case layer to remain independent of the upper layers (the rule about the direction of the dependencies). The contract between the layers there is that the Use Case is sort of saying &#34;here, I provide these methods and these data structures for them to use as input if you need to use the services I offer&#34;.</p><p>Similarly, the Output Port interface type and the Response Model data structure form together an interface for an extension point (a so called <em>required interface</em>). I.e., this is a place where you can take some behavior and plug it into the use case. This is what the Presenter does by implementing the Output Port; this allows the use case to call the Presenter without ever knowing that it even exists. This is classic dependency inversion, and again, it controls the direction of the coupling across the architectural boundary. Again, the Response Model could be a separate data structure or simply a list of parameters. The contract defined by the use case is &#34;you can plug in here by implementing this interface, and I&#39;ll call you and provide data using these data structures&#34;.</p><p>Now, one point of possible confusion is that in a real application, you won&#39;t usually have things named like &#34;OutputPort&#34; or &#34;UseCaseInteractor&#34;. These are just generic names used to talk about these concepts. A Use Case Interactor will have some meaningful name, e.g. &#34;Reservations&#34; (well, meaningful in the context of the domain that&#39;s being modeled); the Output Port could be an interface called &#34;IReservationsObserver&#34;, and anything that wanted to observe interesting changes would implement that interface and register itself with the Reservations object (this is just one possibility, don&#39;t take that as a rule - it&#39;s an example off the top of my head, based on the Observer Pattern). The Input Port could be an interface called &#34;IReservations&#34; that would provide reservations-related methods; maybe something like &#34;MakeReservation(ReservationRequestDetails details)&#34;, where &#34;ReservationRequestDetails&#34; is the Request Model (a data model for the specific use case scenario).</p><p>The (green, presentation layer) Request is a part of the Controller&#39;s interface (it&#39;s conceptually owned by the Controller)<sup>2</sup>. Often, the data it contains will not be in a suitable format for the use case layer (say, numbers could be represented as strings, or it may contain presentation-specific fields that make no sense in other layers); the Controller takes that, and then uses it as a basis to construct a (red, use case layer) Request Model that more directly expresses the input to the use case.</p><p>Also, just to be clear, there generally isn&#39;t just one Use Case Interactor that handles all the use cases. Also, as you&#39;ve seen by now, you shouldn&#39;t take the diagram <em>too literally</em>; the Use Case Interactor box could represent one class, but it could also be a stand-in for a small group of collaborating classes. In the same vain, the Request and Response models could actually represent a group of types that serve as parameters to various methods on the external boundary of the use case.</p><blockquote><p>Also, does every Use Case has it&#39;s own Input Port? If so, that doesn&#39;t make much sense, why not just use the Use Case as a reference in controller instead of adding a layer of abstraction with an interface. I mean what is the point?</p></blockquote><p>You don&#39;t <em>have</em> to do that; what you want to do is to control the direction and the number of dependencies between the layers. The outer layer depends on anything that it directly references from the inner layer (any of the types or any other elements<sup>1</sup> from the inner layer that it uses in any way - as a service, for internal logic, parameters, etc.). These referenced types/elements form the &#34;outer surface&#34; - the exposed public interface of the inner layer. These have to be relatively stable against changes; if you make changes to those, they will propagate to the outer layer, because it directly depends on them. Behind this &#34;outer surface&#34; the inner layer is effectively encapsulated, so you can restructure and refactor it.</p><p>Now, in the image you&#39;ve provided, the dependency structure is such that the presentation layer does not have any knowledge of the concrete Use Case Interactor, which means that it&#39;s internal to the Use Cases layer, and that you can fiddle with it more or less without affecting the outer components. But you don&#39;t <em>have</em> to have that exact dependency structure. The Input Port doesn&#39;t have to be an interface type, it could be a concrete or an abstract base class, or you may opt to not have it at all. In the latter case, the Controller would directly depend on the Interactor, which would make the Interactor part of the &#34;surface level&#34; types. Then if you wanted to change or reorganize the internal implementation, you would make sure to not make changes to the public elements of the Interactor, and, if the changes are more involved, you would maybe <em>extract</em> a subset of its code into a new class during refactoring - which would then lead to the structure similar to the one on the diagram - except what was your Interactor would now assume the role of, say, the Input Port.</p><blockquote><p>Or can we make something more generic, like UserInputPort and then have all UserUseCases implement that?</p></blockquote><p>I hope you see that use cases are objects designed to do specific things (support specific usage scenarios), so in general there&#39;s no much point in making a generic interface for a group of them (that&#39;s not the idea), although it may make sense to do so in specific cases.</p><hr/><p><sup>1</sup> &#34;other elements&#34; could be anything that&#39;s part of the &#34;contract&#34; between the two layers - an expectation that certain data will have a particular structure (even though it isn&#39;t explicitly defined as a type), a convention of some sort, etc.</p><p><sup>2</sup> The View/ViewModel/Controller part of this diagram is a little ambiguous; the exact dependency structure there depends on the MVC/MVP variant used. The View may have a direct reference to the Controller, for example (in order to call it and pass the Request). Or not - maybe the Controller polls or subscribes to an event queue that&#39;s not shown. The interaction between the View and the ViewModel may be supported by the data-binding mechanism of the framework used. The Presenter could be merged with the ViewModel, or even with the Controller, etc.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-clean-architecture-use-case-containing-the-presenter-or-returning-data/'>Architecture &#8211; Clean Architecture: Use case containing the presenter or returning data</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-calling-a-usecase-from-the-controller/'>Architecture &#8211; Clean Architecture: Calling a Usecase from the Controller</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-is-the-input-boundary-necessary/'>Architecture &#8211; Clean Architecture: Is the Input Boundary necessary</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-use-case-spanning-multiple-ui-elements/'>Architecture &#8211; Clean Architecture: Use case spanning multiple UI elements</a></li><li class="list-group-item"><a href='../uncle-bobs-clean-architecture-dealing-with-anemic-interactors-tiering-and-front-end-mvvm/'>Uncle Bob&#8217;s Clean Architecture &#8211; Dealing with anemic interactors, tiering, and front-end MVVM</a></li><li class="list-group-item"><a href='../unit-testing-clean-architecture-use-case-testing/'>Unit-testing &#8211; Clean Architecture use case testing</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>