<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>What happened to database constraints &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078090 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078090" class="post-1078090 software type-software status-publish hentry category-software tag-database-design tag-relational-database tag-rules-and-constraints"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">What happened to database constraints</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">database-design</span><span class="mr-2 badge badge-info">relational-database</span><span class="mr-2 badge badge-warning">rules-and-constraints</span></p><div class="entry-content"><p>When I review database models for RDBMS, I&#39;m usually surprised to find little to no constraints (aside PK/FK). For instance, percentage is often stored in a column of type <code>int</code> (while <a href="https://msdn.microsoft.com/en-us/library/ms187745.aspx" rel="noreferrer"><code>tinyint</code></a> would be more appropriate) and there is no <code>CHECK</code> constraint to restrict the value to 0..100 range. Similarly on SE.SE, answers suggesting check constraints often receive <a href="https://softwareengineering.stackexchange.com/questions/234572/how-to-handle-or-prevent-all-admins-and-users-being-removed#comment469176_234586">comments</a> suggesting that the database is the wrong place for constraints.</p><p>When I ask about the decision not to implement constraints, team members respond:</p><ul><li><p>Either that they don&#39;t even know that such features exist in their favorite database. It is understandable from programmers using ORMs only, but much less from DBAs who claim to have 5+ years experience with a given RDBMS.</p></li><li><p>Or that they enforce such constraints at application level, and duplicating those rules in the database is not a good idea, violating SSOT.</p></li></ul><p>More recently, I see more and more projects where even foreign keys aren&#39;t used. Similarly, I&#39;ve seen a few comments here on SE.SE <a href="https://softwareengineering.stackexchange.com/questions/336250/best-practice-regarding-table-schema/336252#comment718785_336252">which show</a> that the users don&#39;t care much about referential integrity, letting the application handle it.</p><p>When asking teams about the choice not to use FKs, they tell that:</p><ul><li><p>It&#39;s PITA, for instance when one has to remove an element which is referenced in other tables.</p></li><li><p>NoSQL rocks, and there are no foreign keys there. Therefore, we don&#39;t need them in RDBMS.</p></li><li><p>It&#39;s not a big deal in terms of performance (the context is usually small intranet web applications working on small data sets, so indeed, even indexes wouldn&#39;t matter too much; nobody would care if a performance of a given query passes from 1.5 s. to 20 ms.)</p></li></ul><p>When I look at the application itself, I systematically notice two patterns:</p><ul><li><p>The application properly sanitizes data and checks it before sending it to the database. For instance, there is no way to store a value <code>102</code> as a percentage through the application.</p></li><li><p>The application assumes that all the data which comes from the database is perfectly valid. That is, if <code>102</code> comes as a percentage, either something, somewhere will crash, or it will simply be displayed as is to the user, leading to weird situations.</p></li><li><p>While more than 99% of the queries are done by a single application, over time, scripts start to appearâ€”either scripts ran by hand when needed, or cron jobs. Some data operations are also performed by hand on the database itself. Both scripts and manual SQL queries have a high risk of introducing invalid values.</p></li></ul><p>And here comes my question:</p><p>What are the reasons to model relational databases without check constraints and eventually even without foreign keys?</p><hr/><p>For what it&#39;s worth, this question and the answers I received (especially the interesting discussion with Thomas Kilian) led me to write <a href="http://blog.pelicandd.com/article/115/" rel="noreferrer">an article with my conclusions on the subject of database constraints</a>.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>It is important to distinguish between different use cases for databases.</p><p>The traditional business database is accessed by multiple independent applications and services and perhaps directly by authorized users. It is critical to have a well-thought out schema and constraints at the database level, so a bug or oversight in a single application does not corrupt the database. The database is business-critical which means inconsistent or corrupt data may have disastrous results for the business. The data will live forever while applications come and go. These are the places which may have a dedicated DBA to ensure the consistency and health of the database.</p><p>But there are also systems where the database is tightly integrated with a single application. Stand-alone applications or web application with a single embedded database. As long as the database is exclusively accessed by a single application, you could consider constraints redundant - as long as the application works correctly. These systems are often developed by programmers with a focus on application code and perhaps not a deep understanding of the relational model. If the application uses an ORM the constraints might be declared at the ORM level in a form more familiar to application programmers. In the low end we have PHP applications using MySQL, and for a long time MySQL did not support basic constraints at all, so you <em>had</em> to rely on the application layer to ensure consistency.</p><p>When developers from these different backgrounds meet you get a culture clash.</p><p>Into this mix we get the new wave of distributed &#34;cloud storage&#34; databases. It is very hard to keep a distributed database consistent without losing the performance benefit, so these databases often eschew consistency checks at the database level and basically lets the programmers handle it at the application level. Different application have different consistency requirements, and while Googles search engine prioritize availability over consistency across their servers, I&#39;m willing to bet their payroll system runs on a relational database with lots of constraints.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../designing-a-database-with-circular-references-for-the-one-of-many-case/'>Designing a database with circular references for the-one-of-many case</a></li><li class="list-group-item"><a href='../database-design-with-performance-issue-and-use-of-views/'>Database design with performance issue and use of views</a></li><li class="list-group-item"><a href='../exclusive-arc-in-database-and-why-its-evil/'>Exclusive arc in database and why it&#8217;s evil</a></li><li class="list-group-item"><a href='../should-i-define-the-relations-between-tables-in-the-database-or-just-in-code/'>Should I define the relations between tables in the database or just in code</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>