<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Why is *declaration* of data and functions necessary in C language, when the definition is written at the end of the source code &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1068244 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1068244" class="post-1068244 software type-software status-publish hentry category-software tag-c tag-declarations tag-functions tag-language-design tag-variables"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Why is *declaration* of data and functions necessary in C language, when the definition is written at the end of the source code</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">declarations</span><span class="mr-2 badge badge-warning">functions</span><span class="mr-2 badge badge-primary">language-design</span><span class="mr-2 badge badge-danger">variables</span></p><div class="entry-content"><p>Consider the following &#34;C&#34; code:</p><pre><code>#include&lt;stdio.h&gt;
main()
{   
  printf(&#34;func:%d&#34;,Func_i());   
}

Func_i()
{
  int i=3;
  return i;
}
</code></pre><p><code>Func_i()</code> is defined at the end of the source code and no declaration is provide before its use in <code>main()</code>. At the very time when the compiler sees <code>Func_i()</code> in <code>main()</code>, it comes out of the <code>main()</code> and finds out <code>Func_i()</code>. The compiler somehow finds the value returned by <code>Func_i()</code>and gives it to <code>printf()</code>. I also know that the compiler cannot find the <em>return type</em> of <code>Func_i()</code>. It, by default takes(guesses?) the <em>return type</em> of <code>Func_i()</code> to be <code>int</code>. That is if the code had <code>float Func_i()</code> then the compiler would give the error: <em>Conflicting types for <code>Func_i()</code></em>.</p><p>From the above discussion we see that:</p><ol><li><p>The compiler can find the value returned by <code>Func_i()</code>.</p><blockquote><ul><li>If the compiler can find the value returned by <code>Func_i()</code> by coming out of the <code>main()</code> and searching down the source code, then why can&#39;t it find the type of Func_i(), which is <em>explicitly</em> mentioned.</li></ul></blockquote></li><li><p>The compiler must know that <code>Func_i()</code> is of type float&#8211;that&#39;s why it gives the error of conflicting types.</p></li></ol><blockquote><ul><li>If the compiler knows that <code>Func_i</code> is of type float, then why does it still assume <code>Func_i()</code> to be of type int, and gives the error of conflicting types? Why don&#39;t it forcefully make <code>Func_i()</code> to be of type float.</li></ul></blockquote><p>I&#39;ve the same doubt with the <em>variable declaration</em>. Consider the following &#34;C&#34; code:</p><pre><code>#include&lt;stdio.h&gt;
main()
{
  /* [extern int Data_i;]--omitted the declaration */
  printf(&#34;func:%d and Var:%d&#34;,Func_i(),Data_i);
}

 Func_i()
{
  int i=3;
  return i;
}
int Data_i=4;
</code></pre><p>The compiler gives the error: <em>&#39;Data_i&#39; undeclared(first use in this function).</em></p><blockquote><ul><li>When the compiler sees <code>Func_i()</code>, it goes down to the source code to find the value returned by Func_(). Why can&#39;t the compiler do the same for the variable Data_i?</li></ul></blockquote><p><strong>Edit:</strong></p><p>I don&#39;t know the details of the inner working of compiler, assembler, processor etc. The basic idea of my question is that if I tell(write) the return-value of the function in the source code at last, after the use of that function then the &#34;C&#34; language allows the computer to find that value without giving any error. Now why can&#39;t the computer find the type similarly. Why can&#39;t the type of Data_i be found as Func_i()&#39;s return value was found. Even if I use the <code>extern data-type identifier;</code> statement, I am not telling the value to be returned by that identifier(function/variable). If the computer can find that value then why can&#39;t it find the type. Why do we need the forward declaration at all?</p><p>Thank you.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Because C is a <strong>single-pass</strong>, <strong>statically-typed</strong>, <strong>weakly-typed</strong>, <strong>compiled</strong> language.</p><ol><li><p><strong>Single-pass</strong> means the compiler does not look ahead to see the definition of a function or variable. Since the compiler does not look ahead, the declaration of a function must come before the use of the function, otherwise the compiler does not know what its type signature is. However, the definition of the function can be later on in the same file, or even in a different file altogether. See point #4.</p><p>The only exception is the historical artifact that undeclared functions and variables are presumed to be of type &#34;int&#34;. Modern practice is to avoid implicit typing by always declaring functions and variables explicitly.</p></li><li><p><strong>Statically-typed</strong> means that all type information is computed at compile time. That information is then used to generate machine code that executes at run time. There is no concept in C of run-time typing. Once an int, always an int, once a float, always a float. However, that fact is somewhat obscured by the next point.</p></li><li><p><strong>Weakly-typed</strong> means that the C compiler automatically generates code to convert between numeric types without requiring the programmer to explicitly specify the conversion operations. Because of static typing, the same conversion will always be carried out in the same way each time through the program. If a float value is converted to an int value at a given spot in the code, a float value will always be converted to an int value at that spot in the code. This cannot be changed at run-time. The value itself may change from one execution of the program to the next, of course, and conditional statements may change which sections of code are run in what order, but a given single section of code without function calls or conditionals will always perform the exact same operations whenever it is run.</p></li><li><p><strong>Compiled</strong> means that the process of analyzing the human-readable source code and transforming it into machine-readable instructions is fully carried out before the program runs. When the compiler is compiling a function, it has no knowledge of what it will encounter further down in a given source file. However, once compilation (and assembly, linking, etc) have completed, each function in the finished executable contains numeric pointers to the functions that it will call when it is run. That is why main() can call a function further down in the source file. By the time main() is actually run, it will contain a pointer to the address of Func_i().</p><p>Machine code is very, very specific. The code for adding two integers (3 + 2) is different from the one for adding two floats (3.0 + 2.0). Those are both different from adding an int to a float (3 + 2.0), and so on. The compiler determines for every point in a function what exact operation needs to be carried out at that point, and generates code that carries out that exact operation. Once that has been done, it cannot be changed without recompiling the function.</p></li></ol><p>Putting all these concepts together, the reason that main() cannot &#34;see&#34; further down to determine the type of Func_i() is that type analysis occurs at the very beginning of the compilation process. At that point, only the part of the source file up to the definition of main() has been read and analyzed, and the definition of Func_i() is not yet known to the compiler.</p><p>The reason that main() can &#34;see&#34; where Func_i() is to <strong>call</strong> it is that calling happens at run time, after compilation has already resolved all of the names and types of all of the identifiers, assembly has already converted all of the functions to machine code, and linking has already inserted the correct address of each function in each place it is called.</p><p>I have, of course, left out most of the gory details. The actual process is much, much more complicated. I hope that I have provided enough of a high-level overview to answer your questions.</p><p>Additionally, please remember, what I have written above specifically applies to C.</p><p>In other languages, the compiler may make multiple passes through the source code, and so the compiler could pick up the definition of Func_i() without it being predeclared.</p><p>In other languages, functions and / or variables may be dynamically typed, so a single variable could hold, or a single function could be passed or return, an integer, a float, a string, an array, or an object at different times.</p><p>In other languages, typing may be stronger, requiring conversion from floating-point to integer to be explicitly specified. In yet other languages, typing may be weaker, allowing conversion from the string &#34;3.0&#34; to the float 3.0 to the integer 3 to be carried out automatically.</p><p>And in other languages, code may be interpreted one line at a time, or compiled to byte-code and then interpreted, or just-in-time compiled, or put through a wide variety of other execution schemes.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-understanding-stack-frame-of-function-call-in-c-c/'>C++ &#8211; Understanding stack frame of function call in C/C++</a></li><li class="list-group-item"><a href='../c-how-does-go-improve-productivity-with-implicit-interfaces-and-how-does-that-compare-with-cs-notion-of-extension-methods/'>C# &#8211; How does Go improve productivity with &#8220;implicit&#8221; interfaces, and how does that compare with C#&#8217;s notion of Extension Methods</a></li><li class="list-group-item"><a href='../best-and-safest-api-for-a-function-which-fills-a-buffer-with-variable-length-data/'>Best and safest API for a function which fills a buffer with variable-length data</a></li><li class="list-group-item"><a href='../why-do-we-have-to-mention-the-data-type-of-the-variable-in-c/'>Why do we have to mention the data type of the variable in C</a></li><li class="list-group-item"><a href='../why-dynamic-memory-allocation-functions-in-c-returns-void/'>Why dynamic memory allocation functions in C returns void*</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>