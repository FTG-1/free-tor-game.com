<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; Principle of least astonishment (POLA) and interfaces &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080528 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080528" class="post-1080528 software type-software status-publish hentry category-software tag-design tag-design-patterns tag-interfaces"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; Principle of least astonishment (POLA) and interfaces</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">interfaces</span></p><div class="entry-content"><p>A good quarter of a century ago when I was learning C++, I was taught that interfaces should be forgiving and as far as possible not care about the order that methods were called since the consumer may not have access to the source or documentation in lieu of this.</p><p>However, whenever I&#39;ve mentored junior programmers and senior devs have overheard me, they&#39;ve reacted with astonishment which has got me wondering whether this was really a thing or if it has just gone out of vogue.</p><p>As clear as mud?</p><p>Consider an interface with these methods (for creating data files):</p><pre><code>OpenFile
SetHeaderString
WriteDataLine
SetTrailerString
CloseFile
</code></pre><p>Now you could of course just go thru these in order, but say you didn&#39;t care about the file name (think <code>a.out</code>) or what header and trailer string were included, you could just call <code>AddDataLine</code>.</p><p>A less extreme example might be omitting the headers and trailers.</p><p>Yet another might be setting the header and trailer strings before the file has been opened.</p><p>Is this a principle of interface design that is recognised or just the POLA way before it was given a name?</p><p>N.B. don&#39;t get bogged down in the minutiae of this interface, it is just an example for the sake of this question.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>One way in which you can stick to the principle of least astonishment is to consider other principles such as <a href="https://en.wikipedia.org/wiki/Interface_segregation_principle">ISP</a> and <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">SRP</a>, or even <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a>.</p><p>In the specific example you&#39;ve given, the suggestion seems to be that there&#39;s a certain dependency of ordering for manipulating the file; but your API controls both the file access and the data format, which smells a bit like a violation of SRP.</p><p><em>Edit/Update: it also suggests that the API itself is asking the user to violate DRY, because they will need to repeat the same steps every time they use the API</em>.</p><p>Consider an alternative API where the IO operations are separate from the data operations. and where the API itself &#39;owns&#39; the ordering:</p><p><strong>ContentBuilder</strong></p><pre><code>SetHeader( ... )
AddLine( ... )
SetTrailer ( ... )
</code></pre><p><strong>FileWriter</strong></p><pre><code>Open(filename) 
Write(content) throws InvalidContentException
Close()
</code></pre><p>With the above separation, the <code>ContentBuilder</code> doesn&#39;t need to actually &#34;do&#34; anything apart from store the lines/header/trailer (Maybe also a <code>ContentBuilder.Serialize()</code> method which knows the order) .  By following other SOLID principles it no longer matters whether you set the header or trailer before or after adding lines, because nothing in the <code>ContentBuilder</code> is actually written to file until its passed to <code>FileWriter.Write</code>.</p><p>It also has the added benefit of being a little more flexible; for example, it might be useful to write the content out to a diagnostic logger, or maybe pass it across a network instead of writing it directly to a file.</p><p>While designing an API you should also consider error reporting, whether that&#39;s a state, a return value, an exception, a callback, or something else.  The user of the API will probably expect to be able to programmatically detect any violations of its contracts, or even other errors which it can&#39;t control such as file I/O errors.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-should-interfaces-extend-and-in-doing-so-inherit-methods-of-other-interfaces/'>C# &#8211; Should interfaces extend (and in doing so inherit methods of) other interfaces</a></li><li class="list-group-item"><a href='../object-oriented-the-principle-of-least-astonishment/'>Object-oriented &#8211;  the principle of least astonishment</a></li><li class="list-group-item"><a href='../design-violating-the-interface-segregation-principle/'>Design &#8211; Violating the Interface Segregation Principle</a></li><li class="list-group-item"><a href='../php-interface-segregation-principle-type-hinting-multiple-interfaces/'>Php &#8211; Interface Segregation Principle &#8211; type hinting multiple interfaces</a></li><li class="list-group-item"><a href='../c-split-up-large-interfaces/'>C++ &#8211; Split up large interfaces</a></li><li class="list-group-item"><a href='../object-oriented-interface-segregation-principle-what-to-do-if-interfaces-have-significant-overlap/'>Object-oriented &#8211; Interface Segregation Principle: What to do if interfaces have significant overlap</a></li><li class="list-group-item"><a href='../interfaces-and-casting/'>Interfaces and Casting</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>