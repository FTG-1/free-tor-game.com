<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java: would you use an EnumSet in this case &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079958 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079958" class="post-1079958 software type-software status-publish hentry category-software tag-enum tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java: would you use an EnumSet in this case</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">enum</span><span class="mr-2 badge badge-info">java</span></p><div class="entry-content"><p>I have this weird scenario in which some Java property is used to build and HQL query, and the type of the field is <code>Boolean</code>, i.e. it is boxed. I wondered why because I don&#39;t really like to think of booleans as having three possible values, <code>true</code>, <code>false</code>, and <code>null</code>. I recently found out the <code>null</code> value actually has semantics in this system. The semantics are: <code>true</code> means &#34;only unviewed&#34;, <code>false</code> means &#34;only viewed&#34;, and null means &#34;all&#34;. So, if null, the field is ignored when building the HQL query, so that the end result contains both unviewed and viewed results.</p><p>In my opinion this is a case where an enum should be used. Something like this:</p><pre><code>enum ViewStatus {
  VIEWED, UNVIEWED;
}
</code></pre><p>My dilemma now is what to use for the third case that should represent the union of these two constants? The two options are:</p><ol><li><p>Introduce a third enum constant, <code>ALL</code>.</p><pre><code>enum ViewStatus {
  VIEWED, UNVIEWED, ALL;
}
</code></pre></li><li><p>Use an <code>EnumSet</code>.</p></li></ol><p><code>EnumSet</code> pretty much exists specifically for this purpose, but&#8230; it seems like just two much overhead. Especially when reading the values in the part of the code that builds the HQL.</p><p>So, what are your thoughts? Shall I go with a third enum constant and refactor to <code>EnumSet</code> when need arises?</p><p>Thanks!</p><h3>Update</h3><p>I&#39;ll go for an <code>EnumSet</code> because I want to introduce methods on that enum that wouldn&#39;t make sense to be called on <code>ALL</code>. For example <code>ViewStatus.isViewed()</code>.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I rather avoid things like</p><pre><code>ViewStatus viewStatus;
</code></pre><p>since it introduces a new class without giving you anything in return when compared to</p><pre><code>boolean isViewed;
</code></pre><p>But that&#39;s a matter of personal taste.</p><hr/><p>By setting the reference to <code>null</code> you can have a third value, which is not really good, since you can get an unexpected <code>NPE</code>somewhere; <code>null</code> is just no &#34;first class value&#34;.</p><blockquote><p>EnumSet pretty much exists specifically for this purpose, but... it seems like just two much overhead. Especially when reading the values in the part of the code that builds the HQL.</p></blockquote><p>The overhead of an <code>EnumSet</code> is reasonable, it caches the class and an array of all values, and uses a <code>long</code> for storing the data (as long as the <code>enum</code> is small enought). Its <code>equals</code> method is quite fast, but obviously slower than reference comparison. You mentioned using HQL, so most probably the runtime will be dominated by the database access, so IMHO you&#39;re needless and premature optimization.</p><p>The mutability of the <code>EnumSet</code> may be a problem sometimes, but there&#39;s <a href="http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Sets.html#immutableEnumSet%28java.lang.Iterable%29" rel="nofollow">ImmutableEnumSet</a> in guava.</p><hr/><blockquote><p>I&#39;ll go for an EnumSet because I want to introduce methods on that enum that wouldn&#39;t make sense to be called on ALL. For example ViewStatus.isViewed().</p></blockquote><p>I don&#39;t think you stated all your alternatives right. You can have both</p><pre><code>enum ViewStatus {VIEWED, UNVIEWED}
</code></pre><p>and</p><pre><code>enum ViewStatuses {VIEWED, UNVIEWED, ALL}
</code></pre><p>where the second is an replacement for the <code>EnumSet</code>. That said, I agree with your decision.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-should-i-create-an-enum-mapping-to-the-database-table/'>Object-oriented &#8211; Should I create an Enum mapping to the database table</a></li><li class="list-group-item"><a href='../c-using-scoped-enums-for-bit-flags-in-c/'>C++ &#8211; Using scoped enums for bit flags in C++</a></li><li class="list-group-item"><a href='../java-would-combining-enums-with-static-strings-in-java-be-sloppy/'>Java &#8211; Would combining enums with static strings in java be sloppy</a></li><li class="list-group-item"><a href='../java-enum-with-a-lot-of-boolean-properties/'>Java &#8211; Enum with a lot of boolean properties</a></li><li class="list-group-item"><a href='../java-whats-the-best-way-to-merge-two-xml-strings-with-the-same-tag-names/'>Java &#8211; What&#8217;s the best way to merge two XML Strings with the same tag names</a></li><li class="list-group-item"><a href='../rest-is-it-a-good-practice-to-have-a-special-value-all-in-an-enum/'>Rest &#8211; Is it a good practice to have a special value &#8220;ALL&#8221; in an enum</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>