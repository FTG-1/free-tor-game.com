<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Storing in-text metadata in a discrete data structure &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083785 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083785" class="post-1083785 software type-software status-publish hentry category-software tag-concepts tag-data-structures tag-markup tag-separation-of-concerns"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Storing in-text metadata in a discrete data structure</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">concepts</span><span class="mr-2 badge badge-info">data structures</span><span class="mr-2 badge badge-warning">markup</span><span class="mr-2 badge badge-primary">separation-of-concerns</span></p><div class="entry-content"><p>I am developing an application which will need to store <em>inline</em>, <em>intext</em> metadata. What I mean by that is the following: let&#39;s say we have a long text, and we want to store some metadata connected with a specific word, or sentence of the text.</p><p>What would be the best way to store this information?</p><p>My <strong>first thought</strong> was to include in the text some kind of <strong><code>Markdown</code> syntax</strong> that would then be parsed on retrieving. Something looking like this:</p><pre><code>Lorem ipsum dolor sit amet, consectetuer adipiscing elit,
sed diam __nonummy nibh__[@note this sounds really funny latin]
euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
</code></pre><p>This would introduce two problems I can think of:</p><ol><li>A relatively small one, is that if said syntax happen to be fortuitously on the said text, it can mess with the parsing.</li><li>The most important one is that this doesn&#39;t maintain this metadata <strong>separate</strong> from the text itself.</li></ol><p>I would like to have a discrete data structure to hold this data, such a different DB Table in which these metadatas are stored, so that I could use them in discrete ways: querying, statistics, sorting, and so on.</p><hr/><p><strong>EDIT:</strong> Since the answerer deleted his answer, I think it might be good to add his suggestion here, since it was a <em>workable</em> suggestion that expanded on this first concept. The poster suggested to use a similar syntax, but to link the metadata to the <code>PRIMARY KEY</code> of the <code>metadata</code> database table.</p><p>Something that would look like this:</p><pre><code>Lorem ipsum dolor sit amet, consectetuer adipiscing elit,
sed diam __nonummy nibh__[15432]
euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
</code></pre><p>Where <code>15432</code> would be the <code>ID</code> of a table row containing the necessary, queriable information, as per example below.</p><hr/><p>My <strong>second thought</strong> was to store information of this kind in a DB Table looking like this:</p><pre><code>TABLE: metadata

ID    TEXT_ID    TYPE    OFFSET_START    OFFSET_END    CONTENT
1     lipsum     note    68              79            this sounds really funny latin
</code></pre><p>In this way the metadata would have a unique id, a <code>text_id</code> as a foreign key connected to table storing the texts and it would connect the data with the text itself by using a simple character <strong>offset range</strong>.</p><p>This would do the trick of keeping the <em>data</em> separated from the <em>metadata</em>, but a problem that I can immediately see with this approach is that the text would be fundamentally <em>not editable</em>. Or, if I wanted to implement the editing of the text after the assignation of metadata, I would basically have to calculate characters additions, or removal compared to the previous version, and check whether <strong>each</strong> of this modifications adds or remove characters before or after <strong>each</strong> of the associated metadata.</p><p>Which, to me, sounds like a really unelegant approach.</p><p>Do you have any pointers or suggestions for how I could approach the problem?</p><hr/><h3>Edit 2: some XML problems</h3><p>Adding another case which would make quite necessary for this separation of data and metadata to happen.</p><ul><li>Let&#39;s say I want to make it possible for different users to have <strong>different metadata sets of the same text</strong>, with or without the possibility of each user actually displaying the other user metadata.</li></ul><p>Any solution of the <em>markdown</em> kind (or HTML, or XML) would be difficult to implement at this point. The only solution in this case that I could think about would be to have yet another DB Table which would contain the single user version of the original text, connecting to the original text table by the use of a <code>FOREIGN KEY</code>.</p><p>Not sure if this is very elegant either.</p><ul><li><strong>XML has a hierarchical data model:</strong> any element which happens to be <em>within</em> the borders of another element is considered as its <em>child</em>, which is most often not the case in the data model I&#39;m looking for; in XML any <em>children</em> element must be closed before the <em>parent</em> tag can be closed, allowing for no overlapping of elements.</li></ul><p>Example:</p><blockquote><p><code>&lt;note content=&#34;the beginning of the famous placeholder&#34;&gt;</code> <em>Lorem ipsum<br /> dolor sit</em> <code>&lt;comment content=&#34;I like the sound of amet/elit&#34;&gt;</code> <em>amet</em> <code>&lt;/note&gt;</code>,<br /> <em>consectetuer adipiscing elit</em> <code>&lt;/comment&gt;</code> <em>,</em> <code>&lt;note content=&#34;adversative?&#34;&gt;</code> <em>sed<br /> diam</em> <strong><code>&lt;note content=&#34;funny latin&#34;&gt;</code></strong> <em>nonummy</em> <code>&lt;/note&gt;</code> <em>nibh</em> <strong><code>&lt;/note&gt;</code></strong> <em>euismod<br /> tincidunt ut laoreet dolore magna aliquam erat volutpat.</em></p></blockquote><p>Here we have two different problems:</p><ol><li><p><strong>Different elements overlapping:</strong> The first comment starts within the first note, but ends after the end of the first note, i.e. it&#39;s not its child.</p></li><li><p><strong>Same elements overlapping:</strong> The last note and the boldfaced note overlap; however, since they are the same kind of element, the parser would close the lastly opened element at the first closure, and the first opened element at the last closure, which, in this circumstance, is not what is intended.</p></li></ol></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I&#39;d go for a mix of your solutions, but instead, I&#39;d use a standard : XML. You&#39;d have a syntax like this one</p><pre><code>Lorem ipsum dolor sit amet, consectetuer adipiscing elit,
sed diam &lt;note content=&#34;It sound really funny in latin&#34;&gt;nonummy nibh&lt;/note&gt;
euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
</code></pre><h1>Why XML</h1><p>If you think about it, <strong>it&#39;s exactly how the whole web is structured</strong> : content (actual text) that carries semantic - what you&#39;re calling <em>metadata</em> - through html tags.</p><p>This way you have a really cool world that opens :</p><ul><li>Free parser</li><li>Battle tested way to add metadata to content</li><li>Ease of use (depending on which users you are targeting)</li><li>You can easily extract the raw text, without the metadata, as it&#39;s a standard features on XML parsers. That is very useful to have an indexable version of your content, so <code>Lorem &lt;note&gt;ipsum&lt;/note&gt;</code> is raised when you are searching for <code>lorem ips*</code> for example.</li></ul><h1>Why XML over Markdown</h1><p>A website like stackexchange uses markdown as the semantics its content convey is rather basic : emphasis, links/urls, image, header etc. It seems the semantic you&#39;re adding to your content is</p><ol><li>More complex</li><li>Subject to change or must be extensible</li></ol><p>Thus I sense Markdown wouldn&#39;t be a really good idea. Also Markdown isn&#39;t really standardized, and parsing/dumping it might be a pain in the ass, even more a <em>markdownish syntax</em> see <a href="http://www.codinghorror.com/blog/2009/07/testing-with-the-force.html">Jeff Atwood&#39;s post about the WTF he met on parsing Markdown</a>.</p><h1>On separation between data and metadata</h1><p>Per se, such separation isn&#39;t mandatory. I assume you are looking for the advantage it brings:</p><ul><li>Possibility to have the raw content without the metadata</li><li>Separation of concerns: I don&#39;t want to have side-effect/complexity overhead when manipulating metadata because of the data, and otherwise.</li></ul><p>All these concerns are cleared by the use of XML. From the XML, you can easily dump any tag-stripped content, and data/metadata are separated, just like attribute and actual text is separated in XML.</p><p>Also I don&#39;t think you can really have your metadata totally <strong>not bound to your data</strong>. From what you describe, your metadata are a composition of your data, ie deleting the data leads to metadata deletion. This is where you metadata diverge from the usual HTML/CSS. CSS doesn&#39;t disapear when an html element is removed, because it can be applied to other elements. I don&#39;t feel this is the case in your metadata.</p><p>Having metadata close to the data, as in XML or Markdown, allow an easy understanding (and maybe debugging) of the datas. Also, the example you give on your second thought add some complexity, because for each data I&#39;m reading, I need to query the metadata table to get these. If the relation between your data and your metadata is 1:1 or 1:N, then it&#39;s IMO clearly useless, and only brings complexity (a good case of YAGNI).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/ideal-data-structure-for-storing-map-data/'>Ideal data structure for storing map data</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-ideal-data-structure-techniques-for-storing-generic-scheduler-data-in-c/'>C# &#8211; Ideal data structure/techniques for storing generic scheduler data in C#</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/appropriate-data-structure-for-deeply-nested-data/'>Appropriate data structure for deeply nested data</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/merge-directed-acyclic-graphs-minimizing-number-of-nodes/'>Merge directed acyclic graphs minimizing number of nodes</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-an-efficient-data-structure-for-syntax-highlighting-in-text-editors/'>C++ &#8211;  an efficient data structure for syntax highlighting in text editors</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/data-structure-for-storing-sorted-data/'>Data structure for storing sorted data</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>