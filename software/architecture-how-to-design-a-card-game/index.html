<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture &#8211; How to design a card game &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064935 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064935" class="post-1064935 software type-software status-publish hentry category-software tag-architecture"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture &#8211; How to design a card game</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span></p><div class="entry-content"><p>I can not come up with a good architecture for my card game. I need help to understand how games usually are designed.</p><p>First, I will describe game rules.</p><h3>Game Rules</h3><p>Setup</p><ul><li>There are four players, each two player form a team.</li><li>Each player gets 12 shuffled cards</li><li>There are 4 blinded cards on table(river)</li><li>Players order are like this</li></ul><p><img src="../../../i.stack.imgur.com/F0Av1.png" alt="enter image description here"/></p><p>Betting</p><ul><li>Each player can pass or select a number greater than current bet between 100 to 160</li><li>Betting starts from first player and circles until a team pass</li><li>Once a player pass they can&#39;t bet anymore</li><li>The team that wins the betting round should at least collect points equal to their bet in order to win the game</li><li><p>The team that lost the betting round should not allow the their team achieve their goal</p></li><li><p>If the team that won betting round gets all the points the other team will get negative points equal to their bet</p></li><li>if the team that lost the betting round collects all the points the other team will get double negative points</li></ul><h3>Game flow and collecting points</h3><ul><li>Player that won betting round (<strong>the king</strong>) gets four remaining cards on the table.</li><li>Then she/he can save a set of four cards in their team cards bank without even playing them.</li><li>The king will pick a suit as the <strong>ruler suit</strong> and let others know that</li><li>King starts the game by putting a card from his/her hand on table. Each other player should play in this order<ul><li>if they have the same suit of that card in their hand, they have to play one of those cards</li><li>if they don&#39;t have it, they can play any other suit</li></ul></li><li>After all other players played their hands, winner of the round will be:<ul><li>The one who has highest card if all cards are the same</li><li>The one who has highest &#34;ruler&#34; card if there is any</li></ul></li><li>Winner of the round will collect cards and put it in their bank</li><li>Player who won previous round will start the next round</li><li>This will continue until everybody&#39;s hand is empty</li></ul><h3>Counting points</h3><ul><li>Winning each round has 5 points. This means every 4 cards has at least 5 points.</li><li>Having Ace, 10 or 5 in bank each adds 5 points</li></ul><h1>My Design</h1><h2>Classes</h2><pre><code>class Card {
   string suit;
   string rank
}
class Deck {
  List cards = [];
  List suits = [&#39;S&#39;, &#39;H&#39;, &#39;D&#39;, &#39;C&#39;];
  List ranks = [&#39;1&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;10&#39;, &#39;J&#39;, &#39;Q&#39;, &#39;K&#39;, &#39;A&#39;];
  private void init(){..}
  void shuffle(){...}
}

class Game{
  Deck deck = new Deck();
  Player player1;
  Player player2;
  Player player3;
  Player player4;
  int _isOn = 0;

  Game(this.player1, this.player2, this.player3, this.player4){
    deck.makeCards();
    deck.shuffle();
    start();
  }

  void start(){
    player1.cards.addAll( deck.cards.getRange(0, 12) );
    player2.cards.addAll( deck.cards.getRange(12, 24) );
    player3.cards.addAll( deck.cards.getRange(24, 36) );
    player4.cards.addAll( deck.cards.getRange(36, 48) );
    deck.cards.removeRange(0, 48);
  }

  String toJson(){
  }

  String toString(){
  }
}
class Player{
  String name;
  int points;
  List cards = [];

  Player(this.name, {this.points});

  String toJson(){}

  String toString(){}
}
</code></pre><h3>My Problem</h3><p>Now that I&#39;ve defined all these classes I don&#39;t know how to bind this definitions to a database (like Mongo) and control the game flow.</p><ul><li>Where should all that logic go?</li><li>How should I keep state in a server/client scenario?</li></ul><p>Note:</p><p>I&#39;m using Dart to program this but I don&#39;t necessary want answers be written in Dart.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You&#39;re making a classic mistake here.  Someone told you to make a web application for a card game, and you&#39;re trying to determine how to make all of it at once.  This approach confuses even the best programmers, since studies have shown that you can only retain 7 pieces of information readily available in your mind at one time.  Trying to juggle with more requires intense concentration and you cannot expect to keep that up.</p><p>Rather, try to focus more on writing a card game library like someone were going to call your library in order to play your card game.  You seem to have an excellent start on your model.  That is good, but you need to make <code>Game</code> the interface by which callers can use make moves and so forth.</p><p>So I would expect Game would have several new methods like:</p><pre><code>getPlayers()        // Get all player info
getCurrentPlayer()  // Get information about the active player in his turn (hand, money to bet with, etc.)
fold()              // Current player folds and current player changes
bet(float amount)   // Current player bets and current player changes
</code></pre><p>In short, everything you need to know in order to run the game, you can do so using your object <code>Game</code>. <em>Only once you have this</em> do you proceed to step 2.</p><p>Write a separate class whose sole purpose is to receive incoming requests, apply them to <code>Game</code> and send the output back to the user.  If you want to convert <code>Game</code> output to JSON, you do it outside of <code>Game</code> since that is not the purpose of <code>Game</code>!</p><p>In order to persist this information, you could create another class which provides an interface to MongoDB.  This class would not know of the existence of <code>Game</code> and neither would <code>Game</code> know of the existence of this class.</p><p>In short, focus on the individual components, and you&#39;ll be fine.  You start to go wrong when you&#39;re trying to take too many aspects into consideration when writing your program.  As a wise professor once told me, &#34;<em>Know and embrace the fact that the first program you write for a project will be rewritten in its entirety by the end.</em>&#34;</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-in-house-sms-using-a-sim-card-receiving-and-sending/'>Architecture &#8211; In-house SMS (using a SIM card) receiving and sending</a></li><li class="list-group-item"><a href='../object-oriented-game-server-code-design/'>Object-oriented &#8211; Game server code design</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>