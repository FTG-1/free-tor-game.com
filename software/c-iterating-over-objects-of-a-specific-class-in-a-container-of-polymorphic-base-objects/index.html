<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Iterating over objects of a specific class in a container of polymorphic base objects &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083485 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083485" class="post-1083485 software type-software status-publish hentry category-software tag-architecture tag-c tag-design tag-design-patterns tag-iterator"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Iterating over objects of a specific class in a container of polymorphic base objects</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">design-patterns</span><span class="mr-2 badge badge-danger">iterator</span></p><div class="entry-content"><p>Let&#39;s suppose there is a base object class &#8211; let it be called <em>Object</em> &#8211; and a list&lt;Object&gt; container. There are many child classes of Object &#8211; <em>Child1</em>, <em>Child2</em> etc.. They all are stored in the container.</p><p>I need a way to iterate over subsets of objects of some particular class. Say, over all <em>Child1</em>&#39;s or <em>Child2</em>&#39;s, while having them all together in one container so that they could be accessed in a polymorphic fashion.</p><p>Note should be taken that the container is dynamically resized now and then.</p><p><em>What are possible design solutions for that?</em></p><p>Currently I&#39;ve come up with two:</p><ul><li>introducing an iterator which runs on the container checking object<br /> type each time</li><li>keeping additional containers with all <em>Child1</em> and all<br /> <em>Child2</em> objects from the main container.</li></ul><p>Honestly, I don&#39;t like either way: the first one, I&#39;m afraid, is going to be slow because there will be really many objects, the second one is clumsy and requires observing each object addition and deletion.</p><p>I&#39;m writing it in C++.</p><p><strong>UPDATE</strong></p><p>As a further development of the second solution, I&#39;ve just thought of subclassing a list with methods that would return sublists of particular subclass types which could be kept cached and updated on each add/delete:</p><pre><code>for(auto i: gameObjects.sublist&lt;Child1&gt;()) {
   ...
</code></pre></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>When you have a polymorphic collection like your scenario, the problem you have is that <strong>the object itself knows what it is but nothing else does</strong> so anything outside of the container needs some extra knowledge to be able to identify what is what.</p><p>The direct solution would be to <strong>improve the container</strong> so that it distinguishes between objects itself. You could contain a map of containers for each object type, which are just pointers to the objects contained in the main list. Be careful, use shared pointers, pay attention to what is added and deleted. If you just keep references to the objects, memory shouldn&#39;t balloon up. You mentioned this already. I would not consider it clumsy, but dangerous.</p><p>That being said I feel like there may be a problem of design. If a list of objects is actually a list of many different objects, why are they together?</p><p>You mentioned in a comment that this is a game, so perhaps you have one generic &#39;game object&#39; list, but many of those game objects are enemies and you are now trying to grab all enemies in one script. You are missing a step: all enemies are game objects, but not all game objects are enemies, thus you want some <strong>intermediary manager</strong> for all enemies. Perhaps have each enemy register itself with the manager, automate the system as much as possible. After all, what is spawning the enemies? You must already have something manipulating the game object list, expand on that.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-do-you-leverage-the-benefits-of-the-open-closed-principle/'>Object-oriented &#8211; Do you leverage the benefits of the open-closed principle</a></li><li class="list-group-item"><a href='../design-standardized-data-structure-interface/'>Design &#8211; Standardized Data Structure Interface</a></li><li class="list-group-item"><a href='../c-iterator-lifetime-and-detecting-invalidation/'>C++ Iterator lifetime and detecting invalidation</a></li><li class="list-group-item"><a href='../object-oriented-design-patterns-for-creating-objects-that-have-a-list-of-objects-that-also-have-a-list-of-objects/'>Object-oriented &#8211; Design patterns for creating objects that have a list of objects that also have a list of objects</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>