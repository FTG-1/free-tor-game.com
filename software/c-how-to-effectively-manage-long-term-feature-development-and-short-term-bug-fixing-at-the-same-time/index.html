<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; How to effectively manage long-term feature development and short-term bug fixing at the same time &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082682 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082682" class="post-1082682 software type-software status-publish hentry category-software tag-c tag-continuous-integration tag-design tag-release-management"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; How to effectively manage long-term feature development and short-term bug fixing at the same time</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">continuous integration</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">release-management</span></p><div class="entry-content"><p>We have a huge C, and C++ code base. There is a plan to add a new feature into the existing system, but, this should happen only after 3 to 4 months.</p><p>So, we are looking for best possible options.</p><ol><li>Branching off is one option, but, this involves porting the bug fixes to the feature branch from the trunk.</li><li>Staying on the trunk itself, have <code>ifdef</code> to differentiate the new feature compilation</li><li>Split the source/header files that involve the new feature, edit the makefiles to pick the right file.</li></ol><p>I understand this question is pretty vague, and only people working on it can well decide the way forward. But, I&#39;m looking for generalized opinions on a case like this.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I&#39;ll try to post some helpful hints, but with all due respect, this is Release Management 101, and if you really have a <em>huge</em> code base and a need for parallel work streams in the organization, you would do well to either read a book on it or hire somebody with more experience in this area.</p><p>Assuming this situation:</p><ul><li>The business needs new functionality that will take a long time to complete.</li><li>The business needs various bugs fixed <em>now</em>.</li><li>You have multiple developers who can work on different areas simultaneously.</li><li><strong>You cannot defer the development of the feature until after the bugs are fixed.</strong></li></ul><p>Make absolutely sure that point #4 is true, because if you can invalidate that assumption, your job suddenly gets a whole lot easier. I can&#39;t tell you much time I&#39;ve saved in the past by simply <em>not</em> doing bug-fixing and feature-development at the same time. That said, it is sometimes an unfortunate necessity.</p><p>Formally, your options are:</p><ol><li><p><strong><a href="http://martinfowler.com/bliki/FeatureBranch.html" rel="nofollow noreferrer">Feature Branches</a></strong>: You create a branch where all of the new feature development will take place. Not recommended because they inherently break Continuous Integration. You can of course clone your &#34;CI build&#34; for the feature branch, but that&#39;s not <em>actually</em> CI because the code hasn&#39;t actually been <em>integrated</em>, it&#39;s just being built and maybe tested in isolation.</p></li><li><p><strong><a href="http://martinfowler.com/bliki/FeatureToggle.html" rel="nofollow noreferrer">Feature Toggles</a></strong>: This is typically <em>not</em> done with an <code>ifdef</code> but rather a configuration option. The ability to set this at runtime, not build time, is important because it makes testing and deployment <em>a lot</em> easier. Compile-time toggles require you to maintain two separate builds and two separate artifacts, but you can only promote <em>one</em>, a situation which tends to introduce ambiguity and process short-cutting.</p><p>Runtime feature toggles are <em>partially recommended</em> with some caveats:</p><ul><li><p>It is important to minimize the surface area of the toggle. Ideally you would want the check to happen in only one place. Feature toggles that get too big for their britches are evil for the same reason that <a href="https://softwareengineering.stackexchange.com/q/148108/3249">Singletons and other global state are</a>. Try to check it just once, at application startup.</p></li><li><p>Too many feature toggles can become a spaghetti mess of their own over time, essentially creating a program-within-a-program. Feature Z depends on Feature Y which depends on Feature X but <em>not</em> Feature Q which is deprecated and breaks feature AB... etc. So in addition to minimizing the scope of individual toggles, you need to take steps to minimize the <em>number</em> of toggles and properly manage the dependencies between them. Even if there are no dependencies, you still need to run all end-to-end tests with each state that could plausibly be used in production, which quickly becomes a <a href="http://en.wikipedia.org/wiki/Combinatorial_explosion" rel="nofollow noreferrer">combinatorial explosion</a> for the testers and release managers.</p></li></ul></li><li><p><strong><a href="https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build" rel="nofollow noreferrer">Parameterized Build</a></strong> or simply <strong>Multiple Targets</strong>: This is an incredibly useful tool/technique but I&#39;ve <em>never</em> seen it used to build different <em>feature sets</em> and can&#39;t recommend that as an option here. You would normally use it to build for different <em>platforms</em> and/or perform certain one-off-tasks like running integration tests, generating documentation, etc. Using it as a poor-man&#39;s feature toggle has all of the potential drawbacks of a feature toggle <em>and</em> hides all of the complexity in your build scripts, which are generally the <em>least</em> flexible and most difficult to test of all your code.</p></li><li><p><strong>Feature Abstraction</strong>, AKA <strong><a href="http://paulhammant.com/blog/branch_by_abstraction.html/" rel="nofollow noreferrer">Branch By Abstraction</a></strong> (a dangerous misnomer since it does not involve any actual branching): This means you encapsulate all of the interesting functionality of the new feature in a single class and use refactoring techniques (particularly <a href="http://www.refactoring.com/catalog/extractInterface.html" rel="nofollow noreferrer">Extract Interface</a>) to encapsulate all of the <em>existing</em> functionality in the <em>same interface</em>. Then when you&#39;re ready to launch the feature, you just change the implementation.</p><p>This combines the advantages of (a) being in your trunk or mainline, (b) being fully covered by unit tests and possibly integration tests, and (c) not introducing any new global state to the application. This is much easier to do if your application uses dependency injection but not impossible if it doesn&#39;t. This is <em>always</em> the best choice if and when you are able to do it - it introduces the least overhead and the lowest risk, and can be combined very easily with options 2 or 3 above if you need to make the feature available on-demand to your testers.</p><p>Note that when using this option, once the feature has actually been launched, you should reevaluate whether the abstraction is still necessary and remove it if the overhead of maintaining it outweighs whatever benefits you&#39;re still getting.</p></li></ol><p>You should choose options 4, 2, and 1 in descending order of preference. This is coming from someone with a whole lot of experience with <em>all</em> of the above options.</p><p>Final note: <strong>Fixing a bug or adding a new feature is <em>not</em> refactoring.</strong> Refactor does not mean &#34;change&#34;, it refers to <em>preserving</em> the existing functionality <em>exactly</em> during some code change. So please don&#39;t use it to refer to your situation; what you&#39;re doing is the <em>opposite</em> of refactoring.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../choosing-the-right-branching-strategy-for-releases/'>Choosing the right branching strategy for releases</a></li><li class="list-group-item"><a href='../gitflow-model-with-uat-releases-is-too-chaotic-how-to-simplify/'>Gitflow model with UAT releases is too chaotic, how to simplify</a></li><li class="list-group-item"><a href='../object-oriented-c-preferred-method-of-dealing-with-implementation-for-large-templates/'>Object-oriented &#8211; C++ Preferred method of dealing with implementation for large templates</a></li><li class="list-group-item"><a href='../c-why-arent-the-platform-specific-integer-types-in-c-and-c-short-int-long-deprecated/'>C++ &#8211; why aren&#8217;t the platform specific integer types in C and C++ (short, int, long) deprecated</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>