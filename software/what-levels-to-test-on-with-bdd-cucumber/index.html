<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>What levels to test on with BDD/Cucumber &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072716 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072716" class="post-1072716 software type-software status-publish hentry category-software tag-bdd tag-cucumber"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">What levels to test on with BDD/Cucumber</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">bdd</span><span class="mr-2 badge badge-info">cucumber</span></p><div class="entry-content"><p>I&#39;m currently getting into BDD/Cucumber and I ask myself: On which levels is it good to use?</p><p>There are the <em>test levels</em> (from the testing pyramid):</p><ul><li>User Interface</li><li>Integration</li><li>Unit</li></ul><p>You can apply tests on various levels and fields in the <em>application architecture</em>:</p><ul><li>Presentation layer<ul><li>Rules (how are business rules reflected in the UI?)</li><li>Workflow (how does the user get where he wants?)</li><li>Technical (how does the UI aid the user in getting where he wants?)</li></ul></li><li>Service layer<ul><li>Rules</li><li>Workflow (e.g. session handling)</li><li>Technical</li></ul></li><li>Data access layer<ul><li>Service gateways</li><li>Persistence</li></ul></li></ul><p><strong>My current impression is:</strong></p><p>Cucumber/BDD doesn&#39;t restrict WHAT you test with it. But best it is used for business rules and workflow. To test them you would mostly want to use unit and integration tests. UI tests can also be run with BDD, there are use cases out there. But my impression is that business rule tests are better not done on the UI, instead you can keep with just testing workflow (e.g. view transitions) and the technical level (e.g. data transfer and interactions between view and presentation logic or services) there, otherwise you would have to test business logic on both, UI and integration/unit level.</p><p><strong>So why do I have this question here? There are contradictions in what I read so far&#8230;</strong></p><ul><li>I thought Cucumber/BDD is really just for testing FEATURES (so basically business logic?) and not for stuff like &#34;when I click here, and i enter X, and I click OK&#34; (workflow)?</li><li>I also read a lot that BDD is &#34;of course&#34; meant for end2end tests (my impression is that it doesn&#39;t have to)</li><li>On the other side I made quite bad experience with end2end tests (as a consequence I think you should just use them for a very small amount of UI test cases, basically sanity/smoke tests, see <a href="https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html" rel="noreferrer">Google testing blog article</a> about that topic)</li></ul><p>So you can see this is about the basic questions of how a test suite is organized and architectured with BDD. What is your way to do it? It&#39;d be a great guideline for my own implementation. What do you use BDD/Cucumber for and how? (Testing levels, architecture levels)</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If you can answer the question, &#34;Can you give me an example of how X should behave?&#34; then you can do BDD.</p><p>So, if you want to do BDD at a unit level, think of some examples of how that class or unit of code behaves, then describe that example using code. You don&#39;t have to use Cucumber for that. I find it&#39;s enough to just put the Given / When / Then in comments, <a href="https://github.com/lunivore/montecarluni/blob/master/src/test/kotlin/com/lunivore/montecarluni/engine/RecordCreatorTest.kt" rel="noreferrer">like this</a>.</p><p>If the audience for the scenarios or examples is non-technical, it might be worth using a natural-language tool like Cucumber. This is typically done end-to-end through the UI, but doesn&#39;t have to be. Aslak Helles√∏y, the creator of Cucumber, and various others like Konstantin Kudryashov have worked with <a href="https://skillsmatter.com/skillscasts/10933-sub-second-tdd-with-a-dash-of-honey" rel="noreferrer">various different flavours of stack</a>* (seen here with Josh Chisholm), trading off confidence for speed.</p><p>You can also just <a href="https://github.com/lunivore/sudoque/blob/master/Sudoque.Scenarios/PlayerCanEnterElementsIntoTheGrid.cs" rel="noreferrer">write a DSL</a> or use a DSL framework like Serenity BDD, rather than using natural-language tooling.</p><p>Testing - for instance, integration or exploratory testing - is a whole other kettle of fish. I commonly see an anti-pattern in which people have perfectly fine testing practices but get confused because it doesn&#39;t seem to fit with BDD. BDD isn&#39;t really about testing. At its heart, it&#39;s a collaborative analysis practice, which happens to produce tests as a nice by-product.</p><p>I find it more useful to think of the scenarios as &#34;living documentation&#34;. If you&#39;re keeping your codebase clean and well-designed then scenarios or unit tests will hardly ever pick up bugs. They&#39;ll help people work out what the code should do, though, which means coders are less likely to write bugs in the first place.</p><p>*(The video is of &#34;sub-second TDD&#34;; BDD started as a replacement for TDD with &#34;behaviour&#34; a more useful word than &#34;test&#34;, since TDD isn&#39;t really about testing either.)</p><p>Typically I&#39;ll have some <em>examples</em> of how the system provides value to the customer or user, written using something like Cucumber, together with class-level unit tests that provide examples of how each bit of code behaves.</p><p>For instance, I might have a couple of Cucumber scenarios showing how validation helps the user fill in the form, but the exhaustive rules will be in unit tests.</p><p>If you find that you&#39;ve got too many scenarios, push some down into unit tests. Also consider whether there are areas of code which have stabilized and could be extracted out into libraries or services, with their respective scenarios running over that library/service&#39;s API, thus getting them out of your build.</p><p>And, yes, we try to avoid button clicks etc. in our scenarios. This helps to keep the code maintainable (also see the Page Object Pattern) and also provides options as to how the problem will be solved. Clicking buttons etc. describes a chosen <em>solution</em>, while scenarios should really be illustrating the <em>problem</em>.</p><p><strong>A note for Aslak&#39;s Honeycomb pattern:</strong></p><p>Aslak describes a pattern in which user interfaces sit outside the honeycomb (web browsers, logs, apps, etc.) with the domain layer sitting inside the inner honeycomb. Glue in the outer honeycomb allows the UIs to interact with the domain layer. <a href="https://skillsmatter.com/skillscasts/10933-sub-second-tdd-with-a-dash-of-honey" rel="noreferrer">He describes it:</a></p><blockquote><p>&#34;Honeycomb&#34; is a software architecture pattern that makes it possible to run acceptance tests in many different modes with different tradeoffs: Speed or confidence. One layer or just some.</p></blockquote><p>(Note that the honeycomb shape with its multiple sides is reflective of BDD&#39;s &#34;outside-in&#34;, in which we recognize that there are multiple user interfaces.)</p><p>In the honeycomb pattern, we use the same tools for full-stack scenarios going through the UI (the browser, for instance) and through the domain... and, in fact, we use the same scenarios! We just choose which ones to run through the full stack, and which to run through lower layers.</p><p>Note that there are actually more layers than <em>just</em> the domain layer; you could for instance choose to run with an in-memory database but the full web browser; a real database but directly linked to APIs; etc..</p><p>So we&#39;d use e.g.: Cucumber for all of them.</p><p>This is <em>different</em> to doing BDD at a class-level (as an equivalent to TDD).</p><p>Within the domain layer itself, there will be classes with individual responsibilities (single responsibility principle).</p><p>By thinking of how that class should behave, and providing examples of that behaviour in action, we help to drive out good design and show the value of that class, providing living documentation and keeping the code clean... which is exactly what TDD does! Except I didn&#39;t use the word &#34;test&#34; there.</p><p>BDD at a class level is just TDD, without the word &#34;test&#34;.</p><p>There are lots of tools which help to do this, like RSpec and MSpec. Alternatively, I might just <em>think</em> of my code this way, and use a TDD framework anyway. I sometimes write the &#34;Given, When, Then&#34; <a href="https://github.com/lunivore/montecarluni/blob/master/src/test/kotlin/com/lunivore/montecarluni/engine/DateFormatParserTest.kt" rel="noreferrer">in comments</a> (this one&#39;s in Kotlin):</p><pre><code>@Test
fun `should handle multiple different date formats`() {

    // Given a number of different types of date format
    val input = listOf(listOf(&#34;2017-04-03 08:25&#34;), listOf(&#34;01 Jan 2017 01:27 PM&#34;), listOf(&#34;8/9/2016 8:15 AM&#34;))

    // When we parse the format of the dates
    val formatters = input.map {DateFormatParser()(it)}
    val results = input.zip(formatters, {i, f -&gt; i.map {LocalDateTime.parse(it, f)}})


    // Then it should be able to resolve those dates.
    val expectedResults = listOf(
            LocalDateTime.of(2017,4,3,8,25),
            LocalDateTime.of(2017,1,1,13,27),
            LocalDateTime.of(2016,9,8,8,15))

    Assert.assertEquals(expectedResults, results.flatMap { it })
}
</code></pre><p>JBehave (the first BDD framework) actually started as a replacement for JUnit 3.X with this way of thinking in mind. Java&#39;s annotations didn&#39;t exist back then, so JUnit looked for methods starting with &#34;test...&#34; instead. JBehave did exactly the same thing, but looked for classes starting with &#34;should...&#34;.</p><p>You can read more about the history of BDD and JBehave in <a href="https://dannorth.net/introducing-bdd/" rel="noreferrer">Dan North&#39;s introduction</a> and in my <a href="https://lizkeogh.com/2011/06/27/atdd-vs-bdd-and-a-potted-history-of-some-related-stuff/" rel="noreferrer">potted history post</a>; you can also see there the evolution from class-level BDD, to full-stack BDD, to the natural language tools like Cucumber that we now have!</p><p>So, it&#39;s possible to do BDD at a class level too. Typically we&#39;d use different tools. They <em>might</em> be the same tools; I sometimes create a nice little DSL to run my scenarios with <a href="https://github.com/lunivore/WiPFlash/blob/master/Example.PetShop.Scenarios/PetRegistrationAndPurchase.cs" rel="noreferrer">(this one&#39;s in NUnit)</a>.</p><p>Unless it&#39;s by coincidence, though (e.g.: a class just happens to be solely responsible for some interesting behaviour seen at the UI level) the full-stack scenarios and the class-level examples (unit tests) will be different.</p><p>The main reason for this is that steps are often reused across different scenarios at a full-stack level, but when you get down to classes, they should really only have one responsibility each, with the rest mocked out.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../at-which-architecture-level-are-you-running-bdd-tests-e-g-cucumber/'>At which architecture level are you running BDD tests (e.g. Cucumber)</a></li><li class="list-group-item"><a href='../python-how-to-organize-unit-integration-test-in-bdd/'>Python &#8211; How to organize unit/integration test in BDD</a></li><li class="list-group-item"><a href='../working-with-legacy-code-introducing-an-external-bdd-integration-test-harness/'>Working with legacy code &#8211; introducing an external BDD integration test harness</a></li><li class="list-group-item"><a href='../java-bdd-cucumber-best-practices/'>Java &#8211; BDD, Cucumber best practices</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>