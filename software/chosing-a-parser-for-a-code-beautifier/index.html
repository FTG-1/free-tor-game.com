<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Chosing a parser for a code beautifier &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086392 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086392" class="post-1086392 software type-software status-publish hentry category-software tag-code-formatting tag-lexer tag-parsing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Chosing a parser for a code beautifier</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">code formatting</span><span class="mr-2 badge badge-info">lexer</span><span class="mr-2 badge badge-warning">parsing</span></p><div class="entry-content"><p>I&#39;m in the planning stage of making a code beautifier (similar to <a href="http://astyle.sourceforge.net/" rel="nofollow noreferrer">AStyle</a> or <a href="http://uncrustify.sourceforge.net/" rel="nofollow noreferrer">Uncrustify</a>) &#8211; originally I was going to just contribute to one of those projects,<br /> but reviewing their source led me to the conclusion that I have different design goals and that their source is written in a way that makes it difficult for an outsider to easily contribute. AStyle, for example, instead of building some sort of AST, uses over 100 state variables such as <code>isInComment</code>, <code>foundClassHeader</code>, <code>isLineReady</code>, etc.</p><p>I&#39;m deciding between using scanner and parser generators (such as flex and bison) and writing my own parsing system. Which would be a better approach? I&#39;ve been through a compilers class in university, so I do have some experience with scanning and parsing theory. Below are the advantages I&#39;ve thought of for each:</p><p><strong>Generators</strong></p><ul><li>Arguably simpler/faster to develop</li><li>Possibly more optimized than my initial stab at a custom parser, though a custom one might leave more room for improvement</li></ul><p><strong>Custom parser</strong></p><ul><li>Arguably easier to debug</li><li><em>Programmers</em> seems to prefer custom lexers and parsers in past questions &#8211; <a href="https://softwareengineering.stackexchange.com/q/127889/87176">&#34;Anyone who wants a decent lexer doesn&#39;t use Lex&#34;</a></li><li>Fewer dependencies</li><li>Could possibly allow for &#34;fuzzier&#34; parsing &#8211; since I&#39;m just developing a beautifier, the parser wouldn&#39;t need to be nearly as strict or detailed as one for a compiler</li><li>Parallelization &#8211; flex and bison (or what I&#39;ve seen of them) use global state. If I want to parse multiple files at once (in separate threads), a custom solution would be simpler to compartmentalize</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>It&#39;s not a choice between flex/bison or nothing.  There are several options out there.  I used <a href="http://www.antlr.org/" rel="nofollow">antlr</a> for a recent project and found it very nice to work with.  Some things you might not have considered:</p><ul><li>Lexers aren&#39;t that difficult, but parsers have a considerable number of gotchas you won&#39;t even realize until they hit you.  Widely used tools have already solved a bunch of problems you don&#39;t even know exist yet.</li><li>Your parser will still need to be just as strict as a compiler.  The difference will be you can use a simpler grammar in some places, but that will probably be offset by needing to use more complex grammar in other places.  For example, code beautifiers often want to preserve an intentional newline that a regular compiler just lumps into &#34;whitespace.&#34;  If your language has a preprocessor, a beautifier will have to incorporate that into the grammar, whereas a compiler&#39;s parser won&#39;t.</li><li>Grammars are extremely difficult to debug.  Tools like antlr have devoted considerable effort to producing useful error messages.  Even if you do go with a custom parser, you may still find it useful to use an existing parser generator to debug your grammar.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-tests-for-a-csv-parser/'>Unit tests for a csv parser</a></li><li class="list-group-item"><a href='../algorithm-for-formating-sql-code/'>Algorithm for formating SQL code</a></li><li class="list-group-item"><a href='../are-separate-parsing-and-lexing-passes-good-practice-with-parser-combinators/'>Are separate parsing and lexing passes good practice with parser combinators</a></li><li class="list-group-item"><a href='../c-design-for-a-parser-to-handle-very-large-files/'>C++ &#8211; design for a parser to handle very large files</a></li><li class="list-group-item"><a href='../how-to-get-lookahead-symbol-when-constructing-lr1-nfa-for-parser/'>How to get lookahead symbol when constructing LR(1) NFA for parser</a></li><li class="list-group-item"><a href='../name-for-this-type-of-parser-or-why-it-doesnt-exist/'>Name for this type of parser, OR why it doesn&#8217;t exist</a></li><li class="list-group-item"><a href='../when-to-use-a-parser-combinator-when-to-use-a-parser-generator/'>When to use a Parser Combinator? When to use a Parser Generator</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>