<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Complexity of ArrayList of LinkedHashSet &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079907 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079907" class="post-1079907 software type-software status-publish hentry category-software tag-complexity tag-hashing tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Complexity of ArrayList of LinkedHashSet</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">complexity</span><span class="mr-2 badge badge-info">hashing</span><span class="mr-2 badge badge-warning">java</span></p><div class="entry-content"><p>I get input strings from the console like this:</p><pre><code>while ((currentLine = bufferedReader.readLine()) != null ) {
    StringTokenizer string = new StringTokenizer(currentLine, &#34; &#34;);
    while (string.hasMoreTokens()) {
        // Create a new LinkedHashSet for every token and then add it to the ArrayList.
        LinkedHashSet&lt;String&gt; linkedHashSet = new LinkedHashSet&lt;String&gt;();
        linkedHashSet.add(string.nextToken());
        setOfStrings.add(linkedHashSet);
    }
}
</code></pre><p>I&#39;m always getting different strings from input, never the same. After finishing filling in the data structures I have this situation:</p><ul><li>An <code>ArrayList&lt;LinkedHashSet&lt;String&gt;&gt;</code> which contains one LinkedHashSet for each string split.</li><li><p>Inside each <code>LinkedHashSet</code> I have a string that is different from any other string present in the other LinkedHashSets &#8211; in other words, its unique. For example, I can&#39;t have this inside the ArrayList:</p><pre><code>Set x : [foo]
...
Set y : [foo] 
</code></pre></li></ul><p><strong>After doing that, I call the function below many times<br /> to make different merges.</strong></p><pre><code>public void mergeSets(ArrayList&lt;String&gt; operations, ArrayList&lt;LinkedHashSet&lt;String&gt;&gt; setOfStrings) {
    String toMerge = operations.get(1);
    String fromMerge = operations.get(2);
    boolean enteredFirstToMerge = false;
    boolean enteredFirstFromMerge = false;
    // Temporary LinkedHashSet reference used to merge two sets.
    LinkedHashSet&lt;String&gt; subSetToMerge = null;
    LinkedHashSet&lt;String&gt; subSetFromMerge = null;
    for (Iterator&lt;LinkedHashSet&lt;String&gt;&gt; iterator = setOfStrings.iterator();
            iterator.hasNext(); ) {
        LinkedHashSet&lt;String&gt; subSet = iterator.next();
        if (subSet.contains(toMerge) &amp;&amp; subSet.contains(fromMerge))
            break;
        else {
            if (subSet.contains(toMerge) &amp;&amp; !enteredFirstToMerge) {
                enteredFirstToMerge = true;
                subSetToMerge = subSet;
                iterator.remove();
            } else if (subSet.contains(fromMerge) &amp;&amp; !enteredFirstFromMerge) {
                enteredFirstFromMerge = true;
                subSetFromMerge = subSet;
            }
        }
        if (enteredFirstFromMerge &amp;&amp; enteredFirstToMerge)
            break;
        }
        if (enteredFirstFromMerge &amp;&amp; enteredFirstToMerge) {
            subSetFromMerge.addAll(subSetToMerge);
        }
    }
</code></pre><p>Explanation:</p><p>For example, if I have as operation <code>merge foo bar</code>, I have to do these steps:</p><ul><li><p>First of all, I have to find where <code>foo</code> and <code>bar</code> are located:</p><ul><li><p>Inside <code>setOfStrings</code>, I can have this situation:</p><pre><code>    position x : [bar, tree, hotel]
    ...
    position y : [foo, lemon, coffee] 
</code></pre></li></ul></li></ul><p>When I find them, I have to <strong><em><code>combine the set which contains foo with the set that contains bar</code></em></strong> this way:</p><pre><code>            position x : {bar tree hotel foo lemon coffee}
            ...
            position y : {} -&gt; deleted from the arrayList
</code></pre><p>This function takes as parameters an <code>arrayList</code> of operations and an <code>arrayList&lt;LinkedHashSet&lt;String&gt;&gt;</code>:</p><p>For the <code>ArrayList</code> of <code>operations</code>, I always get a specific position:</p><ul><li><code>operations.get(1)</code> refers to the set to merge (foo in this example)</li><li><code>operations.get(2)</code> refers to the set where to add the foo set (bar in this example)</li></ul><p>With this for loop, I iterate the ArrayList to search the to sets,<code>for (Iterator&lt;LinkedHashSet&lt;String&gt;&gt; iterator = setOfStrings.iterator(); iterator.hasNext(); )</code></p><p>This <code>if</code> statement checks if the iterator is in the specific set:</p><pre><code>if (subSet.contains(toMerge) &amp;&amp; !enteredFirstToMerge) {
    enteredFirstToMerge = true;
    subSetToMerge = subSet;
    iterator.remove();
} else if (subSet.contains(fromMerge) &amp;&amp; !enteredFirstFromMerge) {
    enteredFirstFromMerge = true;
    subSetFromMerge = subSet;
}
</code></pre><p><strong><em>My question is: Could I have collisions with this type of algorithm that I implemented?</em></strong></p><p>If not the time complexity is only O(n) -&gt; the size of the arrayList.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your main question is whether you could have a collision, but it&#39;s first important to determine <em>where</em> you might have a collision. An <code>ArrayList</code> does not have collisions because it is an ordered list on top of an array. Your concern there would be more about how often it has to extend the capacity of the underlying array. You would feel this when you are reading the input only, though.</p><p>Where you might have collisions is in the <code>LinkedHashSet</code>s. Since hash collisions are a function of the capacity of the underlying hash store, the hashing algorithm, and the data itself, there is always a possibility for a collisions, and there is no way to know if you&#39;ll have one except to run all of your data through. In the end, since these are all different strings, and the hashing algorithm for strings built into Java is pretty effective, the remaining factor to determine how many collisions you could potentially have is the capacity of the underlying hash store.</p><p>A default <code>LinkedHashSet</code> has an initial capacity of 16 and a load factor of 0.75. This means that once there are 12 elements in the <code>LinkedHashSet</code>, it will double its capacity to accommodate more elements. If we can assume that hashes are evenly distributed, a larger capacity means a lower probability of a collision. Resizing a <code>LinkedHashSet</code> is actually the most expensive activity. In order to resize the underlying hash store, it essentially must iterate through the current elements, rehash them, and re-insert them into the larger hash store. Your best strategy to avoid collisions <em>and</em> rehashing is to allocate large <code>LinkedHashSet</code>s when you instantiate them. What &#34;large&#34; is depends on how much data you are inputting and how much of it will be combined. If you know the size and general shape of your data before hand, you could try to estimate a proper initial size large enough to accommodate the largest set (needed size / 0.75 to account for the load factor). This essentially becomes the old time vs. space trade-off, as larger initial sizes means more memory consumed.</p><hr/><h1>Other general suggestions</h1><p><code>StringTokenizer</code> is deprecated, and <code>string.split(&#34; &#34;)</code> is generally recommended in its place. However, since you are getting your input from the console, I would suggest disposing of the buffered reader completely and wrapping <code>System.in</code> in a <code>Scanner</code>. <code>Scanner</code> has a <code>next()</code> method that fetches the next token, implicitly tokenizing the input for you with less effort.</p><p>Also, while you are using <code>ArrayList</code> and <code>LinkedHashSet</code> for their performance characteristics, it is probably still better to rely on their interfaces (<code>List</code> and <code>Set</code> respectively) than those specific implementations.</p><p>Third, instead of writing out all of the code to get an iterator and then looping over it, you can use the for-each construct to loop over any <code>Iterable</code>.</p><p>Fourth, you don&#39;t need boolean flags when you can just as easily get the same information from a null check. We can eliminate two variables right off the bat.</p><p>Here&#39;s a slightly rewritten version incorporating those suggestions:</p><p>Main.java</p><pre><code>import java.io.*;
import java.util.*;

public class Main
{
    public static void main(String[] args) throws IOException {
        Scanner input = new Scanner(System.in);
        List&lt;Set&lt;String&gt;&gt; setOfStrings = new ArrayList&lt;&gt;();

        while (input.hasNext()) {
            Set&lt;String&gt; tokenSet = new LinkedHashSet&lt;&gt;();
            tokenSet.add(input.next());
            setOfStrings.add(tokenSet);
        }

        SetMerger sm = new SetMerger();
        sm.mergeSets(&#34;foo&#34;, &#34;bar&#34;, setOfStrings);
        sm.mergeSets(&#34;bar&#34;, &#34;baz&#34;, setOfStrings);
        System.out.println(setOfStrings.toString());
    }
}
</code></pre><p>SetMerger.java</p><pre><code>import java.util.*;

public class SetMerger
{
    public void mergeSets(String toMerge, String fromMerge, List&lt;Set&lt;String&gt;&gt; stringSets) {
        Set&lt;String&gt; setToMerge = null, targetSet = null;

        for (Set&lt;String&gt; subset : stringSets) {
            if(subset.contains(toMerge)) {
                if(subset.contains(fromMerge)) {
                    return;
                }

                setToMerge = subset;
                break;
            }
        }

        for (Set&lt;String&gt; subset : stringSets) {
            if(subset.contains(fromMerge)) {
                targetSet = subset;
                break;
            }
        }

        if(setToMerge != null &amp;&amp; targetSet != null) {
            targetSet.addAll(setToMerge);
            stringSets.remove(setToMerge);
        }
    }
}
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-calculate-complexity-of-linkedhashset/'>Java &#8211; calculate complexity of LinkedHashSet</a></li><li class="list-group-item"><a href='../java-why-is-the-hashcode-method-usage-of-hashset-not-specified-in-the-api/'>Java &#8211; Why is the hashCode method usage of HashSet not specified in the API</a></li><li class="list-group-item"><a href='../reducing-the-complexity-of-a-class/'>Reducing the complexity of a class</a></li><li class="list-group-item"><a href='../java-recommended-value-to-pass-instead-of-string-parameter-for-a-method-in-java/'>Java &#8211; Recommended value to pass instead of String parameter for a method in java</a></li><li class="list-group-item"><a href='../java-whats-the-best-way-to-merge-two-xml-strings-with-the-same-tag-names/'>Java &#8211; What&#8217;s the best way to merge two XML Strings with the same tag names</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>