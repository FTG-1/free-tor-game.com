<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Separating java projects &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1074627 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1074627" class="post-1074627 software type-software status-publish hentry category-software tag-java tag-maven tag-project-structure"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Separating java projects</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">maven</span><span class="mr-2 badge badge-warning">project-structure</span></p><div class="entry-content"><p>I have a large java project, and we use maven for our build cycle. This one project is used extensively &#8211; in other projects, in various applications, some of which are contained in it and some which are elsewhere&#8230; To be honest, it&#39;s a bit of a mess (various bits added on at different times for specific purposes), and I&#39;d like to clean it up a bit. Also, it&#39;s not fully tested (lots of bits have been added on without proper unit and integration testing), and there are some tests that take a long time to run or don&#39;t actually pass&#8230; (uh-oh) &#8211; so tests are switched off in the maven build cycle (again, uh-oh).</p><p>I am thinking about separating this large project into smaller specific projects, such that the &#39;final&#39; sub-project (or several sub-projects) would pick up the various sub-projects that it would need.</p><p>My thinking is as follows:</p><ul><li>if I separate the big project into various sub-projects, this makes it clear what each project&#39;s responsibility is.</li><li>by separating into sub-projects, I can then clean up the testing of each sub-project individually, and turn on the testing for that sub-project in the maven build cycle.</li></ul><p>I am slightly concerned about what impact this might have on the build time.</p><ul><li>Would imposing a structure on the large project (i.e. into smaller sub-projects) slow the compiler down?</li></ul><p>Also, I have a slight concern on what impact this might have editing time in IDEs (we principally use Intellij). Intellij seems to build each project in turn through the dependency tree &#8211; i.e. if C depends on B depends on A, and I change A, it won&#39;t try to build B unless A compiles, and so on. Arguably that&#39;s advantageous, but I have found that if &#8211; for example, I change an interface in A that is widely used in B and C, it takes some time to fix all the errors from that change&#8230;</p><p>Another question is how to use factory classes. Some aspects of the project depend on external jars. Occasionally (thankfully not often) these are updated, and we have to migrate. We tend to handle this by using a Factory class which points to the correct versions of the external code (so we don&#39;t have to change all the implementations throughout the code base).</p><p>At the moment this is all in the large project, but I am thinking that by switching to sub-<br /> projects, I could develop a new project for the implementation of new external code, make sure that sub-project is fully functional and tested, and then switch the dependencies / factory class in the user project. However, this is made more complicated by the extensive use of interfaces throughout the large project. For example</p><ul><li>sub-project A &#8211; contains interfaces</li><li>sub-project B &#8211; depends on A for interfaces and old external jar</li><li>sub-project C &#8211; depends on B (and thus A and old external jar), and contains a Factory class that uses B&#39;s implementations of interfaces</li></ul><p>If I need to change the external jar of B, I can:</p><ul><li>create sub-project B_ii &#8211; again depends on A, and now the new external jar</li><li>once fully functional, I can add C&#39;s dependency to B_ii, and change the Factory class to use the new implementations of interfaces.</li><li><p>when that&#39;s all working, I can then remove C&#39;s dependency to original B, and if desired, remove sub-project B.</p></li><li><p>Is that a sensible way of going about this?</p></li></ul><p>So, in general, my questions are:</p><ul><li>Does anyone have any experience of breaking up large projects? Are there any tips/tricks that you would be willing to share?</li><li>What impact did this have on your development and build times?</li><li>What advice could you offer on structuring such a break-up of such a project?</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I&#39;m going to take a quick first cut at this (great Q BTW!):</p><blockquote><p>Would imposing a structure on the large project (i.e. into smaller
sub-projects) slow the compiler down?</p></blockquote><p>Not by enough that it matters, the overhead is actually in Maven invocations.</p><blockquote><p>Also, I have a slight concern on what impact this might have editing
time in IDEs (we principally use Intellij). Intellij seems to build
each project in turn through the dependency tree - i.e. if C depends
on B depends on A, and I change A, it won&#39;t try to build B unless A
compiles, and so on. Arguably that&#39;s advantageous, but I have found
that if - for example, I change an interface in A that is widely used
in B and C, it takes some time to fix all the errors from that
change...</p></blockquote><p>Different IDEs have their different strengths with regards to Maven bindings and dependency management. The current state of play seems to be that it <em>mostly</em> just works on the latest Eclipse, Netbeans and IntelliJ - but you will have to teach your developers the emergency double whammy of &#34;Refresh source files from disk and rebuild all related maven projects&#34;.</p><p>I find I&#39;m having to do that less and less these days though.  Having an SSD drive makes a massive difference here BTW.</p><blockquote><p>snip factory classes paragraphs</p></blockquote><p>Dependency management is incredibly important, regardless of what technology (Maven/Ivy/whatever) use use to help you implement it.</p><p>I&#39;d start by getting the extensive reporting out of the Maven dependency plugin and take stock of what you&#39;ve got.  Generally speaking you set the dependency in the dependency management of the POM as high up the food chain as possible, but no higher.  So if two of your submodules use an external dependency, then haul that into their parent POM and so on and so forth.</p><p>Upgrading external JARs should always be done as a proper mini-project.  Evaluate why you&#39;re upgrading, alter source code to take advantage of any new features/bug fixes etc.  Just bumping the version without this analysis and work will get you into trouble.</p><blockquote><p>So, in general, my questions are:</p><p>Does anyone have any experience of breaking up large projects? Are there any &gt;tips/tricks that you would be willing to share?</p></blockquote><ul><li>Interfaces and Dependency injection are your friend.</li><li>Michael Feather&#39;s book on <a href="https://rads.stackoverflow.com/amzn/click/com/0131177052" rel="noreferrer" rel="nofollow noreferrer">dealing effectively with legacy code</a> is a must read.</li><li>Integration tests are your friend</li><li>Splitting the sub projects into foo-api (interfaces only!) and foo-core and having modules only depend on the foo-api helps a great deal and enforces separation</li><li>Jboss Modules and/or OSGi can help enforce clean separation</li></ul><blockquote><p>What impact did this have on your development and build times?</p></blockquote><p>Very minor impact on dev and build times - a massive gain in time for our overall continuous delivery pipeline.</p><blockquote><p>What advice could you offer on structuring such a break-up of such a project?</p></blockquote><p>Do the little things right and the big things tend to fall out cleanly afterwards.  So split things off bit by bit - don&#39;t do a massive restructure of the whole lot unless you&#39;ve got a high percentage of coverage with your integration tests.</p><p>Write integration tests before the split - you should more or less get the same result(s) after the split.</p><p>Draw diagrams of the modularity you have now and where you want to get to.  Design intermediate steps.</p><p>Don&#39;t give up - some Yak shaving now builds the foundation for being able to &#34;rapidly build and refactor without fear&#34; <em>Shameless plug</em> -&gt; from Ben and I&#39;s <a href="https://rads.stackoverflow.com/amzn/click/com/1617290068" rel="noreferrer" rel="nofollow noreferrer">The Well-Grounded Java Developer</a>.</p><p>Best of luck!</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-creating-webservices-using-spring-mvc-one-project-or-multiple-projects/'>Java &#8211; Creating webservices using spring-mvc. One project or multiple projects</a></li><li class="list-group-item"><a href='../java-best-way-to-structure-a-git-repository-for-maven/'>Java &#8211; Best way to structure a Git repository for Maven</a></li><li class="list-group-item"><a href='../java-how-to-have-parent-and-child-modules-in-maven-that-both-package-as-jar-files/'>Java &#8211; How to have parent and child modules in Maven that both package as jar files</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>