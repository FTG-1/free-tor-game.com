<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Mvc &#8211; Best practice or design patterns for retrieval of data for reporting and dashboards in a domain-rich application &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064546 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064546" class="post-1064546 software type-software status-publish hentry category-software tag-architecture tag-data-warehouse tag-domain-driven-design tag-mvc tag-reporting"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Mvc &#8211; Best practice or design patterns for retrieval of data for reporting and dashboards in a domain-rich application</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">data-warehouse</span><span class="mr-2 badge badge-warning">domain-driven-design</span><span class="mr-2 badge badge-primary">mvc</span><span class="mr-2 badge badge-danger">reporting</span></p><div class="entry-content"><p>First, I want to say this seems to be a neglected question/area, so if this question needs improvement, help me make this a great question that can benefit others! I&#39;m looking for advice and help from people who have implemented solutions that solve this problem, not just ideas to try.</p><p>In my experience, there are two sides of an application &#8211; the &#34;task&#34; side, which is largely domain driven and is where the users interact richly with the domain model (the &#34;engine&#34; of the application) and the reporting side, where users get data based on what happens on the task side.</p><p>On the task side, it&#39;s clear that an application with a rich domain model should have business logic in the domain model and the database should be used mostly for persistence. Separation of concerns, every book is written about it, we know what to do, awesome.</p><p>What about the reporting side? Are data warehouses acceptable, or are they bad design because they incorporate business logic in the database and the very data itself? In order to aggregate the data from the database into data warehouse data, you must have applied business logic and rules to the data, and that logic and rules didn&#39;t come from your domain model, it came from your data aggregating processes. Is that wrong?</p><p>I work on large financial and project management applications where the business logic is extensive. When reporting on this data, I will often have a LOT of aggregations to do to pull the information required for the report/dashboard, and the aggregations have a lot of business logic in them. For performance sake, I have been doing it with highly aggregated tables and stored procedures.</p><p>As an example, let&#39;s say a report/dashboard is needed to show a list of active projects (imagine 10,000 projects). Each project will need a set of metrics shown with it, for example:</p><ol><li>total budget</li><li>effort to date</li><li>burn rate</li><li>budget exhaustion date at current burn rate</li><li>etc.</li></ol><p>Each of these involves a lot of business logic. And I&#39;m not just talking about multiplying numbers or some simple logic. I&#39;m talking about in order to get the budget, you have to apply a rate sheet with 500 different rates, one for each employee&#39;s time (on some projects, other&#39;s have a multiplier), applying expenses and any appropriate markup, etc. The logic is extensive. It took a lot of aggregating and query tuning to get this data in a reasonable amount of time for the client.</p><p>Should this be run through the domain first? What about performance? Even with straight SQL queries, I&#39;m barely getting this data fast enough for the client to display in a reasonable amount of time. I can&#39;t imagine trying to get this data to the client fast enough if I am rehydrating all these domain objects, and mixing and matching and aggregating their data in the application layer, or trying to aggregate the data in the application.</p><p>It seems in these cases that SQL is good at crunching data, and why not use it? But then you have business logic outside your domain model. Any change to the business logic will have to be changed in your domain model and your reporting aggregation schemes.</p><p>I&#39;m really at a loss for how to design the reporting/dashboard part of any application with respect to domain driven design and good practices.</p><p>I added the MVC tag because MVC is the design flavor du jour and I am using it in my current design, but can&#39;t figure out how the reporting data fits into this type of application.</p><p>I&#39;m looking for any help in this area &#8211; books, design patterns, key words to google, articles, anything. I can&#39;t find any information on this topic.</p><p><strong>EDIT AND ANOTHER EXAMPLE</strong></p><p>Another perfect example I ran across today. Customer wants a report for Customer Sales Team. They want what seems like a simple metric:</p><p>For each Sales person, what is their annual sales to date?</p><p>But that is complicated. Each sales person participated in multiple sales opportunities. Some they won, some they didn&#39;t. In each sales opportunity, there are multiple sales people who are each allocated a percentage of credit for the sale per their role and participation. So now imagine going through the domain for this&#8230;the amount of object rehydration you would have to do to pull this data from the database for every Sales person:</p><blockquote><p>Get all the <code>SalesPeople</code>-&gt;<br /> For each get their <code>SalesOpportunities</code>-&gt;<br /> For each get their percentage of the sale and calculate their Sales amount<br /> then Add up all their <code>SalesOpportunity</code> Sales amount.</p></blockquote><p>And that&#39;s ONE metric. Or you can write a SQL query which can do it quickly and efficiently and tune it to be fast.</p><p><strong>EDIT 2 &#8211; <a href="http://martinfowler.com/bliki/CQRS.html">CQRS Pattern</a></strong></p><p>I&#39;ve read about the <a href="http://martinfowler.com/bliki/CQRS.html">CQRS Pattern</a> and, while intriguing, even Martin Fowler says it&#39;s not tested. So how has this problem BEEN solved in the past. This has to have been faced by everyone at some point or another. What is an established or well-worn approach with a track record of success?</p><p><strong>Edit 3 &#8211; Reporting Systems/Tools</strong></p><p>Another thing to consider in this context is reporting tools. Reporting Services/Crystal Reports, Analysis Services and Cognoscenti, etc. all expect data from SQL/database. I doubt your data will come through your business later for these. And yet they and others like them are a vital part of the reporting in a lot of large systems.<br /> How is the data for these properly handled where there is even business logic in the data source for these systems as well as possibly in the reports themselves?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This is a very glib answer, but getting right to the heart of the matter:</p><p>In terms of DDD maybe think of reporting as a Bounded Context?, so rather than thinking in terms of &#34;THE&#34; domain model, you should be willing to think that it&#39;s okay to have more than one model.  So yes it&#39;s okay if the reporting domain has reporting business logic in it, just as it&#39;s okay for the transactional domain to have transactional business logic in it.</p><p>As to the question of, say SQL stored procedures vs. domain model in application code,  the same pros and cons apply for the reporting system as for the transactional system.</p><p>Since I see that you added a bounty to the question, I read the question again and noticed that you are asking for specific resource on this, so I thought I&#39;d start with suggesting that you look at other Stack Overflow questions on the matter, and I found this one <a href="https://stackoverflow.com/questions/11554231/how-does-domain-driven-design-handle-reporting">https://stackoverflow.com/questions/11554231/how-does-domain-driven-design-handle-reporting</a></p><p>The general gist of that one is to use CQRS as a pattern for your system, which is consistent with DDD,  and rely on the query side responsibilities as a way to get reporting done,  but I&#39;m not sure that is a helpful answer in your case.</p><p>I also found this <a href="http://www.martinfowler.com/bliki/ReportingDatabase.html" rel="noreferrer">http://www.martinfowler.com/bliki/ReportingDatabase.html</a>,  which I found linked from here: <a href="http://groups.yahoo.com/neo/groups/domaindrivendesign/conversations/topics/2261" rel="noreferrer">http://groups.yahoo.com/neo/groups/domaindrivendesign/conversations/topics/2261</a></p><p>Here&#39;s an interesting article from ACM on the matter: <a href="http://dl.acm.org/citation.cfm?id=2064685" rel="noreferrer">http://dl.acm.org/citation.cfm?id=2064685</a> but it&#39;s behind a paywall so I can&#39;t actually read it (not an ACM member :( ).</p><p>There&#39;s also this here answer on a similar question: <a href="https://stackoverflow.com/questions/3380431/cqrs-ddd-synching-reporting-database">https://stackoverflow.com/questions/3380431/cqrs-ddd-synching-reporting-database</a></p><p>and this one: <a href="http://snape.me/2013/05/03/applying-domain-driven-design-to-data-warehouses/" rel="noreferrer">http://snape.me/2013/05/03/applying-domain-driven-design-to-data-warehouses/</a></p><p>Hope this helps!</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../lookup-tables-are-they-a-leak-in-the-domain-model/'>Lookup Tables: Are they a leak in the domain model</a></li><li class="list-group-item"><a href='../php-ddd-creating-reusable-modules-and-service-type-distinctions-domain-infrastructure-application/'>Php &#8211; DDD: Creating reusable modules and service type distinctions (Domain, Infrastructure, Application)</a></li><li class="list-group-item"><a href='../architecture-domain-model-design-best-practices-for-robust-fluency-encapsulation-and-extensibility/'>Architecture &#8211; Domain Model Design &#8211; Best Practices for Robust Fluency, Encapsulation, and Extensibility</a></li><li class="list-group-item"><a href='../c-should-an-interface-be-defined-in-the-infrastructure-layer-if-its-only-used-by-an-implementing-class-in-that-layer/'>C# &#8211; Should an interface be defined in the infrastructure layer if it&#8217;s only used by an implementing class in that layer</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>