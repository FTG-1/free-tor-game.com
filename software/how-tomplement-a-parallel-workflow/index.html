<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How tomplement a Parallel Workflow &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070810 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070810" class="post-1070810 software type-software status-publish hentry category-software tag-finite-state-machine tag-workflows"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How tomplement a Parallel Workflow</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">finite-state machine</span><span class="mr-2 badge badge-info">workflows</span></p><div class="entry-content"><p>I&#39;m trying to implement a parallel split task using a workflow system. I&#39;m using .NET but my process is very simple and I don&#39;t want to use WF or anything heavy like that.</p><p>I&#39;ve tried using Stateless. So far is was easy to set up and run, but I may be using the wrong tool for the job because I&#39;m not sure how you&#39;re supposed to model parallel split workflows, where you have multiple sub-tasks required before you can advance to the next state, but the steps don&#39;t require being performed in any particular order.</p><p>I can easily use the dynamic configuration options to check my data model manually to see if the model is in the correct state (all sub-tasks completed) and can transition to the next state, but this seems to completely break the workflow paradigm. What is the proper, orthodox way to implement a parallel split process?</p><p>Thanks</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>In this new answer I will try to explain based on the <a href="https://code.google.com/p/stateless/" rel="noreferrer">&#34;Stateless&#34; library mentioned in OP</a>.</p><hr/><h3>Draft.</h3><p><em>More information will be added after I get my hands on Stateless.</em></p><p>In any sense, extension to Stateless is <em>required</em>. Fortunately this is highly doable because Stateless is highly extensible using its <a href="http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.100).aspx" rel="noreferrer">partial class</a> approach.</p><hr/><p>A simple description is that:</p><ul><li>One business process = a bunch of activities</li><li>Each activity requires one <code>StateMachine</code> object. <a href="https://code.google.com/p/stateless/" rel="noreferrer">See link to library.</a><ul><li>This is necessary because in some circumstances, each activity can have their own state transitions, as explained in &#34;parallel split workflow&#34; by OP.</li></ul></li><li>Some activities are non-trivial (requires an extension to the <code>Stateless</code> library object), which might be implemented in several ways.<ul><li>One kind of non-trivial activity is to embed (or nest, or delegate to) another business process.</li></ul></li><li>The business process must mediate the state transition rules across all activities, and this requires an extension to the library as well.)</li></ul><hr/><p>The typical states in a Activity object:</p><ul><li>NotConfigured<ul><li>Only exists programmatically. Compare this to a non-fully-initialized object.</li><li>An activity may require some parameters (e.g. for an Email activity, a email address needs to be configured) before this activity can be triggered.</li></ul></li><li>NotNeeded<ul><li>Indicates that, in its current configuration, this activity does not need to be executed in order for the containing business process to be &#34;completed&#34;.</li><li>This state is reversible. It can be &#34;reactivated&#34; upon receiving a trigger from another activity.</li><li><em>Example: citizen needs to fill out a SSN. Non-citizen needs to fill out either ITIN or W8-BEN. In either case, one of the activity is not needed. However, if the employee makes a mistake in the option, this mistake should be correctable by clicking a checkbox. This has the effect of deactivating the activity no longer needed, and reactivating the activity now needed.</em></li></ul></li><li>Succeeded<ul><li>This state is final (irreversible). Once set into Succeeded, it cannot be set to any other state.</li></ul></li><li>Waiting, with the following substates:<ul><li>WaitingOnPreconditions</li><li>WaitingOnInternalTrigger</li><li>WaitingOnBusinessProcess</li><li>WaitingOnExternalTrigger</li></ul></li><li>Faulted, with the following substates:<ul><li>TimedOut,</li><li>InternalError<ul><li>Contains a stack trace (if it is a programmatic error)</li><li>Captures a snapshot of the state machines of each activity inside the business process (if it is caused by some invalid state transition requests or mis-configuration of the business process)</li></ul></li><li>ExternalError</li></ul></li><li>Canceled, with the following substates:<ul><li>CanceledByBusinessProcess (the containing business process is canceled)</li><li>CanceledByInternalInvoke (this activity is &#34;nested&#34;, and the parent activity requested this to cancel.)</li><li>CanceledByUser (by someone with a user ID)</li></ul></li></ul><hr/><p>Sometimes, a single activity in human sense must be broken down into multiple activities in software implementation. This will have implications on the design of the Graphical User Interface (GUI). In short - GUI can get very complicated.</p><p>Example: a business process modeler will regard &#34;wait for email approval&#34; as one activity. Internally, it is broken down into these activities:</p><ul><li>Format email template and send email with email server.</li><li>Choice: <em>(both are waiting, but only the first one will become Succeeded, as the other will be promptly set to NotNeeded.)</em><ul><li>Wait for approval email reply.</li><li>Wait for disapproval email reply.</li></ul></li><li>An exception catcher for timeout.</li><li>An exception catcher for anything but timeout (e.g. problem with sending the email, or parsing of the approval/disapproval response)</li></ul><p>Displaying all these details on the GUI will make it difficult for the user. Instead, the user should only see options that the user intends to configure.</p><hr/><p>Almost all interactions (dependencies) between activities are modeled as the &#34;Waiting&#34; state.</p><p>WaitingOnPreconditions is the simplest type. Simply speaking, it can wait on final states but not states that flip-flop. Usually, it waits for a set of activities to all transition into the &#34;Succeeded&#34; state. (On the opposite side, it can also wait on &#34;any activity that transitions into the &#34;Faulted&#34; state - this makes it an exception catcher.)</p><p><em>Because the inputs to WaitingOnPreconditions are not allowed to flip-flop, the outcome of WaitingOnPreconditions will also not flip-flop. This is the essential distinction between WaitingOnPreconditions and WaitingOnInternalTrigger, described below.</em></p><hr/><p>WaitingOnInternalTrigger is more dynamic than WaitingOnPreconditions. It waits on some observable variables on the business process object to change to a certain value, or some other activities to change their states.</p><p>Once entered this state, the activity&#39;s <code>StateMachine</code> stays there, unless requested (programmatically) to re-check. The check might be performed with a predicate, <code>Func&lt;bool&gt;</code>, or lambda expression.</p><p>The business process object contains some variables that have <a href="http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged(v=vs.110).aspx" rel="noreferrer"><code>INotifyPropertyChanged</code> interface</a>. When that event is raised (that is, when the variable value is updated), activities that are in this state (WaitingOnInternalTrigger) will be re-checked.</p><p>To avoid indeterminacy or deadlock, the re-check is only allowed to use variables which it can observe. Otherwise, nobody will notify the activity of the relevant changes, and the activity will thus stuck in this state forever.</p><hr/><p>WaitingOnBusinessProcess is used when an activity embeds another business process. That other business process runs somewhat independently (in software sense), and the current activity will wait for it to finish, cancel, or fault.</p><p>WaitingOnBusinessProcess is re-checked whenever the business process it is waiting on has changed state.</p><hr/><p>WaitingOnExternalTrigger is a mechanism to block the activity until it is unblocked by some other means. For example, it might be waiting on some user interaction, or an approval email. Unblocking is done programmatically - not by another activity or business process.</p><p>Every WaitingOnExternalTrigger must have an associated exception catcher (mentioned earlier). This is because all external processes are presumably unreliable, e.g. the employee responsible for this business process might be fired on the spot, (or the email server was struck by a disaster) and thus unable to continue the process.</p><hr/><h3>Other references (not used in my answer)</h3><ul><li><a href="http://wwwis.win.tue.nl/~wvdaalst/" rel="noreferrer">Homepage of Wil van der Aalst</a>, mentioned as the primary reference for OP&#39;s design.</li><li><a href="http://en.wikipedia.org/wiki/Business_Process_Model_and_Notation" rel="noreferrer">Business Process Model and Notation (BPMN)</a></li></ul><hr/><p><em>Disclaimer: my employer makes BPMN software. However, I do not work in the BPMN product team, and my answer is not representative of my employer&#39;s viewpoint. I do not have any privileged knowledge of the BPMN product.</em></p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-how-to-store-and-validate-data-between-state-transitions/'>Architecture &#8211; How to store and validate data between state transitions</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>