<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Python &#8211; How to test the code in Python other than by doing it by hand &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081126 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081126" class="post-1081126 software type-software status-publish hentry category-software tag-automation tag-python tag-test-automation tag-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Python &#8211; How to test the code in Python other than by doing it by hand</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">automation</span><span class="mr-2 badge badge-info">python</span><span class="mr-2 badge badge-warning">test-automation</span><span class="mr-2 badge badge-primary">testing</span></p><div class="entry-content"><p>I am used to user testing in Java, and I also manually test each section of code I write, but now, I want to automate it.</p><p>There is no GUI for this project, so user testing is not required and I can focus code testing. The fact is, I don&#39;t know how to test code other than by calling the methods by hand, passing different parameters to them, and check the return value.</p><p>I suppose automation is a solution, but don&#39;t have a clue how to pass from manual testing to automated one. Are there tools which can create the relevant tests for me, or do I need to write tests manually? What can be automated?</p><p>Here is an example of code I want to test. Do I need to transform it somehow in order for it to be unit tested?</p><pre><code>def netInfoToSend(tm, our_or_ip_version, our_or_addr_len, our_op_ip, version_their_ips,
                  num_their_ips, len_their_ips, their_ips):

    cellNetInfopkt = struct.pack(&#34;&gt;I&#34;, time.time())

    #         Number of addresses    [1 byte]
    # cellNetInfopkt += struct.pack(&#34;B&#34;, num_their_ips)
    #         Their OR&#39;s addresses    [variable]
    print &#34;peerAddress&#34;, peerAddress
    print &#34;peerAddress type&#34;, type(peerAddress)

    cellNetInfopkt += struct.pack(&#34;&gt;B&#34;, 4)
    cellNetInfopkt += struct.pack(&#34;&gt;B&#34;, 4)
    cellNetInfopkt += struct.pack(&#34;B&#34; * len(peerAddress), *peerAddress)

    cellNetInfopkt += struct.pack(&#34;&gt;B&#34;, 1)

    # Address format is a type/length/value
    #         This OR&#39;s address     [variable]
    cellNetInfopkt += struct.pack(&#34;&gt;B&#34;, our_or_ip_version) # IPV4
    cellNetInfopkt += struct.pack(&#34;&gt;B&#34;, our_or_addr_len)
    cellNetInfopkt += struct.pack(&#34;B&#34; * len(ownAddress), *ownAddress)

    return cellNetInfopkt
</code></pre></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Method to test</h2><p>The method takes several arguments and returns a value, without using global state nor calling other parts of the application. It does one and one only thing.</p><p>This is a good start.</p><ul><li><p>If the method was using <strong>global variables</strong>, testing could be <a href="https://stackoverflow.com/q/17401341/240613">difficult</a>.</p></li><li><p>If the method was <strong>using other parts of the application</strong>, you could be forced to use <a href="https://stackoverflow.com/q/3459287/240613">mocks or stubs</a>.</p></li><li><p>If the method did <strong>several things</strong>, testing would quickly become a mess. You would have to <a href="https://rads.stackoverflow.com/amzn/click/com/0201485672" rel="noreferrer" rel="nofollow noreferrer">refactor</a> the code in order to create multiple methods, each one in charge of a single task, and test them separately.</p></li></ul><h2>Testing framework</h2><p>Running unit tests can be as simple as writing a Python script which will call a bunch of methods and compare their output with the one which is expected. But don&#39;t do that. Instead, you can use a <a href="http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#Python" rel="noreferrer">unit tests framework</a>. While not mandatory, it will simplify your life later. The most basic framework will:</p><ul><li><p>Provide you with <a href="https://docs.python.org/3/library/unittest.html#assert-methods" rel="noreferrer">methods like <code>assertEqual</code> or <code>assertNotIn</code></a>.</p><p>Some will have more of such methods; othersâ€”less. <strong>The only one you need is an ordinary <code>assert</code> of a condition</strong>, but additional methods can be very handy. For example, .NET has an <a href="http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.collectionassert.aspx" rel="noreferrer">impressive range of assertions related to collections</a>, which helps avoiding to reinvent the wheel every time you work with collections in tests.</p></li><li><p>Run the tests in your place.</p><p>This becomes very handy in some situations, such as when one of your tests throws an exception. A testing framework automatically handles that, records the test as failed (unless the exception is expected) and runs other tests.</p></li><li><p>Show the results in a form which helps understanding how many tests passed and which ones failed.</p><p>Some integrate well into an IDE, making it visually attractive to use. If you work mostly in a terminal, all testing frameworks are able to display the results in a terminal.</p></li></ul><p>The benefits of a testing framework doesn&#39;t stop here. For example:</p><ul><li><p>Some frameworks can easily be extended to include <a href="http://www.developer.com/tech/article.php/3844736/Why-Code-Coverage-Tools-Should-Be-in-Every-Developers-Toolbox.htm" rel="noreferrer">code coverage</a>.</p></li><li><p>Others integrate well with your <a href="http://martinfowler.com/articles/continuousIntegration.html" rel="noreferrer">Continuous Integration</a> environment.</p></li><li><p>Every serious framework will include features such as code to run before or after running every test (setup and shutdown code) or specific statements which indicate that a test <em>should</em> throw an exception.</p></li></ul><p>I hope you&#39;re convinced now that you need a framework. But previously, I provided <a href="http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#Python" rel="noreferrer">a link</a> to the list of some unit tests frameworks for Python, so <strong>which one to chose?</strong> It&#39;s up to you: some will have features which others don&#39;t have; some will integrate better with different environments. <strong><code>unittest</code> is a good start</strong> for two reasons:</p><ul><li><p>It&#39;s already installed on your machine.</p></li><li><p>It has everything you need at the beginning, and you may never need anything other.</p></li></ul><p>But feel free to pick a different framework if you discover it has a feature you think you will need later.</p><h2>Testing ordinary cases</h2><p>Now that you have a framework, start by testing <strong>ordinary cases</strong> of your method.</p><p>What are those ordinary cases? For example, if somebody was implementing <code>abs</code> method which determines an absolute value of a number, ordinary testing cases would be:</p><pre><code>def test_positive(self):
    actual = demo.abs(3)
    expected = 3
    self.assertEqual(expected, actual)

def test_negative(self):
    actual = demo.abs(-7)
    expected = 7
    self.assertEqual(expected, actual)

def test_float(self):
    actual = demo.abs(-2.91)
    expected = 2.91
    self.assertEqual(expected, actual)
</code></pre><p>When writing the very first test, you may be blocked: how do you know whether the value returned by the method is correct?</p><ul><li><p>First, if you don&#39;t want to do binary comparison and want to deal with more humanly-readable values (are they?), you can use <code>binascii.hexlify</code>.</p></li><li><p>As for determining the expected value, either you can use a third party application which will do the same as what your method does, or you compute one by hand. In both cases, if the test fails, you should ask yourself if your code is wrong or if the expected value is.</p></li></ul><p>Remember, <strong>you don&#39;t need to test every possible input value</strong>. Not only you can&#39;t in most cases, but also, there is practically no benefit in doing it. For example, once I tested <code>abs</code> with a value of <code>3</code>, I don&#39;t need to test it with the value of <code>4</code>, then <code>5</code>, then <code>6</code>. I&#39;m confident that either <code>abs</code> will fail with <code>3</code> (for example by throwing an exception or returning <code>-3</code> or <code>0</code>), or it will work for any other positive integers as well.</p><p>Looking at the code, i.e. <strong>performing <a href="http://en.wikipedia.org/wiki/White-box_testing" rel="noreferrer">white-box testing</a>, is helpful here</strong>. If you see that the method has somewhere in it <code>if x &gt; 100</code>, then you may be confident that you should test the method with at least one <code>x</code> inferior to 100 and one superior to it. But <strong>don&#39;t rely on the actual implementation of the code you test too often</strong>: black-box testing is often much more effective and reduces the risk of reproducing in tests the bug in the code. If you find yourself relying on actual implementation too much, <strong><a href="http://www.agiledata.org/essays/tdd.html" rel="noreferrer">test driven development</a> can help</strong>.</p><h2>Testing edge cases</h2><p>Once those tests pass, you need to think about <strong>edge cases</strong>, the sort of cases which are not necessarily frequent and can eventually correspond to the situations which were missed by the author of the code to test.</p><p>Example:</p><pre><code>def test_zero(self):
    actual = demo.abs(0)
    expected = 0
    self.assertEqual(expected, actual)

def test_nan(self):
    with self.assertRaises(ValueError):
        demo.abs(float(&#34;nan&#34;))

def test_wrong_type(self):
    with self.assertRaises(TypeError):
        demo.abs(&#34;I&#39;m not really a number.&#34;)

def test_none(self):
    with self.assertRaises(ValueError):
        demo.abs(None)
</code></pre><p>When you search for edge cases, act like a hacker: <strong>imagine you want to break the method, and you want to find cases which the original author didn&#39;t expected</strong>.</p><p>If the method expects a string, what if you pass a 1 000 000 000 characters-long string? What if you pass an empty one? What if you use a different <a href="http://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms" rel="noreferrer">Unicode normalization form</a> or if the string you pass to the method contains no printable characters?</p><p>If the method expects a float, <a href="https://softwareengineering.stackexchange.com/q/223293/6605">floating-point rules can be tricky</a> in some languages and should be tested as well.</p><h2>Automation</h2><p>You may have noticed that I haven&#39;t used the term of &#34;automated testing&#34;. This is because <strong>there is no such a thing as manual testing</strong>. When you play with the application, searching by hand things which may fail, it&#39;s <em>experimentation</em>, not <em>testing</em>. Both tasks have a goal of discovering bugs, but they are very different.</p><p>The major benefit of real tests (compared to experimentation) is especially noticeable when it comes to <strong><a href="http://en.wikipedia.org/wiki/Regression_testing" rel="noreferrer">regression testing</a>, i.e. when you need to run the same tests again and again over time to ensure that new changes haven&#39;t broken anything.</strong></p><blockquote><p>A year ago, I was contributing to a project for a multinational company. The company working on the project was not using any testing, because they considered it a waste of time. The multinational company had &#34;testers&#34; who struggled with the web interface of the project, filling forms by hand and watching the result.</p><p>This was a five pages project and they had two &#34;testers&#34;. At the beginning, everything was good. Quickly, the &#34;testers&#34; were unable to follow: with more than ten deployments per day and more than hundred bugs (some taking a long time to reproduce by hand), it was absolutely impossible to test every case.</p><p>When they were finding, randomly, that old bugs were reappearing, it was often bugs reintroduced days or weeks ago. Such regressions are extremely difficult and slow to solve, delaying the final release for months.</p></blockquote><p>This story clearly shows that &#34;testing by hand&#34; doesn&#39;t work. It might work for tiny projects developed in a short period of time and not maintained later. But those projects usually can stay untested.</p><p>Once you have your tests, your project is partially automated. In order to run every of a few thousand tests, the only thing you need is to run a command or click on a button and then wait.</p><p>But clicking on a button is a complex task as well. One day you forget to run the tests before/after every commit. The next day, you run the tests only once. A week later, you notice that you haven&#39;t run the tests for a few days, and when you do it, the number of failed tests is overwhelming: instead of fixing them, you simply remove all the tests and continue the project without testing.</p><p>In order to avoid testing decay, there are a few hints:</p><ul><li><p>Use full automation, i.e. integrate tests into Continuous Integration.</p></li><li><p>If tests fail, fixing them should be your top priority.</p></li><li><p>Commit frequently. I often see programmers who barely do one commit per day, when they leave their desk in evening (and sometimes can disappear from version control log for a few days). They do it wrong.</p></li><li><p>Ensure tests don&#39;t take hours to run (or that you can run them selectively while being confident that all tests potentially concerned by the recent changes are run).</p></li></ul><p>Those three hints help <strong>making testing as painless as possible</strong> by making it a <em>constant process</em> as much as possible. With short iterations, you are notified quickly about failed tests and you solve them quickly: the more you wait, the more expensive and difficult the task would be.</p><p>Using regression testing has also an important benefit: if you know that mistakes in code will be easy to solve, you will be able to <strong>refactor code much more intensively</strong>. You can try it yourself: your <code>NetInfoToSend</code> contains code duplication; try to remove it.</p><h2>The cake is a lie</h2><p>The last part is more the response to &#34;create the tests for me&#34; in your question. Researching about tests, you&#39;ll find lots of <strong>products advertised as being THE solution to unit testing</strong>. Advertisement will assert that the product will write the tests for you, or improve your productivity by 100 or make you happy in any other way.</p><p><strong>Don&#39;t trust them.</strong></p><p>Some tools are helpful, but their importance is relative.</p><ul><li><p>Unit test frameworks help, but they do nothing you can do manually.</p></li><li><p>Code coverage help finding parts which are not covered enough, but tools are stupid enough to put a red flag on boilerplate code where unit tests are useless anyway, or to make you feel safe when you reach 98% code coverage on business-critical code which requires 99.95%.</p></li><li><p>Tools creating unit tests for you may help in some cases, but they can focus on code which you don&#39;t necessarily need to test and leave aside the three lines of code you would like to test the most. I&#39;m not saying tools such as <a href="http://research.microsoft.com/en-us/projects/pex/" rel="noreferrer">Pex</a> are useless: they are excellent at what they do, but they shouldn&#39;t replace you as a tester.</p></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-relative-value-of-manual-vs-automated-testing/'>Unit-testing &#8211; Relative value of manual vs automated testing</a></li><li class="list-group-item"><a href='../a-good-integration-test-strategy/'>A good integration test strategy</a></li><li class="list-group-item"><a href='../agile-which-stage-of-agile-scrum-should-we-start-creating-automation-tests/'>Agile &#8211; Which stage of Agile (SCRUM) should we start creating automation tests</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>