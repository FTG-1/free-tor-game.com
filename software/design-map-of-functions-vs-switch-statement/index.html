<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; Map of functions vs switch statement &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1066390 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1066390" class="post-1066390 software type-software status-publish hentry category-software tag-design tag-design-patterns tag-map tag-switch-statement"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; Map of functions vs switch statement</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">map</span><span class="mr-2 badge badge-primary">switch statement</span></p><div class="entry-content"><p>I&#39;m working on a project that processes requests, and there are two components to the request: the command and the parameters. The handler for each command is very simple (&lt; 10 lines, often &lt; 5). There are at least 20 commands, and likely will have more than 50.</p><p>I&#39;ve come up with a couple of solutions:</p><ul><li>one big switch/if-else on commands</li><li>map of commands to functions</li><li>map of commands to static classes/singletons</li></ul><p>Each command does a little error checking, and the only bit that can be abstracted out is checking for the number of parameters, which is defined for each command.</p><p>What would be the best solution to this problem, and why? I&#39;m also open to any design patterns I may have missed.</p><p>I&#39;ve come up with the following pro/con list for each:</p><p><strong>switch</strong></p><ul><li>pros<ul><li>keeps all commands in one function; since they&#39;re simple, this makes it a visual lookup table</li><li>don&#39;t need to clutter up source with tons of small functions/classes that will only get used in one place</li></ul></li><li>cons<ul><li>very long</li><li>hard to add commands programmatically (need to chain using default case)</li></ul></li></ul><p><strong>map commands -&gt; function</strong></p><ul><li>pros<ul><li>small, bite-size chunks</li><li>can add/remove commands programmatically</li></ul></li><li>cons<ul><li>if done in-line, same visually as switch</li><li>if not done in-line, lots of functions only used in one place</li></ul></li></ul><p><strong>map commands -&gt; static class/singleton</strong></p><ul><li>pros<ul><li>can use polymorphism to handle simple error checking (only like 3 lines, but still)</li><li>similar benefits to map -&gt; function solution</li></ul></li><li>cons<ul><li>lots of very small classes will clutter project</li><li>implementation not all in the same place, so it&#39;s not as easy to scan implementations</li></ul></li></ul><p><strong>Extra notes:</strong></p><p>I&#39;m writing this in Go, but I don&#39;t think the solution is language-specific. I&#39;m looking for a more general solution because I may need to do something very similar in other languages.</p><p>A command is a string, but I can easily map this to a number if convenient. The function signature is something like:</p><pre><code>Reply Command(List&lt;String&gt; params)
</code></pre><p>Go has top-level functions, and other platforms I&#39;m considering also have top-level functions, hence the difference between the second and third options.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This is a great fit for a map (2nd or 3rd proposed solution).  I&#39;ve used it dozens of times, and it&#39;s simple and effective.  I don&#39;t really distinguish between these solutions; the important point is that there is a map with function names as the keys.</p><p>The major advantage of the map approach, in my opinion, is that <strong>the table is data.</strong> This means that it can be passed around, augmented, or otherwise modified at runtime; it&#39;s also easy to code additional functions which interpret the map in new, exciting ways.  This wouldn&#39;t be possible with the case/switch solution.</p><p>I haven&#39;t really experienced the cons that you mention, but I would like to mention an additional drawback:  dispatching is easy if only the string name matters, but if you need to take additional information into account in order to decide which function to execute, it&#39;s a lot less clean.</p><p>Perhaps I&#39;ve just never run into a hard enough problem, but I see little value in both the command pattern and encoding the dispatch as a class hierarchy, as others have mentioned.  The core of the problem is mapping requests to functions; a map is simple, obvious, and easy to test.  A class hierarchy requires more code and design, increases the coupling between that code, and may force you to make more decisions upfront that you will later be likely to need to change.  I don&#39;t think the command pattern applies at all.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../when-decomposing-a-large-function-how-can-i-avoid-the-complexity-from-the-extra-subfunctions/'>When decomposing a large function, how can I avoid the complexity from the extra subfunctions</a></li><li class="list-group-item"><a href='../c-design-pattern-how-to-inject-dependencies-into-a-command-pattern/'>C# &#8211; Design pattern: How to inject dependencies into a Command pattern</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>