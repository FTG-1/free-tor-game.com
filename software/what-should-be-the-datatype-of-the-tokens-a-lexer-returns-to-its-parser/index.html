<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>What should be the datatype of the tokens a lexer returns to its parser &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070566 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070566" class="post-1070566 software type-software status-publish hentry category-software tag-data-types tag-flex tag-lexer"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">What should be the datatype of the tokens a lexer returns to its parser</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">data types</span><span class="mr-2 badge badge-info">flex</span><span class="mr-2 badge badge-warning">lexer</span></p><div class="entry-content"><p>As said in the title, which data type should a lexer return/give the parser? When reading the <a href="https://en.wikipedia.org/wiki/Lexical_analysis" rel="noreferrer">lexical analysis</a> article that Wikipedia has, it stated that:</p><blockquote><p>In computer science, lexical analysis is the process of converting a sequence of characters (such as in a computer program or web page) into a sequence of tokens (<strong>strings</strong> with an identified &#34;meaning&#34;).</p></blockquote><p>However, in complete contradiction to the above statement, When another question I asked on a different site(<a href="https://codereview.stackexchange.com/questions/138402/creating-a-simple-interpreter-for-the-quartz-language">Code Review</a> if you are curious) was answered, The person answering stated that:</p><blockquote><p>The lexer usually reads the <strong>string</strong> and converts this into a stream &#8230; of lexemes. The lexemes only need to be a stream of <strong>numbers</strong>.</p></blockquote><p>and he gave this visual:</p><pre><code>nl_output =&gt; 256
output    =&gt; 257
&lt;string&gt;  =&gt; 258
</code></pre><p>Later on in the article He mentioned <code>Flex</code>, a already existing lexer, and said writing &#39;rules&#39; with it would be simpler than writing a lexer by hand. He proceeded to give me this example:</p><pre><code>Space              [ \r\n\t]
QuotedString       &#34;[^&#34;]*&#34;
%%
nl_output          {return 256;}
output             {return 257;}
{QuotedString}     {return 258;}
{Space}            {/* Ignore */}
.                  {error(&#34;Unmatched character&#34;);}
%%
</code></pre><p>To further my insight and get more information, I read the Wikipedia article about <a href="https://en.wikipedia.org/wiki/Flex_(lexical_analyser_generator)" rel="noreferrer">Flex</a>. the Flex article showed that you could define a set of syntax rules, with tokens, in the following way:</p><pre><code>digit         [0-9]
letter        [a-zA-Z]

%%
&#34;+&#34;                  { return PLUS;       }
&#34;-&#34;                  { return MINUS;      }
&#34;*&#34;                  { return TIMES;      }
&#34;/&#34;                  { return SLASH;      }
&#34;(&#34;                  { return LPAREN;     }
&#34;)&#34;                  { return RPAREN;     }
&#34;;&#34;                  { return SEMICOLON;  }
&#34;,&#34;                  { return COMMA;      }
&#34;.&#34;                  { return PERIOD;     }
&#34;:=&#34;                 { return BECOMES;    }
&#34;=&#34;                  { return EQL;        }
&#34;&lt;&gt;&#34;                 { return NEQ;        }
&#34;&lt;&#34;                  { return LSS;        }
&#34;&gt;&#34;                  { return GTR;        }
&#34;&lt;=&#34;                 { return LEQ;        }
&#34;&gt;=&#34;                 { return GEQ;        }
&#34;begin&#34;              { return BEGINSYM;   }
&#34;call&#34;               { return CALLSYM;    }
&#34;const&#34;              { return CONSTSYM;   }
&#34;do&#34;                 { return DOSYM;      }
&#34;end&#34;                { return ENDSYM;     }
&#34;if&#34;                 { return IFSYM;      }
&#34;odd&#34;                { return ODDSYM;     }
&#34;procedure&#34;          { return PROCSYM;    }
&#34;then&#34;               { return THENSYM;    }
&#34;var&#34;                { return VARSYM;     }
&#34;while&#34;              { return WHILESYM;   }
</code></pre><p>It seems to me that the Flex lexer is returning strings of keywords\tokens. But It could be returning constants that are equal to certain numbers.</p><p>If the lexer was going to return numbers, how would it read string literals? returning a number is fine for single keywords, But how would you deal with a string? Wouldn&#39;t the lexer have to convert the string to binary numbers and then the parser would convert the numbers back to a string. It seems much more logical(and easier) for the lexer to return strings, and then let the parser convert any number string literals into actual numbers.</p><p>Or could the lexer possible return both? I&#39;ve been trying to write a simple lexer in c++, which lets you have only <strong>one</strong> return type for your functions. Thus leading me to ask my question.</p><p>To condense my question into a paragraph: When writing a lexer, and assuming that it could only return <strong>one</strong> data type(strings or numbers), which would be the more logical choice?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Generally, if you&#39;re processing a language though lexing and parsing, you&#39;ve got a definition of your lexical tokens, e.g.:</p><pre><code>NUMBER ::= [0-9]+
ID     ::= [a-Z]+, except for keywords
IF     ::= &#39;if&#39;
LPAREN ::= &#39;(&#39;
RPAREN ::= &#39;)&#39;
COMMA  ::= &#39;,&#39;
LBRACE ::= &#39;{&#39;
RBRACE ::= &#39;}&#39;
SEMICOLON ::= &#39;;&#39;
...
</code></pre><p>and you have a grammar for the parser:</p><pre><code>STATEMENT ::= IF LPAREN EXPR RPAREN STATEMENT
            | LBRACE STATEMENT BRACE
            | EXPR SEMICOLON
EXPR      ::= ID
            | NUMBER
            | ID LPAREN EXPRS RPAREN
...
</code></pre><p>Your lexer takes the input stream and produces a stream of tokens.  The stream of tokens is consumed by the parser to produce a parse tree.  In some cases, just knowing the <em>type</em> of the token is enough (e.g, LPAREN, RBRACE, FOR), but in some cases, you&#39;ll need the actual <em>value</em> that is associated with the token.  For instance, when you encounter an ID token, you&#39;ll want the actual characters that make up the ID later on when you&#39;re trying to figure out what identifier you&#39;re trying to reference.</p><p>So, you typically have something more or less like this:</p><pre><code>enum TokenType {
  NUMBER, ID, IF, LPAREN, RPAREN, ...;
}

class Token {
  TokenType type;
  String value;
}
</code></pre><p>So when the lexer returns a token, you know what type it is (which you need for the parsing), and the sequence of characters that it was generated from (which you&#39;ll need later on to interpret string and numeric literals, identifiers, etc.).  It might feel like you&#39;re returning two values, since you&#39;re returning a very simple aggregate type, but you really do need both parts. After all, you&#39;d want to treat the following programs differently:</p><pre><code>if (2 &gt; 0) {
  print(&#34;2 &gt; 0&#34;);
}
</code></pre><pre><code>if (0 &gt; 2) {
  print(&#34;0 &gt; 2&#34;);
}
</code></pre><p>These produce the same sequence of token <em>types</em>: IF, LPAREN, NUMBER, GREATER_THAN, NUMBER, RPAREN, LBRACE, ID, LPAREN, STRING, RPAREN, SEMICOLON, RBRACE.  That means they <em>parse</em> the same, too.  But when you&#39;re actually doing something with the parse tree, you&#39;ll care that the value of the first number is &#39;2&#39; (or &#39;0&#39;) and that the value of the second number is &#39;0&#39; (or &#39;2&#39;), and that the value of the string is &#39;2 &gt; 0&#39; (or &#39;0 &gt; 2&#39;).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../python-coming-up-with-tokens-for-a-lexer/'>Python &#8211; Coming up with tokens for a lexer</a></li><li class="list-group-item"><a href='../can-you-apply-the-same-lexer-rules-to-all-programming-languages/'>Can you apply the same lexer rules to all programming languages</a></li><li class="list-group-item"><a href='../should-a-lexer-un-escape-strings/'>Should a lexer un-escape strings</a></li><li class="list-group-item"><a href='../design-the-procedure-that-is-followed-when-writing-a-lexer-based-upon-a-grammar/'>Design &#8211;  the procedure that is followed when writing a lexer based upon a grammar</a></li><li class="list-group-item"><a href='../should-the-lexer-allow-what-is-obviously-a-syntax-error/'>Should the lexer allow what is obviously a syntax error</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>