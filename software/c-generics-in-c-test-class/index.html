<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Generics in C# Test Class &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075299 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075299" class="post-1075299 software type-software status-publish hentry category-software tag-c tag-generics"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Generics in C# Test Class</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">generics</span></p><div class="entry-content"><p>I&#39;m learning about unit testing in C#. <code>Languages_Service</code> and <code>PlaceOfWork_Service</code> are classes for SOAP services which Microsoft Navision generated for me. There are several methods that are very similar (see the two examples below).</p><pre><code>[TestMethod]
public void Languages()
{
    string serviceUrl = Helper.GetBaseUrl() + &#34;Languages&#34;;
    Languages_Service service = new Languages_Service();
    service.Credentials = Helper.GetCredentials();
    service.Url = serviceUrl;
    Languages_Filter[] filter = { new Languages_Filter() };
    service.ReadMultiple(filter, null, 0);
}
[TestMethod]
public void PlaceOfWork()
{
    string serviceUrl = Helper.GetBaseUrl() + &#34;PlaceOfWork&#34;;
    PlaceOfWork_Service service = new PlaceOfWork_Service();
    service.Credentials = Helper.GetCredentials();
    service.Url = serviceUrl;
    PlaceOfWork_Filter[] filter = { new PlaceOfWork_Filter() };
    service.ReadMultiple(filter, null, 0);
}
</code></pre><p>Method ReadMultiple of Language_Service looks like so:</p><pre><code>public Languages[] ReadMultiple([System.Xml.Serialization.XmlElementAttribute(&#34;filter&#34;)] Languages_Filter[] filter, string bookmarkKey, int setSize)
    {
        object[] results = this.Invoke(&#34;ReadMultiple&#34;, new object[] {
        filter,
        bookmarkKey,
        setSize});
     return ((Languages[])(results[0]));}
</code></pre><p>Method ReadMultiple of PlaceOfWork_Service looks like so:</p><pre><code>public PlaceOfWork[] ReadMultiple([System.Xml.Serialization.XmlElementAttribute(&#34;filter&#34;)] PlaceOfWork_Filter[] filter, string bookmarkKey, int setSize) {
        object[] results = this.Invoke(&#34;ReadMultiple&#34;, new object[] {
                    filter,
                    bookmarkKey,
                    setSize});
        return ((PlaceOfWork[])(results[0]));
    }
</code></pre><p>How could one write something like the (pseudo) code below?</p><pre><code>[TestMethod]
public void GunAndSmokeTestAllSerivces()
{
    Dictionary&lt;String, List&lt;Type&gt;&gt; servicesToTest = new Dictionary&lt;String, List&lt;Type&gt;&gt;();
    servicesToTest.Add(&#34;Languages&#34;, new List&lt;Type&gt;(new Type[] { typeof(Languages_Service), typeof(Languages_Filter) }));
    servicesToTest.Add(&#34;PlaceOfWork&#34;, new List&lt;Type&gt;(new Type[] { typeof(PlaceOfWork_Service), typeof(PlaceOfWork_Filter) }));
    foreach (KeyValuePair&lt;String, List&lt;Type&gt;&gt; entry in servicesToTest)
    {
        var t1 = entry.Value.ToArray()[0];
        var t2 = entry.Value.ToArray()[1];
        SoapHttpClientProtocol service = (SoapHttpClientProtocol)Activator.CreateInstance(t1);
        service.Credentials = Helper.GetCredentials();
        service.Url = Helper.GetBaseUrl() + entry.Key;
        object[] filter = { (object)Activator.CreateInstance(t2) };
        service.ReadMultiple(filter, null, 0);
    }
}
</code></pre><p><code>Languages_Service</code> and <code>PlaceOfWork_Service</code> are subclasses of <code>System.Web.Services.Protocols.SoapHttpClientProtocol</code>.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You probably don&#39;t want to do exactly what you describe because then you&#39;d have a single test method covering multiple test cases. This isn&#39;t great because it means your tests lose granularity, so:-</p><ul><li>It becomes unclear when a test fails where exactly the bug may lie, e.g. which `Service.</li><li>There&#39;s a greater risk of one reason for failure <em>masking</em> another. i.e. there are actually multiple bugs, but because the test fails after the first one, you&#39;re not aware of the rest.</li></ul><hr/><p>A simpler and probably more applicable solution is just to do what you normally do when there&#39;s repeated code like this- pull it out into a parameterized method:</p><pre><code>private void Test&lt;TService,TFilter&gt;(string urlSuffix) 
    where TService : SoapHttpClientProtocol, new() 
    where TFilter : new() 
{
    string serviceUrl = Helper.GetBaseUrl() + urlSuffix;
    TService service = new TService();
    service.Credentials = Helper.GetCredentials();
    service.Url = serviceUrl;
    TFilter[] filter = { new TFilter() };
    service.ReadMultiple(filter, null, 0);
}

[TestMethod]
public void PlaceOfWork()
{
    Test&lt;PlaceOfWork_Service,PlaceOfWork_Filter&gt;(&#34;PlaceOfWork&#34;);
}
</code></pre><p>That&#39;s the basic version, just to give you a rough idea. As the comments said this seems incomplete without assertions, and there may be better ways to split this into multiple methods. You should also come up with better names based on your understanding of what exactly these tests are for.</p><p>A few issues to take note of:</p><ul><li>This won&#39;t work out of the box because <code>ReadMultiple</code> isn&#39;t a method on <code>SoapHttpClientProtocol</code>. You&#39;ll need a superclass or interface with this method, and have that as a constraint on your <code>TService</code> generic parameter.</li><li>Likewise, <code>TFilter</code> may need some similar constraint</li><li>If the above two prove to be a problem, you could leave your individual test methods in charge of calling that <code>ReadMultiple</code> line, or they could provide an <code>Action&lt;TService,TFilter[]&gt;</code> or similar</li><li>If you can&#39;t actually keep to that <code>new()</code> constraint, you&#39;ll instead want to remove it and have a <code>TService</code> parameter on the method, and leave the individual test in charge of doing the construction.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/c-the-point-of-properties/'>C# &#8211;  the point of properties</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-protecting-the-uninitiated-developer-from-generics/'>C# &#8211; Protecting the uninitiated (developer) from generics</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-what-problems-can-be-solved-using-generics/'>C# &#8211; What problems can be solved using Generics</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-how-are-generics-implemented/'>C# &#8211; How are generics implemented</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-web-api-architecture-design/'>C# &#8211; Web API architecture design</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-generics-list-without-generics/'>Java &#8211; Generics list without generics</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-generics-how-to-avoid-redundant-method/'>C# Generics &#8211; How to avoid redundant method</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>