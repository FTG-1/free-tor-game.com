<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Stateless Web Applications Defeat DBContext Somehow &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084783 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084783" class="post-1084783 software type-software status-publish hentry category-software tag-asp-net-mvc tag-c tag-entity-framework"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Stateless Web Applications Defeat DBContext Somehow</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">asp.net-mvc</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">entity-framework</span></p><div class="entry-content"><p>In Entity Framework, the <strong>DBContext</strong> class is said to implement the unit-of-work pattern. As I interpret this, it means that if you make a <strong>DBContext</strong>, manipulate its data, and then dispose of it, then these manipulations will either all succeed together or all fail together, and get rolled back. Moreover, there is the potential for a performance benefit, as the underlying infrastructure gets to see everything you&#39;re doing at once, and do things like combine operations. This instantiate/manipulate/dispose sequence would typically comprise a <strong>using</strong> block in most C# code.</p><p>This all seems eminently logical, but when I try to read about <strong>DBContext</strong> as it performs in an ASP.NET MVC application, I run into statements I just don&#39;t quite get, e.g.:</p><p><em>&#34;<strong>DBContext</strong> relies on several managed features and flags that keep track of changes in items that have been queried from the datastore&#8230; [t]he stateless nature of ASP.NET MVC prevents the default functionality of Entity Framework from working, however.&#34;</em></p><p>(<em>Developing ASP.NET MVC 4 Web Applications, Exam Reference 70-486</em> by William Penberthy, Microsoft, 2013, p. 5)</p><p>I&#39;d really like some more specifics about this supposed breakdown in the &#34;default functionality of Entity Framework&#34;. Am I to understand that if I build a <strong>using</strong> block around a <strong>DBContext</strong> and some manipulations thereon, say, in a controller method, then a trip through this using block no longer comprises a single unit-of-work? Can I no longer expect each set of manipulations to either get committed as a whole unit or rolled back as a whole unit under ASP.NET MVC?</p><p>Or, alternately, does the breakdown in the &#34;default functionality of Entity Framework&#34; relate solely to the performance benefits obtainable from the use of a <strong>DBContext</strong>? I guess one possible interpretation of the statement I&#39;m asking about is just that multiple, concurrent requests (e.g. to my example controller method) won&#39;t have their database manipulations combined for increased performance.</p><p>For example, if 999 people update a single column of the same row in a database, in quick succession, then all of these updates will end up happening individually&#8230; which is something I wouldn&#39;t have thought required mentioning. It certainly doesn&#39;t mean that <strong>using</strong> blocks build around a <strong>DBContext</strong> work any differently in ASP.NET MVC.</p><p>In any case, if you understand the statement I quoted better than I do, then I would appreciate your help in understanding it.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The problem amounts to maintaining server state in an application environment that is stateless by design.</p><p>Consider what happens when you implement a shopping cart.  Shopping carts involve several steps: you must choose the items you want (usually one at a time while looking at product pages), put in your address, select the shipping type, supply a method of payment, and finalize the order.</p><p>Each page that you submit to the server during this process is essentially a complete transaction.  REST architecture assumes that, once the request/response cycle is complete, there&#39;s nothing left to do.</p><p>To track progress on a shopping cart using a DBContext, one would have to open a DBContext, say, whenever the user puts their first item into the shopping cart.  The problem is, where do you hold this object open?  DBContexts are normally closed when the page is submitted.  What happens if several users open shopping carts?  Now I have to keep track of all those DBContexts.  What happens if someone abandons a shopping cart?</p><p>What we&#39;re really talking about are SESSIONS.  Martin Fowler talks extensively about SESSION state in his P of EAA book, including whether to store SESSION state on the server or the client, and the advantages and disadvantages of each approach.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../mvc-pattern-viewmodels-location-of-conversion/'>MVC Pattern, ViewModels, Location of conversion</a></li><li class="list-group-item"><a href='../c-separating-data-access-in-asp-net-mvc/'>C# &#8211; Separating data access in ASP.NET MVC</a></li><li class="list-group-item"><a href='../c-deferred-execution-of-dispose-for-idisposable-objects/'>C# &#8211; Deferred execution of Dispose for IDisposable objects</a></li><li class="list-group-item"><a href='../unit-testing-can-not-understand-how-dependency-injection-can-ease-testing-inside-asp-net-mvc/'>Unit-testing &#8211; Can not understand how dependency injection can ease testing inside asp.net MVC</a></li><li class="list-group-item"><a href='../c-dependency-inject-dbcontext-into-mvc-controller/'>C# &#8211; Dependency Inject DbContext into MVC Controller</a></li><li class="list-group-item"><a href='../avoiding-repository-pattern-implementing-onion-architecture-with-dbcontext-only/'>Avoiding Repository pattern &#8211; implementing Onion Architecture with DbContext only</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>