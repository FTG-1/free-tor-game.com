<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; What&#8217;s the best way to cache a growing database table for html generation &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078766 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078766" class="post-1078766 software type-software status-publish hentry category-software tag-caching tag-database tag-web-development"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; What&#8217;s the best way to cache a growing database table for html generation</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">caching</span><span class="mr-2 badge badge-info">database</span><span class="mr-2 badge badge-warning">web-development</span></p><div class="entry-content"><p>I&#39;ve got a database table which will grow in size by about 5000 rows a hour.  For a key that I would be querying by, the query will grow in size by about 1 row every hour.  I would like a web page to show the latest rows for a key, 50 at a time (this is configurable).  I would like to try and implement memcache to keep database activity low for reads.</p><p>If I run a query and create a cache result for each page of 50 results, that would work until a new entry is added.  At that time, the page of latest results gets new result and the oldest results drops off.  This cascades down the list of cached pages causing me to update every cache result.  It seems like a poor design.</p><p>I could build the cache pages backwards, then for each page requested I should get the latest 2 pages and truncate to the proper length of 50.  I&#39;m not sure if this is good or bad?</p><p>Ideally, the mechanism I use to insert a new row would also know how to invalidate the proper cache results.</p><p>Has someone already solved this problem in a widely acceptable way?  What&#39;s the best method of doing this?</p><p>EDIT:</p><p>If my understanding of the MYSQL query cache is correct, it has <a href="http://www.mysqlperformanceblog.com/2006/07/27/mysql-query-cache/" rel="nofollow">table level granularity in invalidation</a>.  Given the fact that I have about 5000 updates before a query on a key should need to be invalidated, it seems that the database query cache would not be used.  MS SQL caches execution plans and frequently accessed data pages, so it may do better in this scenario.</p><p>My query is not against a single table with TOP N.  One version has joins to several tables and another has sub-selects.</p><p>Also, since I want to cache the html generated table, I&#39;m wondering if a cache at the web server level would be appropriate?  Is there really no benefit to any type of caching?  Is the best advice really to just allow a website site query to go through all the layers and hit the database every request?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Unless I&#39;m misunderstanding the question, I don&#39;t think that this is an appropriate scenario for caching.</p><p>Cached data normally has at least one of the following attributes (usually all of them):</p><ul><li>Expensive to retrieve or compute;</li><li>Highly static - may change occasionally but very rarely;</li><li>Non-critical - OK if the requester sees stale data.</li></ul><p>It doesn&#39;t sound like <em>any</em> of these apply to your situation.</p><ul><li>The query is a simple <code>SELECT</code>, probably <code>TOP N</code>, just an index seek;</li><li>It changes very frequently;</li><li>Your requirements indicate that immediate updates are required.</li></ul><p>So why are you caching?  Caching isn&#39;t a panacea; oftentimes it can actually make performance worse, if the cache memory could be better used for some other purpose.</p><p>Databases do their own caching.  As long as the DB server has plenty of memory then it may cache the entire table in memory if it&#39;s frequently queried; the performance of that will be just as good as your cache if not better.</p><p>Some further thoughts/suggestions:</p><ul><li><p>If stale data is OK, then the simplest solution would be to use a fixed interval (i.e. expiration).  This method is used very effectively in hundreds of thousands of sites and systems.  You can either force an update on expiration or just wait until it&#39;s requested again.</p></li><li><p>If you&#39;re concerned about conflicts between reads and writes, then (a) don&#39;t be, until you&#39;ve profiled it, and (b) if it really is an issue then instead of trying to cache it, just use a redundant table or a <code>NOLOCK</code> hint.</p></li></ul><p>If you need to invalidate the cache every single time a row is added/changed then you have completely defeated the purpose of an application cache, and are now trying to implement an in-memory database.  Please don&#39;t do this unless you have an extremely good reason for it.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-best-way-to-model-a-singleton-in-a-relational-database/'>Database &#8211; Best way to model a singleton in a relational database</a></li><li class="list-group-item"><a href='../database-the-best-approach-for-database-design-with-lots-of-columns/'>Database &#8211;  the best approach for database design with lots of columns</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>