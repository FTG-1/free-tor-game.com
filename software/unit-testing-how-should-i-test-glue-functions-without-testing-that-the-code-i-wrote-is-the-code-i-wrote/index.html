<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; How should I test &#8220;Glue Functions&#8221; without testing that &#8220;the code I wrote is the code I wrote&#8221; &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070265 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070265" class="post-1070265 software type-software status-publish hentry category-software tag-dry tag-tdd tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; How should I test &#8220;Glue Functions&#8221; without testing that &#8220;the code I wrote is the code I wrote&#8221;</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">dry</span><span class="mr-2 badge badge-info">tdd</span><span class="mr-2 badge badge-warning">unit testing</span></p><div class="entry-content"><p>I usually write my code in a test driven style. I write tests as specifications and then my code. It&#39;s great and useful.</p><p>I always try to ignore implementation when testing and only test behaviour. I don&#39;t care how it gets done, just that it got done. I find this especially easy for functional programming.</p><p>Now here is the problem I have found. I have an app that is written in a functional style. All of the unit tests are nice, clean, behavioural tests. I only ever check output and don&#39;t do things like &#34;did you call this function?&#34;.</p><p>At some point however, I start needing &#34;glue&#34; functions. I&#39;ll consider these functions that don&#39;t introduce a lot of functionality and largely just call my other existing functions. Perhaps chaining a bunch together or whatever feature it may be.</p><p>How do I test these glue functions?</p><p>I ask because I want to avoid two main things as much as possible:</p><ul><li>I don&#39;t want to test them by simply mocking what they do and seeing if specific functions were called.</li><li>They have a desired output I want, but usually this output is just a series of outputs from other functions that are already tested. I don&#39;t want to repeat myself and just &#34;re-test&#34; those inner functions to see if my glue function called them.</li></ul><p>Hopefully that makes sense. Here is an example (written in pseudo code):</p><pre><code>func1 (x) =&gt; x + 1;
func2 (x) =&gt; x * 2;

glue (x) =&gt; [func1(x), func2(x)];
</code></pre><p>Here would be a simple way of testing these functions.</p><pre><code>testFunc1 () =&gt; expect func1(2) == 3;
testFunc2 () =&gt; expect func1(2) == 4;

testGlue () =&gt; expect glue(2) == [3, 4];
</code></pre><p>So obviously, <code>glue</code> has an expected and predictable behaviour I want to model. I know that in this example these tests might be ok. So consider instead that the outputs of <code>func1</code> and <code>func2</code> are not simple numbers but much more complicated objects.</p><p>In such a case, implementing the checks that <code>glue</code> output the correct objects would be tedious AND it would be totally duplicated from the individual tests of <code>func1</code> and <code>func2</code>. This also leads into the next issue.</p><p>Instead consider:</p><pre><code>testGlue () =&gt; expect glue(2) == [func1(2), func2(2)];
</code></pre><p>This certainly seems better. But I think it is still flawed. While this means I am not repeating my test code it now instead &#34;tests that the code you wrote is the code you wrote&#34; (as opposed to what the behaviour is). Again, in such a small example it&#39;s not an issue so pretend that within <code>glue</code> a few variables are swapped around and yada yada is done so that to test it in this way would require my test to also set up the variables like such. Then we would be basically copying the code from the function to check if <code>func1</code> and <code>func2</code> were called with the correct variables leading to repetition and testing that &#34;it&#39;s the code you wrote&#34;.</p><p>If a larger example is needed to showcase such results just let me know and I will get one. Hopefully there is some good discussion to be had here.</p><p>I anticipate someone to answer &#34;don&#39;t use glue functions&#34; and to that I preemptively ask, &#34;what&#39;s the alternative method?&#34;.</p><p>EDIT:</p><p>So I am beginning to think that an alternate question that would also give me the answer I want is this.</p><p>Consider that the output of <code>func1</code> and <code>func2</code> is something too big to feasibly have as a hardcoded value in the test. Maybe it&#39;s an object or something.</p><p>Does writing my test of <code>glue</code> as:</p><pre><code>testGlue () =&gt; expect glue(2) == [func1(2), func2(2)];
</code></pre><p>No hold on, I must clarify something. Obviously the above test is absolutely stupid. It is just &#34;the code I wrote is the code I wrote&#34;.<br /> We MUST imagine that the function does more than this. In a real world scenario <code>glue</code> would do some processing of <code>x</code> before passing it around. The order of the array might matter. And however many other options. So maybe I&#39;m checking that <code>glue(2)[0] = func1(3)</code> instead (pretend there is further processing to it).</p><p>In such a case, is it still considered bad practice to use the output of a function as something to test against (even though that function is tested somewhere else)?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Boring structural code doesn’t need isolated testing.</p><p>Test interesting code. That code has a behavior. Nail down the behavior you expect and not only will your code likely be correct, it’ll be easier to read.</p><p>But keep that interesting code away from the boring structural code. Do that and I’ll be able to read it and trust it without a test that isolates it.</p><p>Now if the boring structural code is part of a chain of integrated peripherals and behavior objects then fine, throw an integration test at it. If you’d like to test if I’m full of it, break the structural code and see how long it takes someone to find the problem.</p><p>Don’t waste time solving non problems. At best you’re only amusing yourself. At worst you’re actually making it harder to refactor the code.</p><p>Remember: it’s not that every function needs a test. It’s every behavior.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-how-should-i-test-randomness/'>Unit-testing &#8211; How should I test randomness</a></li><li class="list-group-item"><a href='../unit-testing-how-to-pick-the-testing-values-for-parameterized-tests-for-stateless-functions/'>Unit-testing &#8211; How to pick the testing values for parameterized tests for stateless functions</a></li><li class="list-group-item"><a href='../how-to-handle-test-with-initialising-functions-that-call-mocked-functions/'>How to handle test with initialising functions that call mocked functions</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>