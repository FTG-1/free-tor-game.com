<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; APIs and functional programming &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1077102 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1077102" class="post-1077102 software type-software status-publish hentry category-software tag-architecture tag-functional-programming tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; APIs and functional programming</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">functional programming</span><span class="mr-2 badge badge-warning">object-oriented</span></p><div class="entry-content"><p>From my (admittedly limited) exposure to functional programming languages, such as Clojure, it seems that encapsulation of data has a less important role. Usually various native types such as maps or sets are the preferred currency of representing data, over objects. Furthermore, that data is generally immutable.</p><p>For example, here&#39;s one of the more famous quotes from Rich Hickey of Clojure fame, in an <a href="http://codequarterly.com/2011/rich-hickey/" rel="noreferrer">interview about the matter</a>:</p><blockquote><p>Fogus: Following that idea—some people are surprised by the fact that Clojure does not engage in data-hiding encapsulation on its types. Why did you decide to forgo data-hiding?</p><p>Hickey: Let’s be clear that Clojure strongly emphasizes programming to abstractions. At some point though, someone is going to need to have access to the data. And if you have a notion of “private”, you need corresponding notions of privilege and trust. And that adds a whole ton of complexity and little value, creates rigidity in a system, and often forces things to live in places they shouldn’t. This is in addition to the other losing that occurs when simple information is put into classes. To the extent the data is immutable, there is little harm that can come of providing access, other than that someone could come to depend upon something that might change. Well, okay, people do that all the time in real life, and when things change, they adapt. And if they are rational, they know when they make a decision based upon something that can change that they might in the future need to adapt. So, it’s a risk management decision, one I think programmers should be free to make. If people don’t have the sensibilities to desire to program to abstractions and to be wary of marrying implementation details, then they are never going to be good programmers.</p></blockquote><p>Coming from the OO world, this seems to complicate some of the enshrined principles I&#39;ve learned over the years. These include Information Hiding, the Law of Demeter and Uniform Access Principle, to name a few. The common thread being that encapsulation allows us to define an API for others to know what they should and shouldn&#39;t touch. In essence, creating a contract that allows for the maintainer of some code to freely make changes and refactorings without worrying about how it might introduce bugs into the consumer&#39;s code (Open/Closed principle). It also provides a clean, curated interface for other programmers to know which tools they can use to get at or build upon that data.</p><p>When the data is allowed to be directly accessed, that API contract is broken and all those encapsulation benefits seem to go away. Also, strictly immutable data seems to make passing around domain-specific structures (objects, structs, records) much less useful in the sense of representing a state and the set of actions that can be performed on that state.</p><p>How do functional codebases address these issues that seem to come up when the size of a codebase grows enormous such that APIs need to be defined and lots of developers are involved on working with specific parts of the system? Are there examples of this situation available that demonstrate how this is handled in these type of codebases?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>First of all, I&#39;m going to second Sebastian&#39;s comments on what is functional proper, what is dynamic typing.  More generally, Clojure is <em>one flavor</em> of functional language and community, and you shouldn&#39;t generalize too much based on it.  I&#39;ll make some remarks from more of an ML/Haskell perspective.</p><p>As Basile mentions, the concept of access control does exist in ML/Haskell, and is often used.  The &#34;factoring&#34; is a bit different from conventional OOP languages; in OOP the concept of a <em>class</em> plays simultaneously the role of <em>type</em> and <em>module</em>, whereas functional (and traditional procedural) languages treat these orthogonally.</p><p>Another point is that ML/Haskell are very heavy on generics with type erasure, and that this can be used to provide a different flavor of &#34;information hiding&#34; than OOP encapsulation.  When a component only knows the type of a data item as a type parameter, that component can be safely handed values of that type, and yet it will be prevented from doing much with them because it doesn&#39;t know and cannot know their concrete type (there&#39;s no universal <code>instanceof</code> or runtime casting in these languages). <a href="http://blog.malde.org/posts/polymorphic-types-are-safer.html" rel="nofollow">This blog entry</a> is one of my favorite introductory examples to these techniques.</p><p>Next: in the FP world it&#39;s very common to use transparent data structures as interfaces to opaque/encapsulated components.  For example, interpreter patterns are very common in FP, where data structures are used as syntax trees that describe logic, and fed to code that &#34;executes&#34; them.  State, properly said, then exists ephemerally when the interpreter runs that consumes the data structures.  Also the interpreter&#39;s implementation can change as long as it still communicates with the clients in terms of the same data types.</p><p>Last and longest: encapsulation/information hiding is a <strong>technique</strong>, not an end.  Let&#39;s think a bit about what it provides.  Encapsulation is a technique for reconciling the <em>contract</em> and the <em>implementation</em> of a software unit.  The typical situation is this: the system&#39;s implementation admits of values or states that, according to its contract, should not exist.</p><p>Once you look at it this way, we can point out that FP provides, in addition to encapsulation, a number of additional tools that can be used to the same end:</p><ol><li>Immutability as the pervasive default.  You can hand transparent data values to third party code.  They cannot modify them and put them into invalid states.  (Karl&#39;s answer makes this point.)</li><li>Sophisticated type systems with algebraic data types that allow you to finely control the structure of your types, without writing lots of code.  By judiciously using these facilities you can often design types where &#34;bad states&#34; are just impossible.  (Slogan: <a href="http://fsharpforfunandprofit.com/posts/designing-with-types-making-illegal-states-unrepresentable/" rel="nofollow">&#34;Make illegal states unrepresentable.&#34;</a>)  Instead of using encapsulation to indirectly control the set of admissible states of a class, I&#39;d rather just tell the compiler what those are and have it guarantee them for me!</li><li>Interpreter pattern, as mentioned already.  One key to designing a good abstract syntax tree type is to:<ul><li>Try and design the abstract syntax tree data type so that all values are &#34;valid.&#34;</li><li>Failing that, make the interpreter explicitly detect invalid combinations and cleanly reject them.</li></ul></li></ol><p><a href="http://fsharpforfunandprofit.com/posts/designing-with-types-intro/" rel="nofollow">This F# &#34;Designing with types&#34; series</a> makes for pretty decent reading on some of these topics, particularly #2.  (It&#39;s where the &#34;make illegal states unrepresentable&#34; link from above comes from.)  If you look closely, you&#39;ll note that in the second part they demonstrate how to use encapsulation to hide constructors and prevent clients from constructing invalid instances.  As I said above, it <em>is</em> part of the toolkit!</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-how-would-functional-programming-proponents-answer-this-statement-in-code-complete/'>Object-oriented &#8211; How would Functional Programming proponents answer this statement in Code Complete</a></li><li class="list-group-item"><a href='../object-oriented-how-are-entities-with-an-identity-and-a-mutable-persistent-state-modelled-in-a-functional-programming-language/'>Object-oriented &#8211; How are entities with an identity and a mutable persistent state modelled in a functional programming language</a></li><li class="list-group-item"><a href='../object-oriented-does-functional-programming-ign/'>Object-oriented &#8211; Does functional programming ignore the benefits gained from the &#8220;On the Criteria To Be Used in Decomposing Systems into Modules&#8221; (data hiding)</a></li><li class="list-group-item"><a href='../object-oriented-return-considered-harmful-can-code-be-functional-without-it/'>Object-oriented &#8211; Return considered harmful? Can code be functional without it</a></li><li class="list-group-item"><a href='../object-oriented-do-you-need-to-think-about-encapsulation-if-you-can-ensure-immutability/'>Object-oriented &#8211; Do you need to think about encapsulation if you can ensure immutability</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>