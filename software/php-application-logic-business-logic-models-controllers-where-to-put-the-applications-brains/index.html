<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; application logic, business logic, models, controllers &#8211; where to put the application&#8217;s brains &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1074570 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1074570" class="post-1074570 software type-software status-publish hentry category-software tag-class tag-mvc tag-php"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; application logic, business logic, models, controllers &#8211; where to put the application&#8217;s brains</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">class</span><span class="mr-2 badge badge-info">mvc</span><span class="mr-2 badge badge-warning">PHP</span></p><div class="entry-content"><p>I&#39;m trying to wrap my head around models, views, and controllers, but I feel as though the more I read, the more conflicting information I seem to encounter. I guess the general goal is&#8211;as far as I&#39;ve seen&#8211;to shoot for fat models and thin controllers, but I&#39;m still a bit baffled by where to put what. Can I give an example from something I&#39;m working on?</p><p>This is just a personal project that I&#39;m messing about with in PHP for fun&#8211;a mini-game of sorts. Adding timed tasks to an itinerary and collecting rewards when the task completes. So a class kind of like this exists:</p><pre><code>class ItineraryEntry {
    public $user_id;
    public $task_id;
    public $completion_time;
}
</code></pre><p>And another class like this:</p><pre><code>class Task {
    public $task_id;
    public $description;
    public $duration; //in seconds
}
</code></pre><p>So in the user interface, the user sees a task description and clicks something like &#34;Add to Itinerary&#34;. Now if I&#39;m understanding correctly, the controller needs to pick up that request and do something with it. But&#8230;how much? So for example, I need to figure out when the task will complete. Keeping it simple, that&#39;s merely time() + the duration of the task. So does the controller do that calculation and then give it to the model to validate, or does the model just handle all of it? And the controller is really just a glorified router of data?</p><p>Then the second part is what happens when an itinerary task completes. So from the user interface, a task will show as completed if the completion time is in the past, and the user will have to click something like, &#34;Claim Rewards&#34;. Let&#39;s just say it&#39;s&#8230;I don&#39;t know&#8230;XP (i.e., experience points)&#8211;something that gets updated on the user&#39;s account. And let&#39;s say that the amount of XP is calculated in some way based upon the difficulty of the task, time required, etc.</p><p>So where would I put that calculation? Is that inside the model class for my user object, or do I have a controller that figures all of that out and then sends it to the user object? In the model for my itinerary entry model? And the reason I ask this specifically is because any kind of Claim Rewards code would have to do a couple of things at least:</p><ol><li>Actually claim the reward and update the user&#39;s account</li><li>Clean up the expired task from the database (or marking it completed or something)</li></ol><p>So it would be interacting both with the user and the itinerary entry.</p><p>A little specific guidance would be really helpful. My brain is starting to hurt from reading all of these explanations that are kind of like what I need to know, but not totally. So thanks in advance!</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>MVC can mean a <em>lot</em> of different things, and the right answer probably looks like, &#34;Whatever works with my framework and whatever else I am using or doing.&#34;</p><p>This is a topic where understanding history helps you understand why people do things the way they do them, what it means, and how the idea could evolve in the future.  The last is important - if you can figure out how people will do things in 5 years, in 5 years you can have 5 years more experience doing it &#34;the modern way&#34; than anyone else!  For a full version of the history, see <a href="http://c2.com/cgi/wiki?ModelViewControllerHistory">http://c2.com/cgi/wiki?ModelViewControllerHistory</a>.</p><p>Here is a summary.  Originally MVC appeared for interactive applications.  (I know this seems like a diversion, but this will matter.)  Every single interactive component - every dropdown, etc, had its own model, view and controller.  The job of all three was well defined.  The Controller would have a set of possible events that could happen (someone clicked a mouse, pressed a key, another controller passed a message saying do something) that it was supposed to take care of.  In turn it knew about a view and a model.  The view knew how to draw itself (you were told to scroll down, select item #3, etc).  And the model was in charge of the data that determined what was in the view (eg list of entries for a dropdown).  Very, very granular.  Lots of components.  Lots of dynamic interactions.</p><p>MVC is still used this way for interactive applications.</p><hr/><p>Then the web came along.  One thing programmers do when they move to a new domain is try to carry along existing patterns.  MVC was a proven one.  In the context of the web, the only event of interest is &#34;request page X&#34;.  Suppose that is a page where a user can edit their information.  There is going to be a data model associated with it.  Think &#34;User object, with these fields&#34;.  There is going to be a view.  Think, &#34;Template for how to show the user.&#34;  You can even have different views for the same object - if I look at your home page I am allowed to see different information than you are.</p><p>So far, so good.  Where is the problem?  There are many.  Here is a short list.</p><ol><li>Generating a dynamic web page is usually much more complex than handling a click of a button in an interactive application.  Therefore each of the three components is doing a more complex thing than they would in the application case.</li><li>It is unclear to people what belongs where.  The same code can go in the model, view, and controller, and it is not immediately obvious that it matters where it lives.  But random things tend to be particularly easy to insert into the controller.</li><li>Complex web pages include multiple things that want data models - for example a form, a sidebar, ads, and so on.  How do you represent that?</li><li>Over a website you generally have many views, but you want to maintain a consistent view across them.  How do you structure your views to allow this, while making them make sense for designers who are not programmers?</li><li>Over time we&#39;re moving towards richer and more complex interactive pages, with tricks like AJAX.  How do you shoehorn this into a per-page mentality that is natural when handling http requests?</li></ol><p>And so on.</p><p>There are a lot of possible solutions to these, with different tradeoffs.  In general if you use a framework, and try to solve things the way the framework expects, things work well.  If not, well, then things get challenging.  Hence my advice above to do whatever works with your framework.</p><hr/><p>But there are general principles.</p><p>Since controllers have a complex job to do, and are easy to insert additional logic into, the natural progression of code over time is that everything winds up in the all-knowing controller.  Single large interacting blocks of code tend to not scale well.  So you want to keep everything that can be kept out of the controller, out of the controller.  (Some frameworks make things even simpler by splitting up controllers recursively!)</p><p>Business logic almost always belongs in the model.  If you&#39;ve got a database and an Object Relational Mapper, it is easy to structure models for simple applications as fairly straightforward layers over database tables.  This is a popular design.</p><p>The view usually winds up being some sort of template system.  How to handle commonalities is up to your template system.  Understand the system you use, try to work within it.</p><hr/><p>You&#39;re a self-admitted beginner.  I would highly recommend picking a framework, following advised best practices for said framework (even if you later decide they are not best, organizing code like your framework expects tends to be a path of least unexpected surprises), and getting practice with simple applications before tackling anything more complex.  I highly, highly, highly recommend this - before trying to run, make sure that you&#39;re good at walking.</p><p>But as you walk, come back to this post, look at the list of pain points I gave above, think about your did or didn&#39;t hit them, and how you could handle them within what you built.  This type of deliberate &#34;how would I?&#34; self-reflection is a critical part of improving.  As I say, those are known pain points that come up across many different frameworks and I don&#39;t think that we&#39;ve found the best way to handle them yet.</p><hr/><p>If I had to guess where we&#39;ll go, what do I think?</p><p>My belief is that as web pages get more interactive, they are becoming more like existing interactive applications.  (Have you used gmail with keyboard shortcuts recently?)  The more that they become interactive applications, the more that it makes sense to use MVC in JavaScript in the way that it is used in interactive applications.  The more complex your front end becomes, the more it makes sense to have the html that delivers that being delivered by code which is structured the same way that the code you are generating is being delivered.</p><p>If so, then we should (indeed I believe already are) see front end web pages that have many controllers, many models, and many views which can interact.  These will eventually be pushed back to the server which will be expected to generate those parts of the page with similar granularity (albeit with the ability to pass information around so that the JavaScript library that enables X is actually loaded in the appropriate part of the page for that).</p><p>I think this in part because I have worked with a proprietary system that was structured this way.  It was interesting.  There were many controllers, views and models.  However the controllers turned into data structures with some data inheritance to handle commonalities, the views into simple templates, and the models were parametrized by information from the controller.  The concerns were so well separated that we were able to put the three into three different languages (Perl models, YAML controllers, TT templates).  We were able to do things like completely rewrite the back end to the website (literally different pages, accessed in a different order, that were hitting different services) while managing to reuse, unchanged, most of the front end.</p><p>It was clear to me that that implementation was not exactly the right way to do it.  But I think those ideas will be rediscovered multiple times, and over the next decade I think that is the direction that a lot of people will head.</p><hr/><p>If this sounds likely to you, and you like front end work, then after getting some simple sites working in whatever server language you want (from the sounds of it PHP, though I personally would prefer anything else), I&#39;d suggest learning JavaScript, picking up a popular MVC framework like <a href="http://angularjs.org/">http://angularjs.org/</a>, and trying to write interactive applications using it.  Pay close attention to what works and doesn&#39;t, make your own theories, experiment, get feedback, and you&#39;ll be likely to be ahead of the future when the future arrives.</p><hr/><p>(How did this answer get so long?  Oh well, it is written, might as well post it.)</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../mvc-where-should-user-permission-checks-take-place-in-and-mvc-and-by-who/'>Mvc &#8211; Where should user permission checks take place in and MVC and by who</a></li><li class="list-group-item"><a href='../object-oriented-project-structure-where-to-put-business-logic/'>Object-oriented &#8211; Project structure: where to put business logic</a></li><li class="list-group-item"><a href='../mvc-sharing-code-logic-between-controllers-through-the-model-layer/'>Mvc &#8211; Sharing code logic between controllers, through the Model layer</a></li><li class="list-group-item"><a href='../java-using-mvc-style-where-is-the-best-place-to-put-sql-functionality/'>Java &#8211; Using MVC style, where is the best place to put SQL functionality</a></li><li class="list-group-item"><a href='../mvc-in-mvc-soa-architecture-what-is-the-rationale-for-placing-business-logic-in-models/'>Mvc &#8211; In MVC + SOA Architecture, What is the Rationale for Placing Business Logic in Models</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>