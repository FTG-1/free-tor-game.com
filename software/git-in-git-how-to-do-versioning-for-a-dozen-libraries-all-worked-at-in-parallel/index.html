<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Git &#8211; In git, how to do versioning for a dozen libraries all worked at in parallel &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1074905 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1074905" class="post-1074905 software type-software status-publish hentry category-software tag-branching tag-dependencies tag-git tag-scm tag-tagging"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Git &#8211; In git, how to do versioning for a dozen libraries all worked at in parallel</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">branching</span><span class="mr-2 badge badge-info">dependencies</span><span class="mr-2 badge badge-warning">git</span><span class="mr-2 badge badge-primary">scm</span><span class="mr-2 badge badge-danger">tagging</span></p><div class="entry-content"><p>We are doing projects, but we reuse a lot of code between the projects and have lots of libraries that contain our common code. As we implement new projects we find more ways to factor out common code and put it into libraries. The libraries depend on each other, and the projects depend on the libraries. Each project, and all libraries used in that project, need to use the same version of all the libraries they are referring to. If we release a piece of software we will have to fix bugs and maybe add new features for many years, sometimes for decades. We have about a dozen libraries, changes often cut across more than two, and several teams work on several projects in parallel, making concurrent changes to all these libraries.</p><p>We have recently switched to git and set up repositories for each library and each project. We use stash as a common repository, do new stuff on feature branches, then make pull requests and merge them only after review.</p><p>Many of the issues we have to deal with in projects requires us to do changes across several libraries and the project&#39;s specific code. These often include changes of library interfaces, some of which are incompatible. (If you think this sounds fishy: We interface with hardware, and hide specific hardware behind generic interfaces. Almost each time we integrate some other vendor&#39;s hardware we run into cases our current interfaces did not anticipate, and so have to refine them.) For example, imagine a project <code>P1</code> using the libraries <code>L1</code>, <code>L2</code>, and <code>L3</code>. <code>L1</code> also uses <code>L2</code> and <code>L3</code>, and <code>L2</code> uses <code>L3</code> as well. The dependency graph looks like this:</p><pre><code>   &lt;-------L1&lt;--+
P1 &lt;----+  ^    |
   &lt;-+  |  |    |
     |  +--L2   |
     |     ^    |
     |     |    |
     +-----L3---+
</code></pre><p>Now imagine a feature for this project requires changes in <code>P1</code> and <code>L3</code> which change the interface of <code>L3</code>. Now add projects <code>P2</code> and <code>P3</code> into the mix, which also refer to these libraries. We cannot afford to switch them all to the new interface, run all the tests, and deploy the new software. So what&#39;s the alternative?</p><ol><li>implement the new interface in <code>L3</code></li><li>make a pull request for <code>L3</code> and wait for the review</li><li>merge the change</li><li>create a new release of <code>L3</code></li><li>start working on the feature in <code>P1</code> by making it refer to <code>L3</code>&#39;s new release, then implement the feature on <code>P1</code>&#39;s feature branch</li><li>make a pull request, have this reviewed, and merged</li></ol><p>(I just noticed that I forgot to switch <code>L1</code> and <code>L2</code> to the new release. And I don&#39;t even know where to stick this in, because it would need to be done in parallel with <code>P1</code>&#8230;)</p><p>This is a tedious, error-prone, and very long process to implement this feature, it requires to independent reviews (which makes it much harder to review), does not scale at all, and is likely to put us out of business because we get so bogged down in process we never get anything done.</p><p>But how do we employ branching and tagging in order to create a process that allows us to implement new features in new projects without too much overhead?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Kind of putting out the obvious here, but maybe worth to mention it.</p><p>Usually, git repos are tailored per lib/project because they tend to be independent. You update your project, and don&#39;t care about the rest. Other projects depending on it will simply update their lib whenever they see fit.</p><p>However, your case seems highly dependent on correlated components, so that one feature usually affects many of them. And the whole has to be packaged as a bundle. Since implementing a feature/change/bug often requires to adapt many different libraries/projects at once, perhaps it makes sense to put them all in the same repo.</p><p>There are strong advantages/drawbacks to this.</p><p>Advantages:</p><ul><li>Tracability: the branch shows everything changed in every project/lib related to this feature/bug.</li><li>Bundling: just pick a tag, and you&#39;ll get all the sources right.</li></ul><p>Drawbacks:</p><ul><li>Merging: ...it&#39;s sometimes already tough with a single project. With different teams working on shared branches, be ready to brace for impact.</li><li>Dangerous &#34;oops&#34; factor: if one employee messes up the repository by making some mistake, it might impact <em>all</em> projects &amp; teams.</li></ul><p>It&#39;s up to you to know if the price is worth the benefit.</p><p>EDIT:</p><p>It would work like this:</p><ul><li>Feature X must be implemented</li><li>Create branch <code>feature_x</code></li><li>All developers involved work on this branch and work paralelly on it, probably in dedicated directories related to their project/lib</li><li>Once it&#39;s over, review it, test it, package it, whatever</li><li>Merge it back in the master ...and this may be the tough part since in the meantime <code>feature_y</code> and <code>feature_z</code> may have been added too. <em>It becomes a &#34;cross-team&#34; merge. This is why it is a serious drawback.</em></li></ul><p><em>just for the record: I think this is in most cases a bad idea and should be done cautiously because the merge drawback is usually higher than the one you get through dependency management / proper feature tracking.</em></p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../git-how-does-one-name-branches-that-are-bug-fixes-for-a-release-branch-in-git-flow/'>Git &#8211; How does one name branches that are bug fixes for a release branch in git-flow</a></li><li class="list-group-item"><a href='../git-repository-structure-for-interdependent-projects/'>Git Repository Structure for Interdependent Projects</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>