<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Is it wrong to parse YAML `true` as a string &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076944 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076944" class="post-1076944 software type-software status-publish hentry category-software tag-parsing tag-yaml"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Is it wrong to parse YAML `true` as a string</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">parsing</span><span class="mr-2 badge badge-info">yaml</span></p><div class="entry-content"><p>Given these lines of YAML:</p><pre><code>version: 1.00
y: 1
</code></pre><p>What does this represent?</p><p>According to the <a href="https://yaml.org/spec/1.2/spec.html" rel="nofollow noreferrer">YAML spec</a> (I&#39;m not a delicate enough to read the spec like a lawyer), does this necessarily represent that a key <code>str(&#34;version&#34;)</code> maps to a value <code>float(1.0)</code>, and a key <code>bool(true)</code> maps to a value <code>int(1)</code>? Or is it up to the parser to decide whether <code>1.0</code> should be a float or a str?</p><p>As these two lines obviously suggest, <code>version: 1.0</code> should really be parsed as a string not as a number. And <code>y: 1</code> might actually mean a Y-coordinate rather than a boolean true. This is a common pitfall in YAML config files.</p><p>So a co-worker suggested to write a parser that parses a YAML file based on a user-given data structure (like the Go unmarshal libraries) rather than based on the type inferred from the YAML code. I opposed because I think this kind of parsing would violate the YAML specification, making the YAML file no longer &#34;real YAML&#34;.</p><p>An immediate consequence (if I interpret the YAML spec correctly) is that, suppose someone made an interactive GUI editor for YAML files (maybe it&#39;s something like Windows <code>regedit</code>), the editor would parse the above YAML code as <code>version: 1.00</code> a float, then emit it back as <code>1.0</code>, leading to inconsistent data. If my understanding on YAML spec is correct, the editor does not make incorrect assumptions on the information carried by the YAML code, so the editor isn&#39;t doing anything wrong; and the user is just following our so-called YAML standard (and hence believe that it is standard YAML, and the editor is also following standard YAML), so the responsibility would be in us (not the user, not the editor). Therefore I oppose to this custom parser.</p><p>Am I correct? If I am correct, how should I convince that he is wrong? If I am incorrect, how to explain this scenario? (Please convince me, because we&#39;re getting a bit heated)</p><p>(DO NOT TURN THIS INTO AN XY QUESTION. We all know that YAML has problems, but let&#39;s assume we can&#39;t change to another format to prevent off-topic)</p><p>(Context: we are working on an open-source project which has users from different levels of the education spectrum)</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>YAML is an extremely complicated format, and the result of that document may differ between YAML versions and parsers. YAML itself does not prescribe a data model beyond scalars/sequences/mappings/pointers. However:</p><p>YAML has the concept of tags that serve as explicit type annotations (<code>!!str 1.00</code>, <code>!MyCustomTag foo</code>), which are sometimes used to discover constructors through reflection (this is where all those YAML security issues come from).</p><p>YAML also has a concept of schemas that can be used to derive implicit type information from unquoted strings. These types are usually defined as a regex that must match the value.
For convenience, all parsers seem to offer a JSON-ish default schema, sometimes with YAML extensions (like boolean yes/no), and often with language-specific extensions as well. Many parsers allow user-defined schemas. Some YAML parsers give access to the document before it is interpreted under some schema.</p><p>The result of these schemas is that while multiple parsers may <em>parse</em> a document identically, they could <em>interpret</em> the data types differently, unless they use the same schema. Schemas are not declared within the document.</p><p>This means that a YAML editor does have to treat types and schemas explicitly. The editor should automatically insert tags to prevent a value from being interpreted as the wrong type under the given profile. For example, to have the value <code>true</code> be recognized as a string quotes or a tag would work: <code>&#34;true&#34;</code>, <code>&#39;true&#39;</code>, <code>!!str true</code>. Alternatively, an editor can be type-agnostic but that can lead to seemingly trivial edits changing the type of a scalar.</p><p>Your coworker is slightly more correct assuming they are suggesting that you define a custom schema or parse without any YAML-level schema. Due to the proliferation of parsers there is no clear standard schema (while the YAML 1.2 standard declares a possible Core Schema it is not mandated, and most parsers default to interpreting documents as under previous YAML versions).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-are-parsers-a-special-case-in-unit-testing/'>Unit-testing &#8211; Are parsers a special case in unit testing</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>