<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Why Session has implemented this way in Asp.net &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1071920 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1071920" class="post-1071920 software type-software status-publish hentry category-software tag-asp-net tag-c tag-history tag-language-features"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Why Session has implemented this way in Asp.net</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">asp.net</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">history</span><span class="mr-2 badge badge-primary">language-features</span></p><div class="entry-content"><p>I&#39;m not a Asp.net/C# developer myself but recently had to slightly refactor a Asp.net/C# project and I had to use <code>Session</code> at some point. When working with the session, regardless of the data type that I was specifying for the session variable, I had to cast the session variable any time I needed to access it.</p><pre><code>Session[&#34;index&#34;] = 0;
Session[&#34;index&#34;] = Session[&#34;index&#34;] + 1; // throws exception
Session[&#34;index&#34;] = ((int)Session[&#34;index&#34;]) + 1; // it works here
</code></pre><p>Asking my C# developer colleagues, it seems that the <code>Session</code> is somehow an object that covers up the actual data type of the variable, apparently without losing it, but for some reason you still need to cast it anyway any time you want to access it.</p><p>I&#39;m not sure if that&#39;s the case or not or even if I have understood it properly, but what I don&#39;t understand is why it has to be implemented in a way that the developer has to cast it before using it. As my colleagues say, that&#39;s because you can basically have a dynamically typed session object, at run-time.</p><p>What I&#39;m thinking is, first, why you need to have such a feature only for the session, in a statically typed language like Asp.net/C#? For example, what is the use case of defining a &#34;session&#34; variable as an integer, but then put string on it at the run-time? Is there any practical use case and requirement for such a feature, not only in Asp.net but any other language?</p><p>Second, if we assume that the session variables also has to be statically typed, then is it &#34;technically&#34; possible to implement Asp.net&#39;s session in a way that when you define a session variable like below, the compiler allocates the memory in the heap, keep the data type next to it and simply eliminates the need for casting it each time?</p><pre><code>Session[&#34;index&#34;] = 0; // integer type, available at compile-time
</code></pre><p>What would happen if you try to assign a string to this integer variable? Well, like everything else in a statically typed language, you will get an exception.</p><p>Am I missing anything here? I simply can&#39;t understand why such a design decision has been made by the Asp.net development team and how the developer could benefit from that. Also wondering if there is anything related to how other languages like Java or C++ have implemented sessions, either directly in the language itself or via a library, so it led the Asp.net team as well to implement session like that?</p><p><strong>Update #1</strong></p><p>Just to clear the air, my main question is why the <code>Session</code> has implemented in this way? What are the benefits of having a session like this &#8212; whatever it is, rather how it has implemented &#8212; even though I&#39;m looking to know that as well.</p><p><strong>Update #2</strong></p><p>Regarding @JacquesB comment: <em>&#34;You have to be able to save all kinds of different objects in a Session, so the type has to be Object, there is no other option&#34;</em>; Why the following code:</p><pre><code>Session[&#34;index&#34;] = 0;
Session[&#34;name&#34;] = &#34;abc&#34;;
</code></pre><p>Can&#39;t be translated, by compiler, at the compile-time, to something like this:</p><pre><code>int SessionIndex = 0;
string SessionName = &#34;abc&#34;;
</code></pre><p>I don&#39;t get why &#34;there is no other option&#34;. It&#39;s a computer program after all, not anything magical, or am I still missing something?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The underlying issue is not Session or Asp.Net specific, it is a fundamental issue in how collections in statically typed languages work. The <code>Session</code> object is designed to let you store objects of any type. This means the static type of the stored items must be <code>Object</code>. So <code>Session</code> is equivalent to a <code>Dictionary&lt;string, Object&gt;</code>. Since the compiler can only know that the type of the item is <code>Object</code>, you have to explicitly cast to a more specific type in order to perform any operation (and that cast may of course fail at runtime if you get the wrong type.)</p><p>Now you ask why the compiler is not smart enough to recognize that:</p><pre><code>Session[&#34;name&#34;] = &#34;abc&#34;;
</code></pre><p>means that the entry with key &#34;name&#34; will be of type <code>string</code>. This cannot work because the name of the key is an expression with a value which may be unknown at compile time. Eg.</p><pre><code>Session[Datetime.Now.ToString()] = &#34;abc&#34;;
</code></pre><p>There is no way the compiler can figure this out in the general case, even if it is theoretically possible in some very specific cases.</p><hr/><p>To explain a bit more generally: You have to distinguish between the type of a value at <em>runtime</em>, and then the type that the compiler is able to determine at <em>compile time</em>.</p><p>A value always have a specific type at runtime, and this type is (as you suggest) stored together with the value, so you can always inspect the actual type of a value with the <code>GetType()</code> method.</p><p>But in a statically typed language, the type checking happens at compile time, and at that stage the compiler is not always able to know the actual type of all values. Take this example:</p><pre><code>object x = &#34;abs&#34;;
int l = x.Length; // !Compile error
</code></pre><p>At runtime, the type of the value in x is <code>String</code>, but the compiler have to rely on the <em>declared type</em> of x with is <code>Object</code>. And since <code>Object</code> does not have the property <code>Length</code>, you get a compile error.</p><p>Now you might think that compiler should be smart enough to realize that x is actually a <code>String</code> in this case, but this will not work in the general case, since x might be assigned say an integer in a different part of the program, so the actual type might change through the running of the program. The only thing the compiler can guarantee is that the type of x will be Object or a subtype of Object, because that is the declared type.</p><p>In this particular case you know more than the compiler, because you realize that x is a <code>String</code>, even though the declared type is less specific. This is where we can use a cast: When we know the runtime type better than the compiler. A cast does not change the type of a value, rather it just informs the compiler to assume a certain more specific type. So you can write:</p><pre><code>int l = ((string)x).Length;
</code></pre><p>A cast will of course fail at runtime in case the actual type of the value in x is not string.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../why-dynamically-typed-languages-do-not-let-the-developer-specify-the-type/'>Why dynamically typed languages do not let the developer specify the type</a></li><li class="list-group-item"><a href='../alternative-way-of-developing-for-asp-net-to-webforms-any-problems-with-this/'>Alternative way of developing for ASP.NET to WebForms &#8211; Any problems with this</a></li><li class="list-group-item"><a href='../c-why-does-the-net-world-seem-to-embrace-magic-strings-instead-of-staticly-typed-alternatives/'>C# &#8211; Why does the .Net world seem to embrace magic strings instead of staticly typed alternatives</a></li><li class="list-group-item"><a href='../c-would-a-downcast-if-block-be-a-reasonable-language-feature/'>C# &#8211; Would a &#8220;downcast if block&#8221; be a reasonable language feature</a></li><li class="list-group-item"><a href='../c-why-were-magic-methods-implemented-in-c/'>C# &#8211; Why were magic methods implemented in C#</a></li><li class="list-group-item"><a href='../c-using-struct-to-enforce-validation-of-built-in-type/'>C# &#8211; Using struct to enforce validation of built-in type</a></li><li class="list-group-item"><a href='../c-iterating-through-iqueryable-with-lazyloading-results-in-multiple-open-datareaders/'>C# &#8211; Iterating through IQueryable with lazyloading results in multiple open DataReaders</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>