<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Where to store application configuration &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086247 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086247" class="post-1086247 software type-software status-publish hentry category-software tag-configuration tag-configuration-management"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Where to store application configuration</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">configuration</span><span class="mr-2 badge badge-info">configuration-management</span></p><div class="entry-content"><p>Until now for each of our applications we store application configuration in the same repository as the code that uses the configuration. We have environment specific yml files (dev, test, .., prod) that contain plain text as well as encrypted configuration values. Those get deployed for example as &#34;Application Settings&#34; in Azure. Depending on the type of application (Java Tomcat, .NET webapp, etc.) The configuration values are fetched at runtime from environment variables or configuration files directly.</p><p>Now, we would like to decouple the release of the code from release of the configuration. A configuration change should not require us to rebuild and redeploy the application (process, approval, etc). This would be for patches for instance where the application version <code>x.y</code> will fetch the latest configuration for <code>x.y.*</code>.</p><p>The natural way to do this is to move the configuration values into a dedicated service that the applications will fetch them from, a REST API, backed by a database for instance. The question is where that external repository gets populated from, where the configuration lives from then on. Two options I see are keeping the configuration in the repository of the application it configures or having a &#34;Configuration&#34; repository holding the configuration of all applications.</p><p>I am a big proponent of keeping the code and configuration together in one repository. I just can&#39;t really quantify the upsides. Here are a few I can think of.</p><ul><li>Keeping configuration isolated from other applications&#39;. Other application&#39;s configuration changes won&#39;t affect each other. (Changing a seemingly unshared configuration)</li><li>Review of code and configuration at the same time in the same merge request.</li></ul><p>I feel very strongly about this but I don&#39;t know why.</p><p>I don&#39;t see any downsides of keeping the configuration together with the code and no upsides of moving all configuration into the same repository.</p><p><strong>Why is it better to store the configuration alongside the code?<br /> Why is it better to store all configuration in the same repository?</strong></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>The configuration values are fetched at runtime from environment variables or configuration files directly.</p></blockquote><p>It sounds like you already have the possibility of decoupled deployments because you say that you pass in configuration at runtime. It sounds like your process is the thing that&#39;s getting in the way of decoupled config deployments. Configuration is only coupled to the software if it&#39;s part of the artifact at build time and cannot be changed at runtime. I think you&#39;re conflating repositories with deployments. Not everything that&#39;s in the same repository must be deployed together, and things that are in separate repositories can be deployed together.</p><blockquote><p>This would be for patches for instance where the application version x.y will fetch the latest configuration for x.y.*.</p></blockquote><p>What do you mean when you say application version <code>x.y</code> will <em>fetch</em> configuration for <code>x.y.*</code>? The application shouldn&#39;t be <em>fetching</em> config. The config should be passed in by whatever starts the application (through environment variables or command line arguments).</p><p>I think it&#39;s pretty important to keep the &#34;developer&#39;s&#34; config with the code. Your application code should have a config that is appropriate for a developer to clone the repository, build, and run the software on their local system. I think the dev, test, and prod configs should <strong>not</strong> be in the same repository for a couple reasons:</p><ol><li>Security - Even though you&#39;ve encrypted sensitive information in the config, it&#39;s still not a great idea to keep this in VCS with the code. E.g. you wouldn&#39;t want to keep it in an open-source repository. Such a practice also encourages the key to be shared among developers so that anybody on the team can update the config when it changes.</li><li>Flexibility - Your codebase should be designed to run with any configuration, it shouldn&#39;t try to predict how a specific production deployment will be configured. There can be infinite variations of the config, why should your code repository contain specific ones? If you want to create more environments you&#39;ll end up with a proliferation of config files.</li><li>Separation of Responsibility - In many companies the personnel who write the software are not the same people who set up the infrastructure it will run on. I think it&#39;s easier for the team that manages the infrastructure and deployment of software to manage the configuration of the software. Instead I think the software engineers should create and maintain the <em>description</em> of the configuration and the operations team should manage which hosts/databases/passwords etc. get filled in.</li></ol><blockquote><p>The natural way to do this is to move the configuration values into a dedicated service that the applications will fetch them from, a REST API, backed by a database for instance</p></blockquote><p>I don&#39;t see this as much of an improvement of your current setup. Indeed it is much more complex. Now you have to configure your original system to talk to the configuration service. Also running the application locally would now require running an additional service. In the spirit of dependency-injection, software should not configure itself--configuration should be passed in. If you were to develop a service like you&#39;re describing it would be better to fetch the configuration from the service <em>then</em> start the application with the fetched config instead of the application fetching its own config.</p><blockquote><p>I am a big proponent of keeping the code and configuration together in one repository. I just can&#39;t really quantify the upsides. Here are a few I can think of.</p><ul><li>Keeping configuration isolated from other applications&#39;. Other application&#39;s configuration changes won&#39;t affect each other. (Changing a seemingly unshared configuration)</li></ul></blockquote><p>There is nothing stopping you from keeping applications&#39; configurations separate from each other and certainly deploying one configuration shouldn&#39;t necessitate redeploying all configurations.</p><blockquote><ul><li>Review of code and configuration at the same time in the same merge request.</li></ul></blockquote><p>I think this is odd. Does this mean before the code is reviewed, you must decide the production configuration? If my change requires a new database, do I have to go to the infrastructure team, create all databases for all environments, fill in the hostnames, usernames, and passwords? Again if the <em>description</em> of the configuration is in the source repository then that can be reviewed without dealing with the production configuration.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../python-how-bad-of-an-idea-is-it-to-use-python-files-as-configuration-files/'>Python &#8211; How bad of an idea is it to use Python files as configuration files</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>