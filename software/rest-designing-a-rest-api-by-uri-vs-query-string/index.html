<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; Designing a REST api by URI vs query string &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1062914 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1062914" class="post-1062914 software type-software status-publish hentry category-software tag-api tag-design tag-rest"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; Designing a REST api by URI vs query string</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">rest</span></p><div class="entry-content"><p>Let&#39;s say I have three resources that are related like so:</p><pre><code>Grandparent (collection) -&gt; Parent (collection) -&gt; and Child (collection)
</code></pre><p>The above depicts the relationship among these resources like so: Each grandparent can map to one or several parents. Each parent can map to one or several children. I want the ability to support searching against the child resource but with the filter criteria:</p><p><strong>If my clients pass me an id reference to a grandparent, I want to only search against children who are direct descendants of that grandparent.</strong></p><p><strong>If my clients pass me an id reference to a parent, I want to only search against children who are direct descendants of my parent.</strong></p><p>I have thought of something like so:</p><pre><code>GET /myservice/api/v1/grandparents/{grandparentID}/parents/children?search={text}
</code></pre><p>and</p><pre><code>GET /myservice/api/v1/parents/{parentID}/children?search={text}
</code></pre><p>for the above requirements, respectively.</p><p>But I could also do something like this:</p><pre><code>GET /myservice/api/v1/children?search={text}&amp;grandparentID={id}&amp;parentID=${id}
</code></pre><p>In this design, I could allow my client to pass me one or the other in the query string: either grandparentID or parentID, but not both.</p><p>My questions are:</p><p>1) Which API design is more RESTful, and why? Semantically, they mean and behave the same way. The last resource in the URI is &#34;children&#34;, effectively implying that the client is operating on the children resource.</p><p>2) What are the pros and cons to each in terms of understandability from a client&#39;s perspective, and maintainability from the designer&#39;s perspective.</p><p>3) What are query strings really used for, besides &#34;filtering&#34; on your resource? If you go with the first approach, the filter parameter is embedded in the URI itself as a path parameter instead of a query string parameter.</p><p>Thanks!</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>First</h2><p>As Per <a href="https://www.rfc-editor.org/rfc/rfc3986#section-3.4" rel="nofollow noreferrer">RFC 3986 ยง3.4 (Uniform Resource Identifiers ยง (Syntax Components)|Query</a></p><blockquote><p><strong>3.4 Query</strong></p></blockquote><p>The query component contains non-hierarchical data that, along with
data in the path component (Section 3.3), serves to identify a
resource within the scope of the URI&#39;s scheme and naming authority
(if any).</p><p>Query components are for retrieval of non-hierarchical data; there are few things more hierarchical in nature than a family tree!  Ergo <em>- regardless of whether you think it is &#34;REST-y&#34; or not-</em> in order to conform to the formats, protocols, and frameworks of and for developing systems on the internet, you must not use the query string to identify this information.</p><p>REST has nothing to do with this definition.</p><p>Before addressing your specific questions, your query parameter of &#34;search&#34; is poorly named.  Better would be to treat your query segment as a dictionary of key-value pairs.</p><p>Your query string could be more appropriately defined as</p><p><code>?first_name={firstName}&amp;last_name={lastName}&amp;birth_date={birthDate}</code> etc.</p><h2>To answer your specific questions</h2><blockquote><ol><li>Which API design is more RESTful, and why? Semantically, they mean and behave the same way. The last resource in the URI is &#34;children&#34;, effectively implying that the client is operating on the children resource.</li></ol></blockquote><p>I don&#39;t think this is as clear cut as you seem to believe.</p><p>None of these resource interfaces are RESTful.  The <strong>major</strong> precondition for the RESTful architectural style is that Application State transitions must be communicated from the server as hypermedia.  People have labored over the structure of URIs to make them somehow &#34;RESTful URIs&#34; but the formal literature regarding REST actually has very little to say about this. My personal opinion is that much of the meta-misinformation about REST was published with the intent of breaking old, bad habits. (Building a truly &#34;RESTful&#34; system is actually quite a bit of work. The industry glommed on to &#34;REST&#34; and back-filled some orthogonal concerns with nonsensical qualifications and restrictions. )</p><p>What the REST literature does say is that if you are going to use HTTP as your application protocol, you must adhere to the formal requirements of the protocol&#39;s specifications and you cannot &#34;make http up as you go and still declare that you are using http&#34;; if you are going to use URIs for identifying your resources, you must adhere to the formal requirements of the specifications regarding URI/URLs.</p><p>Your question is addressed directly by RFC3986 ยง3.4, which I have linked above.  The bottom line on this matter is that even though a conforming URI is insufficient to consider an API &#34;RESTful&#34;, if you want your system to actually <em>be</em> &#34;RESTful&#34; and you are using HTTP and URIs, then you cannot identify hierarchical data through the query string because:</p><blockquote><p><strong>3.4 Query</strong></p></blockquote><p>The query component contains non-hierarchical data</p><p>...it&#39;s as simple as that.</p><blockquote><ol start="2"><li>What are the pros and cons to each in terms of understandability from a client&#39;s perspective, and maintainability from the designer&#39;s perspective.</li></ol></blockquote><p>The &#34;pros&#34; of the first two is that they are <em>on the right path</em>. The &#34;cons&#34; of the third one is that it appears to be flat out wrong.</p><p>As far as your understandability and maintainability concerns, those are definitely subjective and depend on the comprehension level of the client developer and the design chops of the designer.  The URI specification is the definitive answer as to how URIs are supposed to be formatted.  Hierarchical data is supposed to be represented on the path and with path parameters.  Non-hierarchical data is supposed to be represented in the query.  The fragment is more complicated, because its semantics depend specifically upon the media type of the representation being requested.  So to address the &#34;understandability&#34; component of your question, I will attempt to translate exactly what your first two URIs are actually saying. Then, I will attempt to represent what you say you are trying to accomplish with valid URIs.</p><p><strong>Translation of your verbatim URIs to their semantic meaning</strong> <code>/myservice/api/v1/grandparents/{grandparentID}/parents/children?search={text}</code> This says for the parents of grandparents, find their child having <code>search={text}</code> What you said with your URI is only coherent if searching for a grandparent&#39;s siblings.  With your &#34;grandparents, parents, children&#34; you found a &#34;grandparent&#34; went up a generation to their parents and then came back down to the &#34;grandparent&#34; generation by looking at the parents&#39; children.</p><p><code>/myservice/api/v1/parents/{parentID}/children?search={text}</code> This says that for the parent identified by {parentID}, find their child having <code>?search={text}</code> This is closer to correct to what you are wanting, and represents a parent-&gt;child relationship that can likely be used to model your entire API.  To model it this way, the burden is placed upon the client to recognize that if they have a &#34;grandparentId&#34;, that there is a layer of indirection between the ID they have and the portion of the family graph they are wishing to see.  To find a &#34;child&#34; by &#34;grandparentId&#34;, you can call your <code>/parents/{parentID}/children</code> service and then foreach child that is returned, search their children for your person identifier.</p><p><strong>Implementation of your requirements as URIs</strong> If you want to model a more extensible resource identifier that can walk the tree, I can think of several ways you can accomplish that.</p><p><strong>1)</strong> The first one, I&#39;ve already alluded to.  Represent the graph of &#34;People&#34; as a composite structure. Each person has a reference to the generation above it through its Parents path and to a generation below it through its Children path.</p><p><code>/Persons/Joe/Parents/Mother/Parents</code> would be a way to grab Joe&#39;s maternal grandparents.</p><p><code>/Persons/Joe/Parents/Parents</code> would be a way to grab all of Joe&#39;s grandparents.</p><p><code>/Persons/Joe/Parents/Parents?id={Joe.GrandparentID}</code> would grab Joe&#39;s grandparent having the identifier you have in hand.</p><p>and these would all make sense (note that there could be a performance penalty here depending on task by forcing a dfs on the server due to a lack of branch identification in the &#34;Parents/Parents/Parents&#34; pattern.)  You also benefit from having the ability to support any arbitrary number of generations.  If, for some reason, you desire to look up 8 generations, you could represent this as</p><p><code>/Persons/Joe/Parents/Parents/Parents/Parents/Parents/Parents/Parents/Parents?id={Joe.NotableAncestor}</code></p><p>but this leads into the second dominant option for representing this data: through a path parameter.</p><hr/><p><strong>2)</strong> Use path parameters to &#34;query the hierarchy&#34;  You could develop the following structure to help ease the burden on consumers and still have an API that makes sense.</p><p>To look back 147 generations, representing this resource identifier with path parameters allows you to do</p><p><code>/Persons/Joe/Parents;generations=147?id={Joe.NotableAncestor}</code></p><p>To locate Joe from his Great Grandparent, you could look down the graph a known number of generations for Joe&#39;s Id. <code>/Persons/JoesGreatGrandparent/Children;generations=3?id={Joe.Id}</code></p><p>The major thing of note with these approaches is that without further information in the identifier and request, you should expect that the first URI is retrieving a Person 147 generations up from Joe with the identifier of Joe.NotableAncestor. You should expect the second one to retrieve Joe.  Assume that what you actually want is for your calling client to be able to retrieve the entire set of nodes and their relationships between the root Person and the final context of your URI.  You could do that with the same URI (with some additional decoration) and setting an Accept of <code>text/vnd.graphviz</code> on your request, which is the IANA registered media type for the <code>.dot</code> graph representation.  With that, change the URI to</p><p><code>/Persons/Joe/Parents;generations=147?id={Joe.NotableAncestor.Id}#directed</code></p><p>with an HTTP Request Header <code>Accept: text/vnd.graphviz</code> and you can have clients fairly clearly communicate that they want the directed graph of the generational hierarchy between Joe and 147 generations prior where that 147th ancestral generation contains a person identified as Joe&#39;s &#34;Notable Ancestor.&#34;</p><p>I&#39;m unsure if text/vnd.graphviz has any pre-defined semantics for its fragment;I could find none in a search for instruction.  If that media type actually does have pre-defined fragment information, then its semantics should be followed to create a conforming URI.  But, if those semantics are not pre-defined, the URI specification states that the semantics of the fragment identifier are unconstrained and instead defined by the server, making this usage valid.</p><hr/><blockquote><ol start="3"><li>What are query strings really used for, besides &#34;filtering&#34; on your resource? If you go with the first approach, the filter parameter is embedded in the URI itself as a path parameter instead of a query string parameter.</li></ol></blockquote><p>I believe I have already thoroughly beaten this to death, but query strings are not for &#34;filtering&#34; resources. They are for <em>identifying</em> your resource from non-hierarchical data. If you have drilled down your hierarchy with your path by going <code>/person/{id}/children/</code> and you are wishing to identify a <em>specific</em> child or a <em>specific</em> set of children, you would use some attribute that applies to the set you are identifying and include it inside the query.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-api-concepts/'>REST API concepts</a></li><li class="list-group-item"><a href='../rest-consequences-of-not-doing-a-rest-api-the-right-way/'>Rest &#8211; Consequences of not doing a REST API the &#8220;right&#8221; way</a></li><li class="list-group-item"><a href='../rest-designing-a-rest-api-resource-with-a-non-unique-id-but-unique-composite-id/'>Rest &#8211; Designing a REST API resource with a non-unique ID, but unique composite ID</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>