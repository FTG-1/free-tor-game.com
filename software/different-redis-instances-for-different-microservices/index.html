<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Different Redis instances for different microservices &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075968 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075968" class="post-1075968 software type-software status-publish hentry category-software tag-design-patterns tag-docker tag-microservices tag-redis"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Different Redis instances for different microservices</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span><span class="mr-2 badge badge-info">docker</span><span class="mr-2 badge badge-warning">microservices</span><span class="mr-2 badge badge-primary">redis</span></p><div class="entry-content"><p>Say that we have Kubernetes running with <em>n</em> pods, each being a separate microservice. Now, some of those services need a caching layer. When we take into consideration:</p><ul><li>the fact that Redis was tested to hundred of millions of keys and that it was performant</li><li>the fact that you can tag <code>keys</code> by <code>namespaces</code> (which would be microservice names in this instance)</li><li>the fact that the data would have a relatively short expiration time (we&#39;d hardly hit the number of 10M+ keys at a given moment)</li><li>the fact that we have a single (although replicated) database from which data is fetched. PS: I know this goes against reactive principles. (Thanks to <a href="https://softwareengineering.stackexchange.com/users/177980/ewan">Ewan</a> for reminding me to add this)</li></ul><p>Would we spin up separate Redis pods, each corresponding to a single service or would a single Redis master pod with a separate pod for slave containers be a better architectural choice? Would having separate Redis pods be an antipattern of some sort?</p><p>A diagram to help you visualize the dilemma:</p><p><a href="../../../i.stack.imgur.com/jl9OV.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/jl9OV.png" alt="enter image description here"/></a></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If we consider the cache to be <a href="http://www.catb.org/~esr/writings/taoup/html/ch04s02.html#orthogonality" rel="nofollow noreferrer">orthogonal</a> to the architecture (and it&#39;s), the first pic is ok.</p><p>For the same reason that we don&#39;t deploy one security service, one API gateway, one message broker or one service locator per POD we don&#39;t have to deploy one Cache (in replica-set) per POD.<sup>1,2</sup></p><h3>Be aware of premature optimizations</h3><p>Caches are meant to solve specific performance issues. Mainly those derived from costly <a href="https://en.wikipedia.org/wiki/Inter-process_communication" rel="nofollow noreferrer">IPCs</a> or heavy calculations. Without evidence of any of these issues, deploying caches (in replica-set) per POD for the sake of the &#34;MS&#39; God&#34;, is premature optimization (among other things).</p><h3>The <em>Cloud</em> can kill you.</h3><p>If our goal is to deploy the architecture in the cloud, the smart move would be to start small. Be conservative. Scaling up|out as the needs come because the contrary is oversizing the architecture. Oversized architectures are potentially dangerous in the cloud because they can, literally, kill the project devouring the ROI in no time. <sup>3</sup></p><h3>Size the solution according to the problem</h3><p>Perform load tests first, get metrics and shreds of evidence of performance issues, find out whether caches are the solution to these issues. Then, size the solution according to the problem. If and only if services are proven to need a dedicated cache, deploy them. By the time you do it, you do it uppon objective metrics and keeping the bills under control.</p><p>I was told once</p><blockquote><p>If the solution is more complex or more expensive than the problem it
 solves, then it&#39;s not a profitable solution. <strong>It&#39;s not even a solution!</strong></p></blockquote><p><sup>Emphasis mine</sup></p><h3>Keep complexity at bay</h3><p>MS architectures are complex per se, they don&#39;t need us adding more complexity for the sake of dogmas or beliefs we barely understand. Keep the overall complexity of the system as lower as possible but not lower. In other words, keep it simple but not at the cost of defeating the purpose of the architecture (total freedom of deployment and SDLC).</p><hr/><p><sup> 1: I&#39;m assuming that every POD is a replica of the same Service, not different services. </sup></p><p><sup> 2: MS architectures are not about many but small systems, it&#39;s about a single system composed by business &#34;capabilities&#34;, working all together for a greater good. </sup></p><p><sup> 3: Cloud is anything but cheap. Particularly, when it comes to buy RAM </sup></p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-would-you-use-redis-for-exception-handling/'>How would you use Redis for Exception Handling</a></li><li class="list-group-item"><a href='../redis-strategy-for-activity-log-data/'>Redis strategy for activity log data</a></li><li class="list-group-item"><a href='../redis-strategy-for-cache-item-dependency/'>Redis strategy for cache item dependency</a></li><li class="list-group-item"><a href='../microservices-should-there-be-multiple-instances-of-the-same-service/'>Microservices &#8211; should there be multiple instances of the same service</a></li><li class="list-group-item"><a href='../multi-tenant-microservice-design/'>Multi-tenant microservice design</a></li><li class="list-group-item"><a href='../architecture-where-to-store-data-for-microservices-architecture/'>Architecture &#8211; Where to store data for Microservices Architecture</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>