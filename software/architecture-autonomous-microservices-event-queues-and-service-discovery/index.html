<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture &#8211; Autonomous Microservices, event queues and service discovery &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080020 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080020" class="post-1080020 software type-software status-publish hentry category-software tag-architecture tag-domain-driven-design tag-microservices tag-soa"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture &#8211; Autonomous Microservices, event queues and service discovery</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">domain-driven-design</span><span class="mr-2 badge badge-warning">microservices</span><span class="mr-2 badge badge-primary">soa</span></p><div class="entry-content"><p>I&#39;ve been reading a lot about micro-services lately, and here are some of the conclusions I got so far (please correct me if I&#39;m wrong at any point).</p><ol><li>Micro-services architecture goes well with domain driven design.<br /> Usually one MS represents one bounded context.</li><li>If micro-service <strong>A</strong> requires functionality which resides in the<br /> micro-service <strong>B</strong>, my model is probably wrong and <strong>A</strong> and <strong>B</strong><br /> should actually be one micro-service / BC.</li><li>Synchronous communication between micro-services (direct HTTP requests) is bad, cause it defies the purpose of micro-services, and introduces coupling between components.</li><li>Asynchronous communication between services is desirable. Services should publish events to message queues, so other services can subscribe and process their part of the event, or use it to replicate a portion of data needed for their context. This way, services can process requests even other services are down, which would not be the case in the synchronous communication.</li><li>If micro-service <strong>A</strong> publishes event, micro-service <strong>B</strong> subscribes to that event and produces a new event as outcome, micro-service <strong>A</strong> should not be the one processing newly created event, cause that would be a circular dependency. In this case, we should introduce third micro-service, or combine <strong>A</strong> and <strong>B</strong> in to <strong>AB</strong> micro-service.</li><li><strong>Micro-service</strong> is actually a misleading term. We should strive for small contexts, but that does not need to be the case. Term should not be &#34;micro-service&#34;, but &#34;<strong>big enough to do the job service</strong>&#34;.</li><li>Micro-services allows us to introduce new functionalities with more ease and without fear that we will break entire system. It can  be done by introducing a new service, or refactoring one of the existing.</li><li>Each micro-service should have it&#39;s own data-storage. Data replication/duplication is desirable behavior in this architecture.</li></ol><p>Other than confirming my understanding of this architecture, my other part of the question is mostly related to service discovery. If the services are communicating asynchronously, and using central event queue like amazon SQS, does that mean that service discovery does not have its place in architecture like that?</p><p>Services should not have any knowledge about other services in the system. They are only aware of their context and events they should publish or subscribe to?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your conclusions seem mostly founded and sum up very nicely the way to go for microservices.</p><p>I&#39;d however not fully support 2, 5 and 8:</p><ul><li><p>2) A simple dependency should not automatically lead to a merger. You have to consider the frequency of such dependent calls and also the frequency of calls from other services.</p><p>So if a microservice A requires functionality in microservice B very frequently, and microservice B is seldomly needed by other microservices, you should challenge the envisaged structure and ask if it wouldn&#39;t be more appropriate to group both microservices.</p></li><li><p>5) of course, you need to avoid endless cycling in the message handling.</p><p>But adding an intermediary will not prevent it:  A could launch a message handled by C who launches a message handled by B, who launches a message handled by A and here you are trapped in a loop.</p><p>The problem can&#39;t be assessed only by considering microservice level: the question is really about message type and content which could lead to cycle.  The graph that models the distribution and processing of messages across the services has therefore to be analyzed as a whole (in fact this can be complex, so you could imagine a monitoring microservice that detects such cycles and break them).</p></li><li><p>8) yes, each microservice shall have its dedicated storage/database.</p><p>A minimum of replication is required in order to allow services to be independent. However I wouldn&#39;t go so far to tell that replication is desired: it has to be kept to the minimum in order to avoid hidden coupling via replication processes.</p><p>Microservices are about loose coupling. This may sometimes be more effectively achieved by calling another microservice to retrieve related data, instead of replicating data.</p></li></ul><p>The two last unnumbered affirmations are too broad to be answered firmly here.  I think your suggestion is a good starting point, but that it really depends on architectural requirements and constraints.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/java-push-based-events-in-a-services-oriented-architecture/'>Java &#8211; Push-Based Events in a Services Oriented Architecture</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/service-bus-or-event-stream-for-event-driven-architecture/'>Service Bus or Event Stream for Event-Driven Architecture</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-to-update-a-nosql-database-and-publish-event-atomically-in-an-event-driven-microservices-architecture/'>How to update a NoSQL database and publish event atomically in an event-driven microservices architecture</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>