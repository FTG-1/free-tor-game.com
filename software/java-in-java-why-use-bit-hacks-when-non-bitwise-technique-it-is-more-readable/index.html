<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; In Java, why use bit hacks when non-bitwise technique it is more readable &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1077247 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1077247" class="post-1077247 software type-software status-publish hentry category-software tag-bitwise-operators tag-code-quality tag-java tag-performance tag-readability"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; In Java, why use bit hacks when non-bitwise technique it is more readable</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">bitwise-operators</span><span class="mr-2 badge badge-info">code-quality</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">performance</span><span class="mr-2 badge badge-danger">readability</span></p><div class="entry-content"><p>Is there any legitimate use for <a href="https://graphics.stanford.edu/~seander/bithacks.html" rel="nofollow noreferrer">bit manipulation hacks</a> in higher-level languages such as Java?</p><p>I can see them being useful in speed-sensitive low-level and computation-intensive programs, e.g. graphics processing or crypto functions. I guess that&#39;s why all collections of them are in C. However, getting to think about them in terms of higher-level design I cannot think of any point where I would, for example, write the following in a Java program:</p><pre><code>r = y ^ ((x ^ y) &amp; -(x &lt; y));
</code></pre><p>rather than:</p><pre><code>r = (x &lt; y) ? x : y;
</code></pre><p>The first line looks more like an obfuscation than an improvement. And most applications have different kinds of bottlenecks &#8211; most commonly networks or disc access, so much so that any potential improvement gained by using a bitwise hack would be so tiny that it is completely ignorable.</p><p>This line of thought was provoked by a recent <a href="https://stackoverflow.com/questions/24473430/">SO question</a> in which someone was asked about a bitwise hack in Java during a interview.</p><p>I agree as much as anyone that it&#39;s always better to write faster code, but considering that it becomes much less readable, especially by someone not familiar with bit hacks, is there any kind of application in which it is legitimately worth it?</p><p>This question is not about bitwise <em>operators</em> in general, but more specifically about bitwise <em>hacks</em>, and even more specifically about bitwise hacks <em>in Java</em>.</p><p>By <em>bitwise hack</em> I mean a manipulation that has a trivial and/or obvious implementation, but which can be done slightly faster/better with some clever bitwise manipulation &#8212; which in most cases makes it <em>near-unreadable</em> to someone not used to bitwise hacks.</p><hr/><p>There are similar looking questions: <a href="https://softwareengineering.stackexchange.com/questions/136449/importance-of-bitwise-thinking">Importance of bitwise thinking</a> and <a href="https://softwareengineering.stackexchange.com/questions/65384/what-are-bit-operators-good-for">What are bit operators good for?</a> The answers in these questions talk about bit manipulations in general, which yes, have a lot of clear and useful applications; especially in <em>other</em> languages like C. While this may seem similar, my question was about having them <em>versus</em> using the non-bitwise technique in Java. In the other questions this is not addressed at all.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Sometimes, the specification of an algorithm is based on bit operations.  This is especially true in crypto work.</p><p>Crypto has another attribute to it that is important - that the operation takes exactly the same amount of time no matter what the parameters are.  This is to try to avoid leaking any data with timing attacks (there are even attacks based on the <a href="http://arstechnica.com/security/2013/12/new-attack-steals-e-mail-decryption-keys-by-capturing-computer-sounds/">sounds the computer makes while doing cryptography</a>).</p><p>Thus, for cryptography, it is of paramount importance that the code takes exactly the same amount of time and does the same things.  Bitwise operations can play a significant role in that area in that they are not often or easily optimized by the compiler.  With things were you can short circuit the expression or decide to follow one branch or another that has a different timing these are avenues of timing attacks.</p><p>The code</p><pre><code>if(x &lt; y) {
  r = x;
} else {
  r = y;
}
</code></pre><p>Can take different amounts of time based on the branch prediction and branching itself.  While</p><pre><code>r = y ^ ((x ^ y) &amp; -(x &lt; y));
</code></pre><p>takes <em>exactly</em> the same amount of time each time through the code.  Branch prediction doesn&#39;t play a role because there are no branches in there.</p><hr/><p>With graphics work, there are similar areas of concern.  Some systems (especially older ones) had the CRT refresh tied with the clock cycle (for example <a href="http://mandetech.com/2014/04/14/graphic-effects-on-the-amiga/">the Amiga</a> had 4 clock cycles per refresh line).  This meant that when you wrote code that was specifically tailored to the graphics of the system you knew <em>exactly</em> where the screen refresh was and could improve the appearance of the system.  This isn&#39;t quite as much of an issue now (the GForce GTX 780 can do 40,0000 operations per pixel per frame refresh), but it is something to be considered.</p><p>Secondly, there&#39;s also deep magic within fitting things into various caches on various systems.  Doing as much as possible with the cache can improve that.  This often means doing bitwise work rather than trying to load and store things or send them off to the <a href="https://en.wikipedia.org/wiki/Arithmetic_logic_unit">ALU</a>.</p><p>In Java, this can be difficult to know for certain, but again, maintaining a <em>consistent</em> frame rate based on the scene is something that is often very important with graphics.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-performance-of-scala-compared-to-java/'>Java &#8211; Performance of Scala compared to Java</a></li><li class="list-group-item"><a href='../c-using-scoped-enums-for-bit-flags-in-c/'>C++ &#8211; Using scoped enums for bit flags in C++</a></li><li class="list-group-item"><a href='../java-keeping-track-of-all-objects-of-a-class/'>Java &#8211; Keeping track of all objects of a class</a></li><li class="list-group-item"><a href='../bits-least-significant-lowest-is-0th-or-1st-zero-or-one-indexed/'>Bits &#8211; Least-Significant/Lowest is 0th or 1st; zero or one indexed</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>