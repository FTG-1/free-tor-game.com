<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Oauth 2 authenticate with other authorization server &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1085957 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1085957" class="post-1085957 software type-software status-publish hentry category-software tag-authentication tag-client-server tag-oauth tag-oauth2 tag-server"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Oauth 2 authenticate with other authorization server</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">authentication</span><span class="mr-2 badge badge-info">client-server</span><span class="mr-2 badge badge-warning">oauth</span><span class="mr-2 badge badge-primary">oauth2</span><span class="mr-2 badge badge-danger">server</span></p><div class="entry-content"><p>Let&#39;s assume i have a <code>mobile app</code> backed up by a <code>Server</code>. the server is both an <strong>Authorization and Resource Server</strong>.</p><p>Now i want to enable users to register / login to the app using <code>Facebook API</code>. After the user authenticated through <strong>Facebook</strong> he gets an <code>AccessToken</code>. now i have few options:</p><ol><li>send the <code>accessToken</code> to my <strong>authorization server</strong> (with user <code>fbId</code>), make sure it&#39;s a real <code>accessToken</code>, store the accessToken as the user authentication token and manage the Oauth2 autherization process using that accessToken with <strong>My Authorization server</strong>.</li><li>same as the other but create after <strong>authenticating</strong> in the server side, create new <code>accessToken</code> with an optional <code>refreshToken</code> and never use the <strong>facebook AccessToken</strong> again (only to retrieve information from <em>Facebook</em>)</li><li>on each call to my resource server, user the <code>Facebook authorization server</code> (please let it not be the answer (-;)</li></ol><p>Also if someone is familiar with a <strong>blog post / online resource</strong> that discuss such a situation please let me know ( i&#39;ve failed to find one )</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>To log in into your application with Facebook account:</p><ol><li>Authenticate the client with Facebook API, getting user access token as a result. At this point your client is sure about user identity, but your server is not yet.</li><li>Send user access token to the server. Now server has user access token, but is not sure if it is valid.</li><li><a href="https://developers.facebook.com/docs/facebook-login/access-tokens#debug" rel="nofollow">Debug the token</a> from the server to make sure it is valid. Here you use your application access token to check user access token. You need to make sure that user token is valid, not expired, and was issued for your application. If it is OK, your server now is also sure about user identity.</li><li>From now on, don&#39;t use Facebook user access token, unless you need some data from Facebook account. Instead, use normal session mechanism: provide some cookie or other custom token, just like you would do with with your own authentication mechanism.</li></ol><p>Basically, you just switch your normal username/password check with Facebook user access token check. You do it just once when a session starts.</p><p>For additional info, check <a href="https://developers.facebook.com/docs/facebook-login/security" rel="nofollow">login security best practices</a>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../ios-and-server-oauth-strategy/'>IOS and Server: OAuth strategy</a></li><li class="list-group-item"><a href='../oauth-shared-authorization-server-for-multiple-apps/'>OAuth shared Authorization server for multiple apps</a></li><li class="list-group-item"><a href='../how-to-handle-per-resource-fine-grained-permissions-in-oauth/'>How to handle per-resource (fine grained) permissions in OAuth</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>