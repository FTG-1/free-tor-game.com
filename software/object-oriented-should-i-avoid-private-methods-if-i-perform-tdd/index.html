<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Should I avoid private methods if I perform TDD &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064456 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064456" class="post-1064456 software type-software status-publish hentry category-software tag-object-oriented tag-tdd tag-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Should I avoid private methods if I perform TDD</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">object-oriented</span><span class="mr-2 badge badge-info">tdd</span><span class="mr-2 badge badge-warning">testing</span></p><div class="entry-content"><p>I&#39;m just now learning TDD. It&#39;s my understanding that private methods are untestable and shouldn&#39;t be worried about because the public API will provide enough information for verifying an object&#39;s integrity.</p><p>I&#39;ve understood OOP for a while. It&#39;s my understanding that private methods make objects more encapsulated, thus more resistant to change and errors. Thus, they should be used by default and only those methods that matter to clients should be made public.</p><p>Well, it&#39;s possible for me to make an object that has only private methods and interacts with other objects by listening to their events. This would be very encapsulated, but completely untestable.</p><p>Also, it&#39;s considered bad practice to add methods for the sake of testing.</p><p>Does this mean TDD is at odds with encapsulation? What is the appropriate balance? I&#39;m inclined to make most or all of my methods public now&#8230;</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Prefer testing to the interface over testing on the implementation.</h2><blockquote><p>It&#39;s my understanding that private methods are untestable</p></blockquote><p>This depends on your development environment, see below.</p><blockquote><p>[private methods] shouldn&#39;t be worried about because the public API will provide enough information for verifying an object&#39;s integrity.</p></blockquote><p>That&#39;s right, TDD focuses on testing the interface.</p><p>Private methods are an implementation detail that could change during any re-factor cycle. It should be possible to re-factor without changing the interface or the <em>black-box</em> behaviour. In fact, that is part of the benefit of TDD, the ease with which you can generate the confidence that changes internal to a class will not affect users of that class.</p><blockquote><p>Well, it&#39;s possible for me to make an object that has only private methods and interacts with other objects by listening to their events. This would be very encapsulated, but completely untestable.</p></blockquote><p>Even if the class has no public methods, it&#39;s event handlers are it&#39;s <em>public interface</em>, and it its against <strong>that</strong> <em>public interface</em> that you can test.</p><p>Since the events are the interface then it is the events that you will need to generate to test that object.</p><p>Look into using <a href="http://en.wikipedia.org/wiki/Mock_object" rel="noreferrer">mock objects</a> as the <em>glue</em> for your test system. It should be possible to create a simple mock object that generates an event and picks up the resultant change of state (possible by another receiver mock object).</p><blockquote><p>Also, it&#39;s considered bad practice to add methods for the sake of testing.</p></blockquote><p>Absolutely, you should be <em>very wary</em> of exposing internal state.</p><blockquote><p>Does this mean TDD is at odds with encapsulation? What is the appropriate balance?</p></blockquote><p>Absolutely not.</p><p>TDD shouldn&#39;t change the implementation of your classes other than to perhaps simplify them (by applying <a href="http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it" rel="noreferrer">YAGNI</a> from an earlier point).</p><p>Best practice with TDD is identical to best practice without TDD, you just find out why sooner, because you are using the interface as you are developing it.</p><blockquote><p>I&#39;m inclined to make most or all of my methods public now...</p></blockquote><p>This would be rather throwing the baby out with the bath water.</p><p>You shouldn&#39;t <em>need</em> to make all methods public so that you can develop in a TDD way. See my notes below to see if your private methods really are untestable.</p><h2>A more detailed look at testing private methods</h2><p>If you <em>absolutely must</em> unit test some private behaviour of a class, depending on the language/environment, you may have three options:</p><ol><li>Put the tests in the class you want to test.</li><li>Put the tests in another class/source file &amp; expose the private methods you want to test as public methods.</li><li>Use a testing environment that allows you to keep test and production code separate, yet still allow testing code access to private methods of the production code.</li></ol><p>Obviously the 3rd option is by far the best.</p><h3>1) Put the tests in the class you want to test (not ideal)</h3><p>Storing test cases in the same class/source file as the production code under test is the simplest option. But without a lot of pre-processor directives or annotations you will end up with your test code bloating your production code unnecessarily, and depending on how you have structured your code, you may end up accidentally exposing internal implementation to users of that code.</p><h3>2) Expose the private methods you want to test as public or protected methods (really not a good idea)</h3><p>As suggested this is very poor practice, destroys encapsulation and <em>will expose</em> internal implementation to users of the code.</p><h3>3) Use a better testing environment (best option, if it is available)</h3><p>In the Eclipse world, 3. can be achieved by using <a href="http://www.modumind.com/2007/06/20/unit-testing-plug-ins-with-fragments/" rel="noreferrer">fragments</a>. In the C# world, we might use <a href="http://www.joelhainley.com/index.php/2009/04/13/c-partial-classes-and-nunit/" rel="noreferrer">partial classes</a>. Other languages/environments often have similar functionality, you just need to find it.</p><p>Blindly assuming 1. or 2. are the only options would be likely to result in production software bloated with test code or nasty class interfaces that wash their dirty linen in public. *8&#39;)</p><ul><li>All in all - it is much better not to test against private implementation though.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-do-you-leverage-the-benefits-of-the-open-closed-principle/'>Object-oriented &#8211; Do you leverage the benefits of the open-closed principle</a></li><li class="list-group-item"><a href='../object-oriented-ongoing-confusion-about-ivars-and-properties-in-objective-c/'>Object-oriented &#8211; Ongoing confusion about ivars and properties in objective C</a></li><li class="list-group-item"><a href='../c-helper-static-methods-in-tdd/'>C# &#8211; Helper static methods in TDD</a></li><li class="list-group-item"><a href='../java-why-do-we-have-mutator-methods/'>Java &#8211; Why do we have mutator methods</a></li><li class="list-group-item"><a href='../c-has-no-friend-class-what-are-better-options/'>C# has no friend class &#8211; what are better options</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>