<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Git &#8211; A decent git branching model for products that should accompany the version of another, third-party product (and pros and cons of one proposal) &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080360 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080360" class="post-1080360 software type-software status-publish hentry category-software tag-branching tag-git tag-version-control"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Git &#8211; A decent git branching model for products that should accompany the version of another, third-party product (and pros and cons of one proposal)</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">branching</span><span class="mr-2 badge badge-info">git</span><span class="mr-2 badge badge-warning">version control</span></p><div class="entry-content"><p><strong>Note:</strong> <em>My question is focused in my specific problem (which involves Liferay) but I hope it can be useful for anyone who needs to maintain various versions of a same project on git.</em></p><p>I work on a company which writes a lot of plugins for <a href="http://liferay.com/" rel="noreferrer">Liferay Portal</a>. These plugins (portlets, themes etc.) are usually reusable and, of course, should be updated for new versions of the portal.</p><p>However, it is usual to have to migrate, let us say, a portlet to a new version of Liferay <em>and</em> to maintain its previous version. Also, frequently we have to create very specific customizations for some clients, which does not make sense to be added to the &#34;main version&#34;.</p><p>These requisites complicate our work but, fortunately, we can assume some simplifications. For example, the plugins are frequently updated by only one programmer at a time. It is very rare to have two or more features being added to a plugin at the same time.</p><p>Now, we are migrating to <a href="http://gitorious.org/" rel="noreferrer">Gitorious</a>. We are trying to conceive a branching model for such a scenario.</p><h1>My model</h1><p>What I proposed was:</p><ol><li>Each plugin would have its own repository in Gitorious inside a project. For example, a portlet for displaying kittens would have a <code>kittens-portlet</code> repository inside the <code>liferay-portlets</code> project.</li><li>When creating a new plugin, create it at a branch named according to the Liferay version (for example, <code>lf5.2</code>).</li><li>Each time a update is made on the plugin, the update is approved and deployed in production, tag the plugin with a version (for example, <code>lf5.2v1</code>, <code>lf5.2v2</code> etc.)*</li><li>Every time a plugin should be ported to a new version of Liferay, we branch the most recent version (creating, for example, the branch <code>lf6.0</code>).</li><li>Once in production, the head of the new branch will receive a tag such as <code>lf6.0v1</code>.</li><li>Every time we have to customize a plugin in a client-specific way, we create a branch with the name of the client (for example, we would create a branch <code>lf5.2clientcorp</code> for our client &#34;ClientCorp Inc.&#34;)</li></ol><p>This is an unusual model: it would have no <code>master</code> and a lot of not-merging branches. This is how I <em>suppose</em> a repository with such model would look like:</p><p><img src="../../../i.stack.imgur.com/IQ6jZ.png" alt="How I suppose my branches would work."/></p><p>A friend found this system rather complex and error-prone. He suggested the excellent and popular <a href="http://nvie.com/posts/a-successful-git-branching-model/" rel="noreferrer">Vincent Driessen model</a>, which I found still harder to manage and discipline-demander. It is great (and tested!) of course but seems too complex to our situation.</p><h1>My friend&#39;s model</h1><p>Then he suggested another model: we would have a repository for each plugin in a Liferay version (so we would start creating a <code>kittens-lf5.2-portlet</code> and then a <code>kittens-lf6.0-portlet</code>), each one with a <code>master</code> branch and a <code>develop</code> branch. The <code>master</code> would be always ready for deployment. (Or it could be the other way around, <code>master</code> and <code>stable</code>, as suggested by <a href="http://stevelosh.com/blog/2010/05/mercurial-workflows-stable-default/#why-default-and-stable-instead-of-default-and-dev" rel="noreferrer">Steve Losh</a>).</p><p>This is very simple, but I did not like this system:</p><ol><li>it could result in an awful lot of repositories in a project, making Gitorious hard to browse.</li><li>The name of the directory of the project is relevant. If someone clone the repository to a <code>kittens-lf6.0-portlet</code> dir and generate the WAR with ant (as usual), the WAR name will be <code>kittens-lf6.0-portlet</code> as well. Old versions of this portlet (named <code>kittens-portlet</code> for example) would be considered as different (and probably missing) portlets in a upgraded portal. A bit of care can avoid it but I would prefer to avoid it.</li><li>The different versions of the same plugin would be maintained apart. I break my heart üôÅ</li><li><code>kittens-lf6.0-portlet</code> is a ugly name for a repository, I think.</li></ol><p>I suspect the two last points &#8211; which are the two more subjective ones, too &#8211; are the main reason for my unwillingness. Nonetheless, all four objections stand.</p><p>OTOH, my own proposal seems strange to myself and I wonder if there is hidden bugs on it. OT3rdH git is so powerful and flexible that I think I should feel no shame on exploring its possibilities.</p><p>So, I ask:</p><ol><li>What would be the best model? My proposal? My friend&#39;s model? The now traditional Vincent Driessen system?</li><li>What other branching model would you suggest?</li><li>If you think my model is bad, why do you think so? I would love to learn what are the drawbacks and blind spots.</li></ol><p>* Actually, I would prefer to tag the commit with a version such as <code>v1</code> but apparently a tag in git is not scoped in the branch &#8211; that is, I could not have a 1 <code>v1</code> tag in <code>lf5.2</code> and another one in <code>lf6.0</code> &#8211; so I have to name the branch. Is it correct BTW?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If I read this properly branches are basically a one-shot deviation from your main line of development, never meant to be merged back into the main line and advances in the main line never get applied to these branches.  The only deviation would be that bug fixes appropriate to the version the branch was based on need to be applied to the branch.</p><p>The answer now pivots on your day to day workflow, the number of developers working on any one branch or number of changes are red herrings.  I see your primary need as wanting to know what branches get a bug fix update from a main branch change and for this I think that the combined repository with branches will be more efficient since it&#39;s all in one place.  Were there never any need for cross pollination then separate repositories would enforce that, but that scenario doesn&#39;t match the reality of your project as I understand it.</p><p>The Driessen model would work well if your project needed to merge branches back into the main line of development, but you do not need that.  Even so I think that there is merit in maintaining an InDevelopment and StableRelease concept if you&#39;re working on a product that&#39;s live.</p><p>So to summarize I think that your project would work well with your branching model plus a dash of Driessen for your main line.  Your mileage may vary; I&#39;ve always worked with a &#34;pending release &#34; branch that turns into a &#34;live&#34; branch and a separate &#34;next release&#34; that all require cross pollination of fixes and changes at various points so my perception may be biased.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../git-how-to-put-different-versions-of-your-library-under-version-control-do-you-use-tags-or-branches-or-another-method/'>Git &#8211; How to put different versions of your library under version control? Do you use tags? Or branches? Or another method</a></li><li class="list-group-item"><a href='../git-an-effective-git-process-for-managing-our-central-code-library/'>Git &#8211;  an effective git process for managing our central code library</a></li><li class="list-group-item"><a href='../git-branching-and-tagging-best-practices/'>Git branching and tagging best practices</a></li><li class="list-group-item"><a href='../git-in-git-is-it-a-bad-idea-to-create-a-tag-with-the-same-name-as-a-deleted-branch/'>Git &#8211; In git, is it a bad idea to create a tag with the same name as a deleted branch</a></li><li class="list-group-item"><a href='../git-maintain-hundreds-of-customized-branches-over-master-branch/'>Git &#8211; Maintain hundreds of customized branches over master branch</a></li><li class="list-group-item"><a href='../git-should-versions-be-bumped-in-dev-branches-or-master-branch/'>Git &#8211; Should versions be bumped in dev branches or master branch</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>