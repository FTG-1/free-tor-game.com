<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Mvc &#8211; Should you write your back-end as an API &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063159 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063159" class="post-1063159 software type-software status-publish hentry category-software tag-api-design tag-asp-net-mvc tag-mvc"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Mvc &#8211; Should you write your back-end as an API</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api-design</span><span class="mr-2 badge badge-info">asp.net-mvc</span><span class="mr-2 badge badge-warning">mvc</span></p><div class="entry-content"><p>I had a heated discussion today about our MVC application. We have a website written in MVC (<a href="http://en.wikipedia.org/wiki/ASP.NET">ASP.NET</a>), and it usually follows the pattern of do something in the view -&gt; hit the controller -&gt; controller builds a model (calls a Manager that gets the data, builds the model in the controller method itself) -&gt; model goes to view -&gt; rinse &amp; repeat.</p><p>He said that our code was too tightly coupled. For example, if we wanted a desktop application as well, we would not be able to use our existing code.</p><p>The solution and best practice he said is to build an API, and then build your website on top of your API, and then building a desktop application, mobile app, etc. is very simple.</p><p>This seems like a bad idea to me for various reasons.</p><p>Anyway I can&#39;t seem to find anything by googling that might discuss this practice. Does anyone have any information about pros, cons, why you should, why you shouldn&#39;t or further reading?</p><p>Some reasons I think it&#39;s a bad idea:</p><ul><li><p>It&#39;s way too abstract to run your backend off an API. You&#39;re trying to make it too flexible which will make it an unmanagable mess.</p></li><li><p>All the stuff built into MVC seems useless, like roles and authentication. For example, [Authorize] attributes and security; you will have to roll your own.</p></li><li><p>All your API calls will require security information attached, and you will have to develop a token system and whatnot.</p></li><li><p>You will have to write complete API calls for every single function your program will ever do. Pretty much every method you want to implement will need to be ran off an API. A Get/Update/Delete for every user, plus a variant for each other operation eg update user name, add user to a group, etc. etc. and each one would be a distinct API call.</p></li><li><p>You lose all kinds of tools like interfaces and abstract classes when it comes to APIs. Stuff like <a href="http://en.wikipedia.org/wiki/Windows_Communication_Foundation">WCF</a> has very tenuous support for interfaces.</p></li><li><p>You have a method that creates a user, or performs some task. If you want to create 50 users, you can just call it 50 times. When you decide to do this method as an API your local webserver can named-pipes connect to it and no problem &#8211; your desktop client can hit it too, but suddenly your bulk user creation will involve hammering the API over the Internet 50 times which isn&#39;t good. So you have to create a bulk method, but really you&#39;re just creating it for desktop clients. This way, you end up having to a) modify your API based on what&#39;s integrating with it, and you can&#39;t just directly integrate with it, b) do a lot more work to create an extra function.</p></li><li><p><a href="https://en.wikipedia.org/wiki/You_Ain%27t_Gonna_Need_It">YAGNI</a>. Unless you&#39;re specifically planning to write two identically functioning applications, one web and one Windows application for example, it is a huge amount of extra development work.</p></li><li><p>Debugging is much harder when you can&#39;t step through end-to-end.</p></li><li><p>Lots of independent operations that will require lots of back and forth, for example some code might get the current user, check the user is in the administrator role, get the company the user belongs to, get a list of other members, send them all an email. That would require a lot of API calls, or writing a bespoke method the specific task you want, where that bespoke method&#39;s only benefit would be speed yet the downside would be it would be inflexible.</p></li><li><p>Probably some more reasons these are just off the top of my head.</p></li></ul><p>It just seems to me like unless you really need two identical applications, then it&#39;s really not worth it. I&#39;ve never seen an ASP.NET application built like this either, you&#39;d have to write two separate applications (the API and your code) and version control them both as well (if your user page gets a new field, you&#39;d have to update the API and your consuming code simultaneously to ensure no ill-effects or put lots of extra work into keeping it robust).</p><hr/><p>Edit: Some great responses, really starting to get a good idea of what this all means now. So to expand on my question, how would you structure an MVC app to follow this API structure?</p><p>For example, you have a website that displays info about a user. Under MVC, you have:</p><p>View &#8211; (CS)HTML page that displays a UserViewModel<br /> Controller &#8211; Calls GetUser() and creates a UserViewModel that it passes to the view<br /> Manager class (sort of your API) that has a GetUser method.</p><p>The controller does GetUser() but you want a desktop app too. This means your GetUser needs to be exposed via some kind of API. You might want a TCP connection, either WCF, or perhaps Remoting. You also want a mobile app which will be RESTful since persistent connections are flaky.</p><p>So would you then write an API for each one, a WCF web service that has a method GetUser() and the code just does <code>return new UserManager().GetUser()</code> ? And an mvc 4 web api method that does the same thing? While continuing to call GetUser directly in your MVC controller method?</p><p>Or would you choose the solution that would work for all three (web api REST service) and build everything on that, so all three apps make API calls (the mvc ones, to the local machine).</p><p>And is this just a theoretical perfect scenario? I can see large overheads in developing this way, especially if you have to develop in a way that will let you do operations in a RESTful manner. I think some of this has been covered in the replies.</p><hr/><p>Edit 2: After reading more stuff, I&#39;ve put a comment below that I think might explain it. The question is a bit of a trick question I think. Should you write your back-end as an API had me confused thinking there should be a single webservice that everything (mvc app, desktop app, mobile app) calls to do stuff.</p><p>The conclusion I have come to is that what you should really do is make sure your business logic layer is correctly decoupled. Looking at my code, I do this already &#8211; the controller will call <code>GetUser()</code> on a manager, then create a view model from it to render with a View. So really, the business logic layer <em>is</em> an API. If you want to call it from a desktop app though, you&#39;ll need to write something like a WCF service to facilitate calling it. Even just having a WCF method called <code>GetUser()</code> that contains the code <code>return MyBusinessLayer.GetUser()</code> would be sufficient. So the API is the business logic, and WCF / web api etc. are just titbits of code to let external applications in to call it.</p><p>So there is some overhead, in that you have to wrap your business logic layer in different APIs depending on what you need, and you will have to write an API method for each operation you want your other apps to do, plus you will need to sort out a way to do authentication, but for the most part it&#39;s the same. Stick your business logic in a separate project (class library), and you will probably have no issue!</p><p>Hopefully this interpretation is correct. Thanks for all the discussion/comments it has generated.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Yes you should.</p><p>It not only makes your back end re-usable but allows for more security and better design. If you write your backend as part of a single system, you&#39;re making a monolithic design that&#39;s never easy to extend, replace or enhance.</p><p>One area where this is popular at the moment is in <a href="http://martinfowler.com/articles/microservices.html" rel="noreferrer">Microservices</a>. Where the backend is split into many little (or even large) services that each provide an API that the client system consumes. If you imagine using many 3rd party sources of data in your application you realise you might be doing this already.</p><p>One other benefit is that the construction and maintenance of each service can be handed off to a different team, they can add features to it that do not affect any other team producing product. Only when they are done and release their service do you them start to add features to your product to consume them. This can make development much smoother (though potentially slower overall, you would tend to get better quality and understandable)</p><hr/><p><strong>Edit:</strong> OK I see your problem. You think of the API as a remote library. It&#39;s not. Think of the service as more of a data providing service. You call the service to get data and then perform operations on that data locally. To determine if a user is logged on you would call &#34;<code>GetUser</code>&#34; and then look at the <code>&#39;logged on&#39;</code> value, for example. (<a href="https://dictionary.cambridge.org/dictionary/english/ymmv" rel="noreferrer">YMMV</a> with that example, of course).</p><p>Your example for bulk user creation is just making excuses - there is no difference here, whatever you could have done in a monolithic system can still be done in a service architecture (e.g. you would have passed an array of users to bulk-create, or a single one to create. You can still do exactly the same with services).</p><p>MVC is already based around the concept of isolated services, only the MVC frameworks bundle them into a single project. That doesn&#39;t mean you lose anything except the bundled helpers that your framework is giving you. Use a different framework and you&#39;ll have to use different helpers. Or, in this case, rolling your own (or adding them directly using a library).</p><p>Debugging is easy too - you can thoroughly test the API in isolation so you don&#39;t need to debug into it (and you can debug end-to-end, Visual Studio can attach to several processes simultaneously).</p><p>Things like extra work implementing security is a good thing. Currently, if you bundle all the code into your website, if a hacker gains access to it, they also gain access to everything, DB included. If you split it into an API the hacker can do very little with your code unless they also hack the API layer too - which will be incredibly difficult for them (ever wondered how attackers gain vast lists of all website&#39;s users or cc details? It&#39;s because they hacked the OS or the web server and it had a direct connection to the DB where they could run &#34;<code>select * from users</code>&#34; with ease).</p><p>I&#39;ll say that I have seen many web sites (and client-server applications) written like this. When I worked in the financial services industry, nobody would ever write a website all-in-one, partly as it&#39;s too much of a security risk, and partly because much development is pretty GUIs over stable (i.e. legacy) back-end data processing systems. It&#39;s easy to expose the DP system as a website using a service style architecture.</p><p><strong>2nd Edit:</strong> Some links on the subject (for the OP):</p><p>Note that when talking about these in context of a website, the web server should be considered the presentation layer, because it is the client that calls the other tiers, and also because it constructs the UI views that are sent to the browser for rendering. It&#39;s a big subject, and there are many ways to design your application - data-centric or domain-centric (I typically consider domain centric to be &#39;purer&#39;, but <a href="https://dictionary.cambridge.org/dictionary/english/ymmv" rel="noreferrer">YMMV</a>), but it all comes down to sticking a logic tier in between your client and your DB. It&#39;s a little like MVC if you consider the middle, API, tier to be equivalent to your Model, only the model is not a simple wrapper for the DB, it&#39;s richer and can do much more (e.g. aggregate data from 2 data sources, post-process the data to fit the API, cache the data, etc.):</p><ul><li><a href="https://en.wikipedia.org/wiki/Multitier_architecture" rel="noreferrer">Multitier architecture</a></li><li><a href="https://msdn.microsoft.com/en-us/library/ms973279.aspx" rel="noreferrer">Building an N-Tier Application in .NET</a></li><li><a href="https://www.youtube.com/watch?v=KlHvRKSH4pk" rel="noreferrer">Youtube tutorial - see the related links too, inc one to implement in C#</a></li><li><a href="http://www.pluralsight.com/courses/n-tier-apps-part1" rel="noreferrer">Pluralsight training course (free trial or paid)</a></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../mvc-implement-service-layer-in-mvc/'>Mvc &#8211; Implement service layer in MVC</a></li><li class="list-group-item"><a href='../java-communication-between-view-and-model/'>Java &#8211; Communication between View and Model</a></li><li class="list-group-item"><a href='../javascript-pure-front-end-javascript-with-web-api-versus-mvc-views-with-ajax/'>Javascript &#8211; Pure Front end JavaScript with Web API versus MVC views with ajax</a></li><li class="list-group-item"><a href='../mvc-where-to-put-user-interface-domain-model-manipulation-logic-transferring-data-from-the-view-to-domain-model/'>Mvc &#8211; Where to put User Interface/Domain Model manipulation logic (transferring data from the view to Domain Model)</a></li><li class="list-group-item"><a href='../should-you-retry-500-api-errors/'>Should you retry 500 API errors</a></li><li class="list-group-item"><a href='../c-how-to-manage-objects-that-are-shared-between-back-end-services-and-front-end-services-apps/'>C# &#8211; How to manage objects that are shared between back-end services and front-end services/apps</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>