<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Endianness at bit level &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083557 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083557" class="post-1083557 software type-software status-publish hentry category-software tag-bit tag-byte tag-c tag-endianness"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Endianness at bit level</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">bit</span><span class="mr-2 badge badge-info">byte</span><span class="mr-2 badge badge-warning">c</span><span class="mr-2 badge badge-primary">endianness</span></p><div class="entry-content"><p>I am learning the union and struct and I wrote the code below. What I do not understand is why the output is different when I change from a little endian to a big endian machine.</p><p>My understanding is that endianness is important when you have more than one byte. But I have only 8 bits.</p><p>This code is not portable at this time and I want to understand how to make it portable. I would like to avoid detecting the endianness or using bit shifting techniques. I know about htonX functions but I do not think that applies here.</p><pre><code>    #include &lt;stdio.h&gt;

    int main()
    {
      typedef union {
        struct {
          unsigned char b0:1;
          unsigned char b1:1;
          unsigned char b2:1;
          unsigned char b3:1;
          unsigned char b4:1;
          unsigned char b5:1;
          unsigned char b6:1;
          unsigned char b7:1;
        } bits;
        unsigned char byte;
      } HW_Register;

      HW_Register reg;
      reg.byte = 3;

      printf(&#34;%d %d %d %d %d %d %d %d\n&#34;, 
        reg.bits.b0,
        reg.bits.b1,
        reg.bits.b2,
        reg.bits.b3,
        reg.bits.b4,
        reg.bits.b5,
        reg.bits.b6,
        reg.bits.b7);

      printf(&#34;%d\n&#34;,reg.byte);
      printf(&#34;Size of reg.byte: %d\n&#34;, sizeof(reg.byte));
    }
</code></pre></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The order in which bit fields are placed in an integer is independent of the order in which bytes are placed in an integer. Both are implementation details. That is generally not a problem, because memory is only byte addressable, and all hardware preserves the <em>value</em> of a byte during transmissions.</p><p>Yet, while bit and byte ordering are theoretically independent of each other, CPU documentations tend to number the bits in the same order as they number the bytes: X86 documentation will refer to the least significant bit as bit 0, while Power documentation will refer to the most significant bit as bit 0. Your compiler writers seem to have chosen the same numbering as the respective documentation.</p><p>As such, your only hope of achieving portability, is to do the bit fiddling yourself, defining a <code>flags</code> variable and a bunch of constants to set/mask the respective bits:</p><pre><code>const unsigned char kBit0 = 1 &lt;&lt; 0,
                    kBit1 = 1 &lt;&lt; 1,
                    kBit2 = 1 &lt;&lt; 2,
                    kBit3 = 1 &lt;&lt; 3,
                    kBit4 = 1 &lt;&lt; 4,
                    kBit5 = 1 &lt;&lt; 5,
                    kBit6 = 1 &lt;&lt; 6,
                    kBit7 = 1 &lt;&lt; 7,

unsigned char reg = 3;
printf(&#34;%d %d %d %d %d %d %d %d\n&#34;,
    !!(reg &amp; kBit0),
    !!(reg &amp; kBit1),
    !!(reg &amp; kBit2),
    !!(reg &amp; kBit3),
    !!(reg &amp; kBit4),
    !!(reg &amp; kBit5),
    !!(reg &amp; kBit6),
    !!(reg &amp; kBit7));
</code></pre><p>This numbers the bits in little endian fashion, irrespective of the machine. If you want big endian numbering, just define your constants accordingly.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/concept-of-bit-fields/'>Concept of bit fields</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/8-bit-and-1-byte-is-this-a-valid-question-to-be-asked/'>8 bit and 1 byte, is this a valid question to be asked</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-clearing-the-lowest-set-bit-of-a-number/'>C++ &#8211; Clearing the lowest set bit of a number</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/is-a-least-significant-bit-used-anywhere-practically-today/'>Is a &#8216;least significant bit&#8217; used anywhere practically today</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/byte-addressable-vs-bit-addressable/'>Byte addressable vs bit addressable</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/database-advantages-and-disadvantages-of-using-bit-masks-in-database/'>Database &#8211; Advantages and disadvantages of using bit masks in database</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>