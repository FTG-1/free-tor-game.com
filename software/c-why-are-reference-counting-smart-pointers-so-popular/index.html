<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Why are reference-counting smart pointers so popular &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065185 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065185" class="post-1065185 software type-software status-publish hentry category-software tag-c tag-garbage-collection"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Why are reference-counting smart pointers so popular</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">garbage-collection</span></p><div class="entry-content"><p>As I can see, smart pointers are used extensively in many real-world C++ projects.</p><p>Though some kind of smart pointers are obviously beneficial to support RAII and ownership transfers, there is also a trend of using shared pointers <em>by default</em>, as a way of <em>&#34;garbage collection&#34;</em>, so that the programmer do not have to think about allocation that much.</p><p>Why are shared pointers more popular than integrating a proper garbage collector like <a href="http://www.hboehm.info/gc/">Boehm GC</a>? (Or do you agree at all, that they are more popular than actual GCs?)</p><p>I know about two advantages of conventional GCs over reference-counting:</p><ul><li>Conventional GC algorithms has no <strong>problem with reference-cycles</strong>.</li><li>Reference-count is generally <strong>slower</strong> than a proper GC.</li></ul><p>What are the reasons for using reference-counting smart pointers?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Some advantages of reference counting over garbage collection:</p><ol><li><p>Low overhead.  Garbage collectors can be quite intrusive (e.g. making your program freeze up at unpredictable times while a garbage collection cycle processes) and quite memory-intensive (e.g. your process&#39;s memory footprint unnecessarily grows to many megabytes before garbage-collection finally kicks in)</p></li><li><p>More predictable behavior.  With reference counting, you are guaranteed that your object will be freed the instant the last reference to it goes away.  With garbage collection, on the other hand, your object will be freed &#34;sometime&#34;, when the system gets around to it.  For RAM this isn&#39;t usually a big problem on desktops or lightly loaded servers, but for other resources (e.g. file handles) you often need them be closed ASAP to avoid potential conflicts later on.</p></li><li><p>Simpler.  Reference counting can be explained in a few minutes, and implemented in an hour or two.  Garbage collectors, especially ones with decent performance, are extremely complex and not many people understand them.</p></li><li><p>Standard.  C++ includes reference counting (via shared_ptr) and friends in the STL, which means that most C++ programmers are familiar with it and most C++ code will work with it.  There isn&#39;t any standard C++ garbage collector, though, which means that you have to choose one and hope it works well for your use case -- and if it doesn&#39;t, it&#39;s your problem to fix, not the language&#39;s.</p></li></ol><p>As for the alleged downsides of reference counting -- not detecting cycles is an issue, but one that I&#39;ve never personally ran into in the last ten years of using reference counting.  Most data structures are naturally acyclical, and if you do come across a situation where you need cyclical references (e.g. parent pointer in a tree node) you can just use a weak_ptr or a raw C pointer for the &#34;backwards direction&#34;.  As long as you are aware of the potential problem when you&#39;re designing your data structures, it&#39;s a non-issue.</p><p>As for performance, I&#39;ve never had a problem with the performance of reference counting.  I have had problems with the performance of garbage collection, in particular the random freeze-ups that GC can incur, to which the only solution (&#34;don&#39;t allocate objects&#34;) might as well be rephrased as &#34;don&#39;t use GC&#34;.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../why-garbage-collection-if-smart-pointers-are-there/'>Why Garbage Collection if smart pointers are there</a></li><li class="list-group-item"><a href='../how-common-are-circular-references-would-reference-counting-gc-work-just-fine/'>How common are circular references? Would reference-counting GC work just fine</a></li><li class="list-group-item"><a href='../garbage-collectors-and-pointers-reference/'>Garbage collectors and pointers/ reference</a></li><li class="list-group-item"><a href='../c-merits-of-copy-on-write-semantics/'>C++ &#8211; Merits of copy-on-write semantics</a></li><li class="list-group-item"><a href='../java-a-reference-counting-pattern-for-memory-managed-languages/'>Java &#8211; A reference counting pattern for memory managed languages</a></li><li class="list-group-item"><a href='../object-oriented-c-gof-design-patterns-heavily-depends-on-new-or-shared_ptr/'>Object-oriented &#8211; C++ Gof Design Patterns heavily depends on new or shared_ptr</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>