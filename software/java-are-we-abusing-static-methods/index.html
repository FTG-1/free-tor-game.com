<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Are we abusing static methods &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069035 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069035" class="post-1069035 software type-software status-publish hentry category-software tag-java tag-object-oriented tag-state tag-static tag-static-methods"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Are we abusing static methods</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">object-oriented</span><span class="mr-2 badge badge-warning">state</span><span class="mr-2 badge badge-primary">static</span><span class="mr-2 badge badge-danger">static methods</span></p><div class="entry-content"><p>A couple of months ago I started working in a new project, and when going through the code it stroke me the amount of static methods used. Not only utility methods as <code>collectionToCsvString(Collection&lt;E&gt; elements)</code>, but also plenty of business logic is kept in them.</p><p>When I asked the guy responsible for the rationale behind this, he said it was a way of <em>escaping from Spring&#39;s tyranny</em>. It goes something around this thinking process: to implement a customer receipt creation method, we could have a service</p><pre><code>@Service
public class CustomerReceiptCreationService {

    public CustomerReceipt createReceipt(Object... args) {
        CustomerReceipt receipt = new CustomerReceipt();
        // creation logic
        return receipt;
    }
}
</code></pre><p>Now, the guy said that he dislikes having classes unnecessarily managed by Spring, basically because it imposes the restriction that client classes must be Spring beans themselves. We end up having everything managed by Spring, which pretty much forces us to work with stateless objects in a procedural way. More or less what is stated here <a href="https://www.javacodegeeks.com/2011/02/domain-driven-design-spring-aspectj.html" rel="noreferrer">https://www.javacodegeeks.com/2011/02/domain-driven-design-spring-aspectj.html</a></p><p>So instead of the above code, he has</p><pre><code>public class CustomerReceiptCreator {

    public static CustomerReceipt createReceipt(Object... args) {
        CustomerReceipt receipt = new CustomerReceipt();
        // creation logic
        return receipt;
    }
}
</code></pre><p>I could argue to the point of avoiding Spring managing our classes when possible, but what I don&#39;t see is the benefit of having everything static. These static methods are also stateless, so also not very OO. I would feel more comfortable with something as</p><pre><code>new CustomerReceiptCreator().createReceipt()
</code></pre><p>He claims that static methods have some extra benefits. Namely:</p><ul><li>Easier to read. Import the static method and we only need to care<br /> about the action, no what class is doing it.</li><li>Is obviously a method<br /> free of DB calls, so performance-wise cheap; and it is a good thing<br /> to make it clear, so that the potential client does need to go into<br /> the code and check for that.</li><li>Easier to write tests.</li></ul><p>But I just feel there is something not completely right with this, so I would like to hear some more seasoned developers&#39; thoughts on this.</p><p>So my question is, what are the potential pitfalls of this way of programming?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>What&#39;s the difference between <code>new CustomerReceiptCreator().createReceipt()</code> and <code>CustomerReceiptCreator.createReceipt()</code>? Pretty much none. The only significant difference is that the first case has considerably more awkward syntax. If you follow the first in the belief that somehow avoiding static methods makes your code better OO, you are gravely mistaken. Creating a object just to call a single method on it is a static method by obtuse syntax.</p><p>Where things do get different is when you inject <code>CustomerReceiptCreator</code> instead of <code>new</code>ing it. Let&#39;s consider an example:</p><pre><code>class OrderProcessor {
    @Inject CustomerReceiptCreator customerReceiptCreator;

    void processOrder(Order order) {
        ...
        CustomerReceipt receipt = customerReceiptCreator.createReceipt(order);
        ...
    }
}
</code></pre><p>Let&#39;s compare this a static method version:</p><pre><code>void processOrder(Order order) {
    ...
    CustomerReceipt receipt = CustomerReceiptCreator.createReceipt(order);
    ...
}
</code></pre><p>The advantage of the static version is that I can readily tell you how it interacts with the rest of the system. It doesn&#39;t. If I haven&#39;t used global variables, I know that that the rest of the system hasn&#39;t somehow been changed. I know that no other part of the system might be affecting the receipt here If I&#39;ve used immutable objects, I know that order hasn&#39;t changed, and the createReceipt is a pure function. In that case, I can freely move/remove/etc this call without worrying about random unpredictable effects elsewhere.</p><p>I cannot make the same guarantees if I&#39;ve injected the <code>CustomerReceiptCreator</code>. It might have internal state that is changed by the call, I might be affected by or change other state. There might be unpredictable relationships between statements in my function such that changing the order will introduce surprising bugs.</p><p>On the other hand, what happens if <code>CustomerReceiptCreator</code> suddenly needs a new dependency? Let&#39;s say it needs to check a feature flag. If we were injecting, we could do something like:</p><pre><code>public class CustomerReceiptCreator {
    @Injected FeatureFlags featureFlags;

    public CustomerReceipt createReceipt(Order order) {
        CustomerReceipt receipt = new CustomerReceipt();
        // creation logic
        if (featureFlags.isFlagSet(Flags::FOOBAR)) {
           ...
        }
        return receipt;
    }
}
</code></pre><p>Then we are done, because the calling code will be injected with a <code>CustomerReceiptCreator</code> which will automatically get injected a <code>FeatureFlags</code>.</p><p>What if we were using a static method?</p><pre><code>public class CustomerReceiptCreator {
    public static CustomerReceipt createReceipt(Order order, FeatureFlags featureFlags) {
        CustomerReceipt receipt = new CustomerReceipt();
        // creation logic
        if (featureFlags.isFlagSet(Flags::FOOBAR)) {
           ...
        }
        return receipt;
    }
}
</code></pre><p>But wait! the calling code also needs to be updated:</p><pre><code>void processOrder(Order order) {
    ...
    CustomerReceipt receipt = CustomerReceiptCreator.createReceipt(order, featureFlags);
    ...
}
</code></pre><p>Of course, this still leaves the question of where <code>processOrder</code> gets its <code>FeatureFlags</code> from. If we&#39;re lucky, the trail ends here, if not, the necessity of passing through FeatureFlags gets pushed further up the stack.</p><p>There is a trade-off here. Static methods requiring explicitly passing around the dependencies which results in more work. Injected method reduce the work, but make the dependencies implicit and thus hidden making code harder to reason about.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-substitute-for-static-inheritance/'>C# &#8211; substitute for static inheritance</a></li><li class="list-group-item"><a href='../java-why-were-default-and-static-methods-added-to-interfaces-in-java-8-when-we-already-had-abstract-classes/'>Java &#8211; Why were default and static methods added to interfaces in Java 8 when we already had abstract classes</a></li><li class="list-group-item"><a href='../c-force-derived-class-to-implement-static-method-c/'>C# &#8211; Force Derived Class to Implement Static Method C#</a></li><li class="list-group-item"><a href='../java-is-it-okay-to-abuse-spring-beans-component-rather-than-use-static-final-utility-classes/'>Java: Is it okay to abuse Spring beans (@Component) rather than use static final utility classes</a></li><li class="list-group-item"><a href='../c-extension-methods-vs-static-class-methods/'>C# &#8211; Extension methods vs. Static Class Methods</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>