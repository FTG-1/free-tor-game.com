<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; Which pattern is suitable to send multiple type of responses through REST web service &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076990 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076990" class="post-1076990 software type-software status-publish hentry category-software tag-design-patterns tag-rest tag-web-services"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; Which pattern is suitable to send multiple type of responses through REST web service</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span><span class="mr-2 badge badge-info">rest</span><span class="mr-2 badge badge-warning">web services</span></p><div class="entry-content"><p>I have bunch of REST style web services which support XML and JSON type responses. Now I have to modify existing web services such that they provide Protobuf type of responses.</p><p>Developer who has developed these services has created three layers. <code>Service</code> layer, <code>DAO</code> layer and <code>Processing</code> layer.</p><p>Service layer calls one of the method of processing layer and processing layer calls DAO methods and returns either JSON or XML type response (POJO) to the service. Service layer then sends back this POJO to client.</p><p>For example, if service to add <code>list of items</code> is called then that code roughly looks as shown below:</p><pre><code>@Path(&#34;/item&#34;)
class ShoppingItemService {
    // annotations
    public ItemAddResponse addList(/* parameters required for this method */) {
        ItemProcessor processor = new ItemProcessor();
        ItemAddResponse response = processor.process(/* pass some data to processing layer */);
        return Response.ok().format(&#34;XML&#34;).build(response);
    }
}
</code></pre><p>Here <code>ItemAddResponse</code> is already annotated with <code>JAXB</code> type annotations for <code>XML</code> response and other annotations for <code>JSON</code> response.</p><p>I cannot reuse same <code>ItemAddResponse</code> because Protobuf generates its own classes using schema files.</p><p>Processor class has all the business logic and If I want to add support for Protobuf  then I have create new method in processor and copy-paste almost all the business logic, but just return object of protobuf generated class.</p><p>This approach is time consuming and there atleast 50+ similar methods where I have to do copy-paste work. I want to avoid this and would like to design some elegant solution.</p><p>I would like to know how can I add support for Protobuf with minimal amount of changes?</p><p>I am reading <code>Head First Design patterns</code> book but this book is really huge and it will take lot of time to find proper design pattern.</p><p>Is there any design pattern which can be useful in this type of situations?</p><p>Thanks,</p><p>Chandrashekhar</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>If I want to add support for Protobuf then I have create new method in processor and copy-paste almost all the business logic</p></blockquote><p>NO!</p><p><strong>An object oriented approach</strong></p><ul><li><code>ItemProcessor</code> &#34;has all the business logic&#34;. Don&#39;t pollute the class, keep it strictly business logic</li><li>Your data/response structure is universal. JSON, XML, protobuf are just different syntactical representations of the same thing.</li><li>All your existing layers operate on the same data structure, all they need is to receive or send in their desired form (JSON, XML, protobuf)</li><li>You need something that transforms between the various formats so that the client, <code>ItemProcessor</code>, whatever, all get the format they expect.</li></ul><p><strong>OO Design Sketch</strong></p><ul><li><p>A <code>ItemProcessor</code> instance needs a <code>Translator</code> object to get the data to or from, or both, the desired form.</p></li><li><p><code>ItemProcessor</code> maybe needs different <code>Translator</code>s for interacting w/ the client and DAO respectively.</p></li><li><p>So we need to make a <code>ItemProcessor</code>/<code>Translator</code> composite at run time. <a href="http://www.oodesign.com/creational-patterns/" rel="nofollow"><strong>creational design patterns</strong></a> help us do that.</p></li><li><p>It may be that you end up designing a single, static, <code>Translator</code> class.</p></li><li><p>Design patterns do not dictate your design. To start with a blank sheet of paper and say &#34;I want to use the xyz design pattern&#34; is wrong, wrong, wrong.</p></li></ul><p><strong>Fitting a pattern to your design</strong></p><p>You still need to design things. Only you can define the various parts overall. From there, a creational pattern shows us how to decouple the creation of an object from its user. In this way we avoid the problem as quoted at the beginning of this answer.</p><p>Look at <a href="http://www.oodesign.com/creational-patterns/" rel="nofollow">creation design patterns</a> like <code>factory</code>, <code>abstract factory</code>, and <code>builder</code>.</p><p>Which design pattern you use is generally driven by the complexity of building the given object. That there are 3 kinds of factory has to do with complexity.</p><p>You will tell the factory, etc. to build you something with &#34;JSON - protobuffer&#34; transformation for example. So maybe you get back a <code>ItemProcessor</code> that <em>has a</em> JSONprotobufTranformer object, or XMLprotobufTransformer, or ... whatever.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-wrapping-rest-based-web-service/'>Rest &#8211; Wrapping REST based Web Service</a></li><li class="list-group-item"><a href='../unit-testing-how-to-unit-test-a-class-which-requires-a-web-service-call/'>Unit-testing &#8211; How to unit test a class which requires a web service call</a></li><li class="list-group-item"><a href='../restful-api-should-i-be-returning-the-object-that-was-created-updated/'>RESTful API. Should I be returning the object that was created / updated</a></li><li class="list-group-item"><a href='../java-should-i-return-a-204-or-a-404-response-when-a-resource-is-not-found/'>Java &#8211; Should I return a 204 or a 404 response when a resource is not found</a></li><li class="list-group-item"><a href='../mvc-is-it-possible-to-add-service-layer-in-mvc-pattern/'>Mvc &#8211; Is it possible to add Service layer in MVC pattern</a></li><li class="list-group-item"><a href='../java-injecting-dao-dependencies-into-service-class-in-core-java/'>Java &#8211; Injecting DAO dependencies into Service Class in Core Java</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>