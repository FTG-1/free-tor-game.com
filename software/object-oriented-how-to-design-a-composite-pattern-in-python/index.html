<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; How to design a composite pattern in Python &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073468 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073468" class="post-1073468 software type-software status-publish hentry category-software tag-architecture tag-design tag-design-patterns tag-object-oriented tag-python"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; How to design a composite pattern in Python</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">object-oriented</span><span class="mr-2 badge badge-danger">python</span></p><div class="entry-content"><h1>The concept</h1><p>I&#39;m programming an interface over pygame as a personal project, to make the creation of games easier for me.</p><p>So far I managed to design an architecture that behaves like this :</p><ul><li>Objects are displayable components that can appear and move on the screen</li><li>Objects can have children objects</li><li>When an object displays itself, it ask all his children to display themselves on the parent&#39;s surface.</li><li>Objects have three important elements : a callback system, a graphics system and a physics system to respectively act, display and move.</li></ul><p>Then, when I want to create a game &#34;scene&#34;, I create a &#34;root&#34; object that contains other objects like the player, the mouse, the ground, monsters&#8230;</p><p>Then I just have to ask the root to display itself, and every object appears recursively.</p><p>I designed this without knowing about the composite pattern at first, only the basics of OOP.</p><p>My main issue was to make the substitutability property of objects that comes from inheritance to work well with the recursive composition I made.</p><p>I mean that I have an &#34;abstract&#34; class called &#34;Object&#34; (I put abstract into quotes because Python doesn&#39;t really have such concept) that is inherited by classes like &#34;Image&#34; (to be able to display) or &#34;MovingObject&#34; (to be able to move).<br /> Here, inheritance is meant to extend my object abilities.</p><p>But my composite pattern requires that &#34;groups of objects must be considered the same as single objects&#34;.</p><p>So when I call recursively a method from an object, it calls that method from every child of the object, regardless of the fact that some of them may not have that method.</p><h1>Example</h1><p>For instance, let&#39;s use this root element :</p><ul><li>root (Image)<ul><li>player (MovingObject)</li><li>cloud (MovingObject)</li><li>background (Image)</li><li>sun (Image)</li></ul></li></ul><p>Now let&#39;s suppose we want to call the method <code>move()</code> on the root element, to make every child move : First, we cannot because root is an Image instance, so it doesn&#39;t know the <code>move()</code> method. But even if it was the case, the children &#34;background&#34; and &#34;sun&#34; would not know it.</p><p>So I decided to put an empty method <code>move()</code> inside my &#34;abstract&#34; Object class, so every object knows it, even if it doesn&#39;t do anything.</p><p>The issue is that my Object class is now containing empty methods that it doesn&#39;t understand nor needs, only to permit the recursive behavior.</p><h1>Possible solution</h1><p>Then I heard about all the &#34;inheritance vs composition&#34; fuss and one of the solutions that came to my mind was to stop using inheritance for Object abilities and use composition instead. That means I would create, for example, a &#34;Body&#34; class, an &#34;Image&#34; class and a &#34;Callback&#34; class that would represent different actions, and then plug these into an Object instance to &#34;equip&#34; it and give it more power.</p><p>But then I thought that this will barely change something because I will have to call <code>move()</code>, and then the object will check if it has the Body plug-in, and use it. But it still requires the <code>move()</code> method to be present inside the Object class.</p><h1>Questions</h1><p>So I&#39;m turning to you guys to gave me advices about my pattern :</p><ul><li>Did I understand well how the composite pattern works ?</li><li>Is my approach correct ?</li><li>Does the use of &#34;plug-in&#34; classes will help me ?</li><li>Is the recursive behavior a good idea ?</li><li>Is there other patterns that are more fitting to my needs ?</li></ul><p>I hope you can give me some hints!</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>In a clean design object in a given tree should be used with an uniform interface. Your doubts reflects a design smell.</p><p>The goal of having object trees in scenes is to be able to apply geometric transformations to a group of objects. So if you have objects that can&#39;t move, they don&#39;t belong to the tree. It does not make sense.</p><p>Here is a possible solution. You can have a render class which can have background objects, and the root of the movable objects. All the movable objects can move. A transformation applied to an object is propagated to its children.</p><p>To render the scene, you have to render both the unmovable background objects, and the actual scene by calling a render function on the root.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../the-difference-between-the-factory-pattern-and-abstract-factory/'>The difference between the factory pattern and abstract factory</a></li><li class="list-group-item"><a href='../one-subclass-instead-of-composite-when-using-the-factory-method-design-pattern/'>One subclass instead of composite when using the Factory Method design pattern</a></li><li class="list-group-item"><a href='../does-the-composite-design-pattern-implement-recursive-behavior/'>Does the Composite design pattern implement recursive behavior</a></li><li class="list-group-item"><a href='../java-what-design-pattern-for-changing-interface/'>Java &#8211; What design pattern for changing interface</a></li><li class="list-group-item"><a href='../object-oriented-handling-composite-objects-in-the-repository-pattern/'>Object-oriented &#8211; Handling composite objects in the Repository Pattern</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>