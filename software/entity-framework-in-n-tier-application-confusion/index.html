<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Entity Framework in n-tier application confusion &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079191 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079191" class="post-1079191 software type-software status-publish hentry category-software tag-asp-net-mvc tag-entity-framework tag-n-tier tag-net"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Entity Framework in n-tier application confusion</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">asp.net-mvc</span><span class="mr-2 badge badge-info">entity-framework</span><span class="mr-2 badge badge-warning">n-tier</span><span class="mr-2 badge badge-primary">net</span></p><div class="entry-content"><p>I&#39;m building a rather large (web) application where I&#39;m using Entity Framework to communicate with the database.</p><p>My solution is set up in layers like so:</p><ul><li>Client<ul><li>Website (MVC web application)</li></ul></li><li>Server<ul><li>BusinessLogic (contains, well, business logic. There&#39;s a <strong><em>lot</em></strong> of business rules involved in this project)</li><li>Repository (contains repository classes for querying the database using EF)</li><li>Interfaces (interfaces for defining the repository classes, i.e. <code>IFirmRepository</code>)</li><li>Model (contains my edmx file, view models, enums etc)</li></ul></li></ul><p>So, the client/UI knows about the business logic layer where the business classes needed for a given view is injected into the MVC controllers. The business logic layer knows about interfaces and model and the repository implements the interfaces.</p><p>Been developing for the last week using this approach, I have a feeling that it&#39;s not quite &#34;correct&#34; since:</p><ol><li>The repository classes becomes bloated with a lot of methods where I need to use the <code>Include()</code>method to be able to work with the disconnected entities in my business logic layer</li><li>For every query, I&#39;m using a new context: <code>using(var ctx = new MyContext())</code> and a single business logic method might be calling more than one repository method which makes for N number of new MyContext() which isn&#39;t ideal, I guess?</li><li>Relating to the above: I&#39;ve read about having one context per http request is the way to go when it comes to websites, which my approach seems to &#34;violate&#34;?</li><li>Out of curiousity, I tried to simply make use of the <code>MyContext</code>directly in a business logic class, making the query for the object(s) needed and then performing business logic. Doing this felt very smooth/easy and made the repository seem like a lot more work than needed and almost redundant.</li></ol><p>So, I guess different projects needs different approaches when it comes to the architecture, but before I scratch my repository completely and making use of the entity framework context directly in my business logic classes, I&#39;d like your opinion on this. It kinda feels wrong (in the sense that I&#39;m violating something) to scratch the repository, but on the other hand, it&#39;s so easy to simply do the magic without first defining the method in an interface, then implementing it as a repository and <em>then</em> make use of it in a business logic class.</p><p>So, what is your opinion on this? ðŸ™‚ Am I completely off the record here, or?</p><p>Thanks in advance.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Go ahead and scratch the repository. If you&#39;re using Entity Framework, you don&#39;t need it. It&#39;s just a pointless layer of abstraction. I&#39;d recommend going with a service/provider pattern. Create an interface that lays out an API that you application can utilize. The interface will be the only thing you work with directly in your web application. You&#39;ll use dependency injection to sub in a concrete implementation.</p><p>As far as that goes, you&#39;ll want to create a one or more classes that implement this interface, but only one per discrete access method, i.e. Entity Framework. You might have another if you want to work with a Web Api, for example. This implementation should be <em>generic</em>, but rather than having the entire class take a type parameter, instead, you&#39;ll want the individual method implementations to be generic. This allows you to instantiate one instance that can work with your entire context and any entity that it contains.</p><p>Your entities, too, should implement interfaces, so that your service implementation can reuse code. For example, instead of having <code>GetPublishedFoos</code> and <code>GetPublishedBars</code>, you can simply have <code>GetPublished&lt;TEntity&gt;</code>, where <code>TEntity : IPublishable</code>. If you&#39;re smart about how you set up your interfaces, your service won&#39;t need a ton of methods.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-dependency-injection-with-n-tier-entity-framework-solution/'>C# &#8211; Dependency injection with n-tier Entity Framework solution</a></li><li class="list-group-item"><a href='../c-layered-architecture-using-entity-framework-with-different-class-libraries/'>C# &#8211; Layered architecture using Entity Framework with different class libraries</a></li><li class="list-group-item"><a href='../c-should-an-asp-net-mvc-application-directly-use-entity-framework-as-the-model/'>C# &#8211; Should an ASP.NET MVC application directly use Entity Framework as the model</a></li><li class="list-group-item"><a href='../design-repository-pattern-without-entity-framework/'>Design &#8211; Repository pattern without entity framework</a></li><li class="list-group-item"><a href='../architecture-where-view-models-inside-web-project-of-n-tier-application-should-be-placed/'>Architecture &#8211; Where view models inside Web project of n-tier application should be placed</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>