<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to prevent unknowningly duplicating code &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073167 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073167" class="post-1073167 software type-software status-publish hentry category-software tag-clean-code tag-design-patterns tag-refactoring"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to prevent unknowningly duplicating code</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">clean code</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">refactoring</span></p><div class="entry-content"><p>I work on a rather large code base. Hundreds of classes, tons of different files, lots of functionality, takes more than 15 minutes to pull down a fresh copy, etc.</p><p>A big problem with such a large code base is that it has quite a few utility methods and such that do the same thing, or has code that doesn&#39;t use these utility methods when it could. And also the utility methods aren&#39;t just all in one class (because it&#39;d be a huge jumbled mess).</p><p>I&#39;m rather new to the code base, but the team lead who&#39;s been working on it for years appears to have the same problem. It leads to a lot of code and work duplication, and as such, when something breaks, it&#39;s usually broken in 4 copies of basically the same code</p><p>How can we curb this pattern? As with most large projects, not all code is documented(though some is) and not all code is&#8230; well, clean. But basically, it&#39;d be really nice if we could work on improving the quality in this respect so that in the future we had less code duplication, and things like utility functions were easier to discover.</p><p>Also, the utility functions are usually either in some static helper class, in some non-static helper class that works on a single object, or is a static method on the class which it mainly &#34;helps&#34; with.</p><p>I had one experiment in adding utility functions as Extension methods(I didn&#39;t need any internals of the class, and it definitely was only required in very specific scenarios). This had the effect of preventing cluttering up the primary class and such, but it&#39;s not really anymore discoverable unless you already know about it</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The simple answer is that you really can&#39;t prevent code duplication. You can however &#34;fix it&#34; through a difficult continuous repetitive incremental process that boils down into two steps:</p><p><strong>Step 1.</strong> Start writing tests on legacy code (preferably using a testing framework)</p><p><strong>Step 2.</strong> Rewrite/refactor the code that is duplicated using what you&#39;ve learnt from the tests</p><p>You can use <strong>static analysis tools</strong> to detect duplicated code and for C# there are loads of tools that can do this for you:</p><ul><li><a href="https://stackoverflow.com/questions/204177/what-tool-to-find-code-duplicates-in-c-sharp-projects">StackOverflow - What Tool to Find Code Duplicates in C# Projects</a></li></ul><p>Tools like this will help you find points in code that does similar things. Continue to write tests to determine that they really do; use the same tests to make the duplicate code simpler to use. This &#34;refactoring&#34; can be done in multiple ways and you can use this list to determine the correct one:</p><ul><li><a href="http://www.industriallogic.com/xp/refactoring/catalog.html" rel="nofollow noreferrer">Refactor to Patterns Catalogue</a></li></ul><p>Furthermore there is also a whole book about this topic by Michael C. Feathers, <a href="http://rads.stackoverflow.com/amzn/click/0131177052" rel="nofollow noreferrer">Working Effectively with Legacy Code</a>. It goes in depth different strategies you can take to change the code to the better. He has a &#34;legacy code change algorithm&#34; which is not far off from the two step process above:</p><ol><li>Identify change points</li><li>Find test points</li><li>Break dependencies</li><li>Write tests</li><li>Make changes and refactor</li></ol><p>The book is a good read if you&#39;re dealing with brown-field development, i.e. legacy code that needs to change.</p><h2>In this case</h2><p>In the OP&#39;s case I can imagine the untestable code is caused by a honey pot for &#34;utility methods and tricks&#34; that take several forms:</p><ul><li>static methods</li><li>use of static resources</li><li>singleton classes</li><li><a href="http://en.wikipedia.org/wiki/Magic_number_(programming)" rel="nofollow noreferrer">magic values</a></li></ul><p>Take note that there is nothing wrong with these, but on the other hand they&#39;re usually hard to maintain and change. Extensions methods in .NET are static methods, but are also relatively easy to test.</p><p>Before you go through with the refactorings though, talk with your team about it. They need to be kept on the same page as you before you proceed with anything. This is because if you&#39;re refactoring something then chances are high you&#39;ll be causing merge conflicts. So before reworking something, investigate it, tell to your team to work on those code points with caution for a while until you&#39;re done.</p><p>Since the OP is <em>new</em> to the code there are some other things to do before you should do anything:</p><ul><li>Take time to learn from the codebase, i.e. break &#34;everything&#34;, test &#34;everything&#34;, revert.</li><li>Ask someone from the team to review your code before committing. ;-)</li></ul><p>Good luck!</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-are-utility-classes-with-nothing-but-static-members-an-anti-pattern-in-c/'>C++ &#8211; Are utility classes with nothing but static members an anti-pattern in C++</a></li><li class="list-group-item"><a href='../object-oriented-clean-code-consequences-of-short-methods-with-few-parameters/'>Object-oriented &#8211; Clean code: consequences of short methods with few parameters</a></li><li class="list-group-item"><a href='../how-to-avoid-changing-the-signature-on-a-well-used-method/'>How to avoid changing the signature on a well-used method</a></li><li class="list-group-item"><a href='../c-pattern-to-handle-free-functions-cleanly-avoiding-helper-style-utility-bag-static-classes/'>C# pattern to handle &#8220;free functions&#8221; cleanly, avoiding Helper-style &#8220;utility bag&#8221; static classes</a></li><li class="list-group-item"><a href='../how-to-justify-more-code-being-written-by-following-clean-code-practices/'>How to justify more code being written by following clean code practices</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>