<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to efficiently search a set of vectors for a vector which is the closest match &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070045 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070045" class="post-1070045 software type-software status-publish hentry category-software tag-algorithms"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to efficiently search a set of vectors for a vector which is the closest match</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">algorithms</span></p><div class="entry-content"><p>Unfortunately, I am not even sure of the keywords to use for this question, so if this has already been asked please point me the right way.</p><p>Given a set of vectors:</p><pre><code>[3, 5, 3]
[10, 23, 5]
[123, 53, 97]
</code></pre><p>(here, &#39;vector&#39; means one dimensional sets of numeric values).</p><p>I&#39;d like to know a way of finding the closest match for any input vector. For example,</p><pre><code>[2, 4, 5]
</code></pre><p>Would return the first one from my list as the closest match. I&#39;d also like to know the distance of the match.</p><p>A way of visualising this is like a line graph.</p><p>I don&#39;t want to linear search. I could have millions of vectors. I do not mind performing pre-processing time; it&#39;s search time I want to optimise.</p><h3>Defining &#39;closest match&#39;</h3><p>In this case, let&#39;s assume the data is numeric, and the &#39;closest match&#39; is a simple numeric comparison, giving an absolute distance. For example, comparing <code>[2, 4, 5]</code> could give distances of the test data of:</p><pre><code>[1, 1, 2]
[8, 19, 0]
[121, 49, 92]
</code></pre><h3>Varying size vectors</h3><p>How would vectors of different sizes be handled? I&#39;d like to be able to handle cases such as the following input:</p><pre><code>[120, 99]
</code></pre><p>Matching the third example from the test data, in some &#34;lower scoring&#34; sense. That&#39;s because the two values are similar to the first and last values in the test data, ignoring the middle value, and in order.</p><p>Another way of describing it might be &#8211; the ordering of the values in the vector is important, but not the position.</p><h3>Clustering solutions</h3><p>I considered some form of clustering &#8211; hashing the vectors into buckets, then hashing the input and returning all vectors in the matching bucket. But what troubles me about this is what if a given input is close to the &#34;boundary&#34; of a cluster &#8211; other values in adjacent clusters would not be returned, would they?</p><h3>Application domain</h3><p>I want to use this algorithm to find similar musical releases by their constituent track lengths. As such, the lengths can be stored as an integer in some time unit (seconds or milliseconds, say) and the data ends up looking like the above.</p><p>So similar to the CDDB (FreeDB) algorithm, but more leniency and the ability to define and explore distance. And support for different length vectors.</p><h3>Other questions I have looked at</h3><p><a href="https://softwareengineering.stackexchange.com/questions/311173/how-to-find-the-closest-vector-to-a-given-vector">How to find the closest vector to a given vector?</a> seems to discuss 2D points &#8211; while this could be considered in a 2D space, the values in each vector must be considered together.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><em>This is a concept map. Since nothing is known about the application domain, no concrete suggestions can be given.</em></p><p>In general, the steps to tackle this problem are:</p><ul><li><strong>First stage</strong> Find out what is a good similarity or distance measure between two feature vectors of same length.<ul><li>There are many choices. Examples:</li><li><a href="https://en.wikipedia.org/wiki/Norm_(mathematics)" rel="nofollow">Norm</a>, e.g. L1, L2, L-infinity</li><li><a href="https://en.wikipedia.org/wiki/Cosine_similarity" rel="nofollow">Cosine</a></li><li><a href="https://en.wikipedia.org/wiki/Earth_mover%27s_distance" rel="nofollow">Earth mover&#39;s distance (EMD)</a></li><li><a href="https://en.wikipedia.org/wiki/Locality-sensitive_hashing" rel="nofollow">Locality sensitive hashing</a></li><li><a href="https://en.wikipedia.org/wiki/Random_projection" rel="nofollow">Random projection</a></li><li>While some choices may work better for specific applications, in general a toolbox that implements all of the well-known ones will be able to cover almost all applications. The chance of having to invent a new similarity measure for same-length vector comparison is low.</li><li>However, there are still some application-specific distance measures:<ul><li>Transformation into frequency domain. This will be explained next.</li><li>In other words, there are certain types of feature vectors (those that could be called time-series or signals) that will benefit from a unified approach for same-length and different-length vector comparison.</li></ul></li></ul></li><li><strong>Second stage</strong> Find out how to measure similarity or distance between two feature vectors of different length.<ul><li>This is highly application-specific.</li><li>In general, it either falls into <a href="https://en.wikipedia.org/wiki/Signal_processing" rel="nofollow">signal processing</a>, or <a href="https://en.wikipedia.org/wiki/Pattern_recognition" rel="nofollow">pattern recognition</a>.</li><li>One kind of data that is common to both signal processing and pattern recognition is called <a href="https://en.wikipedia.org/wiki/Time_series" rel="nofollow">time series</a>. The axis doesn&#39;t have to correspond to time, though - the axis could be e.g. x-coordinate or y-coordinate on a 2D image, for example.</li><li>Time series can be transformed into <a href="https://en.wikipedia.org/wiki/Frequency_domain" rel="nofollow">frequency domain</a>, after which comparison can be performed.</li><li>Time series can also be decomposed into <a href="https://en.wikipedia.org/wiki/Scale_space" rel="nofollow">scale space</a>.</li><li>Time series that &#34;warp&#34; or don&#39;t align properly can be compared using <a href="https://en.wikipedia.org/wiki/Dynamic_time_warping" rel="nofollow">dynamic time warping (DTW)</a> which is based on dynamic programming. However, DTW can only be applied to a pair of vectors at once. Unlike the transformations discussed earlier, DTW cannot be used to extract a representation from a single vector.</li><li>A 2D image should be treated as a time series of time series (i.e. nested). Don&#39;t try to rasterize two images of different sizes into vectors of different lengths. Instead, resize the two images into same 2D size, then convert into a 1D vector.</li></ul></li><li><strong>Third stage</strong> Find out how to speed up large scale searches, such as<ul><li>Pre-process a large number of stored vectors so that queries that ask for the nearest vector will not need to visit every single vector in the store. (This goal is analogous to creating an index for a database table, but different techniques are needed.)</li><li>Finding clusters from a large number of stored vectors</li><li>These knowledge typically belongs to <a href="https://en.wikipedia.org/wiki/Information_retrieval" rel="nofollow">information retrieval</a>, and specifically <a href="https://en.wikipedia.org/wiki/Multimedia_information_retrieval" rel="nofollow">multimedia information retrieval</a>.</li><li>Extremely simple cases such as 2D/3D points or bounding rectangles could be searched using <a href="https://en.wikipedia.org/wiki/Spatial_query" rel="nofollow">spatial query</a>. However, it is ineffective in handling multimedia information retrieval, which may need to work with vectors with hundreds to thousands of dimensions.</li></ul></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../finding-the-lowest-average-hamming-distance-when-the-order-of-the-strings-matter/'>Finding the lowest average Hamming distance when the order of the strings matter</a></li><li class="list-group-item"><a href='../database-matching-algorithms-in-context-of-data-quality-problems/'>Database &#8211; Matching algorithms in context of data quality problems</a></li><li class="list-group-item"><a href='../efficient-method-for-finding-closest-point-to-a-line-segment-from-a-set-of-points-including-line-segments-vertices/'>Efficient method for finding closest point to a line segment from a set of points including line segment&#8217;s vertices</a></li><li class="list-group-item"><a href='../how-to-find-the-closest-vector-to-a-given-vector/'>How to find the closest vector to a given vector</a></li><li class="list-group-item"><a href='../search-for-similar-vectors-based-on-elementwise-difference/'>Search for similar vectors, based on elementwise difference</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>