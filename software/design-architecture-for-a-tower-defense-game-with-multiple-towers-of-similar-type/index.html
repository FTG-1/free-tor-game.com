<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; Architecture for a Tower Defense game with multiple towers of similar type &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087320 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087320" class="post-1087320 software type-software status-publish hentry category-software tag-architecture tag-design tag-design-patterns"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; Architecture for a Tower Defense game with multiple towers of similar type</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">design-patterns</span></p><div class="entry-content"><p>I&#39;m trying to create a <a href="https://en.wikipedia.org/wiki/Tower_defense" rel="noreferrer">Tower Defense game</a> where minions move through a labyrinth and you can build towers on top of the labyrinths&#39; walls to stop the minions. I&#39;m personally using Python and <a href="https://www.pygame.org/docs/" rel="noreferrer">pygame</a>, but I&#39;m looking for generic design answers that can be applied to any OOP language.</p><p>So, since both minions and towers have a size and a position, as well as a sprite image, I felt like it&#39;d be appropriate to create a common base class:</p><pre><code>class Entity:

    def __init__(self, image, size, position):
        self.image = image
        self.size = size
        self.position = position

    def draw(self, surface):
        surface.blit(self.image, self.position, self.size)
</code></pre><p>Alright so I want my game to work similar to <a href="http://www.coolstreaming.us/forum/arcade/game/2455.html" rel="noreferrer">Vector TD</a>, where you have multiple different types of towers that can be build, but you can build multiple instances of each type, and each instance can then be upgraded individually. What this means is that I need some kind of generic way to explain how all towers of similar type work, yet I need each instance to be separated. So I began with a <code>Tower</code> base class with all the properties I can think of:</p><pre><code>class Tower(Entity):

    def __init__(self, image, size, position, attack_speed, attack_damage, attack_splash_radius, attack_range, cost):
        super().__init__(image, size, position)
        self.attack_speed = attack_speed
        self.attack_damage = attack_damage
        ...  # etc
</code></pre><p>But the problem is, all turrets of the same type have same range, same attack speed, same cost, etc. but they&#39;re still individual instances, so it would feel stupid to copy all of these common properties with the same values to every instance separately.</p><p>The reason I don&#39;t just subclass <code>Tower</code> to create my custom tower types is because they don&#39;t really add anything to the class. Literally the only thing they would do is change the default values for the <code>__init__</code>&#39;s arguments. Using subclasses like this would also lead into the common values being copied into every instance, so if my subclass <code>GreenTower</code> defaulted <code>range=800</code> for all my turrets, it would mean that the value <code>800</code> would be stored separately into every instance (when they could just use a common value). I just feel like there&#39;s a better way.</p><p>So my question is entirely about the design/architecture/structure of the system. How should I group these properties together while still allowing individual turrets to be upgraded separately? Ideally I could be able to design these tower types in something like JSON where I can dynamically load them to the game.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>It sounds like a use-case for a <a href="https://en.wikipedia.org/wiki/Flyweight_pattern#Example_in_Python" rel="noreferrer">Flyweight</a>.  Essentially pull all the shared details for your turrets as a single flyweight instance and each turret then refers back to that object.  Note that you can have more than one flyweight so this doesn&#39;t limit you in any way.  If you end up with close to one flyweight instance for each turret, then it&#39;s probably not worth it, though.</p><p>You can also <a href="https://en.wikipedia.org/wiki/Decorator_pattern#Python" rel="noreferrer">decorate</a> your turret instances so that you get most of the properties from the flyweight but modify specific ones as needed for specific turrets.  You can even have flyweights that decorate other flyweights.  It all depends on your needs.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-how-to-refactor-the-design-if-it-seems-to-require-multiple-inheritance/'>Java &#8211; How to refactor the design, if it seems to require multiple inheritance</a></li><li class="list-group-item"><a href='../c-how-to-add-properties-to-subclasses-and-access-them-without-casting-from-a-superclass/'>C# &#8211; How to add properties to subclasses and access them without casting from a superclass</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>