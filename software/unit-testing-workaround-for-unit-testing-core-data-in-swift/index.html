<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; Workaround for unit testing Core Data in Swift &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086352 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086352" class="post-1086352 software type-software status-publish hentry category-software tag-ios tag-swift-language tag-unit-testing tag-xcode"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; Workaround for unit testing Core Data in Swift</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">ios</span><span class="mr-2 badge badge-info">swift-language</span><span class="mr-2 badge badge-warning">unit testing</span><span class="mr-2 badge badge-primary">xcode</span></p><div class="entry-content"><p>I am still pretty new to programming, but my first app was recently approved and is now for sale on the App Store. My app uses Core Data and is written in Swift. After some initial difficulties, I decide to write the app without unit tests. Now I&#39;d like to implement unit tests to prevent regression.</p><p>My managed objects are created inside class methods in my <code>NSManagedObject</code> subclasses and use a global variable &#34;context&#34; which I declare in <code>AppDelegate</code> to store the <code>NSManagedObjectContext</code> created in Apple&#39;s default code. I know that global variables are generally discouraged but this approach makes the most sense to me, is easy to write, and hasn&#39;t let to any bugs or other issues inside the app itself. Unfortunately, this makes it difficult to unit test. I&#39;ve tried several different approaches to creating a Core Data stack inside my test target, but I can&#39;t seem to get anything to work without rewriting lots of my app code. I really don&#39;t want to do that just to make it testable. I&#39;ve considered using frameworks such as Quick/Nimble or Magical Record but I don&#39;t see how that would help my problem.</p><p>I did figure out a workaround, but I&#39;m curious if people think this is a bad idea: I created a class in my primary target (non testing) called <code>TestingClass</code>. In my first <code>ViewController</code>&#39;s <code>viewDidAppear</code>, I call the <code>startTests</code> method. <code>TestingClass</code> is written in strait Swift with no testing frameworks. I have several if statements which are supposed to be false. If they are true they add a string to an array. When the tests are complete, if the array count is &gt; 0, it prints out the contents and aborts.</p><p>I am planning on using this until my update is ready to ship. When it is, I will disable the <code>TestingClass</code> and remove my call to it. I&#39;m curious if anyone has ever done anything like this. Should I just figure out a way to do tests the &#34;right&#34; way?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Let&#39;s look at the broader question first.  In some ways, your question boils down to the balance of pragmatism versus the theoretical &#34;best way&#34; for coding.  I&#39;m in the pragmatic programming camp, especially with your particular situation.  Pragmatic coding means we work around the limitations that the current software stack imposes.</p><p>In your particular case, with your particular understanding of the stack, you&#39;re running into a challenge.  You&#39;ve identified a work-around and you&#39;ve made things work for the time being.  Part of those challenges are possibly introduced by your use of global variables, but as you stated, it made sense for the information that needed to be stored.</p><p>I think using a <code>TestingClass</code> is a perfectly valid approach since you&#39;re fulfilling the purpose of testing (making sure things operate as expected) and you&#39;re also working within the constraints, as you understand them, of the application you created.  You certainly wouldn&#39;t be the first to put a test harness in place during development and then remove it prior to releasing the app.</p><p>You do run some risks with that approach.  Specifically, if you forget to disable that class before releasing to production, that could create problems for you.  Likewise, you effectively have to duplicate all of your code between the main path and the testing path.  So you run a risk of a bug escaping if the testing path doesn&#39;t exactly reflect how the main path operates.  Finally, it does build up complex test cases which can be more difficult to debug because you have to unwind things to understand where it broke.</p><hr/><p>So, as far as the particular approach that you&#39;ve taken - it&#39;s valid enough.</p><p>It may not be &#34;pure&#34; in the sense of following traditional, automated unit testing, but I think that pragmatism needs to rule the day.  People don&#39;t buy your application because of the unit tests, they buy your app because it works.  Your approach to unit testing provides regression testing and allows you to keep focused on developing new features.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-unit-testing-internal-components/'>Unit-testing &#8211; Unit testing internal components</a></li><li class="list-group-item"><a href='../unit-testing-unit-testing-data-access-objects/'>Unit-testing &#8211; Unit testing data access objects</a></li><li class="list-group-item"><a href='../unit-testing-unit-and-integration-testing-how-to-it-become-a-reflex/'>Unit-testing &#8211; Unit and Integration testing: How to it become a reflex</a></li><li class="list-group-item"><a href='../java-wrapping-utility-classes-and-injecting-them-for-unit-testing-purposes/'>Java &#8211; Wrapping utility classes and injecting them for unit testing purposes</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>