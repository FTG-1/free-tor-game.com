<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Why not use an ORM with DDD &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1074810 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1074810" class="post-1074810 software type-software status-publish hentry category-software tag-f tag-domain-driven-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Why not use an ORM with DDD</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">%f</span><span class="mr-2 badge badge-info">domain-driven-design</span></p><div class="entry-content"><p>I&#39;ve just finished reading Scott Wlaschin&#39;s excellent book &#34;<em>Domain Modeling Made Functional: Tackle Software Complexity with Domain-Driven Design and F#</em>&#34; in which he uses the F# SQL type provider for the database access.</p><p>Anticipating the obvious question, he says (p260) not to use an ORM because you can&#39;t ensure the integrity of the domain that way. For example, an ORM can&#39;t validate an email address, etc, can&#39;t deal with nested choice types, etc.</p><p>However, earlier on in the book (can&#39;t find it offhand, so I hope I quote him correctly), when explaining how to create boundaries for each section of the workflow, he says that data should be validated at each section boundary, allowing the code within the section to assume it&#39;s all valid.</p><p>If so, why not treat the entities coming out of the ORM and into your code as crossing a boundary, and validate them there? That way, you get the benefits of the ORM, but ensure the integrity of your model.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>To be clear, I said &#34;In F#, we tend not to use an object-relational mapper (ORM)&#34; but not because of any validation issues, rather because a big ORM like Entity Framework is heavily object-oriented (surprise!) which doesn&#39;t always mesh well with a functional paradigm. Instead F#ers will either use type providers or a simpler library such as Dapper.</p><p>In the &#34;Working with Relational Databases&#34; chapter, I do say that you can treat the database in two different ways:</p><ul><li>as a untrusted source, in which case you do validation in the usual way (just as you would for data coming from a JSON Web API, say)</li><li>as a trusted source, in which case you don&#39;t do validation and throw exceptions if the data is bad.</li></ul><p>Which case applies depends on whether the database is shared with other applications, how it is designed, etc.</p><p><strong>Update:</strong> I realize that the following sentence could be misinterpreted:</p><blockquote><p>Canâ€™t we just use something
 like Entity Framework or NHibernate that will do all this mapping automatically?
 The answer is no, not if you want to ensure the integrity of your domain.</p></blockquote><p>What I meant by that is that translating a domain model <em>directly</em> to a database via an ORM means that you lose a lot of the complexity of the domain types -- the &#34;make illegal states unrepresentable&#34; design approach that I dedicate a chapter to.
This is because ORMs don&#39;t know how to handle single-case unions with constraints, complex choice types, etc.</p><p>Instead, I recommend that you translate your domain objects to a type specially designed for persistence (a &#34;DTO&#34;) and then use that DTO for persistence, not the domain type. To store/load the DTO you can certainly use EF or NHibernate, but you&#39;re not getting much value from it when you use it that way, and so it&#39;s generally easier to use type providers or a lightweight mapper like Dapper.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/ddd-with-orm-where-should-the-business-logic-go/'>DDD with ORM where should the business logic go</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/ddd-aggregate-root-with-complex-aggregates/'>DDD Aggregate Root with Complex Aggregates</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/is-ddd-only-good-for-batch-processing/'>Is DDD only good for batch processing</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/understanding-ddd-when-using-an-orm-such-as-hibernate/'>Understanding DDD when using an ORM such as Hibernate</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/object-oriented-ddd-oop-saving-aggregates-without-orm-public-getter-reflection-or-injecting-repository/'>Object-oriented &#8211; DDD/OOP &#8211; saving Aggregates without ORM. Public getter, reflection, or injecting repository</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>