<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Should I add redundant code now just in case it may be needed in the future &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064893 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064893" class="post-1064893 software type-software status-publish hentry category-software tag-c tag-code-quality tag-defensive-programming tag-future-proof tag-programming-practices"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Should I add redundant code now just in case it may be needed in the future</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">code-quality</span><span class="mr-2 badge badge-warning">defensive-programming</span><span class="mr-2 badge badge-primary">future-proof</span><span class="mr-2 badge badge-danger">programming practices</span></p><div class="entry-content"><p>Rightly or wrongly, I&#39;m currently of the belief that I should always try to make my code as robust as possible, even if this means adding in redundant code / checks that I <strong>know</strong> won&#39;t be of any use right now, but they might be x amount of years down the line.</p><p>For example, I&#39;m currently working on a mobile application that has this piece of code:</p><pre><code>public static CalendarRow AssignAppointmentToRow(Appointment app, List&lt;CalendarRow&gt; rows)
{
    //1. Is rows equal to null? - This will be the case if this is the first appointment.
    if (rows == null) {
        rows = new List&lt;CalendarRow&gt; ();
    }

    //2. Is rows empty? - This will be the case if this is the first appointment / some other unknown reason.
    if(rows.Count == 0)
    {
        rows.Add (new CalendarRow (0));
        rows [0].Appointments.Add (app);
    }

    //blah...
}
</code></pre><p>Looking specifically at section two, I know that if section one is true, then section two will also be true. I can&#39;t think of any reason as to why section one would be false and section two evaluate true, which makes the second <code>if</code> statement redundant.</p><p>However, there may be a case in the future where this second <code>if</code> statement is actually needed, and for a known reason.</p><p>Some people may look at this initially and think I&#39;m programming with the future in-mind, which is obviously a good thing. But I know of a few instances where this kind of code has &#34;hidden&#34; bugs from me. Meaning it&#39;s taken me even longer to figure out why function <code>xyz</code> is doing <code>abc</code> when it should actually be doing <code>def</code>.</p><p>On the other hand, there&#39;s also been numerous instances where this kind of code has made it much, much easier to enhance the code with new behaviours, because I don&#39;t have to go back and ensure that all the relevant checks are in place.</p><p>Are there any general <em>rule-of-thumb</em> guidelines for this kind of code?<br /> (I&#39;d also be interested to hear if this would be considered good or bad practise?)</p><p>N.B: This could be considered similar to <a href="https://softwareengineering.stackexchange.com/questions/130553/keep-it-simple-now-or-program-with-the-future-in-mind">this question,</a> however unlike that question, I&#39;d like an answer assuming there are no deadlines.</p><p><strong>TLDR:</strong> Should I go so far as to adding redundant code in order to make it potentially more robust in the future?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>As an exercise, first let&#39;s verify your logic. Though as we&#39;ll see, you have bigger problems than any logical problem.</p><p>Call the first condition A and the second condition B.</p><p>You first say:</p><blockquote><p>Looking specifically at section two, I know that if section one is true, then section two will also be true.</p></blockquote><p>That is: A implies B, or, in more basic terms <code>(NOT A) OR B</code></p><p>And then:</p><blockquote><p>I can&#39;t think of any reason as to why section one would be false and section two evaluate true, which makes the second if statement redundant.</p></blockquote><p>That is: <code>NOT((NOT A) AND B)</code>.  Apply Demorgan&#39;s law to get <code>(NOT B) OR A</code> which is B implies A.</p><p>Therefore, if both your statements are true then A implies B and B implies A, which means they must be equal.</p><p>Therefore yes, the checks are redundant.  You appear to have four code paths through the program but in fact you only have two.</p><p>So now the question is: how to write the code?  The real question is: <strong>what is the stated contract of the method</strong>?  The question of whether the conditions are redundant is a red herring. The real question is &#34;have I designed a sensible contract, and does my method clearly implement that contract?&#34;</p><p>Let&#39;s look at the declaration:</p><pre><code>public static CalendarRow AssignAppointmentToRow(
    Appointment app,    
    List&lt;CalendarRow&gt; rows)
</code></pre><p>It&#39;s public, so it has to be robust to bad data from arbitrary callers.</p><p>It returns a value, so it should be useful for its return value, not for its side effect.</p><p>And yet the name of the method is a verb, suggesting that it is useful for its side effect.</p><p>The contract of the list parameter is:</p><ul><li>A null list is OK</li><li>A list with one or more elements in it is OK</li><li>A list with no elements in it is wrong and should not be possible.</li></ul><p>This contract is <em>insane</em>. Imagine writing the documentation for this! Imagine writing test cases!</p><p>My advice: start over. This API has candy machine interface written all over it. (The expression is from an old story about the candy machines at Microsoft, where both the prices and the selections are two-digit numbers, and it is super easy to type in &#34;85&#34; which is the price of item 75, and you get the wrong item. Fun fact: yes, I have actually done that by mistake when I was trying to get gum out of a vending machine at Microsoft!)</p><p>Here&#39;s how to design a sensible contract:</p><p>Make your method useful for either its side effect or its return value, not both.</p><p>Do not accept mutable types as inputs, like lists; if you need a sequence of information, take an IEnumerable.  Only read the sequence; do not write to a passed-in collection unless it is <em>very</em> clear that this is the contract of the method. By taking IEnumerable you send a message to the caller that you are not going to mutate their collection.</p><p>Never accept nulls; a null sequence is an abomination. Require the caller to pass an empty sequence if that makes sense, never ever null.</p><p>Crash immediately if the caller violates your contract, to teach them that you mean business, and so that they catch their bugs in testing, not production.</p><p>Design the contract first to be as sensible as possible, and then clearly implement the contract. <strong>That</strong> is the way to future-proof a design.</p><p>Now, I&#39;ve talked only about your specific case, and you asked a general question. So here is some additional general advice:</p><ul><li><p>If there is a fact that you as a developer can deduce but the compiler cannot, then use an assertion to document that fact. If another developer, like future you or one of your coworkers, violates that assumption then the assertion will tell you.</p></li><li><p>Get a test coverage tool.  Make sure your tests cover every line of code. If there is uncovered code then either you have a missing test, or you have dead code.  Dead code is surprisingly dangerous because usually it is not intended to be dead!  The incredibly awful Apple &#34;goto fail&#34; security flaw of a couple years back comes immediately to mind.</p></li><li><p>Get a static analysis tool. Heck, get several; every tool has its own particular specialty and none is a superset of the others. Pay attention to when it is telling you that there is unreachable or redundant code. Again, those are likely bugs.</p></li></ul><p>If it sounds like I&#39;m saying:  first, design the code well, and second, test the heck out of it to make sure it is correct today, well, that&#39;s what I&#39;m saying. Doing those things will make dealing with the future much easier; the hardest part about the future is dealing with all the buggy candy machine code people wrote in the past. Get it right today and the costs will be lower in the future.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../keep-it-simple-now-or-program-with-the-future-in-mind/'>Keep it simple now, or program with the future in mind</a></li><li class="list-group-item"><a href='../c-replace-type-code-with-class-from-refactoring-fowler/'>C# &#8211; Replace Type Code with Class (From Refactoring [Fowler])</a></li><li class="list-group-item"><a href='../unit-testing-should-we-exclude-code-for-the-code-coverage-analysis/'>Unit-testing &#8211; Should we exclude code for the code coverage analysis</a></li><li class="list-group-item"><a href='../c-decrementing-incrementing-loop-variable-inside-for-loop-is-this-code-smell/'>C# &#8211; Decrementing/Incrementing loop variable inside for loop. Is this code smell</a></li><li class="list-group-item"><a href='../short-circuit-evaluation-is-it-bad-practice/'>Short circuit evaluation, is it bad practice</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>