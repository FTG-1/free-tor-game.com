<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Using Observer Pattern to selectively act on events &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083552 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083552" class="post-1083552 software type-software status-publish hentry category-software tag-concepts tag-design-patterns tag-observer-pattern"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Using Observer Pattern to selectively act on events</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">concepts</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">observer-pattern</span></p><div class="entry-content"><p>I&#39;m currently in the process of architecting a small RPG-style dungeon crawl (in Unity), and am a little stuck on how to update various objects when things change, while <em>not</em> updating unrelated objects. For this question, I will be using my current project as an example, but the question itself can be applied to any situation where multiple different kinds of Observers each watch a single Subject.</p><p>The design I&#39;m currently leaning towards for object interactions in my game implements the <a href="https://en.wikipedia.org/wiki/Observer_pattern" rel="nofollow noreferrer">Observer Design Pattern</a>, where I have a single Subject (let&#39;s call it <code>GameEventManager</code>), and each interactive object is an Observer of this Subject (this includes things like the player, enemies, interactive items on the ground, etc.).</p><p>When an event occurs (let&#39;s say a User hits Spacebar to shoot an arrow at a selected enemy), the current plan I have for the action&#39;s lifetime can be broken into steps:</p><ol><li>The Input system (not an Observer, but contains a reference to the Subject), sends an <code>Event</code> to the <code>GameEventManager</code> for broadcasting to the right place. I haven&#39;t designed the <code>Event</code> class yet, to keep the problem simpler and in case I need to redesign things.</li><li>The <code>GameEventManager</code> broadcasts the <code>Event</code> to the <code>Player</code> with the relevant information.</li><li>The <code>Player</code>, realizing an <code>Event</code> came in saying to shoot an arrow, does some internal math (like subtracting from the total ammo it has, maybe performing some sort of animation visually), and emits a <em>new</em> <code>Event</code> to the <code>GameEventManager</code> telling it that the <code>Player</code> shot an arrow at &#34;enemy2&#34;.</li><li>The <code>GameEventManager</code> broadcasts the <code>Event</code> to &#34;enemy2&#34;.</li><li>&#34;Enemy2&#34; receives the <code>Event</code>, realizes that it got shot, and dies in some fashion.</li></ol><p>So the question is, how does <code>GameEventManager</code> know where to pass around all these different types of events (i.e. the movement event should only go to the player, and the arrow should only go to &#34;enemy2&#34;). Also, once the event gets to its designated target(s), how do these Observers know what to do with the event (i.e. how does the player know to shoot an arrow, and not take damage?).</p><p>I&#39;ve done some research on Observer examples, but most are either obscenely complex and abstract, or are just simple &#34;Subject emits event to ALL observers, and ALL observers interact with EVERY event they get&#34;, which is not what I want at all (an arrow shot at &#34;enemy2&#34; should not impact &#34;enemy1&#34; in any way).</p><p>Sorry if this is a little abstract, I like to have a plan before I start to actually build the code.</p><p>Also, as an aside, I am fully aware that in Unity I can have one GameObject directly interact with another, but the purpose of this entire project is to make everything as polymorphic and re-usable as possible, and most Unity tutorials simply don&#39;t touch on extensibility at all.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>To me this is maybe not the best use case for the observer pattern, since it would require the subject to require a boatload of knowledge about who is observing it and when a particular observer should be notified. Just thinking about it and how to separate which observer gets notified under what condition had me working my way towards wanting to put the bulk of the entire game logic into the subject or something pulling its strings and telling it exactly who to notify.</p><p>The main idea of the observer pattern is to decouple and abstract away the subject from the observers, so that you can do things like attach whoever/whatever to observe the subject as it goes through state changes so that whoever/whatever can know about it. The subject shouldn&#39;t have to know much about who is observing it, and definitely not any concrete information about who is observing it. It&#39;s a broadcast mentality like, &#34;To whomever is listening out there, something happened&#34;, not, &#34;the player shot an arrow so I should notify this exact enemy within its line of sight about getting hit.&#34; That&#39;s way TMI for the subject to know about its observers.</p><p>Sometimes an observer implementation might distinguish subjects by some abstract concept which doesn&#39;t require much knowledge about them, like an observer <code>group</code>: <em>&#34;notify this group of observers.&#34;</em> But it&#39;s still very <em>aimless</em>. Aimless kind of broadcasting to observers who subscribe should be kind of the thinking pattern when you consider whether or not to use the observer pattern, and what you are tempted to do here is far from aimless (it has the aim of an expertly-shot arrow leading to a headshot -- sorry, lame joke).</p><p>Instead I think all you need are really abstractions for concepts like players and enemies (or maybe a &#34;Creature&#34; or something that unifies them -- endless ways to go here). And you might need one or more things to process your game logic. For example, input event for spacebar might trigger player to shoot an arrow doing all things you listed like subtracting ammo count. Then with the arrow projectile created (which might also be abstract as a &#34;projectile&#34; instead of, specifically, &#34;arrow&#34;), you might have something being invoked in the game loop like a physics system moving/processing all projectiles in the game. When it collides with an entity like a &#34;creature&#34; or something like that (something abstract so that you don&#39;t have to distinguish like an orc from a goblin), you might call an abstract function that causes it to be hit by the projectile.</p><p>This is a rather simplistic example, but something to this effect, yet this is done just by abstracting your game entities rather than using the observer pattern.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../when-would-polling-for-events-be-better-than-using-observer-pattern/'>When would polling for events be better than using observer pattern</a></li><li class="list-group-item"><a href='../java-the-observer-pattern-using-the-pulling-mechanism/'>Java &#8211; The Observer pattern using the pulling mechanism</a></li><li class="list-group-item"><a href='../observer-for-two-independent-events-in-the-observable-class/'>Observer for two independent events in the observable class</a></li><li class="list-group-item"><a href='../object-oriented-implementation-of-observer-pattern-with-one-observer-multiple-publishers-and-multiple-events/'>Object-oriented &#8211; Implementation of observer pattern with one observer/multiple publishers and multiple events</a></li><li class="list-group-item"><a href='../architecture-is-using-observer-pattern-a-good-idea-while-building-a-chess-game/'>Architecture &#8211; Is using Observer pattern a good idea while building a Chess Game</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>