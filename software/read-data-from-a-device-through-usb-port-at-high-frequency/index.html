<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Read data from a device through usb port at high frequency &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078573 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078573" class="post-1078573 software type-software status-publish hentry category-software tag-linux tag-real-time tag-usb"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Read data from a device through usb port at high frequency</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">linux</span><span class="mr-2 badge badge-info">real time</span><span class="mr-2 badge badge-warning">usb</span></p><div class="entry-content"><p>I need to know if I can get acceleration data from an IMU at 500Hz via USB.</p><p>I&#39;ve been going through the code that the manufacturer provides and trying to improve it. Right now I cannot go faster than 166Hz. Things I&#39;ve tried:</p><ul><li><p>Switched from streaming mode to polling. The reason is that in streaming mode the SDK of the manufacturer uses the ioctl library to know if there is new data to be read. The faster I would go was 10Hz. In polling mode, every N milliseconds data gets read from the port using a standard read command. I went from 10Hz to 166Hz, that is, for N=6. But with N&lt;6 I get no improvement. 166Hz is a ceiling right now.</p></li><li><p>Increased the process priority. This has no effect at all. Maybe because I&#39;m only running the browser and the code I&#39;m working on?</p></li></ul><p>Yes, I know linux is not a real time system. At the end of the day I&#39;ll have to live with that. I may use xenomai later on the code. But right now I need to know how fast I can go. Not theoretically, but in a real application. Any ideas about how to increase the performance?</p><p>EDIT: This are the timestamps of the time I get the data, in millisencods. Note the bursts.</p><pre><code> 1449258970519 
 1449258970519 
 1449258970525 
 1449258970531 
 1449258970531 
 1449258970543 
 1449258970543 
 1449258970543 
 1449258970549 
 1449258970555 
 1449258970555 
 1449258970562 
 1449258970567 
 1449258970567 
 1449258970573 
 1449258970579 
 1449258970579 
 1449258970585
</code></pre><p>EDIT: The amount of data that I have to transfer is very small&#8230; say at most 16 floats, plus some headers. I can safely assume 128 bytes is enough. So 128&#215;1000 is still A LOT less than the 480 Mpbs that USB 2 offers.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You can get 166Hz.. that&#39;s interesting as I thought the default polling rate for USB was 125Hz.</p><p>Still, you&#39;ll possibly need to modify your kernel, drivers/usb/input/hid-core.c - set the polling rate there. There&#39;s a fair bit of <a href="https://wiki.archlinux.org/index.php/Mouse_polling_rate">info on the internet</a> about updating mouse polling rates to 1000Hz (those gamers....) either with a tweak to the configuration. It might have some info relevant to your device.</p><p>You&#39;ll probably have to post this question on a Linux board to get detailed info however.</p><p>The other alternative is to buffer - most cases don&#39;t matter if you poll at 100Hz if each read grabs 10 commands of data!</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-does-a-usb-device-whether-know-to-draw-500ma-1a-or-2-1a-from-a-computer-usb-port/'>How does a USB device whether know to draw 500mA, 1A or 2.1A from a computer USB port</a></li><li class="list-group-item"><a href='../c-how-to-port-cli-c-program-with-gnu-libraries-from-windows-to-linux/'>C++ &#8211; How to port cli c++ program with GNU libraries from windows to Linux</a></li><li class="list-group-item"><a href='../java-best-way-to-access-hardware-per-com-serial-port-over-usb-adapter/'>Java &#8211; Best Way to Access Hardware per COM Serial Port over USB Adapter</a></li><li class="list-group-item"><a href='../when-is-a-device-driver-needed-and-when-is-it-ok-to-read-write-directly-to-the-port/'>When is a device driver needed and when is it OK to read/write directly to the port</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>