<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; Efficient way to search data based on multiple attributes &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080609 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080609" class="post-1080609 software type-software status-publish hentry category-software tag-architecture tag-data-modeling tag-database tag-database-design tag-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; Efficient way to search data based on multiple attributes</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">data modeling</span><span class="mr-2 badge badge-warning">database</span><span class="mr-2 badge badge-primary">database-design</span><span class="mr-2 badge badge-danger">design</span></p><div class="entry-content"><p>We are building a system where we accumulate data from many of our internal services, process them and generate set of data called Jobs saved to database. Our client application running on client systems periodically requests for these Jobs and eligible Jobs for the requested client will be sent in the response. For each client request we need to search for qualified Jobs from Jobs table based on client request parameters.</p><p>Example:</p><p>Jobs:</p><pre><code>#1
{
    &#34;id&#34;: &#34;1&#34;,
   &#34;searchFields&#34;:{
      &#34;key1&#34;:&#34;value1&#34;,
      &#34;key2&#34;:&#34;value2&#34;,
      &#34;key3&#34;:&#34;value3&#34;
   },
   &#34;job&#34;: &lt;SOME COMMAND&gt;
}

#2
{
    &#34;id&#34;: &#34;2&#34;,
   &#34;searchFields&#34;:{
      &#34;key3&#34;:&#34;value3&#34;,
      &#34;key4&#34;:&#34;value4&#34;,
   },
   &#34;job&#34;: &lt;SOME COMMAND&gt;
}

#3
{
    &#34;id&#34;: &#34;3&#34;,
   &#34;searchFields&#34;:{
      &#34;key5&#34;:&#34;value5&#34;,
      &#34;key6&#34;:&#34;value6&#34;,
   },
   &#34;job&#34;: &lt;SOME COMMAND&gt;
}
</code></pre><p><strong>How search should work?</strong></p><p>We have set of attributes in client request, these attribute&#39;s values should match with attribute values in Job&#39;s search field &#34;searchField&#34;. If client request has attributes &#34;key1&#34;, &#34;key2&#34; and &#34;key3&#34; and job&#39;s searchField has &#34;key1&#34; and &#34;key2&#34; then this jobs is qualified only if the value of &#34;key1&#34; and &#34;key2&#34; of both client request and Job&#39;s searchField matches.</p><p>Client Requests:</p><pre><code># 1
{
      &#34;key1&#34;:&#34;value1&#34;,
      &#34;key2&#34;:&#34;value2&#34;,
      &#34;key3&#34;:&#34;value3&#34;
}
Job #1 is qualified. Job #2 is not qualified because request input does not have &#34;key4&#34;.


# 2
{
      &#34;key1&#34;:&#34;value1&#34;,
      &#34;key2&#34;:&#34;some_different_value&#34;,
      &#34;key3&#34;:&#34;value3&#34;
}
No jobs are qualified because value of key2 doesn&#39;t match with any job

# 3
{
      &#34;key1&#34;:&#34;value1&#34;,
      &#34;key2&#34;:&#34;value2&#34;,
      &#34;key3&#34;:&#34;value3&#34;,
      &#34;key4&#34;:&#34;value4&#34;
}

Job #1 and #2 are qualified.


# 3
{
      &#34;key2&#34;:&#34;value2&#34;,
      &#34;key3&#34;:&#34;value3&#34;,
      &#34;key4&#34;:&#34;value4&#34;,
      &#34;key5&#34;:&#34;value5&#34;,
      &#34;key6&#34;:&#34;value6&#34;,
}

Job #2 and #3 are qualified. Job #1 is not qualified because &#34;key1&#34; does not exists in input data
</code></pre><p>We have already built prototype for this system using MySQL database, but we feel MySQL is not well suited for these kind of systems. Jobs table is very huge and keeps growing (more than 1,00,000 records added each day) and searching Jobs based on multiple attributes just by using standard SQL queries (without indexed fields) is not efficient. Also, attributes in client request and Job&#39;s searchField are dynamic. We don&#39;t have fixed set of attributes to work on. New attributes can added or removed anytime, so if we are using SQL queries than handling dynamic attributes would be cumbersome.</p><p><strong>What we have tried?</strong></p><p>We created combinationKey and hashKey of all key-value attributes in searchField for each Job and saved it to database along with job.</p><p>How combinationKey and hashkey are generated,</p><p>Job:</p><pre><code>{
    &#34;id&#34;: &#34;1&#34;,
   &#34;searchFields&#34;:{
      &#34;key1&#34;:&#34;value1&#34;,
      &#34;key2&#34;:&#34;value2&#34;,
      &#34;key3&#34;:&#34;value3&#34;
   },   
   &#34;job&#34;: &lt;SOME COMMAND&gt;
}
</code></pre><p>combinationKey=&#34;key1::key2::key3&#34;<br /> hashKey=sha256Of(&#34;key1=value1::key2=value2::key3=value3&#34;)</p><p>And save Job as,</p><pre><code>{
    &#34;id&#34;: &#34;1&#34;,
    &#34;combinationKey&#34;: &#34;key1::key2::key3&#34;,
    &#34;hashKey&#34;:&lt;Hash_Key&gt;,
   &#34;searchFields&#34;:{
      &#34;key1&#34;:&#34;value1&#34;,
      &#34;key2&#34;:&#34;value2&#34;,
      &#34;key3&#34;:&#34;value3&#34;
   },   
   &#34;job&#34;: &lt;SOME COMMAND&gt;
}
</code></pre><p>When we receive client request, we fetch unique combination keys from Jobs table (full table scan or cache) and generate hash for incoming request attributes,</p><p>Unique combination keys from Jobs table: &#34;key1::key2::key3&#34;, &#34;key4::key5&#34; &#8230; etc</p><p>Client Request:</p><pre><code>{
      &#34;key1&#34;:&#34;value1&#34;,
      &#34;key2&#34;:&#34;value2&#34;,
      &#34;key3&#34;:&#34;value3&#34;,
      &#34;key4&#34;:&#34;value4&#34;
}
</code></pre><p>Iterate through all combination keys and generate list of hashKeys for incoming request attributes and once hashKeys are generated, search for Jobs in Jobs table matching these hashKeys.</p><p>This approach appears to be working fine in our prototype but I feel it is not efficient enough, because as Jobs data grow, there is a possibility  that unique combinationKey count could grow exponentially and for each client request, calculating hashkey for all combinationKeys would be computation intensive.</p><p><strong>What we need?</strong></p><ol><li>Most efficient and easy way to search Jobs table based<br /> on incoming client request attributes as per our requirements.</li><li>Consistent and accurate search. We do not want to use<br /> search engines like Elasticsearch as we need accurate data and not for analytics.</li><li>Best database suited for these kind of systems.</li><li>Any companies (such as facebook, google) already using these kind of systems so we can<br /> analyze their approach.</li></ol><p>Any help would be appreciated.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your requirements seem to need full text indexing/search abilities which most RDBMs (including MySQL) can do. But if full text searching is the majority of what you will be doing, you might be better off with a noSQL type DB like Solr. Of course you could use both, if you need things that SQL RDBMs does well and noSQL doesn&#39;t do well. But from your description of your needs, it sounds like noSQL is the direction to go.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-would-these-two-scenarios-be-good-candidates-for-a-nosql-database/'>Database &#8211; Would these two scenarios be good candidates for a NoSQL database</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>