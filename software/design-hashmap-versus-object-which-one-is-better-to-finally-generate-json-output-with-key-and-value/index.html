<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; HashMap versus Object ? Which one is better to finally generate JSON output with KEY and VALUE &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086962 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086962" class="post-1086962 software type-software status-publish hentry category-software tag-coding-standards tag-coding-style tag-design tag-json tag-object"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; HashMap versus Object ? Which one is better to finally generate JSON output with KEY and VALUE</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">coding-standards</span><span class="mr-2 badge badge-info">coding-style</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">json</span><span class="mr-2 badge badge-danger">object</span></p><div class="entry-content"><p>I do have this use case.</p><ol><li>callers(APIs in same microservice or different microservices) wants to report different KEYS and VALUES as an audit as part of their methods.</li><li>There is a high possibilities that some of KEYS will be very common that majority of callers can report.</li><li>consistency is MUST when using KEY NAME from multiple callers to report same KEY. Example: if all wants to report consumer ID, then all callers need to use key &#34;consumerId&#34; only to bring consistency across different callers.</li><li>Can have some reusable enum class to hold all common keys like above so that every callers can use. Callers can still have their own custom KEYS which they want to report.</li><li>All callers should not do a duplicate jobs like if caller1, caller2 wants to report consumerID (common KEY), then I dont want both to define class with consumerID as property and then convert that into JSON.</li></ol><p>I thought to use below kind of implementation.</p><p><strong>Enum to hold common KEYS</strong></p><pre><code>public enum EnumKeys implements Key {
    CONSUMERID(&#34;consumerId&#34;)
    ...
    ...
    ...
}
</code></pre><p><strong>Common class each caller can use to report KEY AND VALUE</strong></p><pre><code>@JsonPropertyOrder(alphabetic=true)
public class ReportData {

    private Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();

    @JsonAnyGetter
    public Map&lt;String, Object&gt; getProperties() {
        return properties;
    }

    public void setProperties(Map&lt;String, Object&gt; properties) {
        this.properties = properties;
    }

    public ReportData add(Key key, Object value){
        properties.put(key.getKeyName(), value);
        return this;
    }
}
</code></pre><p><strong>Caller 1 Reporting consumerID</strong></p><pre><code>ReportData reportData = new ReportData();
reportData.add(EnumKeys.CONSUMERID,&#34;123&#34;);
</code></pre><p><strong>Caller 2 Reporting consumerID</strong></p><pre><code>ReportData reportData = new ReportData(); 
reportData.add(EnumKeys.CONSUMERID,&#34;435&#34;);
</code></pre><p><strong>Caller 3 Reporting XYZ key which is not common</strong></p><pre><code>//First create a custom KEY
public enum CustomEnum implements Key{

    XYZ(&#34;xyz&#34;);
}

ReportData reportData = new ReportData();
reportData.add(CustomEnum.XYZ,&#34;custom value&#34;);
</code></pre><p>Finally framework will convert each property key pair to JSON</p><pre><code>ObjectMapper mapper = new ObjectMapper().writeValueAsString(reportData);
</code></pre><p><strong>Output</strong></p><ol><li>Not all callers needs to create holder class (equivalent to ReportData) to hold properties.</li><li>Using instance of ReportData, they can bring consistency on using same KEY name for KEY</li><li>Callers can extend EnumKeys (master list of KEYs) and define their own keys and still can use same way of reporting.</li></ol><p><strong>Questions</strong></p><ol><li>Is there anything bad about this way of usage?</li><li>Anything bad to instantiate object (ReportData) out of HashMap/EnumMap?</li><li>Is object (with instance members) better to generate JSON or HASHMAP with more constrained KEY NAME is better? Final destination is JSON.</li><li>Any easy way to use existing class (with n of properties) and use with ReportData class.</li></ol><p>Any input is appreciated.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>Is there anything bad about this way of usage?</p></blockquote><p>Yes.</p><ol><li><p>You are exposing internal data-structures in <code>ReportData.getProperties()</code>. Return either a copy, or an object that references that data-structure and enforces appropriate interaction.</p></li><li><p>You are forcing all clients to define an Enumeration to hold their &#34;key&#34; values, and enumerations are compiled. Some clients will need to be able to express &#34;Custom&#34; keys that are dynamic and only known at run time. Unless of course <code>Key</code> can be freely constructed?</p></li><li><p>I do not see how you are handling nested objects/arrays. Are you only supporting a Flat JSON object? JSON Values can contain nested objects and arrays.</p></li></ol><p>Point 2 and 3 might not apply to your specific use case.</p><blockquote><p>Anything bad to instantiate object (ReportData) out of HashMap/EnumMap?</p></blockquote><p>Nothing bad about the idea. That is the whole purpose of a constructor.</p><p>However it appears that you are creating the object first, then setting its contents. This makes it possible for the <code>ReportData</code> object to be in an invalid state should something happen that prevents the contents from being set.</p><blockquote><p>Is object (with instance members) better to generate JSON or HASHMAP with more constrained KEY NAME is better? Final destination is JSON.</p></blockquote><p>That depends entirely on context.</p><p>If the serialiser can correctly encode an object into JSON, and the object is guaranteed to be a DAG (Directed Acyclic Graph), and the object and all of the objects it returns are guaranteed to not change during serialisation. Then you can get away with a direct object to JSON conversion.</p><p>If for some reason:</p><ul><li>The keys need to be altered</li><li>The object does not represent a DAG</li><li>The object cannot be trusted to not change</li><li>Other pre-processing is required</li><li>An intermediate representation is needed for other actions</li></ul><p>Then you probably do need to convert it to an in memory representation like <code>ReportData</code>. Although I would not enforce domain logic on this representation it should be a direct representation of the textual JSON.</p><blockquote><p>Any easy way to use existing class (with n of properties) and use with ReportData class.</p></blockquote><p>Easy is a tricky word. What is easy for a human, is generally painful for a machine and vice-versa.</p><p>I think your question is specifically: <em>Is there a way to directly map an instance of an arbitrary class into a <code>ReportData</code> object?</em></p><p>The short answer is probably yes. The language appears to be Java. You can use reflection to explore a class definition. Using a couple of mapping techniques you could extract the class properties, and even instantiate an instance of that class based on a set of key-value-pairs. You may wish to use annotations to help control the mapping.</p><p>However this is probably over-designing the problem (and unless this is for practice). You probably do not need the intermediate container. There are numerous libraries out there for serialising JSON to and from objects in most languages. Leverage them, and supply just the glue needed to cast the JSON definition into a class instance, and vice-versa.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/c-when-should-i-use-a-2-property-class-over-a-pre-built-structure-like-a-keyvaluepair/'>C# &#8211; When should I use a 2-property class over a pre-built structure like a KeyValuePair</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-design-many-properties-complex-constructor-and-equality/'>C# Design, many properties, complex constructor and equality</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-creating-objects-with-user-defined-variable-names/'>C# &#8211; Creating objects with user-defined variable names</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/a-hashmap-be-usedin-functions-to-determine-which-value-to-returnfor-a-key-when-an-if-else-construct-can-do-the-job-in-better-time/'>A HashMap be used(in functions) to determine which value to return(for a key) when an if else construct can do the job in better time</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-how-to-add-properties-to-subclasses-and-access-them-without-casting-from-a-superclass/'>C# &#8211; How to add properties to subclasses and access them without casting from a superclass</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-what-would-be-a-proper-implementation-of-a-dictionary-in-java/'>Java &#8211; What would be a proper implementation of a dictionary in java</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>