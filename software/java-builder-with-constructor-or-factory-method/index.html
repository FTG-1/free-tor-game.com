<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Builder with constructor or factory method &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072865 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072865" class="post-1072865 software type-software status-publish hentry category-software tag-builder-pattern tag-factory-method tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Builder with constructor or factory method</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">builder-pattern</span><span class="mr-2 badge badge-info">factory-method</span><span class="mr-2 badge badge-warning">java</span></p><div class="entry-content"><p>Let&#39;s say I have a class <code>Dot</code> with a builder:</p><pre class="lang-java prettyprint-override"><code>public class Dot {
    private final Double x;
    private final Double y;
    private final Color color;

    private Dot(Double x, Double y, Color color) {
        this.x = x;
        this.y = y;
        this.color = color;
    }

    public static Builder createBuilder() {
        return new Builder();
    }

    public Double getX() { return x; }

    public Double getY() { return y; }

    public Color getColor() { return color; }

    public Builder getBuilder() {
        return new Builder().setX(x).setY(y).setColor(color);
    }

    public static class Builder {
        private Double x;
        private Double y;
        private Color color;

        public Builder setX(Double x) {
            this.x = x;
            return this;
        }

        public Builder setY(Double y) {
            this.y = y;
            return this;
        }

        public Builder setColor(Color color) {
            this.color = color;
            return this;
        }

        public Dot build() {
            return new Dot(x, y, color);
        }
    }
}
</code></pre><p>Now I see two possible ways one could instantiate the builder. Through its constructor:</p><pre class="lang-java prettyprint-override"><code>new Dot.Builder().setX(...
</code></pre><p>or through a factory method:</p><pre class="lang-java prettyprint-override"><code>Dot.createBuilder().setX(...
</code></pre><p>(In the latter case I would make the <code>Builder</code>&#39;s constructor <code>private</code>.)</p><p>Factory methods (or factories) are (to my knowledge) useful when the actual type of the returned value might change later on. This is something that is probably not going to occur with a builder.</p><p>My best argument for using a factory method would be: Say that the builder uses a final field <code>String id</code> that has to be set in its constructor, but certain restrictions apply to what constitutes an ID. Throwing an exception on an illegal id string <a href="https://wiki.sei.cmu.edu/confluence/display/java/OBJ11-J.+Be+wary+of+letting+constructors+throw+exceptions" rel="nofollow noreferrer">should not be done in a constructor</a>. Therefore a factory method would be better.</p><p>However I feel like I missed some more important arguments. Does a best practice for this case exist? What other arguments exist for/against using a factory method here?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><code>Builder</code> is a class internal to <code>Dot</code>.  For me this tells me that <code>Builder</code> is strongly coupled with <code>Dot</code> and that <code>Builder</code> is a utility of <code>Dot</code> for some objective, in this case object construction.</p><p>This is objectively one step away from <code>Builder</code> being an internal class hidden away from the caller entirely.  The only link you, the caller, should have to <code>Builder</code> <em>should be through</em> <code>Dot</code> as a general rule.  And although there&#39;s nothing stopping you from making <code>Builder</code>&#39;s constructor public and accessing it directly, I confirmly believe it is an antipattern.</p><p>Therefore, you should have a static factory method in <code>Dot</code> that returns an instance of <code>Builder</code>.  You mention that it isn&#39;t likely that you&#39;d ever need to extend <code>Builder</code>, and that&#39;s all fine and good, but when you&#39;re given a more flexible option with no drawbacks while you&#39;re developing, you grab hold of it like your life depended on it.  Should you ever need to extend <code>Builder</code>, you could make <code>Builder&lt;T&gt;</code> an interface and create a customized <code>DotBuilder&lt;Dot&gt;</code> which implements it which when called creates an instance of <code>Dot</code>.</p><blockquote><p>My best argument for using a factory method would be: Say that the
 builder uses a final field String id that has to be set in its
 constructor, but certain restrictions apply to what constitutes an ID.
 Throwing an exception on an illegal id string should not be done in a
 constructor. Therefore a factory method would be better.</p></blockquote><p>I&#39;m usually against constructors performing work that might likely throw exceptions.  It&#39;s one thing to throw an exception in a constructor for an invalid parameter or for a very unlikely situation such as Xml implementation not existing, and quite another to attempt to establish a database connection which can and will fail quite easily.  If you did need to do work in your <code>Builder</code> constructor, you could do so lazily putting it off until the actual creation of the object as to not make your constructor explode.  Though if I&#39;ve got <code>Builder</code> class pegged correctly, it isn&#39;t the type of class that <em>should</em> ever explode upon creation.  If that isn&#39;t your case, give serious thought to making it work in the way that one might expect it to work (aka  possible exceptions when calling <code>build()</code> method only).</p><p>Also if I may add, having a builder class <code>Builder</code> with many of the same methods as <code>Dot</code> is not probably a good idea.  Your situation may be different and this may be the simplified version, so if this doesn&#39;t apply to you, ignore this advice.  Though it is my opinion that <code>Builder</code> is largely unnecessary here. <code>Dot</code> can return <code>this</code> after each setter and perform precisely the same functionality.  Give it some thought.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-benefit-of-using-static-inner-builder-class/'>Java &#8211; Benefit of using static inner builder class</a></li><li class="list-group-item"><a href='../java-static-factory-vs-factory-as-a-singleton/'>Java &#8211; Static factory vs factory as a singleton</a></li><li class="list-group-item"><a href='../java-how-to-decouple-simple-factory-and-default-implementation/'>Java &#8211; How to decouple simple factory and default implementation</a></li><li class="list-group-item"><a href='../java-why-would-a-type-be-coupled-with-its-builder/'>Java &#8211; Why would a type be coupled with its builder</a></li><li class="list-group-item"><a href='../java-how-to-implement-a-step-builder-for-which-the-order-of-setters-doesnt-matter/'>Java: How to implement a step builder for which the order of setters doesn&#8217;t matter</a></li><li class="list-group-item"><a href='../java-when-to-call-the-constructor-and-when-to-call-the-method-in-java/'>Java &#8211; When to call the constructor and when to call the method in Java</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>