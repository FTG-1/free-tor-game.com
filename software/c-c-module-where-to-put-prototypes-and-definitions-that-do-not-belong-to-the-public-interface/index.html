<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; C Module &#8211; Where to put prototypes and definitions that do not belong to the public interface &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079988 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079988" class="post-1079988 software type-software status-publish hentry category-software tag-c tag-headers tag-programming-practices"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; C Module &#8211; Where to put prototypes and definitions that do not belong to the public interface</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">headers</span><span class="mr-2 badge badge-warning">programming practices</span></p><div class="entry-content"><p>Since I am mainly an Electrical Engineer, forgive me if I am somewhat off with some terminology.</p><p>I am currently programming a display driver/interface module. And like so many times before, I have reached a point where I am unsure on how to separate <em>function prototypes and definitions that are meant for internal use</em> of the module from the <em>public interface</em>.</p><p>Consider the following code as as an example:</p><p>C-file:</p><pre><code>// display.c
#include &#34;display.h&#34;

// Belongs to public Interface
void SetFont(Font_t fnt) {
    // implementation
}

// Belongs to public Interface
void PrintCharAt(int x, int y, char ch) {
    // implementation
}

// For internal use only 
void SendDataToDisplay(DisplayTelegram_t telegram) {

}
</code></pre><p>Header:</p><pre><code>// display.h
typedef struct {
    // implementation
} Font_t;

typedef struct {
    // implementation
} DisplayTelegram_t;

void SetFont(Font_t fnt);
void PrintCharAt(int x, int y, char ch);
void SendDataToDisplay(DisplayTelegram_t telegram);
</code></pre><p>The article <a href="http://embeddedgurus.com/barr-code/2010/11/what-belongs-in-a-c-h-header-file/" rel="nofollow noreferrer">What Belongs in a C .h Header File?</a> covers several points that I mostly agree with.</p><blockquote><p>DO include in the header file all of the function prototypes for the public interface of the module it describes.</p><p>DON’T include in the header file any other function or macro that may lie inside the module source code. It is desirable to hide these internal “helper” functions inside the implementation. If it’s not called from any other module, hide it!</p></blockquote><p>So far so good, but what is the best practice for hiding the internal prototypes etc? There is no reason to have the <code>DisplayTelegram_t</code> type and the <code>SendDataToDisplay()</code> prototype in the header. It may even confuse someone who just wants to use the interface when things get more complex.</p><p>I can think of three options:</p><ol><li><p>Just put all internal prototypes, typedefs, defines etc. to the top of the .c-file. I have done this in the past, but I do not like it. It does not seem consistent to pollute the .c-file with header-material.</p></li><li><p>Create a second header file like <code>display_internal.h</code> and put everything for internal use only there. I have read a lot about this approach, but barely seen it used.</p></li><li><p>Don&#39;t care about hiding internal prototypes etc. and just put everything in the header-file. Maybe grouping public and internal stuff together respectively and leaving a comment. This is dirty from a responsibility-perspective but at least its consistent and clean for the author of the code.</p></li></ol><p>Is there any approach I am missing? How is this handled on a professional level?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>1.Just put all internal prototypes, typedefs, defines etc. to the top of the .c-file. I have done this in the past, but I do not like it. It does not seem consistent to pollute the .c-file with header-material.</p></blockquote><p><em>Function prototypes</em> are not header-material. <em>Public API function prototypes</em> are header-material.</p><p>If you had a single compilation unit, you would not need the header file at all. Then, you could add all prototypes (that are needed in that compilation unit in order to compile) to the top of the C file.</p><p>You can still do so, but since you usually have more compilation units, and they reuse each other&#39;s public APIs, it makes sense that the public APIs are in separate files, which are then reused (thus avoiding duplicate code).</p><p>Your second alternative ( <em>create a second header file like display_internal.h and put everything for internal use only there</em> ) is not really an alternative: the moment you add function prototypes to a header file to use it in other compilation units, that is public interface by definition (and should be in the public API header).</p><p>The third alternative is bad for project maintenance (very bad!). In practice, people working on client code, find the prototypes and figure &#34;hey, I&#39;m doing code reuse ;)&#34; without caring that there is a comment in the header saying &#34;part of the private api&#34;. This way, they end up adding undocumented interdependencies on private APIs.</p><p><strong>TLDR</strong>: The first option is the correct one to take.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-is-it-better-to-document-functions-in-the-header-file-or-the-source-file/'>C++ &#8211; Is it better to document functions in the header file or the source file</a></li><li class="list-group-item"><a href='../c-when-to-use-typedef/'>C++ &#8211; When to use typedef</a></li><li class="list-group-item"><a href='../why-use-typedefs-for-structs/'>Why use typedefs for structs</a></li><li class="list-group-item"><a href='../c-project-avoiding-naming-conflicts/'>C project avoiding naming conflicts</a></li><li class="list-group-item"><a href='../c-splitting-and-hiding-headers-in-a-static-library/'>C++ &#8211; Splitting and hiding headers in a static library</a></li><li class="list-group-item"><a href='../c-header-files-design-just-like-defining-an-api/'>C++ Header files design : just like defining an API</a></li><li class="list-group-item"><a href='../c-are-header-only-libraries-more-efficient/'>C++ &#8211; Are header-only libraries more efficient</a></li><li class="list-group-item"><a href='../unit-testing-unit-testing-module-internal-functions/'>Unit-testing &#8211; Unit Testing Module-Internal Functions</a></li><li class="list-group-item"><a href='../object-oriented-using-friend-classes-to-encapsulate-private-member-functions-in-c-good-practice-or-abuse/'>Object-oriented &#8211; Using friend classes to encapsulate private member functions in C++ &#8211; good practice or abuse</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>