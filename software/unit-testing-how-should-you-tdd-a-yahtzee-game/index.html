<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; How should you TDD a Yahtzee game &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072931 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072931" class="post-1072931 software type-software status-publish hentry category-software tag-tdd tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; How should you TDD a Yahtzee game</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">tdd</span><span class="mr-2 badge badge-info">unit testing</span></p><div class="entry-content"><p>Let&#39;s say you&#39;re writing a Yahtzee game TDD style. You want to test the part of the code that determines whether or not a set of five die rolls is a full house. As far as I know, when doing TDD, you follow these principles:</p><ul><li>Write tests first</li><li>Write the simplest thing possible that works</li><li>Refine and refactor</li></ul><p>So an initial test might look something like this:</p><pre class="lang-csharp prettyprint-override"><code>public void Returns_true_when_roll_is_full_house()
{
    FullHouseTester sut = new FullHouseTester();
    var actual = sut.IsFullHouse(1, 1, 1, 2, 2);

    Assert.IsTrue(actual);
}
</code></pre><p>When following the &#34;Write the simplest thing possible that works&#34;, you should now write the <code>IsFullHouse</code> method like this:</p><pre class="lang-csharp prettyprint-override"><code>public bool IsFullHouse(int roll1, int roll2, int roll3, int roll4, int roll5)
{
    if (roll1 == 1 &amp;&amp; roll2 == 1 &amp;&amp; roll3 == 1 &amp;&amp; roll4 == 2 &amp;&amp; roll5 == 2)
    {
        return true;
    }

    return false;
}
</code></pre><p>This results in a green test but the implementation is incomplete.</p><p>Should you unit test every possible valid combination (both of values and positions) for a full house? That looks like the only way to be absolutely sure that your <code>IsFullHouse</code> code is completely tested and correct, but it also sounds quite insane to do that.</p><p>How would you unit test something like this?</p><h2>Update</h2><p>Erik and Kilian point out that using literals in the initial implementation to get a green test might not be the best idea. I&#39;d like to explain why I did that and that explanation does not fit in a comment.</p><p>My practical experience with unit testing (especially using a TDD approach) is very limited. I remember watching a recording of Roy Osherove&#39;s TDD Masterclass on Tekpub. In one of the episodes he builds a String Calculator TDD style. The full specification of the String Calculator can be found here: <a href="http://osherove.com/tdd-kata-1/">http://osherove.com/tdd-kata-1/</a></p><p>He starts with a test like this:</p><pre class="lang-csharp prettyprint-override"><code>public void Add_with_empty_string_should_return_zero()
{
    StringCalculator sut = new StringCalculator();
    int result = sut.Add(&#34;&#34;);

    Assert.AreEqual(0, result);
}
</code></pre><p>This results in this first implementation of the <code>Add</code> method:</p><pre class="lang-csharp prettyprint-override"><code>public int Add(string input)
{
    return 0;
}
</code></pre><p>Then this test is added:</p><pre class="lang-csharp prettyprint-override"><code>public void Add_with_one_number_string_should_return_number()
{
    StringCalculator sut = new StringCalculator();
    int result = sut.Add(&#34;1&#34;);

    Assert.AreEqual(1, result);
}
</code></pre><p>And the <code>Add</code> method is refactored:</p><pre class="lang-csharp prettyprint-override"><code>public int Add(string input)
{
    if (input.Length == 0)
    {
        return 0;
    }

    return 1;
}
</code></pre><p>After each step Roy says &#34;Write the simplest thing that will work&#34;.</p><p>So I thought I would give this approach a try when trying to do a TDD-style Yahtzee game.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>There are already lots of good answers to this question, and I&#39;ve commented and upvoted several of them. Still, I&#39;d like to add some thoughts.</p><p><strong>Flexibility isn&#39;t for novices</strong></p><p>The OP clearly states that he&#39;s <em>not</em> experienced with TDD, and I think a good answer must take that into account. In the terminology of the <a href="http://en.wikipedia.org/wiki/Dreyfus_model_of_skill_acquisition">Dreyfus model of skill acquisition</a>, he&#39;s probably a <strong>Novice</strong>. There&#39;s nothing wrong with being a novice - we are all novices when we start learning something new. However, what the Dreyfus model explains is that novices are characterized by</p><ul><li>rigid adherence to taught rules or plans</li><li>no exercise of discretionary judgement</li></ul><p>That&#39;s not a description of a personality deficiency, so there&#39;s no reason to be ashamed of that - it&#39;s a stage we all need to go through in order to learn something new.</p><p>This is also true for TDD.</p><p>While I agree with many of the other answers here that TDD doesn&#39;t have to be dogmatic, and that it can sometimes be more beneficial to work in an alternative way, that doesn&#39;t help anyone just starting out. How can you exercise discretionary judgement when you have no experience?</p><p>If a novice accepts the advice that sometimes it&#39;s OK not to do TDD, how can he or she determine when it&#39;s OK to skip doing TDD?</p><p>With no experience or guidance, the only thing a novice can do is to skip out of TDD every time it becomes too difficult. That&#39;s human nature, but not a good way to learn.</p><p><strong>Listen to the tests</strong></p><p>Skipping out of TDD any time it becomes hard is to miss out of one of the most important benefits of TDD. <strong>Tests provide early feedback about the API of the SUT.</strong> If the test is hard to write, it&#39;s an important sign that the SUT is hard to use.</p><p>This is the reason why one of the most important messages of <a href="http://amzn.to/SM8Yv0">GOOS</a> is: <em>listen to your tests!</em></p><p>In the case of this question, my first reaction when seeing the proposed API of the Yahtzee game, and the discussion about combinatorics that can be found on this page, was that this is important feedback about the API.</p><p>Does the API have to represent dice rolls as an ordered sequence of integers? To me, that smell of <a href="http://blog.ploeh.dk/2011/05/25/DesignSmellPrimitiveObsession.aspx">Primitive Obsession</a>. That&#39;s why I was happy to see the answer from tallseth suggesting the introduction of a <code>Roll</code> class. I think that&#39;s an excellent suggestion.</p><p>However, I think that some of the comments to that answer get it wrong. What TDD then suggests is that once you get the idea that a <code>Roll</code> class would be a good idea, you suspend work on the original SUT and start working on TDD&#39;ing the <code>Roll</code> class.</p><p>While I agree that TDD is more aimed at the &#39;happy path&#39; than it&#39;s aimed at comprehensive testing, it still helps to break the system down into manageable units. A <code>Roll</code> class sounds like something you could TDD to completion much more easily.</p><p>Then, once the <code>Roll</code> class is sufficiently evolved, would you go back to the original SUT and flesh it out in terms of <code>Roll</code> inputs.</p><p>The suggestion of a <a href="http://xunitpatterns.com/Test Helper.html">Test Helper</a> doesn&#39;t necessarily imply randomness - it&#39;s just a way to make the test more readable.</p><p>Another way to approach and model input in terms of <code>Roll</code> instances would be to introduce a <a href="http://nat.truemesh.com/archives/000714.html">Test Data Builder</a>.</p><p><strong>Red/Green/Refactor is a three-stage process</strong></p><p>While I agree with the general sentiment that (if you are sufficiently experienced in TDD), you don&#39;t need to stick to TDD rigorously, I think it&#39;s pretty poor advice in the case of a Yahtzee exercise. Although I don&#39;t know the details of the Yahtzee rules, I see no convincing argument here that you can&#39;t stick rigorously with the Red/Green/Refactor process and still arrive at a proper result.</p><p>What most people here seem to forget is the third stage of the Red/Green/Refactor process. First you write the test. Then you write the simplest implementation that passes all tests. <strong>Then you refactor.</strong></p><p>It&#39;s here, in this third state, that you can bring all your professional skills to bear. This is where you are allowed to reflect on the code.</p><p>However, I think it&#39;s a cop-out to state that you should only &#34;Write the simplest thing possible <strong>that isn&#39;t completely braindead and obviously incorrect</strong> that works&#34;. If you (think you) know enough about the implementation on beforehand, then <em>everything</em> short of the complete solution is going to be <em>obviously incorrect</em>. As far as advice goes, then, this is pretty useless to a novice.</p><p>What really should happen is that if you can make all tests pass with an <em>obviously incorrect</em> implementation, that&#39;s <strong>feedback that you should write another test</strong>.</p><p>It&#39;s surprising how often doing that leads you towards an entirely different implementation than the one you had in mind first. Sometimes, the alternative that grows like that may turn out to be better than your original plan.</p><p><strong>Rigour is a learning tool</strong></p><p>It makes a lot of sense to stick with rigorous processes like Red/Green/Refactor as long as one is learning. It forces the learner to gain experience with TDD not just when it&#39;s easy, but also when it&#39;s hard.</p><p>Only when you have <em>mastered</em> all the hard parts are you in a position to make an informed decision on when to deviate from the &#39;true&#39; path. That&#39;s when you start forming your own path.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-why-not-write-all-tests-at-once-when-doing-tdd/'>Unit-testing &#8211; Why not write all tests at once when doing TDD</a></li><li class="list-group-item"><a href='../object-oriented-do-we-need-logging-when-doing-tdd/'>Object-oriented &#8211; Do we need Logging when doing TDD</a></li><li class="list-group-item"><a href='../workflow-of-test-driven-development-to-follow-solid-principles/'>Workflow of Test driven development to follow SOLID principles</a></li><li class="list-group-item"><a href='../unit-testing-should-every-method-return-a-value-for-unit-testing/'>Unit-testing &#8211; Should every method return a value for Unit Testing</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>