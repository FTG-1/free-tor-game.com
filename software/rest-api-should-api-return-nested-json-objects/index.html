<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>REST API &#8211; Should API Return Nested JSON Objects &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063615 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063615" class="post-1063615 software type-software status-publish hentry category-software tag-api-design tag-design tag-json tag-rest"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">REST API &#8211; Should API Return Nested JSON Objects</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api-design</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">json</span><span class="mr-2 badge badge-primary">rest</span></p><div class="entry-content"><p>When it comes to JSON APIs is it good practice to flatten out responses and avoid nested JSON objects?</p><p>As an example lets say we have an API similar to IMDb but for video games. There are a couple entities, Game, Platform, ESRBRating, and GamePlatformMap which maps Games and Platforms.</p><p>Lets say you request /game/1 which fetches the game with ID 1 and it returns the game object with the platforms and esrbRating nested.</p><pre><code>{
  &#34;id&#34;: 1,
  &#34;title&#34;: &#34;Game A&#34;,
  &#34;publisher&#34;: &#34;Publisher ABC&#34;,
  &#34;developer&#34;: &#34;Developer DEF&#34;,
  &#34;releaseDate&#34;: &#34;2015-01-01&#34;,
  &#34;platforms&#34;: [
    {&#34;id&#34;:1,&#34;name&#34;:&#34;Xbox&#34;},
    {&#34;id&#34;:2,&#34;name&#34;:&#34;Playstation&#34;}
  ],
  &#34;esrbRating&#34;: {
    &#34;id&#34;: 1,
    &#34;code&#34;: &#34;E&#34;,
    &#34;name&#34;: &#34;Everyone&#34;
  }
}
</code></pre><p>If you are using something like JPA/Hibernate it may automatically do this for you if it is set to FETCH.EAGER.</p><p>The other option is to simply the API and add more end points.</p><p>In that case when /game/1 is requested just the game object is returned.</p><pre><code>{
  &#34;id&#34;: 1,
  &#34;title&#34;: &#34;Game A&#34;,
  &#34;publisher&#34;: &#34;Publisher ABC&#34;,
  &#34;developer&#34;: &#34;Developer DEF&#34;,
  &#34;releaseDate&#34;: &#34;2015-01-01&#34;,
}
</code></pre><p>If you want the platforms and/or ESRBRating you would have to call the following:</p><p>/game/1/platform<br /> /game/1/esrb</p><p>This method seems like it could potentially add several more calls to the server depending on what data the client needs and when they need it.</p><p>There was one last thought I had where you would have something like this returned.</p><pre><code>{
  &#34;id&#34;: 1,
  &#34;title&#34;: &#34;Game A&#34;,
  &#34;publisher&#34;: &#34;Publisher ABC&#34;,
  &#34;developer&#34;: &#34;Developer DEF&#34;,
  &#34;releaseDate&#34;: &#34;2015-01-01&#34;,
  &#34;platforms&#34;: [&#34;Xbox&#34;,&#34;Playstation&#34;]
}
</code></pre><p>However this assumes they don&#39;t need the IDs or whatever other information may be associated with those platform objects.</p><p>I asking in general what is the best way to structure your JSON objects returned from your API. Should you try to stay as close to your entities as possible, or is it fine to use Domain Objects or Data Transfer Objects? I understand the methods will have trade offs, either more work on the data access layer or more work for the client.</p><p>I would also like to hear an answer related to using Spring MVC as the backend technology for the API, with either JPA/Hibernate or MyBatis for persistence.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Another alternative (using HATEOAS). This is simple, mostly in practice you add a links tag in the json depending on your use of HATEOAS.</p><p><code>http://api.example.com/games/1</code>:</p><pre class="lang-javascript prettyprint-override"><code>{
  &#34;id&#34;: 1,
  &#34;title&#34;: &#34;Game A&#34;,
  &#34;publisher&#34;: &#34;Publisher ABC&#34;,
  &#34;developer&#34;: &#34;Developer DEF&#34;,
  &#34;releaseDate&#34;: &#34;2015-01-01&#34;,
  &#34;platforms&#34;: [
    {&#34;_self&#34;: &#34;http://api.example.com/games/1/platforms/53&#34;, &#34;name&#34;: &#34;Playstation&#34;},
    {&#34;_self&#34;: &#34;http://api.example.com/games/1/platforms/34&#34;, &#34;name&#34;: &#34;Xbox&#34;},
  ]
}
</code></pre><p><code>http://api.example.com/games/1/platforms/34</code>:</p><pre class="lang-javascript prettyprint-override"><code>{
  &#34;id&#34;: 34,
  &#34;title&#34;: &#34;Xbox&#34;,
  &#34;publisher&#34;: &#34;Microsoft&#34;,
  &#34;releaseDate&#34;: &#34;2015-01-01&#34;,
  &#34;testReport&#34;: &#34;http://api.example.com/games/1/platforms/34/reports/84848.pdf&#34;,
  &#34;forms&#34;: [
    {&#34;type&#34;: &#34;edit&#34;, &#34;fields: [] },
  ]
}
</code></pre><p>You can off course embed all data in all listing but that will likely be way too much data. This way you can embed the required data and then load more if you really want to work with it.</p><p>The technical implementation can contain caching. You can cache the platforms links and names in the game object and send it instantly without having to load the platforms api at all. Then when required you can load it.</p><p>You see for example that I added some form information. I did that to show you there can be much more information in a detailed json object than you would even want to load in the listing of games.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-always-return-single-objects-in-an-array-for-rest-api-json-payloads/'>Rest &#8211; Always return single objects in an array for REST API JSON payloads</a></li><li class="list-group-item"><a href='../python-how-the-website-should-use-its-own-api/'>Python &#8211; How the website should use its own API</a></li><li class="list-group-item"><a href='../rest-is-it-ok-to-return-html-from-a-json-api/'>Rest &#8211; Is it OK to return HTML from a JSON API</a></li><li class="list-group-item"><a href='../rest-nested-objects-in-rest/'>Rest &#8211; Nested objects in REST</a></li><li class="list-group-item"><a href='../rest-api-nested-routes-without-providing-identifiers-at-every-nested-level/'>REST API, nested routes without providing identifiers at every nested level</a></li><li class="list-group-item"><a href='../rest-api-responding-with-nested-arrays/'>REST API responding with nested arrays</a></li><li class="list-group-item"><a href='../rest-api-handle-partial-nested-objects/'>REST API: Handle &#8220;partial&#8221; nested objects</a></li><li class="list-group-item"><a href='../rest-flat-or-nested-json-for-hierarchal-data/'>Rest &#8211; Flat or nested JSON for hierarchal data</a></li><li class="list-group-item"><a href='../rest-json-rest-responses-and-embedded-objects/'>Rest &#8211; JSON REST Responses and Embedded Objects</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>