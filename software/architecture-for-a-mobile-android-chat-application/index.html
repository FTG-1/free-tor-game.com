<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture for a mobile (Android) chat application &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067018 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067018" class="post-1067018 software type-software status-publish hentry category-software tag-architecture tag-chat tag-messaging tag-mongodb tag-mysql"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture for a mobile (Android) chat application</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">chat</span><span class="mr-2 badge badge-warning">messaging</span><span class="mr-2 badge badge-primary">mongodb</span><span class="mr-2 badge badge-danger">MySQL</span></p><div class="entry-content"><p>I want to develop a chat application that reminds a bit whatsapp, I am doing it as a learning project. I am currently doing it on Android just because I am doing an Android course.</p><p>The requirements are:</p><ol><li>users register with some data (phone number, name)</li><li>users can write messages to friends who also use the same application</li><li>messages are written to DB &#8211; I think there are many writes but less reads just because that when a message is sent to the server and written to DB a notification is sent to the receiver&#39;s mobile, but maybe in the future I would also want to add web interface so it might include also many reads from DB.</li><li>when message is read I want to update the DB.</li></ol><p>I was thinking first to use MySQL for storing all users and some NoSQL for the purpose of storing the messages &#8211; MongoDB, this is because the messages data can grow to large scales very fast and using RDB might be a problem.</p><p>Do you think it will be right to use this architecture? Will MongoDB be a problem since there might be many updates? after a message was written and when the receiver&#39;s phone accepts the message an update is sent to the server indicated message received?</p><p>Maybe I am missing something that you can please think of?</p><p>If you think there is a better architecture I will appreciate if you can contribute.</p><p>Thanks.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Some considerations:</p><ol><li><p><strong>Choice of database</strong>: relational databases such as Mysql or Postgres are not necessarily harder to scale than MongoDB and such. In many cases it&#39;s quite the opposite. Here is a great comparison of different storage technologies: <a href="http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis" rel="noreferrer">http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis</a></p></li><li><p><strong>&#34;Event-driven&#34; architecture</strong>: You have a lot of requirements that boil down to &#34;when this happens, do something&#34;. A typical way to build an architecture like that is to think of events being emitted and event listeners acting upon those events. For example:</p><ul><li>&#34;message read&#34; is an event that your Android app will be sending back to the server when somebody reads a message. Server can have a listener waiting for events like that, and every time it gets one, it&#39;ll go and mark the message as &#34;read&#34; in the database</li><li>You can think of other use cases like that: &#34;message received&#34; is an event - listener will take that message and forward it on to the recepient.</li><li>Another one: &#34;user connected&#34; - when somebody launches the app and connects to the server, you&#39;d probably like to forward any messages directed to them that gathered while they were offline - that can be easily addressed using events.</li></ul></li></ol><p>You would typically have a message queue as the center piece of your application, with all kinds of listeners connected to it, and all events that are emitted sent through it.</p><ol start="3"><li><p><strong>3rd party solutions</strong>: If you are doing this as a learning exercise with focus on Android development, consider using a 3rd party solution that can take care of a lot of your backend needs. One example is <a href="https://www.firebase.com/" rel="noreferrer">https://www.firebase.com/</a>. Building a full-blown backend system for an app like this, with serious scaling and performance requirements is a lot of effort which will take your time away from learning Android.</p></li><li><p><strong>Start simple, iterate</strong>: I&#39;d start with a very simple back-end app without a database, and develop it in parallel with the Android app. Make sure you understand as much as possible about your requirements before you make big decisions about what database to use etc - the only real way to do that is to prototype and iterate as quickly as possible.</p></li></ol><hr/><p>Now, some concrete solution &#34;templates&#34; that you can use as starting points:</p><p><strong>Firebase-powered backend</strong></p><p>Go this route if:</p><ul><li>You would rather focus on learning Android and not worry about the backend</li><li>You favor getting something running quickly over getting your hands dirty with every part of the system at once</li></ul><p>Firebase can take care of much of your needs. You won&#39;t need to think about the database and scaling. But you&#39;ll need to understand their data models.</p><p>Some places to start with:</p><ul><li><a href="https://stackoverflow.com/questions/21119470/dataserver-design-based-on-firebase-for-mobile-apps">https://stackoverflow.com/questions/21119470/dataserver-design-based-on-firebase-for-mobile-apps</a></li><li>Android notifications: <a href="https://stackoverflow.com/questions/24713765/firebase-android-notifications-childadded-how-to-get-only-new-childs">https://stackoverflow.com/questions/24713765/firebase-android-notifications-childadded-how-to-get-only-new-childs</a></li></ul><p><strong>Node.js + Socket.io + MongoDB + Redis</strong></p><p>Go this route if:</p><ul><li>You want to use a popular framework that fits the realtime communications requirement</li><li>You don&#39;t mind introducing a whole other language and set of technologies</li><li>You don&#39;t mind working with JavaScript</li></ul><p>Rough outline of the system:</p><ul><li>Node.js and socket.io handling all of your communication to/from Android app</li><li>MongoDB is used to store messages and user information</li><li>Redis is used as a &#34;message queue&#34; to connect your event emitters and event listeners</li></ul><p>Socket.io is good at communications: you won&#39;t need to write low-level networking code. Node.js has good performance for things like that.</p><p>Pointers:</p><ul><li>Socket.io client for Android: <a href="https://github.com/nkzawa/socket.io-client.java" rel="noreferrer">https://github.com/nkzawa/socket.io-client.java</a></li><li>Get started quickly with socket.io and node.js: <a href="http://socket.io/get-started/" rel="noreferrer">http://socket.io/get-started/</a></li><li>Message queue choices to use with node.js: <a href="https://stackoverflow.com/questions/4700935/what-are-good-message-queue-options-for-nodejs">https://stackoverflow.com/questions/4700935/what-are-good-message-queue-options-for-nodejs</a></li></ul><p><strong>Java Netty + RabbitMQ + MongoDB</strong></p><p>Go this route if:</p><ul><li>You want to stick with Java as much as possible</li><li>You don&#39;t mind learning a whole lot about low level networking stuff</li><li>You like to understand and control as much of your infrastructure as possible</li></ul><p>Outline:</p><ul><li>Netty for network communications</li><li>RabbitMQ as the message queue for communications between event emitters and listeners</li><li>MongoDB to store messages and user information</li></ul><p>Pointers:</p><ul><li><a href="http://netty.io/" rel="noreferrer">http://netty.io/</a></li><li><a href="https://github.com/netty/netty" rel="noreferrer">https://github.com/netty/netty</a></li><li>Google for things like &#34;java netty chat server&#34;</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-high-traffic-chat-how-to-check-if-there-is-new-message-and-show-it-for-all-users/'>Php &#8211; High traffic chat &#8211; how to check if there is new message and show it for all users</a></li><li class="list-group-item"><a href='../design-system-design-scalable-chat-server/'>Design &#8211; System Design: Scalable Chat Server</a></li><li class="list-group-item"><a href='../design-architecture-for-message-processing-with-scheduling-at-scale/'>Design &#8211; Architecture for message processing with scheduling, at scale</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>