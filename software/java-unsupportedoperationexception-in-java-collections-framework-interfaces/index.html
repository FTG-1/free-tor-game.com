<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; UnsupportedOperationException in java collections framework interfaces &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080479 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080479" class="post-1080479 software type-software status-publish hentry category-software tag-interfaces tag-java tag-methods"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; UnsupportedOperationException in java collections framework interfaces</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">interfaces</span><span class="mr-2 badge badge-info">java</span><span class="mr-2 badge badge-warning">methods</span></p><div class="entry-content"><p>Looking through the Java Collections Framework, I&#39;ve noticed quite a few of the interfaces have the comment <code>(optional operation)</code>. These methods allow implementing classes to through an <code>UnsupportedOperationException</code> if they just don&#39;t want to implement that method.</p><p>An example of this is the <code>addAll</code> method in the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#addAll(java.util.Collection)" rel="nofollow noreferrer"><code>Set Interface</code></a>.</p><p>Now, as stated in this series of questions, interfaces are a defining contract for what the use can expect.</p><blockquote><p>Interfaces are important because they separate what a class does from how it does it. The contract defining what a client can expect leaves the developer free to implement it any way they choose, as long as they uphold the contract.</p></blockquote><p>and</p><blockquote><p>An interface is a description of the actions that an object can do&#8230; for example when you flip a light switch, the light goes on, you don&#39;t care how, just that it does. In Object Oriented Programming, an Interface is a description of all functions that an object must have in order to be an &#34;X&#34;.</p></blockquote><p>and</p><blockquote><p>I think the interface-based approach is significantly nicer. You can then mock out your dependencies nicely, and everything is basically less tightly coupled.</p></blockquote><p><a href="https://softwareengineering.stackexchange.com/questions/131332/what-is-the-point-of-an-interface">What is the point of an interface?</a></p><p><a href="http://www.cs.utah.edu/~germain/PPS/Topics/interfaces.html" rel="nofollow noreferrer">What are interfaces?</a></p><p><a href="https://stackoverflow.com/a/783327/771665">Interface + Extension (mixin) vs Base Class</a></p><p>Given that the purpose of interfaces is to define a contract and make your dependencies loosely coupled, doesn&#39;t having some methods throw an <code>UnsupportedOperationException</code> kind of defeat the purpose?  It means I can no longer be passed a <code>Set</code> and just use <code>addAll</code>. Rather, I have to know what implementation of <code>Set</code> I was passed, so I can know if I can use <code>addAll</code> or not. That seems pretty worthless to me.</p><p>So what&#39;s the point of <code>UnsupportedOperationException</code>? Is it just making up for legacy code, and they need to clean up their interfaces? Or does it have a more sensical purpose that I&#39;m missing?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Look at the following interfaces:</p><ul><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" rel="nofollow noreferrer">Collection</a></li><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" rel="nofollow noreferrer">List</a></li><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" rel="nofollow noreferrer">Map</a></li><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" rel="nofollow noreferrer">Set</a></li></ul><p>These interfaces all declare <em>mutating methods</em> as optional. This is implicitly documenting the fact that the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html" rel="nofollow noreferrer">Collections</a> class is able to return implementations of those interfaces that are immutable: that is, those optional mutation operations are guaranteed to fail. However, per the contract in the JavaDoc, all implementations of those interfaces must allow the read operations. This includes the &#34;normal&#34; implementations such as <code>HashSet</code> and <code>LinkedList</code> as well as the immutable wrappers in <code>Collections</code>.</p><p>Contrast with the queue interfaces:</p><ul><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html" rel="nofollow noreferrer">Deque</a></li><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Queue.html" rel="nofollow noreferrer">Queue</a></li></ul><p>These interface do <em>not</em> specify any optional operations: a queue, by definition, is designed to offer and poll elements in a FIFO manner. An immutable queue is about as useful as a car without wheels.</p><hr/><p>One common idea that comes up repeatedly is having an inheritance hierarchy that has both mutable and immutable objects. However, these all have drawbacks. The complexity muddies the waters without actually solving the problem.</p><ul><li><p>A hypothetical <code>Set</code> could have the read operations, and a subinterface <code>MutableSet</code> could have the write operations. <a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle" rel="nofollow noreferrer">Liskov</a> tells us that a <code>MutableSet</code> could then be passed in to anything that needs a <code>Set</code>. At first this sounds okay, but consider a method that expects the underlying set will not be modified while read: it would be possible for two threads to use the same set and violate the invariant of the set not changing. This could cause a problem e.g. if a method reads an element from the set twice and it is there the first time but not the second time.</p></li><li><p><code>Set</code> could have no direct implementations, instead having <code>MutableSet</code> and <code>ImmutableSet</code> as subinterfaces which are then used for implementing classes. This has the same issue as above: at some point in the hierarchy, an interface has conflicting invariants. One says &#34;this set must be mutable&#34; and the other says &#34;this set cannot change.&#34;</p></li><li><p>There could be two completely separate hierarchies for mutable and immutable data structures. This adds a <em>ton</em> of extra complexity for what ends up being very little gain. This also has the specific weakness of methods that do not care about mutability (e.g. I just want to iterate a list) must now support two separate interfaces. Since Java is statically typed, this means extra methods to handle both interface hierarchies.</p></li><li><p>We could have a single interface and allow implementations to throw exceptions if a method is not applicable to it. This is the route Java took, and it makes the most sense. The number of interfaces is kept to a minimum, and there are no mutability invariants <em>because the documented interface makes no guarantees about mutability either way</em>. If an immutability invariant is required, use the wrappers in <code>Collections</code>. If a method does not need to change a collection, simply do not change it. The drawback is a method cannot guarantee a collection will not change in another thread if it is provided a collection from outside, but that is a concern of the calling method (or its calling method) anyway.</p></li></ul><hr/><p>Related reading: <strong><a href="https://softwareengineering.stackexchange.com/q/221762/22815">Why doesn&#39;t Java 8 include immutable collections?</a></strong></p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-collection-interfaces-in-c-coming-from-java/'>Java &#8211; Collection interfaces in C#, coming from Java</a></li><li class="list-group-item"><a href='../java-why-were-default-and-static-methods-added-to-interfaces-in-java-8-when-we-already-had-abstract-classes/'>Java &#8211; Why were default and static methods added to interfaces in Java 8 when we already had abstract classes</a></li><li class="list-group-item"><a href='../java-preemptive-interfaces-in-java-good-bad-or-a-matter-of-taste/'>Java &#8211; Preemptive interfaces in Java &#8211; good, bad or &#8220;a matter of taste&#8221;</a></li><li class="list-group-item"><a href='../what-are-mia-mid-and-dia-interfaces/'>What are mIa, mId and dIa interfaces</a></li><li class="list-group-item"><a href='../java-are-empty-interfaces-but-not-marker-interfaces-a-bad-programming-practice/'>Java &#8211; Are empty interfaces (but not marker interfaces) a bad programming practice</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>