<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; How to design a REST API that can &#8220;prompt&#8221; the client about long-running operations &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1071826 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1071826" class="post-1071826 software type-software status-publish hentry category-software tag-api tag-api-design tag-design-patterns tag-rest tag-web-api"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; How to design a REST API that can &#8220;prompt&#8221; the client about long-running operations</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">api-design</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">rest</span><span class="mr-2 badge badge-danger">web-api</span></p><div class="entry-content"><p>Say you were to develop a REST API that provides access to a set of complex, long-running, operations.</p><p>The typical paradigm for an API like this (as I understand it) usually involves (the client) making a request to the server, asking it to perform a given long-running operation. The server will respond with a <code>202 Accepted</code> message indicating that the request has been received and, with it, provides the location of the result, where it will eventually become available. The client, from then on, polls this location until the result of the long-running task becomes available.</p><p>This much makes sense. However, imagine now that these long-running tasks are more complex. Imagine that, during the execution of a task, a specific resource, file, network, etc. becomes unavailable and, in order to proceed, the API must &#34;ask&#34; the client whether the job should continue anyway or whether the task should end here.</p><p>How would this requirement change the original paradigm? Instead of having some result located at the given location, would you optionally return some notion of a &#34;question&#34; that needs to be posted back to the server in order to continue?</p><p>Assume for the purposes of this question that you can&#39;t encode some kind of blanket &#34;continue if error&#34; parameter in the original request and that these questions must be addressed on a case-by-case basis, as they arise, if they arise.</p><p>Maybe I&#39;m thinking about this problem the wrong way? I&#39;d be curious to hear how a paradigm like this is usually accomplished, or if it&#39;s as simple as, &#34;yeah, just respond with the prompt, post back the result to the server, and continue to query the original location.&#34;</p><p>I would really appreciate any help I could get.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>For long-running operations, it often helps to model the active job as a REST resource with its own structure and/or sub-resources.</p><p>For example, starting a job may return a result such as</p><pre><code>202 Accepted
Location: https://example.com/jobs/123
</code></pre><p>At that URL, the client will get a structure such as</p><pre><code>{
  &#34;status&#34;:&#34;running&#34;
}
</code></pre><p>as long as the job is running,</p><pre><code>{
  &#34;status&#34;:&#34;finished&#34;,
  &#34;result&#34;:&#34;https://example.com/jobs/123/result&#34;
}
</code></pre><p>when it is completed and a result is available, or</p><pre><code>{
  &#34;status&#34;:&#34;interaction-required&#34;,
  &#34;prompt&#34;:&#34;xyz service not available, please restart it or cancel job.&#34;,
  &#34;continue&#34;:&#34;https://example.com/jobs/123/continue/&lt;token&gt;&#34;,
  &#34;cancel&#34;:&#34;https://example.com/jobs/123/cancel&#34;
}
</code></pre><p>to interact with the user. The job would continue (retrying xyz access) after the client posts something to the continue URL (which would include an idempotency token as suggested by @NPSF3000 to prevent accidentally continuing the next interaction), or would be cancelled by posting something to the cancel URL. Another option for cancellation would be a DELETE verb on the job URL. The cancel link could also be made part of the initial job structure to communicate that the job can be cancelled at any time if the application supports that.</p><p>The details about which kinds of interaction are possible and how they are presented in the client would need to be designed based on the specific needs of these jobs, but the main thing is that the operation start does not just return the location of the result but of a reified job object that can be queried and manipulated.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-a-web-application-as-a-rest-api-client-how-to-handle-resource-identifiers/'>Rest &#8211; A Web application as a REST API client: how to handle resource identifiers</a></li><li class="list-group-item"><a href='../rest-returning-view-code-in-an-api-response/'>Rest &#8211; Returning view code in an API response</a></li><li class="list-group-item"><a href='../rest-how-to-correctly-implement-keyvalue-storage-rest-api/'>Rest &#8211; How to correctly implement key=value storage REST API</a></li><li class="list-group-item"><a href='../rest-api-design-dilemma-to-rest-or-not-to-rest/'>Rest &#8211; API design dilemma: to REST or not to REST</a></li><li class="list-group-item"><a href='../rest-http-status-code-for-still-processing/'>Rest &#8211; HTTP Status Code for &#8220;Still Processing&#8221;</a></li><li class="list-group-item"><a href='../rest-trouble-designing-rest-api-that-uses-both-long-running-jobs-and-partial-update/'>Rest &#8211; Trouble designing REST API that uses both long-running jobs, and partial update</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>