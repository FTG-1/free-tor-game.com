<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>An efficient design to store variables for different product lines in ER database &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087103 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087103" class="post-1087103 software type-software status-publish hentry category-software tag-database-design tag-mysql"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">An efficient design to store variables for different product lines in ER database</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">database-design</span><span class="mr-2 badge badge-info">MySQL</span></p><div class="entry-content"><p>This question is about refactoring existing database design.</p><p>My data flow is</p><ol><li>User generates some data for product lines A, B, C</li><li>Data is saved into the database once</li><li>Data is later retrieved multiple times</li></ol><p>Current design has 3 tables: <code>data_a</code>, <code>data_b</code>, <code>data_c</code>, where each table shares some columns that are identical (in name) and some that are unique to that product line.</p><p>For example, same-name columns in each table are <code>weight</code>, <code>unit_system</code> and a few others.  The differently-named columns have values that represent physical quantities of the particular product line.  Those are named using various alphanumeric identifiers, like <code>a</code>, <code>b5</code>, <code>e2</code>, and there is a different set of them for different product line.  Those sets can share elements, i.e. <code>b5</code> can be in more than one table, but then something like <code>t1</code> can be in one table but not the others.</p><p><strong>Problem</strong></p><p>Currently when there is a need to add some value say <code>x9</code> to product line a, I would update the database schema for <code>data_a</code> to have column <code>x9</code>.  I make the values of x9 as 0 for existing column rows, and new records will begin to populate with the actual <code>x9</code> values.  Then I update the code in relevant places to insert <code>x9</code> into the table or retrieve it from the table.</p><p><strong>Existing design</strong></p><pre><code>data_a(id, item_id, shared, different_a)
data_b(id, item_id, shared, different_b)
data_c(id, item_id, shared, different_c)
</code></pre><p><a href="../../../i.stack.imgur.com/YGyvB.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/YGyvB.png" alt="enter image description here"/></a></p><p>where <code>shared</code> columns is a group of columns that is identical in each table, while <code>different</code> are columns that are disjointed in theory, as they represent 3 different product lines, but actually may share some similarly-named elements, as some variable names are the same for different product lines.</p><p><strong>Proposed design</strong></p><p>This is where I&#39;m struggling.  Because I don&#39;t see a good clean design that is also efficient.  I wanted to get rid of the need to alter database schema every time there is a new variable added to a product line.  And I believe I can do that, but I also want to make an efficient design, and I don&#39;t see one.</p><p>But this is my try:</p><p>Keep primary key, foreign key and shared column names in a single table:</p><pre><code>data(id, item_id, shared)
</code></pre><p>Create a single table for variables only (variables are ones found in <code>different</code> sets):</p><pre><code>data_variables(id, item_id, data_id, variable, value)
</code></pre><p><a href="../../../i.stack.imgur.com/w02VJ.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/w02VJ.png" alt="enter image description here"/></a></p><p>I am not sure if this design will be worth the trouble, because &#8230; I will actually be storing more data &#8211; all the extra <code>data_id</code> or all the extra <code>item_id</code> values for each variable name.  There are 15 to 30 variable names for each product line.  I will be storing 15 to 30 <code>item_id</code> (or <code>data_id</code>) fields in the new design <code>data_variables</code> table, where in the old design there was only one <code>item_id</code> value per table row.</p><p><strong>Question:</strong></p><p>Is there a more efficient design that also does not require changes in schema design for every addition/deletion/modification of variable name in a product line?  Might it be best to stick with existing design despite the trouble of altering schema when needing to add new variables?</p><p><strong>Using JSON for variable &#34;different&#34; fields</strong></p><pre><code>one_data_table(id, item_id, product_line, shared, json_encoded_value_pairs);
</code></pre><p><strong>Decision to not use EAV (Entity–attribute–value) Model</strong></p><p>In my case Entities change very rarely if at all (on the order of years), and attributes change rarely as well, on the order of months or more.  As such, reworking the database design to use EAV is probably not a good fit for my case.</p><p>That aside, I am still debating on my JSON Design.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>So I understand you don&#39;t want to have fields from <code>data_*</code> in <code>item</code> because they&#39;re not really the same thing. So how about something like this schema below? It&#39;s similar to your original design, but it adds a new <code>Common_data</code> table between the <code>item</code> table and the <code>data_*</code> tables.</p><pre>Item
----
 - item_id
 - (other item-focused fields)

Common_Data
-----------
 - common_data_id
 - item_id - FK to item.item_id
 - shared_field_1
 - shared_field_2
 - (many fields that are already shared in data_a, data_b, and data_c)
 - data_type (can be &#34;data a&#34;, &#34;data b&#34;, &#34;data c&#34;)

data_a
------
 - data_a_id
 - common_data_id  - FK to common_data.common_data_id
 - different_a

data_b
------
 - data_b_id
 - common_data_id  - FK to common_data.common_data_id
 - different_b

data_c
------
 - data_c_id
 - common_data_id  - FK to common_data.common_data_id
 - different_c

</pre><p>Pros:</p><ul><li>simplifies your <code>shared</code> data, moving it all up to a common data table.</li><li>similar to existing design - maybe some of your existing code can be salvaged</li><li>new <code>shared</code> data only needs to be added to one place.</li><li>simpler to implement.</li></ul><p>Cons:</p><ul><li>might not be flexible enough if you think you will soon have <code>data_d</code>, <code>data_e</code>, etc... and then remove older ones.</li><li>still requires schema (and possibly code) changes when new data_*-specific fields are added.</li></ul><p>I&#39;d avoid going the EAV route unless you really <em>need</em> the flexibility of it.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-design-for-inventory/'>Database Design for Inventory</a></li><li class="list-group-item"><a href='../using-mysql-5-7-json-columns-for-eav/'>Using MySql 5.7 JSON columns for EAV</a></li><li class="list-group-item"><a href='../how-to-design-er-diagram-to-allow-for-retrieving-of-product-option-pricing-data/'>How to design ER diagram to allow for retrieving of product option pricing data</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>