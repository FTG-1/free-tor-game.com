<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; Enum or reference table when dealing with maps &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078110 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078110" class="post-1078110 software type-software status-publish hentry category-software tag-database tag-database-design tag-enum tag-python"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; Enum or reference table when dealing with maps</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">database</span><span class="mr-2 badge badge-info">database-design</span><span class="mr-2 badge badge-warning">enum</span><span class="mr-2 badge badge-primary">python</span></p><div class="entry-content"><p>I am storing information about Widgets in my database, and each Widget has one (non-unique) transformation function associated with it. My problem is how to associate Widgets with their transformation function.</p><p>My first instinct was to use an enum for the transformation function. I am using sqlalchemy for my database ORM, which includes an <a href="http://docs.sqlalchemy.org/en/latest/core/type_basics.html#sqlalchemy.types.Enum" rel="nofollow noreferrer">enum type</a> that makes it really easy to use an enum column. It takes care of validation, and I can simply have an enum in my code for the possible transformation functions, an enum column on Widgets, and then a map in my code from enum values to the actual functions.</p><p>Then I read <a href="http://komlenic.com/244/8-reasons-why-mysqls-enum-data-type-is-evil/" rel="nofollow noreferrer">why enums are evil</a>. It&#39;s pretty convincing, but if I use a reference table, then I can&#39;t use a python enum object, and my map will have to be from strings to functions &#8211; which means that if I make a typo it might happen that I am mapping from a transformation that doesn&#39;t exist in the database, which is not good, and I have no way of knowing that my map is exhaustive and correct.</p><p>What&#39;s the best way to do this?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>There&#39;s nothing wrong with having an enum column on your database <em>or</em> using enums in your program.  But <em>don&#39;t</em> use both!</p><p>The point of enums is to limit possibilities and therefore simplify handling and/or validation, but if you&#39;re using them in multiple places, you&#39;ll have to keep both the database and the program up-to-date.</p><p>It also means you cannot update a program on a database without first having upgraded the database should you add a new possible value.  And by that logic, you cannot even <em>downgrade</em> a program to a previous version or you risk it will explode when it attempts to load a value from the database that isn&#39;t considered by your program.  There are ways of getting around this (future-proofing), but it is still not ideal.</p><h2>Database approach</h2><p>If you want to use the database for enum values, you should go 100%.  This means any information relative to the enum that would affect behavior in your program should be directly tied to the enum field in your database.  If needbe, create a separate table with only enum values and its properties to be referenced by your other tables.  The program should then never really need to read the enum value to determine behavior.  You may use it for descriptions or for making distinction between other records with differing types, but never for determining behavior.  That information should come directly from the database.</p><h2>Program approach</h2><p>If you abandon a database column in exchange for keeping it in your program, it means your program determines behavior, not the database.  The database can still have a column, but it should be strictly a VARCHAR field.  Your program reads the value and associates it directly with an enum type in your program and your program changes behavior based on that enum value.  This gives you added flexibility in your program and in your database updates.  Even though your program is in theory the only thing writing this table, I would still have a backup plan for when a type value is used which doesn&#39;t exist.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-is-it-a-bad-practice-to-include-all-the-enums-in-one-file-and-use-it-in-multiple-classes/'>C++ &#8211; Is it a bad practice to include all the enums in one file and use it in multiple classes</a></li><li class="list-group-item"><a href='../java-is-it-better-to-use-strings-or-int-to-reference-enums-outside-the-java-part-of-the-system/'>Java &#8211; Is it better to use strings or int to reference enums outside the java part of the system</a></li><li class="list-group-item"><a href='../is-it-wasteful-to-create-a-new-database-table-instead-of-using-enum-data-type/'>Is it wasteful to create a new database table instead of using enum data type</a></li><li class="list-group-item"><a href='../database-why-would-you-store-an-enum-in-db/'>Database &#8211; Why would you store an enum in DB</a></li><li class="list-group-item"><a href='../database-db-enumerations-vs-app-enumerations-vs-lookup-tables/'>Database &#8211; DB Enumerations vs App Enumerations vs Lookup tables</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>