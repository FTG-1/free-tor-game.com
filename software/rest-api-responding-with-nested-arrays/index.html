<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>REST API responding with nested arrays &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084866 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084866" class="post-1084866 software type-software status-publish hentry category-software tag-api tag-json tag-rest"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">REST API responding with nested arrays</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">json</span><span class="mr-2 badge badge-warning">rest</span></p><div class="entry-content"><p>I would like to know the best practice for designing a REST API for a resource that has a <code>has_many</code> relationship with another resource.</p><p>In my app, <code>companies</code> have many <code>technologies</code>, and <code>technologies</code> belong to many <code>companies</code>. In the frontend, I want to render companies and their technologies.</p><p>I want to implement <code>/companies</code> endpoint so that it responds with companies and the technologies that belong to them. Then I can make a single API call to get all data necessary to render the page:</p><pre><code>[
  {
    company_name: &#39;&#39;,
    technologies: [
      {
        tech_name: &#39;&#39;,
        tech_icon_name: &#39;&#39;
      },
      {
        ...
      },
      ...
    ]
  },
  {
    ...
  }
]
</code></pre><p>Is this a good practice, and what are the alternatives?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>There&#39;s absolutely nothing wrong with returning nested arrays in the JSON response from a REST API, however, there&#39;s a question whether you want to do that.</p><p>If you are creating the REST API for one client, there&#39;s a great chance you want to return the technologies along with the companies, because your client has probably asked you to do so. Maybe they require the data and do not want to be querying your REST API multiple times. In that case it&#39;s completely reasonable to return the technologies along with the companies.</p><p>On the other hand, when you are creating a REST API which may be consumed by anyone you usually want to do some statistical analysis on the data you&#39;re going to supply and design your endpoints accordingly.</p><p>After your analysis you could find out the following: Your API is called by your clients 500 000 times a day. <strong>Each request takes</strong> on average <strong>230 ms</strong> to complete, that is <strong>31.94 hours</strong> of server time. You have talked to your clients and out of the half a milion request only 30 000 requests make use of the technologies of companies.</p><p>Because you are returning both (companies and technologies) at the same time, the other 470 000 requests are running slower and putting heavier load on your server than they ideally could. The query returns data which the consumers do not need at all and the data needs to be somehow processed and sent to the consumers anyway.</p><p>After thinking it through, you could make it so the technologies are retrieved on request and not automatically for all companies and the 30 000 consumers actually requiring the technologies would query your API a second time.</p><p>Thanks to the optimization, you can now query companies without the technologies on average in <strong>195 ms</strong> and the average time for requesting technologies for a company separately is <strong>170 ms</strong>. You still have to call the companies endpoint half a milion times, which will now take you <strong>27.083 hours</strong> of server time and then process additional 30 000 requests for the consumers making use of technologies, taking <strong>1.416 hour</strong> of server time, making in total <strong>28,5 hours</strong> of server time.</p><p>By separating the queries, your system can not only better handle the load by reducing the load from <strong>31.94 hours</strong> of server time to <strong>28.5 hours</strong>, but your clients are also happier, because they get their information faster.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-what-are-the-standards-for-having-nested-resources-in-rest-api/'>Rest &#8211; What are the standards for having nested resources in REST API</a></li><li class="list-group-item"><a href='../rest-prevent-abuse-to-rest-api-endpoint/'>Rest &#8211; Prevent abuse to REST API endpoint</a></li><li class="list-group-item"><a href='../rest-api-proper-way-to-handle-non-crud-items-with-rest/'>REST API &#8211; proper way to handle non-CRUD items with REST</a></li><li class="list-group-item"><a href='../rest-api-updating-many-to-many-relationships/'>REST API &#8211; Updating many-to-many relationships</a></li><li class="list-group-item"><a href='../rest-is-it-normal-design-to-completely-decouple-backend-and-frontend-web-applications-and-allow-them-to-communicate-with-json-rest-api/'>Rest &#8211; Is it normal design to completely decouple backend and frontend web applications and allow them to communicate with (JSON) REST API</a></li><li class="list-group-item"><a href='../rest-designing-a-rest-api-with-resource-relationships/'>Rest &#8211; Designing a REST API with resource relationships</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>