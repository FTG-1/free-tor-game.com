<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211;  reason Iterator and Stream do not implement Iterable &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080454 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080454" class="post-1080454 software type-software status-publish hentry category-software tag-iterator tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211;  reason Iterator and Stream do not implement Iterable</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">iterator</span><span class="mr-2 badge badge-info">java</span></p><div class="entry-content"><p>The other day I was playing around with an experiment and I had a for loop something like so:</p><pre><code>for (Node node : children) {
  // do stuff with node ...
}
</code></pre><p>And then I changed it to do this:</p><pre><code>for (Node node : children.stream().filter(n -&gt; n.isCreated())) {
  // do stuff with node ...
}
</code></pre><p>And got this error: <code>Can only iterate over an array or an instance of java.lang.Iterable</code>.  This reopens some old wounds for me.  Here&#39;s what I find silly here.  Stream (the class that doesn&#39;t implement Iterable) has an <code>iterator()</code> method.  Am I alone in thinking this is a major oversight?  Is there any logical reason why it shouldn&#39;t be declared implement Iterable?  I get that functional programming is cool and all but it can&#39;t be that the reason is to try to encourage people switch all their for loops to <code>forEach()</code> calls.</p><p>So the second part of this annoyance is that even if you do this:</p><pre><code>for (Node node : children.stream().filter(n -&gt; n.isCreated()).iterator()) {
  // do stuff with node ...
}
</code></pre><p>You get the exact same error.  This is an old annoyance for me because when they introduced the <code>for(:)</code> syntax, it never made sense that Iterator wasn&#39;t one of the things you could use along with Iterable and arrays.  Now, it seems even more obnoxious given that all that would need to be done to make Iterator implement Iterable is add the following method to Iterator:</p><pre><code>default Iterator&lt;E&gt; iterator() {
  return this;
}
</code></pre><p>It&#39;s easy enough to work around these issues with methods like this:</p><pre><code>static &lt;T&gt; Iterable&lt;T&gt; iterable(final Stream&lt;T&gt; stream)
{
  return new Iterable&lt;T&gt;() {
    @Override
    public Iterator&lt;T&gt; iterator() {
      return stream.iterator();
    }
  };
}

static &lt;T&gt; Iterable&lt;T&gt; iterable(final Iterator&lt;T&gt; iterator)
{
  return new Iterable&lt;T&gt;() {
    @Override
    public Iterator&lt;T&gt; iterator() {
      return iterator;
    }
  };
}
</code></pre><p>Or with lambas:</p><pre><code>Iterable&lt;T&gt; foo = () -&gt; iterator;
</code></pre><p>But why?  It just seems silly to have to do this.  Is anyone aware of why this wasn&#39;t done or come up with any legitimate reasons for not making these two interfaces Iterable?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>They would break the Liskov Substitution Principle implementing <code>Iterable&lt;&gt;</code>.</p><p>An important part of the <code>Iterable&lt;&gt;</code> contract that isn&#39;t describable in Java is that you can iterate <em>multiple times</em>. Neither <code>Iterator&lt;&gt;</code> nor <code>Stream&lt;&gt;</code> have similar restrictions, so perfectly acceptable <code>Iterator&lt;&gt;</code>s or <code>Streams&lt;&gt;</code> that generate values only once, when converted to <code>Iterable&lt;&gt;</code> by your proposed conversion, will break code that expects to be able to independently operate on the values multiple times.</p><p>E.g.</p><pre><code>&lt;T&gt; Iterable&lt;Pair&lt;T, T&gt;&gt; crossProduct(Iterable&lt;T&gt; source)
{
    List&lt;Pair&lt;T, T&gt;&gt; result = new ArrayList&lt;Pair&lt;T, T&gt;&gt;();

    for (outer : source) {
        for (inner : source) {
            result.add(new Pair&lt;T, T&gt;(outer, inner));
        }
    }
}
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-why-do-javas-iterator-and-listiterator-point-between-elements/'>Java &#8211; Why do Java&#8217;s Iterator and ListIterator point between elements</a></li><li class="list-group-item"><a href='../c-iterator-lifetime-and-detecting-invalidation/'>C++ Iterator lifetime and detecting invalidation</a></li><li class="list-group-item"><a href='../java-in-java-why-does-unsorted-set-implement-iterable-but-sortedmap-does-not/'>Java &#8211; In Java, why does (unsorted) Set implement Iterable, but SortedMap does not</a></li><li class="list-group-item"><a href='../iterator-pattern-why-is-it-important-to-not-expose-the-internal-representation/'>Iterator pattern &#8211; why is it important to not expose the internal representation</a></li><li class="list-group-item"><a href='../java-linkedlist-why-no-direct-next-on-elements/'>Java &#8211; LinkedList &#8211; why no direct .next() on elements</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>