<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Git &#8211; Visual Studio, Git, and common code &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083711 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083711" class="post-1083711 software type-software status-publish hentry category-software tag-git tag-github tag-gitlab tag-visual-studio"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Git &#8211; Visual Studio, Git, and common code</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">git</span><span class="mr-2 badge badge-info">github</span><span class="mr-2 badge badge-warning">gitlab</span><span class="mr-2 badge badge-primary">visual studio</span></p><div class="entry-content"><p>I&#39;m looking for some advice on how I should arrange a large new project I&#39;m working on to allow it be more easily managed in Git (using GitLab), and developed in Visual Studio.</p><p>To give an idea of scale, this is an entire server backend which&#39;ll consist of some networking services (sockets), data processing services, and web services. Each of these services will be an individual project, but there is going to be a lot of common code involved which I&#39;ll want to separate and between them (i.e. shared assemblies).</p><p>So let&#39;s say I have the following Visual Studio projects, with the shown dependencies:</p><pre><code>Utility
SharedSocketCode - [ Utility ]
SocketServiceA - [ SharedSocketCode ]
SocketServiceA.WindowsServiceHost - [ SocketServiceA ]
SocketServiceA.ConsoleHost - [ SocketServiceA ]
SocketServiceB - [ SharedSocketCode ]
SocketServiceB.WindowsServiceHost - [ SocketServiceB ]
SocketServiceB.ConsoleHost - [ SocketServiceB ]
DbEntityModel
DataLogServiceA - [ DbEntityModel, Utility ]
DataLogServiceB - [ DbEntityModel ]
SharedWebServiceCode
WebServiceA - [ SharedWebServiceCode, DbEntityModel ]
WebServiceB - [ SharedWebServiceCode, DbEntityModel ]
</code></pre><p>As you can see, there is going to be a lot of shared code, and this is just the tip of the iceberg! I&#39;m torn between storing all of this in the same repository, or trying to split them into individual ones.</p><p>The former sounds like the easier to maintain as I won&#39;t have to wrestle with Visual Studio looking for shared code in what could be different locations on each user&#39;s local version &#8211; the projects will all be predictably stored at solution-level.</p><p>The latter sounds like it&#39;ll give me more control over versioning each component and logically separating out what would otherwise be a single mammoth code base.</p><p>I&#39;m quite new to Git and GitLab, so I&#39;m not sure if there is anything that can help with this kind of scenario. Any advice would be welcome.</p><p>(FYI, I&#39;ve added the GitHub tag as I gather it is reasonably similar to GitLab so there may be some assistance I can get from its users too)</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I think you are doing great by splitting your Visual Studio <code>Solution</code> into several <code>Projects</code> that are creating libraries - as you and @antlersoft said in the comment.</p><p>This way you can have several other <code>Solutions</code> or even projects that create a standalone binary (like command line exe) referencing these library (Solution Explorer: add reference).</p><p>The one thing that git or Visual Studio is not doing for you (as the software architect of one or several solutions) is to untangle the references back and forth between your <code>modules</code> (I use this synonymous to library here).</p><p>It is a good idea to have a layered architecture in every bigger software system. When you go and re-architecture your whole system, you can follow these best practices:</p><ul><li>create a namespace for each library that spreads across all the source files in this library</li><li>check the usage: which .cs file (and therefore it&#39;s namespace and the library that is compiled as a separate project) uses the class(es) in this library</li><li>assign every namespace/library to one layer (you don&#39;t have to give names to the layers); you could do this on paper or use any UML tool that supports component diagrams (including the one in the higher valued Visual Studio Versions; some UML tools call it explicitly layer diagram)</li></ul><p>At the end of the day, a good architecture is achieved if no library of a certain layer is using any library in a layer above (no upwards pointing arrows) or the same layer (sidewards pointing arrows). If you can&#39;t get this done easily you can go for the weaker form of allowing same layer access.</p><p>{ If you download the preview version of Visual Studio &#34;15&#34; (which is a ultimate VS; as long as it is still available) you can open your project and pick <code>New Diagram</code> from the <code>Architecture</code> menu (right next to Tools), chose <code>Layer Diagram</code> and play a little bit around - there is a how-to video linked after you created your first diagram. The following screenshot shows the generated diagram that you get when you drag in some of your libraries from the Solution Explorer, right-click on it and select generate dependencies. }</p><p><a href="../../../i.stack.imgur.com/bIz6I.jpg" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/bIz6I.jpg" alt="LayerDiagram to show as implemented in Visual Studio &#34;15&#34;"/></a></p><p>The following refactorings help you getting there:</p><ul><li>Move a whole class to a different namespace/library</li><li>move a property/field up or down the inheritance hierarchy to move the dependency that originates from accessing this property/field into a different namespace</li><li>move a method up or down the inheritance hierarchy for the same reason</li><li>do some additional classification by a) adding a more general superclass that contains only the a subset of the properties/fields and/or methods or by b) creating more specific subclasses</li></ul><p>The process of <strong>re-architecturing</strong> or <strong>refactoring</strong> your system to resolve inter-library (package/namespace/module) dependencies that prevent you from reusing your existing software in additional projects has produced a very significant amount of publications. I called it <code>untangling</code> above which is not really the scientific term. One outstanding book reference that covers this (and was written way before git times but is still a very good source) is the <a href="http://rads.stackoverflow.com/amzn/click/B000SEIBB8" rel="nofollow noreferrer">Gang-of-Four Book</a> which uses the term <strong>software design</strong> (as in object oriented analysis and design). You can also find some very good books or articles using <strong>re-architecturing</strong> or just <strong>architecture</strong> or <strong>refactoring</strong> in your favorite book store or search engine.</p><p>Just to reconfirm again: once you re-adjusted the project lines this way, each project is a good candidate for also being used as a git repository and you can check it out to any number of additional solutions you want to reuse this library in.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../git-from-tfs-to-git/'>Git &#8211; From TFS to Git</a></li><li class="list-group-item"><a href='../port-numbers-in-visual-studio-projects-and-iis/'>Port numbers in Visual Studio projects and IIS</a></li><li class="list-group-item"><a href='../git-team-switching-from-tfs-source-control-to-tfs-with-git-not-sure-how-to-handle-complex-project-structure/'>Git &#8211; Team switching from TFS Source Control to TFS with Git, not sure how to handle complex project structure</a></li><li class="list-group-item"><a href='../git-is-it-possible-to-tag-only-a-portion-of-a-git-push/'>Git &#8211; Is it possible to tag only a portion of a git push</a></li><li class="list-group-item"><a href='../git-shared-code-across-many-web-projects-using-git/'>Git &#8211; Shared code across many (web) projects using git</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>