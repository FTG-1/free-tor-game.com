<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Registers and Stacks in NASM &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081848 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081848" class="post-1081848 software type-software status-publish hentry category-software tag-assembly tag-register tag-stack tag-x86"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Registers and Stacks in NASM</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">assembly</span><span class="mr-2 badge badge-info">register</span><span class="mr-2 badge badge-warning">stack</span><span class="mr-2 badge badge-primary">x86</span></p><div class="entry-content"><p>So, I am more or less voluntarily learning NASM, and I have problems finding sources that really explain it. Unlike with Java or C# I can&#39;t just use google as well, since Assembly just isn&#39;t used by many anymore. I need to prepare a presentation about an &#34;Introduction to Assembly/NASM&#34; without explaining code but rather how the language works. Including how to roughly access Registers, what they do, how to acces the stack and to store stuff there.</p><p>Now, I got that the Names of the registers are E(A-D)X as well as some others, that each register has their own function or something (which, honestly I haven&#39;t really understood. Would appreciate it if someone could explain further, but that is not that necessary for me (yet)) and that they are what gets &#34;stored&#34;/used by the CPU, but then some sources are talking about RAX and that completly threw me off. Are there more Registers than just E[]X or is that just Syntax of another Assembly language?</p><p>Second of all, my biggest problem so far: The stack. No where it explains properly how the stack works, what it does, how to address it etc. How do I store data into the Stack, what are the Names/Addresses of the certain Stacks? The code also gets stored in the Stack, how do I know how many places of the stack gets occupied by that? If I understood correctly you just save everything on top of the Stack (ESP shows the highest Value saved in the Stack if I am not wrong) And you use that or the base pointer to go where you know you stored the value. eg: I save 7, 8, 9, Apple, Help, [Does each word (or even number) get its own place in the Stack or is it by letters?], and if I want to access 9 it is the 3rd lowest thing in the stack. So if 7 was 011001(25), 9 would be 011011(27)? Would I need to know that Address or would I say EBP + 2?</p><p>Okay, that is all I haven&#39;t gotten so far, only the two probably most important elements of Assembly.</p><p>However, thank all of you who will be able to help me, I will go on now, trying to make sense of the manual and looking for other  information. I will be very happy though if any of you actually know the answer.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>Unlike with Java or C# I can&#39;t just use google as well, since Assembly just isn&#39;t used by many anymore.</p></blockquote><p>I don&#39;t think this is accurate: I found dozens of helpful articles and presentations by searching &#34;understanding assembly language&#34;.</p><p>Further, you will find the search terms <a href="https://en.wikipedia.org/wiki/X86-64" rel="nofollow noreferrer">x64</a> and &#34;instruction set&#34; helpful.  The following describes additional search terms you might use to dig deeper.</p><p>There are many different kinds of CPUs.  Each uses an <a href="https://en.wikipedia.org/wiki/Instruction_set_architecture" rel="nofollow noreferrer">instruction set architecture</a>.</p><p>The instruction set architecture describes the various instructions that the CPU can execute.  These instructions have encodings and so are stored as bit patterns.  A program consists of sequences of instructions that a given CPU can execute.  The language of a program using these bit patterns is called <a href="https://en.wikipedia.org/wiki/Machine_code" rel="nofollow noreferrer">machine code</a>.</p><p><a href="https://en.wikipedia.org/wiki/Assembly_language" rel="nofollow noreferrer">Assembly language</a> refers to a human readable version of machine code.  Instructions are specified using mnemonic instruction names and operands that can be read and edited as text.  Assembly language is compiled (assembled) into machine code by program called an assembler.  Assembly language has many features to make the source code readable and more maintainable than machine code.  For example, assembly language uses labels — whereas machine code uses offsets.  Inserting a new instruction into a program in assembly language is easy, but doing so in machine code is hard as it will throw off other offsets being used nearby.  So, assembly language is much preferred.</p><p>The <a href="https://en.wikipedia.org/wiki/Application_binary_interface" rel="nofollow noreferrer">Application Binary Interface</a> for a given ISA, determines conventions of register and stack usage, such that one function written by one author can &#34;call&#34; another function written by another author (provided they both adhere to the convention).  Another useful term here is <a href="https://en.wikipedia.org/wiki/Calling_convention" rel="nofollow noreferrer">&#34;calling convention&#34;</a>, which is part of an ABI that specfically describes how parameters are passed from one function to another.  Also relevant is the term <a href="https://en.wikipedia.org/wiki/Call_stack#Structure" rel="nofollow noreferrer">stack frame</a>.</p><p>It is useful to understand that the difference between what is allowed/supported by the hardware ISA and what is allowed/supported by software convention of the ABI.</p><p>This Wikipedia article lists the registers on x64 (<a href="https://en.wikipedia.org/wiki/X86-64#Architectural_features" rel="nofollow noreferrer">https://en.wikipedia.org/wiki/X86-64#Architectural_features</a>), and this article illustrates the x86&#39;s overlapping register names (<a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/x64-architecture" rel="nofollow noreferrer">https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/x64-architecture</a>).</p><p>If you don&#39;t want to adhere to the standard conventions (ABI), you can create your own, which is often done in simple programs by students learning to write assembly language.</p><p>Beyond these search terms, you should consider writing some simple C programs that illustrate your questions, compile them (with and/or without optimization) and look at the compiler output as disassembly or in a debugger to see how the instruction set is used to manipulate data.</p><p>NASM is a specific assembler for x86/x64 architecture, but certainly not the only one.  Questions specifically about NASM would go to the different syntaxes and expressions you can write in that assembler.</p><p>Your question about registers and stack should be directed more to the instruction set architecture and the calling convention than toward any specific assembler.  While the instruction set allows certain operations regardless of the operating system, the ABI differs somewhat between linux and windows, so that there are some differences in register usage and stack usage.</p><p>A stack frame can use a single stack pointer or both a stack pointer and a frame pointer.  The stack pointer can move during the execution of a function, so the offset of stack allocated variables relative to the stack pointer can change.  A frame pointer remains fixed during the execution of a function, and thus variables located in the stack can be referred to by a fixed offset from the frame pointer even as the stack pointer moves from pushing and popping.</p><p>The frame pointer approach is easier to use and also supports easier debugging, and may also support stack unwinding and exception handling.  However, it somewhat less efficient (as it involves a second register, and a few extra instructions to save, establish, and restore the frame pointer).</p><p>The x86 architecture has a long linage.  If you see RAX, RBX, RSP, RBP, these are names of registers in the 64-bit extension of this architecture.  EAX, EBX are names of the 32-bit registers, and you may see these in 32-bit code or 64-bit code.  Any given program should be either intended for the 64-bit architecture (x64) or the 32-bit (x86) architecture but not both mixed together.  Therefore we can look to how registers like SP and BP are used to see which (RSP/RBP for 64 and ESP/EBP for 32).</p><p>In the original 16-bit 8086, AX was a favored register since encodings that target that register are shorter than other instructions.  Further, multiplies and divides target AX/DX register pair.  Many of these special register uses have been removed in favor of the registers being more general purpose as the architecture has evolved to 32-bits and 64-bits.  This evolution is friendlier toward compilers and hence high-level language.  These architectures still have dedicated stack pointers and instructions that implicitly target this register.  However, the other registers today are general purpose registers.  Once again I bring up the calling convention, which will tell you which register is used, for example, to pass the first argument, or to return a return value.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-understanding-stack-frame-of-function-call-in-c-c/'>C++ &#8211; Understanding stack frame of function call in C/C++</a></li><li class="list-group-item"><a href='../implementing-non-fixed-length-array-support-in-a-compiler/'>Implementing non-fixed length array support in a compiler</a></li><li class="list-group-item"><a href='../how-are-i-o-port-addresses-and-data-sent/'>How are I/O port addresses and data sent</a></li><li class="list-group-item"><a href='../c-how-does-assembly-relate-to-machine-binary-code/'>C++ &#8211; How does assembly relate to machine/binary code</a></li><li class="list-group-item"><a href='../object-oriented-how-are-oop-objects-and-classes-organized-in-memory-in-terms-of-assembly-language/'>Object-oriented &#8211; How are OOP &#8220;objects&#8221; and &#8220;classes&#8221; organized in memory in terms of assembly language</a></li><li class="list-group-item"><a href='../whats-the-real-benefit-of-using-cdecl-more-specifically-pushing-instead-of-reg-ing/'>What&#8217;s the REAL benefit of using CDECL? (more specifically pushing instead of reg-ing)</a></li><li class="list-group-item"><a href='../how-is-stack-and-heap-are-assigned-to-each-processes/'>How is stack and heap are assigned to each processes</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>