<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>HTTPS site perform ajax calls to native http desktop aplication &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072428 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072428" class="post-1072428 software type-software status-publish hentry category-software tag-ajax tag-desktop-application tag-https tag-web-applications"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">HTTPS site perform ajax calls to native http desktop aplication</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">ajax</span><span class="mr-2 badge badge-info">desktop application</span><span class="mr-2 badge badge-warning">https</span><span class="mr-2 badge badge-primary">web-applications</span></p><div class="entry-content"><p>I&#39;m working on web app that communicates with a locally installed desktop application to get certificate information from the user machine and perform digital signatures.</p><p>Currently it&#39;s possible to auto generate keys and perform digital signatures with these auto generated keys in javascript using <a href="https://developer.mozilla.org/es/docs/Web/API/Window/crypto" rel="nofollow noreferrer"><code>window.crypto</code></a>. However there is no way to through javascript or html to access the user keys issued by a vendor CA installed on OS or Firefox keystore to perform digital signatures, this is why we relay on installed native application.</p><p>This native application is a porting of an old java applet because &#8211; hopefully &#8211; soon this technology will be not supported for all major browsers (currently it&#39;s <a href="https://support.google.com/chrome/answer/6213033" rel="nofollow noreferrer">not already supported in Chrome since September 2015</a>, and also is not supported in Edge), besides the java plugin itself it&#39;ll be <a href="https://blogs.oracle.com/java-platform-group/entry/moving_to_a_plugin_free" rel="nofollow noreferrer">deprecated in Java 9</a>. Currently we&#39;ve a Java Web Start working but it&#39;s a requeriment to have an alternative way to perform the signatures, since JNLP is not very user frendly way to do so: it requires to download each time a JNLP on a user machine with the signature configuration, there is no communication from browser to JNLP and it&#39;s necessary to perform AJAX polling to the backend to check if the signature is finished&#8230;</p><p>The native application is basically a local http server which exposes the business methods through a REST API, this way it&#39;s easy to use from our web app with simply making some AJAX calls an dealing with the result.</p><p>It works flawlessly when the web app is deployed in HTTP, the problem is that our web app is secured under HTTPS, but our native application is an HTTP server, so evidently for security reasons by default the major browsers block our AJAX calls from the web app to our native application due to mixed content.</p><p>Any CA vendors will issue a server certificate for a localhost domain, and furthermore since the native application is installed on client, the private key will be available on every client machine, so for sure a certificate issued by a official CA it&#39;s not a possibility. Also note that our native application must work on a heterogeneous environments: different OS, different browser, different networks so a proxy solution for the SSL is also not an option.</p><p>A possible solution which come to my mind is to generate a self-signing certificate and configure our native application to work as an HTTPS server. However I see a flaw in this solution: the native application automatically or the client manually must install this certificate in the client SO trust store or in the firefox trust store, this is a security concern because you&#39;re adding a self-signed certificate in a trust store.</p><p>My question are:</p><ul><li><p>Installing a self-signed server certificate for localhost directly in the trust store it&#39;s a security concern, but how is it really dangerous/exploitable? If you issue the cert for <code>CN=127.0.0.1</code> if there is no proxy on the network or hosts edited it&#39;s not possible to a third party server serves content for you there, isn&#39;t? Is this solution as bad as it sounds?</p></li><li><p>There is an alternative way to communicate between web app in HTTPS with a native application in a easy manner, user-friendly way and supported for all major browsers?</p></li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>THE ORIGINAL SOLUTION IS NOT VALID ANYMORE!</strong></p><h2>Updated Solution</h2><p>Everyone doing this (github, spotify, blizzard, dropbox, etc) have all seen their certificate revoked last year because the private key was stored locally and considered compromised.</p><p>There are 2 workarounds:</p><ol><li>create, locally, an ssl certificate binded to localhost/127.0.0.1 and install it in the OS trusted keystore.</li><li><a href="https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy" rel="nofollow noreferrer">In the Secure Contexts Spec</a>, localhost/127.0.0.1 is now considered a potentially trustworthy origin. This means that an HTTPS page calling 127.0.0.1 over http is NOT blocked by Mixed Content. Tested in Edge, Chrome and Firefox. Unfortunatly, Microsoft team has not backported this fix to IE.</li></ol><blockquote><p>If origin’s host component matches one of the CIDR notations 127.0.0.0/8 or ::1/128 [RFC4632], return &#34;Potentially Trustworthy&#34;.</p></blockquote><h2>Original Solution</h2><p>You get a standard certificate from a CA for a domain like local.myapp.com and you associate this host with 127.0.0.1 in your dns.</p><p>This will enable https calls from your web page to your installed app.</p><p>Please note that there may be security issues with this. In fact Chromium intend to block these calls to localhost (or add an option to opt-in --&gt; <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=378566" rel="nofollow noreferrer">https://bugs.chromium.org/p/chromium/issues/detail?id=378566</a>). But multiple sites are doing this:</p><ul><li>Spotify (web player - desktop app) : *.spotilocal.com</li><li>Github (open file in Github for Mac) : ghconduit.com</li><li>Dropbox : www.dropboxlocalhost.com</li></ul><p>Explanation of how Spotify does it: <a href="http://cgbystrom.com/articles/deconstructing-spotifys-builtin-http-server/" rel="nofollow noreferrer">http://cgbystrom.com/articles/deconstructing-spotifys-builtin-http-server/</a></p><blockquote><p>With the requirement to use HTTPS, a valid SSL certificate is needed
 to avoid browsers complaining. Spotify has worked around this problem
 by registering a domain (*.spotilocal.com) that merely points to
 127.0.0.1. But rather than connecting to the top domain, they use a wildcard domain and connect to a random subdomain each time (for
 example abcrjdknsa.spotilocal.com). The reason for this is to avoid
 the browser’s max connection limit per domain, enabling more tabs in
 the browser to concurrently use their API at the cost of an extra DNS
 lookup.</p></blockquote></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../mvc-model-view-controller-and-client-side-concurrency-responsibility/'>Mvc &#8211; Model-View-Controller and client-side concurrency responsibility</a></li><li class="list-group-item"><a href='../implementing-digitally-signed-data-in-a-web-application/'>Implementing Digitally signed data in a Web Application</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>