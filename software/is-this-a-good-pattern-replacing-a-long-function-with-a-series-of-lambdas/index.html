<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Is this a good pattern: replacing a long function with a series of lambdas &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1074465 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1074465" class="post-1074465 software type-software status-publish hentry category-software tag-c11 tag-lambda"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Is this a good pattern: replacing a long function with a series of lambdas</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c++11</span><span class="mr-2 badge badge-info">lambda</span></p><div class="entry-content"><p>I recently run into the following situation.</p><pre><code>class A{
public:
    void calculate(T inputs);
}
</code></pre><p>Firstly, <code>A</code> represents an object in the physical world, which is a strong argument for not splitting the class up. Now, <code>calculate()</code> turns out to be quite a long and complicated function. I perceive three possible structures for it:</p><ul><li>write it as a wall of text &#8211; advantages &#8211; all the information is in one place</li><li>write <code>private</code> utility functions in the class and use them in <code>calculate</code>&#39;s body &#8211; disadvantages &#8211; the rest of the class doesn&#39;t know/care/understand about those methods</li><li><p>write <code>calculate</code> the following way:</p><pre><code>void A::calculate(T inputs){    
    auto lambda1 = () [] {};    
    auto lambda2 = () [] {};    
    auto lambda3 = () [] {};

    lambda1(inputs.first_logical_chunk);
    lambda2(inputs.second_logical_chunk);
    lambda3(inputs.third_logical_chunk);
}
</code></pre></li></ul><p>Can this be considered a good or bad practice? Does this approach reveal any problems? All in all, should I consider this as a good approach when I am again faced with the same situation?</p><hr/><p>EDIT:</p><pre><code>class A{
    ...
public:
    // Reconfiguration of the algorithm.
    void set_colour(double colour);
    void set_density(double density);
    void set_predelay(unsigned long microseconds);
    void set_reverb_time(double reverb_time, double room_size);
    void set_drywet(double left, double right);
    void set_room_size(double value);;

private:
    // Sub-model objects.
    ...
}
</code></pre><p>All those methods:</p><ul><li>get a value</li><li>compute some other values, without using state</li><li>call some of the &#34;sub-model objects&#34; to change their state.</li></ul><p>It turns out that, excepting <code>set_room_size()</code>, those methods simply pass the requested value to sub-objects. <code>set_room_size()</code>, on the other hand, does a couple of screens of obscure formulas and then (2)does half a screen of calling sub-objects setters to apply the various obtained results. Therefore, I have separated the function into two lambdas and call them at the end of the function. Had I been able to split it into more logical chunks, I would have isolated more lambdas.</p><p>Regardless, the goal of the current question is to determine if that way of thinking should persist, or is it at best not adding value (readability, maintainability, debug-ability etc.).</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>No, this is not generally a good pattern</strong></p><p>What you&#39;re doing is breaking up a function into smaller functions using lambda.  However, there is a <em>much</em> better tool for breaking up functions: functions.</p><p>Lambdas work, as you have seen, but they mean <em>much much much much much</em> more than simply breaking up a function into local bits.  Lambdas do:</p><ul><li>Closures.  You can use variables in the outer scope inside the lambda.  This is very powerful and very complicated.</li><li>Reassignment.  While your example make it hard to do assignment, one always has to pay attention to the idea that code may swap functions at any time.</li><li>First-class functions.  You can pass a lambda function to another function, doing something known as &#34;functional programming.&#34;</li></ul><p>The instant you bring lambdas into the mix, the next developer to look at the code must immediately mentally load all of those rules in preparation for seeing how your code works.  They don&#39;t know that you&#39;re not going to use all that functionality.  This is very expensive, compared to the alternatives.</p><p><em>It&#39;s like using a back-hoe to do your gardening.  You know that you&#39;re only using it for digging little holes for this year&#39;s flowers, but the neighbors will get nervous.</em></p><p>Consider that all you are doing is grouping your source code visually.  The compiler doesn&#39;t actually care that you curried things with lambdas.  In fact, I&#39;d expect the optimizer to immediately undo everything you just did when it compiles.  You are purely catering to the next reader (Thanks for doing that, even if we disagree on methodology!  Code is read far more often than it is written!).  All you are doing is grouping functionality.</p><ul><li>Functions placed locally within the stream of source code would do just as well, without invoking lambda.  Again, all that matters is that the reader can read it.</li><li>Comments at the top of the function saying &#34;we&#39;re dividing this function into three parts,&#34; followed by big long lines of <code>// ------------------</code> between each part.</li><li>You can also put each part of the calculation into its own scope.  This has the bonus of immediately proving beyond all doubt that there is no variable sharing between parts.</li></ul><p>EDIT: From seeing your edit with example code, I&#39;m leaning towards the comment notation being the cleanest, with brackets to enforce the boundaries that the comments suggest.  However, if any of the functionality was reusable in other functions, I&#39;d recommend using functions instead</p><pre><code>void A::set_room_size(double value)
{
    {
        // Part 1: {description of part 1}
        ...
    }
    // ------------------------
    {
        // Part 2: {description of part 2}
        ...
    }
    // ------------------------
    {
        // Part 3: {description of part 3}
        ...
    }
}
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-what-are-the-benefits-and-disadvantages-in-the-approaches-of-c-java-and-scala-to-closures-lambdas/'>Java &#8211; What are the benefits and disadvantages in the approaches of C#, Java and Scala to Closures/Lambdas/&#8230;</a></li><li class="list-group-item"><a href='../c-how-to-maintain-encapsulation-with-composition-in-c/'>C++ &#8211; How to maintain encapsulation with composition in C++</a></li><li class="list-group-item"><a href='../public-versus-private-inheritance-when-some-of-the-parents-methods-need-to-be-exposed/'>Public versus private inheritance when some of the parent&#8217;s methods need to be exposed</a></li><li class="list-group-item"><a href='../java-performance-benefit-to-using-the-method-reference-syntax-instead-of-lambda-syntax-in-java-8/'>Java &#8211;  performance benefit to using the method reference syntax instead of lambda syntax in Java 8</a></li><li class="list-group-item"><a href='../can-a-pimpl-variation-be-implemented-without-any-performance-penalty/'>Can a pimpl variation be implemented without any performance penalty</a></li><li class="list-group-item"><a href='../c-returning-persistent-objects/'>C++ returning persistent objects</a></li><li class="list-group-item"><a href='../c-using-lambdas-to-improve-readability-of-a-c-function/'>C++ &#8211; Using lambdas to improve readability of a C++ function</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>