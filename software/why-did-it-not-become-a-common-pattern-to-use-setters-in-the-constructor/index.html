<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Why did it not become a common pattern to use setters in the constructor &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065511 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065511" class="post-1065511 software type-software status-publish hentry category-software tag-access-modifiers tag-constructors tag-design-patterns"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Why did it not become a common pattern to use setters in the constructor</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">access-modifiers</span><span class="mr-2 badge badge-info">constructors</span><span class="mr-2 badge badge-warning">design-patterns</span></p><div class="entry-content"><p>Accessors and modifiers (aka setters and getters) are useful for three main reasons:</p><ol><li>They restrict access to the variables.<ul><li>For example, a variable could be accessed, but not modified.</li></ul></li><li>They validate the parameters.</li><li>They may cause some side effects.</li></ol><p>Universities, online courses, tutorials, blog articles, and code examples on the web are all stressing about the importance of the accessors and modifiers, they almost feel like a &#34;must have&#34; for the code nowadays. So one can find them even when they don&#39;t provide any additional value, like the code below.</p><pre class="lang-java prettyprint-override"><code>public class Cat {
    private int age;

    public int getAge() {
        return this.age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
</code></pre><p>That been said, it is very common to find more useful modifiers, those which actually validate the parameters and throw an exception or return a boolean if invalid input has been supplied, something like this:</p><pre class="lang-java prettyprint-override"><code>/**
 * Sets the age for the current cat
 * @param age an integer with the valid values between 0 and 25
 * @return true if value has been assigned and false if the parameter is invalid
 */
public boolean setAge(int age) {
    //Validate your parameters, valid age for a cat is between 0 and 25 years
    if(age &gt; 0 &amp;&amp; age &lt; 25) {
        this.age = age;
        return true;
    }
    return false;
}
</code></pre><p>But even then, I almost never see the modifiers been called from a constructor, so the most common example of a simple class I face with is this:</p><pre class="lang-java prettyprint-override"><code>public class Cat {
    private int age;

    public Cat(int age) {
        this.age = age;
    }

    public int getAge() {
        return this.age;
    }

    /**
     * Sets the age for the current cat
     * @param age an integer with the valid values between 0 and 25
     * @return true if value has been assigned and false if the parameter is invalid
     */
    public boolean setAge(int age) {
        //Validate your parameters, valid age for a cat is between 0 and 25 years
        if(age &gt; 0 &amp;&amp; age &lt; 25) {
            this.age = age;
            return true;
        }
        return false;
    }

}
</code></pre><p>But one would think that this second approach is a lot safer:</p><pre class="lang-java prettyprint-override"><code>public class Cat {
    private int age;

    public Cat(int age) {
        //Use the modifier instead of assigning the value directly.
        setAge(age);
    }

    public int getAge() {
        return this.age;
    }

    /**
     * Sets the age for the current cat
     * @param age an integer with the valid values between 0 and 25
     * @return true if value has been assigned and false if the parameter is invalid
     */
    public boolean setAge(int age) {
        //Validate your parameters, valid age for a cat is between 0 and 25 years
        if(age &gt; 0 &amp;&amp; age &lt; 25) {
            this.age = age;
            return true;
        }
        return false;
    }

}
</code></pre><p>Do you see a similar pattern in your experience or is it just me being unlucky? And if you do, then what do you think is causing that? Is there an obvious disadvantage for using modifiers from the constructors or are they just considered to be safer? Is it something else?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Very general philosophical reasoning</h2><p>Typically, we ask that a constructor provide (as post-conditions) some guarantees about the state of the constructed object.</p><p>Typically, we also expect that instance methods can assume (as pre-conditions) that these guarantees already hold when they&#39;re called, and they only have to make sure not to break them.</p><p>Calling an instance method from inside the constructor means some or all of those guarantees may not yet have been established, which makes it hard to reason about whether the instance method&#39;s pre-conditions are satisfied. Even if you get it right, it can be very fragile in the face of, eg. re-ordering instance method calls or other operations.</p><p>Languages also vary in how they resolve calls to instance methods which are inherited from base classes/overridden by sub-classes, while the constructor is still running. This adds another layer of complexity.</p><h2>Specific examples</h2><ol><li><p>Your own example of how you think this should look is itself wrong:</p><pre class="lang-java prettyprint-override"><code>public Cat(int age) {
    //Use the modifier instead of assigning the value directly.
    setAge(age);
}
</code></pre><p>this doesn&#39;t check the return value from <code>setAge</code>. Apparently calling the setter is no guarantee of correctness after all.</p></li><li><p>Very easy mistakes like depending on initialization order, such as:</p><pre class="lang-java prettyprint-override"><code>class Cat {
  private Logger m_log;
  private int m_age;

  public void setAge(int age) {
    // FIXME temporary debug logging
    m_log.write(&#34;=== DEBUG: setting age ===&#34;);
    m_age = age;
  }

  public Cat(int age, Logger log) {
    setAge(age);
    m_log = log;
  }
};
</code></pre><p>where my temporary logging broke everything. Whoops!</p></li></ol><p>There are also languages like C++ where calling a setter from the constructor means a wasted default initialization (which for some member variables at least is worth avoiding)</p><h2>A simple proposal</h2><p>It&#39;s true that most code <em>isn&#39;t</em> written like this, but if you want to keep your constructor clean and predictable, and still reuse your pre- and post-condition logic, the better solution is:</p><pre class="lang-java prettyprint-override"><code>class Cat {
  private int m_age;
  private static void checkAge(int age) {
    if (age &gt; 25) throw CatTooOldError(age);
  }

  public void setAge(int age) {
    checkAge(age);
    m_age = age;
  }

  public Cat(int age) {
    checkAge(age);
    m_age = age;
  }
};
</code></pre><p>or even better, if possible: encode the constraint in the property type, and have it validate its own value on assignment:</p><pre class="lang-java prettyprint-override"><code>class Cat {
  private Constrained&lt;int, 25&gt; m_age;

  public void setAge(int age) {
    m_age = age;
  }

  public Cat(int age) {
    m_age = age;
  }
};
</code></pre><p>And finally, for complete completeness, a self-validating  wrapper in C++. Note that although it&#39;s still doing the tedious validation, because this class does <em>nothing else</em>, it&#39;s relatively easy to check</p><pre class="lang-cpp prettyprint-override"><code>template &lt;typename T, T MAX, T MIN=T{}&gt;
class Constrained {
    T val_;
    static T validate(T v) {
        if (MIN &lt;= v &amp;&amp; v &lt;= MAX) return v;
        throw std::runtime_error(&#34;oops&#34;);
    }
public:
    Constrained() : val_(MIN) {}
    explicit Constrained(T v) : val_(validate(v)) {}

    Constrained&amp; operator= (T v) { val_ = validate(v); return *this; }
    operator T() { return val_; }
};
</code></pre><p>OK, it isn&#39;t really complete, I&#39;ve left out various copy and move constructors and assignments.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-best-method-of-function-parameter-validation/'>Php &#8211; Best Method of function parameter validation</a></li><li class="list-group-item"><a href='../java-the-preferred-access-modifier-for-instance-variables-of-a-data-transfer-object/'>Java &#8211;  the preferred access modifier for instance variables of a data transfer object</a></li><li class="list-group-item"><a href='../architecture-where-to-validate-domain-model-rules-that-depend-on-database-content/'>Architecture &#8211; Where to validate domain model rules that depend on database content</a></li><li class="list-group-item"><a href='../javascript-why-does-javascript-console-log-of-objects-sometimes-show-prototype-constructor-pattern-forever/'>Javascript &#8211; Why does JavaScript console.log of objects sometimes show prototype/constructor pattern forever</a></li><li class="list-group-item"><a href='../unit-testing-in-viper-architecture-possible/'>Unit Testing in VIPER Architecture: Possible</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>