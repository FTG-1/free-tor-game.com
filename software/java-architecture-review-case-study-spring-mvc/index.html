<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Architecture review &#8211; case study (Spring MVC) &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079705 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079705" class="post-1079705 software type-software status-publish hentry category-software tag-architecture tag-design tag-java tag-spring tag-web-development"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Architecture review &#8211; case study (Spring MVC)</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">spring</span><span class="mr-2 badge badge-danger">web-development</span></p><div class="entry-content"><p>I&#39;m developing an Java Web Application with Spring, and I have some questions about my architecture. Before showing it, here is the <strong>context</strong>:</p><ul><li>I am developing a web application with more than 80 existing tables<br /> in the database.</li><li>Both the application and the database are on the same server machine.</li><li>My application will grow in the future so that, if necessary, the<br /> database will be inside a machine alone, and the web application will<br /> access it from another.</li><li>Now I do everything, but in the future I will have specific<br /> professionals in their respective areas and / or layers working side by side with me.</li><li><strong>(EDIT)</strong> I am developing the system from scratch, and therefore, I am<br /> responsible for modeling and preparation of the database. In short: I&#39;m doing everything alone.</li></ul><p>Here is a general model of my architecture:</p><p><a href="../../../i.stack.imgur.com/0Ui6s.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/0Ui6s.png" alt="enter image description here"/></a></p><p>There are certain points that I would like to comment (for <strong>clarification</strong>):</p><ul><li>The main components were highlighted in white, as SERVICE, DAO, etc. These components communicate by exchanging data with each other, and perform actions.</li><li>The components in green and gray represent types of data exchanged<br /> among the main components.</li><li>The architecture shows a separation into layers.</li></ul><p>In relation to this presented model, I have some <strong>questions</strong>:</p><ul><li>The green components represent doubts / confusion. Those with &#34;???&#34;, are data types that I do not know. What types of data should I put here? Do I<br /> need a translator for this (to exchange the correct type)?</li><li>Is the other type of written data (&#34;DOMAIN MODEL ENTITY&#34; &#8211; this is a JPA entity, @Entity) correct? I<br /> believe a DAO layer should only be concerned with these types of<br /> objects, making it completely independent to care.</li><li>I know a DAO type should only be concerned with a single entity, so<br /> the query parameters are always their fields / attributes /<br /> properties. However, what happens when I have to search for an entity<br /> that I need a parameter present in one of it&#39;s relationships? For<br /> example, search for all users with purchases made last month that had<br /> a value greater than X? In this case, I need the details found in the<br /> Purchase entity. Do I put this in DAO? And if I have to put it in a<br /> service class, I have to set EntityManager inside service also,<br /> giving it one more responsibility, which may leave without purpose<br /> the DAO persistence layer?</li><li>Finally, is this architectural model wrong for what I want to do? Is<br /> there something that needs to be fixed?</li></ul><p>Just to be clear, with this organization, I could effect the following situation:</p><p><a href="../../../i.stack.imgur.com/SuJNQ.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/SuJNQ.png" alt="enter image description here"/></a></p><p>This scheme / diagram shows how a call would be from a control to a DAO (in case, a user control to a UserDAO).</p><p>It is seen that I can choose, for example, with Inversion of Control which persistence implementation I wish to use. I like to know if there is also something wrong here</p><p>Thank you.</p><p><strong>Note:</strong> I&#39;m not looking for a <em>correct</em> way. I know how things are. I am looking to complete this model, and whether it is applicable to what I want to do, taking into account the system maintenance, and the capacity of uncoupling of its components. Just it.</p><h2>EDIT 2</h2><p>So&#8230; After much thought, research, and break my head with it, I think I could finally come to a conclusion:</p><ul><li>I&#39;ll just kill myself&#8230;</li></ul><p>&#8230; Nah, just kidding! Here&#39;s the conclusion:</p><p><a href="../../../i.stack.imgur.com/Cuh2M.jpg" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/Cuh2M.jpg" alt="enter image description here"/></a></p><p>Each balloon in each component is a introduction of the component itself, revealing their responsibilities. This may seem silly, but it nicely expresses the differences in responsibilities between each one.</p><p>In some situations it is not possible to generalize. Not always a service returns a DTO. Similarly, it is not always a service needs simple parameters to carry out an action. Therefore the exchange of data between control and service may vary.</p><p>The Application Layer and Business Layer can be the same thing, the same system running on the same server machine. One day you may want to separate things. You may want to turn the Business Layer on a Web Server, useful when you might want to use more than one type of client application to use the services of that particular business.</p><p>With code generation tools, you can generate in a matter of minutes things like:</p><ul><li>Domain Model Entities.</li><li>DTO.</li><li>Form Objects (classes).</li></ul><p>You can also generate DAO classes with the same tools, but from what I saw, they will not be complete, and will need revision. Service classes are incredibly particular to each case. I believe there is no tool for generating this type of code, and therefore, they need to be written from scratch.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>The green components represent doubts / confusion. Those with &#34;???&#34;, are data types that I do not know. What types of data should I put here? Do I need a translator for this (to exchange the correct type)?</p></blockquote><p>This is a quite a matter of taste, personaly i don&#39;t like using DTO, because they mainly duplicate business classes make writing adapter, and mess a lot with features like lazy-loading. Furthermore, every time i need to add a field, i need to add it everywhere and retest the whole thing.</p><p>So what i did is having only Business Model and i put every annotation i needed (jpa/jackson) on it.</p><p>YES this bind my business model to jpa/jackson, as my application rely heavily on Spring, but well decoupling all of that will add quite a lot of work for something that just won&#39;t change. I may add later if i need something else (XML serialization) either others annotation or finaly a DTO layer just for this. This will depends of the complexity of the thing.</p><blockquote><p>Is the other type of written data (&#34;DOMAIN MODEL ENTITY&#34; - this is a JPA entity, @Entity) correct? I believe a DAO layer should only be concerned with these types of objects, making it completely independent to care.</p></blockquote><p>As said before, if you want to use the full power of JPA, don&#39;t. Here is question of mine on stackoverflow which i was told the same thing, because abstracting JPA leads to unnecessary complex and inefficient code : <a href="https://stackoverflow.com/questions/37811139/good-usage-of-managed-entities-proxies-with-orm">https://stackoverflow.com/questions/37811139/good-usage-of-managed-entities-proxies-with-orm</a></p><blockquote><p>I know a DAO type should only be concerned with a single entity, so the query parameters are always their fields / attributes / properties. However, what happens when I have to search for an entity that I need a parameter present in one of it&#39;s relationships? For example, search for all users with purchases made last month that had a value greater than X? In this case, I need the details found in the Purchase entity. Do I put this in DAO? And if I have to put it in a service class, I have to set EntityManager inside service also, giving it one more responsibility, which may leave without purpose the DAO persistence layer?</p></blockquote><p>Your DAO layer is by definition aware of the relationships of your model. So of course he can query on subfields and so on. Following what i&#39;ve been told i considered my DAO layer to be the Entity Manager, so i only have a service layer this fit as long there is nothing too much specific about your DAO/Service.</p><blockquote><p>Finally, is this architectural model wrong for what I want to do? Is there something that needs to be fixed?</p></blockquote><p>As i said, i did some things differently however your model is good because :</p><ul><li>DAO only handle persistency and no business logic/transaction.</li><li>Service handle business logic and transaction.</li><li>Controller do not handle business logic and transaction.</li></ul><p>You have the right bases.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-need-advice-on-framework-design-how-to-make-extending-easy/'>Java &#8211; Need advice on framework design: how to make extending easy</a></li><li class="list-group-item"><a href='../java-entity-to-dto-usage/'>Java &#8211; Entity to DTO Usage</a></li><li class="list-group-item"><a href='../java-spring-consuming-internal-rest-ws-for-mvc/'>Java &#8211; Spring Consuming Internal REST WS for MVC</a></li><li class="list-group-item"><a href='../mvc-in-mvc-soa-architecture-what-is-the-rationale-for-placing-business-logic-in-models/'>Mvc &#8211; In MVC + SOA Architecture, What is the Rationale for Placing Business Logic in Models</a></li><li class="list-group-item"><a href='../best-practice-for-references-in-dtos-and-entities-in-spring/'>Best practice for references in DTOs and entities in Spring</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>