<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; How would you go about making a search algorithm for a CRM &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087958 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087958" class="post-1087958 software type-software status-publish hentry category-software tag-algorithms tag-mysql tag-php tag-search"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; How would you go about making a search algorithm for a CRM</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">algorithms</span><span class="mr-2 badge badge-info">MySQL</span><span class="mr-2 badge badge-warning">PHP</span><span class="mr-2 badge badge-primary">search</span></p><div class="entry-content"><p>I know this question is kind of broad, but all I really need is some best-practice code structure or a link to a good tutorial.</p><p>I am working on a CRM that runs on php and mysql. Currently, our search query looks something like this:</p><p>SELECT * FROM contacts WHERE name LIKE &#39;%ric flair%&#39;</p><p>Now, that&#39;s really dumbed down, but that&#39;s what it amounts to. In fact, we are using prepared statements, firing off several 30+ line queries, and joining lots of tables to verify ownership and all the rest.</p><p>But if the user types <code>rick flair</code> or <code>ric m flair</code>, the search query will not find him. Now, I could split the string into three search terms, <code>%ric%</code>, <code>%m%</code>, <code>%flair%</code>, and work from there, but then I&#39;m going to get every guy named Ric (and Rick for that matter), and then Ric Flair could be anywhere among the search results.</p><p>I feel like I&#39;m doing this like an amateur, and when I look up info about search algorithms, all I can find is people wanting to be Google.</p><p>Any pro advice on this would be appreciated.</p><p><strong>To Clarify</strong></p><p>This is for a global search function that looks through contacts, phones, emails, tasks, sales opportunities, conversations, and notes, looking for anything that has or is connected to your search string (in this case, Ric Flair).</p><p>The main goal here is to have a &#34;smarter&#34; search, such that if you type <code>rick flair</code> or <code>ric m. flair</code>, it will still have a good chance of returning the contact <code>ric flair</code> at the top, even though you might have people named Rick in you contact list. Maybe that&#39;s because the last name matched, and that&#39;s more important? Or am I overthinking this?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You may want to have a look at <a href="http://lucene.apache.org/core/" rel="nofollow noreferrer">Lucene</a>. It&#39;s written in Java but you can use it from PHP through either its <a href="https://framework.zend.com/manual/1.10/en/zend.search.lucene.overview.html" rel="nofollow noreferrer">Zend port</a> or <a href="http://lucene.apache.org/solr/" rel="nofollow noreferrer">Solr</a>, although I think Solr might not be a solution since you probably want something embedded within your CMS.</p><p>The idea is that you can build an <a href="https://en.wikipedia.org/wiki/Inverted_index" rel="nofollow noreferrer">index</a> from all the searchable data and then search that index. It has the advantage that it can be much faster than database queries. You can also implement a scoring system, so that some records show up higher in the results list if they are more relevant to the user. One possible downside is that you have to update the index each time the data is updated.</p><p>If the Lucene approach doesn&#39;t fit your scenario, you could go with a mix of PHP and database code. A view or a stored procedure could act as a surrogate index, aggregating the searchable data. You&#39;d need to split strings by whitespaces and this could make it rather slow, but will get you there. The PHP code will be responsible for building the WHERE clause (you can have a look at how Solr implements query strategies for suggestions as source of inspiration). Assuming you have <code>Id</code>, <code>Name</code> and <code>Score</code> as index fields and two contact records with <code>Id=1, FirstName=&#34;Ric&#34;, LastName=&#34;Flair&#34;</code> and <code>Id=2, FirstName=&#34;Ric&#34;, LastName=&#34;Flare&#34;</code> the index records would be looking something like this:</p><pre><code>+--------------+-------+
| Id | Name    | Score |
+----+---------+-------+
| 1  | Ric     |   1   |
+----+---------+-------+
| 1  | Flair   |   1   |
+----+---------+-------+
| 2  | Ric     |   1   |
+----+---------+-------+
| 2  | Flare   |   1   |
+----+---------+-------+
</code></pre><p>An example could look like this (SQL Server):</p><pre><code>DECLARE @index TABLE (
    Id INT NOT NULL,
    Name NVARCHAR(50) NOT NULL,
    Score INT NOT NULL
)

INSERT INTO @index (Id, Name, Score) VALUES (1, &#39;Ric&#39;, 1)
INSERT INTO @index (Id, Name, Score) VALUES (1, &#39;Flair&#39;, 1)
INSERT INTO @index (Id, Name, Score) VALUES (2, &#39;Ric&#39;, 1)
INSERT INTO @index (Id, Name, Score) VALUES (2, &#39;Flare&#39;, 1)

SELECT
    Id,
    SUM(Score) AS Score
FROM
    @index
WHERE
    Name = &#39;Ric&#39;
    OR Name = &#39;Flair&#39;
GROUP BY
    Id
ORDER BY
    Score DESC
</code></pre><p><code>Ric Flair</code> would have a higher score since it matches on both values, thus popping first in the search results.</p><p>The index could also contain title and summary fields to be used as values to be displayed in the search results page. Or you could join the results with a view that preselects those values.</p><p>You can toy around with the conditions in the <code>WHERE</code> clause or with the <code>Score</code> field (you could give different scores to different type of records or properties) to get a more refined search experience.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-is-it-better-to-use-a-switch-statement-or-database-to-look-through-5000-to-10000-instances/'>Database &#8211; Is it better to use a switch statement or database to look through 5,000 to 10,000 instances</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>