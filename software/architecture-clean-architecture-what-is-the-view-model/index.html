<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture &#8211; Clean Architecture: What is the View Model &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069596 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069596" class="post-1069596 software type-software status-publish hentry category-software tag-architecture tag-dto tag-mvvm tag-plugin-architecture tag-view"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture &#8211; Clean Architecture: What is the View Model</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">dto</span><span class="mr-2 badge badge-warning">mvvm</span><span class="mr-2 badge badge-primary">plugin-architecture</span><span class="mr-2 badge badge-danger">view</span></p><div class="entry-content"><p>In his book &#39;Clean Architecture&#39;, Uncle Bob says that the Presenter should put the data that it receives into something he calls the &#39;View Model&#39;.</p><p><a href="../../../i.stack.imgur.com/K44FQ.jpg" rel="noreferrer"><img src="../../../i.stack.imgur.com/K44FQ.jpg" alt="enter image description here"/></a></p><p>Is this the same thing as the &#39;ViewModel&#39; from the Model-View-ViewModel (MVVM) design pattern or is it a simple Data Transfer Object (DTO)?</p><p>If it is <em>not</em> a simple DTO, how does it relate to the View?<br /> Does the view get updates from it through an Observer relationship?</p><p>My guess is that it is more like the ViewModel from MVVM, because in Chapter 23 of his book, Robert Martin says:</p><blockquote><p>[The Presenter&#39;s] job is to accept data from the application and format it for presentation so that the View can simply move it to the screen. For example, if the application wants a date displayed in a field, it will hand the Presenter a Date object. The Presenter will then format that data into an appropriate string and place it in a simple data structure called the View model, <strong>where the View can find it.</strong></p></blockquote><p>This implies that the View is somehow connected to the ViewModel, as opposed to  simply recieving it as a function argument for example (as would be the case with a DTO).</p><p>Another reason why I think this is because if you look at the image, the Presenter uses the View Model, but <em>not</em> the View.<br /> Whereas the Presenter uses <em>both</em> the Output Boundary and the Output Data DTO.</p><p>If it is neither a DTO nor the ViewModel from MVVM, please elaborate as to what it is.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>Is this the same thing as the &#39;ViewModel&#39; from the Model-View-ViewModel (MVVM) design pattern</p></blockquote><p>Nope.</p><p>That would be <a href="https://blogs.msdn.microsoft.com/dphill/2009/01/31/the-viewmodel-pattern/" rel="noreferrer">this</a>:</p><p><a href="../../../i.stack.imgur.com/49Ztn.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/49Ztn.png" alt="enter image description here"/></a></p><p>That has cycles. Uncle Bob has been <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" rel="noreferrer">carefully avoiding cycles</a>.</p><p>Instead you have this:</p><p><a href="../../../i.stack.imgur.com/w0CS8.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/w0CS8.png" alt="enter image description here"/></a></p><p>Which certainly doesn&#39;t have cycles. But it&#39;s leaving you wondering how the view knows about an update. We&#39;ll get to that in a moment.</p><blockquote><p>or is it a simple Data Transfer Object (DTO)?</p></blockquote><p>To quote Bob from the previous page:</p><blockquote><p>You can use basic structs or simple data transfer objects if you like. Or you can pack it into a hashmap, or construct it into an object.</p><p>Clean Architecture p207</p></blockquote><p>So, sure, if you like.</p><p>But I strongly suspect what&#39;s really bugging you is <a href="http://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" rel="noreferrer">this</a>:</p><p><a href="../../../i.stack.imgur.com/VY0gL.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/VY0gL.png" alt="enter image description here"/></a></p><p>This cute little abuse of UML contrasts the direction of source code dependency with the direction of flow of control. This is where the answer to your question can be found.</p><p>In a using relationship:</p><p><a href="../../../i.stack.imgur.com/Ulh6A.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/Ulh6A.png" alt="enter image description here"/></a> <a href="../../../i.stack.imgur.com/vzPWr.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/vzPWr.png" alt="enter image description here"/></a></p><p>flow of control goes in the same direction the source code dependency does.</p><p>In a implementing relationship:</p><p><a href="../../../i.stack.imgur.com/RvWAh.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/RvWAh.png" alt="enter image description here"/></a> <a href="../../../i.stack.imgur.com/oQ7Cf.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/oQ7Cf.png" alt="enter image description here"/></a></p><p>flow of control typically goes in the opposite direction the source code dependency does.</p><p>Which means you&#39;re really looking at this:</p><p><a href="../../../i.stack.imgur.com/EuZ9F.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/EuZ9F.png" alt="enter image description here"/></a></p><p>You should be able to see that the flow of control is never going to get from the Presenter to the View.</p><p>How can that be? What does it mean?</p><p>It means the view either has it&#39;s own thread (which is not that unusual) or (as @Euphoric points out) flow of control is coming into the view from something else not depicted here.</p><p>If it&#39;s the same thread then the View will know when the View-Model is ready to be read. But if that&#39;s the case and the view is a GUI then it will have a hard time repainting the screen when the user moves it around while they wait for the DB.</p><p>If the view has it&#39;s own thread then it has its own flow of control. That means to implement this the View will have to poll the View-Model to notice changes.</p><p>Since the Presenter doesn&#39;t know the View exists and the View doesn&#39;t know the Presenter exists they can&#39;t call each other at all. They can&#39;t fling events at each other. All that can happen is the Presenter will write to the View-Model and the View will read the View-Model. Whenever it feels like it.</p><p>According to this diagram the only thing the View and the Presenter share is knowledge of the View-Model. And it&#39;s just a data structure. So don&#39;t expect it to have any behavior.</p><p>That might seem impossible but it can be made to work even if the View-Model is complex. One little incrementing <code>update</code> field is all the view would have to poll to detect a change.</p><p>Now of course you can insist on using the observer pattern, or have some frameworky thing hide this issue from you but please understand that you don&#39;t have to.</p><p>Here&#39;s a bit of fun I had illustrating the flow of control:</p><p><a href="../../../i.stack.imgur.com/gHBKl.gif" rel="noreferrer"><img src="../../../i.stack.imgur.com/gHBKl.gif" alt="enter image description here"/></a></p><p>Note that whenever you see the flow going against the directions I defined before, what you are seeing is a call returning. That trick won&#39;t help us get to the View. Well, unless we first return to whatever called the Controller. Or you could just <a href="../../../i.stack.imgur.com/CqPl4.png" rel="noreferrer">change the design</a> so that you can get to the view. That also fixes what looks like the start of a <a href="https://en.wikipedia.org/wiki/Yo-yo_problem" rel="noreferrer">yo-yo problem</a> with Data Access and it&#39;s Interface.</p><p>The only other thing to learn here besides that is that the Use Case Interactor can pretty much call things in whatever order it wants as long as it calls the presenter last.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-loose-coupling-presenter-to-view-in-mvp/'>Design &#8211; Loose Coupling Presenter to View in MVP</a></li><li class="list-group-item"><a href='../again-mvvm-mvp-story-passing-interface-of-a-view-to-its-view-model-why-it-is-bad/'>Again MVVM / MVP story , passing interface of a view to its view model why it is bad</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-should-each-view-have-its-own-presenter-and-viewmodel/'>Architecture &#8211; Clean Architecture: Should each view have its own presenter and viewmodel</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>