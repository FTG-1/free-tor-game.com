<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Checking for the presence of optional properties of an object &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072266 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072266" class="post-1072266 software type-software status-publish hentry category-software tag-api-design tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Checking for the presence of optional properties of an object</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api-design</span><span class="mr-2 badge badge-info">java</span></p><div class="entry-content"><p>I&#39;m designing a class that holds several types of data.  Some of the properties are optional.  For example, let&#39;s say I have a class that represents a person, and one of the properties is occupation.  I have another property, military rank, but this property is can only be retrieved if the person&#39;s occupation is military.  What&#39;s the best way to handle this?</p><ol><li>Have <code>getMilitaryRank()</code> throw <code>IllegalStateException</code> if the occupation isn&#39;t military</li><li>Have <code>getMilitaryRank()</code> return an <code>Optional&lt;Rank&gt;</code></li><li>Return null if the occupation is invalid (I don&#39;t like nulls)</li><li>Something else?</li></ol><p>Idea 1 works because the user can check the occupation prior to calling this method, making sure they don&#39;t call it on an invalid person.</p><p>Idea 2 seems unnecessary, because you can infer whether the Optional is present by calling <code>getOccupation()</code>.</p><p>However, let&#39;s say my Person class has another optional property, but its presence can&#39;t be inferred from the value of another property; for example, a middle name.  Obviously it&#39;s best for <code>getMiddleName()</code> to return an empty <code>Optional</code> or null if the person has no middle name, as the presence of a middle name can&#39;t really be inferred some other way.</p><p>Since I should probably be consistent in how I&#39;m handling optional properties, it seems like I could do one of the following:</p><ol><li>Use <code>Optional</code> for any property that may be absent, even if it can be inferred from another property.</li><li>Add methods like <code>hasMiddleName()</code> to resolve the discrepancies (this seems like a bad idea)</li><li>Not be consistent and let the properties whose presence can be determined externally throw an exception, while the ones that are independent be wrapped in an <code>Optional</code>.</li><li>Something else?</li></ol><p>While nulls could simplify things, it causes a problem if an optional property is an <code>int</code>, which can&#39;t be nullable in Java.  I could use an <code>Integer</code>, but that seems like a bad idea.</p><p>What is the best way to handle these different types of optional properties?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>There&#39;s two solutions, depending on the specifics of your problem. If these optional properties are only combined in a relatively small number of ways, you can use a <a href="https://softwareengineering.stackexchange.com/questions/159804/how-do-you-encode-algebraic-data-types-in-a-c-or-java-like-language">sum type</a> to distinguish between them. The advantage of this approach is that you can guarantee exhaustiveness - you can statically ensure that wherever a decision must be taken based on the particular kind of person, all of the kinds are handled somehow.</p><p>The other solution is to group the optional properties that always occur together into interfaces and then implement the interfaces you can support in each class. You can detect the particular interfaces a person supports by applying <code>instanceof</code> and then casting. This approach won&#39;t force you to update all the use sites when you add a new interface, but works better when the number of possible combinations of optional properties is very large. E.g. if there&#39;s 7 groups of optional properties, there&#39;s 127 ways to combine those groups into classes, and it&#39;d be ridiculous to take a decision based on each possible combination. If you need to reuse the implementations of those interfaces, use composition.</p><p>That aside, do be careful about <a href="http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/" rel="nofollow noreferrer">making assumptions about people&#39;s names</a>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-should-a-getter-throw-an-exception-if-its-object-has-invalid-state/'>Java &#8211; Should a getter throw an exception if its object has invalid state</a></li><li class="list-group-item"><a href='../java-how-to-avoid-lazyinitializationexception-using-hibernate-and-jersey/'>Java &#8211; How to avoid LazyInitializationException using Hibernate and Jersey</a></li><li class="list-group-item"><a href='../rest-design-update-properties-on-an-entity-in-a-restful-resource-based-api/'>Rest &#8211; Design: Update properties on an entity in a RESTful, resource-based, API</a></li><li class="list-group-item"><a href='../java-why-not-allow-nulls-in-methods-to-represent-optional-parameters/'>Java: Why not allow nulls in methods to represent optional parameters</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>