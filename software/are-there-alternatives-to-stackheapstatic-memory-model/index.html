<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Are there alternatives to stack+heap+static memory model &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079152 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079152" class="post-1079152 software type-software status-publish hentry category-software tag-computer-science tag-computer-architecture tag-memory"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Are there alternatives to stack+heap+static memory model</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">computer science</span><span class="mr-2 badge badge-info">computer-architecture</span><span class="mr-2 badge badge-warning">memory</span></p><div class="entry-content"><p>All programs I have seen organize their data memory into one or more call stacks (usually fixed size, but sometimes not), the heap, and static memory.  Lately thread-local static storage has been added to this as well.</p><p>Have there been any attempts to organize data memory layout in a radically different way, e.g. without the call stack?  Or organize memory in a different way that accomplishes the same thing?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You might want to step back and see where and why those existing models come from.  When a process is created, it is simply given a flat storage area which is simply indexed from 0 to N. Because this storage area (talking about RAM here) is backed by a dedicated hardware and some fancy semiconductors it happens to be pretty fast, but it&#39;s not the only one of its kind.  Other devices such as hard drives are essentially the same thing, flat space addressable by an index, but many orders of magnitude slower.</p><p>The reason why &#34;a heap&#34; exists is because it would be impractical for each application to attempt to manage the use of RAM by itself.  Way back in the day, that&#39;s exactly how it happened, programmers planned ahead of time exactly what each RAM location would be used for. As software got more complex someone said, wouldn&#39;t it be nice if I could just go to some black box and say &#34;I need 10 bytes so gimme&#34; and not have to worry about all the intricate details of where and how those 10 bytes come from or how they are reclaimed.  That&#39;s what a heap is, doesn&#39;t really get more basic then that.</p><p>Each time a thread is created, there are some data structures (and a stack), which are acquired using the same &#34;gimme operation&#34; I just described.  A stack just about universally used because it fits perfectly with function call stack frames and their LIFO nature. In theory, each function invocation and local variables could be allocated on the heap, but that would simply be too expensive, compared with just a few assembly instructions that it takes to update stack pointer (ESP on x86) register.</p><p>Thread local storage (TLS) is also built on top of heap.  When a thread is created, as part of a trip to the heap to allocate memory for management structures, a separate space for TLS is also allocated from the heap.</p><p>So in the end, all you really have is a generic memory allocator (i.e. the heap) and everything else is a specialized form on top of that. In other words, if you are willing to give up some aspect of &#34;I want to allocate as much (or as little) as I want, keep it for as long as I want and free whenever I want&#34;, you could get away trading off generic heap allocator for another model that offers speed but at the cost of some other limitation.</p><p>Take stack. It is incredibly fast when compared to the heap, but the two trade offs are 1) you don&#39;t control when memory is freed; instead once the function exits, whatever you allocated is gone and 2) because stacks are generally limited in size, you should be careful allocating large amounts of data directly on the stack.</p><p>Another type of &#34;memory model&#34; is the Virtual Memory Manager (VMM) offered by just about every major OS via system calls.  VMM is very similar to heap in a sense that you can ask for any amount of memory and keep it as long as you want.  However, the limitation is that you can only allocate memory in page size multiples (e.g. 4KB) so using VMM directly would cause a lot of overhead in a typical application that often allocates 8-24 bytes at a time.  In fact, just about every heap implementation is built on top of VMM specifically for purposes of allowing a very generic, non-specialized, <em>small</em>-block allocation.  Heap goes to VMM whenever it needs more memory and then doles out many small chunks of that memory to the application.</p><p>If you have an app, that has a need for allocating large blocks, you might consider going directly to VMM, although some heaps have an if-statement inside malloc() and if block size is greater than some threshold, they simply go to VMM for you.</p><p>Another form of allocators instead of directly using heap, would be pools.  A pool is a specialized allocator where all blocks are of the same size.  Pools (just like stack and TLS) are built on top of heap or VMM.  Pools are useful in places where you allocate a lot (millions) of short-lived, small objects of the same size. Think a network service processing incoming requests.  Each client requests may result in same N byte structure being allocated to handle that request.  The trade off with using pools is that each pool only handles one block size (but you can create multiple pools).  The advantage of pools is that because all objects are same size, it doesn&#39;t require intricate logic. Instead, whenever you need a new block, it just gives you the one that was recently freed.  So it kind of behaves like a heap in terms of giving you blocks that you can hang on to for as long as needed, but it&#39;s alloc/free operations are almost (but not quite) as cheap as using stack.</p><p>And lastly, remember that hard drive thing I mentioned way up top. You could have a memory model that behaves like a file system and duplicates same idea of directory entries and i-nodes to allow you hierarchical allocation of data blocks where each data block as addressed with a path. That&#39;s exactly what <a href="http://en.wikipedia.org/wiki/Tmpfs" rel="nofollow">tmpfs</a> does.</p><p>Beyond the stuff I mentioned, I&#39;m sure there are other more specialized models, but in the end since everything is based on flat address space (that is until some genuis comes up with some kind of weird-a$$ non-flat space), it all goes back to that generic &#34;gimme&#34; allocator which is either VMM or the heap.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/java-stack-and-heap-memory-in-java/'>Java &#8211; Stack and Heap memory in Java</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-are-the-size-of-the-stack-and-heap-limited-by-the-os/'>How are the size of the stack and heap limited by the OS</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-debugging-memory-corruption/'>C++ &#8211; Debugging memory corruption</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-is-stack-and-heap-are-assigned-to-each-processes/'>How is stack and heap are assigned to each processes</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-memory-segmentation-stack-heap-etc/'>C++ &#8211; Memory segmentation &#8211; stack, heap, etc.</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-to-align-on-both-word-size-and-cache-lines-in-x86/'>How to align on both word size and cache lines in x86</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/does-each-process-have-its-own-section-of-data-text-stack-and-heap-in-the-memory/'>Does each process have it&#8217;s own section of data, text , stack and heap in the memory</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>