<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Aren&#8217;t decorators easily breaking the ISP &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084236 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084236" class="post-1084236 software type-software status-publish hentry category-software tag-design tag-object-oriented tag-solid"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Aren&#8217;t decorators easily breaking the ISP</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design</span><span class="mr-2 badge badge-info">object-oriented</span><span class="mr-2 badge badge-warning">solid</span></p><div class="entry-content"><p>&#34;The Interface-Segregation Principle (ISP) states that no client should be forced to depend on methods it does not use.&#34;</p><p>The decorator pattern is a design pattern to decorate a method of a class. For this, the decorator implements the same interface as the decorated object, so it can take its place.</p><p>But doesn&#39;t this mean that it has to implement all of the methods in the interface, when it uses only one of them, the one it decorates? So I guess it violates the ISP. The only case it doesn&#39;t it is when the decorated interface only contains the method that needs to be decorated, but I see it as a rather rare case.</p><p>An example would be that there are pages in a book. Some pages have footnotes, other pages have titles at the top. So we implement these extras as decorators of a method, let&#39;s say draw(). But a page has other methods as well, let&#39;s say: fold() and tear() and other methods can come in later. But if we want to use decorated versions of pages inserted in a book, and working the same way, we end up implementing in every decorator every method of a page, where the only thing happening is that the decorator passes the call to the page it&#39;s containing.</p><pre><code>interface IPage {
    public ITearResult tear();
    public void draw();
}

class FooterDecorator implements IPage {
    private IPage page;

    public FooterDecorator(IPage page) {
        this.page = page; //the object it decorates
    }

    //violates the ISP, because it has to implement it, but it&#39;s not using it,
    //just passes the operation
    public ITearResult tear() {
        return page.tear();
    }

    //decorated method
    public void draw() {
        page.draw();
        ... draw footer - the decoration
    }
}
</code></pre><p>Am I not understanding the decorator pattern or the ISP correctly? Is it an acceptable violation or do these two really contradict each other?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><pre><code>//violates the ISP, because it has to implement it, but it&#39;s not using it,
//just passes the operation
public ITearResult tear() {
    return page.tear();
}
</code></pre><p>This is not correct. The decorator <em>is</em> using the <code>tear</code> method; it&#39;s implemented it according to its contract, even if the implementation is as simple as delegating that job to someone else. From the point of view that the decorator is the client of the original interface, there&#39;s no problem; the whole point of the decorator is to implement the original interface <em>and more</em>, so by definition it has a dependency on the interface.</p><p>The user of a decorator also has a dependency on the original interface and whatever augmentation the decorator provides; otherwise, he wouldn&#39;t need a decorator and could instead rely on an interface that provides only the new features.</p><blockquote><p>Am I not understanding the decorator pattern or the ISP correctly, it&#39;s an acceptable violation or these two really contradict each other?</p></blockquote><p>You&#39;re not understanding ISP correctly.</p><p>Consider a system with various types of doors. Doors implement an interface <code>Door</code> that contains methods <code>open</code> and <code>close</code>. The client code calls these methods and all is well.</p><p>Later on you need to implement a <code>TimedDoor</code> that closes on its own after a certain amount of time (but can still be closed through the <code>close</code> method before the time elapses.) Some client code out there needs to be able to set the timeout on these doors. What the Interface Segregation Principle tell us is that you shouldn&#39;t go add a <code>setTimeout</code> method to the <code>Door</code> interface; instead, we should define a new interface (say, <code>TimedObject</code>) that provides those facilities.</p><p>Consider what <em>would</em> happen if you added <code>setTimeout</code> to <code>Door</code> - now <em>every</em> door in the system has to implement that method. What should they do? Treat it as a <em>no-op</em>? Throw an exception? Both are violations of the <code>setTimeout</code> method&#39;s contract (i.e violations of Liskov&#39;s Subtitution Principle.) The only other option is to weaken the contract by saying that objects may or may not implement <code>setTimeout</code>, which is tantamount to saying that something may or may not be a <code>TimedObject</code>. You&#39;d be fighting the type system and robbing yourself of the guarantees it&#39;s meant to buy you.</p><p>Another (much less important but still unfortunate) side effect is that modifying the <code>Door</code> interface would generally trigger a recompile of all code that relied on it even though that code has no use for the <code>setTimeout</code> method.</p><p>With that in mind, note that using a decorator doesn&#39;t modify the original interface it wraps.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../two-contradicting-definitions-of-interface-segregation-principle-which-one-is-correct/'>Two contradicting definitions of Interface Segregation Principle – which one is correct</a></li><li class="list-group-item"><a href='../object-oriented-using-the-decorator-pattern-to-add-public-methods-to-an-object/'>Object-oriented &#8211; Using the Decorator pattern to add public methods to an object</a></li><li class="list-group-item"><a href='../c-what-kind-of-base-for-decorator-interface-abstract-class-non-abstract/'>C++ &#8211; What kind of base for Decorator: interface, abstract class, non-abstract</a></li><li class="list-group-item"><a href='../design-combining-composite-decorator-and-visitor-patterns/'>Design &#8211; Combining composite, decorator and visitor patterns</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>