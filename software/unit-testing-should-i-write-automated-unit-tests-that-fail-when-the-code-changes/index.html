<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; Should I write automated unit tests that fail when the code changes &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078354 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078354" class="post-1078354 software type-software status-publish hentry category-software tag-test-coverage tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; Should I write automated unit tests that fail when the code changes</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">test-coverage</span><span class="mr-2 badge badge-info">unit testing</span></p><div class="entry-content"><p>Generally when writing automated unit tests (eg JUnit, Karma)  I aim to:</p><ul><li>cover all the boundary conditions</li><li>get a high level of coverage.</li></ul><p>I heard someone say:</p><blockquote><p>coverage and boundary conditions aren&#39;t enough for a unit test, you need to write them so they will break if the code changes.</p></blockquote><p>This sounds good to me in theory &#8211; but I&#39;m not sure how to apply it.</p><p>My question is: <strong>Should I write automated unit tests that fail when the code changes? If so, how.</strong></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your aim should be not to write unit tests that fail when the <em>code</em> changes, but unit tests that fail when the <strong>behaviour</strong> changes. Here, behaviour means anything that an external caller of the method wants it to do, like returning the right response to a question or saving the right thing to a databse. <em>How</em> it achieves that is its own internal implementation, not its behaviour.</p><p>By testing behaviour rather than implementation, you can refactor code to make improvements, and instantly verify whether you&#39;ve accidentally changed the way it behaves by running your tests.</p><p>In reality, it&#39;s not possible to perfectly achieve this goal. If you have a method:</p><pre><code>int add(int x, int y) {
    return x + y;
}
</code></pre><p>You can write as many unit tests as you want for it, but it&#39;s extremely unlikely any of them will fail if you modify it to:</p><pre><code>int add(int x, int y) {
    if(x==10731 &amp;&amp; y == -405571) {
        return 0;
    }
    return x + y;
}
</code></pre><p>However, you can take some sensible steps to get as close to full behavioural coverage as is practical:</p><ul><li>As you said, think about boundary conditions and corner cases. These are the places where you&#39;re most likely to see accidental behaviour change.</li><li>Think of line-by-line coverage as &#34;necessary, but not sufficient&#34;. Imagine trying to be as lazy as you possibly can while still getting full line-by-line coverage, and you&#39;ll see how easy it is to write an inadequate set of tests that follow this</li><li>Think about the behaviour your method is supposed to provide, and the branches it can follow. Ideally you should test that for every route through its implementation, it provides all the behaviour that&#39;s expected.</li><li><p>When you&#39;ve written a set of tests, ask &#34;Are there any implementations of my method which are at least as simple as the existing one, which would pass all of my tests, but which have the wrong behaviour?&#34; This is a good rule of thumb to see if your behavioural coverage is good enough.</p><p>As shown in the example <code>add</code> method above, you can never really fully defend against modifications to your method that add extra stuff to it, making it less simple. But much more likely, bugs are going to sneak in through modifying or removing parts, without adding to the complexity (because, why would you refactor something in a way that adds to its complexity?). So by adding the &#34;at least as simple&#34; condition, you get something practically achievable.</p></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../python-how-much-should-i-break-up-the-unit-tests/'>Python &#8211; How much should I break up the unit tests</a></li><li class="list-group-item"><a href='../unit-testing-should-automated-unit-tests-be-part-of-the-build/'>Unit-testing &#8211; Should automated unit tests be part of the build</a></li><li class="list-group-item"><a href='../c-should-all-configurations-and-platforms-run-unit-tests-when-application-is-in-development-stage/'>C# &#8211; Should all configurations and platforms run unit tests when application is in development stage</a></li><li class="list-group-item"><a href='../unit-testing-how-to-detect-dependency-problems-with-unit-tests-when-you-use-mock-objects/'>Unit-testing &#8211; How to detect dependency problems with unit tests when you use mock objects</a></li><li class="list-group-item"><a href='../unit-testing-with-tdd-tests-obviously-fail-first-but-is-that-really-true/'>Unit-testing &#8211; With TDD, tests obviously fail first.But is that really true</a></li><li class="list-group-item"><a href='../unit-testing-how-to-write-unit-tests-for-legacy-code-that-i-dont-understand/'>Unit-testing &#8211; How to write unit tests for legacy code (that I don&#8217;t understand)</a></li><li class="list-group-item"><a href='../unit-testing-in-tdd-should-i-add-unit-tests-to-refactored-code/'>Unit-testing &#8211; In TDD, should I add unit tests to refactored code</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>