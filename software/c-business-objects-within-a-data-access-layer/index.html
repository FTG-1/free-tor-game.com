<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Business Objects within a Data Access Layer &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1066474 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1066474" class="post-1066474 software type-software status-publish hentry category-software tag-architecture tag-business-logic tag-c tag-database tag-net"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Business Objects within a Data Access Layer</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">business-logic</span><span class="mr-2 badge badge-warning">c</span><span class="mr-2 badge badge-primary">database</span><span class="mr-2 badge badge-danger">net</span></p><div class="entry-content"><p>So I&#39;ve been creating a data access layer via TDD and have approached somewhat of a concern. I&#39;d rather not start down the wrong path, so I figured I&#39;d ask you guys to see if my thoughts were in line with a clean architecture.</p><p>The methods within my Data Access Layer (DAL for short), are pretty simple. They are in line with the stored procedures in the database (no other way to call into it to keep things clean), and they contain those same parameters that the procedures do. They then just connect to the database, and return the query result. Here&#39;s one example:</p><pre><code>public int DeleteRecord(int recordId)
{
    recordId.RequireThat(&#34;recordId&#34;).NotZeroOrLess();

    List&lt;SqlParameter&gt; parameters = new List&lt;SqlParameter&gt;();
    parameters.Add(new SqlParameter { ParameterName = &#34;@RecordId&#34;, SqlDbType = SqlDbType.Int, Direction = ParameterDirection.Input, Value = recordId});

    return this.ExecuteNonQuery(&#34;DeleteRecord&#34;, parameters.ToArray());
}
</code></pre><p>This works perfectly for this type of method because I am not doing anything meaningful with the result set. I just want to make sure the command worked, so I will return the result of the non-query, which is just the rows affected, and I can verify the logic using that number.</p><p>However, say in another DAL method, I want to load a record. My load procedure is going to be executing <code>selects</code> against a bunch of tables and returning a <code>DataSet</code>, but I am battling with whether my DAL should create the Business Objects within the method using the <code>DataSet</code>, <em>or</em> if my Business Objects themselves should just have a <code>Load()</code> method that gets the <code>DataSet</code> from the DAL, and then basically fills itself in.</p><p>Doing it through the DAL would result in less logic in the Business Objects (even though this is just select logic, it&#39;s still logic), but would crowd the DAL a little bit and make it feel like it really is doing something that it shouldn&#39;t be doing.</p><p>What do you guys think?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your DAL should return your data objects</p><p>Ideally your DAL should be a &#34;black box&#34; object, that your application code can use to ask for a data object or manipulate existing data objects. Sometimes there is another layer put between the DAL and the application code called the <code>Repository</code>, which further separates the two layers, although this is not always needed.</p><p>In addition, you usually do not want your business objects being able to create themselves. This can cause security holes where someone can use your library, and create a new instance of your object by calling <code>.Load(someId)</code> on it, and it merges together two layers that should be completely separate.</p><p>I also don&#39;t recommend providing a<code>.Load(DataSet ds)</code> method because if the data set definition changes, you&#39;ll have to hunt down the data objects which use that data set and change them. It&#39;s easier to keep all your data access code in one place, so if you change the data access query, you should only have to change your DAL layer.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-static-methods-in-business-layer-to-achieve-data-from-dal-yes-no/'>Architecture &#8211; Static Methods in Business Layer to achieve data from DAL! Yes? No</a></li><li class="list-group-item"><a href='../architecture-data-access-layer-business-class-or-repository/'>Architecture &#8211; Data Access Layer, Business Class or Repository</a></li><li class="list-group-item"><a href='../database-unit-integration-testing-the-dal/'>Database &#8211; Unit/Integration Testing the DAL</a></li><li class="list-group-item"><a href='../architecture-architecturally-speaking-does-a-da/'>Architecture &#8211; Architecturally speaking, does a database abstraction layer, such as Microsoft&#8217;s Entity Framework, void the need for a separate Data Access Layer</a></li><li class="list-group-item"><a href='../c-separation-of-retrieving-data-and-business-objects-between-dal-and-bll-layers/'>C# &#8211; Separation of retrieving data and business objects between DAL and BLL Layers</a></li><li class="list-group-item"><a href='../c-data-layer-vs-business-layer/'>C# &#8211; Data Layer vs Business Layer</a></li><li class="list-group-item"><a href='../architecture-how-to-structure-business-layer-logic-app-with-much-complicated-business-layer-logic-calculations-etc/'>Architecture &#8211; How to structure business layer logic (app with much complicated business layer logic, calculations etc.)</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>