<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Design solution for communicating between multiple layers &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083473 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083473" class="post-1083473 software type-software status-publish hentry category-software tag-design-patterns tag-java tag-multithreading"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Design solution for communicating between multiple layers</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span><span class="mr-2 badge badge-info">java</span><span class="mr-2 badge badge-warning">multithreading</span></p><div class="entry-content"><p>We are developing a framework that has several layers and would be deployed in a multi-threaded environment. Each layer may have its own input/output data type. The top layer takes the input, performs some actions on the data and passes it to the next layer. Based on the output from next layer, the top layer would perform another set of operations on the data. Similar interactions happen between other layers.</p><hr/><p>There are two use cases that we did not incorporate in the original design:</p><ol><li><p>Generating metrics over what operations each layer performs on the data.</p></li><li><p>The change in data in one layer affects the operations in another layer, the changes should be recorded and each layer should have capability to fetch the list of changes.</p></li></ol><p>After some thinking we came up with two approaches to accommodate these requirements in the existing design:</p><ol><li><p>Use observer pattern and let each layer report its changes. These changes can be then pulled by the layer that needs to use it.</p><p>Pros:</p><ul><li>Since we have already come up with a design for the framework and most of work is complete. This approach would not require significant changes to the existing design, if any.</li></ul><p>Cons:</p><ul><li>It becomes difficult to manage(record and report back) changes corresponding to each layer.</li><li>There is a central class that aggregates all the data for each request. This class acts like a global variable. It has to be initialized and deleted by the top layer. Adding another top layer could be error prone.</li></ul></li><li><p>Extend the current data classes using an interface equivalent to EventContainer. This way all the layers would record their changes and spit them in their output.</p><p>Pros:</p><ul><li>This approach is much more cleaner and extendable than observer pattern.</li></ul><p>Cons:</p><ul><li>It would require significant design changes.</li><li>The concept of data having events as well merges two separate concerns into one and does not seem like a good idea.</li></ul></li></ol><hr/><p>We would like to know if there is a design pattern or any other solution that solves this problem?</p><p>Which of the above two solutions should be given higher preference considering that we would want a flexible, extendable and cleaner solution?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>We would like to know if there is a design pattern or any other
 solution that solves this problem?</p></blockquote><p>To me this sound like the kind of problem that <a href="http://www.enterpriseintegrationpatterns.com/" rel="noreferrer">Enterprise Integration Patterns</a> solve by using communication channels and message passing.</p><p>The patterns can be use to decouple the communication between applications, between layers or between components.</p><p>There is a number of frameworks that can be used to implement this type of applications like <a href="http://projects.spring.io/spring-integration/" rel="noreferrer">Spring Integration</a>, <a href="http://camel.apache.org/" rel="noreferrer">Apache Camel</a> and <a href="http://www.mulesoft.org/" rel="noreferrer">Mule</a></p><p>What you describe sounds to me like a <a href="http://www.enterpriseintegrationpatterns.com/MessagingAdapter.html" rel="noreferrer">Service Activator</a>. One of many different types of <a href="http://www.enterpriseintegrationpatterns.com/MessageEndpoint.html" rel="noreferrer">message endpoints</a> (ME). The communication between your components will happen through <a href="http://www.enterpriseintegrationpatterns.com/MessageChannel.html" rel="noreferrer">message channels</a>.</p><p>The components/service activators are totally unaware of each other and the channels define the pipeline that carries the messages between them.</p><p>Most frameworks, like Spring Integration, provide you with interceptors to get a chance to do something with the messages as they flow through the pipeline (equivalent to your observer pattern).</p><p>Interesting metrics can also be captured in the form of MXBeans as the message flow through the pipeline.</p><p><code> +----+    channel    +----+    channel    +----+
|    |---------------|    |---------------|    |
| ME |  &lt;-message-&gt;  | ME |  &lt;-message-&gt;  | ME |
|    |---------------|    |---------------|    |
*----+               +----+               +----+ </code></p><p>In this type of frameworks the channel abstraction gives you a lot of power. The channel could be direct channels or publish subscribe channels, and the hand off of message can be synchronous or asynchronous. So you have total control of the message flow, the span of transactions, etc.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/design-patterns-for-multi-threaded-messaging-server/'>Design patterns for multi-threaded messaging server</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-dto-service-layer-statelessness-best-practices-interfering-with-each-other/'>Java &#8211; DTO &#8211; service layer &#8211; statelessness best practices interfering with each other</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/object-oriented-communicating-between-unrelated-components-objects/'>Object-oriented &#8211; Communicating between unrelated components/objects</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-problems-with-oo-design-for-application-with-pluggable-components/'>Java &#8211; Problems with OO design for application with pluggable components</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/design-pattern-for-streaming-data/'>Design pattern for streaming data</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>