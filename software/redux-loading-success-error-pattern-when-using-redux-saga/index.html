<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Redux LOADING/SUCCESS/ERROR pattern &#8211; when using redux-saga &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070252 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070252" class="post-1070252 software type-software status-publish hentry category-software tag-redux tag-redux-saga tag-saga"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Redux LOADING/SUCCESS/ERROR pattern &#8211; when using redux-saga</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">redux</span><span class="mr-2 badge badge-info">redux-saga</span><span class="mr-2 badge badge-warning">saga</span></p><div class="entry-content"><p>On a typical web app, we commonly have to deal the LOADING/SUCCESS/ERROR problem &#8211; which is that:</p><ul><li>When I make a backend request I want to display a loading cursor, perhaps disable some buttons.</li><li>When the request finishes successfully, I want to display the data.</li><li>When the request finishes with an error &#8211; I want to display or handle the error.</li></ul><p>If you&#39;re not careful, this can lead to spaghetti code &#8211; especially if you&#39;re doing things like having two requests running at the same time, and managing that when one request ends, it doesn&#39;t stop the loading cursor for the other item, for example.</p><p>For redux only &#8211; <a href="https://medium.com/stashaway-engineering/react-redux-tips-better-way-to-handle-loading-flags-in-your-reducers-afda42a804c6" rel="noreferrer">I came across this solution</a> which I found works pretty well.</p><p>Basically it you define three actions:</p><pre><code>GET_FOO_REQUEST
GET_FOO_SUCCESS
GET_FOO_FAILURE
</code></pre><p>and then has a generic reducer that will intercept all requests and set in your redux state the loading and error state, for that particular request type (in this case <code>GET_FOO</code>).</p><p>You can then select for the loading or error state on the component that needs it:</p><pre><code>const loadingSelector = createLoadingSelector([&#39;GET_FOO&#39;]);

const mapStateToProps = (state) =&gt; ({ isFetching: loadingSelector(state) });
</code></pre><p>My question is &#8211; if I&#39;m using redux-saga &#8211; this this pattern still apply well &#8211; or does redux-saga already solve this problem?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Yes this pattern will apply well with redux saga.</p><p>Think of redux saga as just a middleware layer within Redux. Basically when you dispatch an action in your code, redux saga will intercept that action and then can be used to do async things like calling an API or modifying data and calling other actions.</p><p>So in the case of your example, when you dispatch GET_FOO_REQUEST you should have a listener setup in your saga for that action. Then the saga function can look like so:</p><ol><li>Dispatch action to toggle loading state in redux</li><li>Send the API request<ul><li>If successful, dispatch GET_FOO_SUCCESS</li><li>If error dispatch, GET_FOO_FAILURE</li></ul></li></ol><p>Then in your reducer for GET_FOO_SUCCESS/FAILURE you should toggle the loading state to off and do whatever else you need.</p><p>You can write all the boilerplate code yourself, however one cool library you can use is <a href="https://github.com/afitiskin/redux-saga-routines" rel="noreferrer">redux-saga-routines</a>, it will automatically create 5 different action types for this purpose:</p><ul><li>routine.TRIGGER</li><li>routine.REQUEST</li><li>routine.SUCCESS</li><li>routine.FAILURE</li><li>routine.FULFIL</li></ul><p>Here is an example saga using these action types:</p><pre><code>function* callAPI(action) {
  yield put(routine.REQUEST());
  try {
    const response = yield call(api, &#39;GET&#39;, &#39;/foo/endpoint&#39;);
    yield put(routine.SUCCESS(response.data))

  } catch(err) {
      yield put(routine.FAILURE(err.message));

  } finally {
      yield put(routine.FULFILL());
  }

}
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-to-avoid-get-set-actions-in-redux/'>How to avoid get/set actions in redux</a></li><li class="list-group-item"><a href='../javascript-when-using-redux-redux-saga-should-jwts-be-set-in-the-action-creators-sagas/'>Javascript &#8211; When using Redux/Redux-Saga &#8211; should JWTs be set in the action creators/sagas</a></li><li class="list-group-item"><a href='../how-to-effectively-handle-404-500-http-errors-in-server-side-rendering-web-application-which-uses-store-for-state/'>How to effectively handle 404/500 http errors in server-side rendering web application which uses store for state</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>