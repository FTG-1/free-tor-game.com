<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; Creating abstraction over API &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1077555 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1077555" class="post-1077555 software type-software status-publish hentry category-software tag-abstraction tag-api tag-design tag-domain-specific-languages"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; Creating abstraction over API</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">abstraction</span><span class="mr-2 badge badge-info">api</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">domain-specific-languages</span></p><div class="entry-content"><p>I&#39;m trying to figure out how to create abstraction over different APIs, which have common things. For example let&#39;s take the mobile platforms you have Android, Windows Phone and IOS. Let&#39;s say I want to create and API or program or domain-specific language, which will allow me to write one program and work on all of the given platforms. Of course this is just an example, and in the end all of the platforms have a lot in common which allow me to write programs and libraries without thinking too much about the abstraction, for example all of them have C compiler. A better example is ERP systems, let&#39;s say I want to write the same plugin for 3 different ERP systems, how could I create abstraction above their APIs which will allow me to write it once, and compile it(build it or whatever you can call it), and use it on all the systems. For the sake of simplicity let&#39;s say that those ERP system are all writing in the same programming language, but their API have nothing or little in common in terms of function names etc.. they only have similar functionality. I&#39;ve though about using metaprogramming, in such way that I tell the program what I want, and using set of rules different for every API will output programs for every one of the API. Another think what I&#39;ve thought of is encapsulate all of the common features in classes, which will hold the code(data) for every API, and output it when I request the functionality for given API. I&#39;ll give an example. Let&#39;s say I&#39;ve 3 api which all have class for printing, and the names are like follows:</p><ol><li>Printer &#8211; PrintToLog(Data)</li><li>Outputer &#8211; OutputToLog(Data, lenght)</li><li>IO &#8211; PrntLogData(Data, logPtr)</li></ol><p>For the sake of simplicity let all those classes be static.<br /> I could create class like this(pseudo-code)<br /></p><pre><code>Class Printer{
    api //holds for which API the code is requested
    constructor(API){
        this.api = API
    }
    func logData(Data){
        switch API{
            case API_1 //let&#39;s say the API are stored in ENUM or something similar
                return &#34;PrintToLog(&#34; + Data + &#34;)&#34;
            case API_2
                return &#34;OutputToLog(&#34; + Data + &#34;,&#34; + len(Data) + &#34;)&#34; // len returns the lenght of data
            case API_3
                return &#34;PrntLogData(&#34; + Data + &#34;, /default/log/location)&#34;
        }
    }
}
</code></pre><p></p><p>However I&#39;m not sure how practical,reliable are those methods. Also I wasn&#39;t able to find a lot of information for those types for creating abstraction. Are there any sets of patterns, methodologies or principles for such abstractions?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This is a common problem in software development. There are two techniques which can be used:</p><ul><li><p>You may design the interface in a way it contains only common methods which are shared by every underlying implementation.</p><p>The benefit is that moving from one implementation to another would be extremely easy, without any need to change any code. For instance, a common interface may make it possible to interact with Google Maps or Bing Maps while containing methods which are supported by both Google&#39;s and Microsoft&#39;s APIs. Since both APIs are very similar, it is relatively easy to create a common interface which would still remain very capable.</p></li><li><p>You may provide methods which are supported only in some implementations, but not others, or not well. This will require the caller to be able to determine whether a given action is supported (without necessarily knowing what is the implementation in use).</p><p>The benefit is that you can provide much more features than the common subset, and also use the strong points of some implementations. For instance, some features are performed much better by iOS, and others are performed better by Android. If you barely take common features, you won&#39;t benefit from those features.</p></li></ul><h2>Implementation</h2><p>I don&#39;t like much your <code>switch</code> statement. A common solution is <a href="https://stackoverflow.com/a/126455/240613">to use inheritance</a>: in your case, it means to have <a href="https://en.wikipedia.org/wiki/Adapter_pattern" rel="nofollow noreferrer">one adapter</a> per implementation which will ensure the communication between your API and the underlying system or API.</p><p>Using Dependency Injection, you&#39;ll then be able to select the adapter to use at runtime. Each adapter would be able to be modified independently from others.</p><p><strong>Example:</strong></p><pre class="lang-java prettyprint-override"><code>interface IGeolocation
{
    Coordinates addressToCoords(string address);
    string coordsToAddress(Coordinates position);
}

class GoogleMapsGeolocationAdapter : IGeolocation
{
    ... // Concrete implementation of addressToCoords and coordsToAddress.
        // Each method calls the Google&#39;s API.
}

class BingMapsGeolocationAdapter : IGeolocation
{
    ... // Concrete implementation of addressToCoords and coordsToAddress.
        // Each method calls the Microsoft&#39;s API.
}
</code></pre><p>The class which needs to get latitude and longitude from an address simply needs to require <code>IGeolocation</code> to be passed to its constructor, and then call <code>addressToCoords</code>, independently of the concrete implementation which was passed through Dependency Injection. It belongs to the application itself to determine, based on configuration, which class should be initialized: <code>GoogleMapsGeolocationAdapter</code> or <code>BingMapsGeolocationAdapter</code>.</p><p>In the case of iOS vs. Android, the implementation choice would be made either based on the platform, or during the compilation of the application.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-an-alternative-to-multiple-inheritance-when-creating-an-abstraction-layer/'>C# &#8211; An alternative to multiple inheritance when creating an abstraction layer</a></li><li class="list-group-item"><a href='../rest-api-should-api-return-nested-json-objects/'>REST API &#8211; Should API Return Nested JSON Objects</a></li><li class="list-group-item"><a href='../rest-grouping-and-nesting-of-rest-apis/'>Rest &#8211; Grouping and nesting of REST APIs</a></li><li class="list-group-item"><a href='../design-crud-api-how-to-specify-which-fields-to-update/'>Design &#8211; CRUD API: How to specify which fields to update</a></li><li class="list-group-item"><a href='../is-it-possible-to-call-a-function-or-a-script-with-a-rest-api/'>Is it possible to call a function or a script with a REST API</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>