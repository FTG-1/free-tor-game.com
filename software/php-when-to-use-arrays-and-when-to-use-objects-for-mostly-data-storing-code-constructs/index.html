<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>PHP: when to use arrays, and when to use objects for mostly-data-storing code constructs &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063739 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063739" class="post-1063739 software type-software status-publish hentry category-software tag-array tag-data-structures tag-perl tag-php tag-storage"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">PHP: when to use arrays, and when to use objects for mostly-data-storing code constructs</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">array</span><span class="mr-2 badge badge-info">data structures</span><span class="mr-2 badge badge-warning">perl</span><span class="mr-2 badge badge-primary">PHP</span><span class="mr-2 badge badge-danger">storage</span></p><div class="entry-content"><p>PHP is a mixed paradigm language, allowing to use and return non-object data types, such as arrays. I pose a question to try to clarify some guidelines for selection of arrays vs objects when deciding upon what programming construct to use in a particular situation.</p><p>This is really a question about ways to encode data using PHP language constructs and when one way is to be more likely picked over another for data passing purposes (i.e. Service-Oriented Architecture or web services).</p><p><strong>Example</strong></p><p>Suppose you have an item type consisting of {cost, name, part_number, item_count}.  Your program calls for display of several such item types, to where you decide to use an array <em>as an outer container</em> to hold each of the item types.  [You can also use PHP&#39;s <code>ArrayObject</code> for OO paradigm, but my question is not about <em>that</em> (outer) array].  My question is about how to encode the item type data, and about which paradigm to use.  PHP allows you to use <code>PHP Native Arrays</code> or <code>PHP Objects</code>.</p><p>I can encode such data, in two ways here, like so:</p><pre><code>//PHP&#39;s associative arrays:
$ret = array(
    0 =&gt; array(
        &#39;cost&#39; =&gt; 10.00, 
        &#39;name&#39; =&gt; &#39;item1&#39;,
        &#39;part_number&#39; =&gt; &#39;zyz-100&#39;, 
        &#39;item_count&#39; =&gt; 15
        ),
    1 =&gt; array(
        &#39;cost&#39; =&gt; 34.00, 
        &#39;name&#39; =&gt; &#39;item2&#39;, 
        &#39;part_number&#39; =&gt; &#39;abc-230&#39;, 
        &#39;item_count&#39; =&gt; 42
        ),
  );
</code></pre><p>vs</p><pre><code>//here ItemType is encapsulated into an object
$ret = array(
  0 =&gt; new ItemType(10.00, &#39;item1&#39;, &#39;zyz-100&#39;, 15),
  1 =&gt; new ItemType(34.00, &#39;item2&#39;, &#39;abc-230&#39;, 42),
);

class ItemType
{
    private $price;
    private $name;
    private $partNumber;
    private $itemCount;

    function __construct($price, $name, $partNumber, $itemCount) {..}
}
</code></pre><p><strong>What I am thinking</strong></p><p>Array encoding is light-weight, and more JSON-ready, but can be easier to mess up.  Misspell one of the associative array keys and you may have an error that is more difficult to catch.   But it is also easier to change on a whim.  Say I don&#39;t want to store <code>item_count</code> anymore, I can use any text-processing software to easily remove all <code>item_count</code> instances in the array and then update other functions that use it accordingly.  It may be a more tedious process, but it is simple.</p><p>Object oriented encoding calls upon IDE and PHP language facilities and makes it easier to catch any errors beforehand, but is harder to program and code up in the first place.  I say harder, because you have to think a bit about your objects, think ahead, and OO coding takes a bit higher cognitive load than typing up array structures. That said, once it is coded up, some changes maybe easier to implement, in a sense, that removing <code>item_count</code>, for example, will require changing less lines of code.  But changes themselves may still require a higher cognitive load in comparison with the array method, since higher-level OO facilities are involved.</p><p><strong>Question</strong></p><p>In some cases it is clear, like cases where I will need to perform manipulations on the data.  But in some cases, where I need to just store a few lines of &#34;Item Type&#34; data, I don&#39;t have clear guidelines or considerations to lean on when trying to decide whether to use arrays or whether to construct objects.  It seems I can just toss a coin and pick one.  Is that the case here?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The way I see this, it depends on what you intend to do with the data afterwards. Based on a few simple checks you can determine which of the two data structures is better for you:</p><ol><li><p><strong>Does this data have any logic associated with it?</strong></p><p>For example, is <code>$price</code> stored as an integer number of cents, so a product with a price of $9.99 would have <code>price = 999</code> and not <code>price = 9.99</code>? (Probably, yes) Or does <code>partNumber</code> need to match a specific regex? Or, do you need to be able to easily check if the <code>itemCount</code> is available in your inventory? <strong>Will you need to do these these functions in the future?</strong> If so, then your best bet is to create a class now. This means that you can define constraints and logic built into the data structure: <code>private $myPrice</code> is set to <code>999</code> but <code>$item-&gt;getPriceString()</code> returns <code>$9.99</code> and <code>$item-&gt;inStock()</code> is available to be called in your application.</p></li><li><p><strong>Are you going to be passing this data to multiple PHP functions?</strong></p><p>If so, then use a class. If you&#39;re generating this data once to perform some transformations on it, or just to send as JSON data to another application (JavaScript or otherwise) then an array is an easier choice. But if you have more than two PHP functions which accept this data as a parameter, use a class. If nothing else, that lets you define <code>someFunction(MyProductClass $product) {</code> and it&#39;s very clear what your functions expect as input. As you scale out your code and have more functions it will be much easier to know what type of data each function accepts. Seeing <code>someFunction($someArrayData) {</code> is not nearly as clear. Also, this does not enforce type consistency and means that (as you said) the flexible structure of the array can cause development pain later on</p></li><li><p><strong>Are you building a library or shared code base?</strong></p><p>If so, <strong>use a class!</strong> Think about some new developer who is using your library, or another developer somewhere else in the company who has never used your code before. It will be much easier for them to look at a class definition and understand what that class does, or see a number of functions in your library which accept objects of a certain class, than to try and guess what structure they need to generate in a number of arrays. Also, this touches on the data consistency issues with #1: if you&#39;re developing a library or shared code base, be nice to your users: give them classes which enforce data consistency and protect them from making errors with the design of your data.</p></li><li><p><strong>Is this a small part of an application or just a transformation of data? Do you not fit into any of the above?</strong></p><p>A class might be too much; use an array if it suits you and you find it easier. As mentioned above, if you&#39;re just generating structured data to send as JSON or YAML or XML or whatever, don&#39;t bother with a class unless there&#39;s a need to. If you are writing a small module in a larger application, and no other modules/teams need to interface with your code, maybe an array is sufficient.</p></li></ol><p>Ultimately, <strong>consider the scaling needs of your code</strong> and consider than a structured array might be a quick fix, but a class is a much more resilient and scalable solution.</p><p>Also, consider the following: if you have a class, and you want to output to JSON, there&#39;s no reason you can&#39;t define a <code>json_data()</code> method of your class which returns a JSON-ifiable array of the data in the class. This is what I did in my PHP applications where I needed to send class data as JSON. As an example:</p><pre><code>class Order {
    private $my_total;
    private $my_lineitems;

    public function getItems() { return $this-&gt;my_lineitems; }
    public function addItem(Product $p) { $this-&gt;my_lineitems[] = $p; }
    public function getTotal() { return $this-&gt;my_total; }

    public function forJSON() {
        $items_json = array();
        foreach($this-&gt;my_lineitems as $item) $items_json[] = $item-&gt;forJSON();
        return array(
            &#39;total&#39; =&gt; $this-&gt;getTotal(),
            &#39;items&#39; =&gt; $items_json
        );
    }
}

$o = new Order();
// do some stuff with it
$json = json_encode($o-&gt;forJSON());
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-domain-models-php/'>Object-oriented &#8211; Domain Models (PHP)</a></li><li class="list-group-item"><a href='../internal-mutation-of-persistent-data-structures/'>Internal Mutation of Persistent Data Structures</a></li><li class="list-group-item"><a href='../php-arrays-vs-objects-in-view-template/'>Php &#8211; Arrays vs Objects in view template</a></li><li class="list-group-item"><a href='../php-how-to-define-domain-objects-and-repositories-when-dealing-with-multiple-database-tables/'>Php &#8211; How to define Domain Objects and Repositories, when dealing with multiple database tables</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>