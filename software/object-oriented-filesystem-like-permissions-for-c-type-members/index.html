<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Filesystem like permissions for C++ type-members &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080998 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080998" class="post-1080998 software type-software status-publish hentry category-software tag-c tag-idioms tag-maintainability tag-object-oriented tag-permissions"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Filesystem like permissions for C++ type-members</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">idioms</span><span class="mr-2 badge badge-warning">maintainability</span><span class="mr-2 badge badge-primary">object-oriented</span><span class="mr-2 badge badge-danger">permissions</span></p><div class="entry-content"><h2>Abstract (<strong>tl;dr</strong>)</h2><p><em>Please read the full question, this is awfully simplified:</em><br /> How can unix file permission style restrictions be applied to inter-type data/control flows, allowing fine-grained access to some class-members for some groups of classes?</p><h2>Background information</h2><p>If you think about unix file systems and permissions, there is a diverse way of encoding file-access privileges of users (especially if you also consider <a href="http://en.wikipedia.org/wiki/Access_control_list#Filesystem_ACLs">FACL</a>). For example, if a directory contains 3 files, they could belong to several users, and different other users may have restricted permissions:</p><pre><code>-rwxr-xr--  jean-luc  staff    engage.sh
-rw-r-----  william   crew     roster.txt
-rw-------  beverly   beverly  patients.txt
</code></pre><h2>Core idea</h2><p>As you can see, depending on the groups a particular user is in, different access levels are allowed. For example, <code>crew</code>members are allowed to read <code>roster.txt</code>, which belongs to <code>william</code>, but guests who presumably do not belong to <code>crew</code> cannot. More importantly, the group <code>crew</code> can contain many people.</p><p>So I was thinking that there is some similarity to access permissions inside object oriented languages like C++ if you think of types (classes) as users. Although a function can only be executed, but not read, the <code>rwx</code> flags represent meaningful descriptions for class members. A data member can be read (<code>r</code>) and written (<code>w</code>) to, perhaps via accessors, while member functions may be executed (<code>x</code>) or not.</p><p>However, in C++ and other object oriented languages (I know of), this is more or less an all or nothing thing, if we leave out inheritance for a second; If class <code>William</code> makes his member <code>Txt roster;</code> public, everybody will see it. If he makes it private, nobody except himself will see it. He may add one or more friends, <code>friend JeanLuc;</code> but then they will see all his private members (the equivalent of granting <code>user:jean-luc:rwx</code> to all his files, in FACL lingo).<br /> This is entirely orthogonal to inheritance &#8212; <code>JeanLuc</code> and <code>William</code> are not part of the same hierarchy, they are not related.</p><p><strong>So the main idea would be to allow group-based access restrictions, as a generalisation of private/public. Allowing finer grained inter-class access to member functions and member data.</strong></p><p>I believe this idiom could help maintainability/readability, as it adds additional facets to restrict interaction permissions.<br /> As with operating systems, where this adds an important layer of security to the system, the same familiar pattern could add safety to a C++ project.</p><h2>Thoughts about representation in C++</h2><p>However, I&#39;m at a loss of thinking of a good way to represent this. You could decompose <code>William</code> objects into several objects of subtypes: <code>William_Crew</code>, <code>William_William</code> and so forth, representing the respective groups. This seems to be horribly ugly. Another idea could be dedicated types with forwarder functions, representing the individual groups, like this:</p><pre><code>class Crew { // group class
  // in this group are:
  friend JeanLuc;
  friend Geordi;
  friend Beverly;
  // ...
  static Txt getRoster(William*);
};
class William {
  friend Crew; // Problem: Crew has full access (rwx)
  Txt roster;
};
</code></pre><p>But each group would have to be tailored to a particular class to be used with, which would seem to be massively redundant, if the group is used by several users/classes.</p><h2>Question</h2><p>The approaches I provided are not great (to put it mildly), and I&#39;m sure they wouldn&#39;t work as intended. I&#39;m not sure if this is a novel/stupid/well-known idea, but <strong>I wonder how you could implement this with the features provided by the C++ language</strong>. Are there objective arguments why this would or would not be useful/helpful?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Rephrasing the problem a bit:</p><ul><li>I have an instance of <code>MySpecialObject</code></li><li>an instance of <code>JLP</code> wants to call the methods of <code>MySpecialObject</code></li><li>an instance of <code>BEV</code> wants to read the public data of <code>MySpecialObject</code></li><li>the instance of JLP shouldn&#39;t be able to read public data and the <code>BEV</code> shouldn&#39;t be able to call member functions</li></ul><p>This should be as type-safe as possible.</p><p>A solution I see involves wrappers :)</p><ul><li>you write the code for <code>MySpecialObject</code> as you would normally, ignoring this extra requirement</li><li>you write a wrapper for each aspect of your class you wish to restrict. Say, <code>MySpecialObject_Read</code> and <code>MySpecialObject_Execute</code>.</li><li>these wrappers forward the requests (method calls, getter/setters) to an underlying <code>shared_ptr</code> of <code>MySpecialObject</code></li><li>your <code>MySpecialObject</code>, <code>MySpecialObject_Read</code> and <code>MySpecialObject_Execute</code> classes each have (as needed) a &#34;convert to ...&#34;  method. This method returns an appropriate wrapper over the underlying <code>MySpecialObject</code></li></ul><p>This solution provides a type-safe accessor with the desired limitations.</p><p>Each client class can choose what kind of access it needs.
(And since <strong>you</strong> write these classes, <strong>you</strong> know what access <strong>you</strong> need.) 
If that is not acceptable, you could add factories that only create wrappers with certain limitations depending on a &#34;token&#34;. That token might be the RTTI information of the calling class instance, although this could be abused.</p><p>Does this solve the original problem?</p><p>EDIT:</p><p>Remember that since you are the programmer you <strong>can</strong> instantiate an <code>A</code> whenever you want. By adding your class to a <code>friend</code> list or whatever...</p><p>What this solution provides is a clearer interface. Removing the explicit conversions probably makes it safer but less flexible. But, since they are explicit, you can easily look for them in the code and treat them as signs your architecture has a flaw somewhere.</p><p>Specifically, you can have code like this:</p><pre><code>shared_ptr&lt;A&gt; * a = new A(parameters);

A_read aRead(a);
A_execute aExec(a);
A_write aWrite(aExec);

logger-&gt;Log(aRead);
view-&gt;SetUserData(aWrite);
controller-&gt;Execute(aExec);
</code></pre><p>Here there is an explicit conversion between an execute wrapper and a write wrapper, but you can decide on this based on your specific requirements.</p><p>But, with little effort (knowing which conversions are valid), just by looking at the call locations you can see that (with confidence!):</p><ul><li>the <code>logger</code> will not change the state of your <code>A</code></li><li>the <code>view</code> will not call methods on your <code>A</code> (other than setters)</li></ul><p>This is true even if those particular method calls end up calling hundreds of other methods, more than you&#39;d like to examine by hand.</p><p>At the cost of a few thin wrappers you gain the ability to see at a glance what a particular function call will do with the parameters you send. This may help a lot during debugging by helping you eliminate some branches from your investigation and, in general, would help people trying to understand the program.</p><p>I couldn&#39;t really find other reasons for using this ACL idea, at least ones where the costs don&#39;t outweigh the benefits. However, it does seem more intuitive than the visitor solution mentioned in the other answer.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-should-i-use-friend-classes-in-c-to-allow-access-to-hidden-members/'>Object-oriented &#8211; Should I use friend classes in C++ to allow access to hidden members</a></li><li class="list-group-item"><a href='../design-how-to-handle-user-permissions-across-a-system/'>Design: How to handle user permissions across a system</a></li><li class="list-group-item"><a href='../c-member-vs-free-standing-functions-with-respect-to-interface-uniformity/'>C++ &#8211; Member vs. free-standing functions with respect to interface uniformity</a></li><li class="list-group-item"><a href='../managing-permissions-in-hierarchical-groups/'>Managing permissions in hierarchical groups</a></li><li class="list-group-item"><a href='../complex-roles-permissions-and-hierarchical-group-management-in-laravel/'>Complex roles, permissions and hierarchical group management in Laravel</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>