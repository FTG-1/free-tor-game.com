<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; How to better isolate JOGL or LWJGL3 dependency from game clients &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1085447 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1085447" class="post-1085447 software type-software status-publish hentry category-software tag-design-patterns tag-game-development tag-java tag-object-oriented-design tag-opengl"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; How to better isolate JOGL or LWJGL3 dependency from game clients</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span><span class="mr-2 badge badge-info">game development</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">object-oriented-design</span><span class="mr-2 badge badge-danger">opengl</span></p><div class="entry-content"><p>I&#39;m currently working on a project to develop a relatively small framework with the goal of supporting game development efforts for students in a course. The scope of this project is an OpenGL-based renderer and a 3D scene graph, and must be written in Java. (That&#39;s the course pre-req. for students.)</p><p>I&#39;m familiar with OpenGL and shader-based programming. I&#39;ve used <em>JOGL</em> and more recently <em>LWJGL3</em>. <strong>One important goal for me is to keep this library dependency hidden and student code ignorant of whatever decision I make here.</strong> However, I&#39;m having difficulty in this effort.</p><p>While using <em>JOGL</em> and <em>LWJGL3</em>, I&#39;ve noticed some key design decisions they&#39;ve made that, in turn, seem to make it more difficult to keep the dependency from being &#39;leaked&#39; to the client application.</p><p>The following is a list of <em>some</em> issues/trade-offs I&#39;ve identified for both of them:</p><ul><li><strong>JOGL &#8211; Pros</strong><ul><li>Integrates with swing/awt/etc. package components (e.g. can use a <code>JFrame</code> for the OpenGL context and <code>GLCanvas</code>)</li><li>Allows client application to implement, register, and react to <code>KeyListener</code>, <code>MouseListener</code>, and other interfaces (i.e. students/clients can use the same event-driven input handling methods they&#39;ve always used.)</li><li>Familiar &#39;environment&#39; for students (e.g. using a <code>GLCanvas</code> is no different from using a <code>Canvas</code>, etc.)</li></ul></li><li><p><strong>JOGL &#8211; Cons</strong></p><ul><li>Required implementation of <code>GLEventListener</code> limits where I can make OpenGL calls (not difficult to hide this <em>per se</em>, but client must be able to work with shaders, which internally require OpenGL calls, which requires a valid <code>gl</code> instance)</li><li>Required <code>GLAutoDrawable</code> object for OpenGL calls is another constraint (obj cannot be cached)</li><li><strong>Seems to force exposure of the <code>GLAutoDrawable</code> and related objects to client when its code needs to do something and we&#39;re not currently within the <code>display(GLAutoDrawable)</code> method override</strong> (e.g. client may want to do something like <code>shaderProgram.setAttributeValue(&#34;attribName&#34;, 0.5f);</code>, but instead has to do <code>shaderProgram.setAttributeValue(gl, &#34;attribName&#34;, 0.5f);</code>)</li></ul></li><li><p><strong>LWJGL3 &#8211; Pros</strong></p><ul><li>No requirement for special objects (e.g. <code>GLAutoDrawable</code>) or interface restricting where/when OpenGL calls can be made.</li><li>Allows me flexibility in designing the client-visible APIs.</li></ul></li><li><strong>LWJGL3 &#8211; Cons</strong><ul><li>Uses GLFW, with its own Window management API &amp; is incompatible with Java AWT components (e.g. cannot register <code>KeyListener</code>, <code>MouseListener</code>, etc.)</li><li>It&#39;s callback-based (i.e. must use <code>glfwPollEvents()</code>, <code>GLFWKeyCallback</code>, etc)</li><li><strong>Seems to force exposure of the input-handling callbacks and related objects/functions to client</strong> (e.g. if client wants to exit, must  define/use <code>GLFWKeyCallback</code>, check <code>GLFW_KEY_ESCAPE</code>, <code>glfwSetWindowShouldClose(...)</code></li></ul></li></ul><p>For example, to expand a bit more on the <strong>bold</strong> entries. The client may want to do something like <code>shaderProgram.setAttributeValue(&#34;attribName&#34;, 0.5f);</code>, but instead would be forced to do <code>shaderProgram.setAttributeValue(gl, &#34;attribName&#34;, 0.5f);</code> after calling <code>drawable.getGL()</code> when using JOGL.</p><p>On the other hand, when using LWJGL3, if the client wants to handle inputs, it would be forced to do something similar to the code snippet below instead of just being able to react to a <code>keyPressed</code> event by implementing a <code>KeyListener</code>.</p><pre><code>glfwSetKeyCallback(window, keyCallback = new GLFWKeyCallback() {
    @Override
    public void invoke(long window, int key, int scancode, int action, int mods) {
        if (key == GLFW_KEY_ESCAPE &amp;&amp; action == GLFW_RELEASE) {
            glfwSetWindowShouldClose(window, GL_TRUE);
        }
    }
});
</code></pre><p>A few other things I&#39;ve considered include the following:</p><ul><li>(LWJGL3) Using the adapter design pattern to hide away the input management of LWJGL3, but this seems to be a significant amount of effort &amp; complication (e.g. map each <code>GLFW_KEY_*</code> to some <code>KeyEvent.VK_*</code> constant) just for a start</li><li>(LWJGL3) The above would have to be provided as classes rather than interfaces b/c the callback objects would need to be contained (e.g. <code>GLFWKeyCallback</code>) to then deal with the behavior</li><li>(LWJGL3) A lot of complication/overhead just to handle inputs?&#8230;</li><li>(JOGL) Since the use of the <code>GLAutoDrawable</code> instance can/must not be cached (JOGL manages that internally and docs state your cached reference can become invalid, causing hard-to-track client crashes), perhaps in some way &#39;caching&#39; calls made by client (e.g. <code>shaderProgram.setAttributeValue(...)</code> and then wait until code is running within <code>display(...)</code> override to <em>apply</em> requested changes, which would add complication and room for bugs that I&#39;d rather live without, etc. (wouldn&#39;t even know where/how to start here)</li><li>Thought about <em>libGDX</em>, but that seems a lot more complicated than what I need, and still uses GLFW internally just like LWJGL3.</li></ul><p>Things that I&#39;d find helpful from you guys/gals out there:</p><ul><li>Thoughts on how you&#39;d deal with this situation</li><li><strong>Concrete</strong> examples that clearly illustrates your point (i.e. code/pseudo-code is fine, just looking for more than &#34;just do X&#34;-type of responses)</li><li>The more detail you&#39;re able/willing to provide, the better-er 🙂</li></ul><p>I&#39;ll update/clarify my original post as necessary if there&#39;re questions.</p><p>Thanks to everyone in advance.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I am working on my own Java 3D engine with LWJGL which leads me to my answer below. I don&#39;t know much about JOGL.</p><p>Both LWJGL and JOGL are just Java bindings to accomplish the same thing, which is to call native code that changes the OpenGL state of the current context. For example, in the <strong>current thread</strong>, a call in LWJGL to <strong>glCreateProgram()</strong> will call the native version of <strong>glCreateProgram()</strong>, while a call in the JOGL version <strong>GL2ES2.glCreateProgram()</strong> (or whatever it may be) does the exact same thing. Knowing this, you may be able to combine the capabilities wanted from both frameworks.</p><p>As I know, a single thread in any application has only one OpenGL context associated with it, so ensure that anything that has to do with OpenGL is called within the same thread, and you should be fine to use both.</p><p>In your case, you can try using JOGL for the GUI aspect, and LWJGL for the raw OpenGL calls that you require.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-how-is-the-facade-pattern-different-from-abstraction-layers/'>Php &#8211; How is the facade pattern different from abstraction layers</a></li><li class="list-group-item"><a href='../opengl-extension-vs-opengl-core/'>OpenGL extension vs OpenGL core</a></li><li class="list-group-item"><a href='../rest-role-based-rest-api/'>Rest &#8211; Role-based REST API</a></li><li class="list-group-item"><a href='../c-what-design-pattern-best-suits-managing-handles-to-objects-without-passing-handles-or-manager-around/'>C++ &#8211; What design pattern best suits managing handles to objects, without passing handles or Manager around</a></li><li class="list-group-item"><a href='../glfw-in-relation-to-opengl/'>GLFW in relation to OpenGL</a></li><li class="list-group-item"><a href='../how-to-prevent-dependency-injection-from-killing-object-oriented-programming/'>How to prevent dependency injection from killing object oriented programming</a></li><li class="list-group-item"><a href='../design-opengl-and-global-state/'>Design &#8211; OpenGL and global state</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>