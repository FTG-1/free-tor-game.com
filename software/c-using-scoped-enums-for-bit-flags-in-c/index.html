<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Using scoped enums for bit flags in C++ &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063165 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063165" class="post-1063165 software type-software status-publish hentry category-software tag-bitwise-operators tag-c tag-c11 tag-enum"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Using scoped enums for bit flags in C++</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">bitwise-operators</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">c++11</span><span class="mr-2 badge badge-primary">enum</span></p><div class="entry-content"><p>An <code>enum X : int</code> (C#) or <code>enum class X : int</code> (C++11) is a type that has a hidden inner field of <code>int</code> that can hold any value. In addition, a number of predefined constants of <code>X</code> are defined on the enum. It is possible to cast the enum to its integer value and vice versa. This is all true in both C# and C++11.</p><p>In C# enums are not only used to hold individual values, but also to hold bitwise combinations of flags, as per <a href="http://msdn.microsoft.com/en-us/library/vstudio/cc138362.aspx" rel="noreferrer">Microsoft&#39;s recommendation</a>. Such enums are (usually, but not necessarily) decorated with the <code>[Flags]</code> attribute. To make the lives of developers easier, the bitwise operators (OR, AND, etc&#8230;) are overloaded so that you can easily do something like this (C#):</p><pre class="lang-csh prettyprint-override"><code>void M(NumericType flags);

M(NumericType.Sign | NumericType.ZeroPadding);
</code></pre><p>I am an experienced C# developer, but have been programming C++ only for a couple of days now, and I am not known with the C++ conventions. I intend to use a C++11 enum in the exact same way as I was used to do in C#. In C++11 the bitwise operators on scoped enums are not overloaded, so <a href="https://stackoverflow.com/q/15889414/146622">I wanted to overload them</a>.</p><p>This solicited a debate, and opinions seem to vary between three options:</p><ol><li><p>A variable of the enum type is used to hold the bit field, similar to C#:</p><pre class="lang-cpp prettyprint-override"><code>void M(NumericType flags);

// With operator overloading:
M(NumericType::Sign | NumericType::ZeroPadding);

// Without operator overloading:
M(static_cast&lt;NumericType&gt;(static_cast&lt;int&gt;(NumericType::Sign) | static_cast&lt;int&gt;(NumericType::ZeroPadding)));
</code></pre><p>But this would counter the strongly typed enum philosophy of C++11&#39;s scoped enums.</p></li><li><p>Use a plain integer if you want to store a bitwise combination of enums:</p><pre class="lang-cpp prettyprint-override"><code>void M(int flags);

M(static_cast&lt;int&gt;(NumericType::Sign) | static_cast&lt;int&gt;(NumericType::ZeroPadding));
</code></pre><p>But this would reduce everything to an <code>int</code>, leaving you with no clue as to which type you&#39;re supposed to put in the method.</p></li><li><p>Write a separate class that will overload operators and hold the bitwise flags in a hidden integer field:</p><pre class="lang-cpp prettyprint-override"><code>class NumericTypeFlags {
    unsigned flags_;
public:
    NumericTypeFlags () : flags_(0) {}
    NumericTypeFlags (NumericType t) : flags_(static_cast&lt;unsigned&gt;(t)) {}
    //...define BITWISE test/set operations
};

void M(NumericTypeFlags flags);

M(NumericType::Sign | NumericType::ZeroPadding);
</code></pre><p><sup>(<a href="http://ideone.com/JhNzFA" rel="noreferrer">full code</a> by <a href="https://stackoverflow.com/a/15889887/146622">user315052</a>)</sup></p><p>But then you have no IntelliSense or whatever support to hint you at the possible values.</p></li></ol><p>I know this is a <a href="http://blog.stackoverflow.com/2010/09/good-subjective-bad-subjective/">subjective question</a>, but: <strong>What approach should I use? What approach, if any, is the most widely recognized in C++? What approach do you use when dealing with bit fields and <em>why</em>?</strong></p><p>Of course since all three approaches work, I&#39;m looking for factual and technical reasons, generally accepted conventions, and not simply personal preference.</p><p>For example, because of my C# background I tend to go with approach 1 in C++. This has the added benefit that my development environment can hint me on the possible values, and with overloaded enum operators this is easy to write and understand, and quite clean. And the method signature shows clearly what kind of value it expects. But most people <a href="https://stackoverflow.com/q/15889414/146622">here</a> disagree with me, probably for good reason.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The simplest way is to provide the operator overloads yourself.
I am thinking of creating a macro to expand the basic overloads per type.</p><pre><code>#include &lt;type_traits&gt;

enum class SBJFrameDrag
{
    None = 0x00,
    Top = 0x01,
    Left = 0x02,
    Bottom = 0x04,
    Right = 0x08,
};

inline SBJFrameDrag operator | (SBJFrameDrag lhs, SBJFrameDrag rhs)
{
    using T = std::underlying_type_t &lt;SBJFrameDrag&gt;;
    return static_cast&lt;SBJFrameDrag&gt;(static_cast&lt;T&gt;(lhs) | static_cast&lt;T&gt;(rhs));
}
    
inline SBJFrameDrag&amp; operator |= (SBJFrameDrag&amp; lhs, SBJFrameDrag rhs)
{
    lhs = lhs | rhs;
    return lhs;
}
</code></pre><p>(Note that <a href="https://en.cppreference.com/w/cpp/header/type_traits" rel="nofollow noreferrer">type_traits</a> is a C++11 header and <a href="https://en.cppreference.com/w/cpp/types/underlying_type" rel="nofollow noreferrer">std::underlying_type_t</a> is a C++14 feature.)</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-enum-with-flagsattribute-or-ienumerable-iset/'>C# &#8211; Enum with FlagsAttribute or IEnumerable<Enum>/ISet<T></a></li><li class="list-group-item"><a href='../constants-enums-in-api/'>Constants/enums in API</a></li><li class="list-group-item"><a href='../java-enums-in-java-switch-statements-and-completeness/'>Java &#8211; Enums in java switch-statements and completeness</a></li><li class="list-group-item"><a href='../c-do-enums-create-brittle-interfaces/'>C++ &#8211; Do enums create brittle interfaces</a></li><li class="list-group-item"><a href='../java-is-it-okay-to-go-against-all-caps-naming-for-enums-to-make-their-string-representation-simpler/'>Java &#8211; Is it okay to go against all-caps naming for enums to make their String representation simpler</a></li><li class="list-group-item"><a href='../c-is-it-wrong-to-use-flags-for-grouping-enums/'>C# &#8211; Is it wrong to use flags for &#8220;grouping&#8221; enums</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>