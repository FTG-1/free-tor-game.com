<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Designing an easily extensible XML driven OOP system &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086845 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086845" class="post-1086845 software type-software status-publish hentry category-software tag-object-oriented tag-xml"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Designing an easily extensible XML driven OOP system</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">object-oriented</span><span class="mr-2 badge badge-info">xml</span></p><div class="entry-content"><p>I&#39;ve been working on a project that is very data-driven (a checkers board game with customizable rules; I&#39;m using XML for the data storage). I need a design that is easy to extend as we add new features to the project via new XML tags.</p><p>My XML schema looks like this for a win condition (checkers):</p><pre><code>&lt;game&gt;
   &lt;winconditions&gt;
      &lt;condition winner=&#34;Black&#34;&gt;
         &lt;Pieces color=&#34;Red&#34; number=&#34;0&#34; /&gt;
      &lt;/condition&gt;
      &lt;condition winner=&#34;Red&#34;&gt;
         &lt;Pieces color=&#34;Black&#34; number=&#34;0&#34; /&gt;
      &lt;/condition&gt;
   &lt;/winconditions&gt;
&lt;/game&gt;
</code></pre><p><code>&lt;game&gt;</code> is the root element. There are other major sections such as <code>&lt;board&gt;</code> which defines the size and shape of the board and placement of the pieces, and <code>&lt;moves&gt;</code> which defines how pieces move. The idea is to have several &#34;options&#34; that combine to form a &#34;condition&#34; &#8211; if all &#34;options&#34; are true, the &#34;condition&#34;&#39;s evaluation returns a winner.</p><p>Right now, the best strategy I have come up with is to create a package for the tag processing classes:</p><pre><code>processors
   pieces
</code></pre><p>And an interface to a win condition option:</p><pre><code>public interface WinConditionOption {
   void setParameters(HashMap&lt;String, String&gt; args);
   boolean evaluate(GameState state);
}
</code></pre><p>The file processor, when it sees a tag inside the <code>&lt;winconditions&gt;</code> tag, uses reflection to look up the corresponding class and calls it using the interface. So the <code>Pieces</code> tag causes a <code>Pieces</code> object to be created and <code>setAttributes()</code> is called with the tag&#39;s attributes. When we check for a win, <code>evaluate()</code> is called with the current state of the game. <code>Pieces</code> would evaluate whether the number of pieces belonging to that player was a certain number, 0 in this case (no pieces left).</p><p>Is this a good design? Is there a better way to do it and still be able to write minimal new code to add a new win option?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The design you indicated is missing an important feature - flexible XML formatting of new conditions.  Based on your post, this wouldn&#39;t be possible:</p><pre><code>&lt;condition ...&gt;
    &lt;pieceCombos&gt;
        &lt;combo&gt;...&lt;/combo&gt;
        &lt;combo&gt;...&lt;/combo&gt;
    &lt;/pieceCombos&gt;
&lt;/condition&gt;
</code></pre><p>An better way would be to have each of these classes know how to read (and write) their own information from the appropriate xml element.  So something like this could be cleaner and more flexible:</p><pre><code>// This abstracts away specific methods of reading from xml.
public class YourXmlHandler
{
    ...
    GetChildElement(int index);
    GetAttribute(int index);
    ...
}

public interface IXmlReadable
{
    void LoadFromXml(YourXmlHandler reader);
}

public interface IWinOption
{
    bool Evaluate();
}
</code></pre><p>This allows you to reuse the IXmlReadable interface for anything affected by the XML content.  It leaves the win option separate for the items that must be Wins.</p><p>You may end up with a WinConditions class that knows to read multiple WinCondition entries from the XML and a Pieces class that knows how to read its data.  The WinCondition class knows exactly what it wants from the XML and just gets it or throws a meaningful exception.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-module-system-for-oop-language/'>Object-oriented &#8211; Module system for OOP language</a></li><li class="list-group-item"><a href='../object-oriented-a-simple-process-for-designing-an-oop-system-before-coding-it/'>Object-oriented &#8211;  a simple process for designing an OOP system before coding it</a></li><li class="list-group-item"><a href='../object-oriented-designing-a-card-game/'>Object-oriented &#8211; Designing a card game</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>