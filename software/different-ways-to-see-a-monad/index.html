<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Different ways to see a monad &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070112 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070112" class="post-1070112 software type-software status-publish hentry category-software tag-functional-programming tag-haskell tag-monad tag-side-effect"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Different ways to see a monad</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">functional programming</span><span class="mr-2 badge badge-info">haskell</span><span class="mr-2 badge badge-warning">monad</span><span class="mr-2 badge badge-primary">side-effect</span></p><div class="entry-content"><p>While learning Haskell I have faced a lot of tutorials trying to explain what are monads and why monads are important in Haskell. Each of them used analogies so it would be easier to catch the meaning.<br /> At the end of the day, I have end up with 3 differents view of what a monad is:</p><p><strong>View 1: Monad as a label</strong></p><p>Sometimes I think that a monad as a label to a specific type.<br /> For example, a function of type:</p><pre><code>myfunction :: IO Int
</code></pre><p>myfunction is a function that whenever is performed it will yield an Int value.<br /> The type of the result is not Int but IO Int. So, IO is a label of the Int value warning the user to know that the Int value is the result of a process where a IO action has been made.</p><p>Consequently, this Int value has been marked as value that came from a process with IO therefore this value is &#34;dirty&#34;. Your process is not pure anymore.</p><p><strong>View 2: Monad as a private space where nasty things can happen.</strong></p><p>In a system where all the process are pure and strict sometimes you need to have side-effects. So, a monad is just a little space that is allow to you for doing nasty side-effects.<br /> In this space your are allow to escape the pure world, go the impure, make your process and then come back with a value.</p><p><strong>View 3: Monad as in category theory</strong></p><p>This is the view that I don&#39;t fully understand.<br /> A monad is just a functor to the same category or a sub-category.<br /> For example, you have the Int values and as a subcategory IO Int, that are the Int values generated after a IO process.</p><p><strong>Are these views correct? Which is more accurate?</strong></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Views #1 and #2 are incorrect in general.</p><ol><li>Any data-type of kind <code>* -&gt; *</code> can work as a label, monads are much more than that.</li><li>(With the exception of the <code>IO</code> monad) computations within a monad are not impure. They simply represent computations that we perceive as having side effects, but they&#39;re pure.</li></ol><p>Both these misunderstandings come from focusing on the <code>IO</code> monad, which is actually a bit special.</p><p>I&#39;ll try to elaborate on #3 a bit, without getting into category theory if possible.</p><hr/><p><strong>Standard computations</strong></p><p>All computations in a functional programming language can be viewed as functions with a source type and a target type: <code>f :: a -&gt; b</code>. If a function has more than one argument, we can convert it to an one-argument function by <a href="https://en.wikipedia.org/wiki/Currying" rel="noreferrer">currying</a> (see also <a href="http://www.haskell.org/haskellwiki/Currying" rel="noreferrer">Haskell wiki</a>). And if we have just a value <code>x :: a</code> (a function with 0 arguments), we can convert it into a function that takes an argument of the <a href="https://en.wikipedia.org/wiki/Unit_type" rel="noreferrer">unit type</a>: <code>(\_ -&gt; x) :: () -&gt; a</code>.</p><p>We can build more complex programs form simpler ones by composing such functions using the <code>.</code> operator. For example, if we have <code>f :: a -&gt; b</code> and <code>g :: b -&gt; c</code> we get <code>g . f :: a -&gt; c</code>. Note that this works for our converted values too: If we have <code>x :: a</code> and convert it into our representation, we get <code>f . ((\_ -&gt; x) :: () -&gt; a) :: () -&gt; b</code>.</p><p>This representation has some very important properties, namely:</p><ul><li>We have a very special function - the <em>identity</em> function <code>id :: a -&gt; a</code> for each type <code>a</code>. It is an <a href="https://en.wikipedia.org/wiki/Left_identity" rel="noreferrer">identity element</a> with respect to <code>.</code>: <code>f</code> is equal both to <code>f . id</code> and to <code>id . f</code>.</li><li>The function composition operator <code>.</code> is <a href="https://en.wikipedia.org/wiki/Associativity" rel="noreferrer">associative</a>.</li></ul><p><strong>Monadic computations</strong></p><p>Suppose we want to select and work with some special category of computations, whose result contains something more than just the single return value. We don&#39;t want to specify what &#34;something more&#34; means, we want to keep things as general as possible. The most general way to represent &#34;something more&#34; is representing it as a type function - a type <code>m</code> of kind <code>* -&gt; *</code> (i.e. it converts one type to another). So for each category of computations we want to work with, we&#39;ll have some type function <code>m :: * -&gt; *</code>. (In Haskell, <code>m</code> is <code>[]</code>, <code>IO</code>, <code>Maybe</code>, etc.) And the category will contains all functions of types <code>a -&gt; m b</code>.</p><p>Now we would like to work with the functions in such a category in the same way as in the basic case. We want to be able to compose these functions, we want the composition to be associative, and we want to have an identity. We need:</p><ul><li>To have an operator (let&#39;s call it <code>&lt;=&lt;</code>) that composes functions <code>f :: a -&gt; m b</code> and <code>g :: b -&gt; m c</code> into something as <code>g &lt;=&lt; f :: a -&gt; m c</code>. And, it must be associative.</li><li>To have some identity function for each type, let&#39;s call it <code>return</code>. We also want that <code>f &lt;=&lt; return</code> is the same as <code>f</code> and the same as <code>return &lt;=&lt; f</code>.</li></ul><p>Any <code>m :: * -&gt; *</code> for which we have such functions <code>return</code> and <code>&lt;=&lt;</code> is called a <strong>monad</strong>. It allows us to create complex computations from simpler ones, just as in the basic case, but now the types of return values are tranformed by <code>m</code>.</p><p>(Actually, I slightly abused the term <em>category</em> here. In the category-theory sense we can call our construction a category only after we know it obeys these laws.)</p><p><strong>Monads in Haskell</strong></p><p>In Haskell (and other functional languages) we mostly work with values, not with functions of types <code>() -&gt; a</code>. So instead of defining <code>&lt;=&lt;</code> for each monad, we define a function <code>(&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b</code>. Such an alternative definition is equivalent, we can express <code>&gt;&gt;=</code> using <code>&lt;=&lt;</code> and vice versa (try as an exercise, or see <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Control-Monad.html#%3C%3D%3C" rel="noreferrer">the sources</a>). The principle is less obvious now, but it remains the same: Our results are always of types <code>m a</code> and we compose functions of types <code>a -&gt; m b</code>.</p><p>For each monad we create, we must not forget to check that <code>return</code> and <code>&lt;=&lt;</code> have the properties we required: associativity and left/right identity. Expressed using <code>return</code> and <code>&gt;&gt;=</code> they are called <a href="http://www.haskell.org/haskellwiki/Monad_Laws" rel="noreferrer">the monad laws</a>.</p><p><strong>An example - lists</strong></p><p>If we choose <code>m</code> to be <code>[]</code>, we get a category of functions of types <code>a -&gt; [b]</code>. Such functions represent non-deterministic computations, whose results could be one or more values, but also no values. This gives rise to the so-called <a href="https://en.wikibooks.org/wiki/Haskell/Understanding_monads/List" rel="noreferrer">list monad</a>. The composition of <code>f :: a -&gt; [b]</code> and <code>g :: b -&gt; [c]</code> works as follows: <code>g &lt;=&lt; f :: a -&gt; [c]</code> means to compute all possible results of type <code>[b]</code>, apply <code>g</code> to each of them, and collect all the results in a single list. Expressed in Haskell</p><pre><code>return :: a -&gt; [a]
return x = [x]
(&lt;=&lt;) :: (b -&gt; [c]) -&gt; (a -&gt; [b]) -&gt; (a -&gt; [c])
g (&lt;=&lt;) f  = concat . map g . f
</code></pre><p>or using <code>&gt;&gt;=</code></p><pre><code>(&gt;&gt;=) :: [a] -&gt; (a -&gt; [b]) -&gt; [b]
x &gt;&gt;= f  = concat (map f x)
</code></pre><p>Note that in this example the return types were <code>[a]</code> so it was possible that they didn&#39;t contain any value of type <code>a</code>. Indeed, there is no such requirement for a monad that the return type should have such values. Some monads always have (like <code>IO</code> or <code>State</code>), but some don&#39;t, like <code>[]</code> or <code>Maybe</code>.</p><p><strong>The IO monad</strong></p><p>As I mentioned, the <code>IO</code> monad is somewhat special. A value of type <code>IO a</code> means <em>a value of type <code>a</code> constructed by interacting with the program&#39;s environment.</em> So (unlike all the other monads), we cannot describe a value of type <code>IO a</code> using some pure construction. Here <code>IO</code> is simply a tag or a label that distinguishes computations that interact with the environment. This is (the only case) where the views #1 and #2 are correct.</p><p>For the <code>IO</code> monad:</p><ul><li>Composition of <code>f :: a -&gt; IO b</code> and <code>g :: b -&gt; IO c</code> means: Compute <code>f</code> that interacts with the environment, and <em>then</em> compute <code>g</code> that uses the value and computes the result interacting with the environment.</li><li><code>return</code> just adds the <code>IO</code> &#34;tag&#34; to the value (we simply &#34;compute&#34; the result by keeping the environment intact).</li><li>The monad laws (associativity, identity) are guaranteed by the compiler.</li></ul><p>Some notes:</p><ol><li>Since monadic computations always have the result type of <code>m a</code>, there is no way how to &#34;escape&#34; from the <code>IO</code> monad. The meaning is: Once a computation interacts with the environment, you cannot construct a computation from it that doesn&#39;t.</li><li>When a functional programmer doesn&#39;t know how to make something in a pure way, (s)he can (as the <em>last</em> resort) program the task by some stateful computation within the <code>IO</code> monad. This is why <code>IO</code> is often called a programmer&#39;s <em>sin bin</em>.</li><li>Notice that in an impure world (in the sense of functional programming) reading a value can change the environment too (like consume user&#39;s input). That&#39;s why functions like <code>getChar</code> must have a result type of <code>IO something</code>.</li></ol></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../critique-of-the-io-monad-being-viewed-as-a-state-monad-operating-on-the-world/'>Critique of the IO monad being viewed as a state monad operating on the world</a></li><li class="list-group-item"><a href='../why-does-a-monad-use-return-or-unit-rather-than-lift/'>Why does a monad use &#8220;return&#8221; or &#8220;unit&#8221; rather than &#8220;lift&#8221;</a></li><li class="list-group-item"><a href='../alternative-to-language-purity/'>Alternative to language purity</a></li><li class="list-group-item"><a href='../python-is-the-benefit-of-the-io-monad-pattern-for-handling-side-effects-purely-academic/'>Python &#8211; Is the benefit of the IO monad pattern for handling side effects purely academic</a></li><li class="list-group-item"><a href='../javascript-minimal-programmers-definition-of-a-monad/'>Javascript &#8211; Minimal programmer&#8217;s definition of a monad</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>