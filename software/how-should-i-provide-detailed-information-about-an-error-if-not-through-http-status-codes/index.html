<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How should I provide detailed information about an error, if not through HTTP status codes &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082951 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082951" class="post-1082951 software type-software status-publish hentry category-software tag-api tag-error-handling tag-error-messages tag-http tag-protocol"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How should I provide detailed information about an error, if not through HTTP status codes</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">error handling</span><span class="mr-2 badge badge-warning">error messages</span><span class="mr-2 badge badge-primary">http</span><span class="mr-2 badge badge-danger">protocol</span></p><div class="entry-content"><blockquote><p>This question comes from <a href="https://softwareengineering.stackexchange.com/q/273462/6605">here</a>. I believe it deserves to be on its own instead of being lost in a long question with multiple points.</p></blockquote><p>I&#39;m building an API and find myself limited by HTTP error codes. They are just:</p><ul><li><p>Not specific enough (example: HTTP 403 Forbidden to indicate that the price is outside of the allowed range and the same HTTP 403 Forbidden to indicate that the identifier of the product has a wrong format), and at the same time:</p></li><li><p>Many of them are useless in my case (example: HTTP 402 Payment Required).</p></li></ul><p>Specifically when exceptions are encountered, can I use my own HTTP response codes? If not, what are my options if I want to provide the client with information more specific than “HTTP 500 Sorry we failed but we won&#39;t tell you why”?</p><p>Note: I develop the server and the client at the same time, so there would be no other clients accessing the API.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Don&#39;t invent status codes</h2><p>You are not expected to invent your own response codes, since the point of the API is to use a standard interface any developer can understand.</p><p>The fact that you maintain both the API and its client is irrelevant: since everyone can trace the calls to the API, everyone can implement a different client. The point of using standard interfaces is also:</p><ul><li><p>To facilitate maintenance. If your app should later be maintained by your coworker, he can find his way with ease. He will be lost if it appears that HTTP 306 means success, HTTP 500 is a “Not found” and HTTP 909 is “Internal Server Error”, unless the error is a <code>FileNotFound</code> exception, in which case it&#39;s HTTP 404.</p></li><li><p>To facilitate the work of your system administrator. Tools which deal with server logs use status codes to determine whether this is a error or not. Two concrete examples are:</p><ol><li><p>The displaying of the number of errors (HTTP 4xx and HTTP 5xx) for a given server and:</p></li><li><p>The tracking of hacking attempts. For instance, when I see a hacking attempt which results in HTTP 200, this immediately attracts my attention: it should be HTTP 4xx instead.</p></li></ol></li><li><p>To avoid messing with your HTTP server. IIS, for instance, can easily be offended by some status codes, will catch them and generate its own responses. Configuring both your app and IIS is not always easy (and I&#39;ve spent several days banging my head with this issue when I started programming ASP.NET websites).</p></li><li><p>To avoid problems with proxies. For instance, if your API is hosted on a server accessed through Nginx, I&#39;m not sure sysadmins will be happy to spend a few hours redoing all the configuration for your app.</p><p>A basic example. When configuring failover, I use <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream"><code>proxy_next_upstream</code></a> directive which indicates in which cases Nginx should switch to the failover machine. Looking at the documentation, I have an impression that you can&#39;t set the directive to, say, HTTP 200, so if your API uses <code>HTTP 200</code> as “Fatal error, all data was corrupted so you may be better using another mirror”, you&#39;re out of luck.</p></li><li><p>To avoid reinventing the wheel. Why would you waste your time standardizing your set codes, while there is already one?</p></li><li><p>To leverage support from many tools. For instance, <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream">Fiddler</a> relies on HTTP response code to colorize the items. I&#39;m not sure if it&#39;s easy to configure it to use different statuses. In the same way, different API testing tools may rely on status codes as well (while CURL, conveniently, couldn&#39;t care less about the response status, Python&#39;s <code>requests</code> package, for instance, will do a redirection in a presence of HTTP 3xx code).</p></li></ul><p>By the way, browsers themselves interpret the response code:</p><ul><li><p>AJAX requests returning HTTP 3xx may lead to automatic redirection.</p></li><li><p>HTTP 4xx and HTTP 5xx are displayed in red in browsers&#39; developer tools.</p></li></ul><h2>Provide additional information</h2><p>The response code other than HTTP 200 doesn&#39;t mean that you can&#39;t feed the client with JSON as well (unless it&#39;s HTTP 204, in which case there should be no content). This means that you&#39;re free to give as much information as you want to the client through JSON. Personally, I include:</p><ul><li><p>The ID of the error in a form of a string. For instance <code>price-range-invalid</code> or <code>product-not-found</code>.</p></li><li><p>The URI containing additional help, when relevant (when the API is large enough to contain individual pages for every error message). For instance <a href="http://example.com/api/v1/errors/price-range-invalid">http://example.com/api/v1/errors/price-range-invalid</a>.</p></li><li><p>The description. For instance “The current price is outside the allowed range. It should be superior to 0 and inferior or equal to 50000.”.</p></li></ul><p>See also how other APIs handle the errors and what sort of information they provide. For instance, this is how Google+ API errors look like:</p><pre><code>HTTP 403

{
 &#34;error&#34;: {
  &#34;errors&#34;: [
   {
    &#34;domain&#34;: &#34;usageLimits&#34;,
    &#34;reason&#34;: &#34;ipRefererBlocked&#34;,
    &#34;message&#34;: &#34;There is a per-IP or per-Referer restriction configured on your API key and the request does not match these restrictions. Please use the Google Developers Console to update your API key configuration if request from this IP or referer should be allowed.&#34;,
    &#34;extendedHelp&#34;: &#34;https://console.developers.google.com&#34;
   }
  ],
  &#34;code&#34;: 403,
  &#34;message&#34;: &#34;There is a per-IP or per-Referer restriction configured on your API key and the request does not match these restrictions. Please use the Google Developers Console to update your API key configuration if request from this IP or referer should be allowed.&#34;
 }
}
</code></pre><h2>Don&#39;t provide too much information</h2><p>Finally, make sure you <strong>don&#39;t include the exception itself in the details</strong>, since it may contain sensitive information and represent a path for a hacker to explore (including the stack trace).</p><p>For instance, some PHP websites, when encountering a database related error, just show the SQL query and the error to the user. For a hacker, this is very convenient. For a legitimate user, this is just unfriendly and unhelpful. Don&#39;t do that.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../web-development-should-i-hide-certain-http-status-codes/'>Web-development &#8211; Should I hide certain HTTP status codes</a></li><li class="list-group-item"><a href='../should-i-use-http-status-codes-to-describe-application-level-events/'>Should I use HTTP status codes to describe application level events</a></li><li class="list-group-item"><a href='../rest-http-status-code-for-still-processing/'>Rest &#8211; HTTP Status Code for &#8220;Still Processing&#8221;</a></li><li class="list-group-item"><a href='../is-a-protocol-an-application/'>Is a protocol an application</a></li><li class="list-group-item"><a href='../rest-should-http-status-codes-be-used-to-represent-business-logic-errors-on-a-server/'>Rest &#8211; Should HTTP status codes be used to represent business logic errors on a server</a></li><li class="list-group-item"><a href='../java-spring4-error-handling-and-http-status-codes-returned-for-rest-services/'>Java &#8211; Spring4 error handling and HTTP status codes returned for REST services</a></li><li class="list-group-item"><a href='../should-a-rest-api-return-a-500-internal-server-error-to-indicate-that-a-query-references-an-object-that-does-not-exist/'>Should a REST API return a 500 Internal Server Error to indicate that a query references an object that does not exist</a></li><li class="list-group-item"><a href='../what-should-be-the-http-status-code-for-service-not-available-in-your-area-error/'>What should be the http status code for &#8220;Service not available in your area&#8221; error</a></li><li class="list-group-item"><a href='../java-rest-api-design-in-case-of-partial-success/'>Java &#8211; Rest API Design in case of partial success</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>