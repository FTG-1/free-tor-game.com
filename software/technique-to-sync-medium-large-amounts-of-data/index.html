<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Technique to sync medium/large amounts of data &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078804 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078804" class="post-1078804 software type-software status-publish hentry category-software tag-synchronization"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Technique to sync medium/large amounts of data</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">synchronization</span></p><div class="entry-content"><p>I implemented sync for my app (with a REST backend), it works well but there are some problems:</p><ol><li>Blocks &#8211; Since I don&#39;t want to overwrite possible inputs of the user during sync, I block the UI (progress overlay) during sync. This of course affects negatively the user experience.</li><li>Size &#8211; If the data is large the request may take a lot and there may also be out of memory errors processing the response.</li></ol><p>So I&#39;m thinking how to improve this. For point 2, I thought to simply paginate the request, i.e. send how many entries I want and a reference date (e.g. creation date) to make the database query simpler.</p><p>But point 1 is a problem independently what I do for point 2, as long as the user can manipulate data during sync, there&#39;s a possibility this this data will be overwritten with the sync result. I could for example lock the client database during sync, such that only the sync process can write to it, and queue the client operations, but what happens when these operations try to e.g. increment some data which was just changed by sync and this leads to a different result than what the client intended to do.</p><p>My app is about personal grocery management so the requirements are not super strict, if an update is lost or something it&#39;s not tragic. I&#39;m looking for a balanced solution, which is easy to implement while keeping a fairly good UX.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>Blocks</strong></p><p>The problem you are referring to for scenario 1 is consistency, that is, having 2 stores holding the same information and needing them to be consistent.</p><p>In a distributed environment like this, optimistic concurrency can prevail, meaning, instead of locking, allow for anything to change at any time, and build-in a mechanism to track overlaps.</p><p>First step, is there any data which truly has overlaps?  Or is your data set truly just a set of items?  If the latter, then if you are in a situation where items can be added by any client, and they replicate down, then you simply need each client to keep track of which items have not yet been pushed.</p><p>If there can be overlaps, for example, you are managing documents (sounds unlikely), then you either have locking, or allow concurrent updates and flag overlaps as a problem to be resolved by the consumer.  Examples of this pattern:</p><ol><li>Software version control systems like git, mercurial, subversion, etc.</li><li>Evernote</li><li>Google Docs</li></ol><p>If you have ever worked with software version control, you&#39;ll recognize the idea of a merge conflict and/or overlap.  That is the same problem you have.  Source control systems like Vault avoid this problem by each client treating each file as read-only until a file is &#34;checked out&#34;, which creates a mutually exclusive lock across all clients.  Git, on the other hand, will identify conflicts, merge them if it can do so, and if not, force the end user (developer) to manually merge.</p><p>Evernote allows my wife and I to each edit our grocery list.  To minimize conflicts, we sync as often as possible, but there will always be a chance of us having conflicting changes, which has happened.  Evernote simply appends conflicting document versions on top of each other with markers indicating there was a conflict.</p><p>In a case where concurrent changes are rare, usually this sort of optimistic concurrency is ideal.  In a highly concurrent transaction system, locking may be a better approach.</p><p><strong>Size</strong></p><p>As far as data size, you have two options I can think of:</p><ol><li>Pagination</li><li>Streaming</li></ol><p>Pagination is probably the way I&#39;d go because it&#39;s simpler to code, usually, and easier to track your progress, and in a way, gives you more control.  With my recommendations for handling consistency above, hopefully pagination becomes a non-issue.</p><p>Streaming may be an alternative for you too and would reduce the risk when it comes to consistency since you&#39;d have a single round-trip.  Streaming basically means to change this data flow:</p><pre><code>results = getResultsFromServer();
for (result in results) {
  doSomething(result)
}
</code></pre><p>to:</p><pre><code>getResultsFromServer((result) =&gt; {
  doSomething(result)
})
</code></pre><p>In the former, the entire result set <em>must</em> be buffered so that you can iterate over it, even though you only consume the data one at a time in a forward-only manner.  In the latter, you only need one item at a time.  I implemented this approach once for a large report that would overwhelm our production servers when a customer ran it for a very large date range.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../solutions-for-ios-collaborative-sync-icloud-coredata-couchdb/'>Solutions for iOS collaborative sync (iCloud CoreData, CouchDB)</a></li><li class="list-group-item"><a href='../database-implementation-details-of-database-synchronisation-api/'>Database &#8211; Implementation details of database synchronisation API</a></li><li class="list-group-item"><a href='../rest-a-separate-endpoint-specifically-for-sync-in-a-rest-api/'>Rest &#8211; A separate endpoint specifically for sync in a REST api</a></li><li class="list-group-item"><a href='../whats-the-best-way-to-track-updates-when-syncing-data-from-mysql-remote-server-to-local-sqlite-database/'>What&#8217;s the best way to track updates when syncing data from MySQL remote server to local SQLite database</a></li><li class="list-group-item"><a href='../a-simple-approach-for-data-synchronisation/'>A simple approach for data synchronisation</a></li><li class="list-group-item"><a href='../c-how-to-perform-a-2-way-sync-from-many-client-applications-to-central-server/'>C# &#8211; How to perform a 2 way sync from many client applications to central server</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>