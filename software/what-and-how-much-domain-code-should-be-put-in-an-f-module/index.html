<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>What and how much domain code should be put in an F# module &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086040 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086040" class="post-1086040 software type-software status-publish hentry category-software tag-f tag-code-organization tag-domain-driven-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">What and how much domain code should be put in an F# module</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">%f</span><span class="mr-2 badge badge-info">code-organization</span><span class="mr-2 badge badge-warning">domain-driven-design</span></p><div class="entry-content"><p>According to recommendations given <a href="https://vimeo.com/97507575#t=25m0s" rel="nofollow noreferrer">here</a>, F# modules should correspond to DDD bounded contexts, i.e. subdivisions of a business domain.</p><p>The bounded context I&#39;m working on right now has 2 aggregates totalling a dozen of types, plus some rather complex functions/algorithms. If I follow the prescribed style, I end up with a 500+ LOC file, which IMO isn&#39;t very readable or navigatable, and it will only grow longer. Unfortunately, it seems F# modules <a href="https://stackoverflow.com/questions/793536/split-f-modules-across-multiple-files">can&#39;t be split across multiple files</a>.</p><p>Other solutions I&#39;ve attempted are :</p><ul><li>One module per aggregate. Problem &#8212; if I include the aggregate type in the module, I end up with an inelegant aggregate type name (e.g. <code>MyAggregate.MyAggregate</code>), especially when reused in non-F# .NET code.</li><li><p>One file with all the types of the bounded context under a particular <em>namespace</em> and another file containing the functions inside a module. Still not satisfying since in F# I can&#39;t give the same name to the module and namespace, and functions are not really organized inside the file.</p><pre><code>// This gives a &#34;namespace and module named ... both occur in 2 parts of this assembly&#34; error

//File1.fs

namespace MyProject.Domain.MyBC

type MyType = 
    // ...

//File2.fs

namespace MyProject.Domain

module MyBC = //...
</code></pre></li></ul><p>I&#39;m still looking for a solution that satisfies the following</p><ul><li>Meaningful organization of code reflecting DDD concepts, so that code lookup feels easy and obvious</li><li>Some degree of compartmentalization, to prevent native access to other unrelated parts of the domain and avoid mistakes</li><li>Low cognitive load to explore a file (meaning no more than a few hundred lines of code per file)</li><li>Simple, non contrived usage from external non-F# .NET code</li></ul><p>Have I missed the obvious way of doing it, or does the lack of partial modules + namespace/module collision just make them an awkward scope for DDD?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Having watched the section of the video you refer to, I don&#39;t see where Scott says a Bounded Context <em>should</em> correspond to a module.  He just happens to chose a module to represent the Bounded Context <em>in his example</em>.  There is absolutely no reason that a Bounded Context must correspond to a module.</p><p>If you feel your Bounded Context does not map well to a module, you are free to split it in whatever way you want.  It can as many modules and types as you want, partitioned by namespace(s), assembly or whatever else floats your boat.  All that matters is that the principles of a Bounded Context that you desire, are achieved.</p><p>With regards to file size and navigation, you could try <a href="http://fsprojects.github.io/VisualFSharpPowerTools/navigateto.html" rel="nofollow">Visual F# Power Tools Navigate To</a> feature.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-domain-objects-with-interfaces/'>Architecture &#8211; Domain Objects with Interfaces</a></li><li class="list-group-item"><a href='../is-ddd-not-appropriate-for-the-website-or-should-i-introduce-a-query-layer/'>Is DDD not appropriate for the website or should I introduce a Query Layer</a></li><li class="list-group-item"><a href='../where-should-i-put-the-domain-related-constants/'>Where should I put the domain related constants</a></li><li class="list-group-item"><a href='../sqlalchethe-and-ddd-its-own-pattern/'>SQLAlchethe and DDD: It&#8217;s own pattern</a></li><li class="list-group-item"><a href='../domain-events-cqrs-and-dependency-resolution-in-handlers/'>Domain Events, CQRS, and dependency resolution in handlers</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>