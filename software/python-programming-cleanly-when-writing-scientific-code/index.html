<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Python &#8211; Programming cleanly when writing scientific code &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064725 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064725" class="post-1064725 software type-software status-publish hentry category-software tag-clean-code tag-coding-style tag-python tag-python-3-x"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Python &#8211; Programming cleanly when writing scientific code</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">clean code</span><span class="mr-2 badge badge-info">coding-style</span><span class="mr-2 badge badge-warning">python</span><span class="mr-2 badge badge-primary">python-3.x</span></p><div class="entry-content"><p>I don&#39;t really write large projects. I&#39;m not maintaining a huge database or dealing with millions of lines of code.</p><p>My code is primarily &#34;scripting&#34; type stuff &#8211; things to test mathematical functions, or to simulate something &#8211; &#34;scientific programming&#34;. The longest programs I&#39;ve worked on up to this point are a couple hundred lines of code, and most of the programs I work on are around 150.</p><p>My code is also crap. I realized this the other day as I was trying to find a file I wrote a while ago but that I probably overwrote and that I don&#39;t use version control, which is probably making a large number of you cringe in agony at my stupidity.</p><p>The style of my code is convoluted and is filled with obsolete comments noting alternate ways to do something or with lines of code copied over. While the variable names always start out very nice and descriptive, as I add or change things as per e.g., something new that someone wants tested, code gets overlayed on top and overwritten and because I feel like this thing should be tested quickly now that I have a framework I start using crappy variable names and the file goes to pot.</p><p>In the project I&#39;m working on now, I&#39;m in the phase where all of this is coming back to bite me in a big way. But the problem is (aside from using version control, and making a new file for each new iteration and recording all of it in a text file somewhere, which will probably help the situation dramatically) I don&#39;t really know how to proceed with improving my actual coding style.</p><p>Is unit testing necessary for writing smaller pieces of code? How about OOP? What sorts of approaches are good for writing good, clean code quickly when doing &#34;scientific programming&#34; as opposed to working on larger projects?</p><p>I ask these questions because often, the programming itself isn&#39;t super complex. It&#39;s more about the math or science that I&#39;m testing or researching with the programming. E.g., is a class necessary when two variables and a function could probably take care of it? (Consider these are also generally situations where the program&#39;s speed is preferred to be on the faster end &#8211; when you&#39;re running 25,000,000+ time steps of a simulation, you kinda want it to be.)</p><p>Perhaps this is too broad, and if so, I apologize, but looking at programming books, they often seem to be addressed at larger projects. My code doesn&#39;t <em>need</em> OOP, and it&#39;s already pretty darn short so it&#39;s not like &#34;oh, but the file will be reduced by a thousand lines if we do that!&#34; I want to know how to &#34;start over&#34; and program cleanly on these smaller, faster projects.</p><p>I would be glad to provide more specific details, but the more general the advice, the more useful, I think. I am programming in Python 3.</p><hr/><p>Someone suggested a duplicate. Let me make clear I&#39;m not talking about ignoring standard programming standards outright. Clearly, there&#39;s a reason those standards exist. But on the other hand, does it really make sense to write code that is say OOP when some standard stuff could have been done, would have been much faster to write, and would have been a similar level of readability because of the shortness of the program?</p><p>There&#39;s exceptions. Further, there&#39;s probably standards for scientific programming beyond just plain standards. I&#39;m asking about those as well. This isn&#39;t about if normal coding standards should be ignored when writing scientific code, it&#39;s about writing clean scientific code!</p><hr/><h2>Update</h2><p>Just thought I&#39;d add a &#34;not-quite-one-week-later&#34; sort of update. All of your advice was extremely helpful. I now am using version control &#8211; git, with git kraken for a graphical interface. It&#39;s very easy to use, and has cleaned up my files drastically &#8211; no more need for old files sticking around, or old versions of code commented out &#34;just in case&#34;.</p><p>I also installed pylint and ran it on all of my code. One file got a negative score initially; I&#39;m not even sure how that was possible. My main file started at a score of ~1.83/10 and now is at ~9.1/10. All of the code now conforms fairly well to standards. I also ran over it with my own eyes updating variable names that had gone&#8230;uhm&#8230;awry, and looking for sections to refactor.</p><p>In particular, I asked a recent question on this site on refactoring one of my main functions, and it now is a lot cleaner and a lot shorter: instead of a long, bloated, if/else filled function, it is now less than half the size and much easier to figure out what is going on.</p><p>My next step is implementing &#34;unit testing&#34; of sorts. By which I mean a file that I can run on my main file which looks at all the functions in it with assert statements and try/excepts, which is probably not the best way of doing it, and results in a lot of duplicate code, but I&#39;ll keep reading and try to figure out how to do it better.</p><p>I&#39;ve also updated significantly the documentation I&#39;d already written, and added supplementary files like an excel spreadsheet, the documentation, and an associated paper to the github repository. It kinda looks like a real programming project now.</p><p>So&#8230;I guess this is all to say: <strong>thank you</strong>.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This is a pretty common problem for scientists. I&#39;ve seen it a lot, and it always stems by the fact that programming is something you pick on the side as a tool to do your job.</p><p>So your scripts are a mess. I&#39;m going to go against common sense and say that, assuming you&#39;re programming alone, <strong>this is not so bad!</strong> You&#39;re never going to touch most of what you write ever again, so spending too much time to write pretty code instead of producing &#34;value&#34; (so the result of your script) isn&#39;t going to do much to you.</p><p>However, there is going to be a time where you need to go back to something you did and see exactly how something was working. Additionally, if other scientists will need to review your code, it&#39;s really important for it to be as clear and concise as possible, so that everyone can understand it.</p><p>Your main problem is going to be readability, so here&#39;s a few tips for improving:</p><h3>Variable names:</h3><p>Scientists love to use concise notations. All mathematical equations usually use single letters as variables, and I wouldn&#39;t be surprised to see lots and lots of very short variables in your code. This hurts readability a lot. When you&#39;ll go back to your code you&#39;re not going to remember what those y, i and x2 represent, and you&#39;ll spend a lot of time trying to figure it out. Try instead naming your variables explicitly, using names that represent exactly what they are.</p><h3>Split your code into functions:</h3><p>Now that you renamed all your variables, your equations look terrible, and are multiple lines long.</p><p>Instead of leaving it in your main program, move that equation to a different function, and name it accordingly. Now instead of having a huge and messed up line of code, you&#39;ll have a short instructions telling you exactly what&#39;s going on and what equation you used. This improves both your main program, as you don&#39;t even have to look at the actual equation to know what you did, and the equation code itself, as in a separate function you can name your variables however you want, and go back to the more familiar single letters.</p><p>On this line of thought, try to find out all the pieces of code that represent something, especially if that something is something you have to do multiple times in your code, and split them out into functions. You&#39;ll find out that your code will quickly become easier to read, and that you&#39;ll be able to use the same functions without writing more code.</p><p>Icing on the cake, if those functions are needed in more of your programs you can just make a library for them, and you&#39;ll have them always available.</p><h3>Global variables:</h3><p>Back when I was a beginner, I thought this was a great way for passing around data I needed in many points of my program. Turns out there are many other ways to pass around stuff, and the only things global variables do is giving people headaches, since if you go to a random point of your program you&#39;ll never know when that value was last used or edited, and tracking it down will be a pain. Try to avoid them whenever possible.</p><p>If your functions need to return or modify multiple values, either make a class with those values and pass them down as a parameter, or make the function return multiple values (with named tuples) and assign those values in the caller code.</p><h3>Version Control</h3><p>This doesn&#39;t directly improve readability, but helps you do all the above. Whenever you do some changes, commit to version control (a local Git repository will be fine enough), and if something doesn&#39;t work, look at what you changed or just roll back! This will make refactoring your code way easier, and will be a safety net if you accidentally break stuff.</p><p>Keeping all this in mind will allow you to write clear and more effective code, and will also help you find possible mistakes faster, as you won&#39;t have to wade through gigantic functions and messy variables.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../writing-clean-elegant-procedural-code-basic-is-there-such-a-thing/'>Writing Clean, Elegant Procedural Code (BASIC): Is There Such a Thing</a></li><li class="list-group-item"><a href='../is-scientific-code-a-different-enough-realm-to-ignore-common-coding-standards/'>Is scientific code a different enough realm to ignore common coding standards</a></li><li class="list-group-item"><a href='../my-boss-asks-me-to-stop-writing-small-functions-and-do-everything-in-the-same-loop/'>My boss asks me to stop writing small functions and do everything in the same loop</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>