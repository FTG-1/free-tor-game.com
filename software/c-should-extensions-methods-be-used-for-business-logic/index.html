<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Should Extensions methods be used for Business logic &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1077579 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1077579" class="post-1077579 software type-software status-publish hentry category-software tag-business-logic tag-c tag-domain-driven-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Should Extensions methods be used for Business logic</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">business-logic</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">domain-driven-design</span></p><div class="entry-content"><p>In C# we have <code>Extension methods</code>.</p><blockquote><p>Extension methods enable you to add methods to existing types without<br /> creating a new derived type, recompiling, or otherwise modifying the<br /> original type.</p><p>An extension method is a special kind of static method, but they are<br /> called as if they were instance methods on the extended type.</p></blockquote><p>However in one of our lesser design moments, we started replacing concrete classes which contain business logic and moving them to <code>Extension Methods</code>.</p><p>The advantages seemed neat at first e.g we could replace something like this (very simplified example).</p><pre><code>var AddressUtils = new AddressUtils();
AddressUtils.CleanAddress(order);

var ValidationUtils = new ValidationUtils();
ValidationUtils.ValidateCustomer(Order);
</code></pre><p>with</p><pre><code>Order.CleanAddress();
Order.ValidateCustomer();
</code></pre><p>I.e we were replacing a lot of Stateless instantiable Classes with short-hand static methods (syntactic sugar) that made the code more readable. This has really never sat well with me.</p><p>We now have a bunch of static classes with miscellaneous methods in them, the vast majority aren&#39;t even generic or interface driven. I.e single use.</p><p>Adding to this there is this common notional that static classes are not a good fit for test driven development.</p><p>So the alternatives really are</p><ul><li>Go back to concrete util style helper classes</li><li>And/Or Encapsulate the logic in some sort of DI service</li><li>Or add the logic to the Model it self.</li><li>Or having reusable logic sprinkled out over the various services that need to use them.</li></ul><p>In regards to the second last option, order (as most of the the models) are actually Data entities, (and that once again) doesn&#39;t seem right (or even feasible) to push the business logic down to the domain models</p><p>So i&#39;m left with (unless there are some better patterns) helper classes, Extension methods, DI services, some sort of entity based logic, or a unpredictable spaghetti factory.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You cited</p><blockquote><p>Extension methods enable you to add methods to existing types <strong>without creating a new derived type, recompiling, or otherwise modifying the original type.</strong></p></blockquote><p>and that is when you should use them almost exclusively - where you have a case where it would strongly make sense to extend a type by that method, but you <strong>cannot</strong> do this, neither by creating a new derived type, nor by recompiling, nor by any other means modifying the original type.</p><p>The typical scenario for this is: the type is sealed, and it is either not under your control - maybe a 3rd party library - or you want to avoid adding a method which requires an additional dependency which must not be added to the assembly where the type is defined.</p><p>So the first thing to check here is if these constraints apply, and if not, the favored place for putting an additional method should be the class itself. If the the code cannot be changed, but the class is not sealed, one might consider to use subclassing instead of an extension method. In this situation, I would prefer extension methods over subclassing unless access to protected members is needed. There is actually no benefit in the use of subclassing in this situation, neither in testability nor code organisation.</p><p>About testability: extension methods are in no way easier or harder to unit test than any other static or non-static method. Testability or TDD becomes only a concern when <strong>other code</strong> which relies on such a method needs to be tested in isolation. So if you run into a situation where you need to &#34;mock out&#34; the extension method itself, it is time to refactor the method into an utility class which can be replaced more easily by a mock for testing purposes.</p><p>So usage of extension methods is fine, if you</p><ul><li><p>have a method which fits clearly (!) to the area of responsibility of the type you want to extend</p></li><li><p>cannot modify the type itself easily</p></li><li><p>cannot or do not want to use inheritance</p></li><li><p>don&#39;t have the requirement for mocking the function in code which relies on it.</p></li></ul><p>Note there is actually no reason why you cannot start with an extension method, and when you notice you run into its restrictions, refactor the code. Thus, don&#39;t overthink this. Note also this has not much to do with the code being business logic or UI code or infrastructure code - when a program is large enough, each of these &#34;layers&#34; can consist of different sublayers and components, which can cause a situation where a &#34;cross-border&#34; type extension is required.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../good-practices-to-implement-mappers-in-a-multi-tier-application/'>Good practices to implement mappers in a multi-tier application</a></li><li class="list-group-item"><a href='../c-substitute-for-static-inheritance/'>C# &#8211; substitute for static inheritance</a></li><li class="list-group-item"><a href='../c-rich-domain-models-how-exactly-does-behavior-fit-in/'>C# &#8211; Rich Domain Models &#8212; how, exactly, does behavior fit in</a></li><li class="list-group-item"><a href='../rest-do-restful-apis-tend-to-encourage-anemic-domain-models/'>Rest &#8211; Do RESTful APIs tend to encourage anemic domain models</a></li><li class="list-group-item"><a href='../c-extending-a-struct-using-helper-classes-rather-than-composition/'>C# &#8211; Extending a struct. Using helper classes rather than composition</a></li><li class="list-group-item"><a href='../c-design-pattern-for-library-wrapping-extern-methods/'>C# &#8211; Design Pattern for Library Wrapping Extern Methods</a></li><li class="list-group-item"><a href='../rest-anemic-rest-and-ddd/'>Rest &#8211; Anemic REST and DDD</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>