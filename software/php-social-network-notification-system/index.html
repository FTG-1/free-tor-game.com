<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; Social network notification system &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072345 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072345" class="post-1072345 software type-software status-publish hentry category-software tag-design tag-mysql tag-php tag-social-networks"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; Social network notification system</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design</span><span class="mr-2 badge badge-info">MySQL</span><span class="mr-2 badge badge-warning">PHP</span><span class="mr-2 badge badge-primary">social-networks</span></p><div class="entry-content"><h3>Background</h3><p>I am working on an app for a client that includes some social networking features. I was originally developing the mobile front-end, but circumstances have left me in charge of developing the back end as well.</p><p>As a general background, our system allows users to follow other users and receive notifications about those that they are following, as you&#39;d expect from a social network. A caveat is that only a small subset (at most a few hundred) users will be followable, with the expectation that most of the user base will be following at least one of these individuals.</p><p>On the UI side, we will have a notification button with a number on it, and clicking the button will take you to the notification screen.</p><h3>The problem</h3><p>I&#39;ve been researching strategies for implementing notifications and most resources I have found point to creating one or more notification tables in the database. (An example I like is the accepted answer here: <a href="https://stackoverflow.com/questions/9735578/building-a-notification-system">https://stackoverflow.com/questions/9735578/building-a-notification-system</a> ).</p><p>The thing that is throwing me off is that most database-driven strategies for notifications require inserting a row for each notification for each follower. So if a thousand people are following Sally, we insert a thousand rows into the corresponding table. Is that scalable? What happens if we get to the point where tens or hundreds of thousands of users are following Sally and she&#39;s making a few dozen posts per day?</p><p>My original idea had been to handle everything with queries: the number on the notification button would be obtained by requesting row-counts on content posted more recently than the last time you visited the notification screen, while individual notifications would be generated from more detailed queries when you visited the notification screen. This approach would require no writes or extra storage, but is inflexible and would probably hammer the server pretty hard.</p><h3>SETUP</h3><p>The backend (as established by the previous developer) uses <strong>CodeIgniter</strong> and a <strong>MySQL</strong> database. It is currently running on a crappy GoDaddy shared hosting account, but I assume (hope?) this will be upgraded before we go into production and the hosting package will be scaled with user growth.</p><p>Currently our only front-end is a mobile app, but we plan to later build a website as well. I am not concerned at this time with obtaining real-time push updates from the server about the notifications.</p><h3>ADDENDUM</h3><p>I do not specialize in backends and I&#39;m in over my head in that department. The client knows it, and I&#39;ve done my best to try to explain the scope of a project of this nature, but they have made it clear that at this point they will not trust anyone else to work on the project. We probably have another month of work to do before we can start adding testers and I can get any kind of performance metrics. I really can&#39;t estimate how many users we might have or what hardware we might be on in the next 5 years, but I think the client is hoping for hundreds of thousands of users or more.</p><p>I hope this is specific enough of a problem to be posted here; I can refine it if need be. Please ask if you have any questions or I&#39;ve omitted important details.</p><h3>tl;dr</h3><ul><li>Does a database-driven notification system have negative implications for long-term scalability when all of the users are only following some of the same few hundred people?</li><li>Is there a way to make the notifications database-driven without needing a separate notification row for each notification for each follower?</li><li>Would an entirely query-driven notification system be scalable, or have any advantages besides not writing any data to the DB?</li><li>Am I overthinking this too early? Should I just build something that works for now and we can worry about optimizing it if it becomes a problem, given that the client has a limited budget and we don&#39;t know yet if the final product will be popular?</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>So if a thousand people are following Sally, we insert a thousand rows into the corresponding table. Is that scalable?</p></blockquote><p>Yes, provided the database tables are properly indexed.</p><blockquote><p>What happens if we get to the point where tens or hundreds of thousands of users are following Sally and she&#39;s making a few dozen posts per day?</p></blockquote><p>You&#39;ll generate a few dozen tens or hundreds of thousands of notification records per day for Sally, assuming you want to keep track of every notification in perpetuity.  The percentage of users like Sally with that kind of traffic is always very small.</p><blockquote><p>My original idea had been to handle everything with queries: the number on the notification button would be obtained by requesting row-counts on content posted more recently than the last time you visited the notification screen, while individual notifications would be generated from more detailed queries when you visited the notification screen.</p></blockquote><p>This seems unnecessarily complicated.  If you need detailed statistics about notifications, just store the notifications.</p><blockquote><p>Does a database-driven notification system have negative implications for long-term scalability when all of the users are only following some of the same few hundred people?</p></blockquote><p>That&#39;s why it works... a small number of people always generate the vast majority of the traffic.</p><blockquote><p>Is there a way to make the notifications database-driven without needing a separate notification row for each notification for each follower?</p></blockquote><p>Yes... Don&#39;t store the notifications; just send the notification emails, in fire-and-forget style.  Or, store the notifications for a certain period of time, and then discard them. Or, discard each notification after it has been read.</p><blockquote><p>Would an entirely query-driven notification system be scalable, or have any advantages besides not writing any data to the DB?</p></blockquote><p>I&#39;m not sure what you mean by this.  If you want to query notifications, <em>you have to store them in the database.</em> Otherwise, there is nothing to query.</p><blockquote><p>Am I overthinking this too early?</p></blockquote><p>Talk to someone who can help you design a properly normalized, indexed database with the correct tables in it.  I see no reason why such a database couldn&#39;t effectively handle the scenarios you describe.</p><h3>A real-life example</h3><p>As far as I know, Stack Exchange stores <em>everything</em> in perpetuity, including all notifications.  They use database technology similar to MySql, and some caching technologies.  While their hardware and storage space is substantial, the amount of traffic they get is a <em>good problem.</em></p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-how-to-make-a-recurring-event-such-as-an-entry-in-a-agenda/'>Design &#8211; How to make a recurring event? Such as an entry in a agenda</a></li><li class="list-group-item"><a href='../database-should-i-persist-notification-before-or-after-publishing-it-through-redis-pub-sub/'>Database &#8211; Should I persist notification before or after publishing it through Redis pub/sub</a></li><li class="list-group-item"><a href='../design-a-good-practice-to-push-notifications-in-a-near-real-time-delay-in-this-case/'>Design &#8211;  a good practice to push notifications in a &#8220;near real-time&#8221; delay in this case</a></li><li class="list-group-item"><a href='../php-the-correct-manner-in-implementing-an-email-notification-system/'>Php &#8211; The correct manner in implementing an email notification system</a></li><li class="list-group-item"><a href='../design-periodic-batch-notification-system/'>Design periodic batch notification system</a></li><li class="list-group-item"><a href='../designing-a-feed-and-notification-system-in-mongodb/'>Designing a Feed and Notification system in MongoDB</a></li><li class="list-group-item"><a href='../design-best-design-pattern-for-notification-system-how-to-handle-multiple-languages-and-items/'>Design &#8211; Best design pattern for Notification System => How to handle multiple languages and items</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>