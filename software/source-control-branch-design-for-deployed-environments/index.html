<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Source control branch design for deployed environments &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070970 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070970" class="post-1070970 software type-software status-publish hentry category-software tag-version-control"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Source control branch design for deployed environments</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">version control</span></p><div class="entry-content"><p>I currently work with a young team of developers using ASP.NET, TeamCity and Octopus Deploy. One of our developers thinks that our system is flawed and introduces the inability to test production hotfixes. What is the best solution to this problem?</p><p>We have three environments: development, staging and production. Basically, our workflow only goes forward.</p><p>Git push to master -&gt; TeamCity Build -&gt; Octopus Deploy (Dev) -&gt; Promote to Staging -&gt; Promote to Prod</p><p>His solution is to have three branches: master (development), staging (staging) and prod (production). We do all active development in our master branch, do any QA in staging and merge from staging to prod when we need to perform a release. When a bug occurs in production, we make the change in staging, and then remerge into production, leaving our development branch alone. We eventually merge all development changes into the production branch once we are ready to release new features.</p><p>I don&#39;t think this is necessarily right however. My solution is to have the latest production version in the master branch. All development occurs in feature branches. When we&#39;ve tested a feature branch, we merge back to production. Simple.</p><p>So what is the best solution to this problem? Also, some follow-up questions:</p><ul><li>Should we improve our QA process? Should we be doing QA on feature branches or on full releases?</li><li>How should we set up our continuous integration? Should we have servers deployed for every version?</li></ul><p>I&#39;d love to hear some examples or suggestions you guys may have regarding this scenario. Thanks!</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>It is good practice to building your code only once and not per environment or branch.</p><p>Your GIT branches should not be directly connected to your environment stages.</p><p>The pipeline should be as follows:</p><p>develop &gt; merge to baseline &gt; build &gt; upload to repo &gt; deploy on dev &gt; test &gt; deploy to Staging &gt; test &gt; approve &gt; deploy to 1 Prod &gt; test &gt; to n Prod.</p><p>Always using the same Artifact between promotions. All environments should be mirrors, with environment depend configurations being injected and minimised.</p><p>&#34;promotion&#34; is done by the deployment tool and not via GIT branch merging.</p><p>I also apply the QA to the full product and not to feature branches.</p><p>Testing branches in a vacuum will lead to integration or merging errors not being found and a false sense of security about the quality of the code. It can also create confusion with the Product Owner &#34;I thought it was done and tested ? Why do we get errors now ?&#34;</p><p>If you are not applying continuous integration, branching makes sense to split your hotfix from your already developed newer code. As such, simply feed the hotfix into the start pipeline and deploy it over the newest version.</p><p>Problems may arise if there are environment or data changes that are not backward compatible between the newest version and the hotfix.</p><p>In this case, one normally also includes all the environment and data configurations as a part of the &#34;version&#34; thus rebuilding the full environment every deployment.</p><p>This can be easily achieved if the servers are virtual or if they are provisioned via a configuration management tool.</p><p>Pratical example: vagrant file for each version. When you rollback from version 1.4.5 to version 0.5.6 you also rollback the vagrant configuration and thus the environment configuration.</p><p>While not my initial reference, here is an MSDN Team foundation Server best pratices and patterns: <a href="https://msdn.microsoft.com/en-us/library/dn449951.aspx" rel="noreferrer">https://msdn.microsoft.com/en-us/library/dn449951.aspx</a> I also advice the reading of the Addison-Wesley signature series books, Continuous Integration and Continuous Delivery</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../git-best-way-to-use-source-control-for-a-project-1-3-people/'>Git &#8211; Best way to use source control for a project (1-3 people)</a></li><li class="list-group-item"><a href='../source-control-roles-and-responsibilities-best-practices/'>Source Control: Roles and Responsibilities &#8211; Best Practices</a></li><li class="list-group-item"><a href='../stopping-developers-committing-to-the-wrong-branch-on-dvcs/'>Stopping developers committing to the wrong branch on DVCS</a></li><li class="list-group-item"><a href='../git-appropriate-git-workflow-for-multiple-active-releases-while-handling-hotfixes/'>Git &#8211; Appropriate Git workflow for multiple active releases while handling hotfixes</a></li><li class="list-group-item"><a href='../introducing-a-version-control-branching-policy-to-a-small-team/'>Introducing a version control branching policy to a small team</a></li><li class="list-group-item"><a href='../what-are-the-risks-of-having-a-release-branch/'>What are the risks of having a release branch</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>