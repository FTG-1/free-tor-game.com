<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; How to create and enforce contracts for exceptions &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073088 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073088" class="post-1073088 software type-software status-publish hentry category-software tag-c tag-exceptions"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; How to create and enforce contracts for exceptions</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">exceptions</span></p><div class="entry-content"><p>I&#39;m trying to convince my team lead to allow using exceptions in C++ instead of returning a bool <code>isSuccessful</code> or an enum with the error code. However, I can&#39;t counter this criticism of his.</p><p>Consider this library:</p><pre><code>class OpenFileException() : public std::runtime_error {
}

void B();
void C();

/** Does blah and blah. */
void B() {
    // The developer of B() either forgot to handle C()&#39;s exception or
    // chooses not to handle it and let it go up the stack.
    C();
};

/** Does blah blah.
 *
 * @raise OpenFileException When we failed to open the file. */
void C() {
    throw new OpenFileException();
};
</code></pre><ol><li><p>Consider a developer calling the <code>B()</code> function. He checks its documentation and sees that it returns no exceptions, so he doesn&#39;t try to catch anything. This code could crash the program in production.</p></li><li><p>Consider a developer calling the <code>C()</code> function. He doesn&#39;t check the documentation so doesn&#39;t catch any exceptions. The call is unsafe and could crash the program in production.</p></li></ol><p>But if we check for errors in this way:</p><pre><code>void old_C(myenum &amp;return_code);
</code></pre><p>A developer using that function will be warned by the compiler if he doesn&#39;t provide that argument, and he&#39;d say &#34;Aha, this returns an error code I must check for.&#34;</p><p>How can I use exceptions safely, so that there&#39;s some sort of contract?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>This is a legitimate criticism of exceptions.</strong> They are often less visible than simple error handling such as returning a code.  And there is no easy way to enforce a &#34;contract&#34;.  Part of the point is to enable you to let exceptions be caught at a higher level (if you have to catch every exception at every level, how different is it from returning an error code, anyway?).  And this means that your code could be called by some other code that doesn&#39;t handle it appropriately.</p><p><strong>Exceptions do have downsides; you have to make a case based on cost-benefit.</strong><br/> I found these two articles helpful: <a href="https://mortoray.com/2012/03/08/the-necessity-of-exceptions/" rel="noreferrer">The necessity of exceptions</a> and <a href="https://mortoray.com/2012/04/02/everything-wrong-with-exceptions/" rel="noreferrer">Everything wrong with exceptions.</a> Also, <a href="http://www.codergears.com/Blog/?p=835" rel="noreferrer">this blog post offers opinions of many experts on exceptions, with a focus on C++</a>.  While expert opinion seems to lean in favor of exceptions, it is far from a clear consensus.</p><p>As for convincing your team lead, <strong>this might not be the right battle to pick.  Especially not with legacy code.</strong> As noted in the second link above:</p><blockquote><p>Exceptions cannot be propagated through any code which is not
 exception safe. The use of exceptions thus implies that all code in
 the project must be exception safe.</p></blockquote><p>Adding a little bit of code which uses exceptions to a project that mainly does not is probably <em>not</em> going to be an improvement.  Not using exceptions in otherwise well-written code is far from a catastrophic problem; it might not be a problem at all, depending on the application and which expert you ask.  You have to pick your battles.</p><p>This is probably not an argument I would spend effort on--at least not until a new project is started. And even if you have a new project, is it going to use or be used by any legacy code?</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../python-when-and-how-should-i-use-exceptions/'>Python &#8211; When and how should I use exceptions</a></li><li class="list-group-item"><a href='../how-to-handle-specific-networking-exceptions-in-haskell/'>How to handle specific networking exceptions in Haskell</a></li><li class="list-group-item"><a href='../c-should-a-c-program-catch-all-exceptions-and-prevent-exceptions-from-bubbling-up-past-main/'>C++ &#8211; Should a C++ program catch all exceptions and prevent exceptions from bubbling up past main()</a></li><li class="list-group-item"><a href='../c-idiomatic-usage-of-exceptions-in-c/'>C++ &#8211; Idiomatic usage of exceptions in C++</a></li><li class="list-group-item"><a href='../c-error-handling-considerations/'>C++ &#8211; Error handling considerations</a></li><li class="list-group-item"><a href='../c-exceptions-error-codes-and-discriminated-unions/'>C# &#8211; Exceptions, error codes and discriminated unions</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>