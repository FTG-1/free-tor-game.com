<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Overriding equals() method in Java &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080716 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080716" class="post-1080716 software type-software status-publish hentry category-software tag-java tag-object tag-object-oriented tag-object-oriented-design tag-value-object"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Overriding equals() method in Java</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">object</span><span class="mr-2 badge badge-warning">object-oriented</span><span class="mr-2 badge badge-primary">object-oriented-design</span><span class="mr-2 badge badge-danger">value-object</span></p><div class="entry-content"><p>Short question: Why does Java allow overriding <code>equals()</code>, why is it not final?</p><p>I am reading Effective Java 2nd edition by Joshua Bloch.<br /> I am a bit baffled by the conclusion that</p><blockquote><p>There is no way to extend an instantiable class and add a value component while preserving the equals contract</p></blockquote><p>Is not it saying the same as <code>equals()</code> should be a <code>final</code> method?</p><p>The book gives an example of a class <code>A</code> with <code>equals()</code> method and then a class <code>AX</code> extending <code>A</code> having its own <code>equals()</code> method which is different from the <code>equals()</code> method in <code>A</code>.</p><p>I will not go into details of <code>equals()</code> in <code>A</code> and <code>equals()</code> in <code>AX</code>, but it suffices to say that they are <strong>different</strong>. Therefore we have inter-operatability problem which guarantees violation of transitivity and/or symmetry (maybe even something else) of <code>equals()</code> when we mix different implementations of <code>A</code> in some contexts (especially <code>HashSet</code>, <code>HashMap</code> type).</p><p>Thinking further, I don&#39;t think I can agree with with the conclusion that having something like</p><pre><code>public boolean equals(Object o) {
    if (o == null || o.getClass() != getClass())
      return false;
    ...
}
</code></pre><p>is wrong. I think this is precisely the proper way to deal with overriding <code>equals()</code>.</p><p>Java makes it possible so Java allows overriding <code>equals()</code> for a reason. If it had taken into account Liskov substitution principle in the strict sense, then it would not have allowed overriding <code>equals()</code> and implicitly makes any implementation of <code>equals()</code> final at the compiler level. What are your thoughts?</p><p>I can think of a case where composition is simply not suitable, and overriding <code>equals()</code> is the best option. This is the case where the class <code>A</code> is to be made persistent in a database and the context implies that there is no collection having both an implementation of <code>A</code> and subclasses of <code>A</code> such as <code>AX</code>.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><code>equals()</code> is a byproduct of an attempt to improve C++ when it was created.  C++ has operator overloading which allows you to perform custom operations when called with otherwise valid operators such as &lt;, &gt;, !=, ==, and even =.</p><p>The team made the decision (wisely so) to make equality be class method rather than having external static methods as it was done in C++.  However, this also meant that <code>equals()</code> coupled with <code>hashCode()</code> defined how such classes were handled in collection classes.</p><p>Since any class could in theory override <code>equals()</code> or <code>hashCode()</code>, it means that just because you have a collection of a certain type does not guarantee that behavior is uniform.</p><p>For instance, suppose class A has two members x and y used to determine equality.  Along comes class B which has x, y, and z.  If an instance of B had the same values x and y, how would you go about inserting this instance in a <code>Set</code>?  If you call the <code>equals</code> of an instance of A, it will determine the two to be equal and if you call the <code>equals</code> of an instance of B, it will return false since it is not an instance of B.</p><p>To be perfectly correct, class B would have to treat member z as an additional condition only in the case in which it is an instance of B, otherwise it lends itself to the <code>equals()</code> method of class A, and, if such a thing is not possible, class B should not allow itself to override <code>equals()</code> or <code>hashCode()</code>.  This creates a sticky situation since in theory you should not concern yourself with how the parent class works from an implementation standpoint (if done right anyway), but yet here we are.</p><p>You could make class A final to prevent such things from happening, but then of course you can never extend class A.  Java makes a point of making certain standard classes like String final to prevent complications of this nature (very smart decision on their part).  I think at the end of the day, what matters is that you are very careful in your usage of <code>equals()</code> and <code>hashCode()</code>.  I try to use it sparingly, and I am always mindful of which classes I mean to be available in a library and which classes are for internal use as to not to create conditions where things could go horribly wrong.</p><p>The Liskov substitution principle is fine in theory, but in practice you can never quite manage it.  Take <code>Collection</code> as an example. <code>Collection</code> is implemented by <code>ArrayList</code>, <code>Set</code>, or <code>LinkedList</code> among others.  While it is true that you could achieve the same ultimate goal by replacing a <code>Collection</code> with say a <code>HashSet</code>, it is not an ideal implementation for performing operations on all objects contained within (better <code>LinkedHashSet</code> at that point).  It wouldn&#39;t break existing code, but you may potentially render it grossly inefficient depending on how that <code>Collection</code> is used.  Consider that this is a rather clean example too.</p><p>If you&#39;re lucky, only the implementation details change, but many behave radically different, with some methods throwing a <code>NotImplementedException</code>.</p><p>Thus requiring that classes implementing <code>equals()</code> must respect the Liskov substitution principle is asking a lot, and I suspect that they didn&#39;t want to alienate the majority of C++ programmers getting familiar with Java.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/java-improvements-to-joshua-blochs-builder-design-pattern/'>Java &#8211; Improvements to Joshua Bloch&#8217;s Builder Design Pattern</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-seeing-so-many-instantiable-classes-without-state/'>Java &#8211;  seeing so many instantiable classes without state</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-overriding-methods-by-passing-as-argument-the-subclass-object-where-the-supertype-is-expected/'>Java &#8211; Overriding methods by passing as argument the subclass object where the supertype is expected</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-how-do-we-freeze-an-object-while-constructing-an-object-using-javabeans-pattern/'>Java &#8211; How do we freeze an object while constructing an object using JavaBeans pattern</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-is-it-a-good-idea-to-have-type-safe-equals/'>Java &#8211; Is it a good idea to have type safe equals</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-is-template-design-pattern-a-bad-practice-due-to-inheritance/'>Java &#8211; Is Template design pattern a bad practice due to inheritance</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-is-it-a-good-idea-to-have-logic-in-the-equals-method-that-doesnt-do-exact-matching/'>Java &#8211; Is it a good idea to have logic in the equals method that doesn&#8217;t do exact matching</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>