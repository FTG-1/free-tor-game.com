<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Organizing related projects and dependencies for nuget publishing &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1085454 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1085454" class="post-1085454 software type-software status-publish hentry category-software tag-builds tag-c tag-code-organization tag-net tag-versioning"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Organizing related projects and dependencies for nuget publishing</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">builds</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">code-organization</span><span class="mr-2 badge badge-primary">net</span><span class="mr-2 badge badge-danger">versioning</span></p><div class="entry-content"><p>I&#39;ve been working on writing .NET bindings for <a href="http://rollbar.com/" rel="nofollow">Rollbar</a>, an error and message reporting service, like Airbrake. My library is working nicely and is published in the NuGet gallery.</p><p>So now I want to take it to the next level of usability and implement an <a href="https://github.com/nlog/NLog/wiki/How-to-write-a-Target" rel="nofollow">NLog Extension</a> for this. This entails writing one screen&#39;s-worth of code and referencing the NLog library. It&#39;s a wrapper. I may also implement one for Log4Net.</p><p>At this point it&#39;s already getting blurry as to how I should organize this and manage it with source control and nuget. One thing for sure is that there will be separate nuget packages so people don&#39;t have to install dependencies they don&#39;t want.</p><p>My questions are:</p><ol><li><p>Should I create separate git repositories for the base library and NLog extension and Log4Net extension? Seems like it would be easier to track changes have clearly separated build processes and such. It may make contributing to the project(s) easier&#8230;but I&#39;m not sure.</p></li><li><p>Should I reference my Rollbar base library as a dependency of the extension libraries, or ILMerge it? The upside to ILMerge is the user only needs one reference and DLL. The odd part is with versioning. Like how to have version numbers that make sense when only the base library changed, or only the extension changed. Also, it seems like nuget doesn&#39;t list updates to dependencies of installed packages, only to the packages itself. I&#39;d want updates to the base library to bubble-up as an update the user should install! I suppose one way to do that would be version-bumping the extension <em>and</em> setting the version of the dependency library.</p></li></ol><p>This is my first foray into writing an open source library and publishing it and managing it. I&#39;d love some feedback from people who have dealt with this so I can get it right!</p><p>I&#39;m using Albacore for my build process, for what it&#39;s worth.</p><p>(Current code: <a href="https://github.com/mroach/RollbarSharp" rel="nofollow">https://github.com/mroach/RollbarSharp</a>)</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I wouldn&#39;t mind including a useless-to-me, small DLL as part of a bigger package, but I wouldn&#39;t want to include that <strong>and</strong> NLog, so that I can use Rollbar with log4net.</p><p>So, if you are going to include them in the main package, don&#39;t make the package dependent on the secondary product. Because it&#39;s not dependent. I don&#39;t need NLog to use Rollbar. But, note that this means I&#39;ll be able to install any version of NLog alongside Rollbar, which means I&#39;m screwed if I pick one that&#39;s incompatible.</p><p>There are plenty of open-source projects on nuget that link two others and have combined names, like Rollbar.NLog, which makes them turn up next to Rollbar when I&#39;m searching but gives me the choice whether to include them or not.</p><p>If you take that option, you can make version numbers independant, by setting dependency versions. For example, you say Rollbar.NLog v1.2 requires Rollbar v1.x (<a href="https://docs.nuget.org/docs/Reference/Versioning" rel="nofollow">the dependency tag</a> in your nuspec file, (<code>id=&#34;Rollbar&#34; version=&#34;[1.1,1.2)&#34;</code>) and give me permission to upgrade the two packages independently, as long as neither is upgraded to v2.x.</p><p>If you have a Rollbar.NLog package then you should make it dependent on NLog. If you can be confident of NLog&#39;s versioning (eg. will always be backward compatible, unless the major version changes) then give me freedom with that too. But you don&#39;t have to. You can specify <code>id=&#34;NLog&#34; version=&#34;[3.2.1]&#34;</code>. Doing so makes it safe for me, but less flexible -- my NLog upgrade strategy is tied to your release strategy.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../best-practices-for-versioning-project-after-dependency-upgrade/'>Best practices for versioning project after dependency upgrade</a></li><li class="list-group-item"><a href='../c-policies-on-nuget-dependencies-versions-when-developing-a-library/'>C# &#8211; Policies on NuGet dependencies versions when developing a library</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>