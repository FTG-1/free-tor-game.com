<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; A sample Memento pattern: Is it correct &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080361 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080361" class="post-1080361 software type-software status-publish hentry category-software tag-c tag-class-design tag-design-patterns"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; A sample Memento pattern: Is it correct</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">class-design</span><span class="mr-2 badge badge-warning">design-patterns</span></p><div class="entry-content"><p>Following <a href="https://softwareengineering.stackexchange.com/questions/162476/philosophy-behind-the-memento-pattern">this</a> query on memento pattern, I have tried to put my understanding to test.</p><blockquote><p>Memento pattern stands for three things:</p><ol><li>Saving state of the &#34;memento&#34; object for its successful retrieval</li><li>Saving carefully each valid &#34;state&#34; of the memento</li><li>Encapsulating the saved states from the change inducer so that each state remains unaltered</li></ol></blockquote><p><strong><em>Have I achieved these three with my design?</em></strong></p><p><strong><em>Problem<br /></em></strong><br /> This is a zero player game where the program is initialized with a particular set up of chess pawns &#8211; the knight and queen. Then program then needs to keep adding set of pawns or knights and queens so that each pawn is &#34;safe&#34; for the next one move of every other pawn.</p><p>The condition is that either both pawns should be placed, or none of them should be placed. The chessboard with the most number of non conflicting knights and queens should be returned.</p><p><strong>Implementation</strong><br /> I have 4 classes for this:</p><ol><li><p><code>protected ChessBoard</code> (the Memento)</p><pre><code>private int [][] ChessBoard;

public void ChessBoard();
protected void SetChessBoard();
protected void GetChessBoard(int);
</code></pre></li><li><p><code>public Pawn</code> This is not related to memento. It holds info about the pawns</p><pre><code>public enum PawnType: int
{
    Empty = 0,
    Queen = 1,
    Knight = 2,
}
//This returns a value that shown if the pawn can be placed safely
public bool IsSafeToAddPawn(PawnType);
</code></pre></li><li><p><code>public CareTaker</code> This corresponds to caretaker of memento</p><p>This is a double dimentional integer array that keeps<br /> a track of all states. The reason for having 2D array is to<br /> keep track of how many states are stored and<br /> which state is currently active. An example:</p><p>0 -2<br /> 1 -1<br /> 2 0 &#8211; This is current state. With second index 0/<br /> 3 1 &#8211; This state has been saved, but has been undone</p><pre><code>private int [][]State;
private ChessBoard [] MChessBoard;

//This gets the chessboard at the position requested and assigns it to originator
public ChessBoard GetChessBoard(int);

//This overwrites the chessboard at given position
public void SetChessBoard(ChessBoard, int);

private int [][]State;
</code></pre></li><li><p><code>public PlayGame</code> (This is the originator)</p><pre><code>private bool status;
private ChessBoard oChessBoard;

//This sets the state of chessboard at position specified public
SetChessBoard(ChessBoard, int);

//This gets the state of chessboard at position specified public
ChessBoard GetChessBoard(int);

//This function tries to place both the pawns and returns the status of this attempt
public bool PlacePawns(Pawn);
</code></pre></li></ol><p><strong>Edit after discussion with Kevin</strong></p><p>The way I am trying to apply design patterns to my problems is not correct. In a way it helps me understand &#34;how&#34; to &#34;implement&#34; it. Yes. But then, this is not its ideal usage. I might as well simplify my &#34;learning&#34; problem and use my text book ones.</p><p>Also refer to <a href="https://softwareengineering.stackexchange.com/questions/132425/how-did-you-get-good-practices-for-your-oop-designs">this</a> question on programmers.stackoverflow and all the discussions!</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You don&#39;t need a Memento pattern for this problem, just simple backtracking.  I didn&#39;t quite understand your use of &#39;pawn&#39;, but basically you put something in the first legal spot.  You only need to remember the current position and the best so far.  When you can&#39;t put anything else on the board, then save the position if it is better than the previous best.  Then undo the last placement and try the next spot.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/philosophy-behind-the-memento-pattern/'>Philosophy behind the memento pattern</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>