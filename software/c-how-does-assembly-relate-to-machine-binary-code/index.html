<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; How does assembly relate to machine/binary code &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076857 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076857" class="post-1076857 software type-software status-publish hentry category-software tag-assembly tag-c tag-compiler tag-machine-code"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; How does assembly relate to machine/binary code</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">assembly</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">compiler</span><span class="mr-2 badge badge-primary">machine-code</span></p><div class="entry-content"><p>How does assembly relate to machine/binary code.</p><p>For example here is how to print to the screen in mikeOS(a small pure assembly OS), mikeOS it uses NASM to assemble.</p><pre><code>BITS 16
    ORG 32768
    %INCLUDE &#39;mikedev.inc&#39;

start:
    mov si, mystring
    call os_print_string

    call os_wait_for_key

    ret

    mystring db &#39;My first MikeOS program!&#39;, 0
</code></pre><p>Where os_print_string and os_wait_for_key are defined as</p><pre><code>os_print_string     equ 0003h   ; SI = zero-terminated string 
</code></pre><p>and</p><pre><code>os_wait_for_key     equ 0012h   ; Returns AL = key pressed
</code></pre><p>in mikedev.inc respectively and defined as</p><pre><code>os_call_vectors:
    jmp os_print_string     ; 0003h
</code></pre><p>in kernal.asm</p><p>Now nasm must do a lot more work under the scene when assembling, I have no idea what.</p><p>In other words assembly language is a wrapper to some degree to machine code just as say C is a wrapper to assembly. If I said cout &gt;&gt; &#34;Hello World&#34; for example in C++, this is then compiled into it&#39;s assembly equivalent and them assembled into machine code.</p><p>So I am trying to understand out how 0003h and 0012h seem to dictate everything that is going on when printing to the screen. How do these two values,</p><p>a) Tell the CPU/PC system which bus to send the corresponding bytes that represent the required string to the monitor bus and not say to the sound card.</p><p>b) In this case the string is sent to the monitor, obviously, now my understanding is that you have a frame buffer that can store a maximum number of bytes. So say the resolution of your screen is set at 1024 x 768 which is 786432 pixels and a refresh rate of 60hz on the screen, therefore the FB will contain this number of byte values and hence will be sending this many bytes to the monitor every 1/60 sec. The first byte in the FB corresponding to the first pixel on the screen and the last to the last on the screen etc.</p><p>So how does the CPU/GPU know which byte to put in which position in the FB. It&#39;s like saying to the GPU &#39;ok I need this pixel at coord (245,232) green so I will leave it to you to put this pixels value in the correct position in the FB&#39; etc.</p><p>How does this work.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Assembly language translates almost directly to machine code. <code>mov</code> becomes a <code>mov</code> instruction. <code>call</code> becomes a <code>call</code> instruction. The arguments on the same line become the argument fields for those instructions. There&#39;s a bit of assistance in computing addresses, but not a lot beyond that.</p><p>The operating system can be treated much like a subroutine library. The &#34;magic numbers&#34; you&#39;re asking about are operating system entry points; the <code>call</code> instruction, like a function call in higher level languages, invokes them; they run until they <code>return</code>, at which point your program picks up where it left off. Your OS&#39;s user manual will tell you which entry point to invoke to do what, how to set up any arguments required (such as putting the address of the string to be printed in the si register before calling <code>os_print_string</code>, though some may involve pushing values onto the stack rather than putting them in registers), and how to read their returned results if any (again, which registers will have the result or what to pop off the stack).</p><p>As far as question (b) goes -- That&#39;s all stuff the OS and its device drivers, or a function library linked with your assembly code, will normally handle for you. If you really need to know it (eg because you&#39;re writing an OS or device drivers), you&#39;ll need to study the documentation for your specific hardware to understand how to communicate with it... but what you&#39;ll wind up doing is writing a library of functions which do the necessary work, and packaging it so main programs just invoke those functions. In other words, for most programs I/O is much like working in a higher-level language; the runtime library does all the work and all you need to know is how to use it. (Sane assembler code is <em>critically</em> dependent upon writing good functions so you don&#39;t spend time endlessly reinventing wheels!)</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-do-we-go-from-assembly-to-machine-codecode-generation/'>How do we go from assembly to machine code(code generation)</a></li><li class="list-group-item"><a href='../why-convert-to-assembly-language-instead-of-machine-code/'>Why convert to assembly language instead of machine code</a></li><li class="list-group-item"><a href='../architecture-how-byte-loading-storing-is-implemented-by-the-cpu/'>Architecture &#8211; How Byte loading/storing is implemented By the CPU</a></li><li class="list-group-item"><a href='../compilation-to-bytecode-vs-machine-code/'>Compilation to bytecode vs machine code</a></li><li class="list-group-item"><a href='../write-an-assembler-in-c-why-writing-a-machine-code-translator-for-a-low-level-language-in-a-higher-level-language/'>&#8220;Write an Assembler in C.&#8221; Why writing a machine code translator for a low level language in a higher level language</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>