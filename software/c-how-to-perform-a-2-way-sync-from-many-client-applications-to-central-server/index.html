<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; How to perform a 2 way sync from many client applications to central server &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069019 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069019" class="post-1069019 software type-software status-publish hentry category-software tag-c tag-sql tag-synchronization"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; How to perform a 2 way sync from many client applications to central server</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">sql</span><span class="mr-2 badge badge-warning">synchronization</span></p><div class="entry-content"><p>I have many client applications that sync up to a central server.<br /> I am using C#, MS SQL server, Win Forms, ASP.NET MVC + API.</p><p><strong>I need to learn/figure out how to perform a 2 way sync for data changes across my server database and local databases.</strong></p><p>My server and local databases are almost (but not quite) an exact match.</p><p>There are tables for Employees, Items, Products, Locations, etc and these can be changed on the server or on a local client -&gt; I need to merge this data.</p><p><strong>Example 1:</strong></p><p>I have products in a location and I store the qty that is there.<br /> The Qty in location can be changed via the website or the client (at the same time before a sync).</p><p><strong>Potential Solution 1:</strong></p><p>For every database table I have; I make an audit table for changes against them and sync them e.g.</p><p>ProductInLocation</p><ul><li>Product</li><li>Location</li><li>Qty</li></ul><p>ProductInLocationAudit</p><ul><li>ProductBefore</li><li>ProductAfter</li><li>LocationBefore</li><li>LocationAfter</li><li>QtyBefore</li><li>QtyAfter</li></ul><p>Then on the server I can calculate the differences per table and sync accordingly (i.e. ServerQty = LocalQtyAfter &#8211; LocalQtyBefore)</p><p><strong>Potential Solution 2:</strong></p><p>I store all edits to all tables in a single database:</p><p>AuditTable</p><ul><li>Model</li><li>Property</li><li>BeforeValue</li><li>AfterValue</li><li>DataType</li></ul><p>This way I can use Reflection?? to grab the correct models, calculate the difference between integers and simply overwrite strings to sync the data.</p><p><strong>Potential Solution 3:</strong></p><p>Microsoft Sync Framework</p><p>Seems like it would do the job, but I believe it&#39;s being/about to be sunsetted?</p><p><strong>Potential Solution 4:</strong></p><p>Track Data changes using SQL Server directly, this however would be difficult to put into source control and would need advanced code to manipulate the data before saving (i.e. to work out integer differences).</p><p><strong>Which solution should I take (if any)? Which has the least pitfalls / is most likely to work successfully?</strong></p><p><strong>Is there a standard/correct way I should be doing this type of thing?</strong></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Replication is hard. Incredibly hard especially because you want it two way with multiple databases involved. There are many many pitfalls which you need to solve. Also relational database are designed as a single location central database server to insure integrity. We&#39;ve had more success with a central server and designing an api for the remote locations.</p><p>For your situation I would do research into developing a master-slave relationship where you design it in a way to not be bi-directional anymore.</p><p>I mean, a warehouse location could be the master over their own stock, you can then synchronize them 1 way to the central server. The warehouse becomes the master of their own inventory and others are able to see it but not mutate it directly. They could like send a (api)message to &#34;reserve&#34; an item if you need something transferred. That way you can still &#34;reach&#34; the items of the warehouse, but the warehouse would be responsible for managing them.</p><p>So my answer in short: try to make your problem a 1-way sync problem instead of a 2-way sync.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-to-version-track-changes-to-sql-tables/'>How to version/track changes to SQL tables</a></li><li class="list-group-item"><a href='../whats-a-good-scheme-for-multi-user-database-synchronization/'>What&#8217;s a good scheme for multi-user database synchronization</a></li><li class="list-group-item"><a href='../database-implementation-details-of-database-synchronisation-api/'>Database &#8211; Implementation details of database synchronisation API</a></li><li class="list-group-item"><a href='../purely-sql-alternate-to-looping/'>Purely SQL alternate to looping</a></li><li class="list-group-item"><a href='../rest-a-separate-endpoint-specifically-for-sync-in-a-rest-api/'>Rest &#8211; A separate endpoint specifically for sync in a REST api</a></li><li class="list-group-item"><a href='../database-best-way-to-synchronize-data-between-two-different-databases/'>Database &#8211; Best way to synchronize data between two different databases</a></li><li class="list-group-item"><a href='../whats-the-best-way-to-track-updates-when-syncing-data-from-mysql-remote-server-to-local-sqlite-database/'>What&#8217;s the best way to track updates when syncing data from MySQL remote server to local SQLite database</a></li><li class="list-group-item"><a href='../web-development-two-way-data-synchronization-between-web-application-and-rest-api-server/'>Web-development &#8211; Two way data synchronization between web application and REST API server</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>