<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Mvc &#8211; Is Model a better place to set HTTP status code &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080296 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080296" class="post-1080296 software type-software status-publish hentry category-software tag-controller tag-http-response tag-mvc"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Mvc &#8211; Is Model a better place to set HTTP status code</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">controller</span><span class="mr-2 badge badge-info">http-response</span><span class="mr-2 badge badge-warning">mvc</span></p><div class="entry-content"><p>In MVC usually the controller sets whatever needs to be sent back to the client/View, including HTTP status code, e.g.:</p><pre><code>class Controller {

    public function get(Request req, Response resp) {

        if (this.model.get(req.getId()) {
            resp.setStatusCode(Response::HTTP_OK)

        } else {
            resp.setStatusCode(Response::HTTP_NOT_FOUND)
        }
    }
}
</code></pre><p>There are a few problems in doing it this way:</p><ul><li>all controller methods become littered with if/else for setting different HTTP status code</li><li>I&#39;ve encountered a problem where someone has a Model::createOrGet(), which just return Model. The controller doesn&#39;t know if one has been created or fetch from store.</li><li>setting HTTP status code code becomes duplicated between controllers.</li></ul><p>Would it be better to make Model pass HTTP status code back to the controller, e.g.:</p><pre><code>class Controller {

    public function get(Request req, Response resp) {
        cart := this.model.getOrCreate(req.getCustomerId()
        resp.setStatusCode(this.model.getStatusCode())

        if (cart) {
            return cart
        }
    }

    public function create(Request req, Response resp) {
        cart := this.model.getOrCreate(req.getCustomerId()
        resp.setStatusCode(this.model.getStatusCode())

        if (cart) {
            return cart
        }
    }

    public function put(Customer c, array data) {
        // this can result different success/error status codes
        this.model.processPutDataForCustomer(c, data)
        resp.setStatusCode(this.model.getStatusCode())
    }
}
</code></pre><p>Basically <code>this.model</code> sets the last status to the appropriate HTTP status code which can be one of the success, client error or server error codes and the controller can just get that status code.</p><p>Is this good or is there a better way for this common problem? Isn&#39;t it logical for web application to know HTTP status code deeper than the controller?</p><p>I&#39;d really like to see example for multiple possible HTTP status code to be returned by the controller, something like a PUT request that can be one of &#34;Bad Request&#34;, &#34;Conflict&#34;, &#34;Not Found&#34;, &#34;Created&#34; and &#34;No Content&#34;.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The Controller is responsible for handling the HTTP request and knowing what to do. Setting the HTTP status code in the Controller <em>is</em> the right place to do this.</p><blockquote><p>There are a few problems in doing it this way:</p><ul><li>all controller methods become littered with if/else for setting different HTTP status code</li></ul></blockquote><p>That&#39;s where this code was meant to go.</p><blockquote><ul><li>I&#39;ve encountered a problem where someone has a Model::createOrGet(), which just return Model. The controller doesn&#39;t know if one has been created or fetch from store.</li></ul></blockquote><p>If the Controller needs to know whether or not something was created, then the Controller shouldn&#39;t be calling <code>Model::getOrCreate(...)</code>.</p><blockquote><ul><li>setting HTTP status code code becomes duplicated between controllers.</li></ul></blockquote><p>If the model set the HTTP status code then it&#39;s duplicated between models, so this doesn&#39;t really buy you anything either.</p><p>This next suggestion will largely depend on the framework you are using, but most frameworks default to a <code>200 OK</code> response, leaving you to just deal with the negative cases (<code>404 NOT FOUND</code>, etc).</p><p>But again, this is <em>precisely</em> what the Controller is meant to do.</p><p>Yes, it seems like you are duplicating code, but you are <em>not</em> duplicating business logic. That&#39;s the kind of duplication you want to avoid. Duplicating HTTP status codes isn&#39;t really what I&#39;d call &#34;duplication.&#34; It&#39;s part of the Controller&#39;s job.</p><p>imel96 commented:</p><blockquote><p>I know setting some status code is Controller&#39;s job. But a lot of HTTP status codes are part of business logic and business logic should go in Model, right?</p></blockquote><p>HTTP status codes are only a part of Business Logic if the application you are writing is a web server. If not, an HTTP status code is an artifact of your application being implemented as a web application. Imagine if you needed to take your business logic and reuse it in the context of an installed GUI application. Do HTTP status codes make sense then? They don&#39;t. An HTTP status code is not business logic. It is application flow control. The Controller is responsible for flow control.</p><p>Business Logic is <strong>Why</strong> and your Controller should know <strong>What to do</strong> when something happens. Controllers don&#39;t know <strong>Why</strong> something happens, because that&#39;s the responsibility of Business Logic.</p><blockquote><p>I also find some Model throwing exceptions with HTTP status code in it and then Controller copy that to Response object. That also indicates to me that Model really wants to return HTTP status code, and without exception (like when using Go), it&#39;d be just like returning status code.</p></blockquote><p>If the model is throwing exceptions containing HTTP status codes, the model was built wrong. An exception is an exceptional condition that cannot be handled by the code being called, and so must be handled by the caller. Validations, as a separate entity from Models (although validators should be calling methods on Models while performing validation) and Controllers should take care of checking the data before exceptions can be thrown by the model or data access layer</p><blockquote><p>When using many status codes, isn&#39;t it too much of business logic to be put in Controller?</p></blockquote><p>No. Again, HTTP status codes have nothing to do with Business Logic. The very fact that you&#39;ve asked this question should show you how confusing it becomes when you mix up two completely different concerns: Business Logic (Models) and Flow Control (Controllers).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/when-to-use-http-status-code-404-in-an-api/'>When to use HTTP status code 404 in an API</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/javascript-how-to-respond-with-error-message-when-making-ajax-calls/'>Javascript &#8211; How to respond with error message when making AJAX calls</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/php-the-best-way-to-create-rest-api-error-response-model-and-error-codes-system/'>Php &#8211;  the best way to create REST API error response model and error codes system</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/rest-do-web-applications-use-http-as-a-transport-layer-or-do-they-count-as-an-integral-part-of-the-http-server/'>Rest &#8211; Do web applications use HTTP as a transport layer, or do they count as an integral part of the HTTP server</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/rest-designing-a-rest-api-setting-business-logic-error-codes-in-http-headers-or-within-the-response-payload/'>Rest &#8211; Designing a REST API: setting business logic error codes in http headers or within the response payload</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-to-handle-api-responds-with-dto-or-error-message/'>How to handle API responds with DTO or Error Message</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/any-technical-reason-not-to-use-the-own-http-response-code-text-if-i-develop-both-server-client/'>Any technical reason not to use the own HTTP response code TEXT if I develop both server &#038; Client</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>