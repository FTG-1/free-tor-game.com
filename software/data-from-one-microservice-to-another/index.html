<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Data from one microservice to another &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076909 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076909" class="post-1076909 software type-software status-publish hentry category-software tag-api tag-microservices tag-web"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Data from one microservice to another</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">microservices</span><span class="mr-2 badge badge-warning">web</span></p><div class="entry-content"><p>How does one service get the data from another service? I will give few examples:</p><p>1) Let&#39;s say we have two services which need to share the data: <code>User Service</code> and <code>Order Service</code>. <code>Order Service</code> pretty much will want to get some data <code>User Service</code>&#39;s database has like <code>address</code>, <code>bonus points</code> to cut the price, but all <code>Order Service</code> receives about a user is its <code>userId</code>, it doesn&#39;t have a direct access to the User DB.</p><p>2) An app has a user balance system with some internal coins used as base currency. The app provides different kind of services to buy which user can spend those internal coins for. The service responsible for fulfilling user&#39;s request should be somehow able to tell <code>User Service</code> or <code>Balance Service</code> (if it was decided to split balance from users to a different service) to reduce its balance depending on how much it costed or check the balance and then return a error if it&#39;s insufficient.</p><p>3) An app from #2 situation doesn&#39;t have predetermined price anymore, tasks got so complicated that now we need to run <code>Analyze Service</code> and now the task will go to that service to determinate the price of a task, what service should handle the task and only then the service which is able to fulfill user&#39;s request will do it.</p><p>So, I will give my thoughts about these after reading numerous articles about microservice architecture:</p><p>1) I see few ways to do it:</p><ul><li>direct synchronous HTTP request from one service to another to get the necessary data (slow, most importantly services are now coupled and I loose benefits of microservice architecture)</li><li>client app has all necessary data in its global store (if it&#39;s a SPA app e.g.) and will just send them in the request (but we still need a mean to check if the data we got is valid&#8230;)</li><li>saving necessary data in JWT (weird..?)</li></ul><p>2) I guess here is a good example where message brokers come in handy. I could send a message about the task being done with its price and userId to <code>User Service</code> or <code>Balance Service</code> and callback will reduce user&#39;s balance.</p><p>3) Message broker again. <code>Analyze Service</code> sends a message, bound performing task service will start doing a task after analyze is finished, which task service will do that depends on the queue <code>Analyze Service</code> will send a message in.</p><p>I&#39;m not sure about any of solutions here so here is my question. What are common ways to deal with those kind of problems?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Service dependencies (and losing track thereof) are not uncommon with a microservice architecture. It&#39;s also expected that services have local data and this data can be keyed with a primary ID from another service. For example, some services are going to have some data attached to a user ID like you observed.</p><p>You should look at whether or not you have drawn your domain boundaries correctly and where they are over- or undersized (or need to be co-located in the same service)</p><p>You are correct that it&#39;s not good to have the knowledge how to get a particular object from another service in a service. In the case of a user service, you might have to accept that such a service will likely be needed as the need for user data might be frequent. In this case, you might want to create a layer or directed graph model (everyone may use the user service, user service may not use order service...)</p><p>There is also the orchestrator model. In that model, the application or an orchestrator service pulls all the needed data together and then hands if off for processing. So you would read from product, user, bonus-point etc. and then pass all of that into order service as data. This reduces the number of locations where the knowledge how to retrieve this data exists.</p><p>Side effects (like crediting bonus points) benefit from an asynchronous message passing mechanism. Crediting bonus points does not block order processing and order processing does not need to wait for bonus points to be credited. As long as bonus points are credited eventually, you are fine. The message passing subsystem can buffer messages if that service is down and you again remove the knowledge where that service is located and how it operates from the caller.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../messaging-between-microservices-on-aws/'>Messaging between microservices on AWS</a></li><li class="list-group-item"><a href='../rest-cron-job-microservice/'>Rest &#8211; Cron Job Microservice</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>