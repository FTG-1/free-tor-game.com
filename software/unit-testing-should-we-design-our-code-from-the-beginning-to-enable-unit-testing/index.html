<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; Should we design our code from the beginning to enable unit testing &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065701 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065701" class="post-1065701 software type-software status-publish hentry category-software tag-asp-net-core tag-interfaces tag-unit-testing tag-web-api"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; Should we design our code from the beginning to enable unit testing</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">asp.net-core</span><span class="mr-2 badge badge-info">interfaces</span><span class="mr-2 badge badge-warning">unit testing</span><span class="mr-2 badge badge-primary">web-api</span></p><div class="entry-content"><p>There&#39;s a debate going on in our team at the moment as to whether modifying code design to allow unit testing is a code smell, or to what extent it can be done without being a code smell. This has come about because we&#39;re only just starting to put practices in place that are present in just about every other software dev company.</p><p>Specifically, we will have a Web API service that will be very thin. Its main responsibility will be marshalling web requests/responses and calling an underlying API that contains the business logic.</p><p>One example is that we plan on creating a factory that will return an authentication method type. We have no need for it to inherit an interface as we don&#39;t anticipate it ever being anything other than the concrete type it will be. However, to unit test the Web API service we will need to mock this factory.</p><p>This essentially means we either design the Web API controller class to accept DI (through its constructor or setter), which means we&#39;re designing part of the controller just to allow DI and implementing an interface we don&#39;t otherwise need, or we use a third party framework like Ninject to avoid having to design the controller in this way, but we&#39;ll still have to create an interface.</p><p>Some on the team seem reluctant to design code just for the sake of testing. It seems to me that there has to be some compromise if you hope to unit test, but I&#39;m unsure how allay their concerns.</p><p>Just to be clear, this is a brand new project, so it&#39;s not really about modifying code to enable unit testing; it&#39;s about designing the code we&#39;re going to write to be unit testable.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Reluctance to modify code for the sake of testing shows that a developer hasn&#39;t understood the role of tests, and by implication, their own role in the organization.</p><p>The software business revolves around delivering a code base that creates business value. We have found, through long and bitter experience, that we cannot create such code bases of nontrivial size without testing. Therefore, test suites are an integral part of the business.</p><p>Many coders pay lip service to this principle but subconsciously never accept it. It is easy to understand why this is; the awareness that our own mental capability is not infinite, and is in fact, surprisingly limited when confronted with the enormous complexity of a modern code base, is unwelcome and easily suppressed or rationalized away. The fact that test code is not delivered to the customer makes it easy to believe that it is a second-class citizen and non-essential compared to the &#34;essential&#34; business code. And the idea of adding testing code <em>to the business code</em> seems doubly offensive to many.</p><p>The trouble with justifying this practice has to do with the fact that the entire picture of how value is created in a software business is often only understood by higher-ups in the company hierarchy, but these people don&#39;t have the detailed technical understanding of the coding workflow that is required to understand <em>why</em> testing can&#39;t be gotten rid of. Therefore they are too often pacified by practitioners who assure them that testing may be a good idea in general, <em>but</em> &#34;we are elite programmers who don&#39;t need crutches like that&#34;, or that &#34;we don&#39;t have time for that right now&#34;, etc. etc. The fact that business success is a numbers game and that avoiding technical debt, assuring quality etc. shows its value only in the longer term means that they are often quite sincere in that belief.</p><p>Long story short: making code testable is an essential part of the development process, no different than in other fields (many microchips are designed with a substantial proportion of elements <em>only</em> for testing purposes), but it&#39;s very easy to overlook the very good reasons for that. Don&#39;t fall into that trap.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-whats-the-best-way-to-build-a-factory-using-ninject/'>Unit-testing &#8211; What&#8217;s the best way to build a factory using NInject</a></li><li class="list-group-item"><a href='../unit-testing-unit-testing-its-a-code-smell-if-youre-refactoring-and-there-are-no-collaborators/'>Unit-testing &#8211; Unit Testing: &#8220;It&#8217;s a code smell if you&#8217;re refactoring and there are no collaborators&#8221;</a></li><li class="list-group-item"><a href='../c-unit-testing-functions-which-have-parameters-of-classes-where-source-code-is-not-accessible/'>C# &#8211; Unit-Testing functions which have parameters of classes where source code is not accessible</a></li><li class="list-group-item"><a href='../unit-testing-should-you-hard-code-your-data-across-all-unit-tests/'>Unit-testing &#8211; Should you hard code your data across all unit tests</a></li><li class="list-group-item"><a href='../c-unit-testing-side-effect-heavy-code/'>C++ &#8211; Unit testing side effect-heavy code</a></li><li class="list-group-item"><a href='../unit-testing-is-refactoring-for-the-purpose-of-unit-testing-a-code-smell/'>Unit-testing &#8211; Is refactoring for the purpose of unit testing a code smell</a></li><li class="list-group-item"><a href='../java-unit-testing-factories-and-the-law-of-demeter/'>Java &#8211; Unit testing, factories, and the Law of Demeter</a></li><li class="list-group-item"><a href='../c-how-to-unit-test-the-presence-of-specific-file-contents-through-an-interface/'>C# &#8211; How to unit-test the presence of specific file contents, through an interface</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>