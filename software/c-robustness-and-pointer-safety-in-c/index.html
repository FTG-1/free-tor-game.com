<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Robustness and pointer safety in C++ &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080915 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080915" class="post-1080915 software type-software status-publish hentry category-software tag-c"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Robustness and pointer safety in C++</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span></p><div class="entry-content"><p>I&#39;m currently building a server responsible of storing and managing few million records of fairly complex and interconnected data. For reasons beyond my control the work has to be done with C++.</p><p>I have my concerns about error handling and especially pointer safety. Dereferencing a null pointer can cause the entire server to crash whereas in some &#8211; perhaps more suitable &#8211; languages you would get a null pointer exception which you can then handle. So, basically, a bug in handling of some rare corner case of a rare operation can bring the whole service down instead of just making one particular request to fail. Bugs are impossible to avoid so how can I ensure availability and robustness in such an environment?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Use <a href="http://en.wikipedia.org/wiki/C++11" rel="nofollow noreferrer">C++11</a> (e.g. with <a href="http://gcc.gnu.org/" rel="nofollow noreferrer">GCC</a> 4.9.1), not some earlier standard. Read more about <a href="http://en.wikipedia.org/wiki/Memory_leak" rel="nofollow noreferrer">memory leaks</a>, <a href="http://en.wikipedia.org/wiki/Smart_pointer" rel="nofollow noreferrer">smart pointers</a>, <a href="http://en.wikipedia.org/wiki/Buffer_overflow" rel="nofollow noreferrer">buffer overflow</a>, <a href="http://en.wikipedia.org/wiki/Memory corruption" rel="nofollow noreferrer">memory corruption</a>, <a href="http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization" rel="nofollow noreferrer">RAII</a>.</p><p>If you follow several coding guidelines, notably the <a href="http://en.wikipedia.org/wiki/Rule_of_three_(C++_programming)" rel="nofollow noreferrer">rule of three</a> (which in C++11 is actually a rule of five), you would be able to write robust code. Use smart pointer templates like <a href="http://www.cplusplus.com/reference/memory/shared_ptr/" rel="nofollow noreferrer">std::shared_ptr</a>, <a href="http://www.cplusplus.com/reference/memory/unique_ptr/" rel="nofollow noreferrer">std::unique_ptr</a> and use standard <a href="http://www.cplusplus.com/reference/stl/" rel="nofollow noreferrer">STL containers</a>. You  should almost never use raw pointers like <code>SomeClass*</code> and <code>::operator new</code> (if you want to use them directly, you are probably wrong, and you should <em>always</em> initialize them, often to <code>nullptr</code>; I believe that every variable should be explicitly initialized -the compiler would optimize useless initializations-, because that makes program behavior more reproductible.).</p><p>C++11 is a difficult language. Take several weeks to read several books about it, notably by B.Stroutrup: <a href="http://www.stroustrup.com/Programming/" rel="nofollow noreferrer">Programming -- Principles and Practice Using C++</a>, a <a href="http://www.stroustrup.com/Tour.html" rel="nofollow noreferrer">Tour of C++</a>, <a href="http://www.stroustrup.com/4th.html" rel="nofollow noreferrer">The C++ programming language</a>.</p><p>Be aware that C++11 is a different language than C (and even than its predecessor C++98). You need to take time to learn it. Look also inside the source code of several recent free software projects coded in C++.</p><p>Compile with all warnings and debug info (<code>g++ -Wall -Wextra -g</code>). Improve your code till you got no warnings. Make an exhaustive test suite. Use <a href="http://valgrind.org/" rel="nofollow noreferrer">valgrind</a> (on systems where it is available). Perhaps consider using frameworks like <a href="http://pocoproject.org/" rel="nofollow noreferrer">Poco</a>, <a href="http://www.boost.org/" rel="nofollow noreferrer">Boost</a>, <a href="http://qt-project.org/" rel="nofollow noreferrer">Qt</a>. On production machine, use a watchdog.</p><p>BTW, you might learn more about <a href="http://en.wikipedia.org/wiki/Garbage_collection_(computer_science)" rel="nofollow noreferrer">Garbage Collection</a> (see also the <a href="http://gchandbook.org/" rel="nofollow noreferrer">GC handbook</a>), and notice that C++ favors <a href="http://en.wikipedia.org/wiki/Reference_counting" rel="nofollow noreferrer">reference counting</a>, which can be viewed as a simple and limited form of GC (which is unfriendly to <a href="http://en.wikipedia.org/wiki/Circular_reference" rel="nofollow noreferrer">circular references</a>).</p><p>You could also use operating system specific things (for Linux, read <a href="http://advancedlinuxprogramming.com/" rel="nofollow noreferrer">Advanced Linux Programming</a> and <a href="http://man7.org/linux/man-pages/man7/signal.7.html" rel="nofollow noreferrer">signal(7)</a>...) to catch <em>some</em> runtime errors. (I&#39;m not sure it is a good idea to catch <code>SIGSEGV</code>, you&#39;ll need some very system &amp; processor specific code; but it is doable).</p><p>Also, you could perhaps generate some of your C++ code (see also <a href="https://softwareengineering.stackexchange.com/a/257873/40065">this</a>). My <a href="http://gcc-melt.org/" rel="nofollow noreferrer">MELT</a> system is doing so (and you might also customize <a href="http://gcc.gnu.org/" rel="nofollow noreferrer">GCC</a> with MELT to add some additional coding rules checking).</p><p>You seems very concerned about null pointer dereferences. If that scares you so much (it should not, since it is actually an easy bug to find; memory leaks are harder to find), you might craft your own smart pointer (above existing facilities) which would raise an exception in that case.</p><p>BTW, robustness of your code is much more related to the code size and the care and effort put in developing and testing it, than to the amount of data or records it has to process: a well crafted 30KLOC software able to handle 1000 records would probably be able to handle many dozens of millions of records, if given enough resources (notably computer power, disk, and RAM). A few millions of records does not feel scary (consider using <a href="http://sqlite.org/" rel="nofollow noreferrer">Sqlite</a> or <a href="http://postgresql.org/" rel="nofollow noreferrer">Postgresql</a> or <a href="http://mongodb.org/" rel="nofollow noreferrer">Mongodb</a>, etc, etc....).</p><p>Notice that some people are able to write very robust C or C++ code; in particular, many free software database management systems (Sqlite, Postgresql, Mongodb) are coded in C or C++ and are able to run for years, managing terabytes -or perhaps petabytes- of data. If possible, make your software published as <a href="http://en.wikipedia.org/wiki/Free_software" rel="nofollow noreferrer">free software</a> (and develop it in the open): you&#39;ll get useful feedback from outside.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-should-i-pass-array-or-pointer/'>C++ &#8211; Should I pass array or pointer</a></li><li class="list-group-item"><a href='../c-debugging-memory-corruption/'>C++ &#8211; Debugging memory corruption</a></li><li class="list-group-item"><a href='../c-use-of-raw-pointer-of-stdvector/'>C++ &#8211; Use of raw pointer of std::vector</a></li><li class="list-group-item"><a href='../c-const-reference-and-const-pointer-how-do-they-work/'>C++ &#8211; const reference and const pointer. How do they work</a></li><li class="list-group-item"><a href='../c-unique-pointer-initialisation/'>C++ &#8211; Unique pointer initialisation</a></li><li class="list-group-item"><a href='../c-dependency-injection-in-c-use-pointer-or-object/'>C++ &#8211; Dependency Injection in C++ use pointer or object</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>