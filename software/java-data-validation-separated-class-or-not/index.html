<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Data validation: separated class or not &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065474 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065474" class="post-1065474 software type-software status-publish hentry category-software tag-data tag-design tag-java tag-validation"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Data validation: separated class or not</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">data</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">validation</span></p><div class="entry-content"><p>When I have a lot of data that needs to be validated, should I create a new class for the sole purpose of validation or should I stick with in-method validation?</p><p>My particular example contemplates a tournament and a event/category class: <code>Tournament</code> and <code>Event</code>, which models a sport tournament and each tournament has one or many categories.</p><p>There are all sort of things to validate in these classes: the players should be empty, should be unique, the number of matches each player should play, the number of players each match has, predefined matchups, and a really big etcetera including much more complex rules.</p><p>There are also some parts I need to validate as a whole, like how classes integrate with each other. For example, the unitary validation of a <code>Player</code>can be just fine, but if an event has the same player twice, that&#39;s a validation error.</p><p>So how about this?: I forget about absolutely any pre-check when using my model classes&#39; setters and similar methods to add data and instead I let validation classes handle that.</p><p>So we will have something like <code>EventValidator</code> with an <code>Event</code> as a member, and a <code>validate()</code> method that validates the whole object, plus singular methods to validate all members&#39; rules.</p><p>Then, before instantiating a validable object, I will execute the validation to prevent illegal values.</p><p>Is my design correct? Should I do something differently?</p><p>Also, should I use boolean returning validation methods? Or just throw an exception if the validation fails? It seems to me the best option would be boolean returning methods and throw the exception when the object is instantianted, for example:</p><pre><code>public Event() {
    EventValidator eventValidator = new EventValidator(this);
    if (!eventValidator.validate()) {
        // show error messages with methods defined in the validator
        throw new Exception(); // what type of exception would be best? should I create custom ones?
    }
}
</code></pre></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>It is OK to delegate any logic by means of composition</strong> if that logic is going to change dynamically during the execution of a program. Complex validations like the ones you explain are as good a candidate as any to be delegated to another class via composition.</p><p>Remember though that validations can occur in different moments.</p><p>Instantiating a concrete validator like in your example is a bad idea because it couples your Event class to that particular validator.</p><p>Let&#39;s assume you are not using any DI framework.</p><p>You can add the validator to the constructor, or inject it with a setter method. I suggest a creator method in a factory instantiates both the Event and the validator and then passes it either to the event constructor or with a setValidator method.</p><p>Obviously a Validator interface and or abstract class should be writen so your classes depend on it and not on any concrete validator.</p><p>Executing the validate method in the constructor can be problematic because all the state you want to validate may not be in place yet.</p><p>I suggest that you creta a Validable interface and let your classes implement it, that interface could have a validate() method.</p><p>That way the upper components of your application call the validate method at will (which in turn is delegated to the validator member).</p><p>==&gt; IValidable.java &lt;==</p><pre><code>import java.util.List;

public interface IValidable {
    public void setValidator(IValidator&lt;Event&gt; validator_);
    public void validate() throws ValidationException;
    public List&lt;String&gt; getMessages();
}
</code></pre><p>==&gt; IValidator.java &lt;==</p><pre><code>import java.util.List;

public interface IValidator&lt;T&gt; {
    public boolean validate(T e);
    public List&lt;String&gt; getValidationMessages();
}
</code></pre><p>==&gt; Event.java &lt;==</p><pre><code>import java.util.List;

public class Event implements IValidable {

    private IValidator&lt;Event&gt; validator;

    @Override
    public void setValidator(IValidator&lt;Event&gt; validator_) {
        this.validator = validator_;
    }

    @Override
    public void validate() throws ValidationException {
        if (!this.validator.validate(this)){
            throw new ValidationException(&#34;WTF!&#34;);
        }
    }

    @Override
    public List&lt;String&gt; getMessages() {
        return this.validator.getValidationMessages();
    }

}
</code></pre><p>==&gt; SimpleEventValidator.java &lt;==</p><pre><code>import java.util.ArrayList;
import java.util.List;

public class SimpleEventValidator implements IValidator&lt;Event&gt; {

    private List&lt;String&gt; messages = new ArrayList&lt;String&gt;();
    @Override
    public boolean validate(Event e) {
        // do validations here, by accessing the public getters of e
        // propulate list of messages is necessary
        // this example always returns false    
        return false;
    }

    @Override
    public List&lt;String&gt; getValidationMessages() {
        return this.messages;
    }

}
</code></pre><p>==&gt; ValidationException.java &lt;==</p><pre><code>public class ValidationException extends Exception {
    public ValidationException(String message) {
        super(message);
    }

    private static final long serialVersionUID = 1L;
}
</code></pre><p>==&gt; Test.java &lt;==</p><pre><code>public class Test {
    public static void main (String args[]){
        Event e = new Event();
        IValidator&lt;Event&gt; v = new SimpleEventValidator();
        e.setValidator(v);
        // set other thins to e like
        // e.setPlayers(player1,player2,player3)
        // e.setNumberOfMatches(3);
        // etc
        try {
            e.validate();
        } catch (ValidationException e1) {
            System.out.println(&#34;Your event doesn&#39;t comply with the federation regulations for the following reasons: &#34;);
            for (String s: e.getMessages()){
                System.out.println(s);
            }
        }
    }
}
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-how-to-design-an-iterable-but-immutable-read-only-collection/'>Java &#8211; How to design an iterable but immutable (read-only) collection</a></li><li class="list-group-item"><a href='../java-breaking-the-contract-throw-exception-or-do-nothing/'>Java &#8211; Breaking the contract: throw exception or do nothing</a></li><li class="list-group-item"><a href='../java-why-does-java-have-void-methods/'>Java &#8211; Why does Java have `void` methods</a></li><li class="list-group-item"><a href='../clean-architecture-validation-in-domain-vs-data-persistence-layer/'>Clean architecture validation in domain vs data persistence layer</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>