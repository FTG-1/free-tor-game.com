<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Sum Types vs Polymorphism &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079860 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079860" class="post-1079860 software type-software status-publish hentry category-software tag-design tag-functional-programming tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Sum Types vs Polymorphism</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design</span><span class="mr-2 badge badge-info">functional programming</span><span class="mr-2 badge badge-warning">object-oriented</span></p><div class="entry-content"><p>This past year I took the leap and learned a functional programming language (F#) and one of the more interesting things that I&#39;ve found is how it affects the way I design OO software. The two things I find myself missing most in OO languages are pattern matching and sum types. Everywhere I look I see situations that would be trivially modeled with a discriminated union, but I am reluctant to crowbar in some OO DU implementation that feels unnatural to the paradigm.</p><p>This generally leads me to create intermediate types to handle the <code>or</code> relationships that a sum type would handle for me. It also seems to lead to a good deal of branching. If I read people like <a href="http://misko.hevery.com/2008/12/08/clean-code-talks-inheritance-polymorphism-testing/" rel="noreferrer">Misko Hevery</a>, he suggests that good OO design can minimize branching through polymorphism.</p><p>One of the things I avoid as much as possible in OO code is types with <code>null</code> values. Obviously the <code>or</code> relationship can be modeled by a type with one <code>null</code> value and one non-<code>null</code> value, but this means <code>null</code> tests everywhere. Is there a way to model heterogeneous but logically associated types polymorphically? Design strategies or patterns would be very helpful, or simply ways to think about heterogeneous and associated types generally in the OO paradigm.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Like you, I wish that discriminated unions were more prevalent; however, the reason they are useful in most functional languages is that they provide exhaustive pattern matching, and without this, they are just pretty syntax: not just pattern matching: <em>exhaustive</em> pattern matching, so that the code doesn&#39;t compile if you don&#39;t cover every possibility: this is what gives you power.</p><p>The only way to do anything useful with a sum type is to decompose it, and branch depending on which type it is (e.g. by pattern matching). The great thing about interfaces is that you don&#39;t care what type something is, because you know you can treat it like an <code>iface</code>: no unique logic needed for each type: no branching.</p><p>This isn&#39;t a &#34;functional code has more branching, OO code has less&#34;, this is a &#34;&#39;functional languages&#39; are better suited to domains where you have unions - which mandate branching - and &#39;OO languages&#39; are better suited to code where you can expose common behaviour as a common interface - which might feel like it does less branching&#34;. The branching is a function of your design and the domain. Quite simply, if your &#34;heterogeneous but logically associated types&#34; can&#39;t expose a common interface, then you have to branch/pattern-match over them. This is a domain/design problem.</p><p>What Misko may be referring to is the general idea that if you <em>can</em> expose your types as a common interface, then using OO features (interfaces/polymorphism) will make your life better by putting type-specific behaviour <em>in the type</em> rather than in the consuming code.</p><p>It is important to recognise that interfaces and unions are kind of the opposite of each other: an interface defines some stuff the <em>type</em> has to implement, and the union defines some stuff the <em>consumer</em> has to consider. If you add a method to an interface, you have changed that contract, and now <em>every type</em> that previously implemented it needs to be updated. If you add a new type to a union, you have changed that contract, and now <em>every exhaustive pattern matching</em> over the union has to be updated. They fill different roles, and while it may sometimes be possible to implement a system &#39;either way&#39;, which you go with is a design decision: neither is inherently better.</p><p>One benefit of going with interfaces/polymorphism is that the consuming code is more extensible: you can pass in a type that wasn&#39;t defined at design time, so long as it exposes the agreed interface. On the flip side, with a static union, you can exploit behaviours that weren&#39;t considered at design time by writing new exhaustive pattern-matchings, so long as they stick to the contract of the union.</p><hr/><p>Regarding the &#39;Null Object Pattern&#39;: this isn&#39;t not a silver bullet, and does <em>not</em> replace <code>null</code> checks. All it does it provide a way to avoid some &#39;null&#39; checks where the &#39;null&#39; behaviour can be exposed behind a common interface. If you can&#39;t expose the &#39;null&#39; behaviour behind the type&#39;s interface, then you will be thinking &#34;I really wish I could exhaustively pattern match this&#34; and will end up performing a &#39;branching&#39; check.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../values-types-kinds-and/'>Values, types, kinds, and…</a></li><li class="list-group-item"><a href='../is-higher-rank-parametric-polymorphism-useful/'>Is higher-rank parametric polymorphism useful</a></li><li class="list-group-item"><a href='../object-oriented-how-many-types-of-polymorphism-are-there-in-the-python-language/'>Object-oriented &#8211; How many types of polymorphism are there in the Python language</a></li><li class="list-group-item"><a href='../design-switch-vs-polymorphism/'>Design &#8211; Switch vs Polymorphism</a></li><li class="list-group-item"><a href='../object-oriented-polymorphism-if-you-can-already-have-methods-that-are-the-same-defined-in-different-types/'>Object-oriented &#8211;  polymorphism if you can already have methods that are the same defined in different types</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>