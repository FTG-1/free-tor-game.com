<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Return considered harmful? Can code be functional without it &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1066934 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1066934" class="post-1066934 software type-software status-publish hentry category-software tag-architecture tag-functional-programming tag-object-oriented tag-side-effect"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Return considered harmful? Can code be functional without it</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">functional programming</span><span class="mr-2 badge badge-warning">object-oriented</span><span class="mr-2 badge badge-primary">side-effect</span></p><div class="entry-content"><p>OK, so the title is a little clickbaity but seriously I&#39;ve been on a <a href="https://web.archive.org/web/20200227104331/https://pragprog.com/articles/tell-dont-ask" rel="nofollow noreferrer">tell, don&#39;t ask</a> kick for a while. I like how it encourages methods to be used as <a href="https://en.wikipedia.org/wiki/Message_passing" rel="nofollow noreferrer">messages</a> in true object-oriented fashion. But this has a nagging problem that has been rattling about in my head.</p><p>I have come to suspect that well-written code can follow OO principles and functional principles at the same time. I&#39;m trying to reconcile these ideas and the big sticking point that I&#39;ve landed on is <code>return</code>.</p><p>A pure function has two qualities:</p><ol><li><p>Calling it repeatedly with the same inputs always gives the same result. This implies that it is immutable. Its state is set only once.</p></li><li><p>It produces no side effects. The only change caused by calling it is producing the result.</p></li></ol><p>So, how does one go about being purely functional if you&#39;ve sworn off using <code>return</code> as your way of communicating results?</p><p>The <a href="https://martinfowler.com/bliki/TellDontAsk.html" rel="nofollow noreferrer">tell, don&#39;t ask</a> idea works by using what some would consider a side effect.  When I deal with an object I don&#39;t ask it about its internal state. I tell it what I need to be done and it uses its internal state to figure out what to do with what I&#39;ve told it to do. Once I tell it, I don&#39;t ask what it did. I just expect it to have done something about what it was told to do.</p><p>I think of Tell, Don&#39;t Ask as more than just a different name for encapsulation. When I use <code>return</code> I have no idea what called me. I can&#39;t speak it&#39;s protocol, I have to force it to deal with my protocol. Which in many cases gets expressed as the internal state. Even if what is exposed isn&#39;t exactly state it&#39;s usually just some calculation performed on state and input args. Having an interface to respond through affords the chance to massage the results into something more meaningful than internal state or calculations. That is <a href="https://en.wikipedia.org/wiki/Message_passing" rel="nofollow noreferrer">message passing</a>. <a href="https://softwareengineering.stackexchange.com/questions/365829/return-considered-harmful-can-code-be-functional-without-it/365830?noredirect=1#comment797631_365880">See this example</a>.</p><p>Way back in the day, when disk drives actually had disks in them and a thumb drive was what you did in the car when the wheel was too cold to touch with your fingers, I was taught how annoying people consider functions that have out parameters. <code>void swap(int *first, int *second)</code> seemed so handy but we were encouraged to write functions that returned the results. So I took this to heart on faith and started following it.</p><p>But now I see people building <a href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html" rel="nofollow noreferrer">architectures</a> where objects let how they were constructed control where they send their results. <a href="https://codereview.stackexchange.com/questions/148809/a-button-as-a-clean-architecture-plugin">Here&#39;s an example implementation</a>. Injecting the output port object seems a bit like the out parameter idea all over again. But that&#39;s how tell-don&#39;t-ask objects tell other objects what they&#39;ve done.</p><p>When I first learned about side effects I thought of it like the output parameter. We were being told not to surprise people by having some of the work happen in a surprising way, that is, by not following the <code>return result</code> convention. Now sure, I know there&#39;s a pile of parallel asynchronous threading issues that side effects muck about with but return is really just a convention that has you leave the result pushed on the stack so whatever called you can pop it off later. That&#39;s all it really is.</p><p>What I&#39;m really trying to ask:</p><p>Is <code>return</code> the only way to avoid all that side effect misery and get thread safety without locks, etc. Or can I follow <a href="http://wiki.c2.com/?TellDontAsk" rel="nofollow noreferrer">tell, don&#39;t ask</a> in a purely functional way?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If a function doesn&#39;t have any side effects and it doesn&#39;t return anything, then the function is useless. It is as simple as that.</p><p>But I guess you can use some cheats if you want to follow the <em>letter</em> of the rules and ignore the underlying reasoning. For example using an out parameter is strictly speaking not using a return. But it still does precisely the same as a return, just in a more convoluted way. So if you believe return is bad for a <em>reason</em>, then using an out parameter is clearly bad for the same underlying reasons.</p><p>You can use more convoluted cheats. E.g. Haskell is famous for the  IO monad trick where you can have side effects in practice, but still not strictly speaking have side effects from a theoretical viewpoint. Continuation-passing style is another trick, which well let you avoid returns at the price of turning your code into spaghetti.</p><p>The bottom line is, absent silly tricks, the two principles of side-effect free functions and &#34;no returns&#34; are simply not compatible. Furthermore I will point out both of them are really bad principles (dogmas really) in the first place, but that is a different discussion.</p><p>Rules like &#34;tell, don&#39;t ask&#34; or &#34;no side effects&#34; cannot be applied universally. You always have to consider the context. A program with no side effects is literally useless. Even pure functional languages acknowledge that. Rather they strive to <em>separate</em> the pure parts of the code from the ones with side-effects. The point of the State or IO monads in Haskell is not that you avoid side effects - because you can&#39;t - but that the presence of side effects is <em>explicitly indicated</em> by the function signature.</p><p>The tell-dont-ask rule applies to a different kind of architecture - the style where objects in the program are independent &#34;actors&#34; communicating with each other. Each actor is basically autonomous and encapsulated. You can send it a message and it decides how to react to it, but you cannot examine the internal state of the actor from the outside. This means you cannot tell if a message changes the internal state of the actor/object. State and side effects are hidden <em>by design</em>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../asynchronous-programming-in-functional-languages/'>Asynchronous Programming in Functional Languages</a></li><li class="list-group-item"><a href='../can-functional-programming-be-used-to-develop-a-full-enterprise-application/'>Can functional programming be used to develop a full enterprise application</a></li><li class="list-group-item"><a href='../misconceptions-about-purely-functional-languages/'>Misconceptions about purely functional languages</a></li><li class="list-group-item"><a href='../object-oriented-what-are-some-techniques-i-can-use-to-refactor-object-oriented-code-into-functional-code/'>Object-oriented &#8211; What are some techniques I can use to refactor Object Oriented code into Functional code</a></li><li class="list-group-item"><a href='../side-effects-breaking-referential-transparency/'>Side Effects Breaking Referential Transparency</a></li><li class="list-group-item"><a href='../do-functional-programming-languages-disallow-side-effects/'>Do functional programming languages disallow side effects</a></li><li class="list-group-item"><a href='../c-what-can-go-wrong-in-context-of-functional-programming-if-the-object-is-mutable/'>C# &#8211; what can go wrong in context of functional programming if the object is mutable</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>