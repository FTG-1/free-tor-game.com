<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; How to design a buffer for a console &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087751 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087751" class="post-1087751 software type-software status-publish hentry category-software tag-algorithms tag-design tag-design-patterns tag-multithreading tag-uml"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; How to design a buffer for a console</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">algorithms</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">multithreading</span><span class="mr-2 badge badge-danger">uml</span></p><div class="entry-content"><h1>Problem</h1><p>I have a graphical console widget that receives output from an interpreter. Unfortunately the console is not fast enough to paint the output in real-time. So I had to implement a buffer(FIFO Thread Safe Queue) that delayed the writes to the console by 5ms. So when normally a loop of 1000 prints would be done in less than 1 ms, it would take 5000ms to print everything.</p><p><strong>Sequence diagram for the buffer:</strong></p><p><a href="https://i.stack.imgur.com/8vjKj.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/8vjKj.png" alt="Sequence diagram for a time delayed buffer"/></a><br /> <code>sendCode</code>: Send code that the interpreter can compile and run.</p><p><code>writeLine</code>:Write output from the interpreter to the buffer.</p><p><code>startTimer</code>:Starts a timer that times out every 5ms.</p><p><code>getLine</code>:Get the oldest line out of the buffer. Called every 5ms.</p><p><code>line</code>: Line that gets sent to the console where it is displayed.</p><h1>What I Need</h1><p>While this strategy of delaying the output works for now, it is not very practical when real-time solutions are needed. I know one other strategy which is to set a buffer size. Then when the buffer size is reached, flush the output. This is a much better strategy since the console will not be choking considering lines are being sent in blocks.</p><p>But the problem is that if I set a buffer size of say 50 lines, the user will not see any output until 50 lines have been printed. Reducing the buffer size does not really help either, because then it&#39;s meant to reduce stress on the console.</p><p><strong>How can I make a buffer system so the output is printed in real-time<br /> while not having the console dying on me.</strong></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>To add more flesh to the bones of Wikiti&#39;s comments.</p><p>You need a fixed sized buffer and a timer set to n ms.</p><ol><li><p>When you write code to the buffer, if the buffer was empty, (re-)start the timer to n ms.</p></li><li><p>If you write to the buffer and it is full then flush it to the console, clear the buffer and stop the timer.</p></li><li><p>If the timer expires and there is code in the buffer, flush it to the console, clear the buffer and stop the timer.</p></li><li><p>If the timer expires and there isn&#39;t code in the buffer, stop the timer.</p></li></ol><p>This algorithm should be sufficient. It may  take a bit of trial and error to get a good balance of buffer size and timer delay to get the smoothest console interaction. You may also find some mileage in making the flush/clear/stop available as a manual flush function though this isn&#39;t strictly necessary.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/java-sharing-buffer-between-multiple-threads/'>Java &#8211; Sharing buffer between multiple threads</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/database-design-relationship-for-threading-messages/'>Database design/relationship for threading messages</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-how-to-design-console-application-with-good-seperation-of-ui-from-logic/'>C# &#8211; How to design console application with good seperation of UI from Logic</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-to-design-a-uml-class-diagram-for-two-sub-systems/'>How to design a UML class diagram for two sub systems</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/design-how-to-design-a-dynamic-thread-allocator/'>Design &#8211; How to design a dynamic thread allocator</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/design-pattern-for-applying-different-taxes-based-on-many-different-factors/'>Design pattern for applying different taxes based on many different factors</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/design-pattern-for-creating-object-hidden-from-client/'>Design pattern for creating object hidden from client</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>