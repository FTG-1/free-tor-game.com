<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Web-development &#8211; How to integrate local web development environments with a central SSO solution &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080843 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080843" class="post-1080843 software type-software status-publish hentry category-software tag-development-environment tag-sso tag-web-development"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Web-development &#8211; How to integrate local web development environments with a central SSO solution</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">development-environment</span><span class="mr-2 badge badge-info">sso</span><span class="mr-2 badge badge-warning">web-development</span></p><div class="entry-content"><p>We have a single-page web application, and we have a new SSO site (also our own) using OAuth2, and are looking to hook them up.</p><p>On our production/staging/CI deployments, it&#39;s easy to hook everything up. For instance:</p><ul><li>on production we&#39;ll have <code>https://app.company.com</code> access our prod backend point to <code>https://sso.company.com</code> for auth and vice versa</li><li>on CI we&#39;ll have <code>https://app.ci.company.com</code> access our dev backend and point to <code>https://sso.ci.company.com</code> for auth.</li></ul><p>When we&#39;re doing development on the app, we access it locally at something like <code>http://localhost:8000/</code>, and it points to the shared dev backend. In the past, we&#39;ve had it just do its own auth against the dev backend (getting the end user&#39;s credentials and submitting it), but we&#39;d like to get it wired to use SSO to auth.</p><p>The question comes up of how we can do this without every developer who wants to develop locally needing to set up and custom configure their own SSO service. Specifically, can we use the shared dev/CI SSO and have it point to our local deployments?</p><p><strong>What we&#39;ve considered:</strong></p><ul><li>Use a proxy file/hosts file and have <code>http(s)://sso.ci.company.com</code> point to <code>http(s)://localhost:8000</code>. This burdens us with setting up HTTPS locally or have the SSO direct to a non-HTTPS URL. Also, the setup is a bit of a pain.</li><li>Have our local app redirect to the SSO with an argument identifying itself, and have the SSO use that to know where to redirect. For instance, redirect to <code>https://sso.ci.company.com/?appUrl=localhost:8000</code>. This forces us to punch an open-ended redirect in the SSO that we&#39;d have to turn off for production and it is a bit &#34;weird&#34; but it works and can be black-boxed into the app.</li><li>Just run the SSO locally on every dev box. This is basically the non-solution since it would require a lot of setup to get to a &#34;one box that can run everything&#34; script, and it negates one of our valuable advantages at the moment in that basically all you need to do is check out the code on any system and have it running. I&#39;ve seen this done before commonly though (often on top of dev VMs); I would just like to explore options that we are potentially closer to.</li></ul><p>Is there a solution to this sort of problem or aspects of our ideas we haven&#39;t considered yet?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I&#39;ve previously worked in an environment where we&#39;ve had SSO and local developer environments.</p><p>The key problem that needs to be worked on with SSO and developer environments is that the domain cookie needs to be able to be retrieved when hitting the local dev environment.</p><p>Admittingly, part of this has to do with how we set up the environment (and it was many years ago that I was involved with this).  It was a polyglot environment with a mixture of static html, old perl cgis, a weblogic server for Java EE, an iis server for some apps that needed to run with asp, and something that engineering ran.  The way that SSO communicated this information was that a reverse proxy stuck into the http headers the authenticated user name and all associated access they had.  This way, no matter who got it, they could look at the headers and continue from there.</p><p>First off, DNS was set up so that each developer had a host name in the &#39;dev.company.com&#39; domain - thus &#39;sxu.dev.company.com&#39; (for you) and &#39;jsmith.dev.comapny.com&#39; for John Smith.  All of these names (CNAMES) pointed to a single common dev reverse proxy (the reverse proxy had very little on it) that then looked at the virtual host name that was coming through and then forwarded out the request to the appropriate developer&#39;s machine. Note that the interactions with the SSO code was completely contained within the reverse proxy so that no additional libraries needed to be installed anywhere else.</p><p>The interaction with infrastructure was simply to add another cname to common.dev.company.com whenever we had a new hire, and then we would add their name to a file that was run through some m4 macros to generate the proper apache http.conf file for the reverse proxy (that did take some work the <em>first</em> time we did it).</p><hr/><p>With this idea in place, you may wish to consider setting up a reverse proxy that acts to just forward everything to the appropriate developer&#39;s machine over http (no matter what type of connection it received). <code>https://sxu.ci.company.com/xyz</code> goes to the reverse proxy, which handles the https, and forwards it to your dev box at <code>http://10.1.2.3/xyz</code>.  The gotcha with this approach that you have to watch for is that if you have any absolute paths in the code, or the dev&#39;s server tries to be aware of where its installed and the protocol being used to generate a link that is the same format, things might go a bit wonky (thats a technical term).</p><p>This avoids the problem of setting up https locally (only one server has is running https) or modifying the sso server to go to a non-https url.  You&#39;ve got different setup in a different place.</p><p>I am unsure if your local dev boxes respond to access <em>other than</em> localhost (its a valid configuration), if so, those will need to be modified because the request is coming from the proxy in this case rather than the local browser.</p><p>I do want to point out the side benefit that it will mean that other devs can hit your environment (you want someone to reproduce a bug while you&#39;re watching the log files that you don&#39;t know how to repo - have them hit your server).</p><p>The second option is a not-non-standard approach (I do recall several production SSO systems being configured to allow a limited set of appUrl type parameters - in part so that the external person could use SSO and go to a specific page once logged in.  Adding a mapping of &#39;dev-&gt;localhost:8000&#39; would allow for this, <em>however</em> you will need to reconsider how to address the problem of localhost doesn&#39;t get company.com cookies.  You will likely need to modify your local boxes to identify as localhost.company.com for that to work.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/web-development-web-development-no-local-server-workflow/'>Web-development &#8211; Web development: no local server workflow</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/web-development-so-im-a-developing-a-workflow-with-vagrantgit-does-this-make-sense/'>Web-development &#8211; So I&#8217;m a developing a workflow with vagrant+git&#8230;does this make sense</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/setting-up-an-aws-environment-locally/'>Setting up an [AWS] environment locally</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/remote-vs-local-api-for-local-web-app-development/'>Remote vs local API for local web app development</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-to-manage-environment-variables-in-local-development/'>How to manage environment variables in local development</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>