<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; Is it a bad practice to keep database schema scripts (DDL) and manipulation (DML) scripts in different modules &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082751 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082751" class="post-1082751 software type-software status-publish hentry category-software tag-database tag-modules tag-sql"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; Is it a bad practice to keep database schema scripts (DDL) and manipulation (DML) scripts in different modules</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">database</span><span class="mr-2 badge badge-info">modules</span><span class="mr-2 badge badge-warning">sql</span></p><div class="entry-content"><p>we have a project structure like the following</p><p>&#34;module-shared&#34; module depends on &#34;module-database&#34; module and some other modules depend on &#34;module-shared&#34; but no other module depends on &#34;module-database&#34;.</p><p>All the DML SQL scripts are stored in &#34;module-shared&#34; but DDL are stored in &#34;module-database&#34;.</p><ul><li>The advantage of this design is that</li></ul><p>we don&#39;t have to release the database if changes are around DML in &#34;module-shared&#34; and use database integration tests to make sure they are still compatible.</p><ul><li>The disadvantage is that</li></ul><p>this creates some confusions on the versions. For example you can have &#34;module-shared&#34; 2.3.1 depends on &#34;module-database&#34; 1.4.2 and eventually we will forget which version is compatible with which.</p><p><strong>Questions:</strong></p><p>Would it be a better design if we have a &#34;module-database&#34; which contains both DDL and DML (and all other database operations if any) and module-shared contains everything it had except database operations?</p><p>What&#39;s your experiences on having multi-tier architectures? do you always use modules to segregate tiers? Do you have experiences where you may have DAO and Services in the same module? If you do, where did you keep the DDL schema scripts?</p><p><strong><em>UPDATE:</em></strong> forget to mention that the DDL is versioned using database script versioning system such as flyway. So that all DDL changes are incremental</p><p>Note: e.g. a module could be gradle module, maven module, etc.</p><p>Note: I am trying my best to be not biased while asking this question. So please assume that I don&#39;t have any preference on either solution. ðŸ™‚</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>In practice, it is difficult to release a new database version.  While it is nice to have a module with the current DDL, in many cases you will likely be modifying an existing database.  I would keep it as a separate module.</p><p>The practice for DDL that I use, is to generate an upgrade (and downgrade) script for each release.  Changes that break the current release (deletions and new constraints) get deferred until the next release.  There are some other consideration that allow two releases to work with a database version.  These scripts include the DML release they apply to in their name.</p><p>Most of your DML should work over a wide range of versions.  It is possible that you will have many DML releases without DDL changes.  In other cases, you may have DDL changes to resolve performance issues that have no corresponding DML changes.</p><p>If you tag your code in your version control system, it really doesn&#39;t matter much which of the two modules changed.  Unless you check-in a version identifier,  it is OK to have multiple tags on the same code.</p><p>EDIT: I&#39;ve taken a quick look at flyway. I don&#39;t think it significantly alters the above recommendations.  I would suggest making your application DML dependencies allow the DDL version to increase.  I wouldn&#39;t want to break my application by adding an index, column, or table.  (DDL changes may include DML to update data which should be in the same repository as the DDL.)</p><p>Consider deprecating columns and tables that are being dropped.  You should be able to use text search on the DML to identify and remove use deprecated objects.  This should allow you to test some regressions without having to regress the database.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-architecting-a-modular-service-application/'>Architecture &#8211; Architecting a modular service application</a></li><li class="list-group-item"><a href='../php-how-to-handle-monetary-values-in-php-and-mysql/'>Php &#8211; How to handle monetary values in PHP and MySql</a></li><li class="list-group-item"><a href='../unit-testing-how-to-unit-test-use-tdd-methods-for-etls-and-reporting-projects/'>Unit-testing &#8211; How to unit test \ use TDD methods for ETL&#8217;s and reporting projects</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>