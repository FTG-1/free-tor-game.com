<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>What should a repository really do &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067281 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067281" class="post-1067281 software type-software status-publish hentry category-software tag-design-patterns tag-object-oriented-design tag-repository"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">What should a repository really do</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span><span class="mr-2 badge badge-info">object-oriented-design</span><span class="mr-2 badge badge-warning">repository</span></p><div class="entry-content"><p>I&#39;ve heard a lot of the repository pattern, but I quite didn&#39;t understand what a repository should really do. When I say &#34;what a repository should really do&#34; I&#39;m mainly concerned about which methods it should provide. For instance, should a repository really provide CRUD methods, or should it provide some different kind of method?</p><p>I mean, should the repositories contain business logic, or should they simply contain the logic to communicate with the data store and manage the entities to be saved or loaded?</p><p>Also I&#39;ve heard that repositories are units of persistence for aggregates. But how is that? I fail to understand how this works in practice. I thought that we should have just one interface <code>IRepository</code> which contains the CRUD methods, and then for any entity the implementation would simply contain the logic to save and retrieve such type from the data store.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Well, you can see a good example in the <a href="http://projects.spring.io/spring-data-jpa/">Spring Data Framework</a> which is based on the concept of repositories.</p><p>There you will see repositories only deal with the data store, and rarely contain any business logic (this is reserved for the service layer). So, for instance, you take a look a their design you will see they have a <a href="http://docs.spring.io/spring-data/data-commons/docs/current/api/org/springframework/data/repository/CrudRepository.html">CRUDRepository</a> interface which exposes methods to create, destroy and recover entities (among other things). There is also a <a href="http://docs.spring.io/spring-data/data-commons/docs/current/api/org/springframework/data/repository/PagingAndSortingRepository.html">PagingAndSortingRepository</a> that adds extra functionality for precisely that, sorting and paging results, etc, etc.</p><p>So, this framework is perhaps a good place to study a good repository design.</p><p>As far as I know, many of the concepts implemented by the Spring Data Framework, come from a great book called <a href="http://rads.stackoverflow.com/amzn/click/0321125215">Domain-Driven Design: Tackling Complexity in the Heart of Software</a>, the book has an entire section dedicated to Repository design.</p><p>You may consider getting a copy of it.</p><p>A small excerpt from the book explains:</p><blockquote><p>The REPOSITORY pattern is a simple conceptual framework to
 encapsulate those solutions and bring back our model focus.</p><p>A REPOSITORY represents all objects of a certain type as a conceptual
 set (usually emulated). It acts like a collection, except with more
 elaborate querying capability. Objects of the appropriate type are
 added and removed, and the machinery behind the REPOSITORY inserts
 them or deletes them from the database. This definition gathers a
 cohesive set of responsibilities for providing access to the roots of
 AGGREGATES from early life cycle through the end.</p><p>Clients request objects from the REPOSITORY using query methods that
 select objects based on criteria specified by the client, typically
 the value of certain attributes. The REPOSITORY retrieves the
 requested object, encapsulating the machinery of database queries and
 metadata mapping. REPOSITORIES can implement a variety of queries that
 select objects based on whatever criteria the client requires. They
 can also return summary information, such as a count of how many
 instances meet some criteria. They can even return summary
 calculations, such as the total across all matching objects of some
 numerical attribute.</p><p>A REPOSITORY lifts a huge burden from the client, which can now talk
 to a simple, intention-revealing interface, and ask for what it needs
 in terms of the model. To support all this requires a lot of complex
 technical infrastructure, but the interface is simple and conceptually
 connected to the domain model.</p><p><strong>Therefore:</strong></p><p>For each type of object that needs global access, create an object
 that can provide the illusion of an in-memory collection of all
 objects of that type. Set up access through a well-known global
 interface.</p><p>Provide methods to add and remove objects, which will encapsulate the
 actual insertion or removal of data in the data store. Provide methods
 that select objects based on some criteria and return fully
 instantiated objects or collections of objects whose attribute values
 meet the criteria, thereby encapsulating the actual storage and query
 technology. Provide REPOSITORIES only for AGGREGATE roots that
 actually need direct access. Keep the client focused on the model,
 delegating all object storage and access to the REPOSITORIES.</p></blockquote></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-are-we-using-the-repository-pattern-right/'>C# &#8211; Are we using the repository pattern right</a></li><li class="list-group-item"><a href='../object-oriented-what-really-is-the-business-logic/'>Object-oriented &#8211; What really is the &#8220;business logic&#8221;</a></li><li class="list-group-item"><a href='../c-confused-on-how-to-properly-employ-a-repository-pattern-with-service-business-layer-on-top/'>C# &#8211; Confused on how to properly employ a Repository Pattern with Service/Business Layer on top</a></li><li class="list-group-item"><a href='../c-effective-repository-in-c-where-to-put-methods/'>C# &#8211; Effective Repository in C# &#8211; Where to put methods</a></li><li class="list-group-item"><a href='../how-domain-repository-and-service-layers-works-vs-original-dao-pattern/'>How Domain, repository and service layers works VS original DAO pattern</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>