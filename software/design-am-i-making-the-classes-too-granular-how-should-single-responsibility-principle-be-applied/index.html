<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; Am I making the classes too granular? How should Single Responsibility Principle be applied &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084560 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084560" class="post-1084560 software type-software status-publish hentry category-software tag-clean-code tag-design tag-single-responsibility"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; Am I making the classes too granular? How should Single Responsibility Principle be applied</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">clean code</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">single-responsibility</span></p><div class="entry-content"><p>I write lots of code that involves three basic steps.</p><ol><li>Get data from somewhere.</li><li>Transform that data.</li><li>Put that data somewhere.</li></ol><p>I typically end up using three types of classes &#8211; inspired by their respective design patterns.</p><ol><li>Factories &#8211; to build an object from some resource.</li><li>Mediators &#8211; to use the factory, perform the transformation, then use the commander.</li><li>Commanders &#8211; to put that data somewhere else.</li></ol><p>My classes tend to me be quite small, often a single (public) method, e.g. get data, transform data, do work, save data. This leads to a proliferation of classes, but in general works well.</p><p>Where I struggle is when I come to testing, I end up will tightly coupled tests. For example;</p><ul><li>Factory &#8211; reads files from disk.</li><li>Commander &#8211; writes files to disk.</li></ul><p>I can&#39;t test one without the other. I could write additional &#39;test&#39; code to do disk read/write also, but then I&#39;m repeating myself.</p><p>Looking at .Net, the <a href="https://docs.microsoft.com/en-gb/dotnet/api/system.io.file?view=netframework-4.7.1" rel="noreferrer">File</a> class takes a different approach, it combines the responsibilities (of my) factory and commander together. It has functions for Create, Delete, Exists, and Read all in one place.</p><p>Should I look to to follow the example of .Net and combine &#8211; particularly when dealing with external resources &#8211; my classes together? The code it still coupled, but it&#39;s more intentional &#8211; it happens at the original implementation, rather than in the tests.</p><p>Is my issue here that I have applied Single Responsibility Principle somewhat overzealously? I have separate classes responsible for read and write. When I could have a combined class which is responsible for dealing with a particular resource, e.g. system disk.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Following the Single Responsibility principle may have been what guided you here but where you are has a different name.</p><p><a href="https://martinfowler.com/bliki/CQRS.html" rel="noreferrer">Command Query Responsibility Segregation</a></p><p>Go study that and I think you&#39;ll find it following a familiar pattern and that you&#39;re not alone in wondering how far to take this.  The acid test is if following this is getting you real benefits or if it&#39;s just a blind mantra you follow so you don&#39;t have to think.</p><p>You&#39;ve expressed concern about testing. I don&#39;t think following CQRS precludes writing testable code.  You might simply be following CQRS in a way that makes your code not be testable.</p><p>It helps to know how to use polymorphism to invert source code dependencies without needing to change the flow of control.  I&#39;m not really sure where your skill set is on writing tests.</p><p>A word of caution, following the habits you find in libraries is not optimal. Libraries have their own needs and are frankly old. So even the best example is only the best example from back then.</p><p>This isn&#39;t to say there aren&#39;t perfectly valid examples that don&#39;t follow CQRS.  Following it will always be a bit of a pain. It&#39;s not always one worth paying. But if you need it you&#39;ll be glad you used it.</p><p>If you do use it heed this word of warning:</p><blockquote><p>In particular CQRS should only be used on specific portions of a system (a BoundedContext in DDD lingo) and not the system as a whole. In this way of thinking, each Bounded Context needs its own decisions on how it should be modeled.</p><p><a href="https://martinfowler.com/bliki/CQRS.html" rel="noreferrer">Martin Flowler: CQRS</a></p></blockquote></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-single-responsibility-principle-implementation/'>Design &#8211; Single Responsibility Principle Implementation</a></li><li class="list-group-item"><a href='../can-should-the-single-responsibility-principle-be-applied-to-new-code/'>Can/should the Single Responsibility Principle be applied to new code</a></li><li class="list-group-item"><a href='../c-substitute-for-static-inheritance/'>C# &#8211; substitute for static inheritance</a></li><li class="list-group-item"><a href='../design-single-responsibility-principle-violation/'>Design &#8211; Single Responsibility Principle Violation</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>