<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Uncle Bob&#8217;s clean architecture &#8211; An entity/model class for each layer &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063701 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063701" class="post-1063701 software type-software status-publish hentry category-software tag-android tag-architecture tag-clean-code tag-java tag-layers"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Uncle Bob&#8217;s clean architecture &#8211; An entity/model class for each layer</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">android</span><span class="mr-2 badge badge-info">Architecture</span><span class="mr-2 badge badge-warning">clean code</span><span class="mr-2 badge badge-primary">java</span><span class="mr-2 badge badge-danger">layers</span></p><div class="entry-content"><p><strong>BACKGROUND :</strong></p><p>I&#39;m trying to use Uncle Bob&#39;s clean architecture in my android app. I studied many open source projects that are trying to show the right way to do it, and I found <a href="https://github.com/android10/Android-CleanArchitecture">an interesting implementation</a> based on RxAndroid.</p><p><strong>WHAT I NOTICIED :</strong></p><p>In every layer (presentation, domain and data), there&#39;s a model class for the same entity (talking UML). Plus, there are mapper classes that take care of object&#39;s transformation whenever the data is crossing the boundaries (from layer to another).</p><p><strong>QUESTION :</strong></p><p>Is it required to have model classes in every layer when I know that they&#39;ll all end up with the same attributes if all CRUD operations are needed? Or, is it a rule or a best practice when using the clean architecture?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>In my opinion, that&#39;s absolutely not how it&#39;s meant. And it&#39;s a violation of DRY.</p><p>The idea is that the entity / domain object in the middle is modeled to represent the domain as good and as convenient as possible. It is in the center of everything and everything can depend on it since the domain itself doesn&#39;t change most of the time.</p><p>If your database on the outside can store those objects directly, then mapping them to another format for the sake of separating layers is not just pointless but creating duplicates of the model and that is not the intention.</p><p>To begin with, the clean architecture was made with a different typical environment / scenario in mind. Business server applications with behemoth outer layers that need their own types of special objects. For example databases that produce <code>SQLRow</code> objects and need <code>SQLTransactions</code> in return to update items. If you were to use those in the center, you were to violate the dependency direction because your core would depend on the database.</p><p>With lightweight ORMs that load and store entity objects thats not the case. They do the mapping between their internal <code>SQLRow</code> and your domain. Even if you need put an <code>@Entitiy</code> annotation of the ORM into your domain object, I&#39;d argue that this does not establish a &#34;mention&#34; of the outer layer. Because annotations are just metadata, no code that isn&#39;t specifically looking for them will see them. And more importantly, nothing needs to change if you remove them or replace them with a different database&#39;s annotation.</p><p>In contrast, if you do change your domain and you made all those mappers, you have to change a lot.</p><hr/><p>Amendment: Above is a little oversimplified and could even be wrong. Because there is a part in clean architecture that wants you to create a representation per layer. But that has to be seen in context of the application.</p><p>Namely the following here <a href="https://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html">https://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html</a></p><blockquote><p>The important thing is that isolated, simple, data structures are passed across the boundaries. <strong>We don’t want to cheat and pass Entities</strong> or Database rows. We don’t want the data structures to have any kind of dependency that violates The Dependency Rule.</p></blockquote><p>Passing entities from the center towards the outer layers does not violate the dependency rule, yet they are mentioned. But this has a reason in the context of the envisioned application. Passing entities around would move the application logic towards the outside. Outer layers would need to know how to interpret the inner objects, they would effectively have to do what inner layers like the &#34;use case&#34; layer is supposed to do.</p><p>Besides that, it also decouples layers so that changes to the core don&#39;t necessarily require changes in outer layers (see SteveCallender&#39;s comment). In that context, it&#39;s easy to see how objects should represent specifically the purpose they are used for. Also that layers should talk to each other in terms of objects that are made specifically for the purpose of this communication. This can even mean that there are 3 representations, 1 in each layer, 1 for transport between layers.</p><p>And there is <a href="https://blog.8thlight.com/uncle-bob/2011/11/22/Clean-Architecture.html">https://blog.8thlight.com/uncle-bob/2011/11/22/Clean-Architecture.html</a> which addresses above:</p><blockquote><p>Other folks have worried that the net result of my advice would be lots of duplicated code, and lots of rote copying of data from one data structure to another across the layers of the system. Certainly I don’t want this either; and nothing I have suggested would inevitably lead to repetition of data structures and an inordinate of field copying.</p></blockquote><p>That IMO implies that plain 1:1 copying of objects is a smell in the architecture because you&#39;re not actually using the proper layers and /or abstractions.</p><p>He later explains how he imagines all the &#34;copying&#34;</p><blockquote><p>You separate the UI from the business rules by passing simple data structures between the two. You don’t let your controllers know anything about the business rules. Instead, the controllers unpack the HttpRequest object into a simple vanilla data structure, and then pass that data structure to an interactor object that implements the use case by invoking business objects. The interactor then gathers the response data into another vanilla data structure and passes it back to the UI. The views do not know about the business objects. They just look in that data structure and present the response.</p></blockquote><p>In this application, there is a big difference between the representations. The data that flows isn&#39;t just the entities. And this warrants and demands different classes.</p><p>However, applied to a simple Android application like a photo viewer where the <code>Photo</code> entity has about 0 business rules and the &#34;use case&#34; that deals with them is nearly non-existing and is actually more concerned about caching &amp; downloading (that process should IMO be represented more explicitly), the point to make separate representations of a photo starts to vanish. I even get the feeling that the photo itself is the data transfer object while the real business-logic-core-layer is missing.</p><p>There is a difference between <em>&#34;separate the UI from the business rules by passing simple data structures between the two&#34;</em> and <em>&#34;when you want to display a photo rename it 3 times on the way&#34;</em>.</p><p>Besides that, the point where I see those demo applications fail at representing the clean architecture is that they add huge emphasis on separating layers for the sake of separating layers but effectively hide what the application does. That is in contrast to what is said in <a href="https://blog.8thlight.com/uncle-bob/2011/09/30/Screaming-Architecture.html">https://blog.8thlight.com/uncle-bob/2011/09/30/Screaming-Architecture.html</a> - namely that</p><blockquote><p>the architecture of a software application scream about the use cases of the application</p></blockquote><p>I don&#39;t see that emphasis on separating layers in the clean architecture. It&#39;s about dependency direction and focusing on representing the core of the application - entities and use cases - in ideally plain java without dependencies towards the outside. It&#39;s not so much about dependencies towards that core.</p><p>So if your application actually has a core that represents business rules and use cases, and / or different people work on different layers, please separate them in the intended way. If you&#39;re on the other hand just writing a simple app all by yourself don&#39;t overdo it. 2 layers with fluent bounds may be more than enough. And layers can be added later on as well.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-clean-architecture-should-users-go-in-the-use-case-layer-or-the-domain-layer/'>Architecture &#8211; Clean architecture: should users go in the use case layer or the domain layer</a></li><li class="list-group-item"><a href='../architecture-should-i-use-a-layer-between-service-and-repository-for-a-clean-architecture-spring/'>Architecture &#8211; Should I use a layer between service and repository for a clean architecture &#8211; Spring</a></li><li class="list-group-item"><a href='../architecture-uncle-bobs-clean-architecture-composed-entities/'>Architecture &#8211; Uncle Bob&#8217;s clean architecture &#8211; Composed entities</a></li><li class="list-group-item"><a href='../java-clean-architecture-apps-that-rely-heavily-on-background-services/'>Java &#8211; Clean Architecture: Apps that rely heavily on background services</a></li><li class="list-group-item"><a href='../clean-architecture-google-facebook-login-and-data-layer/'>Clean Architecture : Google/Facebook Login and data layer</a></li><li class="list-group-item"><a href='../architecture-clean-architecture-what-is-the-view-model/'>Architecture &#8211; Clean Architecture: What is the View Model</a></li><li class="list-group-item"><a href='../uncle-bobs-clean-architecture-dealing-with-anemic-interactors-tiering-and-front-end-mvvm/'>Uncle Bob&#8217;s Clean Architecture &#8211; Dealing with anemic interactors, tiering, and front-end MVVM</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>