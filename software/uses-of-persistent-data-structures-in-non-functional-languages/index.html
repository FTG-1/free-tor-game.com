<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Uses of persistent data structures in non-functional languages &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075624 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075624" class="post-1075624 software type-software status-publish hentry category-software tag-concurrency tag-data-structures tag-functional-programming tag-multithreading"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Uses of persistent data structures in non-functional languages</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">concurrency</span><span class="mr-2 badge badge-info">data structures</span><span class="mr-2 badge badge-warning">functional programming</span><span class="mr-2 badge badge-primary">multithreading</span></p><div class="entry-content"><p>Languages that are purely functional or near-purely functional benefit from persistent data structures because they are immutable and fit well with the stateless style of functional programming.</p><p>But from time to time we see libraries of persistent data structures for (state-based, OOP) languages like Java.  A claim often heard in favor of persistent data structures is that because they are immutable, they are <em>thread-safe</em>.</p><p>However, the reason that persistent data structures are thread-safe is that if one thread were to &#34;add&#34; an element to a persistent collection, the operation returns a <em>new</em> collection like the original but with the element added.  Other threads therefore see the original collection.  The two collections share a lot of internal state, of course &#8212; that&#39;s why these persistent structures are efficient.</p><p>But since different threads see different states of data, it would seem that persistent data structures are <em>not</em> in themselves sufficient to handle scenarios where one thread makes a change that is visible to other threads.  For this, it seems we must use devices such as atoms, references, software transactional memory, or even classic locks and synchronization mechanisms.</p><p>Why then, is the immutability of PDSs touted as something beneficial for &#34;thread safety&#34;?  Are there any real examples where PDSs help in synchronization, or solving concurrency problems?  Or are PDSs simply a way to provide a stateless interface to an object in support of a functional programming style?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Persistent/immutable data structures don&#39;t solve concurrency problems on their own, but they make solving them much easier.</p><p>Consider a thread T1 that passes a set S to another thread T2. If S is mutable, T1 has a problem: It loses control of what happens with S. Thread T2 can modify it, so T1 can&#39;t rely at all on content of S. And vice versa - T2 can&#39;t be sure that T1 doesn&#39;t modify S while T2 operates on it.</p><p>One solution is to add some kind of a contract to the communication of T1 and T2 so that only one of the threads is allowed to modify S. This is error prone and burdens both the design and implementation.</p><p>Another solution is that T1 or T2 clone the data structure (or both of them, if they aren&#39;t coordinated). However, if S isn&#39;t persistent, this is an expensive <em>O(n)</em> operation.</p><p>If you have a persistent data structure, you&#39;re free of this burden. You can pass a structure to another thread and you don&#39;t have to care what it does with it. Both threads have access to the original version and can do arbitrary operations on it - it doesn&#39;t influence what the other thread sees.</p><p>See also: <a href="https://stackoverflow.com/q/10034537/1333025">persistent vs immutable data structure</a>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../what-are-the-consequences-of-immutable-classes-with-references-to-mutable-classes/'>What are the consequences of immutable classes with references to mutable classes</a></li><li class="list-group-item"><a href='../data-structures-in-functional-programming/'>Data structures in functional programming</a></li><li class="list-group-item"><a href='../internal-mutation-of-persistent-data-structures/'>Internal Mutation of Persistent Data Structures</a></li><li class="list-group-item"><a href='../misconceptions-about-purely-functional-languages/'>Misconceptions about purely functional languages</a></li><li class="list-group-item"><a href='../in-functional-programming-does-having-most-of-the-data-structures-immutable-require-more-memory-usage/'>In functional programming, does having most of the data structures immutable require more memory usage</a></li><li class="list-group-item"><a href='../functional-programming-strategies-in-imperative-languages/'>Functional programming strategies in imperative languages</a></li><li class="list-group-item"><a href='../workaround-for-implementing-operations-on-doubly-linked-or-circular-data-structures-in-languages-with-immutable-data/'>Workaround for implementing operations on doubly linked or circular data structures in languages with immutable data</a></li><li class="list-group-item"><a href='../data-structure-for-two-dimensional-board-games-in-functional-languages/'>Data structure for two-dimensional board games in Functional languages</a></li><li class="list-group-item"><a href='../object-oriented-can-we-really-use-immutability-in-oop-without-losing-all-key-oop-features/'>Object-oriented &#8211; Can we really use immutability in OOP without losing all key OOP features</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>