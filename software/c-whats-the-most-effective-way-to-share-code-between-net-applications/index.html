<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; What&#8217;s the most effective way to share code between .NET applications &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1066564 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1066564" class="post-1066564 software type-software status-publish hentry category-software tag-branching tag-c tag-team-foundation-server"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; What&#8217;s the most effective way to share code between .NET applications</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">branching</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">team-foundation-server</span></p><div class="entry-content"><p>In our work, we have several different .net applications that share a lot of base functionality.  We&#39;ve built these applications using a clean n-tier architecture, but we&#39;ve hit that moment where we realize that we&#39;ve re-implemented the same functions several different times.  Obviously this violates DRY, and we would like to correct that.  We&#39;re already using Nuget to some success for common glue code (wiring up IoC, logging, settings), but we also would like to share our data and business layers between all our applications.  The idea is that the UI would only deal with the parts of the business layer it actually needs.</p><p>This seems like a straight-forward problem at first, but ongoing development could provide some pitfalls and we&#39;re not sure how to proceed.  Let&#39;s say we make our One Business Layer to Rule Them All.  For brevity, I&#39;ll call it &#34;Foundation.&#34;  We port our applications to use the Foundation, and everything is runnding great.  The Foundation is distributed to light UI layers via nuget, and we&#39;re looking good.  But then we start adding features to our applications, and we run into trouble.</p><p>Let&#39;s say we&#39;re working on Project A and we add a new feature that requires changes to Foundation.  We make the changes to foundation (Foundation-A) and push them out to the nuget feed as an unstable package.  Project A gets the latest nuget package, and all is good.  Meanwhile, another developer is working on Project B.  He gets the latest Foundation from source control, but takes it from a stable branch, so that it doesn&#39;t have Project A changes in it.  He makes changes and created Foundation-B.  And all is good.  But then we discover that Foundation-A and Foundation-B implementation functionality that could actually share code, so we combine them.  Meanwhile Foundation-C is floating out there with it&#39;s own changes.  Eventually, Foundation-B is ready for production, so we push it out.  But then we need to update Production A, B, &amp; C with the new foundation, so we update the nuget packages and deploy (as long as nothing breaks).</p><p>This seems like it could work, but we&#39;re worried about working with different database schemas and keeping everything synchronized between the various branches of the Foundation repository as well as the Project A, B, and C repositories.  It seems like it will probably take a lot of manual work, which opens up the possibility for errors.  I would like this as automated as possible.</p><p>Here&#39;s the stack we&#39;re using: C#, TFS with Continuous Integration, Nuget. Our applications are all various types of ASP.NET applications.  We&#39;re willing to look at different SCM&#39;s if it will make things easier.</p><p>I&#39;m looking for ways to keep Nuget sane with our different source code branches.  We don&#39;t want to accidentally push development code into production because we reference the wrong Nuget Package.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>We make the changes to foundation (Foundation-A) and push them out to the nuget feed as an unstable package.</p></blockquote><p>Here&#39;s where your problem begins... Don&#39;t do that.</p><p>Any changes to Foundation v1.0 should inherently be valuable to all consumers of Foundation, otherwise it doesn&#39;t belong in Foundation. So, when creating the nuget package, do it as an official, stable version of Foundation (i.e. v1.1), or don&#39;t do it at all.</p><p>Project B should build its Foundation enhancements as it normally would, but (in good source management fashion) should merge in the trunk changes (v1.1) before pushing a stable Foundation (v1.2) to nuget.</p><p>Other projects which can use the Foundation enhancements can upgrade their nuget references when appropriate, or stick with the older versions if they need to.</p><p>I agree with <a href="https://softwareengineering.stackexchange.com/a/213123/4127">@Giedrius</a>; this seems to me to be more of a source control/branching issue in the sense that if the branching/merging of Foundation is handled properly, the package management issues become moot.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../branching-model-suggestion-for-same-project-multiple-clients/'>Branching model suggestion for same project multiple clients</a></li><li class="list-group-item"><a href='../git-whats-the-best-way-to-handle-multiple-simultaneous-streams-of-development-in-version-control/'>Git &#8211; What&#8217;s the best way to handle multiple simultaneous &#8220;streams&#8221; of development in version control</a></li><li class="list-group-item"><a href='../choosing-the-right-branching-strategy-for-releases/'>Choosing the right branching strategy for releases</a></li><li class="list-group-item"><a href='../git-is-it-a-good-practice-to-have-a-remote-branch-for-each-developer/'>Git &#8211; Is it a good practice to have a remote branch for each developer</a></li><li class="list-group-item"><a href='../branching-strategy-for-test-environment/'>Branching Strategy for Test Environment</a></li><li class="list-group-item"><a href='../git-maintain-hundreds-of-customized-branches-over-master-branch/'>Git &#8211; Maintain hundreds of customized branches over master branch</a></li><li class="list-group-item"><a href='../what-are-the-risks-of-having-a-release-branch/'>What are the risks of having a release branch</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>