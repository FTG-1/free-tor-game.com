<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Are nested closures a good thing &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075319 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075319" class="post-1075319 software type-software status-publish hentry category-software tag-closures tag-swift-language"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Are nested closures a good thing</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">closures</span><span class="mr-2 badge badge-info">swift-language</span></p><div class="entry-content"><p>I&#39;ve been doing Swift development for a while now with Firebase, and I find myself making a lot of code like this:</p><pre><code>Auth.auth().signIn(with: credential) { (user, error) in
    if let error = error {
        print(&#34;an error occurred while signing in!! \(error)&#34;)
        return
    }

    print(&#34;user is signed in with facebook!&#34;)

    FacebookHelper.getProfileInfo(completion: { (name, pictureUrl) in
        FirebaseHelper.setUser(user: user!, name: name, profileUrl: pictureUrl, completion: {
            self.performSegue(withIdentifier: &#34;facebookLoggedInSegue&#34;, sender: nil)
        })
    })
}
</code></pre><p>Is there a better way to approach this? It can just get confusing when I&#39;ve got stuff like that nested in <code>observe</code> functions.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The ability to <em>have</em> nested functions is a good thing, but obviously any code that is confusing is not a good thing. This kind of code is ubiquitous in the context of asynchronous programming of which your code appears to be an example.</p><p>Promises can make it a bit less fugly, but they don&#39;t completely solve the problem.</p><p>There are two solutions to this. Use threads or use continuations.</p><p>It&#39;s easy to adapt an asynchronous API to a blocking one using threads and just about any kind of synchronization construct.  This is what <a href="https://github.com/yannickl/AwaitKit" rel="nofollow noreferrer">AwaitKit</a> does. Basically, you just trigger an asynchronous event, and in the completion callback have it signal a semaphore, while you wait on the semaphore in the original thread. <a href="https://github.com/yannickl/AwaitKit/blob/cd5a8cae34606d5d160ee5e35a8ad84c851aee76/Sources/DispatchQueue+Await.swift#L54" rel="nofollow noreferrer">E.g. in AwaitKit</a>.</p><p>First-class <a href="https://en.wikipedia.org/wiki/Continuation" rel="nofollow noreferrer">continuations</a> can also be used to solve this problem. You capture the current continuation and pass that as the callback to the asynchronous operation then abandon the current flow of control, e.g. by returning. With just a bit of wrapping, you can make an asynchronous API look and feel like a blocking API with this approach. Few languages support first-class continuations, though. To model them, you can use continuation-passing style (or monadic style for a bit more control), and indeed, that is exactly what these &#34;nested callbacks&#34; are doing.</p><p>The <code>async</code>/<code>await</code> syntax popularized by C# was created to solve this problem. Conceptually (but not actually) it performs a local continuation-passing style transform, and then from there it&#39;s easy to make an asynchronous API look like a blocking one. (The actual transformation is much more grotty but efficient in the context of C# which doesn&#39;t handle nested functions that efficiently.) This is a fairly good solution, but Swift doesn&#39;t currently support such syntax.</p><p><a href="https://ashfurrow.com/blog/comparative-asynchronous-programming/" rel="nofollow noreferrer">This blog post</a> which I haven&#39;t read completely seems to detail some of the current options in the Swift ecosystem as well as explaining some of the limitations. C# didn&#39;t add <code>async</code>/<code>await</code> to the language and compiler for no reason.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/are-closures-with-side-effects-considered-functional-style/'>Are closures with side-effects considered &#8220;functional style&#8221;</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/are-closures-sufficient-to-characterize-functional-programming/'>Are closures sufficient to characterize functional programming</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/javascript-what-are-the-benefits-of-using-new-over-closures/'>Javascript &#8211; What are the benefits of using new over closures</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>