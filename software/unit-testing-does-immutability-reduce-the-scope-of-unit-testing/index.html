<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; Does immutability reduce the scope of unit testing &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081536 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081536" class="post-1081536 software type-software status-publish hentry category-software tag-immutability tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; Does immutability reduce the scope of unit testing</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">immutability</span><span class="mr-2 badge badge-info">unit testing</span></p><div class="entry-content"><p>Recently, I worked on an Android project with Kotlin. As an architecture, there were immutable data classes and functions (not methods which are members of a class), where the functions generate new immutable data objects from other immutable data objects. And it felt like the scope of unit tests was reduced to those functions only.</p><p>So, is my assumption right that immutability reduces the scope of unit testing?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Tests check that things that <em>can</em> go wrong <em>don&#39;t</em> go wrong. The more flexible a software system is, the more ways there are for things to go wrong. Conversely, removing flexibility from a system means that less things can go wrong, and as a consequence fewer things have to be tested to achieve a <em>similar level of confidence</em>.</p><p>For example, static type systems. A typesystem is an automated proof of correctness. The level of proven correctness depends on the language, e.g. Haskell can prove more properties than Java, which can often prove more properties than C. The properties of the program that are guaranteed by a type system do not have to be unit-tested, for example that a function returns a result of a particular type.</p><p>Immutability is another approach that decreases the flexibility of a system, but also makes it easier to reason about and therefore requires fewer tests. In particular, the state of a mutable object may change after it was constructed. These state changes may move that object into an invalid state. So a thorough test will have to check these state transitions and ensure that no illegal states can be reached. Consumers of this object will have to be tested that they can work with the object in any of its states. In contrast, the state of an immutable object cannot change once constructed. Therefore, there are no state transitions to test. If a consumer receives an instance, they always know it is in the single valid state for that class.</p><p>When testing a function, we want to assert that it has some desired effect. So we <em>arrange</em> a particular state, <em>act</em> out the test case by invoking the function, and <em>assert</em> that the state after the call has some expected properties. This is most easy when the function does not have any effect except for returning a value: when we have a <em>pure function</em>. Immutability is not a precondition for a pure function. But if that function is passed immutable parameters, we know that the function cannot change those parameters â€“ one less thing that could go wrong. Note that for a method, the implicit <code>this</code> parameter is also an input parameter that may or may not be changed.</p><p>In practice, immutability is not always possible and not always desirable. In particular, the Java ecosystem does not have a mechanism to track whether values are immutable and whether a parameter may be changed (compare <code>const</code> in C++). So in Java, immutability and pure functions are more a convention than a type-system provable correctness property. Also, some functions may be effectively pure but not pure in the most literal sense, e.g. if they perform logging as a side effect. But that is entirely OK, as such functions are still effectively pure from a perspective of a caller.</p><p>In my experience, preferring immutable designs and mixing OOP with functional programming techniques leads to simpler, <a href="https://the-whiteboard.github.io/coding/debugging/2016/04/07/reasonable-code.html" rel="noreferrer">more reasonable systems</a>. That we need fewer tests for such systems is not the main value, but just a consequence of a generally simpler system where fewer things can go wrong.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-unit-testing-data-access-objects/'>Unit-testing &#8211; Unit testing data access objects</a></li><li class="list-group-item"><a href='../database-am-i-unit-testing-or-integration-testing-the-stored-procedures/'>Database &#8211; Am I Unit Testing or Integration Testing the Stored Procedures</a></li><li class="list-group-item"><a href='../unit-testing-unit-and-integration-testing-how-to-it-become-a-reflex/'>Unit-testing &#8211; Unit and Integration testing: How to it become a reflex</a></li><li class="list-group-item"><a href='../c-unit-testing-c-what-to-test/'>C++ &#8211; Unit testing C++: What to test</a></li><li class="list-group-item"><a href='../unit-testing-unit-testing-in-django/'>Unit-testing &#8211; Unit testing in Django</a></li><li class="list-group-item"><a href='../c-do-not-declare-interfaces-for-immutable-objects/'>C# &#8211; Do not declare interfaces for immutable objects</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>