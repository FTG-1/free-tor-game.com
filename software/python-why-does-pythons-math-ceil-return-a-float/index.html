<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Python &#8211; Why does Python&#8217;s math.ceil return a float &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072515 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072515" class="post-1072515 software type-software status-publish hentry category-software tag-floating-point tag-python"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Python &#8211; Why does Python&#8217;s math.ceil return a float</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">floating point</span><span class="mr-2 badge badge-info">python</span></p><div class="entry-content"><p>While I understand that <a href="https://www.python.org/dev/peps/pep-0237/" rel="noreferrer">the difference between integral and long values is blurred in Python</a>, the difference between floats and integral values is <em>not</em>.</p><p>Therefore, I&#39;m having a difficult time understanding why <code>math.ceil</code> and <code>math.floor</code> return floating-point values when <em>the only possible outcome</em> is integral, whole numbers.</p><p>For example, if I do the following:</p><pre><code>math.ceil(7.5)
</code></pre><p>I&#39;d expect to get an integer with the value <code>8</code>, not a floating-point number with the value <code>8.0</code>. The same goes for <code>math.floor</code>.</p><p>Why does Python in this case use floating-point numbers where integers make more sense based on the output?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Short answer</h2><p><a href="http://grokbase.com/t/python/python-bugs-list/0814p01pv1/issue1656-make-math-floor-ceil-float-return-ints-per-pep-3141" rel="nofollow noreferrer">It was a bug</a>.
Well, not exactly a bug, but the behavior was changed based on a proposal for Python 3.
Now, <code>ceil</code> and <code>floor</code> return integers (see also delnan&#39;s comment). 
Some details are here: <a href="http://www.afpy.org/doc/python/2.7/whatsnew/2.6.html" rel="nofollow noreferrer">http://www.afpy.org/doc/python/2.7/whatsnew/2.6.html</a></p><h2>Why Python originally returned floats</h2><p><a href="https://stackoverflow.com/questions/8582741/why-do-pythons-math-ceil-and-math-floor-operations-return-floats-instead-of">This question</a> has some nice answers about the behaviour before Python 3. Since the mathematical operators where wrappers around the C mathematical operators, it made sense to follow the convention of that language.  Note that in C, the <code>ceil</code> function <a href="http://www.techonthenet.com/c_language/standard_library_functions/math_h/ceil.php" rel="nofollow noreferrer">takes and returns</a> a <code>double</code>. This makes sense because not all floats can be represented by integers (for values with a big exponent, there is no direct representation with integers).</p><p>Python was historically not explicitely designed to formally conform to some of the properties of mathematical operations (that would not happen by accident).   Guido Von Rossum has acknowledged some early design mistakes and explained the rationale behind the types used in Python, notably why he preferred C types instead of reusing the ones in <a href="http://homepages.cwi.nl/~steven/abc/" rel="nofollow noreferrer">ABC</a>. See for example:</p><ul><li><p><a href="http://python-history.blogspot.fr/2009/02/early-language-design-and-development.html" rel="nofollow noreferrer"><em>Early Language Design and Development</em></a></p></li><li><p><a href="http://python-history.blogspot.fr/2009/03/problem-with-integer-division.html" rel="nofollow noreferrer"><em>The Problem with Integer Division</em></a>.
The division operator used to perform truncation when given integers or long, which was generally unexpected and error-prone: see <a href="https://www.python.org/dev/peps/pep-0238/" rel="nofollow noreferrer"><em>Changing the Division Operator</em></a>.</p></li></ul><p>The language is supposed to evolve, though, and people tried to incorporate numeric type systems from other languages. For example, <a href="https://www.python.org/dev/peps/pep-0228/" rel="nofollow noreferrer"><em>Reworking Python&#39;s Numeric Model</em></a> and <a href="https://www.python.org/dev/peps/pep-3141/" rel="nofollow noreferrer"><em>A Type Hierarchy for Numbers</em></a>.</p><h2>Why it should be an integer</h2><p>The fact that integer 8 is also a real number does mean that we should return a floating point value after doing <code>floor(8.2)</code>, exactly because we would not return a complex value with a zero imaginary part (8 is a complex number too).</p><p>This has to do with the mathematical definitions of the operations, not the possible machine representations of values: <em>floor</em> and <em>ceiling</em> mathematical functions <a href="https://en.wikipedia.org/wiki/Floor_and_ceiling_functions" rel="nofollow noreferrer">are defined</a> to return integers, whereas multiplication is a <a href="https://en.wikipedia.org/wiki/Ring_(mathematics)" rel="nofollow noreferrer">ring</a> where we expect the product of <em>x</em> and <em>y</em> from set <em>A</em> to belong to set <em>A</em> too. 
Arguably, it would be surprising if <code>8.2 * 10</code> returned the integer <code>82</code> and not a floating point; similarly the are no good reasons for <code>floor(8.2)</code> to return <code>8.0</code> if we want to be conform to the mathematical meaning.</p><p>By the way, I disagree with some parts of <a href="https://softwareengineering.stackexchange.com/a/294113/33157">Robert Harvey&#39;s answer</a>.</p><ul><li><p>There are <a href="https://softwareengineering.stackexchange.com/questions/225682/is-it-a-bad-idea-to-return-different-data-types-from-a-single-function-in-a-dyna">legitimate uses</a> to return a value of a different type depending on an input parameter, especially with mathematical operations.</p></li><li><p>I don&#39;t think the return type should be based on a <em>presupposed</em> common usage of the value and I don&#39;t see how convenient it would be. And if it was relevant, I&#39;d probably expect to be given an integer: I generally do <em>not</em> combine the result of <code>floor</code> with a floating point.</p></li></ul><h2>Inconvenience of Python 3</h2><p>Using the operations from C in Python could be seen as a leaky abstraction of mathematical operations, whereas Python generally tries to provide a high-level view of data-structures and functions. It can be argued that people programming in Python expect operations that <em>just work</em> (e.g. arbitrary precision integers) and prefer to avoid dealing with numeric types at the level of C (e.g. undefined behaviour of overflow for <del>unsigned</del> signed integers). That&#39;s why PEP-3141 was a sensible proposition.</p><p>However, with the resulting abstraction, there might be some cases where performance might degrade, especially if we want to take the ceiling or floor of big floats without converting them to big integers (see comment from Mark Dickinson). Some may argue that this is not a big deal if a conversion occurs because it does not impact the overall performance of your program (and this is probably true, in most cases). But unfortunately, the problem here is that the programmer cannot choose which behaviour suits the most her needs. Some languages define more expressive functions: for example Common Lisp provides <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_floorc.htm#ffloor" rel="nofollow noreferrer"><code>fflor</code> and <code>fceiling</code></a>, which return floating-point values. It would be preferable if Python could provide <code>fceil</code> too. Alternatively, a <em>sufficiently smart compiler</em> could detect <code>float(math.ceil(x))</code> and do the right thing.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../why-do-you-need-float-double/'>Why do you need float/double</a></li><li class="list-group-item"><a href='../implementing-base-10-floating-point-division/'>Implementing base-10 floating point division</a></li><li class="list-group-item"><a href='../unit-testing-unit-regression-testing-scientific-algorithms-given-floating-point-behavior/'>Unit-testing &#8211; Unit (regression) testing scientific algorithms given floating point behavior</a></li><li class="list-group-item"><a href='../python-better-algorithm-to-distribute-integer-to-x-integers-minimizing-their-difference/'>Python &#8211;  better algorithm to distribute integer to X integers minimizing their difference</a></li><li class="list-group-item"><a href='../avoiding-division-by-zero-using-float-comparison/'>Avoiding Division by Zero Using Float Comparison</a></li><li class="list-group-item"><a href='../python-functional-style-exception-handling/'>Python &#8211; Functional style exception handling</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>