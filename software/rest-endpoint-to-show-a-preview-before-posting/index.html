<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>REST endpoint to show a preview before POSTing &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076849 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076849" class="post-1076849 software type-software status-publish hentry category-software tag-http tag-programming-practices tag-rest"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">REST endpoint to show a preview before POSTing</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">http</span><span class="mr-2 badge badge-info">programming practices</span><span class="mr-2 badge badge-warning">rest</span></p><div class="entry-content"><p>I&#39;m designing a new web application which is powered by a REST backend and HTML+JS frontend.</p><p>There&#39;s one <em>POST</em> method on it to change one entity (let&#39;s call Config), that has several side effects in the state of many elements of the application. Let&#39;s suppose the <em>POST</em> is performed this way:</p><pre><code>POST /api/config BODY {config: ....}
</code></pre><p>Because of this, I would like to show a preview before those changes are made, for the end user to be able to notice what&#39;s going to change.</p><p>The thing I first thought about is to make a <em>GET</em> endpoint for the preview, sending the body of the new state of the entity. This way:</p><pre><code>GET /api/preview/items BODY {config: ....}
</code></pre><p>Might show the new state for the items with the new configuration.</p><pre><code>GET /api/preview/sales BODY {config: ....}
</code></pre><p>Might show the new state for the sales with the new configuration.</p><p>It seems a good idea to use the <em>GET</em> verb as I&#39;m not altering the state of the application. However, the use of a request body with <em>GET</em> requests seems to be <a href="https://stackoverflow.com/questions/978061/http-get-with-request-body">discouraged</a>.</p><p>Is there any good practice about this? Other choice might be to store the config as a draft with one method and display the results with others, but it would require an additional step and having to manage the drafts in the server:</p><pre><code>POST /api/preview/config BODY {config: ....}

GET /api/preview/items?idPreviewConfig=1
</code></pre></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This is too domain-specific to have a native support in HTTP.</p><p>Instead, you may do one of the following:</p><ol><li><p>Have a <code>POST /api/config/preview</code>. At server side, the application will know that it shouldn&#39;t modify the actual configuration, but combine the actual one with the one you posted, and return the result indicating what was changed.</p><p>Later, if the user is satisfied with the result, she will perform a <code>POST /api/config</code> containing the same payload as in the previous request. This will effectively overwrite the configuration.</p><p>The benefit of this approach is that you&#39;are not making any breaking changes to the current API. Clients who don&#39;t need the preview feature would still be able to update the entries as they did before.</p><p>The drawback is that when the body is large, it would mean that it would be needed to send it twice to the server. If this is your case, you may use the next approach.</p></li><li><p>Have a <code>POST /api/config/prepare</code> which remembers what was sent in a temporary record and returns two things: the ID of the temporary record (for instance <code>12345</code>) and the preview of the changes.</p><p>If the user is satisfied with the result, she will perform a <code>POST /api/config/commit/12345</code> to definitively store the changes. If not, the temporary record may be kept for some time, and then discarded by a cron job.</p><p>The benefit is that, here again, you may keep the original <code>POST /api/config</code> intact, and the clients which don&#39;t need a preview will not break.</p><p>The drawbacks are that (1) handling the removal of temporary records can be tricky (what makes you think that one hour is enough? What if ten minutes later, you run out of memory? How clients handle a HTTP 404 when doing a commit of a record which expired?) and that (2) two-steps submission of a record may be more complicated than it needs to be.</p></li><li><p>Move the preview logic on client side.</p></li></ol></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-a-web-application-as-a-rest-api-client-how-to-handle-resource-identifiers/'>Rest &#8211; A Web application as a REST API client: how to handle resource identifiers</a></li><li class="list-group-item"><a href='../java-handling-domainexceptions-using-rest-endpoint/'>Java &#8211; Handling DomainExceptions using REST endpoint</a></li><li class="list-group-item"><a href='../rest-api-omitted-properties-in-post-request-how-should-they-be-handled/'>REST API &#8211; omitted properties in POST request: How should they be handled</a></li><li class="list-group-item"><a href='../rest-prevent-abuse-to-rest-api-endpoint/'>Rest &#8211; Prevent abuse to REST API endpoint</a></li><li class="list-group-item"><a href='../rest-web-api-post-single-item-vs-collection/'>Rest &#8211; Web API POST: single item vs collection</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>