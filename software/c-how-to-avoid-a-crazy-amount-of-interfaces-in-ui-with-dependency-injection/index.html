<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; How to avoid a crazy amount of interfaces in UI with dependency injection &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078607 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078607" class="post-1078607 software type-software status-publish hentry category-software tag-c tag-dependency-injection tag-singleton"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; How to avoid a crazy amount of interfaces in UI with dependency injection</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">dependency-injection</span><span class="mr-2 badge badge-warning">singleton</span></p><div class="entry-content"><p><strong>Problem</strong><br /> I recently read a lot about Singletons being bad and how dependency injection (which I understand as &#34;using interfaces&#34;) is better. When I implemented part of this with callbacks/interfaces/DI and adhering to the interface segregation principle, I ended up with quite a mess.</p><p>The dependencies of a UI parent where basically those of all its children combined, so the further up the hierarchy a UI element was, the more bloated its constructor was.</p><p>All the way on top of the UI hierarchy was an Application class, holding the info about the current selection and a reference to a 3d model which needs to reflect changes. The application class was implementing 8 interfaces, and this was only roundabout a fifth of the products (/ interfaces) to come!</p><p>I currently work with a singleton holding the current selection and the UI elements having a function to update themselves. This function trickles down the UI tree and UI elements then access the current selection singleton as needed. The code seems cleaner to me this way.</p><p><strong>Question</strong><br /> Is a singleton maybe appropriate for this project?<br /> If not, is there a fundamental flaw in my thinking and/or implementation of DI which makes it so cumbersome?</p><p><strong>Additional info about the project</strong><br /> Type: Shopping basket for apartments, with bells and whistles<br /> Size: 2 man-months for code and UI<br /> Maintenance: No running updates, but maybe &#34;version 2.0&#34; later<br /> Environment: Using C# in Unity, which uses an Entity Component system</p><p>In almost all cases, user interaction triggers several actions.<br /> For example, when the user selects an item</p><ul><li>the UI part showing that item and its description needs to be updated. For this, it also needs to get some info from a 3d model in order to calculate the price.</li><li>further up the UI, the overall total price needs to be updated</li><li>a corresponding function in a class on a 3d model needs to be called in order to display the changes there</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I think the question is a symptom, not a solution.</p><blockquote><p>I recently read a lot about Singletons being bad and how dependency injection (which I understand as &#34;using interfaces&#34;) is better. When I implemented part of this with callbacks/interfaces/DI and adhering to the interface segregation principle, I ended up with quite a mess.</p></blockquote><p>A solution looking for a problem; that and misunderstanding it probably is corrupting your design. Have you read this SO question about <a href="https://softwareengineering.stackexchange.com/q/126875/38663">DI vs Singleton, different concepts or not?</a> I read that as simply wrapping a singleton so the client does not have to deal with a singleton. It.is.just.good.old.encapsulation.  I think that&#39;s spot on.</p><hr/><blockquote><p>the further up the hierarchy a UI element was, the more bloated its constructor was.</p></blockquote><p>Build the smaller bits first then pass them into the constructor of the thing they belong in and pass that bigger thing into the constructor of the next bigger thing...</p><p>If you&#39;ve got complex construction issues, use the factory or builder pattern. Bottom line there is that complex construction pulled into it&#39;s own class to keep other classes neat, clean, comprehensible, etc.</p><hr/><blockquote><p>The application class was implementing 8 interfaces, and this was only roundabout a fifth of the products (/ interfaces) to come!</p></blockquote><p>This sounds like the absence of extend-ability. Core design is missing and everything is being crammed in from the top. There should be more bottom up construction, composition, and inheritance going on.</p><p>I wonder if your design is &#34;top heavy.&#34; Sounds like we&#39;re trying to make one class be everything or anything that it could be. And the fact that it is a UI class, not a business domain class, that really makes me wonder about separation of concerns.</p><p>Revisit your design from the beginning and be sure there is a solid, basic product abstraction that can be built upon to make more complex or different category productions. Then you better have custom collections of these things so you have somewhere to put &#34;collection level&#34; functionality - like that &#34;3rd model&#34; you mention.</p><hr/><blockquote><p>... 3d model which needs to reflect changes.</p></blockquote><p>Much of this may fit in custom collection classes. It may also be independent class structure unto itself due to depth and complexity. These two things are not mutually exclusive.</p><p>Read about the visitor pattern. It&#39;s the idea of having whole chucks of functionality wired abstractly to different types.</p><hr/><p><strong>Design and DI</strong></p><p>90% of all the dependency injection you will ever do is constructor parameter passing. <a href="https://www.manning.com/books/dependency-injection-in-dot-net" rel="nofollow noreferrer">So says the quy who wrote the book</a>. Design your classes well and avoid polluting that thought process with some vague notion about needing to use a DI container-thingy. If you need it, your design will suggest it to you so to speak.</p><hr/><p><strong>Focus on modeling the apartment shopping domain.</strong></p><p><a href="https://www.youtube.com/watch?v=_zrCAYJ0aJ4" rel="nofollow noreferrer">Avoid the Jessica Simpson approach to design</a>: &#34;I totally don&#39;t know what that means, but I want it.&#34;</p><p>The following are just wrong:</p><ul><li>I&#39;m supposed to use interfaces</li><li>I&#39;m not supposed to use a singleton</li><li>I need DI (whatever that is)</li><li>I&#39;m supposed to use composition, not inheritance</li><li>I&#39;m supposed to avoid inheritance</li><li>I need to use patterns</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-dependency-injection-with-n-tier-entity-framework-solution/'>C# &#8211; Dependency injection with n-tier Entity Framework solution</a></li><li class="list-group-item"><a href='../c-dependency-injection-with-adapter-pattern/'>C# Dependency Injection with Adapter Pattern</a></li><li class="list-group-item"><a href='../c-circular-dependency-in-dependency-injection/'>C# &#8211; Circular dependency in dependency injection</a></li><li class="list-group-item"><a href='../construct-entities-via-dependency-injection-framework/'>Construct Entities via Dependency Injection Framework</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>