<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Constructing an object: should I expose or hide parameters passed to the constructor &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073369 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073369" class="post-1073369 software type-software status-publish hentry category-software tag-c tag-class-design tag-constructors tag-design-patterns"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Constructing an object: should I expose or hide parameters passed to the constructor</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">class-design</span><span class="mr-2 badge badge-warning">constructors</span><span class="mr-2 badge badge-primary">design-patterns</span></p><div class="entry-content"><p>I&#39;ve a habit I just mechanically do without even thinking too much about it.</p><p>Whenever a constructor is waiting for some parameters, I consider this a public information that should be available by the calling code later on, if desired.</p><p>For example:</p><pre><code>public class FooRepository : IFooRepository
{
    public FooRepository(IDbConnection dbConnection)
    {
        DbConnection = dbConnection ?? throw new ArgumentNullException(nameof(dbConnection));
    }

    public IDbConnection DbConnection { get; }
}
</code></pre><p>The calling code which instantiated a <code>FooRepository</code> object is passing an <code>IDbConnection</code> object and therefore has the right to access this information later on but can&#39;t modify it anymore (no <code>set</code> on the <code>DbConnection</code> property)</p><p>The <code>dbConnection</code> parameter could be passed explicitly or by dependency injection, it doesn&#39;t matter. The <code>FooRepository</code> shouldn&#39;t be aware of such details.</p><p>However, yesterday when doing peer programming with a coworker, he told me that any class I write should expose just the minimum useful information.<br /> He said developers shouldn&#39;t be able to analyse and mess with the internal state of an object.</p><p>I don&#39;t quite agree with him. In order to not waste too much time, I don&#39;t want to think a few minutes for each parameter to determine if this would be a good idea to expose it or not.<br /> In my opinion, there are some use cases we simply can&#39;t think of, when we first write a new class.</p><p>Whether or not the class will finally be included in a Nuget package, doesn&#39;t really matter. I just don&#39;t want to limit users of my class from accessing information they explicitly passed when instantiating the object or could be easily retrieved from the dependency injection framework.</p><p>Could someone explain to me what is considered a good practice here?</p><p>Should I really think whether each parameter makes sense to be exposed? Or is there a design pattern I can just instinctively apply without wasting too much time?</p><p>Any resource on the subject are welcome.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>The calling code which instantiated a FooRepository object is passing an IDbConnection object and therefore has the right to access this information later on</p></blockquote><p>This is not true when you&#39;re dealing with things like the <a href="https://www.javatpoint.com/factory-method-design-pattern" rel="noreferrer">factory pattern</a>, where the instantiator of the object is not the handler of the object. Factory patterns quite often exist specifically because the object&#39;s construction is an implementation detail that should be abstracted away.</p><p>This applies to more cases than just the factory pattern. Essentially, it applies to any object that gets passed around at least once.</p><blockquote><p>but can&#39;t modify it anymore (no set on the DbConnection property)</p></blockquote><p>This isn&#39;t true for reference types. It&#39;s true that you can&#39;t change <em>which</em> object is being referenced, but you can still alter its content. For example:</p><pre><code>public class Foo
{
    public string Name { get; set; }
}

public class Baz
{
    public Foo Foo { get; } // allegedly: &#34;can&#39;t modify it anymore&#34;

    public Baz(Foo foo)
    {
        this.Foo = foo;
    }
}

var myFoo = new Foo() { Name = &#34;Hello&#34; };
var myBaz = new Baz(myFoo);
</code></pre><p>As per your claim, <code>myBaz.Foo</code> can no longer be modified. Yet this code is perfectly legal:</p><pre><code>myBaz.Foo.Name = &#34;a completely different name&#34;;
</code></pre><p>And that&#39;s still a risk you take.</p><blockquote><p>he told me that any class I write, it should expose just the minimum useful information.</p><p>I don&#39;t want to think few minutes for each parameter to determine if this would be a good idea to expose it or not.</p></blockquote><p>These two don&#39;t quite follow. It doesn&#39;t require you to think about it, it requires you to default to <code>private</code> instead of <code>public</code> like you currently do. Unless there is a valid reason to expose it, don&#39;t.</p><p>This is an oversimplification as there are cases where you shouldn&#39;t start out on <code>private</code> (e.g. DTO properties), but if you&#39;re still struggling with evaluating this, it&#39;s already better to default to <code>private</code> instead of <code>public</code>.</p><blockquote><p>In my opinion, there are some use cases we simply can&#39;t think of when we first write a new class.</p></blockquote><p>In my opinion, this is indicative of not quite understanding the class&#39; responsibility and how it fits in the existing codebase.</p><p>In fact, that&#39;s sort of what you state in the question: <em>you don&#39;t want to think about it</em>. But you really should. For your example, what would ever be the purpose of a repository exposing its  database connection? I can&#39;t think of any answer here that does not immediately violate good practice rules, can you?<br/> Exposing the database connection is not part of the repository&#39;s purpose, which is all about providing access to a persistent data store.</p><p>In part, this is a matter of experience which will come over time. Every time you have to change the access modifier on an existing property/method is a time to learn why the previous choice was not the right one. Do it enough and you will improve at judging public contracts on the first design.</p><blockquote><p>In my opinion, there are some use cases we simply can&#39;t think of when we first write a new class.</p></blockquote><p>Don&#39;t forget <a href="https://en.wikipedia.org/wiki/Open–closed_principle" rel="noreferrer">OCP</a>: <em>&#34;software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification&#34;</em>.</p><p>If you are inherently accounting for needing to change the internals of classes as time passes, you&#39;re taking a stance orthogonal to OCP.</p><p>That&#39;s not to say internals can&#39;t be changed when e.g. bugs are found or breaking changes are implemented; but it does mean you should try to avoid it as best as you can. Changing existing (often central) logic is a most common source of bugs, especially the crippling ones.</p><blockquote><p>Whether or not the class will finally be included in a Nuget package doesn&#39;t really matter.</p></blockquote><p>It really does matter. If your library is only being used in the same solution file, you can change things very quickly to your needs and can confirm it&#39;s working with a simple build.</p><p>But Nuget compounds the issue. If you change the contracts of your classes exposed in yout Nuget package, that means that every Nuget consumer will have to deal with breaking changes.<br/> From personal experience, the issue is further compounded by Nuget servers not keeping a record of <em>who</em> has consumed your Nuget package, which makes it hard to figure out who all your consumers are and warn them ahead of time that breaking changes are about to be released.</p><p>Had you defaulted to making things <code>private</code>, and then selectively expose them, there would be less of a problem here. Adding to the contract without changing the existing parts does not break existing code.<br/> Removing things from the contract, which is what would happen if you default to <code>public</code>, would always be liable to breaking code that depends on the thing you&#39;re now removing from the contract.</p><blockquote><p>Should I really think for each parameter if it makes sense to expose it?</p></blockquote><p>Yes. But it&#39;s not as complicated as you&#39;re making it out to be. Understanding what a certain class needs to expose or not is something you need to think about once per class. What is this class&#39; purpose? How do I want this class to be used by its consumers?</p><p>After that, all properties/methods that you develop can easily be matched to the class&#39; purpose, which is not a new evaluation but simply applying the decision you already made.</p><blockquote><p>Or is there a design pattern I can just instinctively apply without wasting too much time?</p></blockquote><p>If you were using interfaces on all your classes and using interface-based dependency injection, it would really help you in understanding how to separate a class&#39; contract (things in the interface) from its implementation (things not in the interface).</p><p>Take for example:</p><pre><code>public interface ISodaVendingMachine
{
    Soda GetDrink();
}

public class RegularVendingMachine : ISodaVendingMachine
{
    private Drinks drinks;

    public RegularVendingMachine(Drinks drinks)
    {
        this.drinks = drinks;
    }

    public Soda GetDrink()
    {
        return this.drinks.TakeOne();
    }
}

public class ConjuringVendingMachine : ISodaVendingMachine
{
    private PhilosophersStone philosophersStone;

    public ConjuringVendingMachine(PhilosophersStone philosophersStone)
    {
        this.philosophersStone = philosophersStone;
    }

    public Soda GetDrink()
    {
        return philosophersStone.PerformIncantation(&#34;Drinkum givum&#34;);
    }
}
</code></pre><p>The internals of each vending machine is up to them. It doesn&#39;t matter how they have access to and dispense a drink to the consumer. To the consumer, that&#39;s an irrelevant implementation detail. The customer doesn&#39;t want to know <a href="https://english.stackexchange.com/questions/120739/a-peek-into-the-sausage-factory">how the sausage gets made</a>.</p><p>What matters for the public contracts is <strong>that</strong> they dispense a drink to the consumer, and thus the <code>ISodaVendingMachine</code> interface is built specifically for that purpose.</p><p>Notice how the interface doesn&#39;t care about anothing other than what it was designed to ensure.</p><p>When you have that interface, you can already see that anything in your class that isn&#39;t part of that interface should most likely be <code>private</code> as it is an implementation detail, not a contract.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-how-complex-a-constructor-should-be/'>C# &#8211; how complex a constructor should be</a></li><li class="list-group-item"><a href='../where-should-an-object-in-cqrses-be-fully-initialized-in-the-constructor-or-when-applying-the-first-event/'>Where should an object in CQRS+ES be fully initialized: in the constructor, or when applying the first event</a></li><li class="list-group-item"><a href='../c-passing-parameters-in-same-object-as-responses/'>C# &#8211; Passing parameters in same object as responses</a></li><li class="list-group-item"><a href='../java-initializing-objects-in-constructor/'>Java &#8211; Initializing objects in Constructor</a></li><li class="list-group-item"><a href='../java-when-to-call-the-constructor-and-when-to-call-the-method-in-java/'>Java &#8211; When to call the constructor and when to call the method in Java</a></li><li class="list-group-item"><a href='../architecture-criticism-and-disadvantages-of-dependency-injection/'>Architecture &#8211; Criticism and disadvantages of dependency injection</a></li><li class="list-group-item"><a href='../c-unity-injection-with-too-many-constructor-parameters/'>C# &#8211; Unity injection with too many constructor parameters</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>