<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; SQL Database schema for Catering/Menu management &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1085379 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1085379" class="post-1085379 software type-software status-publish hentry category-software tag-data-modeling tag-database tag-database-design tag-relational-database tag-sql"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; SQL Database schema for Catering/Menu management</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">data modeling</span><span class="mr-2 badge badge-info">database</span><span class="mr-2 badge badge-warning">database-design</span><span class="mr-2 badge badge-primary">relational-database</span><span class="mr-2 badge badge-danger">sql</span></p><div class="entry-content"><h2>Background</h2><p>I&#39;m building a Private Chef booking service where you can book a Chef to cook you a custom Menu.  I&#39;m having trouble creating a SQL db schema that accurately represents the domain while maintaining data integrity.</p><h3>Requirements</h3><ul><li>Customers create a <code>Booking</code> by selecting a <code>Chef</code> and a <code>Menu</code> and choose the <code>MenuItems</code> they want for each <code>MenuCourse</code></li><li>A <code>Chef</code> defines a set of <code>MenuItem</code> that a customer can choose from to create their <code>Booking</code></li><li>A <code>Menu</code> is a collection of <code>MenuCourses</code>. (ex. A <code>Menu</code> named &#34;Tasting Menu&#34; is a 6 course meal, where each <code>MenuCourse</code> costs between $10-20).</li><li>A <code>Chef</code> should be able to associate their <code>MenuItems</code> with multiple <code>Menus</code> and <code>MenuCourses</code>.</li><li>A customer <code>Booking</code> should contain the <code>Chef</code> the customer selected along with the <code>Menu</code> (and the <code>MenuItems</code>) that will be served. <code>Booking</code> price is determined by the <code>Menu</code> and <code>MenuCourse</code> selections (an appetizer costs less than an entree)</li></ul><h1>Problem</h1><p>In my current data model, I have the following issues that I&#39;m not sure how to fix:</p><ul><li>it&#39;s possible to create a <code>Booking</code> with <code>Chef</code> &#34;A&#34;, but then have a <code>BookingMenuItem</code> that references a <code>MenuItem</code> with <code>Chef</code> &#34;B&#34; (all the <code>BookingMenuItem</code> for a <code>Booking</code> should belong to the same <code>Chef</code>)</li><li>a <code>Booking</code> references a particular <code>Menu</code> (which I need for pricing, pricing is based on <code>Menu</code> and <code>MenuCourse</code>) however a <code>BookingMenuItem</code> for that <code>Booking</code> could reference a completely different <code>Menu</code> or <code>MenuCourse</code></li></ul><p>Is it possible to re-design my db schema to fix the integrity problems I&#39;m having? Or do I just have to implement these checks at the application level. Thanks!</p><p><a href="../../../i.stack.imgur.com/lx6lZ.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/lx6lZ.png" alt="ERD"/></a></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Having the same Chef for <code>MenuItem</code>s and related <code>BookingMenuItem</code>s might be a good default setting, but nothing which should be enforced through the database. In reality, it could be perfectly possible that Chef A has defined a menu with it&#39;s items, but then he/she is not available and a different Chef B has to take over for the cooking. So in short: let the application manage this, expect exceptions.</p><p>For your second issue, a technical solution could be implemented through the application, or through triggers at the the database level. It is not always possible or sensible <a href="https://stackoverflow.com/questions/6122645/database-relationship-cycle">to remove every kind of cycle in a relational DB scheme</a>.</p><p>However, I would recommend to reconsider the design first:</p><ul><li><p>expect a customer to have &#34;extra wishes&#34; for items which are not offered by default on the menu - so it should be possible to book extra items (and those should have a price as well), or existing items with some special requirements for their preparation, and maybe a price modification (<em>&#34;I want to have my salad without tomatoes, but with an extra portion of cottage cheese&#34; - Ok, that&#39;s fine, we can prepare this for you for only 3 bucks 49 cents</em>).</p></li><li><p>expect that not all the menu items offered at the time of the booking might be available at the time when the Chef wants to cook it, and they have to find a replacement (maybe with some reduced pricing)</p></li><li><p>bookings have a date, and menu base prices as well as planned menu items for a certain menu can change over time, but the price at the time when the booking was placed must be usually fixed for the customer. So when a booking is placed, I would suggest to make a copy of the menu with its current price (maybe into a <code>BookedMenu</code> table), copy the menu items belong to this booked menu and allow all kind of individual changes to be applied to this copy.</p></li></ul><p>So better model these things separately:</p><ul><li><p>the available items (independently from the menu, the chef and the current pricing)</p></li><li><p>the offered menus and items, with the offered prices</p></li><li><p>the booked menus / items with the price at the time of the booking, and extra customer wishes</p></li><li><p>the items at the time when the meal is preparated and served, maybe with the changes due to supply shortages etc</p></li></ul><p>After you got this model complete, you should recheck which redundancies/potential inconsistencies exist. Currently, the second issue seems to exist because the model does not clearly differentiate between the different states in time, the menu as a &#34;template&#34; for a booking, the menu how it was booked and the menu how it was cooked and served.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-schema-for-pricing-products-packages-promotions-qty-based-limited-time-offer/'>Database Schema for Pricing Products (packages, promotions, qty based, limited time offer&#8230;)</a></li><li class="list-group-item"><a href='../database-schema-for-a-todo-list/'>Database schema for a ToDo list</a></li><li class="list-group-item"><a href='../database-design-for-inventory/'>Database Design for Inventory</a></li><li class="list-group-item"><a href='../database-cms-database-schema-design-advice/'>Database &#8211; CMS database schema design advice</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>