<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; Are RSpec and Cucumber really worth it &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070198 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070198" class="post-1070198 software type-software status-publish hentry category-software tag-cucumber tag-ruby-on-rails tag-testing tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; Are RSpec and Cucumber really worth it</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">cucumber</span><span class="mr-2 badge badge-info">ruby-on-rails</span><span class="mr-2 badge badge-warning">testing</span><span class="mr-2 badge badge-primary">unit testing</span></p><div class="entry-content"><p>I know most RoR programmers are testing addicts and I understand the advantages of a large testing suite but when I start testing, I never get such a large suite and I always wonder &#34;Am I testing the right way? Are there really efficient?&#34;. I&#39;m often dealing with integration tests testing only the way the application behave.</p><p>First, is testing really worth it? I mean, is the time spent on writing tests really worth it?</p><p>Then, I use RSpec, I&#39;ve recently discovered Cucumber, used it for a while but I don&#39;t know if writing all these steps is really worth the trouble? I know I can reuse steps but I never know if these steps are too complete or not: For instance, I&#39;ve been using a <code>Given I am logged in as (.+)</code> but I don&#39;t know if I must say in its definition <code>Given there&#39;s a user called $1</code> because it can duplicate the user if ever created but that&#39;s not worthwhile always having a step before <code>Given I am logged in as (.+)</code>. It&#39;s quite a lot of code that will maybe rarely be useful. I guess there are not new bugs on the parts tested every day&#8230;<br /> So is Cucumber really worthwhile compared to RSpec?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>My &#39;ah-ha!&#39; moments about testing in Ruby and Rails came when I really sat down and read the definitive resources on the subject, the <a href="http://pragprog.com/book/achbd/the-rspec-book">Rspec</a> and <a href="http://pragprog.com/book/hwcuc/the-cucumber-book">Cucumber</a> books. I shared your initial disdain of Cucumber, but then I realized that I was looking at the picture from quite the wrong angle.</p><p>Basically, Cucumber is about BDD (behaviour driven development) - you use Cucumber to plan your features, what you&#39;re going to work on next. Hmm, next you want users to be able to promote posts on a forum or something (to steal an example ;)) So you write something simple.</p><pre><code>Given I am logged in
And I can see the post &#34;BDD is awesome&#34;
When I vote the post up
Then the post should have one more vote
And the page should show a message thanking me for my vote.
</code></pre><p>Note that there&#39;s no references to anything code related in there pretty much. That comes in your steps. When you refactor your code, you might have to change your step definitions, but the behaviour (your feature) will never need to change.</p><p>Now every time you run your Cucumber feature, you&#39;ll pretty much be led through how to test the feature using TDD (test driven development). This is done at a lower level using RSpec.</p><p>First run - my first step definition is undefined. Copy the block to define it in say user_steps.rb or even session_steps.rb because it relates to users and their sessions. Now, how do you define that a user is logged in? You can take them through the login process.</p><pre><code>Given /^I am logged in$/ do
  visit login_path
  fill_in :name, :with =&gt; &#39;Joe&#39;
  fill_in :password, :with =&gt; &#39;Password&#39;
  click_button &#39;submit&#39;
end
</code></pre><p>Should be all happy. Second step.</p><pre><code>Given /^I can see the post &#34;(.+)&#34;$/ do |name|
  visit post_path(Post.find_by_name(name))
end
</code></pre><p>Again pretty easy. Note that if we totally redo our login process, or how our posts are defined and shown, we don&#39;t have to change the behaviour. Third step.</p><pre><code>When /^I vote the post up$/ do
  pending 
end 
</code></pre><p>Here&#39;s where you&#39;re starting to talk about new functionality, but you don&#39;t quite know how it&#39;s going to work yet. How do you vote a post up? You might click an image of a +1 or something, which does an ajax post to a controller, which returns JSON, or some such. So now you can move into pure Rspec testing.</p><ul><li>Test your view to make sure the +1 image is displayed,</li><li>Test your controller that it behaves correctly when it receives a given ajax request of the right format (both the happy and unhappy paths - what if an invalid post ID is received? What happens if the user has used up their 25 upvotes in a day? Does it increment the number of votes correctly?)</li><li>Test your javascript that it responds correctly when given a blob of JSON in the right format (does it update the +1 image to show it&#39;s been used? (thinking of Google+ here...) Does it show the thank you message? etc.)</li></ul><p>All of this doesn&#39;t affect the behaviour - but when you&#39;re finished dealing with the lower level testing, it will be trivial to fill in the step definition for how to vote a post up. It might be as simple as <code>click_link &#39;+1&#39;</code>. And the rest of the steps are testing results, which again should be straightforward to do. And when you&#39;re done, then you know your feature is complete and finished. If the necessary behaviour changes, you can tweak your feature, else you can tweak your implementation code in perfect safety.</p><p>I hope this makes sense. It&#39;s all been off the top of my head, but I think it demonstrates the difference between BDD and TDD, and why Cucumber and RSpec serve different needs.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../at-which-architecture-level-are-you-running-bdd-tests-e-g-cucumber/'>At which architecture level are you running BDD tests (e.g. Cucumber)</a></li><li class="list-group-item"><a href='../unit-testing-help-in-ensuring-unit-tests-are-meaningful/'>Unit-testing &#8211; Help in ensuring unit tests are meaningful</a></li><li class="list-group-item"><a href='../should-i-be-writing-feature-or-request-specs/'>Should I be writing feature or request specs</a></li><li class="list-group-item"><a href='../java-bdd-cucumber-best-practices/'>Java &#8211; BDD, Cucumber best practices</a></li><li class="list-group-item"><a href='../what-levels-to-test-on-with-bdd-cucumber/'>What levels to test on with BDD/Cucumber</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>