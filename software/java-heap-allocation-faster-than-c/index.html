<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java Heap Allocation Faster than C++ &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067590 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067590" class="post-1067590 software type-software status-publish hentry category-software tag-c tag-collections tag-heap tag-java tag-performance"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java Heap Allocation Faster than C++</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">collections</span><span class="mr-2 badge badge-warning">heap</span><span class="mr-2 badge badge-primary">java</span><span class="mr-2 badge badge-danger">performance</span></p><div class="entry-content"><p>I already posted this <a href="https://stackoverflow.com/questions/18268151/java-collections-faster-than-c-containers">question</a> on SO and it did ok. It was unfortunately closed though(only needs one vote to reopen) but someone suggested I post it on here as it is a better fit so the following is literally a copy paste of the question</p><hr/><p>I was reading the comments on this <a href="https://stackoverflow.com/questions/2163411/why-did-java-have-the-reputation-of-being-slow/2163570#2163570">answer</a> and I saw this quote.</p><blockquote><p>Object instantiation and object-oriented features are blazing fast to use (faster than C++ in many cases) because they&#39;re designed in from the beginning. and Collections are fast. Standard Java beats standard C/C++ in this area, even for most optimized C code.</p></blockquote><p>One user (with really high rep I might add) boldly defended this claim, stating that</p><ol><li><p>heap allocation in java is better than C++&#39;s</p></li><li><p>and added this statement defending the collections in java</p><blockquote><p>And Java collections are fast compared to C++ collections due largely to the different memory subsystem.</p></blockquote></li></ol><p>So my question is can any of this really be true, and if so why is java&#39;s heap allocation so much faster.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This is an interesting question, and the answer is complex.</p><p>Overall, I think it is fair to say that the JVM garbage collector is very well designed and extremely efficient. It&#39;s probably the best <em>general purpose</em> memory management system.</p><p>C++ can beat the JVM GC with <em>specialised memory allocators</em> that are designed for specific purposes. Examples might be:</p><ul><li>Per-frame memory allocators, which wipe the whole memory area at periodic intervals. These are frequently used in C++ games, for example, where a temporary memory area is used once per frame and immediately discarded.</li><li>Custom allocators managing a pool of fixed-sized objects</li><li>Stack based allocation (although note that the JVM also does this in various circumstances, e.g. via <a href="http://en.wikipedia.org/wiki/Escape_analysis" rel="noreferrer">escape analysis</a>)</li></ul><p>Specialised memory allocators are, of course, limited by definition. They usually have restrictions on object lifecycle and/or restrictions on the type of object that can be managed. Garbage collection is much more flexible.</p><p>Garbage collection also gives you a some significant <em>advantages</em> from a performance perspective:</p><ul><li>Object <strong>instantiation</strong> is indeed extremely fast. Because of the way that new objects are allocated sequentially in memory, it often requires little more than one pointer addition, which is certainly faster than typical C++ heap allocation algorithms.</li><li>You <strong>avoid the need for lifecycle management costs</strong> - e.g. reference counting (sometimes used as an alternative to GC) is extremely poor from a performance perspective since the frequent incrementing and decrementing of reference counts adds a lot of performance overhead (typically much more than GC).</li><li>If you use immutable objects, you can take advantage of <strong>structural sharing</strong> to save memory and improve cache efficiency. This is used heavily by functional languages on the JVM like Scala and Clojure. It is very difficult to do this without GC, because it is extremely hard to manage the lifetimes of shared objects. If you believe (as I do) that immutability and structural sharing are key to building large concurrent applications, then this is arguably the biggest performance advantage of GC.</li><li>You can <strong>avoid copying</strong> if all types of object and their respective lifecycles are managed by the same garbage collection system. Contrast with C++, where you often have to take full copies of data because the destination requires a different memory management approach or has a different object lifecycle.</li></ul><p>Java GC has one major downside: because the work of collecting garbage is deferred and done in chunks of work at periodic intervals, it causes occasional <strong>GC pauses</strong> to collect garbage, which can affect latency. This is usually not a problem for typical applications, but can rule Java out in situations where <em>hard realtime</em> is a requirement (e.g. robotic control). Soft realtime (e.g. games, multimedia) is typically OK.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-why-would-it-ever-be-possible-for-java-to-be-faster-than-c/'>Java &#8211; Why would it ever be possible for Java to be faster than C++</a></li><li class="list-group-item"><a href='../why-do-we-need-a-heap-if-everything-can-be-done-much-more-efficiently-on-the-stack/'>Why do we need a Heap if everything can be done much more efficiently on the Stack</a></li><li class="list-group-item"><a href='../java-is-object-pooling-a-deprecated-technique/'>Java &#8211; Is object pooling a deprecated technique</a></li><li class="list-group-item"><a href='../java-heap-space/'>Java heap space</a></li><li class="list-group-item"><a href='../stack-and-heap-dynamic-allocation-question/'>Stack and heap &#8211; dynamic allocation question</a></li><li class="list-group-item"><a href='../java-how-necessary-is-it-to-follow-defensive-programming-practices-for-code-that-will-never-be-made-publicly-available/'>Java &#8211; How necessary is it to follow defensive programming practices for code that will never be made publicly available</a></li><li class="list-group-item"><a href='../c-where-is-the-this-variable-stored/'>C++ &#8211; Where is the &#8216;this&#8217; variable stored</a></li><li class="list-group-item"><a href='../java-different-types-of-heap-in-java/'>Java &#8211; Different types of heap in java</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>