<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Is the BOM optional for UTF-16 and UTF-32 &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081651 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081651" class="post-1081651 software type-software status-publish hentry category-software tag-character-encoding tag-unicode"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Is the BOM optional for UTF-16 and UTF-32</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">character encoding</span><span class="mr-2 badge badge-info">unicode</span></p><div class="entry-content"><p>I used to think that the BOM is optional for UTF-8, but mandatory for UTF-16 and UTF-32.</p><p>But then I have read the following (in this <a href="https://blogs.msdn.microsoft.com/oldnewthing/20070417-00/?p=27223/" rel="nofollow noreferrer">article</a>):</p><blockquote><p>Let&#39;s look just at the ones that Notepad supports.</p><p>8-bit ANSI (of which 7-bit ASCII is a subset). These have no BOM; they<br /> just dive right in with bytes of text. They are also probably the most<br /> common type of text file.</p><p>UTF-8. These usually begin with a BOM but not always.</p><p>Unicode big-endian (UTF-16BE). <strong>These usually begin with a BOM but not</strong><br /> <strong>always</strong>.</p><p>Unicode little-endian (UTF-16LE). <strong>These usually begin with a BOM but</strong><br /> <strong>not always</strong>.</p></blockquote><p>So is Notepad not complying with the Unicode standard, or does the Unicode standard says that the BOM is optional for UTF-16?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The BOM is entirely optional. However, in order to decode UTF-16 you need to know the correct byte order. If you decode with the wrong byte order, you will generally also get valid codepoints. To know the correct byte order, we</p><ul><li>either know the byte order from an external source, e.g. documentation that states “this tool will always produce UTF-16LE output”,</li><li>or the encoded text contains a BOM.</li></ul><p>For example, the <a href="https://www.w3.org/TR/xml/#sec-guessing-no-ext-info" rel="nofollow noreferrer">XML standard</a> is defined in a way so that XML documents can optionally start with a BOM, but the <code>&lt;?xml</code> declaration at the start can also be used to determine the encoding.</p><p>Editors or web browsers have to work reasonably even when BOMs are missing, and the encoding is ambiguous. They can use statistical data e.g. on expected character frequencies to take a guess, but in the end the user should be able to override the encoding.</p><hr/><p>If we look at the Unicode Specification (version 10.0), then section 2.6 <em>Encoding Schemes</em> states:</p><blockquote><p>When a higher-level protocol supplies mechanisms for handling the endianness of integral data types, it is not necessary to use Unicode encoding schemes or the byte order mark. In those cases Unicode text is simply a sequence of integral data types.</p></blockquote><p>I.e. as explained above, the BOM is not necessary when we have external information about the byte order. However, there is a requirement that a BOM must be understood by some software dealing with Unicode. From section 23.8 <em>Specials</em>:</p><blockquote><p>Where the byte order is explicitly specified, such as in UTF-16BE or UTF-16LE, then all U+FEFF characters—even at the very beginning of the text—are to be interpreted as zero width no-break spaces. Similarly, where Unicode text has known byte order, initial U+FEFF characters are not required, but for backward compatibility are to be interpreted as zero width no-break spaces. […]</p><p>Systems that use the byte order mark must recognize when an initial U+FEFF signals the byte order. In those cases, it is not part of the textual content and should be removed before processing, because otherwise it may be mistaken for a legitimate zero width no-break space.</p></blockquote><p>In section 3.10 <em>Encoding Schemes</em>, various UTF encodings are defined. Here, UTF-16LE, UTF16BE, and UTF-16 are <em>different encodings</em>. The LE and BE variants do not have a BOM. For UTF-16:</p><blockquote><p>The UTF-16 encoding scheme may or may not begin with a BOM. However,
 when there is no BOM, and in the absence of a higher-level protocol, the byte
 order of the UTF-16 encoding scheme is big-endian.</p></blockquote><p>Equivalently for UTF-32LE, UTF-32BE, and UTF-32.</p><p>So the Unicode Standard does state that the BOM is optional, and mandates how software must handle the presence or absence of a BOM under various circumstances. Unicode-aware software that does not handle encoded text without BOMs is broken.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/should-character-encodings-besides-utf-8-and-maybe-utf-16-utf-32-be-deprecated/'>Should character encodings besides UTF-8 (and maybe UTF-16/UTF-32) be deprecated</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/should-utf-16-be-considered-harmful/'>Should UTF-16 be considered harmful</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-does-it-matter-if-a-character-is-8-bit-or-16-bit-or-32-bit/'>How does it matter if a character is 8 bit or 16 bit or 32 bit</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-to-detect-the-encoding-of-a-file/'>How to detect the encoding of a file</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/a-unicode-sentinel-value-i-can-use/'>A Unicode sentinel value I can use</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/why-does-charset-really-mean-encoding-in-common-usage/'>Why does &#8220;charset&#8221; really mean &#8220;encoding&#8221; in common usage</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/should-utf-8-csv-files-contain-a-bom-byte-order-mark/'>Should UTF-8 CSV files contain a BOM (byte order mark)</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-to-align-on-both-word-size-and-cache-lines-in-x86/'>How to align on both word size and cache lines in x86</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>