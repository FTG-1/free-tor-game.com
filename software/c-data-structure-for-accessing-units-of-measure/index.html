<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Data structure for accessing units of measure &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067702 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067702" class="post-1067702 software type-software status-publish hentry category-software tag-c tag-data-structures tag-design tag-naming"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Data structure for accessing units of measure</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">data structures</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">naming</span></p><div class="entry-content"><p><strong>TL;DR</strong> &#8211; I&#39;m trying to design an optimal data structure to define units within a unit of measure.</p><hr/><p>A <code>Unit of measure</code> is essentially a <code>value</code> (or quantity) associated with a <code>unit</code>. <a href="https://en.wikipedia.org/wiki/SI_units">SI Units</a> have seven bases or dimensions.  Namely: length, mass, time, electric current, temperature, amount of substance (moles), and luminous intensity.</p><p>This would be straightforward enough, but there are a number of derived units as well as rates that we frequently use.  An example combined unit would be the Newton: <code>kg * m / s^2</code> and an example rate would be <code>tons / hr</code>.</p><p>We have an application that relies heavily upon implied units.  We&#39;ll embed the units within the variable or column name.  But this creates problems when we need to specify a unit of measure with different units.  Yes, we can convert the values at input and display but this generates a lot of overhead code that we&#39;d like to encapsulate within its own class.</p><p>There are a number of solutions out on codeplex and other collaborative environments.  The licensing for the projects is agreeable but the project itself usually ends up being too lightweight or too heavy.  We&#39;re chasing our own unicorn of &#34;just right.&#34;</p><p>Ideally, I could define a new unit of measure using something like this:</p><blockquote><p>UOM myUom1 = new UOM(10, volts);<br /> UOM myUom2 = new UOM(43.2, Newtons);</p></blockquote><p>Of course, we use a mix of Imperial and SI units based upon our clients&#39; needs.</p><p>We also need to keep this structure of units synchronized with a future database table so we can provide the same degree of consistency within our data too.</p><hr/><p>What&#39;s the best way of defining the units, derived units, and rates that we need to use to create our unit of measure class?  I could see using one or more enums, but that could be frustrating for other developers.  A single enum would be huge with 200+ entries whereas multiple enums could be confusing based upon SI vs Imperial units and additional breakdown based upon categorization of the unit itself.</p><p>Enum examples showing some of my concerns:</p><blockquote><p>myUnits.Volt<br /> myUnits.Newton<br /> myUnits.meter</p><p>SIUnit.meter<br /> ImpUnit.foot<br /> DrvdUnit.Newton<br /> DrvdUnitSI.Newton<br /> DrvdUnitImp.FtLbs</p></blockquote><p>Our set of units in use is pretty well defined and it&#39;s a finite space.  We do need the ability to expand and add new derived units or rates when we have client demand for them.  The project is in C# although I think the broader design aspects are applicable to multiple languages.</p><hr/><p>One of the libraries I looked at allows for free-form input of units via string.  Their UOM class then parsed the string and slotted things accordingly.  The challenge with this approach is that it forces the developer to think and remember what the correct string formats are.  And I run the risk of a runtime error / exception if we don&#39;t add additional checks within the code to validate the strings being passed in the constructor.</p><p>Another library essentially created too many classes that the developer would have to work with.  Along with an equivalent UOM it provided a <code>DerivedUnit</code> and <code>RateUnit</code> and so on.  Essentially, the code was overly complex for the problems we&#39;re solving.  That library would essentially allow any:any combinations (which is legitimate in the units world) but we&#39;re happy to scope our issue (simplify our code) by not allowing every possible combination.</p><p>Other libraries were ridiculously simple and hadn&#39;t even considered operator overloading for example.</p><p>In addition, I&#39;m not as worried about attempts at incorrect conversions (for example: volts to meters).  Devs are the only ones who will access at this level at this point and we don&#39;t necessarily need to protect against those types of mistakes.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The Boost libraries for C++ include an article on <a href="http://www.boost.org/doc/libs/1_53_0/libs/mpl/doc/tutorial/dimensional-analysis.html">dimensional analysis</a> that presents a sample implementation of handling units of measure.</p><p>To summarize:  Units of measurement are represented as vectors, with each element of the vector representing a fundamental dimension:</p><pre><code>typedef int dimension[7]; // m  l  t  ...
dimension const mass      = {1, 0, 0, 0, 0, 0, 0};
dimension const length    = {0, 1, 0, 0, 0, 0, 0};
dimension const time      = {0, 0, 1, 0, 0, 0, 0};
</code></pre><p>Derived units are combinations of these.  For example, force (mass * distance / time^2) would be represented as</p><pre><code>dimension const force  = {1, 1, -2, 0, 0, 0, 0};
</code></pre><p>Imperial versus SI units could be handled by adding a conversion factor.</p><p>This implementation relies on C++-specific techniques (using template metaprogramming to easily turn different units of measurement into different compile-time types), but the concepts should transfer to other programming languages.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-nested-enum-type-in-c-or-c/'>C# &#8211; Nested Enum type in C++ or C#</a></li><li class="list-group-item"><a href='../c-most-efficient-data-structure-for-implementing-inheritance-structure-without-classes/'>C# &#8211; Most efficient data structure for implementing inheritance structure without classes</a></li><li class="list-group-item"><a href='../c-api-design-should-i-use-strings-or-an-enum-for-dictionary-keys/'>C# &#8211; API Design: Should I use strings or an enum for dictionary keys</a></li><li class="list-group-item"><a href='../c-is-it-wrong-to-use-flags-for-grouping-enums/'>C# &#8211; Is it wrong to use flags for &#8220;grouping&#8221; enums</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>