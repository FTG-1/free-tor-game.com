<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; How to implement option to return Blob, ArrayBuffer, or AudioBuffer from window.speechSynthesis.speak() call &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087111 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087111" class="post-1087111 software type-software status-publish hentry category-software tag-c tag-javascript"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; How to implement option to return Blob, ArrayBuffer, or AudioBuffer from window.speechSynthesis.speak() call</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">javascript</span></p><div class="entry-content"><p>Note, presently have no experience composing or modifying C++ code, which the code that will need to compose or modify is written in.</p><p>Specifically, <code>window.speechSynthesis.speak()</code> does not currently provide an option to return the audio generated by the function call as a <code>Blob</code>, <code>ArrayBuffer</code> or <code>AudioBuffer</code> at either <a href="https://cs.chromium.org/chromium/src/third_party/WebKit/Source/modules/speech/SpeechSynthesis.cpp" rel="noreferrer">Chromium</a> or <a href="https://dxr.mozilla.org/mozilla-central/source/dom/media/webspeech/synth/SpeechSynthesis.cpp" rel="noreferrer">Firefox</a>, where have filed feature request for the same<br /> <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=733051" rel="noreferrer">Issue 733051</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1377893" rel="noreferrer">Bug 1377893</a>.</p><p>The relevant workaround that have composed at <a href="https://github.com/guest271314/SpeechSynthesisRecorder" rel="noreferrer">SpeechSynthesisRecorder.js</a> is to utilize <code>navigator.mediaDevices.getUserMedia()</code> and <code>MediaRecorder()</code> to record the audio output of <code>.speak()</code> call from <code>Monitor of Built-in Audio Analog Stereo</code>, which produces expected result at Chromium, though <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1377816" rel="noreferrer">choppy playback of audio at Firefox</a>. Though, why should we have to use <code>navigator.mediaDevices.getUserMedia()</code> and <code>MediaRecorder()</code> to create a copy of generated audio, instead of providing a parameter to <code>.speak()</code> which indicates that the generated audio should not be played, but rather, returned as an <code>Blob</code>, <code>ArrayBuffer</code>, <code>AudioBuffer</code>, or other data type?</p><p><a href="http://www.masswerk.at/mespeak/" rel="noreferrer"><code>meSpeak.js</code></a> library provides a <code>rawdata</code> option</p><blockquote><ul><li>rawdata:   Do not play, return data only.   The type of the returned data is derived from the value (case-insensitive) of &#39;rawdata&#39;:<ul><li>&#39;base64&#39;: returns a base64-encoded string.</li><li>&#39;mime&#39;:   returns a base64-encoded data-url (including the MIME-header).<br /> (synonyms: &#39;data-url&#39;, &#39;data-uri&#39;, &#39;dataurl&#39;, &#39;datauri&#39;)</li><li>&#39;array&#39;:  returns a plain Array object with uint 8 bit data.</li><li>default   (any other value): returns the generated wav-file as an ArrayBuffer (8-bit unsigned).</li></ul></li></ul></blockquote><p>There has been previous discussion as to incorporating Web Speech API with Web Audio API, for instance at <a href="http://lists.w3.org/Archives/Public/public-speech-api/2012Sep/0072.html" rel="noreferrer">RE: Interacting with WebRTC, the Web Audio API and other external sources</a></p><blockquote><p>2) Storing and processing text-to-speech fragments.</p><p>Rather than mandating immediate output of the synthesized audio<br /> stream, it should be considered to introduce an &#34;outputStream&#34;<br /> property on a TextToSpeech object which provides a MediaStream object.<br /> This allows the synthesized stream to be played through the<br /> element, processed through the Web Audio API or even to be stored<br /> locally for caching, in case the user is using a device which is not<br /> always connected to the internet (and when no local recognizer is<br /> available). Furthermore, this would allow websites to store the<br /> synthesized audio to a wave file and save this on the server, allowing<br /> it to be re-used for user agents or other clients which do not provide<br /> an implementation.</p></blockquote><p>mentioned at <a href="https://stackoverflow.com/q/18902789/">Can Web Speech API used in conjunction with Web Audio API?</a></p><blockquote><p>I actually asked about adding this on the Web Speech mailing list, and<br /> was basically told &#34;no&#34;. To be fair to people on that mailing list, I<br /> was unable to think of more than one or two specific use cases when<br /> prompted.</p><p>So unless they&#39;ve changed something in the past month or so, it sounds<br /> like this isn&#39;t a planned feature.</p></blockquote><p>and more recently by this user at <a href="https://lists.w3.org/Archives/Public/public-speech-api/2017Jun/0000.html" rel="noreferrer">MediaStream, ArrayBuffer, Blob audio result from speak() for recording?</a></p><hr/><p>Questions:</p><p>1) At this point in the development of this project or pursuit, is it more feasible to attempt to learn C++ and the methodology of submitting a patch to browser maintainers for the described implementation; that is, to make required changes at browser source code myself?</p><p>2) Continue to ask for help from authors of Web Speech API at browsers and, or developers at large, towards completion of the described implementation?</p><p>3) Both 1) and 2)?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>At this point in the development of this project or pursuit, is it more feasible to attempt to learn C++ and the methodology of submitting a patch to browser maintainers for the described implementation; that is, to make required changes at browser source code myself?</p></blockquote><p>It really depends on your commitment to this feature. The <a href="https://dvcs.w3.org/hg/speech-api/raw-file/tip/webspeechapi.html#dfn-ttsspeak" rel="nofollow noreferrer">spec</a> is still in draft, and you could try submitting feedback, however the <a href="http://lists.w3.org/Archives/Public/public-speech-api/2017Jun/" rel="nofollow noreferrer">most recent feedback</a> was presumably from you, and you have not been answered yet. There will probably have to be more discussion about how the feature is described in the spec, and somebody will have to make the modifications (if it&#39;s decided to make your suggested change). As you&#39;ve pointed out <a href="https://stackoverflow.com/questions/18902789/can-web-speech-api-used-in-conjunction-with-web-audio-api">others have supposedly asked for this feature and have been rejected</a>.</p><p>I don&#39;t think the browsers will accept a PR if it doesn&#39;t adhere to the current version of the spec draft, so I think the spec is the first step to get browser support.</p><p>Even when you get it in the spec draft, it may take a while for the browsers to review a PR from you, can it may take a lot of effort for you to contribute because you  don&#39;t know C++, and browsers are very complicated software. If it gets into the spec, it may be simpler to just wait for the maintainers of the browser to implement the new features, but if you&#39;re determined to see it through, then by all means contribute the PR! You should decide for yourself if learning C++ and understanding the browser code is worth a PR that potentially will never be merged.</p><blockquote><p>Continue to ask for help from authors of Web Speech API at browsers and, or developers at large, towards completion of the described implementation?</p></blockquote><p>It sounds like you&#39;ve already done what you can to ask for this to be implemented. You can either let it go, or you can keep trying to get your feature included in the spec. This may involve contacting the editors directly (&#34;why hasn&#39;t my message on the mailing list been answered?&#34;/&#34;is the speech api draft dead?&#34;)-- it will help to show that others want the same feature. While I agree that the feature sounds like a good idea, the editors of the draft may have reasons why it&#39;s not a good idea. I found Kevin Ennis&#39; <a href="http://lists.w3.org/Archives/Public/public-speech-api/2013Mar/0000.html" rel="nofollow noreferrer">message to the mailing list</a>, it seemed unresolved to me, but the entire mailing list seems basically dead since they haven&#39;t answered your message from a month ago. The draft isn&#39;t on the W3 track for standardization. It&#39;s really up to your determination what you do, but #2 is definitely the first step.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/javascript-provide-a-url-to-a-couchdb-document-attachment-without-giving-the-username-password/'>Javascript &#8211; Provide a URL to a CouchDB document attachment without giving the username/password</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/javascript-base64-decode-and-sh1-decryption-of-sec-websocket-accept-value-example-from-websocket-rfc/'>Javascript &#8211; Base64 decode and SH1 decryption of Sec-WebSocket-Accept value example from Websocket RFC</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>