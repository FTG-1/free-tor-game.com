<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; how and should I &#8216;unit test&#8217; an entire package &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087754 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087754" class="post-1087754 software type-software status-publish hentry category-software tag-java tag-mocking tag-testing tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; how and should I &#8216;unit test&#8217; an entire package</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">mocking</span><span class="mr-2 badge badge-warning">testing</span><span class="mr-2 badge badge-primary">unit testing</span></p><div class="entry-content"><p>I&#39;m still learning to be good about doing <em>unit</em> level testing, as I&#39;ve always been a little sloppy about only doing functional testing in the past, so I want to double check I&#39;m doing this &#39;right&#39;.</p><p>I have a package which is responsible for auto-magically updating a particular configuration which is expected to change regularly during runtime.  Provide a list of objects to monitor to the constructor of my main package class.  Then at some point call update it will go to all the multiple places that define configuration, detect change, update the appropriate state for the objects it&#39;s monitoring, and provide a report of what was changed.  This is all automatic and otherwise transparent to all other packages.</p><p>My inclination is to test this as a unit, but it is a pretty &#39;big&#39; unit, 5-6 classes and fetching from multiple files and a restful interface.  It feels like testing any smaller units would take much longer, be less flexible to refactoring and only provide a slightly higher chance of detecting a defect, but that could just be my laziness talking.  Would it be considered &#39;better&#39; to test at a lower level?</p><p>Assuming it is &#39;right&#39; to test the package as a unit what is considered appropriate for mocking something like this?  There are methods of classes which are instantiated by my main class (ie, not something I pass in directly so I can&#39;t just pass my own mock) that have methods I want to control.  I believe I can use powerMock in the two cases I can think of (or could, after I research PowerMock some more), but I&#39;m not sure if doing so is transparent enough.  Is configuring PowerMock to detect and return a mock file object any time my package tries to open a configuration file, even if it&#39;s buried deep in my package logic, acceptable, or is this considered to be abusing my knowledge of implementation specific details?  Would it be &#39;cleaner&#39; to actually modify configuration files on the file system and let them be read normally without further mocking?  I would need to modify the files regularly for testing&#8230;</p><p>Edit:<br /> To clarify the question of coupling asked in one of the questions, I don&#39;t think that my classes are overly coupled.  Effectively I have three classes that fetch state from A, B, and C, and then a &#39;main&#39; class which takes the state from the three and decides how to combine it correctly (ie, if A and B don&#39;t match use A unless C).  I could easily test A B and C separately and then mock them to test my &#39;main&#39; class.  However, it seems like the testing of my &#39;main&#39; class would effectively test the comparatively simple interfaces for A, B, and C anyways if I didn&#39;t mock them.  Thus it feels like duplicate work to test them individually.  I may get some slightly better code coverage, maybe, with individual testing, and it&#39;s always nice to have one test test only one thing.  But I don&#39;t know if it&#39;s worth all the overhead for minor benefits.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Unit testing is the lowest level of testing, but that means only that it is the lowest level you do, not the lowest level you could theoretically do. If you test at the class level, you could test at the method level, using an appropriate test tool to get at private members. But if you test at the method level, you could test at the statement level, using an appropriate test tool to get the statement in isolation so you test it. And if you did decide to test at statement level, that&#39;s still a decision not to test at instruction or byte code level. And that process of decomposition only stops when someone decides &#39;a smaller unit would be stupid&#39;.</p><p>So the question &#39;how should I <strong><em>unit</em></strong> test this&#39; is exactly equivalent to &#39;how should I <strong><em>first</em></strong> test this&#39;. If the best way of testing a package is as a whole, because it is of a size and complexity where testing it as a unit is the most effective way of meeting your reliability and maintainability goals, then do so.</p><p>If it isn&#39;t, then don&#39;t.</p><p>Anyone trying to give more specific advice without either seeing your code base or knowing your project context (nuclear power plant in basement of an orphanage, or email spam generator?) is very likely not merely wrong, but also unwise.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-how-to-unit-test-without-mocks-and-not-be-tied-to-a-concrete-implementations-of-an-interface/'>Unit-testing &#8211; How to unit test without mocks and not be tied to a concrete implementations of an interface</a></li><li class="list-group-item"><a href='../c-how-to-setup-build-system-for-unit-testing-mocking/'>C++ &#8211; How to setup build system for unit testing + mocking</a></li><li class="list-group-item"><a href='../unit-testing-unit-testing-an-api-client-and-wrappers/'>Unit-testing &#8211; Unit testing an API client and wrappers</a></li><li class="list-group-item"><a href='../unit-testing-how-to-detect-dependency-problems-with-unit-tests-when-you-use-mock-objects/'>Unit-testing &#8211; How to detect dependency problems with unit tests when you use mock objects</a></li><li class="list-group-item"><a href='../unit-testing-how-to-avoid-the-need-to-unit-test-private-methods/'>Unit-testing &#8211; How to avoid the need to Unit test private methods</a></li><li class="list-group-item"><a href='../java-wrapping-utility-classes-and-injecting-them-for-unit-testing-purposes/'>Java &#8211; Wrapping utility classes and injecting them for unit testing purposes</a></li><li class="list-group-item"><a href='../unit-testing-how-exactly-should-unit-tests-be-written-without-mocking-extensively/'>Unit-testing &#8211; How exactly should unit tests be written without mocking extensively</a></li><li class="list-group-item"><a href='../unit-testing-should-i-have-one-interface-per-class-for-unit-testing/'>Unit-testing &#8211; Should I Have One Interface Per Class For Unit Testing</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>