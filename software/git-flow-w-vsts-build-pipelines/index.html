<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Git Flow w/ VSTS Build Pipelines &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086452 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086452" class="post-1086452 software type-software status-publish hentry category-software tag-continuous-integration tag-continuous-delivery tag-gitflow"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Git Flow w/ VSTS Build Pipelines</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">continuous integration</span><span class="mr-2 badge badge-info">continuous-delivery</span><span class="mr-2 badge badge-warning">gitflow</span></p><div class="entry-content"><p>I am trying to marry the git flow approach (w/ dev, test, uat, staging, prod env) &amp; automated build and releases in Visual Studio Team System (VSTS). Slightly struggling due to VSTS needing a persistent branch to &#39;anchor&#39; builds on &#8211; I am curious what other people do.</p><p>Our Approach</p><ol><li>branch <code>newFeature</code> from <code>develop</code> branch.</li><li>do work, &amp; raise PR for <code>newFeature</code>. Once approved &amp; automated build runs, <code>newFeature</code> is merged in to <code>develop</code> and deleted.</li><li>This build, is then deployed to development environment, and sense checked.</li><li>Same [unchanged] build can then be deployed to the test environment, and QA&#39;ed.</li><li>When testers are happy, release is prepared for UAT. We create a brand new <code>release-x</code> branch from <code>develop</code>, perhaps cherry pick things too..</li><li><code>release-x</code> is then build then deployed to UAT.</li><li>issues / defects are prioritised and resolved.. some go on backlog, some are made directly to <code>release-x</code> is critical.</li><li>once all ready <code>release-x</code> is merged to <code>master</code> branch, which triggers a new, 3rd build..</li><li>that build is deployed to staging env for final customer checks</li><li>when all ok, same build is also deployed to production</li></ol><p>So, to achieve this, we have a couple of build/release pipelines:</p><ul><li>dev/test &#8211; this takes the build produced on feature completion, and makes that same build avail for test</li><li>staging/prod &#8211; this takes the build produced once a release is merge into master, and can also push it to prod</li><li>don&#39;t have anything automated for UAT due to <code>release-x</code> not being permanent</li></ul><p>The overall question I have here really two-fold:</p><ol><li><p>Where / when should take a release branch?</p><ul><li>when a dev build is done?</li><li>following an ok&#39;ed test build?</li><li>something else?</li></ul></li><li><p>How best to avoid the 3 builds that we currently have? üòê</p></li></ol><p>I think I would like to do the former&#8230; but I&#39;m not sure how VSTS CICD can accommodate?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your life will be easier if you only build from persistent branches. ie develop and master.</p><p>You are already doing this with your dev builds, if you follow gitflow you should build from the master branch after merging the release branch. Not the release branch pre merge.</p><p>Subsequent changes to the release are done on hotfix branches and again built on master once the hotfix has been merged in.</p><p>I would further advise not pushing your dev build further than the dev environment. All proper testing should be done against the same binaries that will be released. Not the same source code.</p><p>So I would go</p><ul><li>finish feature, merge to develop</li><li>build develop and deploy to DEV env.</li><li>run dev testing of new features in DEV environment until you are happy that they are complete, all automated tests pass</li><li>finish more features....</li><li>create release branch, if required</li><li>do final changes for release, set version, add docs etc</li><li>merge release into master</li><li>build master and push to TEST</li><li>test release</li><li>bug fixes in hotfix branches, build from master</li><li>push the same build to UAT once you have passed test</li><li>perform UAT, bug fixes in hotfix branches</li><li>push same build to live</li></ul><p>Now obviously the downside of this is if you normally find lots of bugs during testing, your master branch has lots of &#39;bad&#39; commits</p><p>The upside is you test the exact version of the software you deploy.</p><p>If you have lots of automated tests and they all pass in DEV then you shouldn&#39;t get any bugs in master.</p><p>If you are doing manual testing, then you are probably better off pushing the DEV build to TEST and doing your bug fixes as feature branches</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../gitflow-model-with-uat-releases-is-too-chaotic-how-to-simplify/'>Gitflow model with UAT releases is too chaotic, how to simplify</a></li><li class="list-group-item"><a href='../git-which-artifact-should-i-deploy-to-prod-when-using-git-flow/'>Git &#8211; Which artifact should I deploy to prod when using Git Flow</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>