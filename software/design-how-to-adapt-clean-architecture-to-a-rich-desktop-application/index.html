<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; How to adapt Clean Architecture to a rich desktop application &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080120 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080120" class="post-1080120 software type-software status-publish hentry category-software tag-clean-architecture tag-design tag-domain-driven-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; How to adapt Clean Architecture to a rich desktop application</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">clean-architecture</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">domain-driven-design</span></p><div class="entry-content"><p>I&#39;m just learning about clean architecture and I&#39;m trying to design a proof of concept for an application I want to build soon.</p><p>In the Clean Architecture the Presentation layer and the Domain Model layer are separated by the Application layer. I understand how this make sense for stateless applications, like a Web base MVC application or a &#34;record based&#34; desktop application where most operations are CRUD. Also, my understanding is that the Presentation layer should not directly use the domain object, but should have it&#39;s own ViewModel that are mapped to/from models from the application layer. Is this assumption correct?</p><p>The application I plan to develop will allow the user to input chess games one move at a time. It seems to me that the rules for chess should be in the Domain Model layer. If this is the case, how does the Presentation layer validate each user input (to verify each moves legality)? Does it need to go through the Application Layer every time or does it makes more sense to let the Presentation Layer somehow manipulate the Domain objects directly to build the model according to the user input and then send it to the Application layer when it&#39;s time to save it to the database?</p><p>I tried to find resources online that would talk about this, but it seems all example/course/tutorial I found talk about a web application or at least a stateless application of the CRUD type where the business rules are applied once before saving the data or after loading them. In my application the chess rules needs to be applied every time the user edit the ViewModel to give an immediate feedback.</p><p>(As I wrote this, the rubber duck effect kicked in and I now think that maybe I should always go through the application layer. I would still like to know what more experienced people think)</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I am using <em>Clean Architecture</em> for a rich desktop application since about a year now and it works well for GUI-heavy, event-based applications. It&#39;s not a good fit for a &#34;real-time&#34; game like a jump&#39;n&#39;run, but a chess game will work just fine.</p><p>Instead of dissecting your question, I will go through a recap of the layers and will end with following the process of moving a figurine.</p><h1>The Entities Layer</h1><p>&#34;<em>Enterprise wide business rules</em>&#34;. In your case, that means encapsulating the rules of the game. Having the age old game of chess here instead of an actual business gives you an advantage - once you wrote this layer, the only way it will ever need a change is if you found a bug here.</p><h1>The Use Cases Layer</h1><p>Think of use cases as application user actions. In this layer, you define these user actions, the input they take, the output they give back and the interfaces they use in order to achieve their goal. Such a use case will not really do any work itself. It&#39;s more like a step-by-step description of what happens.</p><h1>The Interface Adapters Layer</h1><p>The code you write that does the &#34;grunt work&#34; goes in here.</p><h1>The Framework &amp; Drivers Layer/Details Layer</h1><p>This layer is purely an adapter from some external thing to your code (= the inner 3 layers). It consists almost completely of wrappers. This part needs to be so thin/simple that it doesn&#39;t <em>need</em> to know about the other 3 layers. It doesn&#39;t know about your models, it only works with strings, ints, events, etc.</p><p>The exception to this might be your setup code that connects everything, which is also in this layer for practical reasons rather than semantical.</p><p>(You called this the &#34;Presentation layer&#34;, but that&#39;s a bit misleading. On one hand because a DB, some hardware device, internet access etc are also all external things that get their wrappers in this layer. On the other hand because all the &#34;view logic&#34; - like turning a model into strings for the GUI - happens in the previous layer.)</p><h1>Moving a chess piece</h1><h3>Details layer</h3><ul><li>In the GUI, the user drags a chess piece to a different square</li><li>The class listening to that happening is a <code>BoardView</code> in the details layer</li><li>The <code>BoardView</code> calls a <code>BoardViewPresenter</code> with the simple info <code>(&#39;A&#39;, 1, &#39;B&#39;, 3)</code></li></ul><h3>Interface Adapters layer</h3><ul><li>The <code>BoardViewPresenter</code> translates that into proper models from your Entities layer.</li><li>It finds the <code>ChessPiece</code> on A1 and the <code>BoardPosition</code> B3.</li><li>It puts those into a <code>MoveChessPieceRequest</code> from the use case layer.</li><li>It sends that to the <code>MoveChessPieceUseCase</code> (obviously also from the use case layer).</li></ul><h3>Use Case layer</h3><ul><li>The <code>MoveChessPieceUseCase</code> validates the request according to the rules from the Entities layer.</li><li>It goes through the steps &#34;The target square is free&#34;, &#34;The type of chess piece can move like that&#34; and &#34;There&#39;s no check to resolve&#34;.</li><li>If any of the validation steps would have failed, the use case returns early a <code>MoveChessPieceResult</code> with a boolean <code>Succeeded</code> set to false.</li><li>However, in this example the request is valid, so it changes the Entities in memory and returns a positive result.</li></ul><h3>Interface Adapter Layer</h3><ul><li>The <code>BoardViewPresenter</code> now has the <code>MoveChessPieceResult</code> and reacts to the positive result.</li><li>It gets the <code>ChessPieceView</code> and tells it <code>Move(&#39;B&#39;, 3)</code>.</li></ul><h3>Details layer</h3><ul><li>The <code>ChessPieceView</code> changes its actual position on the screen.</li><li>It also plays a &#34;move&#34; sound</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/design-recovering-an-anemic-domain-model-into-a-multitier-architecture/'>Design &#8211; Recovering an anemic domain model into a multitier architecture</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/clean-architecture-may-the-controller-talk-to-the-presenter-directly/'>Clean Architecture: May the Controller talk to the Presenter directly</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/architecture-clean-architecture-use-case-spanning-multiple-ui-elements/'>Architecture &#8211; Clean Architecture: Use case spanning multiple UI elements</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/clean-architecture-and-repository-pattern/'>Clean architecture and Repository pattern</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-implementing-clean-architecture/'>C# &#8211; Implementing clean architecture</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>