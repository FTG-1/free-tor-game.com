<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Exception treatment with/without recursion &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1071576 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1071576" class="post-1071576 software type-software status-publish hentry category-software tag-exceptions tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Exception treatment with/without recursion</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">exceptions</span><span class="mr-2 badge badge-info">java</span></p><div class="entry-content"><p>I&#39;ve entered in an argument with a fellow colleague about a piece of code. While he thinks that it is ok, I don&#39;t. But I don&#39;t have any more arguments than that calling the same method (recursion) in a catch block is not a good practice.</p><p>So here is a pseudocode of what we are arguing about:</p><pre><code>public String someMethod( SomeType param1, SomeType param2 ..., int attempts ){
    int max_attempts = 5;
    try{
        //doSomething here;
        return result;
    }catch (Exception e){
        if ( attempts == max_attempts ){
            throw new RuntimeException(e);
        }

        //log exception
        //sleep for some time

        //here is the part I do not agree.
        return someMethod( param1, param2 ..., attempts+1 );
    }
}
</code></pre><p>My suggestion is to have a structure like this one:</p><pre><code>public String someMethod( SomeType param1, SomeType param2... ) 
                                           throws Exception /*or whatever*/{
     //do something
     return result;
}

public String executeProcess( SomeType param1, SomeType param2 ... ){
    int attempts = 0;
    boolean ok = false;
    String result;
    do{
        try{
            result = someMethod( param1, param2... );
            ok=true;
        }catch( /*specific exceptions here*/ e ){
            attempts++;
            //log exception
            //sleep for some time
        }
    }while( !ok || attempts&lt;5 ); //just to be clear 5 here would be a constant

    if ( attempts &gt;= 5 ){ 
        throw new RuntimeException(e);
    }
    return result;
}
</code></pre><p>In my solution could even evolve into something even more elegant like an executor class with a process list and priority, etc. (of course only if needed).</p><p>So which one of these is the best course of action and what would be the arguments to defend it (pros and cons).</p><p>What the <code>someMethod</code> does is to create a <code>HttpURLConnection</code> and send a <code>POST</code> request to a webservice that will return a <code>JSON</code> string which will then be handled and converted to an object outside the context of this method (the conversion part).</p><p>All exception handling will be based on the connection with the webservice.</p><p>What I forgot to mention here is that his version of the code has already been in production for a long time, therefore there aren&#39;t any &#34;programming bugs&#34;. The only exceptions that have been thrown are ones concerning the connection/timeouts (whatever) related to the webservice.</p><p>I even talked to him to go the log (history) file and get all specific exceptions and put in the catch block.</p><p>Considering that the exceptions that have been handled will be the specific ones, <strong>what would be the best solution?</strong></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>It looks like the intent is to try 5 times, logging the problem each time. If none of the attempts succeed, give up after 5 tries. I&#39;ll label this the <em>scaffold</em>, and I&#39;ll call the thing to try 5 times the <em>core functionality</em>.</p><p>Let&#39;s look at the two versions with reference to some coding guidelines from around the web. For simplicity, I&#39;ll call versions <em>R</em> for the recursive version and <em>S</em> for the non-recursive version because it has <em>separate</em> code for the scaffold and the core functionality.</p><p>S conforms better to <a href="https://en.wikipedia.org/wiki/SOLID_(object-oriented_design)" rel="nofollow">SOLID principles</a> than R, in particular to the <em>single responsibility</em> principle, but also to some extent to the <em>Liskov substitution</em> principle.</p><ul><li><p><a href="https://en.wikipedia.org/wiki/Single_responsibility_principle" rel="nofollow">single responsibility</a> - separating the scaffold from the core functionality allows each to concentrate on their own intricacies.; and</p></li><li><p><a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle" rel="nofollow">Liskov substitution</a> - separating out the core functionality allows other core functionality to be used with the same scaffold, as you observe.</p></li></ul><p>Your non-recursive version embodies the coding intent more clearly and has less mingling between core functionality and exception code. This helps with code review and maintenance. To improve on it, you can consider using another of the SOLID principles: <a href="https://en.wikipedia.org/wiki/Dependency_inversion_principle" rel="nofollow">dependency inversion</a>. Instead of having the generic <code>executeProcess</code> depend on the concrete <code>someMethod</code>, add a call-back as a parameter to<code>executeProcess</code> and call <code>executeProcess</code> with (an encapsulated form of) <code>someMethod</code>. This allows you to put <code>executeProcess</code> into a generic library rather than copy-paste-modify it for each new <code>someOtherMethod</code> that might be introduced later.</p><p>Mingling business logic with exception handling is the first warning in <a href="http://codebuild.blogspot.com.au/2012/01/15-best-practices-about-exception.html" rel="nofollow">this list of best practices for exception handling</a>. Even the sleep can be considered part of the clean-up, perhaps relegated to a finally block or placed outside the exception mechanism altogether.</p><p>Another issue with R is that the recursion (into the code that threw the exception) occurs before the exception is fully handled.</p><p><strong>Your refactored version is the better option of the two</strong>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-better-way-to-define-an-exception-thrown-by-a-method-in-java/'>Java &#8211; better way to define an exception thrown by a method in Java</a></li><li class="list-group-item"><a href='../java-exception-handling-in-java-web-application/'>Java &#8211; Exception Handling in Java web application</a></li><li class="list-group-item"><a href='../java-exception-handling-design/'>Java exception handling design</a></li><li class="list-group-item"><a href='../java-exception-versus-return-code-in-dao-pattern/'>Java &#8211; Exception versus return code in DAO pattern</a></li><li class="list-group-item"><a href='../java-why-is-a-springs-httpclienterrorexception-an-unchecked-exception/'>Java &#8211; Why is a Spring&#8217;s HttpClientErrorException an unchecked exception</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>