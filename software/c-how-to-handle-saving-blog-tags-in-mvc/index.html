<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; How to handle saving blog tags in MVC &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076022 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076022" class="post-1076022 software type-software status-publish hentry category-software tag-asp-net-mvc5 tag-c"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; How to handle saving blog tags in MVC</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">asp.net-mvc5</span><span class="mr-2 badge badge-info">c</span></p><div class="entry-content"><p>I&#39;m writing my own blog engine as a learning exercise. The blog is fairly functional right now but I&#39;m trying to add a &#39;tag&#39; feature to it and I&#39;m confused as to what the best way to handle saving a list of tags back to my controller.</p><h2>My Question:</h2><p>Should I be passing my list of comma separated tags back to the controller as a single string and converting it into a <code>IList&lt;Tag&gt;</code> there? Or should I be handling this out in the view and then pass an <code>IList&lt;Tag&gt;</code> to the controller?</p><p>A sudo-version of my Post.cs model:</p><pre><code>public class Post : IEntity
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Body { get; set; }
    public IList&lt;Tag&gt; Tags { get; set; }
}
</code></pre><p>and my Tag.cs model:</p><pre><code>public class Tag : IEntity
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IList&lt;Post&gt; Posts { get; set; }
}
</code></pre><p><strong>update:</strong> Sharing some <strong>gist</strong> files.</p><p><a href="https://gist.github.com/codebeaulieu/d9a74b4414fdb18021ca" rel="nofollow">PostController.cs</a></p><p><a href="https://gist.github.com/codebeaulieu/8f3a94082469c2396180" rel="nofollow">Create.cshtml</a></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>When tags are submitted by the author of a blog, they are under a form of a simple string (with either comma-separated values or, like on Stack Exchange, simple spaces). <strong>This is the only moment in the workflow when all tags are appearing as a single string.</strong></p><p>The controller then splits those tags and trims them. At this stage, those tags become a <code>Collection&lt;string&gt;</code> (or <code>Collection&lt;Tag&gt;</code> if there is specific data or business logic associated with a tag.) Depending on your specific needs, you may need to use other generic collection classes, such as a <code>HashSet&lt;T&gt;</code> if you need to quickly search through the sequence of tags.</p><p>The controller may then persist those tags together with the article, the title, the author info, etc. Depending on the persistence layer (i.e. the type of the database) you use, the tags may take different forms, but usually they will still be considered as some sort of array and stored one by one, not as a single value.</p><p>Finally, when it comes to displaying the tags, the controller loads them from the persistence layer (the tags are then appearing in a form of a <code>Collection&lt;string&gt;</code>/<code>Collection&lt;Tag&gt;</code>), and stores the collection (eventually as <code>IEnumerable&lt;string&gt;</code>) in the model, passing the model down to the view.</p><p>The view enumerates those tags and displays the corresponding HTML.</p><hr/><p>Looking at your code, I&#39;m not sure what are you trying to do. I guess that <code>Tags</code> is a sequence in your model, but you&#39;re displaying only the first element in your view (line 54 and 55). Why?</p><p>This is also why I asked in my comments how are tags displayed in the form. <a href="https://stackoverflow.com/q/7631212/240613">Here&#39;s one way</a> to bind an array to a sequence of check boxes; I&#39;m not sure this is what you want or need. Probably what you actually need is something similar to Stack Exchange tagging: a single text field where a user can enter one or more words (or comma-separated values in your case). For instance:</p><blockquote><p>data-center, rack, power-management, wiring</p></blockquote><p>will be entered in a single text box and result in four tags: <a href="https://free-tor-game.com/questions/tagged/data-center" class="post-tag" title="show questions tagged &#39;data-center&#39;" rel="tag">data-center</a>, <a href="https://free-tor-game.com/questions/tagged/rack" class="post-tag" title="show questions tagged &#39;rack&#39;" rel="tag">rack</a>, <a href="https://free-tor-game.com/questions/tagged/power-management" class="post-tag" title="show questions tagged &#39;power-management&#39;" rel="tag">power-management</a> and <a href="https://free-tor-game.com/questions/tagged/wiring" class="post-tag" title="show questions tagged &#39;wiring&#39;" rel="tag">wiring</a>.</p><p>This leads to the difference between:</p><ul><li><p>The view which shows a form to an author, letting him modifying the article and its tags, and:</p></li><li><p>The view which shows the article to the end users.</p></li></ul><p>The first view can deal with all tags represented as a simple string. It already does when it comes to submitting a form: the value of a text box—a simple text, is translated to a string which can then be parsed like you did in your code on line 79 with a <code>Split()</code>. Although disturbing,¹ you can also use a string to populate the form when the author wants to modify an article (this makes it possible to use the same model in both cases.) While the model will contain a string containing comma-separated tags, try to use <code>Collection&lt;Tag&gt;</code> as much as possible within the controller itself. The only locations where you should see a string are the boundaries: when the controller receives the input and when it creates a model.</p><p>On the other hand, the view which shows the article—and the tags—to the end user should rely completely on <code>IEnumerable&lt;Tag&gt;</code> representation which should be pushed by the controller through the model down to the view. It&#39;s the view which will use the sequence to enumerate through the values with a <code>foreach</code>, generating the corresponding HTML.</p><p>A final note: when you&#39;ll get your code finished, compiling and working, make sure you post a few parts to <a href="https://codereview.stackexchange.com/">CodeReview</a>. There are a lot of things to tell about the code in its current state.</p><hr/><p><sup>¹ The approach is disturbing because a concatenated string is a <em>wrong</em> data structure for tags. The right one remains a sequence (such as <code>Collection&lt;T&gt;</code>). The problem, in your case, is that you&#39;re relying on the same model both for generating the form and getting the submitted values. Since you&#39;re <em>forced</em> to use a string in the second case, using a sequence in the first one will require to have two different models, which will make your code more complex than it should be.</sup></p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/c-di-ioc-abstract-factory-galore/'>C# &#8211; DI / IoC Abstract Factory Galore</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-implementing-a-generic-dynamic-custom-property-system-in-c/'>C# &#8211; Implementing a generic/dynamic custom property system in C#</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-how-to-add-properties-to-subclasses-and-access-them-without-casting-from-a-superclass/'>C# &#8211; How to add properties to subclasses and access them without casting from a superclass</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-how-to-avoid-double-data-validation-in-an-application-with-web-interface/'>C# &#8211; How to avoid double data validation in an application with web interface</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-how-to-apply-the-mvc-pattern-to-a-c-winforms-application/'>C# &#8211; How to apply the MVC pattern to a C# WinForms application</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-is-cqrs-mediatr-worth-it-when-developing-an-asp-net-application/'>C# &#8211; Is CQRS/MediatR worth it when developing an ASP.NET application</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-managing-and-organizing-the-massively-increased-number-of-classes-after-switching-to-solid/'>C# &#8211; Managing and organizing the massively increased number of classes after switching to SOLID</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>