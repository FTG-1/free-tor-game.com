<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# .Net Core API design &#8211; interfaces vs DTOs &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076862 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076862" class="post-1076862 software type-software status-publish hentry category-software tag-api-design tag-asp-net-core tag-design-patterns tag-onion-architecture tag-web-api"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# .Net Core API design &#8211; interfaces vs DTOs</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api-design</span><span class="mr-2 badge badge-info">asp.net-core</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">onion-architecture</span><span class="mr-2 badge badge-danger">web-api</span></p><div class="entry-content"><p>I&#39;m designing a relatively simple web application using .net core.  I&#39;ve mostly done desktop development in my career so far, so I&#39;m a bit new to the nuances between desktop and web development.</p><p>In this application there is a business logic layer and a presentation logic layer which takes the business logic and transforms the properties into marked up output server-side and then returns the data to the client through a web API.</p><p>Due to the controls I&#39;m using and the structure of the application, it makes sense to have this &#34;presentation logic&#34; layer on the server side, since some aspects of the presentation are actual business logic requirements (most of the presentation is handled in views, partial views and view components).</p><p>Currently the way that I am handling this is by injecting the business logic classes into presentation logic classes, then having the api controller return an interface to the presentation logic class.</p><p>A simplified example of the approach:</p><pre><code>public class BusinessLogic
{
  public string PropertyA { get; set; }

  public string PropertyB { get; set; }

  public void DoSomeLogic() { // some code here }
}

public class PresentationLogic : IPresented
{
  private BusinessLogic businessLogic;

  public PresentationLogic(BusinessLogic businessLogic)
  {
    this.businessLogic = businessLogic;
  }

  public string PresentationPropertyA
  {
    get
    {
      return &#34;&lt;span class=&#39;businesslogicspecificclass&#39;&gt;&#34; + this.businessLogic.PropertyA + &#34;&lt;/span&gt;&#34;;
    }
  }
}

public interface IPresented
{
  string PresentationPropertyA { get; }
}

[Route(&#34;api/[controller]&#34;)]
public class MyController
{
  [HttpGet]
  public IPresented Get()
  {
    var businessLogic = new BusinessLogic();
    // manipulate businessLogic
    return new PresentationLogic(businessLogic);
  }
}
</code></pre><p>The API exposes interfaces which are implemented by the PresentationLogic classes.  As I understand it, these interfaces are then serialised into JSON and returned to the page to use within its controls.</p><p>A different approach to solving the same problem would be to create a DTO, and have the PresentationLogic class take the business logic and spit out the DTO, adding the extra markup to the properties during the creation of the DTO.  For example:</p><pre><code>public class PresentationLogic
{
  public Dto GetDtoFromBusinessLogic(BusinessLogic businessLogic)
  {
    return new Dto { PresentationPropertyA = &#34;&lt;span class=&#39;businesslogicspecificclass&#39;&gt;&#34; + this.businessLogic.PropertyA + &#34;&lt;/span&gt;&#34; };
  }
}

public class Dto
{
  public PresentationPropertyA { get; set; }
}

[Route(&#34;api/[controller]&#34;)]
public class MyController
{
  [HttpGet]
  public Dto Get()
  {
    var businessLogic = new BusinessLogic();
    // manipulate businessLogic
    var presentationLogic = new PresentationLogic();
    return presentationLogic.GetDtoFromBusinessLogic(businessLogic);
  }
}
</code></pre><p>What I want to know is what the advantages or disadvantages to each approach is.</p><p>As I understand it, both controller methods will return effectively the same JSON to the calling page.</p><p>The first approach feels more natural to me for the following reasons:</p><ul><li>I do not like DTOs unless they&#39;re absolutely necessary since I believe that they tend to encourage anaemic domain models</li><li>The presentation logic class becomes an adapter class that sits between the business logic and the view.  It has a clearly defined responsibility.</li><li>I have not created any classes purely for the purpose of acting as a return type &#8211; it feels like less wasted code.</li><li>I could potentially add new properties to the PresentationLogic class and implement a new interface if version 2 called for changes.</li><li>Interfaces feel like the natural tool for abstraction for C# code.</li></ul><p>I was discussing this with other developers and they were suggesting that returning a DTO was the more standard way of approaching this problem.  I have come up with a couple of reasons why this might be a better approach:</p><ul><li>DTOs are clearly marked as such and nobody is tempted to add breaking logic to them.</li><li>If it&#39;s the standard way then it will help new developers to get up to speed.</li><li>Adding a new version forces the use of a new DTO class, which means that there&#39;s less potential to introduce breaking changes (though this could also be done with the other approach if needed)</li></ul><p>Note that this question is generally about layered web architecture than specifically about my needs on this project.  If no presentation logic needed to be added server-side, this question could easily be about business logic and persistence logic classes.</p><p>So which is better &#8211; using DTOs in a web API or using interfaces on complex objects in a web API?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Here ADM is the right approach.</p><ol><li><p>There is no point returning an object with methods from a controller method. The object is immediately serialised and sent over the wire. Nothing recieves the method.</p></li><li><p>The contoller actions will have shared dependencies on various services which you will want to reuse for each request. Inject these into the contoller so you dont have to recreate them each request.</p></li><li><p>The incoming parameter to the controller action is a pure data object which you deserialise. If you attach methods to it, its for semantic reasons only.</p></li></ol><p>So essentially you have a stream of data objects coming in, a persistent service which acts on each, and returns another data object in response.</p><p>In this case your domain object, containing you business rules is the service, not the data.</p><p>Now, on your client side, you might well have (jeeze its hard when people dont use real examples) <code>Object.BusinessLogic()</code> with the client for your api injected into it and used to implement the method.</p><p>It makes sense to use classic OOP here because the Object object is persisted and passed around.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-use-composition-and-inheritance-for-dtos/'>Rest &#8211; Use composition and inheritance for DTOs</a></li><li class="list-group-item"><a href='../c-mapping-api-modelsdtos-to-rich-domain-models/'>C# &#8211; Mapping API models(DTOs) to rich domain models</a></li><li class="list-group-item"><a href='../c-interfaces-vs-concrete-types-in-dtos-and-response-classes/'>C# &#8211; Interfaces vs concrete types in DTOs and response classes</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>