<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Git &#8211; package and version strategies in a multi repository environment &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073027 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073027" class="post-1073027 software type-software status-publish hentry category-software tag-continuous-integration tag-git tag-packages tag-release-management tag-versioning"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Git &#8211; package and version strategies in a multi repository environment</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">continuous integration</span><span class="mr-2 badge badge-info">git</span><span class="mr-2 badge badge-warning">packages</span><span class="mr-2 badge badge-primary">release-management</span><span class="mr-2 badge badge-danger">versioning</span></p><div class="entry-content"><p>We are a small-ish firm with multiple teams who manage their own git repositories. This is a web platform and each team&#39;s artifacts are deployed at the end of the day for nightly tests. We are trying to formalise the process around versioning and packaging.</p><p>Every team has a master branch where they do day-to-day development. Quality assurance members of each team want the artifacts from their team&#39;s changes deployed into a test bed where all the components are combined by chef. Artifacts are tarballs but I would like to convert them into RPMs so we can think and reason about versions correctly.</p><p>The release process involves cutting off a release branch from the development branch (master in most cases) of each the git repositories. This is then given to quality assurance who run tests and sign-off on a set of artifacts.</p><p>For eg this is a typical git repository with its associated release branches:</p><pre><code> 0-0-0-0-0-0-0-0-0-0 (master)
   |           |
   0           0
 (rel-1)       |
               0
            (rel-2)
</code></pre><p>I am stuck trying to figure out a scheme to perform versioning of packages coming from development branches. We don&#39;t want to excessively tag the master branch of each repo and restrict tags to release branches only. But we should be able to query the deployed packages in the test machines using standard yum/rpm semantics. What would development versions look like when the master branch has no tags? I understand that <code>git describe</code> can provide me a useful representation of a build version but that works well when various release points on the branch are tagged.</p><p>EDIT1: In response to @Urban48&#39;s answer</p><p>I figured I should explain our release process a little more. For purposes of this discussion let&#39;s assume we have branch <code>master</code> in all repositories. The <code>master</code> branch is considered the development branch and is deployed to an automated CI-CD enabled QA environment. This is where a subset of nightly tests run to ensure the stability of master. We look at this pipeline of jobs before cutting a release branch.  Our release branches are short lived. Say, after cutting a release branch (from a stable master), a full regression is run, fixes are made and deployed to production. This takes about a week to do. We release almost every two weeks to production.</p><p>Our feature branches are <em>always</em> cut from master and undergo some amount of developer testing before merging with master upon which they undergo the CI-CD stability checks.</p><p>Hotfixes are made on hotfix branches (cut from release branches) and deployed with minimal impact testing into production.</p><p>Our versioning strategy for release and hotfix branches follows semver. Release branches during the QA cycle go through versions like <code>v2.0.0-rc1</code>, <code>v2.0.0-rc2</code> and finally after QA sign-off become <code>v2.0.0</code>.</p><p>We sometimes do dotted releases for small features which are merged to release branches (and then to master) where the versions become <code>v2.1.0</code>. And hotfixes assume the <code>v2.1.1</code> pattern.</p><p>The question however, is not about versioning these branches. I would prefer not to change this versioning scheme altogether. The only change comes about for development branch ie. master. How can I indicate reliably in the CI-CD environment which version exists wrt the previous release into production. This would ideally be done through smart git tagging but something that does not excessively tag the master branch is preferred.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Hmm, well I have a .net example which might be technology agnostic.</p><p>I&#39;ll just do a quick summary.</p><ul><li><p>git repo per component with gitflow branching strategy</p></li><li><p>all commits to develop trigger a team city build</p></li><li><p>teamcity build amends the version with manual major minor + the build number in AssemblyInfo.cs ie 1.1.hotfix.build</p></li><li><p>teamcity triggers nuget packaging using the same version number for nuget published libraries</p></li><li><p>octopus deploys finished build to qa for manual testing (assuming all tests pass)</p></li><li><p>if everything is good, manually deploy version to production via octopus.</p></li></ul><p>Now this does mean you get A LOT of versioned packages floating about. We did experiment with use of the -prerelease flag but this required a further manual move package from prelease to &#39;normal&#39; step and a requirement to rebuild components which depended on them.</p><p><strong>The key thing is to version every build uniquely via some central process.</strong></p><p>Then you are in the situation of &#39;hmm what versions do i want&#39; rather than &#39;omg, what version have i got??&#39;</p><p>Edit: re comments.</p><p>Just to underline that key thing really. Decide what branch constitutes completed software and version <strong>ALL</strong> commits to it. only deploy versioned software from this branch.</p><p>My view though is that you need to address your branching strategy.</p><ul><li>don&#39;t version feature (or any dev) branches.</li><li>do version master</li><li>only use packages from master</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../git-good-practice-to-separate-git-repo-from-published-repo/'>Git &#8211; Good practice to separate Git Repo from published Repo</a></li><li class="list-group-item"><a href='../git-appropriate-git-workflow-for-multiple-active-releases-while-handling-hotfixes/'>Git &#8211; Appropriate Git workflow for multiple active releases while handling hotfixes</a></li><li class="list-group-item"><a href='../git-branching-strategy-for-long-running-unreleased-code/'>Git branching strategy for long-running unreleased code</a></li><li class="list-group-item"><a href='../git-using-gitflow-and-semantic-versioning-how-to-avoid-version-number-conflicts-when-merging/'>Git &#8211; Using Gitflow and Semantic Versioning: How to avoid version number conflicts when merging</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>