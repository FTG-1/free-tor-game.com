<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Do .NET 4.0 Code Contracts have a role to play in solo-programmer projects &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080209 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080209" class="post-1080209 software type-software status-publish hentry category-software tag-c tag-code-contracts tag-net"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Do .NET 4.0 Code Contracts have a role to play in solo-programmer projects</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">code-contracts</span><span class="mr-2 badge badge-warning">net</span></p><div class="entry-content"><p>I often find myself wondering what programming best practices apply to solo programming, since most of the time, I&#39;m the only programmer on a project. I just started experimenting with C# 4.0 Code Contracts, and I thought I&#39;d ask the community what utility they may have for a solo programmer.</p><p>Here&#39;s where I&#39;m coming from with this. Most of the time, when I encounter an exception, it means there&#39;s a bug in my code. There are definite exceptions (no pun intended) to this, such as when I&#39;m dealing with something external, such as a text file, database, or service, but for the most part, exceptions mean <em>I</em> did something wrong.</p><p>Take this simple method:</p><pre><code>public void MapEntity(PersonModel model, PersonEntity entity)
{
    entity.Name = model.Name;
    entity.Age = model.Age;
    entity.Updated = DateTime.Now;
}
</code></pre><p>If either <code>model</code> or <code>entity</code> are null, this method will throw a <code>NullReferenceException</code>.</p><p>As the only consumer of my code, I know that I shouldn&#39;t pass in a null reference, but if I somehow do, I <em>want</em> an exception to be thrown, and I <em>want</em> the debugger to jump right to the source of the error so I can see what happened.</p><p>That said, I could write:</p><pre><code>public void MapEntity(PersonModel model, PersonEntity entity)
{
    Contract.Requires(model != null);
    Contract.Requires(entity != null);
    entity.Name = model.Name;
    entity.Age = model.Age;
    entity.Updated = DateTime.Now;
}
</code></pre><p>This has the advantage of explicitly indicating (to myself) that the two arguments are not allowed to be null. However, it&#39;s very unlikely I would make this mistake (because I know what the method does). Further, if I understand properly what <code>Requires()</code> does, the behavior at runtime if a null argument is encountered would be pretty much the same. So, I can&#39;t help but wonder, what have I gained besides two lines of code?</p><p>As a counterpoint, here&#39;s a case where I see definite value in being explicit:</p><pre><code>public User FindUser(string emailAddress)
{
    if (string.IsNullOrWhiteSpace(emailAddress)) return null;
    var users = DbContext.Users.Where(u =&gt; u.EmailAddress == emailAddress);
    Contract.Assert(users.Count() &lt;= 1,
                    &#34;The database appears to be corrupted:
                    More than one user was found for the provided email address.
                    Email addresses are supposed to be unique.&#34;);
    return users.SingleOrDefault();
}
</code></pre><p>But in this case, the reason I see value in using a coding contract is to indicate that something that has gone wrong that is not a bug per se (though it could have resulted from a bug elsewhere in the system).</p><p>I&#39;d like to know if I&#39;m on the right track with my thinking, or if there is more value in code contracts than I realize. Does it pay to use contracts when you can examine and debug the code yourself or only when the code is going to be used by a third party?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The advantage of assertions (or contracts, which are basically a different take on assertions) comes when your codebase grows large enough that you can no longer hold the entire thing in your short-term memory.  Especially when you&#39;re still developing it and changing things every day.</p><p>When you first wrote <code>MapEntity</code>, you most likely wrote it because some other routine somewhere required its functionality.  You were working on the other routine at the time, and you know it&#39;s not going to pass any nulls.  But a few months from now, you might be writing something else that needs the same functionality, so you have it call <code>MapEntity</code> too.  But maybe this code can have a null somehow and you didn&#39;t think to check for that.</p><p>With no assertions, you get a null reference exception at this point.  With assertions in place, you get an assertion failure (or whatever violated contracts throw, in this case.) Either way, you have an error here and you have to dig into the code to figure out what&#39;s going on.  You look at the code, and you see that the problem is in <code>MapEntity</code> because it&#39;s choking on one of the parameters.  So is there a bug in <code>MapEntity</code>, or is routine that called it feeding it an invalid parameter?</p><p>One of the advantages of an assertion/contract is that it clearly documents the fact that you anticipated this problem and explicitly <em>did not want it to happen.</em> This makes figuring out how to fix it that much easier because it makes it easier to determine the source of the problem.  In this case, it shows clearly that the problem is in the caller, and not in <code>MapEntity</code>.</p><p>On the other hand, sometimes I&#39;ll get an assertion failure in code that&#39;s receiving perfectly cromulent parameters, because the requirements have changed.  This helps me see what has to be changed, and sometimes it&#39;s not as simple as &#34;argument must not be null&#34;.  Sometimes the argument has to have certain properties set certain ways or data would have been silently corrupted.  Having an assertion in place makes it easier to remember what I was thinking when I wrote it, so I can fix the code more easily.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-enforcement-of-returning-non-null/'>C# &#8211; Enforcement of returning non-null</a></li><li class="list-group-item"><a href='../c-the-reason-behind-methods-with-return-values-and-methods-with-void/'>C# &#8211;  the reason behind methods with return values and methods with void</a></li><li class="list-group-item"><a href='../why-would-i-use-code-contracts/'>Why would I use code contracts</a></li><li class="list-group-item"><a href='../c-when-to-use-pure-on-a-constructor/'>C# &#8211; When to use [Pure] on a constructor</a></li><li class="list-group-item"><a href='../c-should-the-method-return-void-or-a-bool-to-indicate-it-was-successful/'>C# &#8211; Should the method return void or a bool to indicate it was successful</a></li><li class="list-group-item"><a href='../c-is-modifying-an-object-passed-by-reference-a-bad-practice/'>C# &#8211; Is modifying an object passed by reference a bad practice</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>