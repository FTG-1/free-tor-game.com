<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How is transactionality implemented in DDD applications &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1071065 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1071065" class="post-1071065 software type-software status-publish hentry category-software tag-domain-driven-design tag-layers tag-transaction"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How is transactionality implemented in DDD applications</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">domain-driven-design</span><span class="mr-2 badge badge-info">layers</span><span class="mr-2 badge badge-warning">transaction</span></p><div class="entry-content"><p>I have been searching and reading recently about DDD and, so far, I think I understood its fundations.</p><p>If I understood well, the architecture is similar to this:</p><pre><code>Database &lt;--SQL--&gt; DAO/ORM &lt;--CRUD--&gt; Repository/Aggreagtes &lt;--Business--&gt; **¿?** &lt;-- Controller --&gt; Internet/Client/UI
</code></pre><p>My doubt turns around the <strong>¿?</strong> gap. I usually fill it with services.</p><p>My services often are the first evidence of an <em>Anemic Domain Model</em>, because all the business logic is placed there. In consequence, my domain model is a mere set of POJOs.</p><p>My intention is to move gradually my current project to a richer domain model and a thinner service layer. However, I&#39;m concerned about the transactionality and the layer it belongs to.</p><p>Searching about how to fill up the above <em>gap</em>, I have found this <a href="https://softwareengineering.stackexchange.com/q/302187/222996">question</a></p><p>Following the link and the checked answer, I assume that:</p><ul><li><p>There&#39;re still services in DDD. These services perform business operations via repositories (and aggregate roots).</p></li><li><p>Services are meant to cover the business needs that can not be covered by aggregate roots and/or repositories.</p></li><li><p>Services execute business transactions through <strong>UnitOfWork (UoW)</strong> components. A UoW might involve one or more aggregated roots and repositories.</p></li></ul><p>Question:<br /> <strong>Is this the way to implement the business layer and the transactionality in DDD?</strong> <em>(App Service -&gt; UoW -&gt; Repository)</em></p><p>If yes</p><p><strong>How application events and handlers fit in such architecture? Are the services translated into handlers?</strong> (Handler -&gt; UoW -&gt; Repository)?</p><p>I am grateful for any kind of input. I feel kinda confused with how DDD layers are tied or how to tie them with the less coupling possible.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>A UoW might involve one ore more aggregated roots and repositories.</p></blockquote><p>No, absolutely not.  That misses the entire point.  We always change one aggregate at a time (one per transaction).</p><p>Transactions are typically coordination between the application component and the persistence component.  The application starts a transaction (UoW, if you like), reads the target aggregate, modifies the aggregate, saves it, and commits.</p><p>If that commit succeeds, there have been no conflicting writes to that aggregate, and the command itself has succeeded.  If there are conflicting writes, the commit fails, and the application component gets to figure out the recovery strategy (merge, rerun the command from a new starting point, report failure to the caller, etc).</p><blockquote><p>If I need to modify 2 aggregates in one transaction is probably caused by a bad design of aggregate roots.</p></blockquote><p>That, or a failure to understand the real requirements of the business.  It&#39;s a relatively common pattern to assume two changes need to be tightly coupled when the real business case has a lot more flexibility.  Classic example: assuming an account balance must never fall below zero, when in fact the business is happy to accrue overdraft penalties.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-ddd-bounded-contexts-domains/'>Architecture &#8211; DDD Bounded Contexts &#038; Domains</a></li><li class="list-group-item"><a href='../ddd-architecture-in-a-mvc-web-application/'>DDD Architecture in a MVC web application</a></li><li class="list-group-item"><a href='../design-ddd-repositories-in-application-or-domain-service/'>Design &#8211; DDD repositories in application or domain service</a></li><li class="list-group-item"><a href='../which-layer-do-ddd-repositories-belong-to/'>Which layer do DDD Repositories belong to</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>