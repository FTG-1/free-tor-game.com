<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to load test Publisher/Subscribing queue &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082927 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082927" class="post-1082927 software type-software status-publish hentry category-software tag-load-testing tag-message-queue tag-performance tag-pubsub tag-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to load test Publisher/Subscribing queue</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">load-testing</span><span class="mr-2 badge badge-info">message-queue</span><span class="mr-2 badge badge-warning">performance</span><span class="mr-2 badge badge-primary">pubsub</span><span class="mr-2 badge badge-danger">testing</span></p><div class="entry-content"><p>I am trying to load test a queue that works on a pub sub pattern and can&#39;t figure out how response time is to be calculate and the TPS(transactions per second).</p><p><strong>Problem statement :</strong></p><p>The pub sub pattern requires us to develop different script for the publishing user and the subscribing user.</p><p>Every message that is sent to the queue by the publisher will be intercepted by each subscriber to that queue.</p><p>The user who publishes and the other user who consumes the response might/might not be different.</p><p>How should the latency be calculated now?</p><p>Case-1 Calculate only the time for publishing the messages to the queue.</p><p>Case-2 Calculate the time for publishing the message + time taken by subscriber to retrieve it.</p><p>Case-3 Calculate only the time for subscriber to extract the messages from the queue.</p><p>The subscriber is working on a polling mechanism, i.e, it checks the queue for any messages after every interval. The time taken to receive the message by a subscriber from a publisher depends on the following factors &#8211;</p><p>When the last polling took place?</p><p>Load on the queue because of the publisher.</p><p>This gives a hint that there might be a correlation between publisher and subscriber users due to dependence of load on queue due to both publisher and subscriber.</p><p>There also a chance of difference in the rate of speed of publishing and subscribing of the users. For example &#8211; If in a queue, 20 messages are queues per second but a subscriber can only extract 10 messages per second. We have to factor in the time due to extra messages queued in before a particular message is a read from the queue.â€¨</p><p><strong>Solution till now</strong></p><p>While preparing the script for publisher and subscriber, keep the rate of pushing and extracting messages, similar/with least possible induced difference by keeping polling and publishing interval same. Though still the difference in the number of publishers/subscribers can load the queue and difference will still be induced.</p><p>What is still not clear is that for what factor the load testing is to be done &#8211;</p><p>How many transactions a publisher can do in a sec (TPS)? How many transactions a subscriber can do in a sec (TPS)? How much load can the queue can handle by making transactions? The TPS of queue depends on both publisher and subscriber making transactions in it.</p><p>To study the Publisher | Subscriber | Queue Load separately (keeping the polling rate and publishing rate same in the script) should I &#8211; Calculate response time to publish a message separately. ( To test the publishing rate) Calculate subscriber&#39;s extraction time separately. ( To test the subscribing rate) Calculate time to reach from publisher to subscriber separately. (To check the load on queue separately)</p><p>Is there something I am doing wrong, how can I test it for multiple users?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The whole integrated system acts with the speed of its slowest member. So when you conduct the load you will see that certain component works slower than others hence the messages targeting this component will be queuing up.</p><p>Standard metrics like response time, latency and transactions per second are not very applicable for queues so you need to look for a queue monitoring solution which might be different depending on your MQ solution vendor:</p><ul><li><a href="https://www.manageengine.com/products/applications_manager/msmq-monitoring.html" rel="nofollow noreferrer">Microsoft Message Queue (MSMQ) Monitoring</a></li><li><a href="https://www.ibm.com/developerworks/websphere/library/techarticles/1311_jin/1311_jin.html" rel="nofollow noreferrer">A web-based monitoring tool for IBM WebSphere MQ</a></li><li><a href="http://activemq.apache.org/how-can-i-monitor-activemq.html" rel="nofollow noreferrer">How can I monitor ActiveMQ</a></li><li>etc.</li></ul><p>You can also consider using <a href="http://www.generictestdomain.net/post/monitoring-queue/" rel="nofollow noreferrer">Prometheus or Grafana</a> which will report messages processing rate and queue sizes.</p><p>With regards to generating the load itself, if you don&#39;t have anything better in mind you can try out <a href="http://jmeter.apache.org/" rel="nofollow noreferrer">Apache JMeter</a> which supports simulating <a href="https://www.blazemeter.com/blog/building-jms-testing-plan-apache-jmeter" rel="nofollow noreferrer">publishers, subscribers and point-to-point scenarios</a>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/java-implementation-of-communication-between-packages-java/'>Java &#8211; Implementation of communication between packages (Java)</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-push-based-events-in-a-services-oriented-architecture/'>Java &#8211; Push-Based Events in a Services Oriented Architecture</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/best-way-to-notify-the-client-in-real-time-that-their-queue-e-g-sqs-job-has-finished/'>Best way to notify the client in real time that their queue (e.g. SQS) job has finished</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/aws-sqs-fifo-limit-workaround/'>AWS SQS FIFO Limit Workaround</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/do-i-actually-need-a-message-broker-or-are-websockets-enough/'>Do I actually need a message broker or are websockets enough</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>