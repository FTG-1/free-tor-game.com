<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture &#8211; How should the service layer be done &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1077891 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1077891" class="post-1077891 software type-software status-publish hentry category-software tag-architecture tag-dao tag-design-patterns tag-services"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture &#8211; How should the service layer be done</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">dao</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">services</span></p><div class="entry-content"><p>so I have this android app at work, if I understand it right the DAO/services/UI layers is to &#34;decouple&#34; the UI from the database.<br /> I have 2 problems with that :</p><p><strong>1/ Decoupling</strong></p><p>Like this if things changes in the DAO layer/database schema I just have to touch the service layer and the UI stays untouched.</p><p>Allright, why? I still have to change stuff in 1 layer to adapt to the DAO layer change, why does it matter that I don&#39;t have to change the UI layer? in the end I still have to rewrite the services layer.</p><p><strong>2/we are making one service per DAO</strong></p><p>Client Info Screen : display info about the client</p><p>So I&#39;m in a screen, the only information I currently have is the &#34;current intervention ID&#34;</p><p>to get the client address I need to get the InterventionEntity in order to know the client, then I need the ClientDao in order to retrieve the ClientEntity with it&#39;s address.</p><p>so I need access to 2 DAO, but I will call 1 service. choosing in which service to implement that is confusing.</p><p>Wouldn&#39;t it be better to have 1 service per screen?</p><p>I would have a ClientInfosScreenService that would have &#34;getClientAdress&#34; using both the InterventionDAO and ClientDAO.</p><p>Thanks.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p><strong>1/ Decoupling</strong></p><p>Like this if things changes in the DAO layer/database schema I just have to touch the service layer and the UI stays untouched.</p><p>Allright, why? I still have to change stuff in 1 layer to adapt to the DAO layer change, why does it matter that I don&#39;t have to change the UI layer?</p></blockquote><p>Consider that each layer <strong>abstracts</strong> the next layer, and therefore often <strong>centralizes usage</strong>.</p><p>Consider an example of where you have 4 views which can all update the person&#39;s email address (person@example.com). All four of them contain logic to update the person&#39;s email address.</p><p>Suppose you want to introduce a change, where you now save an email as two separate fields: <code>EmailIdentity</code> (person) and <code>EmailDomain</code> (example.com). You have to change the update logic of the person&#39;s email address. There are 4 views, which means you have to <strong>change four things</strong>.</p><p>If you had had a DAO layer, there would&#39;ve been <em>one</em> <code>UpdateEmailAddress(int personId, string emailAddress)</code> method. Therefore, if you wanted to implement the same change, you would only have to <strong>change one thing</strong>.</p><p>In the example I used, when you only do 3 changes and you didn&#39;t know the 4th location existed, you would run into compiler issues, so you&#39;d quickly see that you forgot something. However, if the applied change is <em>not breaking</em>, it will lead to a successful compilation and you will not be reminded that you forget any other updates.</p><p><em>Tangentially, while different layers are often represented as different projects, that is not inherently required. If your UI project already has a separate <code>PersonUpdateHelper</code> class, you could arguably call that the DAO layer. A class can be a layer too, as long as it is inbetween the database and the UI (so those two never interact directly).</em><br/> <em>I would suggest using projects as your layers for other reasons (library dependencies, the ability to meaningfully use access modifiers to prevent circumventing the layer, ...) but it is not technically a requirement for it to be considered a layer.</em></p><hr/><blockquote><p><strong>2/we are making one service per DAO</strong></p><p>Wouldn&#39;t it be better to have 1 service per screen?</p></blockquote><p>No. As per the previous example, the updating of a person&#39;s email address occurs on 4 separate views, and therefore you&#39;d be forced to create the same logic in 4 services (one per view).</p><p>However, there is some merit to the underlying foundation of your issue:</p><blockquote><p>so I need access to 2 DAO, but I will call 1 service. choosing in which service to implement that is confusing.</p></blockquote><p>I completely agree with this. But I do want to point out here that <strong>there is no requirement for the dao and service to work on the same scope</strong>.</p><p>When your service only depends on one DAO (<code>FooDao</code>), then it usually makes sense for the service to take the same name (<code>FooService</code>). But when the service relies on <strong>more than one</strong> DAO (<code>FooDao</code>, <code>BarDao</code>), then the service should be named based on the purpose it serves.</p><p>I&#39;ll give you a real world example. I work on an application used for delivery truck drivers, to track which parcels they have delivered.</p><p>Delivery drivers have three distinct jobs. These jobs are what I mean when I say &#34;the purpose a service serves&#34;.</p><ul><li>Loading the parcels into their truck.</li><li>Delivering the parcels at the recipient.</li><li>Retrieving parcels from a sender (to later be delivered).</li></ul><p>For either loading or delivery, we need to update two entities: <code>Parcel</code> (to change its status) and <code>Signature</code> (to add the recipient&#39;s signature). When retrieving, we only need to update <code>Parcel</code> entities (no signature required).</p><p>So this is our setup:</p><p><strong>DAO</strong></p><ul><li>The <code>ParcelDao</code> handles updates to the [Parcels] table.</li><li>The <code>SignatureDao</code> handles updates to the [Signatures] table.</li></ul><p><strong>Services</strong></p><ul><li>The <code>LoadingService</code> depends on both the <code>ParcelDao</code> and <code>SignatureDao</code>.</li><li>The <code>DeliveryService</code> depends on both the <code>ParcelDao</code> and <code>SignatureDao</code>.</li><li>The <code>RetrievalService</code> depends on the <code>ParcelDao</code>.</li></ul><p><strong>The driver doesn&#39;t care about which entities are affected</strong>. The driver (and his mobile application) simply calls <code>FinishLoading()</code> and doesn&#39;t care if this updates one or more entities.</p><p>This is why layer separation is so useful. To an external caller, it looks like the application has functional features (load/deliver/retrieve). But internal to the application, there is a more complicated data logic at play, <strong>which the external caller doesn&#39;t need to know about</strong>.</p><p>As a second example, restaurants similarly separate their cooks (DAO), their waiters (services) and their UI (customers).</p><p>The room where customers eat is quiet and calm, even if the kitchen is hectic and busy. If the cooks and the customers sat in the same room, they would get in each other&#39;s way. But by separating them into their own separate rooms, each can have what they need (peace and quiet for the customers, the ability to work fast for the cooks), and neither the cooks nor the customers need to worry about what happens in the <em>other</em> room.</p><p><strong>DAO</strong></p><p>Separating the kitchens means that every kitchen can be tailored to a specific cuisine.</p><ul><li>The sushi chef has his own kitchen.</li><li>The grill chef has his own kitchen.</li><li>The salads are made in a separate kitchen.</li><li>The wine is stored in the wine cellar.</li></ul><p><em>I&#39;m aware that real life restaurants often only have one kitchen. But if you look at large-scale kitchens, like the ones you find on a massive cruise ship, you&#39;ll see that there are several kitchens each with their own cuisine and staff.</em></p><p><strong>Services</strong></p><p>The waiters serve as the layer between the cooks and the customers. Because the waiters are there, the cooks and the customers never interact with each other.
The waiters know what the customers have ordered. The waiters will figure out where they need to get the meals from.</p><ul><li>The waiters will fetch the meals from the appropriate kitchens. They do not fetch wine.</li><li>The sommelier (wine advisor) will fetch the wine from the wine cellar. They do not fetch meals.</li></ul><p><strong>UI</strong></p><p>The customer doesn&#39;t care who makes the food or where they make it. They just want to eat what they have ordered.</p><ul><li>The customers expect their waiter to bring the food to their table.</li><li>The customers expect the sommelier to bring the wine they asked for.</li><li>The customers don&#39;t care where the waiter got the food from. Whether they picked it up in one location, or picked it up from multiple locations, it really doesn&#39;t matter to the customer.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-are-there-any-real-benefits-to-a-dao-layer/'>Database &#8211; Are there any real benefits to a DAO layer</a></li><li class="list-group-item"><a href='../architecture-how-essential-is-it-to-make-a-service-layer/'>Architecture &#8211; How essential is it to make a service layer</a></li><li class="list-group-item"><a href='../architecture-motivation-for-a-service-layer-instead-of-just-copying-dlls/'>Architecture &#8211; Motivation for a service layer (instead of just copying dlls)</a></li><li class="list-group-item"><a href='../java-in-mvc-dao-should-be-called-from-controller-or-model/'>Java &#8211; In MVC , DAO should be called from Controller or Model</a></li><li class="list-group-item"><a href='../php-service-layer-design/'>Php &#8211; Service layer design</a></li><li class="list-group-item"><a href='../mvc-application-service-layer-calling-database-functions-bad-architecture/'>Mvc &#8211; Application service layer calling database functions. Bad architecture</a></li><li class="list-group-item"><a href='../java-transaction-handling-in-dao-or-service-layer-in-pure-jdbc-without-frameworks/'>Java &#8211; Transaction handling in DAO or Service layer in pure JDBC without frameworks</a></li><li class="list-group-item"><a href='../architecture-should-i-use-a-layer-between-service-and-repository-for-a-clean-architecture-spring/'>Architecture &#8211; Should I use a layer between service and repository for a clean architecture &#8211; Spring</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>