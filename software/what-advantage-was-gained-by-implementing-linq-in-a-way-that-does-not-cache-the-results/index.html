<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>What advantage was gained by implementing LINQ in a way that does not cache the results &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073954 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073954" class="post-1073954 software type-software status-publish hentry category-software tag-frameworks tag-implementations tag-linq tag-net"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">What advantage was gained by implementing LINQ in a way that does not cache the results</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">frameworks</span><span class="mr-2 badge badge-info">implementations</span><span class="mr-2 badge badge-warning">linq</span><span class="mr-2 badge badge-primary">net</span></p><div class="entry-content"><p>This is a known pitfall for people who are getting their feet wet using LINQ:</p><pre class="lang-cs prettyprint-override"><code>public class Program
{
    public static void Main()
    {
        IEnumerable&lt;Record&gt; originalCollection = GenerateRecords(new[] {&#34;Jesse&#34;});
        var newCollection = new List&lt;Record&gt;(originalCollection);

        Console.WriteLine(ContainTheSameSingleObject(originalCollection, newCollection));
    }

    private static IEnumerable&lt;Record&gt; GenerateRecords(string[] listOfNames)
    {
        return listOfNames.Select(x =&gt; new Record(Guid.NewGuid(), x));
    }

    private static bool ContainTheSameSingleObject(IEnumerable&lt;Record&gt;
            originalCollection, List&lt;Record&gt; newCollection)
    {
        return originalCollection.Count() == 1 &amp;&amp; newCollection.Count() == 1 &amp;&amp;
                originalCollection.Single().Id == newCollection.Single().Id;
    }

    private class Record
    {
        public Guid Id { get; }
        public string SomeValue { get; }

        public Record(Guid id, string someValue)
        {
            Id = id;
            SomeValue = someValue;
        }
    }
}
</code></pre><p>This will print &#34;False&#34;, because for each name supplied to create the original collection, the select function keeps getting reevaluated, and the resulting <code>Record</code> object is created anew.  To fix this, a simple call to <code>ToList</code> could be added at the end of <code>GenerateRecords</code>.</p><p><strong>What advantage did Microsoft hope to gain by implementing it this way?</strong></p><p>Why wouldn&#39;t the implementation simply cache the results an internal array? <em>One specific part</em> of what&#39;s happening may be deferred execution, but that could still be implemented without this behavior.</p><p><strong>Once a given member of a collection returned by LINQ has been evaluated, what advantage is provided by not keeping an internal reference/copy, but instead recalculating the same result, as a default behavior?</strong></p><p>In situations where there is a particular need in the logic for the same member of a collection recalculated over and over, it seems like that could be specified through an optional parameter and that the default behavior could do otherwise.  In addition, the speed advantage that is gained by deferred execution is ultimately cut back against by the time it takes to continually recalculate the same results.  Finally this is confusing block for those that are new to LINQ, and it could lead to subtle bugs in ultimately anyone&#39;s program.</p><p>What advantage is there to this, and why did Microsoft make this seemingly very deliberate decision?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>What advantage was gained by implementing LINQ in a way that does not cache the results?</p></blockquote><p>Caching the results would simply not work for everybody. As long as you have tiny amounts of data, great. Good for you. But what if your data is larger than your RAM?</p><p>It has nothing to do with LINQ, but with the <code>IEnumerable&lt;T&gt;</code> interface in general.</p><p>It is the difference between <a href="https://msdn.microsoft.com/en-US/library/s2tte0y1(v=vs.110).aspx" rel="noreferrer">File.ReadAllLines</a> and <a href="https://msdn.microsoft.com/en-us/library/system.io.file.readlines(v=vs.110).aspx" rel="noreferrer">File.ReadLines</a>. One will read the whole file into RAM, and the other will give it to you line by line, so you can work with large files (as long as they <em>have</em> line-breaks).</p><p>You can easily cache everything you want to cache by materializing your sequence calling either <code>.ToList()</code> or <code>.ToArray()</code> on it. But those of us who do <em>not</em> want to cache it, we have a chance to <em>not</em> do so.</p><p>And on a related note: how do you cache the following?</p><pre class="lang-cs prettyprint-override"><code>IEnumerable&lt;int&gt; AllTheZeroes()
{
    while(true) yield return 0;
}
</code></pre><p>You cannot. That&#39;s why <code>IEnumerable&lt;T&gt;</code> exists as it does.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-the-proper-way-to-do-rest/'>Rest &#8211;  the proper way to do REST</a></li><li class="list-group-item"><a href='../c-best-way-to-remove-list-items-from-an-existing-record/'>C# &#8211; Best way to remove list items from an existing record</a></li><li class="list-group-item"><a href='../the-most-effective-order-to-learn-sql-server-linq-and-entity-framework/'>The most effective order to learn SQL Server, LINQ, and Entity Framework</a></li><li class="list-group-item"><a href='../nesting-linq-to-objects-query-within-linq-to-entities-query-what-is-happening-under-the-covers/'>Nesting Linq-to-Objects query within Linq-to-Entities query –what is happening under the covers</a></li><li class="list-group-item"><a href='../why-does-linq-to-entity-sum-return-null-when-the-result-set-is-empty/'>Why does Linq to Entity Sum return null when the result set is empty</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>