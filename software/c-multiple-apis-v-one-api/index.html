<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Multiple APIs v One API &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076774 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076774" class="post-1076774 software type-software status-publish hentry category-software tag-c tag-domain-driven-design tag-enterprise-architecture"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Multiple APIs v One API</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">domain-driven-design</span><span class="mr-2 badge badge-warning">enterprise-architecture</span></p><div class="entry-content"><p>Is it normal to have a bounded context spread accross multiple APIs or should there really be one API per bounded context?</p><p>I am trying to understand if I can use the Scatter Gatherer pattern (<a href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/BroadcastAggregate.html" rel="nofollow noreferrer">https://www.enterpriseintegrationpatterns.com/patterns/messaging/BroadcastAggregate.html</a>) in a hobby application I am developing to improve my knowledge of DDD.</p><p><strong>Multiple APIs &#8211; Use scatter gatherer</strong></p><p>The example I have posted is for a mortgage application where a quote request is broadcasted to multiple vendors and then once a suitable amount of quotes is received then the aggregator chooses the best quote.</p><p>In this scenario it appears that there is a bounded context spread accross multiple APIs.  The solution structure will look something like this:</p><p>The solution structure will look something like this:</p><pre><code>Offers.API //Contains the aggregator
Offer1.API
Offer2.API
Offer3.API
</code></pre><p>The domain model in the Offers.API will look something like this:</p><pre><code>public class Customer
{
   public string Name {get; set; }
   public DateTime DateOfBirth {get; set; }
   public List&lt;Offer&gt; Offers {get; set; }

   public void AssignOffer(Offer offer)
   {
    Offers.Add(offer);
   }
}
</code></pre><p>The Offers are passed to the AssignOffer by the aggregator.  The Offer class will be anemic in the Offers.API because the domain logic is contained in the other APIs.</p><p>I believe the benefit of this approach is that it is more configurable.  Every time a new offer is added then a new API can be created.</p><p><strong>Single API</strong></p><p>Instead I could just have one API and map offers from the database to classes using Table Per Hierarchy mappings.  Every new offer added will require the application to be compiled and published.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>From an architectural standpoint, what you are talking about is probably more commonplace than you may realize.  Essentially, there are multiple reasons for having multiple instances of APIs.  In fact, it&#39;s kind of what <a href="https://en.wikipedia.org/wiki/Microservices" rel="nofollow noreferrer">Microservices</a> are.</p><p>Reasons for multiple APIs:</p><ul><li>The APIs are hosted by your providers (in this case mortgage lenders) and you are consuming them</li><li>You need to dynamically scale to handle load for a portion of your application</li><li>You are <em>sharding</em> data across multiple nodes (like most NOSQL data stores)</li><li>You are implementing your system using microservices</li></ul><p>Your problem is essentially an <a href="https://www.google.com/search?q=aggregated%20search&amp;cad=h" rel="nofollow noreferrer">aggregated search</a> problem.  You make an asynchronous request to multiple providers and when you collect enough results, you start prioritizing and sorting the results.</p><p>To answer your question, yes it is normal to have several microservices (small APIs) working together in a solution.  It&#39;s a valid design decision, but the flexibility you get from microservices does come at a price.</p><ul><li>Microservices are more complex to develop, test and deploy</li><li>They allow you to spin up additional copies of services to handle demand and then get rid of the excess services when they are no longer needed</li><li>When combined with <a href="https://medium.com/@pshrmn/demystifying-single-page-applications-3068d0555d46" rel="nofollow noreferrer">Single Page Applications</a> (SPA) you can keep track of sessions on the client so you don&#39;t have to manage that on the server, reducing the intercommunication needed somewhat</li></ul><p>You&#39;ll find that most well known applications that handle a large amount of concurrent users are built using a microservice architecture, so it scales well.  However, most of those applications also started out a lot more simply and evolved that way over time.  If this is for your personal learning, I would recommend getting familiar with microservice architecture.  If this is for a real project, I would recommend starting with an approach your team already understands and potentially migrating to microservices if you start getting close to the level of traffic that would mandate that approach.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../who-owns-the-orders-in-a-consumer-provider-marketplace-like-platform/'>Who owns the Orders in a consumer-provider marketplace like platform</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>