<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Can a class contain its own class &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082514 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082514" class="post-1082514 software type-software status-publish hentry category-software tag-class-design tag-composition tag-design-patterns tag-object-oriented-design tag-uml"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Can a class contain its own class</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">class-design</span><span class="mr-2 badge badge-info">composition</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">object-oriented-design</span><span class="mr-2 badge badge-danger">uml</span></p><div class="entry-content"><p>Suppose I have the following class structure:</p><p><a href="../../../i.stack.imgur.com/qDw6P.jpg" rel="noreferrer"><img src="../../../i.stack.imgur.com/qDw6P.jpg" alt="enter image description here"/></a></p><ol><li><p>A forest can have any number of trees, but each tree can belong to only one forest. If the forest is deleted, the tree is deleted.</p></li><li><p>A tree must have at least one branch, but can have many more, however each branch can belong to only one tree. If the tree is deleted, the branch is deleted.</p></li><li><p>A branch can have any number of leaves, and each leaf can belong to only one branch. If the branch is deleted, the leaf is deleted.</p></li></ol><p>I believe this is a &#39;composition&#39; structure, where each child depends on its parent for existence.</p><p>How might I represent a structure where <strong>each branch can contain other branches, which can contain other branches</strong>, and so on and so forth, essentially like this:</p><p><a href="../../../i.stack.imgur.com/bClJe.jpg" rel="noreferrer"><img src="../../../i.stack.imgur.com/bClJe.jpg" alt="enter image description here"/></a></p><p>Notice the infinite loop I&#39;ve added to branch, suggesting that a branch can contain any number of &#39;child&#39; branches, which can in turn contain any number of child branches etc etc, similar to how a real tree might function, where each branch can contain smaller branches, which can in turn contain smaller branches:</p><p><a href="../../../i.stack.imgur.com/shI2L.jpg" rel="noreferrer"><img src="../../../i.stack.imgur.com/shI2L.jpg" alt="enter image description here"/></a></p><p>How might I therefore create a structure where:</p><ol><li><p>Each branch class can contain an infinite (and unknown) number of &#39;child&#39; branch classes</p></li><li><p>Each branch can have access to itself and its child branches only (i.e it cannot see parent data)</p></li><li><p>Each branch has the ability to make decisions for itself and its child branches only (i.e. the chain of power over subordinates increases as you move up the chain towards the parent)</p></li></ol><p>In other words, a simple heirarchy structure, but with a flexible hierarchy depth.</p><p>It is this <strong>unknown</strong> number of parent/child generations which is causing me difficulty. If I knew that a &#39;grandparent&#39; branch can only contain &#39;parent&#39; branches, which in turn can only contain &#39;child&#39; branches, then I could easily hardcode 3 classes to represent grandparent/parent/child branches.</p><p>However since the number of &#39;generations&#39; is unknown, I can&#39;t seem to get my head around how this might be represented in a UML Class Diagram, and later implemented.</p><p>How might I best approach this?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Can a class contain its own class?</h2><p>Yes. Case in point:</p><pre><code>public class Foo
{
    public Foo Parent { get; set; }
}

var parent = new Foo();
var child = new Foo() { Parent = parent };
</code></pre><p>However, a class cannot then have <em>only</em> constructors which require a parameter of the same class, such as</p><pre><code>public class Foo
{
    public Foo Parent { get; }

    public Foo(Foo parent)
    {
        this.Parent = parent;
    }
}
</code></pre><p>The language allows it, but it&#39;s impossible to ever create such an object, as it leads to an infinitely recursing chain of constructors:</p><pre><code>var parent = new Foo(new Foo(new Foo(new Foo(...)))); // to infinity!
</code></pre><p>This just never ends.</p><p><em>Edit: user1937198 correctly pointed out that you can simply pass in <code>null</code> (barring some constraints such as C#&#39;s non-nullable types), but that is in my opinion off-label usage as it&#39;s conceptually contradictory to (a) have a constructor ask for an object (b) not provide any constructor which doesn&#39;t aks for that object, and then (c) not passing an object.</em></p><p>However, if there are other constructors available as well, then there is no problem. The first created object is simply limited to using the constructors without the same class as constructor parameter</p><pre><code>public class Foo
{
    public Foo Parent { get; }

    public Foo(Foo parent)
    {
        this.Parent = parent;
    }

    public Foo()
    {

    }
}

var parent = new Foo();
var child = new Foo(parent);
</code></pre><p>As a general rule, there are three ways to model this relationship:</p><ol><li>Parent-oriented:</li></ol><pre><code>public class Foo
{
    public Foo Parent { get; set; }
}

var parent = new Foo();
var child = new Foo() { Parent = parent };
</code></pre><ol start="2"><li>Child-oriented:</li></ol><pre><code>public class Foo
{
    public List&lt;Foo&gt; Children { get; set; }
}

var child = new Foo();
var parent = new Foo();
parent.Children.Add(child);
</code></pre><ol start="3"><li>Both (this is commonly used for navigational properties such as in Entity Framework)</li></ol><pre><code>public class Foo
{
    public Foo Parent { get; set; }
    public List&lt;Foo&gt; Children { get; set; }
}

var parent = new Foo();
var child = new Foo() { Parent = parent };
parent.Children.Add(child);
</code></pre><hr/><h2>How might I therefore create a <code>Branch</code>?</h2><blockquote><p>I believe this is a &#39;composition&#39; structure, where each child depends on its parent for existence.<br/> How might I represent a structure where each branch can contain other branches, which can contain other branches, and so on and so forth</p></blockquote><p>For reference, what you&#39;re looking for here is a &#39;recursive&#39; structure, as opposed to a &#39;composite&#39; structure.</p><p>Note that &#39;recursive&#39; doesn&#39;t inherently mean a self-relationship (i.e. <code>Branch-&gt;Branch-&gt;Branch-&gt;...</code>), it could also be a longer chain without self-relationships (e.g. <code>A-&gt;B-&gt;C-&gt;A-&gt;B-&gt;C-&gt;...</code>), though that distinction is irrelevant for your specific use case.</p><blockquote><ol><li>Each branch class can contain an infinite (and unknown) number of &#39;child&#39; branch classes</li></ol></blockquote><p>This is describing a collection, e.g. <code>List&lt;Branch&gt;</code>. Other collection types exist but I&#39;m using <code>List&lt;&gt;</code> for simplicity&#39;s sake.</p><blockquote><ol start="2"><li>Each branch can have access to itself and its child branches only (i.e it cannot see parent data)</li></ol></blockquote><p>Therefore, a branch needs to contain such a collection of (child) branches:</p><pre><code>public class Branch
{
    public List&lt;Branch&gt; Branches { get; set; }
}
</code></pre><p>This is the child-oriented example from the previous examples.</p><blockquote><ol start="3"><li>Each branch has the ability to make decisions for itself and its child branches only (i.e. the chain of power over subordinates increases as you move up the chain towards the parent)</li></ol></blockquote><p>3 is a logical consequence of 2, so it is automatically achieved when 2 is achieved.</p><blockquote><p>I can&#39;t seem to get my head around how this might be represented in a UML Class Diagram</p></blockquote><p><strong>Branch-to-branch</strong></p><p>Your UML is perfectly fine in regards to the self-relationship. You drew a relationship from <code>Branch</code> to <code>Branch</code>, which does express it.</p><p>This kind of relationship is inherently recursive (i.e. what you call &#34;infinite depth&#34;). It&#39;s actually impossible to avoid recursion here, because that would require using multiple types to denote branches that can/can&#39;t have further children.</p><p>Note that while the relationship itself is inherently recursive, it&#39;s possible that your business logic might enforce a maximum depth. Maybe not necessary for your case, but it is a general possibility.<br/> However, that sort of depth-limit is not visible on a UML diagram, and shouldn&#39;t particularly be visible as UML diagrams do not contain validation or business logic.</p><p><strong>Tree-to-branch</strong></p><p>However, do note that the relationship a branch has with its tree has changed. The &#34;child&#34; branches won&#39;t be related to a tree, they&#39;ll be related to their parent branch. And the &#34;top&#34; branch will have the relationship to the tree.</p><p>This means that your tree-to-branch relationship is now a <code>0..1 to many</code> relationship.</p><hr/><h2><strong>Complexity vs security</strong></h2><p>I just want to point out that there are circumstances which can change the outcome.</p><p>If <strong>only</strong> a branch which has no child branches is allowed to have leaves, and branches with child branches are not allowed to, your UML is flawed, as <em>all</em> branches can have leaves.<br/> If this is what you need, then you&#39;re going to need to model different types for a &#34;branch-having branch&#34; and a &#34;leaf-having branch&#34;.</p><p><em>Note: I&#39;m aware that in your drawing of a tree you drew leaves on all kinds of branches, but I also suspect that your tree scenario is an example and not indicative of what you may be trying to build in reality.</em></p><p>Similarly, your UML is relying on your business logic ensuring that only the ancestor branch is connected to the tree, not any other branch. If you wish to model this more securely, then you would also need to distinguish between a &#34;tree-related branch&#34; and a &#34;branch-related branch&#34;.</p><p>However, there is some degree of freedom here. You <em>could</em> model that in your UML, but it will complicate the diagram. You could also stick to simple modeling with only a <code>Branch</code> type which could all be related to a tree, child branches, and leaves; and then rely on your business logic to ensure that you build your graph the right way.</p><p>This very much depends on whether you&#39;re willing to take on the added model complexity in order to outright prevent &#34;bad&#34; graphs, which requires context from how bad an error in your application is.</p><ul><li>For example, if it could kill people by malfunctioning, prioritize security (enforcing it through the diagram) over simplicity (relying on business logic).</li><li>On the other hand, if this is a simple app that e.g. tracks cooking recipes, at the very worst you&#39;re going to get some dirty data that needs cleaning, which is a negligible issue and is not worth the headaches that such a complex UML diagram would cause.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-duplication-in-parallel-inheritance-hierarchies/'>Object-oriented &#8211; Duplication in parallel inheritance hierarchies</a></li><li class="list-group-item"><a href='../c-design-calling-back-to-the-parent-class/'>C++ &#8211; Design: Calling back to the parent class</a></li><li class="list-group-item"><a href='../c-using-visitor-pattern-with-large-object-hierarchy/'>C# &#8211; Using visitor pattern with large object hierarchy</a></li><li class="list-group-item"><a href='../design-how-do-we-keep-dependent-data-structures-up-to-date/'>Design &#8211; How do we keep dependent data structures up to date</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>