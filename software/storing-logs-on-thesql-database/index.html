<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Storing logs on thesql database &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087573 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087573" class="post-1087573 software type-software status-publish hentry category-software tag-logging tag-mysql"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Storing logs on thesql database</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">logging</span><span class="mr-2 badge badge-info">MySQL</span></p><div class="entry-content"><p>I was looking for more information on logging user actions on the application (web based project). I did found <a href="https://softwareengineering.stackexchange.com/questions/168059/best-practices-for-logging-user-actions-in-production">this question</a>, but it&#39;s a more conceptual answer, wich helped me getting started with this.</p><p>But I don&#39;t know for sure how to build this structure for the log system and also how to log the information. Everywhere people say &#34;log everything&#34;, but that&#39;s quite embrancing.</p><blockquote><p>Note: I&#39;m already using HeatMap to gather user navigation information and GoogleAnalytics for other type of information.</p></blockquote><p>Currently I have this table on the database e.x.: <code>ap_log</code>:</p><pre><code>id | user_id | action | area | description | old_value | new_value | date
</code></pre><p>And I use it like this:</p><ul><li><strong>action</strong>: Number of the action <code>1: Insert | 2: Update | 3: Delete | 4: other</code>;</li><li><strong>area</strong>: Area of the action, ex.: &#34;account&#34; for login, &#34;adress&#34; when adding a new address, etc..;</li><li><strong>description</strong>: A short description of the action. &#34;User login&#34;, &#34;Add new address&#34;;</li><li><strong>old/new_value</strong>: Serialized object with the data changed. Ex.: When user update the address, I save the old values on the <code>old_value</code> column and the new address information on <code>new_value</code>;</li><li><strong>date</strong>: Date time of the log <code>Y-m-d h:m:s</code></li></ul><p>The columns action, area and description they are strings that is inserted on the database. For example, I call a function like this:</p><pre><code>// insertLog(user_id, action, area, description );
insertLog($userId, 1, &#39;address&#39;, &#39;Add new address&#39;);
insertLog($userId, 4, &#39;account&#39;, &#39;User login&#39;);
insertLog($userId, 4, &#39;account&#39;, &#39;Email sent to recover password&#39;);
insertLog($userId, 2, &#39;account&#39;, &#39;User reset password&#39;);
</code></pre><p>With this, I&#39;m only loging information that is stored in the database, such as user profile, purchases, address, list management, etc.. Is this database table ok and enought for this purpose? Is there a way to improve this? Any advice is very welcome.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>That table layout looks very similar to what I&#39;ve used in the past for a few different projects, and I think it should be sufficient. At this point, the biggest thing you will probably run into is figuring out the right amount of logging (ie. yes you want to log user logins, but you also probably want to log failed login attempts, and depending on the type of information visible to admins/moderators/etc you may want audit trail logs for simply accessing/reading certain types of information as well).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-datetime-vs-timestamp-in-mysql-and-php-in-practice/'>Php &#8211; Datetime vs Timestamp in MySQL and PHP in practice</a></li><li class="list-group-item"><a href='../database-unique-and-primary-keys-on-a-database-thesql/'>Database &#8211; Unique and primary keys on a database (thesql)</a></li><li class="list-group-item"><a href='../database-log-to-file-or-to-database-table/'>Database &#8211; Log to file or to database table</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>