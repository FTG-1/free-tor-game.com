<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>What negative consequences can arise from this language design rule &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080995 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080995" class="post-1080995 software type-software status-publish hentry category-software tag-language-design tag-programming-languages tag-scala tag-theory"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">What negative consequences can arise from this language design rule</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">language-design</span><span class="mr-2 badge badge-info">programming-languages</span><span class="mr-2 badge badge-warning">scala</span><span class="mr-2 badge badge-primary">theory</span></p><div class="entry-content"><p><em>Clarification: the rule is meant to prevent accessing variables that are not declared yet.</em></p><p><em>Clarification 2: the rule mandates that the compiler follows calls to functions which are defined in the same scope as the call and happen before the actual definition (forward referencing)  &#8211; making the compiler much alike an interpreter.</em></p><p>I&#39;m thinking about a fictional programming language that behaves similar to JavaScript when declaring functions: that is, when using the <code>function</code> keyword to create named functions, they get &#34;hoisted&#34; to the top of the scope and can be used anywhere where their name is visible.</p><p>For example, the following is legal:</p><pre><code>f();
function f() { console.log(&#34;f called&#34;) };
</code></pre><p>However, there is a potential problem: what if the function <code>f</code> uses a variable <code>x</code>, that is defined <em>after</em> the call, like here:</p><pre><code>f();
var x = 1;
function f() { console.log(x); }
</code></pre><p>In case of JavaScript, this is also legal, because variables are hoisted as well &#8211; the program gets essentially transformed into something like this:</p><pre><code>var x;
function f() { console.log(x); }

f();
x = 1;
</code></pre><p>And therefore just prints <code>undefined</code>.</p><p><strong>In my fictional language, variables wouldn&#39;t get hoisted</strong>, which means that the example before would produce an error. The rule concerns how this error is generated:</p><blockquote><p>Functions are visible for the entire block in which they are defined,<br /> but it is illegal to call a function that accesses a variable declared<br /> after the call.</p></blockquote><p><strong>This means that each time the compiler for this language would encounter a function call, it would have to check if the function is defined in the current scope, and if it is, check if it accesses variables in the current scope that are declared after the call.</strong></p><p>The reason for this rule is that it makes no sense to access variables before they are declared. Hoisting the variables to the top of their scopes like JavaScript does is a hack that only leaves room for error! This is why I believe it must not be done, but such situations should be detected and treated as errors (because they are, you&#39;re referencing something that doesn&#39;t chronologically exist yet).</p><p><strong><em>I&#39;m looking for reasons why this is a bad rule, i.e. results in complications or inconsistencies.</em></strong></p><p>The reason I suspect that the rule is a bad one is that it does not exist in the Scala language. Scala solved this problem with a much more general rule:</p><blockquote><p>The scope of a name introduced by a declaration or definition is the<br /> whole statement sequence containing the binding. However, there is a<br /> restriction on forward references in blocks: In a statement sequence<br /> <code>s[1]...s[n]</code> making up a block, if a simple name in <code>s[i]</code> refers to<br /> an entity defined by <code>s[j]</code> where <code>j &gt;= i</code>, then for all <code>s[k]</code><br /> between and including <code>s[i]</code> and <code>s[j]</code>,</p><ul><li><code>s[k]</code> cannot be a variable definition.</li><li>If <code>s[k]</code> is a value definition, it must be <code>lazy</code>.</li></ul></blockquote><p><strong>UPDATE:</strong></p><p>For the time being I have adopted Scala&#39;s approach.</p><p>This approach is a more general version of my rule: it will catch all illegal accesses, but also some that are not &#8211; this is a tradeoff that I&#39;m willing to make since I think that my rule may be too complicated or even impossible to implement.</p><p>Here&#39;s the rephrased/explained rule from Scala:</p><p>Variables cannot be forward-referenced, but lazy values, functions defined with def (which are just syntax sugar for lambdas assigned to (lazy) values, might even remove them as Doval suggested), classes, and modules can.</p><p>The restriction is that between the reference and the declaration (inclusive), there must be no variable definitions, because they might be altered by the entity being referenced before they are introduced to the program.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You&#39;ve already created at least one inconsistency, and a particularly damning one at that - treating functions differently from other values. A function declaration is conceptually the same as binding a variable to an anonymous function, but you&#39;re asserting that &#34;regular&#34; variables don&#39;t get hoisted while function declarations do. So...</p><pre><code>f()
function f() { /* ... */ }
</code></pre><p>Works, but...</p><pre><code>f()
var f = function() { /* ... */ } // Pretend this is anonymous function syntax
</code></pre><p>Doesn&#39;t. (And if you don&#39;t allow passing functions around like any other value, your language is horribly crippled.) Next, what happens if a function is redefined?</p><pre><code>f()
function f() { /* definition 1 */ }
...
function f() { /* definition 2 */ }
</code></pre><p>If you treat this as an error, you&#39;re once again rejecting functions as values. There&#39;s no reason you shouldn&#39;t be able to do:</p><pre><code>var f = function() { /* def 1 */ }
f = function() { /* def 2 */ }
</code></pre><p>So let&#39;s assume you&#39;ll allow the function to be redefined. How do you deal with lexical scoping?</p><pre><code>function f() { /* definition 1 */ }
function bar() {
    f()
    function f() { /* definition 2 */ }
</code></pre><p>If you hoist definition 2 to the top of <code>bar</code>&#39;s scope, you end up with this:</p><pre><code>function f() { /* definition 1 */ }
function bar() {
    function f() { /* definition 2 */ }
    f()
</code></pre><p>Which means you can never call the outer definition from a nested scope unless you give the inner function a different name. Moreover, in any other language, the meaning of the above program is independent of the choice of name for definition 2. The hoisting rule changes the meaning depending on whether there&#39;s a name collision or not. On the other hand if you don&#39;t hoist definition 2 to the top of <code>bar</code>, you&#39;ve broken your own rule.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../are-closures-with-side-effects-considered-functional-style/'>Are closures with side-effects considered &#8220;functional style&#8221;</a></li><li class="list-group-item"><a href='../c-why-doesnt-c-have-local-scope-in-case-blocks/'>C# &#8211; Why doesn&#8217;t C# have local scope in case blocks</a></li><li class="list-group-item"><a href='../dealing-with-not-knowing-parameter-names-of-a-function-when-youre-calling-it/'>Dealing with not knowing parameter names of a function when you&#8217;re calling it</a></li><li class="list-group-item"><a href='../is-duplicate-syntax-for-defining-named-functions-a-bad-language-design-decision/'>Is duplicate syntax for defining named functions a bad language design decision</a></li><li class="list-group-item"><a href='../banning-zero-argument-functions-what-problems-could-it-cause-in-a-hypothetical-language/'>Banning zero-argument functions &#8212; what problems could it cause in a hypothetical language</a></li><li class="list-group-item"><a href='../how-does-static-scoping-apply-to-recursive-functions/'>How does static scoping apply to recursive functions</a></li><li class="list-group-item"><a href='../c-block-scoped-and-function-scoped-languages/'>C++ &#8211; Block Scoped and Function Scoped Languages</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>