<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture &#8211; Where should business logic sit in microservice architecture &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070752 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070752" class="post-1070752 software type-software status-publish hentry category-software tag-architecture tag-business-logic tag-microservices"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture &#8211; Where should business logic sit in microservice architecture</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">business-logic</span><span class="mr-2 badge badge-warning">microservices</span></p><div class="entry-content"><p>Still trying to wrap my head around microservice architecture since I&#39;m used to a monolithic approach</p><p>Suppose we try to build a <em>extremely simplified</em> Uber booking system.  To simplify things we let&#39;s say we have 3 services and a gateway api for the client: <code>Booking</code>, <code>Drivers</code>, <code>Notification</code> and we have the following workflow:</p><p>When creating new booking:</p><ol><li>Check if existing user already have a booking</li><li>Get list of available drivers</li><li>Send notification to the drivers to pick up the booking</li><li>Driver picks up the booking</li></ol><p>Let&#39;s say all messaging is done through an http call rather than a messaging bus like kafka to keep things simple.</p><p>So in this case, I thought that the <code>Booking</code> service can do the checking for existing booking. But then who should be getting the list of available drivers and notification? I&#39;m thinking of doing it on the gateway level but then now logic is kind of split into two places:</p><ul><li><code>Gateway</code> &#8211; get list of available drivers + send notifications</li><li><code>Booking</code> &#8211; check for existing booking</li></ul><p>And I&#39;m pretty sure gateway is not the right place to do it but I feel like if we are doing it in the <code>Booking</code> service, it&#39;s becoming tightly coupled?</p><p>To make it more complicated, what happens if we have another project that wants to reuse the booking system but with its own business logic on top of it? That&#39;s why I thought of doing it in the gateway level so the new project gateway can have its own business logic separate from the existing one.</p><p>Another way of doing it I suppose is to each project have its own booking service that will talk to the core booking service but I&#39;m not sure what&#39;s the best approach here ðŸ™‚</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>People often hear &#34;micro-service&#34; and think &#34;nano-service&#34;, and this can cause some confusion. These are <strong>micro</strong>-services, so you don&#39;t need a separate service for every single entity. Everything you are trying to do should be in the <code>booking</code> and <code>notification</code> services. You don&#39;t need the <code>driver</code> service (for any of the activity you described).</p><p>Getting a list of drivers available to <em>book</em> falls under the <code>booking</code> service. A common pitfall is to not group related activities into the same service, this is called low-coherence, and it is very bad. Remember, you group things into a service by problem domain, not by entity.</p><p>Now, as for reuse, the advantage of having a separate micro-service is, now you can have three separate teams making the consumer facing apps. One team for the standard html web app, an android app, and an ios app. All these different applications can be built completely differently, and look appropriate for their particular platform (without repeating code). The <code>booking</code> service code is reused by all three of these apps, because all three apps make http calls to the service instead having their own booking code.</p><p>A typical booking flow would look like this:</p><ol><li>The android app calls the <code>booking</code> service to get a list of available drivers</li><li>The booking service returns a list of drivers to the app</li><li>The user then selects their driver and the app calls the &#34;book&#34; method of the <code>booking</code> service</li><li>The <code>booking</code> service service calls the <code>notification</code> service with the booking details</li><li>The <code>notification</code> service sends a notification to the driver, notifying him of the booking</li><li>The driver app sends a message to the <code>notification</code> service when they are within a mile of the customer</li><li>The <code>notification</code> service sends the alert to the customer that their driver is almost there</li></ol><p>Hope this helped; remember, they are micro-services, not nano-services, don&#39;t try to divide the same problem domain. So, to answer the title of your question, when you keep a micro-service the proper size, all, or most of, the business logic for that problem domain can live within that micro-service.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../handling-changes-in-a-event-driven-microservice-architecture/'>Handling changes in a event-driven microservice architecture</a></li><li class="list-group-item"><a href='../architecture-api-gateway-security-for-microservice-architecture/'>Architecture &#8211; API Gateway security (for microservice architecture)</a></li><li class="list-group-item"><a href='../database-notifications-in-a-microservice-architecture-in-application-logic-vs-database-triggers/'>Database &#8211; Notifications in a microservice architecture: In Application Logic vs. Database Triggers</a></li><li class="list-group-item"><a href='../java-message-driven-architecture-and-horizontal-scaling/'>Java &#8211; Message driven architecture and horizontal scaling</a></li><li class="list-group-item"><a href='../event-driven-architecture-and-synchronization-with-a-first-timer-microservice/'>Event-driven architecture and synchronization with a &#8220;First-timer microservice&#8221;</a></li><li class="list-group-item"><a href='../architecture-microservice-architecture-for-multiple-composite-data-entities/'>Architecture &#8211; Microservice architecture for multiple composite data entities</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>