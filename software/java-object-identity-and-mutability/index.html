<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Object Identity and Mutability &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084974 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084974" class="post-1084974 software type-software status-publish hentry category-software tag-c tag-immutability tag-java tag-memory tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Object Identity and Mutability</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">immutability</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">memory</span><span class="mr-2 badge badge-danger">object-oriented</span></p><div class="entry-content"><p>I was reading a <a href="http://cr.openjdk.java.net/~jrose/values/values-0.html" rel="nofollow">proposal for value types in Java</a>, and I came across this sentence: &#34;Object identity serves only to support mutability, where an objectâ€™s state can be mutated but remains the same intrinsic object.&#34;</p><p>From what I understand (albeit tentatively), object identity is the idea of your variable acting as a pointer or reference to an object located elsewhere in memory (such as objects instantiated on the heap in Java or C#). So what would this have to do with object mutability? Does this imply that, for example, instantiated objects on the stack in C++ are immutable? I&#39;m having trouble seeing the link here.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Before tackling identity, let&#39;s define what we mean by <em>equality</em> a little more precisely. We say two things are equal if and only if we can&#39;t tell them apart (see: <a href="http://en.wikipedia.org/wiki/Identity_of_indiscernibles">Identity of indiscernibles</a>). That means that whether two things are equal or not depends on the means we have to inspect them.</p><p>Let&#39;s think about that some more in programming terms. Let&#39;s leave our preconceptions at the door and suppose we&#39;re working in a brand-new unknown language where all variables and values are immutable. By the definition above, two values <code>A</code> and <code>B</code> are equal if and only if there are NO programs in the language that yield different results when <code>A</code> is used in place of <code>B</code> or vice-versa. Let&#39;s say <code>A</code> and <code>B</code> are (IEEE 754) floats, and when substituted into the expression <code>_ + 1.0</code>, the result is <code>1.0</code> for both <code>A</code> and <code>B</code>. Surely <code>A</code> and <code>B</code> are both zero. Are they equal? That depends - does the language provide any function that allows me to determine <a href="http://en.wikipedia.org/wiki/Signed_zero">the sign of the zero</a>? If it doesn&#39;t, they&#39;re equal; if it does, they may not be.</p><p>So two values are equal any time they give the same results for all possible combinations of operations they support. Immutable values in particular don&#39;t produce different results depending on which operations were previously applied to them. For that reason, we don&#39;t care if two variables point to two copies of the same value or if they both point to the same copy.</p><p>What does this have to do with mutability? Mutability implies our language has some notion of a memory cell whose contents can be overwritten. Let&#39;s say we add support for mutable memory cells to our language:</p><ul><li><code>ref &lt;value&gt;</code> creates a <em>new</em> memory cell, distinct from all others, initialized to <code>&lt;value&gt;</code>.</li><li><code>&lt;variable&gt; := &lt;value&gt;</code> overwrites the contents of a reference cell.</li><li><code>!&lt;variable&gt;</code> returns the value currently stored in a reference cell.</li></ul><p>Now let&#39;s think about what equality means for memory cells. Suppose <code>A = ref 0</code> and <code>B = A</code>. Consider this program:</p><pre><code>A := 1
print(!_)
</code></pre><p>Substituting the blank for <code>A</code> prints <code>1</code>, and substituting for <code>B</code> prints <code>1</code> as well. Now suppose <code>A = ref 0</code> and <code>B = ref 0</code>. In this case, substituting into the above program prints <code>1</code> and <code>0</code>, since now <code>A</code> and <code>B</code> point to distinct memory cells.</p><p>So it does matter to us whether two references point to the same memory cell or different memory cells. Since that matters, it&#39;d be useful to have an efficient and general way of telling two references apart. Our current method of comparing the values they hold, and if they&#39;re equal mutating one of them is troublesome for a number of reasons:</p><ul><li>It depends on being able to compare the values stored in the memory cells for equality. Equality doesn&#39;t make sense for all types - for example, it&#39;s generally meaningless for functions, because there&#39;s no general method to determine if two unknown functions are equal (this is venturing into Halting Problem territory). So given two references to memory cells storing functions, we can&#39;t compare the functions they hold for equality.</li><li>It depends on having some value that we can assign to one of the two references. So even if equality made sense for all types in the language, we still need access to a value for each type we want to compare. What if constructing a value of that type has side effects?</li><li>The reference value we use to mutate one of the references must be different from the value the memory cell already has, so we actually need two values.</li><li>The code to compare references of different types will look exactly the same save for the two values we use.</li><li>We need to back up and restore the value of the reference we mutate to avoid changing the meaning of the program.</li></ul><p>So it&#39;d be useful for the language to provide an operation to directly check if two references point to the same mutable memory cell. Such a function is pointless for immutable values; in fact, I&#39;d say it&#39;s downright harmful. If there existed a way to tell if two <code>1</code>s are stored in different places in memory, then there can be programs that care whether I pass one <code>1</code> or the other. I really don&#39;t want to worry about whether I have &#34;the right <code>1</code>&#34;; math is hard enough as it is! So it&#39;s clear that being able to check for memory equality is mainly useful for mutable types.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-complete-immutability-and-object-oriented-programming/'>Object-oriented &#8211; Complete immutability and Object Oriented Programming</a></li><li class="list-group-item"><a href='../java-when-i-create-an-object-is-fresh-memory-allocated-to-both-instance-fields-and-methods-or-only-to-instance-fields/'>Java &#8211; When I create an object, is fresh memory allocated to both instance fields and methods or only to instance fields</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>