<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; How does this switch statement do &#8220;multiple things&#8221; &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070687 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070687" class="post-1070687 software type-software status-publish hentry category-software tag-clean-code tag-java tag-switch-statement"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; How does this switch statement do &#8220;multiple things&#8221;</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">clean code</span><span class="mr-2 badge badge-info">java</span><span class="mr-2 badge badge-warning">switch statement</span></p><div class="entry-content"><p>This doubt is about <strong>Switch Statements</strong> from <strong>Chapter 3: Functions</strong> of the book named <strong><a href="https://rads.stackoverflow.com/amzn/click/com/0132350882" rel="noreferrer" rel="nofollow noreferrer">Clean Code</a></strong></p><p>Here we have a function:</p><pre class="lang-java prettyprint-override"><code>public Money calculatePay(Employee e)
throws InvalidEmployeeType {
    switch (e.type) {
      case COMMISSIONED:
        return calculateCommissionedPay(e);
      case HOURLY:
        return calculateHourlyPay(e);
      case SALARIED:
        return calculateSalariedPay(e);
      default: 
        throw new InvalidEmployeeType(e.type);
    }
}
</code></pre><p>From my inexperienced point of view, I can see that the switch statement inside the function <code>calculatePay</code> is only returning things based on the object <code>Employee</code>. Isn&#39;t it doing the <strong>&#34;One Thing&#34;</strong> mentioned by <strong>Uncle Bob</strong>?</p><p>But <strong>Uncle Bob</strong> says:</p><blockquote><p>There are several problems with this function. First, it&#39;s large, and when new employee types are added, it will grow. <strong>Second, it very clear does more than more thing.</strong> Third, it violates the Single Responsibility Principle(SRP) because there is more than one reason for it to change. Fourth, it violates the Open Closed Principle(OCP) because it must change whenever new types are added. But possibly the worst problem with this function is that there are an unlimited number of other functions that will have the same structure.</p></blockquote><p>How does the switch statement do more than one thing?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Martin&#39;s concept of &#34;do one thing&#34; is overly ambiguous to the point I believe it does more harm than good.</p><p>In the passage Martin states that a switch does one thing per case and therefore by definition does N things. This implies that any single method call is &#34;one thing&#34;. If you follow this thinking, you will quickly realize a program will never be able to do anything!</p><p>Martin has a different definition which is that a method does &#34;one thing&#34; when all operations are on the same abstraction level. But the cases here <code>calculateCommissionedPay()</code>, <code>calculateHourlyPay()</code> do seem to be on the same abstraction level, so this contradicts his general criticism of switch-statments as always doing N-things.</p><p>That said, there are reasons to avoid this particular use of a switch. The switch check a type-field and then selects the method to call based on that. The idiomatic way to do this in object oriented programming is to use subclasses and overloading. <code>Employee</code> could have subclasses <code>HourlyEmployee</code>, <code>SalariedEmployee</code> etc., which override a <code>calculatePay()</code> method. That way you could avoid the switch altogether and just call <code>e.calculatePay()</code>.</p><p>But if the input really is an enum value as in the example, then you need a way to get the appropriate <code>Employee</code>-subclass given this enum value. How do you do that? A <code>switch</code> of course! So you end up with code something like this:</p><pre><code>public Employee createEmployee(int employeeType)
throws InvalidEmployeeType {
    switch (employeeType) {
      case COMMISSIONED:
        return new CommissionEmployee(e);
      case HOURLY:
        return new HourlyEmployee(e);
      case SALARIED:
        return new SalariedEmployee(e);
      default: 
        throw new InvalidEmployeeType(e.type);
    }
}

public Money calculatePay(int employeeType)
throws InvalidEmployeeType {
    Employee e = createEmployee(e.type);
    return e.calculatePay();
}
</code></pre><p>You will notice a few things:</p><ol><li>We still have a <code>switch</code> which allegedly does &#34;N-things&#34;.</li><li>The switch will still have to grow when new employment types are added.</li><li>We still have a Open/Closed violation, since adding a new subclass will require us to modify the switch, just as before.</li></ol><p>But if there are <em>multiple places</em> in the code were we <code>switch</code> on the employee type as in the first example, this refactoring is a clear improvement since we now only need one single switch and can use overloading in the other places.</p><p>If it is not clear from the above, I reject the premise that switch statements are bad and should be avoided in general. Sometimes it is the right tool for the job. But <em>certain uses</em> of switch is an anti-pattern, for example using switch as a substitute for overloading, when overloading would be more appropriate.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-map-of-functions-vs-switch-statement/'>Design &#8211; Map of functions vs switch statement</a></li><li class="list-group-item"><a href='../java-enums-in-java-switch-statements-and-completeness/'>Java &#8211; Enums in java switch-statements and completeness</a></li><li class="list-group-item"><a href='../how-to-reduce-a-switch-in-a-switch-statement/'>How to reduce a switch in a switch statement</a></li><li class="list-group-item"><a href='../java-clean-architecture-apps-that-rely-heavily-on-background-services/'>Java &#8211; Clean Architecture: Apps that rely heavily on background services</a></li><li class="list-group-item"><a href='../c-looking-for-an-effective-pattern-to-cope-with-switch-statements-in-c/'>C# &#8211; Looking for an effective pattern to cope with switch statements in C#</a></li><li class="list-group-item"><a href='../java-what-does-if-a-function-does-only-those-st/'>Java &#8211; What does &#8220;If a function does only those steps that are one level below the stated name of the function, then the function is doing one thing&#8221; means</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>