<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; How to efficiently store big time series data &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064883 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064883" class="post-1064883 software type-software status-publish hentry category-software tag-database tag-performance tag-python"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; How to efficiently store big time series data</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">database</span><span class="mr-2 badge badge-info">performance</span><span class="mr-2 badge badge-warning">python</span></p><div class="entry-content"><p>I need to store and to be able to query some very large amounts time series data.</p><p>Properties of the data are as follows:</p><ul><li>number of series : around 12.000 (twelve thousand)</li><li>number of data points, globally : around 500.000.000 per month (five hundred millions)</li><li>mixed value types: the majority of data points are floating point values, the rest are strings</li><li>sampling period : variable between series as well as <em>within a series</em></li><li>timestamps : millisecond precision</li><li>data retention period : several years, without decay or downsampling</li><li>data archives need to be built in near realtime, but a reasonable delay (~1 hour) is acceptable</li><li>past data can be rebuilt if needed, but at a high cost</li><li>sometimes, but quite rarely, some past data needs to be updated</li></ul><p>Properties of envisioned queries:</p><ul><li>most of the queries against the data will be timestamp-based queries; ranging from one day to several months/years. 90%+ will be queries on the most recent data</li></ul><p>Other requirements:</p><ul><li>the solution must be free as in free beer and preferably opensource</li></ul><hr/><p>My initial thought thought was to use PyTables / Pandas with <a href="http://www.hdfgroup.org/">HDF5 files</a> as storing backend instead of an SQL database.</p><p>Questions :</p><ol><li><p>Assuming PyTables / Pandas is the &#34;best&#34; route, <strong>would it be better to split the data in several HDF files, each one spanning a given period of time, or put everything in a single file that would then become huge ?</strong></p></li><li><p><strong>Should I go and prefer the fixed or the table format ?</strong> To me, fixed format looks OK if I keep one HDF file per month, as this way a whole series probably fits in RAM and I can slice in-memory without needing a table format index. Am I correct ?</p></li></ol><p>And if that&#39;s <em>not</em> the best approach, how should I structure this data store or what technologies should I be considering?  I&#39;m not the first to tackle storing large sets of time series data, what is the general approach to resolving this challenge?</p><hr/><p>Other approaches I have considered :</p><ul><li>array databases: they are a superb fit for time series with constant sampling period, as you then only need to store start and end times and sampling period of the array, and then only values in the array itself and indexing is easy. But with variable sampling periods within series themselves, I need to keep a closer timestamp-&gt;value relation, that in my view is not such a good fit for array DBMS.</li><li>standard SQL database with timestamp,paramID,value as columns but by their nature they request a lot of disk I/O for any query</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You might want to take a look at <a href="https://github.com/graphite-project/carbon" rel="nofollow noreferrer">carbon</a> and <a href="https://github.com/graphite-project/whisper" rel="nofollow noreferrer">whisper</a>, part of the <a href="https://github.com/graphite-project/" rel="nofollow noreferrer">graphite</a> project. Carbon can handle very large amounts of time series data. Though, now that I read the docs (it&#39;s been a few years since I&#39;ve used it), it&#39;s only for numerical data. You said you also have string data so you might not find this useful. Though, you might be able to glean some wisdom about how they are able to process large amounts of data quickly.</p><p>To give you an idea of how well it scales, when graphite was first put into production at Orbitz, it was handling <a href="http://graphite.wikidot.com/faq#toc4" rel="nofollow noreferrer">160,000 metrics per minute</a>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-how-does-google-store-search-trends-in-backend/'>Database &#8211; How does Google store search trends in backend</a></li><li class="list-group-item"><a href='../database-options-for-data-analytics-for-time-series-store/'>Database &#8211; options for data analytics for time series store</a></li><li class="list-group-item"><a href='../database-efficiently-storing-time-series-at-multiple-resolutions/'>Database &#8211; Efficiently storing time series at multiple resolutions</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>