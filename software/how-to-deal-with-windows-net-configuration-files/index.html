<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to deal with Windows .NET configuration files &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082534 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082534" class="post-1082534 software type-software status-publish hentry category-software tag-configuration tag-windows tag-xml"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to deal with Windows .NET configuration files</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">configuration</span><span class="mr-2 badge badge-info">windows</span><span class="mr-2 badge badge-warning">xml</span></p><div class="entry-content"><p>We use the normal <code>app.config</code> file for the configuration of the application. Although it works for now it has some pretty significant drawbacks:</p><ul><li>Upgrading an application with a modified <code>app.config</code> is hard. Either it overwrites the existing configuration file or the upgraded <code>app.config</code> isn&#39;t installed at all.</li><li>An error in <code>app.config</code> often renders the entire configuration invalid.</li><li>The files are read-only and cannot be altered from the application itself.</li></ul><p>To overcome these issues I am considering some alternative options.</p><p><strong>Custom XML document transformation</strong></p><p>An alternative would be to revert back to a custom XML file to prevent these drawbacks. I think of a solution that uses <a href="http://www.nuget.org/packages/Microsoft.Web.Xdt" rel="nofollow">XML document transformation</a>.</p><p>The installer will install the default configuration file <code>default.xml</code> and is read-only. It shall never be modified, because it is overwritten during an upgrade. It contains all the default settings and should be sufficient to start the application.</p><p>Modifications can be done in the <code>custom-xxx.xml</code> files that are processed in alphabetic order. The modifications are done using the XDT syntax as described <a href="http://msdn.microsoft.com/en-us/library/dd465326.aspx" rel="nofollow">here</a>.</p><p>The resulting file will be written to <code>configuration.xml</code> that is actually been used. The <code>configuration.xml</code> file should never be directly altered, because it will be overwritten when the application is started again.</p><p>I think this approach will have some advantages:</p><ul><li>The default configuration can be updated during an application upgrade.</li><li>Local configuration changes can be applied and will be persisted during upgrades.</li><li>If transformation cannot be applied (syntax error) then the file is skipped, but the default configuration can always be read.</li></ul><p>There are some disadvantages too:</p><ul><li>XDT is not trivial for most users and error-prone.</li><li>Modifying the configuration from within the application is difficult, because you should write an XDT file.</li><li>Not all settings can be done outside the <code>app.config</code>, because the .NET framework looks for certain settings in this file.</li></ul><p><strong>Custom.xml only</strong></p><p>The application has default settings specified in code. These settings can be overriden by the application by using a <code>custom.xml</code> file. This has some advantages:</p><ul><li>Defaults are specified in code, so will be upgraded automatically when the application is updated.</li><li>Local configuration changes can be applied and will be persisted during upgrades.</li><li>If the <code>custom.xml</code> contains errors, then this file is skipped and the default settings can still be used.</li><li>Relatively easy to create a GUI to modify the settings and only write the non-default settings.</li></ul><p>There are some disadvantages too:</p><ul><li>There is no <code>default.xml</code>, so not all options are clearly visible in the XML file.</li><li>When the default configuration contains a list, then there is no way to remove items from the list in the <code>custom.xml</code>. Configurations should be modelled in such a way that these circumstances can be handled.</li></ul><p><strong>Wrap-up</strong></p><p>There are some different scenarios to deal with configuration files. I would like to know how you deal with configurations in situations where the configuration files need to be customized and you want to maintain automatic upgrade scenarios.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I think part of the issues you&#39;re facing is in the premise:</p><blockquote><p>Upgrading an application with a modified app.config is hard. Either it
 overwrites the existing configuration file or the upgraded app.config
 isn&#39;t installed at all.</p></blockquote><p>Don&#39;t do that, basically. Configuration is a software artefact, and it should be versioned and go through the same lifecycle as any other artefact, subject to change control and whatever other safeguards your team implements for software artefacts.</p><p>I suppose realistically, in a production environment you are likely to have hacks made to the application config to fix problems in an emergency. Ideally the immediate consequence of having to do that would be a properly-managed change that would be deployed to production formally as soon as humanly possible. Therefore a scheduled upgrade would already have this change, and regression shouldn&#39;t be a problem.</p><p>Criticising the premise probably doesn&#39;t provide an adequate answer, so could you expand your question to provide an example of the kind of settings you find to be problematic?</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../web-development-best-practice-for-configuration-files-in-a-website/'>Web-development &#8211; Best practice for configuration files in a website</a></li><li class="list-group-item"><a href='../c-should-i-have-a-separate-xml-settings-file-for-the-application/'>C# &#8211; Should I have a separate XML settings file for the application</a></li><li class="list-group-item"><a href='../best-practices-for-handling-large-number-of-structured-configuration-property-files/'>Best practices for handling large number of structured configuration/property files</a></li><li class="list-group-item"><a href='../python-how-bad-of-an-idea-is-it-to-use-python-files-as-configuration-files/'>Python &#8211; How bad of an idea is it to use Python files as configuration files</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>