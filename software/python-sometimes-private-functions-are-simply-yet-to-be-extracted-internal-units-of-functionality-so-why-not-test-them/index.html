<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Python &#8211; Sometimes private functions are simply yet-to-be-extracted internal units of functionality. So why not test them &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1085304 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1085304" class="post-1085304 software type-software status-publish hentry category-software tag-python tag-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Python &#8211; Sometimes private functions are simply yet-to-be-extracted internal units of functionality. So why not test them</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">python</span><span class="mr-2 badge badge-info">testing</span></p><div class="entry-content"><p>Sometimes private functions of a module or class are simply yet-to-be-extracted internal units of functionality, which might deserve their own tests. So why not test them? We <em>will</em> write tests for them later on if/when they&#39;re extracted. So why not write the tests now, when they&#39;re still part of the same file?</p><p>To demonstrate:</p><p><a href="../../../i.stack.imgur.com/GBL2H.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/GBL2H.png" alt="enter image description here"/></a></p><p>First, I wrote <code>module_a</code>. Now I want to write tests for it. I would like to test the &#39;private&#39; function <code>_private_func</code>. I don&#39;t understand why I wouldn&#39;t write a test for it, if later I might refactor it to its own internal module anyway, and <em>then</em> write tests for it.</p><hr/><p>Suppose I have a module with the following functions (it could be also be a class):</p><pre><code>def public_func(a):
    b = _do_stuff(a)
    return _do_more_stuff(b)
</code></pre><p><code>_do_stuff</code> and <code>_do_more_stuff</code> are &#39;private&#39; functions of the module.</p><p>I understand the idea that we should only test the public interface, not the implementation details. However, here&#39;s the thing:</p><p><code>_do_stuff</code> and <code>_do_more_stuff</code> contain the majority of the functionality of the module. Each one of them could be a public function of a different, &#39;internal&#39; module. But they are not yet evolved and large enough to be extracted to separate files.</p><p>So testing these functions feels right because they are important units of functionality. If they were in different modules as public functions, we would have tested them. So why not test them when they&#39;re not yet (or ever) extracted to a different file?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>The need to test is not the same as the need to be public.</strong></p><p>Non trivial code needs testing regardless of exposure.  Non public behavior doesn&#39;t need to exist let alone be tested.</p><p>These conflicting views can lead you to want to make every function public or refuse to factor out code into a function unless it will be public.</p><p>This is not the answer.  Be willing to create private helper functions.  Test them through the public interface that uses it as much as possible.</p><p>If testing through the public interface doesn&#39;t exercise the private function sufficiently the private function is trying to allow to much.</p><p>Validation can help narrow what the private function allows.  If you can&#39;t pass a null going through the public interface you can still throw an exception if one comes through anyway.</p><p>Why should you?  Why test what you&#39;ll never see? Because things change.  It may be private now but be public later. The calling code could change.  Code that explicitly rejects null makes proper usage and expected state clear.</p><p>Of course null could be fine. It&#39;s just an example here.  But if you expect something, it&#39;s useful make that expectation clear.</p><p>That might not be the kind of testing you had in mind but hopefully you&#39;ll be willing to create private helper functions when appropriate.</p><p>The desire to test is good but it shouldn&#39;t be the driving force in the design of your public API.  Design the public API to be easy to use.  It likely won&#39;t be if every function is public.  The API should be something people can understand how to use without diving into the code.  Don&#39;t leave such people wondering what this weird helper function is for.</p><p>Hiding public helper functions in an internal module is an attempt to respect the need for a clean API while exposing helpers for testing.  I won&#39;t say this is wrong.  You might be taking the first step towards a different architectural layer. But please, master the art of testing private helper functions through the public functions that use them first.  That way you won&#39;t over use this workaround.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-unit-testing-internal-components/'>Unit-testing &#8211; Unit testing internal components</a></li><li class="list-group-item"><a href='../unit-testing-unit-testing-module-internal-functions/'>Unit-testing &#8211; Unit Testing Module-Internal Functions</a></li><li class="list-group-item"><a href='../how-to-name-test-projects/'>How to name Test Projects</a></li><li class="list-group-item"><a href='../python-the-best-most-pythonic-way-to-mock-a-private-function/'>Python &#8211;  the best/most Pythonic way to mock a private function</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>