<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Best practices for adding Node.JS build features to a non-Node project &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084852 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084852" class="post-1084852 software type-software status-publish hentry category-software tag-builds tag-node-js tag-project-structure"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Best practices for adding Node.JS build features to a non-Node project</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">builds</span><span class="mr-2 badge badge-info">node.js</span><span class="mr-2 badge badge-warning">project-structure</span></p><div class="entry-content"><p>The primary use for Node.JS is of course as a full server stack, and I&#39;ve used it in that manner to great success.</p><p>However, a number of useful, interesting NPM packages deal with things like transpiling a styling language, adding typing information to typeless JavaScript, running JavaScript unit tests, even having a &#34;piped&#34; build system like Gulp.</p><p>Currently, I work on a project that uses Tomcat, and is primarily written in Java. Java and Ant utilities have felt somewhat limiting in terms of interacting with our JavaScript files when building/testing, so I&#39;m looking into the possibility of adding a dependency on NodeJS, and setting up build dependencies.</p><h2>Why would I do this?</h2><p>I distinctly want to avoid adding dependencies &#34;because they&#39;re cool&#34;. I only want to add Node packages for scenarios where it is infeasible, or even deprecated, to solve particular problems using Java-based programs (eg, Ant).</p><p>One example: Our JavaScript widget library, Dojo, has stated they will not support doing Dojo builds via Java for much longer, having largely moved to Node builds. Additionally, some CSS compression toolkits run using Java have stopped being maintained in favor of those like LESS. There are also developer tools like JavaScript unit tests, or TypeScript types we&#39;d like to consider to make development more reliable. Using a dependency manager <em>might</em> also help us engineer a solution where we don&#39;t have Dojo&#39;s entire source code committed to our repository.</p><h2>The question: Proper project layout and potential pitfalls</h2><p>What would be some reliable practices to follow if I want to use Node as a build/test/development dependency, but not require it for the final, packaged app (And, pros/cons of different approaches)? In this scenario, does it actually make sense to include a package.json in the root project hierarchy? Should Node-related build tasks be invoked via Ant, or does it make sense to require separate commandline actions to invoke them? Under what scenarios should developers/build machines run &#34;npm install&#34;, and should it always be automated?</p><p>If based on experience people tend to find that the answer to those questions don&#39;t matter, that is also a helpful answer &#8211; but I&#39;m asking for experience to hopefully avoid some design pitfalls.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Having both share the same root is fine. <a href="https://github.com/apache/freemarker-docgen" rel="nofollow noreferrer">Apache Freemarker Docgen</a> uses this structure. Invoking the JavaScript build from within the Java build is the standard. Running <code>npm install</code> can be decided programmatically by the Java build. For example, in Maven:</p><pre><code>&lt;plugin&gt;
    &lt;groupId&gt;com.github.eirslett&lt;/groupId&gt;
    &lt;artifactId&gt;frontend-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;0.0.27&lt;/version&gt;

    &lt;executions&gt;

      &lt;execution&gt;
        &lt;id&gt;install node and npm&lt;/id&gt;
        &lt;goals&gt;
          &lt;goal&gt;install-node-and-npm&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;nodeVersion&gt;v4.2.1&lt;/nodeVersion&gt;
          &lt;npmVersion&gt;3.5.3&lt;/npmVersion&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;

      &lt;execution&gt;
        &lt;id&gt;npm install&lt;/id&gt;
        &lt;goals&gt;
          &lt;goal&gt;npm&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;arguments&gt;install&lt;/arguments&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;

      &lt;execution&gt;
        &lt;id&gt;npm run build&lt;/id&gt;
        &lt;goals&gt;
          &lt;goal&gt;npm&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;arguments&gt;run build&lt;/arguments&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;

    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre><p><strong>References</strong></p><ul><li><a href="https://github.com/apache/freemarker-docgen" rel="nofollow noreferrer">Apache Freemarker Docgen</a></li><li><p><a href="https://devcenter.heroku.com/articles/using-grunt-with-java-and-maven-to-automate-javascript-tasks" rel="nofollow noreferrer">Using Grunt with Java and Maven to Automate JavaScript Tasks</a></p></li><li><p><a href="http://justincalleja.com/2016/04/17/serving-a-webpack-bundle-in-spring-boot/" rel="nofollow noreferrer">Serving a Webpack bundle in Spring Boot</a></p></li><li><p><a href="https://medium.com/spektrakel-blog/angular-in-the-enterprise-building-angular-apps-through-maven-3ca535152f85" rel="nofollow noreferrer">Angular in the Enterprise: Building Angular Apps through Maven</a></p></li><li><p><a href="https://auth0.com/blog/integrating-node-dot-js-build-tools-with-maven/" rel="nofollow noreferrer">Integrating Node.js Build Tools with Maven</a></p></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../best-practice-for-multi-module-design-local-dependencies/'>Best practice for multi-module design local dependencies</a></li><li class="list-group-item"><a href='../managing-private-npm-packages-and-ci-cd/'>Managing private NPM packages and CI/CD</a></li><li class="list-group-item"><a href='../best-practices-for-docker-image-node-version-and-nvmrc/'>Best practices for Docker image node version and .nvmrc</a></li><li class="list-group-item"><a href='../c-best-practice-of-c-c-dependency-management-on-build-servers/'>C++ &#8211; Best practice of c/C++ dependency management on build servers</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>