<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>TODO comments with deadlines &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1068230 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1068230" class="post-1068230 software type-software status-publish hentry category-software tag-comments tag-continuous-integration tag-continuous-delivery tag-deployment"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">TODO comments with deadlines</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">comments</span><span class="mr-2 badge badge-info">continuous integration</span><span class="mr-2 badge badge-warning">continuous-delivery</span><span class="mr-2 badge badge-primary">deployment</span></p><div class="entry-content"><h2>Background</h2><p>I&#39;m working in a team that&#39;s looking to implement zero-downtime deployments. We&#39;re planning on using a blue/green deployment strategy in order to achieve this. One of the things I&#39;m realising in doing the research is how complicated it becomes to make database changes. A simple operation like renaming a column can take <a href="https://spring.io/blog/2016/05/31/zero-downtime-deployment-with-a-database" rel="noreferrer">3 full release cycles</a> until it&#39;s completed!</p><p>It seems to me that having the full rollout of a change take multiple release cycles introduces a lot of potential for human error. In the linked article it shows that code changes are necessary for 2 releases and a database migration is needed for 3 releases.</p><h2>What I&#39;m looking for</h2><p>Currently, if we want to remember to do something, we can create a ticket in our issue management system, which creates clutter and also might get moved to a later sprint or the backlog by management; or we can create a TODO comment, which will probably be forgotten about completely.</p><p>What I&#39;m looking for is a way that a TODO comment can have a deadline against it, and our Continuous Integration system (current undecided which we&#39;ll use) would reject the build if this deadline was expired.</p><p>For example, if we rename a column we could create the initial migration for it, and then two TODO comments to ensure that the remaining two migrations are created:</p><pre><code>// TODO by v55: Create migration to move constraints to new column, remove references to old column in app
// TODO by v56: Create migration to drop old column
</code></pre><p>This seems fairly simple to implement, but I&#39;m wondering if something like this already exists, because I don&#39;t want to re-invent the wheel.</p><h2>Additional thoughts</h2><p>I feel like I might be suffering from XY problem here, given that rolling deployments and blue/green deployments are considered a best-practice it seems strange that I can&#39;t find a solution for making database updates less painful. If you think I&#39;m looking into the wrong thing entirely, please let me know in a comment! That said, the database example I gave is just one example, and I think TODO comments with due dates would be useful in other situations too, so even if I&#39;m approaching this specific situation all wrong I&#39;d really like to answers to my actual question too. Thanks!</p><p>EDIT: I just thought of another situation where this could be helpful. If you use Feature Toggles to turn on parts of your app when they are ready, you have to be careful to clean them up, otherwise you may end up with <a href="https://dzone.com/articles/feature-toggles-are-one-worst" rel="noreferrer">Toggle Debt</a>. Comments with deadlines could be a good way of remembering this.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>This question is really two questions in one.</p><h2>Todo comments</h2><p>Of all the ways to track action items, this is the worst.  TODO comments are good during active work or as a way of suggestion to a maintainer, &#34;here is something that could maybe be improved on in the future&#34;.  But if you rely on TODO comments for getting work done, you&#39;re doomed to fail.</p><p><strong>What to do about it</strong></p><p>TODO comments are basically technical debt, so they should be handled like any other technical debt.  Either tackle them right away, if you have time, or put them in the backlog so they can be tracked and prioritized.</p><p>Generally speaking, and this is totally opinionated and open for debate, TODO comments could be considered a code smell.  If a TODO comment makes it as far as being checked into version control, you have to ask yourself, are you actually going to follow through on it right now?  If not, that&#39;s ok.  Just be honest with yourself and put it in the backlog.</p><p>How you manage this backlog comes down to business process, company politics, and perhaps some personal autonomy.  But you still need a tracked and prioritized backlog to make sure it happens.</p><h2>Database changes</h2><p>Yes, database changes are tricky with a zero-downtime policy.  Some tricks to help make it less painful:</p><p><strong>Post-deploy process</strong></p><p>Create a post-deploy process that runs as part of the same release.  However you want it to work.  On the last system I worked on, I designed a 4-phase deployment:</p><ol><li>preapp database scripts</li><li>web apps</li><li>postapp database scripts</li><li>maintenance window database scripts</li></ol><p>The idea was that wherever possible, we would put as much of the database changes into preapp as possible.</p><p>Postapp was reserved for the unusual cases where we needed to make incompatible schema changes.  In those cases, preapp would make enough of a change to make the new application code compatible (maybe creating a temporary view for compatibility), and postapp would cleanup any such temporary artifacts.</p><p>Maintenance window phase was reserved for changes which truly required downtime or where the risk or cost of a live deployment was not worth it.  For example, scripts that change massive amounts of data may need to lock an entire table.</p><p><strong>Deploy frequently</strong></p><p>If you deploy new releases frequently enough, you can reach a point where carrying a change across 2 or 3 releases is trivial.  Long release cycles amplify the cost of database changes.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-should-i-comment-tables-or-columns-in-the-database/'>Database &#8211; Should I comment Tables or Columns in the database</a></li><li class="list-group-item"><a href='../architecture-blue-green-deployment-with-single-database/'>Architecture &#8211; Blue Green Deployment With Single Database</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>