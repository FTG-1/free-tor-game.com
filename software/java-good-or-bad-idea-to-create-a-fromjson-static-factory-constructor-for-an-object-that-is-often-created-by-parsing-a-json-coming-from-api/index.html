<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Good or bad idea to create a &#8220;fromJSON&#8221; static factory constructor for an object that is often created by parsing a JSON coming from API &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1071956 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1071956" class="post-1071956 software type-software status-publish hentry category-software tag-java tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Good or bad idea to create a &#8220;fromJSON&#8221; static factory constructor for an object that is often created by parsing a JSON coming from API</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">java</span><span class="mr-2 badge badge-info">object-oriented</span></p><div class="entry-content"><p>I have a &#34;Product&#34; POJO class in my app.<br /> A Product object can either be created in-app by the user or by parsing a json that comes from the API.</p><p>Product has 20+ fields, but Im using only 2 here for clarity</p><p>Example:</p><pre><code>JSON productJSON = networkCommunicator.getJSONFromStream();

Product product = new Product();
product.setId(productJSON.getInt(&#34;id&#34;);
product.setName(productJSON.getString(&#34;name&#34;);
</code></pre><p>I want to create a fromJSON constructor in the Product class, but I dont know whether it is a good idea, because it couples the Product class to the API implementation of the JSON structure and the names of the keys in the JSON:</p><pre><code>class Product {

    private int id;
    private String name;


    public Product(int id, String name) {
        this.id = id;
        this.name = name;
    }

    public static Product fromJSON(JSONObject jsonObject) {
        return new Product(jsonObject.getInt(&#34;id&#34;), jsonObject.getString(&#34;name&#34;);
    }

}
</code></pre><p>This will make parsing the JSON coming from server much cleaner.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You&#39;ll get into religious wars here, but let me say that I am on the &#34;ignore SRP&#34; side on this one.  Yes, you are coupling to a specific Serialization scheme, as correctly pointed out by @amon.  But, in this example, you are coupling to a very <em>abstract</em> and <em>standard</em> scheme, which makes it &#34;o.k.&#34;.  Lots of Java classes have <code>valueOf(String)</code>, and all have <code>toString()</code>, and the world hasn&#39;t ended due to lack of SRP.</p><p>SRP exists not because SRP itself a goal, but because SRP lessens the effect of change, an admirable goal.  In this example, what is more likely to change?</p><ol><li><code>Product</code>, e.g. by adding a new field named <code>newFeature</code>, changing it to an array, etc...  or</li><li>The JSON specification and library that you use.</li></ol><p>In my experience, &#34;#1&#34; is always the right answer.  YMMV.</p><p>If <code>Product</code> changes, and <code>fromJSON()</code> is a method of <code>Product</code>, <strong>one</strong> class changes.  And it was going to change anyway, so there&#39;s no &#34;extra&#34; change.  Also, you <em>could</em> keep the new fields of <code>Product</code> <strong>private</strong> and <strong>final</strong>, increasing data-hiding and thread-safety.</p><p>OTOH, if you are using a <code>ProductBuilder</code> or <code>ProductSerializer</code> layer, then <strong>two</strong> classes change.  You are adding stuff about <code>newFeature</code> in multiple places, which violates <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="nofollow">DRY</a>.  It is trickier to keep the new field private and final.  It is just plain <em>extra work and tedium for little or no benefit</em>, violating <a href="http://www.lean.org/WhatsLean/Principles.cfm" rel="nofollow">LEAN</a> or <a href="http://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it" rel="nofollow">YAGNI</a>.  See, I can cite principles too.  :-)</p><p>One more thing:  consider making <code>fromJSON</code> a real instance method, not a static class function.  (It still returns a <em>new</em> Product object)   Yes, it feels weird, and you may decide against it.  But we &#34;just tried it&#34; in one project and it was wonderful.  You may need to add a <code>final static Product.PROTOTYPE</code> (or similar - maybe call it builder?).  But, it opens up some good features:</p><ol><li>It can go into an interface, <code>JSONable</code>.  Static methods cannot be in an interface</li><li>Now you can have a <code>Collection&lt;JSONable&gt;</code> which suddenly does a lot for you.</li><li>You can provide a testing version, a mock version, etc.  If there is a class for which @amon is right and you really do want to decouple the logic into a <code>ProductBuilder</code>, you could call it here.</li></ol><p><strong><em>Caveats</em></strong>:</p><p>If you do change JSON libraries, you will have to change a lot of your classes, so be sure to write them in an intelligent way so that the JSON code is abstracted, as it should be, and as all the libraries do.  This is easy.</p><p>And, if you were serializing to some weird, offbeat, non-standard, very specific, and likely to change format, yes, then I agree with @amon that the code should be separated.  Or it you were tracking somebody else&#39;s JSON and they kept changing the names of their field, that would be an issue.  Or if the parsing is exceedingly complex, involves combining / &#34;joining&#34; a couple of JSON streams, etc.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/java-object-oriented-class-design/'>Java &#8211; Object-Oriented Class Design</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-how-to-decouple-simple-factory-and-default-implementation/'>Java &#8211; How to decouple simple factory and default implementation</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-how-should-i-design-json-serializable-data-classes-to-respect-future-nonnull-fields/'>Java &#8211; How Should I Design JSON Serializable Data Classes To Respect Future @NonNull Fields</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/object-oriented-avoiding-constructors-with-many-arguments/'>Object-oriented &#8211; Avoiding constructors with many arguments</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>