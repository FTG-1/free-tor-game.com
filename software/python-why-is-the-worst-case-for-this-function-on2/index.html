<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Python &#8211; Why is the worst case for this function O(n^2) &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1068441 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1068441" class="post-1068441 software type-software status-publish hentry category-software tag-big-o tag-python"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Python &#8211; Why is the worst case for this function O(n^2)</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">big o</span><span class="mr-2 badge badge-info">python</span></p><div class="entry-content"><p>I&#39;m trying to teach myself how to calculate BigO notation for an arbitrary function. I found this function in a textbook. The book asserts that the function is O(n<sup>2</sup>). It gives an explanation as to why this is, but I&#39;m struggling to follow. I wonder if someone might be able to show me the math behind why this is so. Fundamentally, I understand that it is something less than O(n<sup>3</sup>), but I couldn&#39;t independently land on O(n<sup>2</sup>)</p><blockquote><p>Suppose we are given three sequences of numbers, A, B, and C. We will<br /> assume that no individual sequence contains duplicate values, but that<br /> there may be some numbers that are in two or three of the sequences.<br /> The three-way set disjointness problem is to determine if the<br /> intersection of the three sequences is empty, namely, that there is no<br /> element x such that x ∈ A, x ∈ B, and x ∈ C.</p></blockquote><p>Incidentally, this is not a homework problem for me &#8212; that ship has sailed years ago : ), just me trying to get smarter.</p><pre><code>def disjoint(A, B, C):
        &#34;&#34;&#34;Return True if there is no element common to all three lists.&#34;&#34;&#34;  
        for a in A:
            for b in B:
                if a == b: # only check C if we found match from A and B
                   for c in C:
                       if a == c # (and thus a == b == c)
                           return False # we found a common value
        return True # if we reach this, sets are disjoint
</code></pre><p>[Edit]<br /> According to the textbook:</p><blockquote><p>In the improved version, it is not simply that we save time if we get<br /> lucky. We claim that the worst-case running time for disjoint is<br /> O(n<sup>2</sup>).</p></blockquote><p>The book&#39;s explanation, which I struggle to follow, is this:</p><blockquote><p>To account for the overall running time, we examine the time spent<br /> executing each line of code. The management of the for loop over A<br /> requires O(n) time. The management of the for loop over B accounts for<br /> a total of O(n<sup>2</sup>) time, since that loop is executed n different times.<br /> The test a == b is evaluated O(n<sup>2</sup>) times. The rest of the time spent<br /> depends upon how many matching (a,b) pairs exist. As we have noted,<br /> there are at most n such pairs, and so the management of the loop over<br /> C, and the commands within the body of that loop, use at most O(n<sup>2</sup>)<br /> time. The total time spent is O(n<sup>2</sup>).</p></blockquote><p>(And to give proper credit &#8230;) The book is:<br /> Data Structures and Algorithms in Python by Michael T. Goodrich et. all, Wiley Publishing, pg. 135</p><p>[Edit] A justification; Below is the code before optimization:</p><pre><code>def disjoint1(A, B, C):
    &#34;&#34;&#34;Return True if there is no element common to all three lists.&#34;&#34;&#34;
       for a in A:
           for b in B:
               for c in C:
                   if a == b == c:
                        return False # we found a common value
return True # if we reach this, sets are disjoint
</code></pre><p>In the above, you can clearly see that this is O(n<sup>3</sup>), because each loop must run to its fullest. The book would assert that in the simplified example (given first), the third loop is only a complexity of O(n<sup>2</sup>), so the complexity equation goes as k + O(n<sup>2</sup>) + O(n<sup>2</sup>) which ultimately yields O(n<sup>2</sup>).</p><p>While I cannot prove this is the case (thus the question), the reader can agree that the complexity of the simplified algorithm is at least less than the original.</p><p>[Edit] And to prove that the simplified version is quadratic:</p><pre><code>if __name__ == &#39;__main__&#39;:
    for c in [100, 200, 300, 400, 500]:
        l1, l2, l3 = get_random(c), get_random(c), get_random(c)
        start = time.time()
        disjoint1(l1, l2, l3)
        print(time.time() - start)
        start = time.time()
        disjoint2(l1, l2, l3)
        print(time.time() - start)
</code></pre><p>Yields:</p><pre><code>0.02684807777404785
0.00019478797912597656
0.19134306907653809
0.0007600784301757812
0.6405444145202637
0.0018095970153808594
1.4873297214508057
0.003167390823364258
2.953308343887329
0.004908084869384766
</code></pre><p>Since the second difference is equal, the simplified function is indeed quadratic:</p><p><a href="../../../i.stack.imgur.com/em5nT.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/em5nT.png" alt="enter image description here"/></a></p><p>[Edit] And yet even further proof:</p><p>If I assume worst case (A = B != C),</p><pre><code>if __name__ == &#39;__main__&#39;:
    for c in [10, 20, 30, 40, 50]:
        l1, l2, l3 = range(0, c), range(0,c), range(5*c, 6*c)
        its1 = disjoint1(l1, l2, l3)
        its2 = disjoint2(l1, l2, l3)
        print(f&#34;iterations1 = {its1}&#34;)
        print(f&#34;iterations2 = {its2}&#34;)
        disjoint2(l1, l2, l3)
</code></pre><p>yields:</p><pre><code>iterations1 = 1000
iterations2 = 100
iterations1 = 8000
iterations2 = 400
iterations1 = 27000
iterations2 = 900
iterations1 = 64000
iterations2 = 1600
iterations1 = 125000
iterations2 = 2500
</code></pre><p>Using the second difference test, the worst case result is exactly quadratic.</p><p><a href="../../../i.stack.imgur.com/DxLjQ.png" rel="noreferrer"><img src="../../../i.stack.imgur.com/DxLjQ.png" alt="enter image description here"/></a></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The book is indeed correct, and it provides a good argument. Note that timings are not a reliable indicator of algorithmic complexity. The timings might only consider a special data distribution, or the test cases might be too small: algorithmic complexity only describes how resource usage or runtime scales beyond some suitably large input size.</p><p>The book makes the argument that complexity is O(n²) because the <code>if a == b</code> branch is entered at most <em>n</em> times. This is non-obvious because the loops are still written as nested. It is more obvious if we extract it:</p><pre><code>def disjoint(A, B, C):
  AB = (a
        for a in A
        for b in B
        if a == b)
  ABC = (a
         for a in AB
         for c in C
         if a == c)
  for a in ABC:
    return False
  return True
</code></pre><p>This variant uses generators to represent intermediate results.</p><ul><li>In the generator <code>AB</code>, we will have <em>at most</em> <em>n</em> elements (because of the guarantee that input lists won&#39;t contain duplicates), and producing the generator takes O(n²) complexity.</li><li>Producing the generator <code>ABC</code> involves a loop over the generator <code>AB</code> of length <em>n</em> and over <code>C</code> of length <em>n</em>, so that its algorithmic complexity is O(n²) as well.</li><li>These operations are not nested but happen independently, so that the total complexity is O(n² + n²) = O(n²).</li></ul><p>Because pairs of input lists can be checked sequentially, it follows that determining whether any number of lists are disjoint can be done in O(n²) time.</p><p>This analysis is imprecise because it assumes that all lists have the same length. We can say more precisely that <code>AB</code> has at most length min(|A|, |B|) and producing it has complexity O(|A|•|B|). Producing <code>ABC</code> has complexity O(min(|A|, |B|)•|C|). Total complexity then depends how the input lists are ordered. With |A| ≤ |B| ≤ |C| we get total worst-case complexity of O(|A|•|C|).</p><p>Note that efficiency wins are possible if the input containers allow for fast membership tests rather than having to iterate over all elements. This could be the case when they are sorted so that a binary search can be done, or when they are hash sets. Without explicit nested loops, this would look like:</p><pre><code>for a in A:
  if a in B:  # might implicitly loop
    if a in C:  # might implicitly loop
      return False
return True
</code></pre><p>or in the generator-based version:</p><pre><code>AB = (a for a in A if a in B)
ABC = (a for a in AB if a in C)
for a in ABC:
  return False
return True
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../algorithms-how-to-sum-on-and-onlogn-together/'>Algorithms: How to sum O(n) and O(nlog(n)) together</a></li><li class="list-group-item"><a href='../python-check-distance-between-all-elements-in-a-list-of-numbers-in-onlgn/'>Python &#8211; Check distance between all elements in a list of numbers in O(n*lg(n))</a></li><li class="list-group-item"><a href='../python-a-proper-way-to-structure-a-python-project-consisting-of-smaller-packages-that-have-shared-code/'>Python &#8211;  a proper way to structure a Python project consisting of smaller packages that have shared code</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>