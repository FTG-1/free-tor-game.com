<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Architecture / Design Pattern for Login Signup &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075145 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075145" class="post-1075145 software type-software status-publish hentry category-software tag-mvc tag-object-oriented tag-php tag-solid"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Architecture / Design Pattern for Login Signup</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">mvc</span><span class="mr-2 badge badge-info">object-oriented</span><span class="mr-2 badge badge-warning">PHP</span><span class="mr-2 badge badge-primary">solid</span></p><div class="entry-content"><p>I have a multi-seller ecommerce platform, derived out of <a href="https://www.opencart.com/" rel="nofollow noreferrer">Opencart 2.3</a>. We changed quite a bit of the core code of the Opencart to add our own customizations, including features such as Seller Dashboard (where a seller can check orders, generated invoices for them, etc etc). <a href="http://www.techchattr.com/never-use-opencart" rel="nofollow noreferrer">Repetition of code and lack of basic OOPs principles like Abstraction in Opencart</a>, have been discussed quite in detail.</p><p>Now, as we scale up, we are looking at rewriting it. We are currently starting with Login/Signup module. A customer or a seller can login/signup using the same form. We will be using cookie based token validation for login. We will also be maintaining different tokens for different devices/browsers/Android Apps of the customer, so that he can remain logged in at one place, while logging out from the other. Depending on whether a customer/seller logs in, it will redirect to appropriate page.</p><p>I am thinking of following Class structure:</p><pre><code>Login Class {
  public login();
  public logout();
  public validate();
}
Signup Class extends Login Class {
  public login();
  public logout();
  public validate();
  public signup();
}
</code></pre><p>Login Controller will create object of Signup Class, and call login/signup/validate methods. Depending on the login/validate results, it will return appropriate object (Customer or Seller).</p><p>Am I thinking on the right lines ? Are there any Design Patterns to achieve this ?</p><p>Sorry, if question looks too broad or convoluted. Kindly let me know. I will be very happy to further elaborate the specific details of my case. Thanks in Advance.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Considerations from your questions <em>and comments</em>.</p><p><strong>Tight Coupling:</strong></p><p>You stated:</p><blockquote><p>(1) Login Controller will create object of Signup Class<br/> (2) A customer or a seller can login/signup using the same form.</p></blockquote><p>(1) is tightly coupling two parts of the system in a way which they don&#39;t belong together.</p><p>(1) also contradicts the code example you have:</p><pre><code>Signup Class extends Login Class 
</code></pre><p>As the two are opposite approaches.</p><p>I can understand the thought as to why they&#39;re related/joined as per (2), as you are using Login things in Signup together, and they  have some real world similarity in that Signup and Login have some shared notions to the end user. You also want to check they&#39;re not logged in before signing them up.</p><p>For checking they&#39;re not logged in, this is possibly something that happens on all pages, so you would already know. But if not, then the Signup controller would call a separate service to find out if they are logged in. This other service would be re-used on various pages, so you define once in one class what is &#34;logged in&#34; and it&#39;s re-used throughout your code.</p><p>Classes do have dependencies all the time, bringing other objects in (eg via <a href="https://en.wikipedia.org/wiki/Dependency_injection" rel="nofollow noreferrer">DI</a>) however, in this case in the system these <em>controllers</em> are not directly related at all.</p><p>Bringing objects into a class is one thing and will often have some form of coupling. Classes will have dependencies from other parts of the system otherwise we&#39;d not be able to adhere to <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle" rel="nofollow noreferrer">SRP</a>. But &#34;extend&#34; is a <em>very</em> tightly coupled relationship and shouldn&#39;t be seen as some kind of first port of call a developer should do <em>unless</em> there is very good reason, and then it&#39;s usually very obvious.</p><p>Classes can only extend one class. Signup has used that privilege with &#34;Login Class&#34;. But doesn&#39;t Signup class need a validation class to validate the Signup form data? And a database class (eg a service calling a repository), to determine if the username is not in use? Etc.</p><p>So why extend Login class instead of database class? Well the answer is not &#34;which is more important to choose which to extend&#34; but &#34;should this be coupled or not&#34;. Chances are you don&#39;t extend any of these, you would use <a href="https://en.wikipedia.org/wiki/Object_composition" rel="nofollow noreferrer">composition</a>.</p><p>A good but <a href="https://stackoverflow.com/a/39299159/2632129">simple example of Composition</a><br/> Also see <a href="https://en.wikipedia.org/wiki/Composition_over_inheritance" rel="nofollow noreferrer">Composition over Inheritance</a></p><p>Â </p><p>Re your statement (1) - You cannot login before signing up, so Login has no business asking Signup to come to its party as then you&#39;re stating that Login is in charge of Signup, which is very wrong.</p><p>It would arguably be more logical to state the other way around &#34;Signup gets a Login object&#34; (re your code example), but in fact even Signup has no business asking Login to come to its party even when Signup is completed. This is because they are separate parts of the system, and Signup does not <em>need</em> Login to handle it&#39;s own <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle" rel="nofollow noreferrer">single responsibility</a> - Signup!</p><p><em>The requirements are separately &#34;Signup&#34; then &#34;Login&#34;, so combining those specific requirements is &#34;Login after Signup&#34;, not &#34;use Signup to be able to eventually Login&#34;.</em></p><p>This said, Login and Signup should share some common ground from the system, such as using the same code for Login form and user credential validation, as these should be shared for re-use to maintain <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="nofollow noreferrer">DRY</a>. However such a common ground does not mean you should pin the controlling classes together like this (1) or even bring in an instance of the other&#39;s object.</p><p>In some cases some sort of mediator might make sense, that would bring together shared requirements and objects (such as a service), but in this case you&#39;d just <em>hand over</em> to the next part of the system to log the user in after Signup.</p><p>In a different slightly <em>stretched</em> example just to reiterate the above point:</p><p>Say you send them to the UserProfile page after Login, you wouldn&#39;t bring the UserLogin object into the UserProfilePageController so that once Login is done the system is already in the profile controller ready to go.</p><p>The login system would be called, and then the login controller would hand over to whatever resource was requested - a page prior to Login that redirected them to Login, or simply the user profile page, etc. (Although this is more likely to be something else controlling this, front controller or internal wiring etc.)</p><p>Â </p><hr/><p><strong>Is tightly coupled so bad?</strong></p><p>The problem with tightly coupling these things together with (statement 1) is when you just want to simply log someone in (they signed up months ago) your Login is still bringing in Signup object when you don&#39;t need it.</p><p>Or worse/equally as bad, you have to make a 2nd Login class just for pure Login that is not coupled to Signup. Then you have violated <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="nofollow noreferrer">DRY</a> as the two Login classes will be doing the same thing, they&#39;re just duplicated to (wrongly) cater for your bad design in coupling things.</p><p>The other issue is when you want to refactor the Login or the Signup you have to consider the other one because they&#39;re tightly coupled to each other&#39;s objects.</p><p>Of course such tight coupling can be valid, and dependencies are very much shared between classes. The key is good separation and de-coupling wherever possible means parts of the system run independent of each other and changes only effect that one part of the system.</p><p>Â </p><hr/><p><strong>The likely better approach:</strong></p><p><em>Signup Request</em></p><ol><li>Request and display <code>SignupForm</code> and <code>LoginForm</code></li><li>Pass entered data to <code>SignupFormValidation</code> and <code>LoginFormValidation</code></li><li>If errors show them [back to 1]</li><li>Register them</li><li>Hand over to the Login system (however your system does this, but not by having an instance of Login in the Signup class, probably a mediator service)</li></ol><p><em>Login Request</em></p><ol><li>Request and display <code>LoginForm</code></li><li>Pass entered data to <code>LoginFormValidation</code></li><li>If errors show them [back to 1]</li><li>Log them in</li></ol><p>See how Signup and Login both call the same <code>LoginForm</code> and <code>LoginFormValidation</code>? This means (e.g.) if you decide that username can be 20 chars instead of 18, you make change in a centralised place (<code>LoginForm</code> and <code>LoginFormValidation</code>) and Signup and Login both inherit the same changes.</p><p>To log them in when they&#39;ve signed up, I would suggest a mediator of some kind, such as a service. Probably called something like <code>LoginAfterSignupService</code> (I&#39;m open to this being debated as there may be a better approach).</p><p>Signup will pass the username and password to this service who&#39;s job is to hand over to the Login system. It will pass the username/password (etc) to the Login system , which will just do it&#39;s normal thing and verify the username and password and log them in.</p><p>The login system will always need a username and password to verify the user, whether than comes from a login form or a mediator service that the signup system can call  shouldn&#39;t matter. The login system shouldn&#39;t care <em>where</em> that comes from.</p><p>The reason I suggested a mediator service instead of Signup just handing over to the login system is because you need something to handle the specific case that, we&#39;re not on a login page, we&#39;re not on Signup, we&#39;re in the middle. So if login fails you are in a separate service who&#39;s job is solely to handle the middle ground of &#34;login after signup&#34; and can do some specific checks if login returns false (fails).</p><p>For example, login page would just state &#34;sorry wrong username or password&#34;, but we&#39;ve just signed up and that message would be confusing to the user. The specific service could instead handle it more appropriately (whatever would be appropriate depends on your system).</p><p>Â </p><hr/><p>Quick note on your code in your question:</p><p>Sorry but this is a bad smell:</p><pre><code>Login Class {
  public login();
  public logout();
</code></pre><p>&#34;Login&#34; class should not have a method &#34;Logout&#34;. The code to use this would look awkward:</p><pre><code>$login = new Login();
$logout = $login-&gt;logout();

// Method chaining would be worse
$logout = new Login()-&gt;logout();
</code></pre><p>Just make a separate logout class so you would do this:</p><pre><code>$logout = new Logout();
$logout = $logout-&gt;logout();

// Method chaining would be nice to use
$logout = new Logout()-&gt;logout();
</code></pre><p>You may find now or in the future that your logout process changes, to sending an email, or checking something specific (etc etc). If this is a class these new requirements are valid methods in that class. If &#34;logout&#34; is a method in &#34;login&#34; class, apart from being a violation of <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle" rel="nofollow noreferrer">SRP</a>, you now have to stuff all kinds of &#34;logout&#34; requirements into a single &#34;logout&#34; method in the &#34;login&#34; class.</p><p>Â </p><hr/><p>This is very roughly what I think it would look like</p><pre><code>class SignUp
{
    public function __construct(
        IsUserLoggedIn $isUserLoggedIn,
        LogUserInAfterSignupService $logUserInAfterSignup,
        RegisterNewUserService $registerNewUser
    ) {
        $this-&gt;isUserLoggedIn = $isUserLoggedIn;
        $this-&gt;logUserIn = $logUserInAfterSignup;
        $this-&gt;registerNewUserService = $registerNewUser;
    }

    public function signupAction(
        SignupForm $signupForm,
        SignupValidation $signupValidation,
        LoginForm $loginForm,
        LoginValidation $loginValidation
    ) {
        if ($this-&gt;isUserLoggedIn() === true) {
            // Probably show a view page telling them they&#39;re already logged in
        }

        // If no form data, pass to view the $signupForm and $loginForm

        // If form data
          // Pass relevant data to $signupValidation and $loginValidation
          // Show errors if exist

        // If form data and no errors
          $userId = $this-&gt;registerNewUser($formData);
          $this-&gt;logUserIn($userId);

        // Redirect to wherever

    }

    private function isUserLoggedIn()
    {
        return $this-&gt;isUserLoggedIn-&gt;userLoggedIn();
    }

    private function registerNewUser($formData)
    {
        // Call a service that calls a repository that insert form data (etc)
       // registerNewUserService would return the new user ID
        return $this-&gt;registerNewUserService-&gt;registerNewUser($formData);
    }

    private function logUserIn($userId)
    {
        $this-&gt;logUserIn-&gt;logInUser($userId);
    }
}
</code></pre><p>You&#39;d probs want some sanity checking in there, and throw some exceptions perhaps (or the services this class calls might throw them, like in the RegisterUserService and LogUserInAfterSignupService).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-design-pattern-for-handling-a-response/'>Object-oriented &#8211; Design pattern for handling a response</a></li><li class="list-group-item"><a href='../php-ny-design-pattern-except-mvc-for-web/'>Php &#8211; ny design pattern except MVC for web</a></li><li class="list-group-item"><a href='../object-oriented-how-exactly-to-use-the-mvc-design-pattern/'>Object-oriented &#8211; How exactly to use the MVC design pattern</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>