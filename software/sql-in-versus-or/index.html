<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>SQL IN() versus OR &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064635 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064635" class="post-1064635 software type-software status-publish hentry category-software tag-speed tag-sql"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">SQL IN() versus OR</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">speed</span><span class="mr-2 badge badge-info">sql</span></p><div class="entry-content"><p>I was working with a query I wrote today had to change the code from the <code>WHERE</code> clause to use a IN(list of stuff) filter instead of using something like</p><pre><code>item_desc = &#39;item 1&#39;
OR item_desc = &#39;item 2&#39;
OR item_desc = &#39;item 3&#39;
OR item_desc = &#39;item 4&#39;
</code></pre><p>The above ran for 15 minutes and returned nothing, yet the following gave me my result set in 1.5 minutes</p><pre><code>item_desc IN (
&#39;item 1&#39;
,&#39;item 2&#39;
,&#39;item 3&#39;
,&#39;item 4&#39;
)
</code></pre><p>I did this in SQL and am wondering why the IN(list of items) performed so much faster then the OR statement.</p><p>&#8212; EDIT &#8212;<br /> SQL Server 2008, I do apologize for not putting this bit of info in in the first place.</p><p><strong>Here is the Query in its entirety using the <code>OR</code> statements:</strong></p><pre><code>DECLARE @SD DATETIME
DECLARE @ED DATETIME
SET @SD = &#39;2013-06-01&#39;;
SET @ED = &#39;2013-06-15&#39;;

-- COLUMN SELECTION
SELECT PV.PtNo_Num AS &#39;VISIT ID&#39;
, PV.Med_Rec_No AS &#39;MRN&#39;
, PV.vst_start_dtime AS &#39;ADMIT&#39;
, PV.vst_end_dtime AS &#39;DISC&#39;
, PV.Days_Stay AS &#39;LOS&#39;
, PV.pt_type AS &#39;PT TYPE&#39;
, PV.hosp_svc AS &#39;HOSP SVC&#39;
, SO.ord_no AS &#39;ORDER NUMBER&#39;
--, SO.ent_dtime AS &#39;ORDER ENTRY TIME&#39;
--, DATEDIFF(HOUR,PV.vst_start_dtime,SO.ent_dtime) AS &#39;ADM TO ENTRY HOURS&#39;
, SO.svc_desc AS &#39;ORDER DESCRIPTION&#39;
, OSM.ord_sts AS &#39;ORDER STATUS&#39;
, SOS.prcs_dtime AS &#39;ORDER STATUS TIME&#39;
, DATEDIFF(DAY,PV.vst_start_dtime,SOS.prcs_dtime) AS &#39;ADM TO ORD STS IN DAYS&#39;

-- DB(S) USED
FROM smsdss.BMH_PLM_PtAcct_V PV
JOIN smsmir.sr_ord SO
ON PV.PtNo_Num = SO.episode_no
JOIN smsmir.sr_ord_sts_hist SOS
ON SO.ord_no = SOS.ord_no
JOIN smsmir.ord_sts_modf_mstr OSM
ON SOS.hist_sts = OSM.ord_sts_modf_cd

-- FILTER(S)
WHERE PV.Adm_Date BETWEEN @SD AND @ED
AND SO.svc_cd = &#39;PCO_REMFOLEY&#39;
OR SO.svc_cd = &#39;PCO_INSRTFOLEY&#39;
OR SO.svc_cd = &#39;PCO_INSTFOLEY&#39;
OR SO.svc_cd = &#39;PCO_URIMETER&#39;

AND SO.ord_no NOT IN (
    SELECT SO.ord_no
    FRROM smsdss.BMH_PLM_PtAcct_V PV
    JOIN smsmir.sr_ord SO
    ON PV.PtNo_Num = SO.episode_no
    JOIN smsmir.sr_ord_sts_hist SOS
    ON SO.ord_no = SOS.ord_no
    JOIN smsmir.ord_sts_modf_mstr OSM
    ON SOS.hist_sts = OSM.ord_sts_modf_cd
    WHERE OSM.ord_sts = &#39;DISCONTINUE&#39;
    AND SO.svc_cd = &#39;PCO_REMFOLEY&#39;
    OR SO.svc_cd = &#39;PCO_INSRTFOLEY&#39;
    OR SO.svc_cd = &#39;PCO_INSTFOLEY&#39;
    OR SO.svc_cd = &#39;PCO_URIMETER&#39;
)
ORDER BY PV.PtNo_Num, SO.ord_no, SOS.prcs_dtime
</code></pre><p>Thank you,</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Oleski&#39;s answer is incorrect.  For SQL Server 2008, an <code>IN</code> list gets refactored to a series of <code>OR</code> statements.  It may be different in say MySQL.</p><p>I&#39;m fairly certain that if you generated actual execution plans for both your queries they would be identical.</p><p>In all likelihood the second query ran faster <strong>because you ran it second</strong>, and the first query had already pulled all the data pages from the database and paid the IO cost. The second query was able to read all the data from memory and execute a lot faster.</p><p><strong>Update</strong></p><p>The actual source of the variance is likely that the queries are <strong>not equivalent</strong>.  You have two different <code>OR</code> lists below:</p><pre><code>WHERE PV.Adm_Date BETWEEN @SD AND @ED
AND SO.svc_cd = &#39;PCO_REMFOLEY&#39;
OR SO.svc_cd = &#39;PCO_INSRTFOLEY&#39;
OR SO.svc_cd = &#39;PCO_INSTFOLEY&#39;
OR SO.svc_cd = &#39;PCO_URIMETER&#39;
</code></pre><p>and later</p><pre><code> WHERE OSM.ord_sts = &#39;DISCONTINUE&#39;
    AND SO.svc_cd = &#39;PCO_REMFOLEY&#39;
    OR SO.svc_cd = &#39;PCO_INSRTFOLEY&#39;
    OR SO.svc_cd = &#39;PCO_INSTFOLEY&#39;
    OR SO.svc_cd = &#39;PCO_URIMETER&#39;
</code></pre><p>In both those <code>WHERE</code> clauses, operator precendence (where AND is handled before OR) means that the actual logic run by the engine is:</p><pre><code>WHERE (ConditionA AND ConditionB)
OR ConditionC
OR ConditionD
OR ConditionE
</code></pre><p>If you replace the <code>OR</code> lists with an <code>IN</code> expression, the logic will be:</p><pre><code>WHERE ConditionA
AND (ConditionB OR ConditionC OR ConditionD OR ConditionE)
</code></pre><p>Which is radically different.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../do-sql-devs-create-sql-queries-using-sql-query-designers/'>Do SQL Devs create SQL queries using SQL Query Designers</a></li><li class="list-group-item"><a href='../sql-strings-vs-conditional-sql-statements/'>SQL Strings vs. Conditional SQL Statements</a></li><li class="list-group-item"><a href='../mvc-encapsulation-for-complex-queries/'>Mvc &#8211; Encapsulation for complex queries</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>