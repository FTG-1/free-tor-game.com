<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Exception vs empty result set when the inputs are technically valid, but unsatisfiable &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067574 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067574" class="post-1067574 software type-software status-publish hentry category-software tag-exceptions tag-libraries tag-patterns-and-practices"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Exception vs empty result set when the inputs are technically valid, but unsatisfiable</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">exceptions</span><span class="mr-2 badge badge-info">libraries</span><span class="mr-2 badge badge-warning">patterns-and-practices</span></p><div class="entry-content"><p>I&#39;m developing a library intended for public release. It contains various methods for operating on sets of objects &#8211; generating, inspecting, partitioning and projecting the sets into new forms. In case it&#39;s relevant, it&#39;s a C# class library containing LINQ-style extensions on <code>IEnumerable</code>, to be released as a NuGet package.</p><p>Some of the methods in this library can be given unsatisfiable input parameters. For example, in the combinatoric methods, there is a method to generate all sets of <em>n</em> items that can be constructed from a source set of <em>m</em> items. For example, given the set:</p><blockquote><p>1, 2, 3, 4, 5</p></blockquote><p>and asking for combinations of 2 would produce:</p><blockquote><p>1, 2<br /> 1, 3<br /> 1, 4<br /> etc&#8230;<br /> 5, 3<br /> 5, 4</p></blockquote><p>Now, it&#39;s obviously possible to ask for something that can&#39;t be done, like giving it a set of 3 items and then asking for combinations of 4 items while setting the option that says it can only use each item once.</p><p>In this scenario, each parameter is <em>individually</em> valid:</p><ul><li>The source collection is not null, and does contain items</li><li>The requested size of combinations is a positive nonzero integer</li><li>The requested mode (use each item only once) is a valid choice</li></ul><p>However, the state of the parameters <em>when taken together</em> causes problems.</p><p>In this scenario, would you expect the method to throw an exception (eg. <code>InvalidOperationException</code>), or return an empty collection? Either seems valid to me:</p><ul><li>You can&#39;t produce combinations of <em>n</em> items from a set of <em>m</em> items where <em>n &gt; m</em> if you&#39;re only allowed to use each item once, so this operation can be deemed impossible, hence <code>InvalidOperationException</code>.</li><li>The set of combinations of size <em>n</em> that can be produced from <em>m</em> items when <em>n &gt; m</em> is an empty set; no combinations can be produced.</li></ul><h2>The argument for an empty set</h2><p>My first concern is that an exception prevents idiomatic LINQ-style chaining of methods when you&#39;re dealing with datasets that may have unknown size. In other words, you might want to do something like this:</p><pre class="lang-cs prettyprint-override"><code>var result = someInputSet
    .CombinationsOf(4, CombinationsGenerationMode.Distinct)
    .Select(combo =&gt; /* do some operation to a combination */)
    .ToList();
</code></pre><p>If your input set is of variable size, this code&#39;s behaviour is unpredictable. If <code>.CombinationsOf()</code> throws an exception when <code>someInputSet</code> has fewer than 4 elements, then this code will <em>sometimes</em> fail at runtime without some pre-checking. In the above example this checking is trivial, but if you&#39;re calling it halfway down a longer chain of LINQ then this might get tedious. If it returns an empty set, then <code>result</code> will be empty, which you may be perfectly happy with.</p><h2>The argument for an exception</h2><p>My second concern is that returning an empty set might hide problems &#8211; if you&#39;re calling this method halfway down a chain of LINQ and it quietly returns an empty set, then you may run into issues some steps later, or find yourself with an empty result set, and it may not be obvious how that happened given that you definitely had something in the input set.</p><p>What would you expect, and what&#39;s your argument for it?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>Return an Empty Set</strong></p><p>I would expect an empty set because:</p><p>There are 0 combinations of 4 numbers from the set of 3 when i can only use each number once</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-should-service-throw-exception-or-return-when-no-items-specified-for-deletion/'>C# &#8211; Should service throw exception or return when no items specified for deletion</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>