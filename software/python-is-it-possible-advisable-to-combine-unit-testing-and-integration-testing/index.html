<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Python &#8211; Is it possible/advisable to combine unit testing and integration testing &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072298 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072298" class="post-1072298 software type-software status-publish hentry category-software tag-integration-tests tag-mysql tag-python tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Python &#8211; Is it possible/advisable to combine unit testing and integration testing</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">integration-tests</span><span class="mr-2 badge badge-info">MySQL</span><span class="mr-2 badge badge-warning">python</span><span class="mr-2 badge badge-primary">unit testing</span></p><div class="entry-content"><p>I&#39;ve built a Python script that consists of about 20 functions that extract data from MySQL via <code>.sql</code> files (I&#39;m currently trying to learn SQLAlchemy ORM), do something to it and then put it back in MySQL. The process involves changing the same data multiple times so future steps rely on previous steps.</p><p>I&#39;ve built a unittest test case per function that boots up a test database, populates it with data a fixture (in this case an Excel file &#8211; I will probably move this to a <code>.sql</code> dump file in future) and then tests the output against data also held in a fixture. I&#39;m not sure if these class as unit tests as they test only one function or integration tests as they simulate interaction with other system components. Apparently though it <a href="https://softwareengineering.stackexchange.com/a/48265/367981">doesn&#39;t matter what you call them.</a></p><p>Currently each test is self-contained and the data used doesn&#39;t simulate a full process flow &#8211; it uses simplistic inputs that don&#39;t relate to previous examples. I now want to test the end to end flow of the process and currently I foresee this as building a single test case with every step of the process (function) in it. I then insert a dataset at the beginning and test the output at the very end. Worth mentioning that I&#39;ve taken to thinking of the current tests being unit tests and the end to end test being an integration test, hence the title of this post.</p><p>My question is this&#8230; should I not simply build my <strong>current</strong> fixture data so that it follows a logical pattern from start to finish? That way I get the benefits of discretely testing the outputs of every step whilst ensuring I also have the end to end view too. It seems like a good solution but there&#39;s something nagging me that this could be a pain to maintain over the long term.</p><p>Any advice for a Python and testing newbie?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>Is it possible/advisable to combine unit testing and integration testing?</p></blockquote><p>Doing both unit testing and integration testing? Overwhelmingly yes.</p><p>Mashing them together in a single test suite? Not advisable.</p><p>Based on your comment, it seems you already understand the purpose of both, so I won&#39;t repeat that here. But I do want to address your suggestions that they can be combined in a single test sequence.</p><blockquote><p>I guess I&#39;m hypothesising that if the data is exactly aligned then you get an integration test from a series of unit tests</p></blockquote><p>To achieve this, your unit tests need to store state that another unit test can therefore rely on. This means that your test is no longer a unit test, as it relies on an additional dependency (the state store).</p><p>What you&#39;re describing here is a series of integration tests, not a series of unit and integration tests.</p><p>Also, it&#39;s completely normal for a single integration test to assert itself at every step, e.g.:</p><ul><li>Arrange: set up fixture</li><li>Act: create new Foo</li><li>Assert: was the Foo created?</li><li>Act: update Foo with new data</li><li>Assert: was the Foo updated?</li><li>Act: delete the Foo</li><li>Assert: was the Foo deleted?</li></ul><p>Those aren&#39;t three separate tests, they&#39;re a single integration test that is comprised of multiple steps. If you had only asserted everything at the end, then you would&#39;ve been unable to distinguish cases where the Foo was never created (and the rest of the logic didn&#39;t throw exceptions) and ones where the Foo was correctly created and deleted.</p><p>When you describe your suggested unit tests that follow each other, that sounds like what you really need is a <em>combined</em> integration test that is comprised of all of those steps.</p><blockquote><p>should I not simply build my current fixture data so that it follows a logical pattern from start to finish? That way I get the benefits of discretely testing the outputs of every step whilst ensuring I also have the end to end view too.</p></blockquote><p>Using the example integration test I mentioned, consider a bug whereby a created Foo can be deleted, but an updated Foo cannot. For some reason (randomly chosen for the purpose of this example), when you update a Foo, it renders the Foo undeleteable.</p><p>When you run your suggested test suite:</p><ul><li>&#34;Unit&#34; test <code>createFoo</code> =&gt; PASS</li><li>&#34;Unit&#34; test <code>updateFoo</code> =&gt; PASS</li><li>&#34;Unit&#34; test <code>deleteFoo</code> =&gt; FAIL</li></ul><p>Your sequence of &#34;unit&#34; tests (quotes because they&#39;re really mini integration tests) would flag the wrong step (i.e. delete) as the problematic one. The create would succeed, the update would succeed, but the delete would not.</p><p>Based on that test report alone, you would conclude that something is wrong in the delete logic. If you were a betting man, you&#39;d bet money that the bug was being caused there.</p><p>However, if you had created actual unit tests and some multi-step integration tests, you would&#39;ve narrowed down the issue better:</p><ul><li>Unit test <code>createFoo</code> =&gt; PASS</li><li>Unit test <code>updateFoo</code> =&gt; PASS</li><li>Unit test <code>deleteFoo</code> =&gt; PASS</li><li>Integration test <code>createAndDeleteFoo</code> =&gt; PASS</li><li>Integration test <code>createAndUpdateAndDeleteFoo</code> =&gt; <strong>FAIL</strong> (failure reported on the delete step)</li></ul><p>Now, you wouldn&#39;t conclude that the bug is in the delete logic, since the delete unit test passes. As a betting man, you would <em>not</em> be betting money on the delete logic being broken, as the test report almost invariably suggests that it&#39;s the updating of a Foo which is causing an issue in the deletion of that same Foo.</p><p>This is of course a cherrypicked example, but it highlights the purpose of having separate unit tests and integration tests. If unit tests pass and integration tests fail, that means you have narrowed the problem down to an interaction between two components, rather than a component itself.</p><p>These sorts of issues are very hard to spot naturally, as each code block you look at will individually appear correct (since each unit test passes). The cause of the bug is most likely a side effect whose cause (in the update logic) and effect (in the delete logic) are spread over different locations, making it very hard to spot, especially in a sufficiently large codebase.</p><p>That&#39;s still not an easy bug to fix, but at least now you know that you&#39;re looking for a side effect and can put the update/delete logic side by side when hunting down the bug.</p><hr/><p>As a general rule, when people suggest taking a shortcut in writing tests (as you have), the intention is generally good (trying to achieve the same thing with less effort), but in almost all cases it leads to less informative test failure reports, e.g. not being able to pinpoint to the location of a bug.</p><p>Your suggested testing strategy still catches the vast majority of bugs that you&#39;re going to encounter during development, but some types of failures will become harder to troubleshoot.</p><p>I&#39;m not going to tell you you&#39;re not allowed to employ your testing strategy. I&#39;m just pointing out the difference between your strategy and the &#34;normal&#34; (very much mind the quotes) testing strategy.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-am-i-unit-testing-or-integration-testing-the-stored-procedures/'>Database &#8211; Am I Unit Testing or Integration Testing the Stored Procedures</a></li><li class="list-group-item"><a href='../databases-and-unit-integration-testing/'>Databases and Unit/Integration Testing</a></li><li class="list-group-item"><a href='../php-ive-unit-tested-the-class-now-how-to-get-started-with-an-integration-test/'>Php &#8211; I&#8217;ve unit tested the class, now how to get started with an integration test</a></li><li class="list-group-item"><a href='../database-unit-integration-testing-the-dal/'>Database &#8211; Unit/Integration Testing the DAL</a></li><li class="list-group-item"><a href='../unit-testing-integration-testing-testing-service-to-service/'>Unit-testing &#8211; Integration Testing: Testing Service to Service</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>