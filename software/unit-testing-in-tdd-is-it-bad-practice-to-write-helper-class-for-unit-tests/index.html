<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; In TDD, is it bad practice to write helper class for unit tests &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1078529 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1078529" class="post-1078529 software type-software status-publish hentry category-software tag-design tag-tdd tag-testing tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; In TDD, is it bad practice to write helper class for unit tests</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design</span><span class="mr-2 badge badge-info">tdd</span><span class="mr-2 badge badge-warning">testing</span><span class="mr-2 badge badge-primary">unit testing</span></p><div class="entry-content"><p>Sometimes when writing a unit test using Test Driven Development (TDD) one may find that checking if the result is the correct one is &#34;more complicated than one line of code&#34;, probably deserving its own function.</p><p>In that case, writing an auxiliary method or even helper/ extension class could be something that comes to mind. For instance, if you find yourself doing the same operations in many test cases, why not improve the readability of that test by refactoring it?</p><p><strong>But then the question rises: If I am writing an utility/helper class to improve how I am writing test cases, should I unit test it? Should I be even writing that helper class at all? Is it a bad practice?</strong></p><hr/><h1>To exemplify, I will give a reduced example:</h1><p>Suppose I have the following public API requirements:</p><ul><li><code>MyList</code> should allow values to be added to it</li><li>Those values need to be retrieved. <strong>Order does not matter</strong>.</li></ul><p>To satisfy that, I am writing the following test:</p><pre class="lang-cs prettyprint-override"><code>public class MyListTests
{
    [Test]
    public void Add_AddingValues_ValuesArePresentInList()
    {
        MyList myList = new MyList();
        myList.Add(3);
        myList.Add(1);
        myList.Add(1);
        myList.Add(2);

        int[] expectedValues = new int[] { 1, 1, 2, 3 };
        // Assert that myList.GetValues have the same elements as expectedValues;  
    }
}
</code></pre><p>However, <code>// Assert that myList.GetValues have the same elements as expectedValues;</code> can be quite a non trivial task by its own if order does not matter. In fact, one could argue that testing if two enumerable have the same set of elements, including number of occurences, should be its own function.</p><p><strong>How one should handle this situation? Should a helper class be implemented to better allow this test case? Should this helper class be united tested?</strong></p><hr/><p>As a side note, both implementations should satisfy the test:</p><p><strong>Implementation A</strong>:</p><pre class="lang-cs prettyprint-override"><code>public class MyList
{
    private List&lt;int&gt; values = new List&lt;int&gt;;

    public void Add(int value)
    {
        values.Add(value);
    }

    public void IReadOnlyCollection&lt;int&gt; GetValues()
    {
        return values;
    }
}

</code></pre><p><strong>Implementation B</strong>:</p><pre class="lang-cs prettyprint-override"><code>public class MyList
{
    private List&lt;int&gt; values = new List&lt;int&gt;;

    public void Add(int value)
    {
        List&lt;int&gt; newValueAsList = new List&lt;int&gt;();
        newValueAsList.Add(value);

        this.values = newValueAsList.Concat(this.values);
    }

    public void IReadOnlyCollection&lt;int&gt; GetValues()
    {
        return values;
    }
}

</code></pre><p>This is a question about testing behavior using TDD. Not implementation. The efficiency of the implementation of <code>MyList</code> is not a concern.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your example is probably too contrived to demonstrate why helper classes may be useful, and why they may require tests on their own. But I am working right here with a lot of automated tests, all driven by NUnit, and we have several helper classes</p><ul><li><p>to compare the output of specific data formats in a non-brittle way (proprietary formats, or specific CSV or XML formats, standard CAD file formats, and so on)</p></li><li><p>to provide certain kinds of test data (especially when it is simpler and more maintainable to generate the data programmatically than to store the data itself in a serialized form)</p></li><li><p>for controlling some of the more complex testing steps</p></li></ul><p>To be honest, most of these helper classes play a bigger role in automated tests which are not really unit tests any more. But nevertheless they are extremely useful for us, some of them would probably deserve unit tests on their own (though I guess we currently don&#39;t have many unit tests for those classes), and I don&#39;t see any &#34;bad practice&#34; in using or introducing such classes into a sensible testing process, quite the opposite.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-how-to-pick-the-testing-values-for-parameterized-tests-for-stateless-functions/'>Unit-testing &#8211; How to pick the testing values for parameterized tests for stateless functions</a></li><li class="list-group-item"><a href='../unit-testing-designing-unit-tests-for-a-stateful-system/'>Unit-testing &#8211; Designing unit tests for a stateful system</a></li><li class="list-group-item"><a href='../unit-testing-how-to-write-unit-tests-for-code-with-difficult-to-predict-results/'>Unit-testing &#8211; How to write unit tests for code with difficult to predict results</a></li><li class="list-group-item"><a href='../unit-testing-in-tdd-should-i-add-unit-tests-to-refactored-code/'>Unit-testing &#8211; In TDD, should I add unit tests to refactored code</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>