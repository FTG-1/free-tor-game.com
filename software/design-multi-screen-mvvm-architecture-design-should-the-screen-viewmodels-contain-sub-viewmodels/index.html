<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; Multi-screen MVVM architecture/design &#8211; Should the &#8220;screen&#8221; ViewModels contain sub-ViewModels &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079231 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079231" class="post-1079231 software type-software status-publish hentry category-software tag-architecture tag-design tag-mvvm"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; Multi-screen MVVM architecture/design &#8211; Should the &#8220;screen&#8221; ViewModels contain sub-ViewModels</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">mvvm</span></p><div class="entry-content"><p>I&#39;m getting beyond a simple MVVM program now, and I&#39;d just like to sense check my current architecture and makes sure I&#39;m going down the right path here.</p><p>Everything is structured around screens, and these screens have a kind of &#34;tree&#34; breakdown. On the top level there&#39;s a home screen, and you can drill down through related screens.</p><p>I&#39;ve made a simplified example, an application that tracks employees for companies. It has three &#34;screens&#34;.</p><ul><li>CompanyOverviewScreen, lets you see all the companies you have. Click to go to the below:</li><li>EmployeeTrackerScreen, lets you see all the employees in this company and their location. Click to go to the below:</li><li>EmployeeScreen, let&#39;s you see information about an employee.</li></ul><p>So the screens open up like a tree:</p><p><a href="../../../i.stack.imgur.com/Jn9E3.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/Jn9E3.png" alt="enter image description here"/></a></p><p><strong>Question 1:</strong> Where should these screen view models be created and stored? Should they be created and stored in one place above everything, or should the EmployeeTrackerScreen ViewModel create the EmployeeScreen ViewModel and store it as a collection property?</p><p>I&#39;m also using shared ViewModels that don&#39;t have views for the data and UI properties in these screens where they are displaying a collection of items. For example, the EmployeeTrackerScreenView has an ItemsCollection to directly bind to an ObservableCollection that are stored as properties in the EmployeeTrackerScreenViewModel.</p><p>Here&#39;s a quick sketch of how it&#39;s structured:</p><p><a href="../../../i.stack.imgur.com/6JrWf.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/6JrWf.png" alt="enter image description here"/></a><br /> So the EmployeeTrackerScreenView looks like this:</p><pre><code>&lt;UserControl x:Class=&#34;Project.EmployeeTrackerScreenView &gt;
    &lt;DockPanel&gt;
        &lt;StackPanel DockPanel.Dock=&#34;Top&#34;&gt;
            &lt;Label Content=&#34;{Binding CorporationViweModel.Name}&#34; /&gt;
            &lt;Label Content=&#34; has &#34; /&gt;
            &lt;Label Content=&#34;{Binding CorporationViweModel.NumberOfEmployees}&#34; /&gt;
        &lt;/StackPanel&gt;
        &lt;ScrollViewer&gt;
            &lt;ItemsControl ItemsSource=&#34;{Binding ObsvCollectionOfEmployeeViewModels}&#34; &gt;
                &lt;ItemsControl.ItemTemplate&gt;
                    &lt;DataTemplate&gt;
                        &lt;StackPanel Orientation=&#34;Horizontal&#34;&gt;
                            &lt;Label Content=&#34;{Binding EmployeeModel.Name}&#34;/&gt;
                            &lt;Label Content=&#34;is&#34;/&gt;
                            &lt;Label Content=&#34;{Binding EmployeeModel.Location}&#34;/&gt;
                        &lt;/StackPanel&gt;
                    &lt;/DataTemplate&gt;
                &lt;/ItemsControl.ItemTemplate&gt;
            &lt;/ItemsControl&gt;
        &lt;/ScrollViewer&gt;
    &lt;/DockPanel&gt;
&lt;/UserControl&gt;
</code></pre><p><strong>Question 2</strong> Is in line with MVVM patterns? Am I going about it the right way?</p><p>I&#39;d love some comments on how I&#39;m structuring things, perhaps some advice on whether I&#39;m going about it in a sensible way. I hope the question provides enough information and is appropriate. I&#39;m new to this kind of software design, I&#39;ve always made smaller apps in the past, so I&#39;m inexperienced in proper architecture.</p><p>I&#39;ve been using Caliburn Micro MVVM framework, in WPF if that&#39;s useful to know.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Normally I have one overarching <code>ApplicationViewModel</code> that takes care of initializing ViewModels for separate screens, like <a href="https://stackoverflow.com/a/12216068/302677">this</a>, however because of the nature of your application, it sounds like your <code>CompanyOverviewScreenViewModel</code> should work fine for this purpose.</p><p>Typically I would have is my main application initialize the top-level data context, and each ViewModel from there is in charge of creating/maintaining viewmodels below it.</p><p>For example :</p><pre><code>public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        var mainApp = new CompanyOverviewWindow();
        var appData = new CompanyOverviewScreenViewModel();
        mainApp.DataContext = appData;
        mainApp.Show();
    }
}
</code></pre><p>The <code>CompanyOverviewScreenViewModel</code> would contain a collection of <code>CompanyModel</code> objects, and upon selection each <code>CompanyModel</code> object would be displayed to the user in some kind of <code>ContentControl</code> or <code>UserControl</code>. Each <code>CompanyModel</code> would further have a collection of <code>EmployeeModel</code> objects that could also be selected and displayed.</p><p>Keep in mind that a <code>ViewModel</code> is really just a model of the View. For example, it sounds like you only want to display Employee objects, so using the <code>EmployeeModel</code> directly is perfectly acceptable. But if you wanted to provide the ability to update the <code>EmployeeModel</code> and include items like Save, Cancel, Delete, etc you would probably want a <code>ViewModel</code> to contain the extra code that is unrelated to the Employee data object itself.</p><p>In that same vein, because you want to do things like track the Selected Employee of each <code>CompanyModel</code>, something not normally part of the Company data object, it might make sense to use a <code>CompanyViewModel</code> object at that layer too. Sometimes for something as simple as just tracking selection though, I&#39;ll just add it the object model. It really depends on how big or how structured the application is.</p><p>Overall what you have now looks like you&#39;re going in the right direction, although I did have some concern about your image where it says <em>&#34;Each screen creates ViewModels..&#34;</em> in the top left corner. I typically do not advocate for a view-first approach to MVVM and WPF, and would recommend a ViewModel-first approach instead, as I described here.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-silverlight-5-and-mvvm-do-i-really-need-other-frameworks-what-is-the-best-way-for-rapid-development/'>Architecture &#8211; Silverlight 5 and MVVM. Do I really need other frameworks? What is the best way for rapid development</a></li><li class="list-group-item"><a href='../c-how-to-make-creating-viewmodels-at-runtime-less-painful/'>C# &#8211; How to make creating viewmodels at runtime less painful</a></li><li class="list-group-item"><a href='../state-handling-in-wpf-mvvm/'>State handling in WPF-MVVM</a></li><li class="list-group-item"><a href='../c-preserve-mvvm-while-using-xaml-resources/'>C# &#8211; Preserve MVVM while using XAML resources</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>