<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>How to effectively handle 404/500 http errors in server-side rendering web application which uses store for state &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084756 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084756" class="post-1084756 software type-software status-publish hentry category-software tag-error-handling tag-if-statement tag-reactjs tag-redux"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">How to effectively handle 404/500 http errors in server-side rendering web application which uses store for state</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">error handling</span><span class="mr-2 badge badge-info">if statement</span><span class="mr-2 badge badge-warning">reactjs</span><span class="mr-2 badge badge-primary">redux</span></p><div class="entry-content"><p>I&#39;m working on a website using server-side rendering approach. I&#39;m using <a href="https://reactjs.org/" rel="nofollow noreferrer">React</a> and <a href="https://redux.js.org/" rel="nofollow noreferrer">Redux</a> for this. Redux handles the state of the application and provides API to change the state. All asynchronous data fetching is done via Redux.</p><p>The problem is that a URL may be like <code>example.com/news/:param</code> where <code>param</code> is some dynamic parameter like a country for example. In React I have a page which is common to all <code>news</code> pages so because the URL path starts with <code>news</code> <a href="https://www.npmjs.com/package/react-router" rel="nofollow noreferrer">react-router</a> will find a page for it. However, if a user enters a non-valid country 404 page should be returned. Whether a country or any other <code>param</code> is valid can only be determined via a request to the API service I&#39;m using, that is using Redux actions.</p><p>Another complication is that a given page may need to make several requests to the API in order to fetch data. If <code>param</code> is found in the API but some other less important data is not found I don&#39;t want to display 404 page. 404 page should therefore displayed only if the &#34;main&#34; request to the API returns 404.</p><p><strong>Current solution:</strong></p><p>So far in &#34;main&#34; requests to the API, I tentatively switch on <code>notFound</code> variable. That is I suspect that a request which contains an <code>param</code> potentially may result in 404 because the <code>param</code> was not found. So if such request indeed results in 404 status then my main component in React detects that <code>notFound</code> is now true and shows the default Not Found page to the user.</p><p>In addition I have a variable in Redux state which is called <code>internalError</code>. It is set to true if some internal error occurred, often as a result of a request to API, e.g. JSON parsing error, etc. <code>internalError</code> is always the opposite boolean value of <code>notFound</code>. This way when we are in the main reducer which calculates the new values for <code>internalError</code> and <code>notFound</code> then if <code>notFound</code> is false then <code>error</code> will be true and this way we know that we need to display 500 error to the user instead of 404.</p><p><strong>This approach has several issues:</strong></p><ol><li>Race condition between Redux actions which set <code>notFound</code> to true and Redux actions that set <code>notFound</code> back to false.</li><li>Imagine a situation when 500 error may occur due to some unimportant Promise rejection (thus setting <code>internalError</code> to true) but later another API request will return 404 for the requested <code>param</code>. So first the user will see a generic error page with 500 status then a Not Found page. It&#39;s another race condition.</li></ol><p>I&#39;m wondering if there&#39;s a simpler, better approach.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If you&#39;re working on a server side rendered app, redux and react router seem like the wrong tools for you. The reason you&#39;re having difficulty is because you&#39;re taking a reasonably state-light operation (web requests and responses) and inserting a heavy duty state management tool (Redux) inside of it.</p><p>Similarly, it seems like you&#39;re using react router, a front end route handler, when standard back end route management would suit your project fine.</p><p>You&#39;re using SPA/JAM stack tooling that is great for lightweight, single purpose views but it seems like the project is at a point where owning serverside behavior is a given. You can reimplement HTTP on top of HTTP or just use standard HTTP tooling to solve these problems.</p><p>The easiest approach would probably be to use a small express or similar lightweight web server for your project, and implement your requests as standard urls. Implementing your API calls as async requests that all need to finish before returning a single response will make a much simpler system than managing all of their states independently, like Redux allows you to.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../what-are-the-definitive-guidelines-for-custom-error-handling-in-asp-net-mvc-3/'>What are the definitive guidelines for custom Error Handling in ASP.NET MVC 3</a></li><li class="list-group-item"><a href='../should-a-rest-api-return-a-500-internal-server-error-to-indicate-that-a-query-references-an-object-that-does-not-exist/'>Should a REST API return a 500 Internal Server Error to indicate that a query references an object that does not exist</a></li><li class="list-group-item"><a href='../redux-loading-success-error-pattern-when-using-redux-saga/'>Redux LOADING/SUCCESS/ERROR pattern &#8211; when using redux-saga</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>