<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Why isn&#8217;t `length` generic by default &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080569 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080569" class="post-1080569 software type-software status-publish hentry category-software tag-haskell"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Why isn&#8217;t `length` generic by default</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">haskell</span></p><div class="entry-content"><p>Haskell often provides two versions of a given function f, i.e:</p><pre><code>f :: Int ...
genericF :: Integral i =&gt; i ...
</code></pre><p>There exist many standard library functions with those two versions: length, take, drop, etc.</p><p>Quoting the description of <code>genericLength</code>:</p><blockquote><p>The genericLength function is an overloaded version of length. In particular, instead of returning an Int, it returns any type which is an instance of Num. It is, however, less efficient than length.</p></blockquote><p>My question is: where does the efficiency loss comes from? Can&#39;t the compiler detect that we are using <code>genericLength</code> as an Int and therefore us <code>length</code> for better performance? Why isn&#39;t <code>length</code> generic by default?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>It&#39;s the same reason as why we have <code>map</code> and <code>fmap</code>. Error messages/usability for newbies.</p><p>It&#39;d by mighty confusing for many a new programmer to write</p><pre><code>myLength = subtract 1 . genericLength

x = myLength [1, 2, 3] :: Int
y = myLength [1, 2, 3] :: Integer
</code></pre><p>and get an error complaining about the monomorphism restriction. Plus which do you prefer</p><pre><code>Couldn&#39;t match expected type &#34;Integer&#34; with type &#34;Bool&#34;
</code></pre><p>or</p><pre><code>No instance for Num Bool arising from usage ....
</code></pre><p>It&#39;s simply a matter of usability.</p><p>Furthermore, in a lot of cases you end up just wanting defaulting anyways, such as with function composition</p><pre><code>evenElems = even . subtract 1 . genericLength
</code></pre><p>vs</p><pre><code>default ()
evenElems = even . genericLength -- Error ambiguous type variable.
</code></pre><p>Here we just want GHC to &#34;pick&#34; a random <code>Num</code> type and we really don&#39;t care which (it&#39;s <code>Integer</code> IIRC).</p><p>If everything was fully generic the defaulting rules would get um.. murky. Since  As of right now there are only 4 things that are automatically available as defaults and no way to set anything fine grained (per function).</p><p>As for efficiency, typeclasses means lugging potentially lugging typeclass&#39;s dictionary and defaulting to <code>Integer</code> which is much more expensive than <code>Int</code>.</p><p>There are alternative preludes (I think classy prelude is unmaintained, but interesting) that do attempt to be as generic as possible. Using them is as simple as</p><pre><code> {- LANGUAGE NoImplicitPrelude #-}
 import My.Super.Awesome.Prelude
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../why-is-the-concept-of-lazy-evaluation-useful/'>Why is the concept of lazy evaluation useful</a></li><li class="list-group-item"><a href='../why-isnt-functional-language-syntax-more-close-to-human-language/'>Why isn&#8217;t functional language syntax more close to human language</a></li><li class="list-group-item"><a href='../why-would-i-use-control-exception-in-haskell/'>Why would I use Control.Exception in Haskell</a></li><li class="list-group-item"><a href='../why-does-haskell-have-built-in-if-then-else-instead-of-defining-it-as-a-simple-library-function/'>Why does Haskell have built-in &#8220;if/then/else&#8221; instead of defining it as a simple library function</a></li><li class="list-group-item"><a href='../why-isnt-there-a-typeclass-for-functions/'>Why isn&#8217;t there a typeclass for functions</a></li><li class="list-group-item"><a href='../why-are-data-constructors-with-the-same-name-disallowed-in-different-type-constructors/'>Why are data constructors with the same name disallowed in different type constructors</a></li><li class="list-group-item"><a href='../why-isnt-bounded-a-subclass-of-enum-in-haskell/'>Why isn&#8217;t Bounded a subclass of Enum in Haskell</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>