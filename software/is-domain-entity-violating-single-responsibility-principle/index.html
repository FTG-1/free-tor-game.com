<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Is Domain Entity violating Single Responsibility Principle &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1074561 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1074561" class="post-1074561 software type-software status-publish hentry category-software tag-domain-driven-design tag-single-responsibility"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Is Domain Entity violating Single Responsibility Principle</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">domain-driven-design</span><span class="mr-2 badge badge-info">single-responsibility</span></p><div class="entry-content"><p>Single responsibility ( reason to change ) of an entity should be to uniquely identify itself, in other words, its responsibility is to be findable.</p><p>Eric Evan&#39;s DDD book, pg. 93:</p><blockquote><p>most basic responsibility of Entities is to establish continuity so<br /> that behavior can be clear and predictable. They do this best if they<br /> are kept spare. Rather than focusing on the attributes or even the<br /> behavior, strip the Entity object&#39;s definition down to the most<br /> intrinsic characteristics, particularly those that identify it or are<br /> commonly used to find or match it. Add only behavior that is essential<br /> to the concept and attributes that are required by that behavior.</p><p>Beyond that, look to remove behavior and attributes into other objects<br /> associated with the core Entity .Beyond identity issues, Entities tend<br /> to fulfill their responsibilities by coordinating the operations of<br /> objects they own.</p></blockquote><p>1.</p><blockquote><p>&#8230; strip the ENTITY object&#39;s definition down to the most intrinsic<br /> characteristics, particularly those that identify it or are commonly<br /> used to find or match it. Add only behavior that is essential to the<br /> concept &#8230;</p></blockquote><p>Once an <em>entity</em> is assigned a <em>unique ID</em>, its identity is established and so I would assume such  an entity doesn&#39;t need any behavior to <em>maintain its identity</em> or to <em>help it identify itself</em>. Thus, I don&#39;t understand what kind of behavior is author referring to ( besides <code>find</code> and <code>match</code> <em>operations</em> ) with &#34;<em>behavior that is essential to the concept</em>&#34;?</p><p>2.</p><blockquote><p>&#8230; strip the ENTITY object&#39;s definition down to the most intrinsic<br /> characteristics, particularly those that identify it or are commonly<br /> used to find or match it. &#8230; Beyond that, look to remove behavior and<br /> attributes into other objects associated with the core ENTITY.</p></blockquote><p>So any behavior that doesn&#39;t help identify the entity, but we&#39;d still characterize that behavior as being an <em>intrinsic characteristic</em> of that entity ( i.e. barking is intrinsic to dogs, flying is intrinsic to airplanes, laying eggs is intrinsic to birds &#8230; ), should be put into other objects associated with that entity ( example: we should put barking behavior into an object associated with a dog entity )?</p><p>3.</p><blockquote><p>Beyond that, look to remove behavior and attributes into other objects<br /> associated with the core ENTITY.</p></blockquote><p>a) <code>MyEntity</code> delegates responsibilities <code>A_resp</code> and <code>B_resp</code> to objects <code>a</code> and <code>b</code>, respectively.</p><p>Even though most of <code>A_resp</code> and <code>B_resp</code> work is done by <code>a</code> and <code>b</code> instances, clients are still served <code>A_resp</code> and <code>B_resp</code> through <code>MyEntity</code>, which means that from the client&#39;s perspective the two responsibilities belong to <code>MyEntity</code>. Thus, doesn&#39;t that mean <code>MyEntity</code> also has <code>A_resp</code> and <code>B_resp</code> responsibilities and as such is violating <strong>SRP</strong>?</p><p>b) Even if we assume that <code>A_resp</code> and <code>B_resp</code> don&#39;t belong to <code>MyEntity</code>, <code>MyEntity</code> still has a responsibility <code>AB_resp</code> of coordinating the operations of objects <code>a</code> and <code>b</code>. So doesn&#39;t <code>MyEntity</code> violate <strong>SRP</strong> since at minimum it has <em>two responsibilities</em> â€“ to uniquely identify itself and also <code>AB_resp</code>?</p><pre><code>class MyEntity
{
    private A a = ...
    private B b = ...


    public A GetA()
    { ... }

    public B GetB()
    { ... }

    /* coordinates operations of objects a and b */
    public int AworkB()
    { ... }
}

/* A encapsulates a single responsibility resp_A*/
/* A is value object */
class A
{ ... }

/* B encapsulates a single responsibility resp_B*/
/* B is value object */
class B
{ ... }
</code></pre><p><strong>UPDATE:</strong></p><p>1.</p><blockquote><p>Behavior in this context is refering to semantic behavior. For<br /> example, a Property on a class (i.e. attribute on a domain object)<br /> that is used to uniquely identify it has a behavior. While this is not<br /> represented in code directly. The expected behavior is that there will<br /> not be any duplicate values for that property.</p></blockquote><p>So in code we would almost never need to actually implement a behavior ( i.e. an operation ) that would somehow maintain entity&#39;s identity, since as you explained such a behavior only exist as a concept in a domain model ( in the form of a ID attribute of an entity), but when we translate this ID attribute into code, part of its semantics is lost ( i.e. the part which implicitly makes sure the ID value is unique is lost )?</p><p>2.</p><blockquote><p>Furthmore, a property such as Age has no context outside of a Person<br /> Entity, and as such, makes no sense to move into a different object<br /> &#8230; However that information could easily be stored in a separate<br /> location that the unique identifier, hence the confusing reference to<br /> behavior. Age could be a lazy loaded value.</p></blockquote><p>a) If <code>Age</code> property is lazy loaded, then we may call it a behavior, even though semantically <code>Age</code> is just an attribute?</p><p>3.</p><blockquote><p>You could easily have operations specific to Address such as<br /> verification that it is a valid address. You may not know that at<br /> design time, but this whole concept is to break down objects into<br /> their smallest parts</p></blockquote><p>While I agree that we&#39;d lose context by moving <code>Age</code> into different object, the context wouldn&#39;t be lost if we moved <code>DateOfBirth</code> property into a different object, but we usually don&#39;t move it.</p><p>What is the main reason that we&#39;d move <code>Address</code> into another object, but not <code>DateOfBirth</code>? Because <code>DateOfBirth</code> is more intrinsic to <code>Person</code> entity or because there are less chances that somewhere in the future we may need to define operations specific to <code>DateOfBirth</code>?</p><p>4.<br /> I must say I still don&#39;t know whether <code>MyEntity</code> also has <code>A_resp</code> and <code>B_resp</code> responsibilities and why <code>MyEntity</code> also having <code>AB_resp</code> isn&#39;t considered a violation of <strong>SRP</strong></p><p><strong>EULERFX</strong></p><p>1)</p><blockquote><p>The behaviors that the author is referring to are behaviors associated<br /> with the entity. These are the behaviors that modify the state of the<br /> entity</p></blockquote><p>a) If I understand you correctly, you&#39;re saying that <em>entity</em> should only contain those <em>behaviors</em> that modify its <em>attributes</em> ( i.e. its <em>state</em> )?</p><p>b) And what about the <em>behaviors</em> that don&#39;t necessarily modify the <em>state of the entity</em>, but are still  considered as being an <em>intrinsic</em> characteristic of that <em>entity</em> ( example: <em>barking</em> would be <em>intrinsic</em> characteristic of a <code>Dog</code> entity, even if it didn&#39;t modify <em>Dog&#39;s state</em> )? Should we include these behaviors in an <em>entity</em> or should they be moved to other objects?</p><p>2)</p><blockquote><p>As far as moving behavior to other objects, the author is referring to<br /> value objects specifically.</p></blockquote><p>Though my quote doesn&#39;t include it, but author does mention in the same paragraph  that in some cases <em>behaviors</em> ( and <em>attributes</em> ) will also get moved into <em>other entities</em> ( though I understand the benefits of moving <em>behaviors</em> to VOs )</p><p>3) Assuming <code>MyEntity</code> ( see question <strong>3.</strong> in my original post ) doesn&#39;t violate SRP, would we say that a <em>responsibility</em> of <code>MyEntity</code> is among other things also comprised of:</p><p>a. <code>A_resp</code> <strong>+</strong> <code>B_resp</code> <strong>+</strong> <code>AB_resp</code> ( <code>AB_resp</code> coordinates objects <code>a</code> and <code>b</code> )</p><p>or</p><p>b. <code>AB_resp</code> <strong>+</strong> delegating <code>A_resp</code> and <code>B_resp</code> to objects ( <code>a</code> and <code>b</code> ) associated with <code>MyEntity</code>?</p><p>4)<br /> Eric Evan&#39;s DDD book, pg. 94:</p><blockquote><p>CustomerID is the one and only identifier of the Customer ENTITY (<br /> figure 5.5 ), but  phone number and address would often be used to<br /> find or match a Customer. The name does not define a person&#39;s<br /> identity, but it is often used as part of the means of determining it.</p><p>In this example, the phone and address attributes moved into Customer,<br /> but on a real project, that choice would depend on how the domain&#39;s<br /> customers are typically matched or distinguished. For example, if a<br /> Customer has many contact phone numbers for different purposes, then<br /> the phone number is not associated with identity and should stay with<br /> the Sales Contact.</p></blockquote><p>a)</p><blockquote><p>CustomerID is the one and only identifier of the Customer ENTITY (<br /> figure 5.5 ), but  phone number and address would often be used to<br /> find or match a Customer. The name does not define a person&#39;s<br /> identity, but it is often used as part of the means of determining it.</p></blockquote><p>Quote states that only <em>attributes</em> associated with <em>identity</em> should stay in an <em>entity</em>.  I assume author means that <em>entity</em> should contain only those <em>attributes</em> that are often used to <em>find or match</em> this <em>entity</em>, while ALL other <em>attributes</em> should be moved?</p><p>b) But how/where should other <em>attributes</em> be moved? For example ( assumption here is that <em>address attribute</em> isn&#39;t used to <em>find or match</em> <code>Customer</code> and thus we want to move <em>address attribute</em> out of <code>Customer</code> ):</p><p>if instead of having <code>Customer.Address</code> ( of type <code>string</code> ) we create a property <code>Customer.Address</code> of type <code>Address</code>, did we move the <em>address attribute</em> into an associated VO object ( which is of type <code>Address</code> ) or would we say that <code>Customer</code> still contains <em>address attribute</em>?</p><p>c)</p><blockquote><p>In this example, the phone and address attributes moved into Customer,<br /> but on a real project, that choice would depend on how the domain&#39;s<br /> customers are typically matched or distinguished. For example, if a<br /> Customer has many contact phone numbers for different purposes, then<br /> the phone number is not associated with identity and should stay with<br /> the Sales Contact.</p></blockquote><p>Isn&#39;t author in the wrong here, since if we assume each of the many <em>contact phone numbers</em> that <code>Customer</code> has only belong to that particular <code>Customer</code>, then I&#39;d say these <em>phone numbers</em> are associated with <em>identity</em> just as much as when <code>Customer</code> only had <em>one phone number</em>?</p><p>5)</p><blockquote><p>The reason the author suggests stripping the entity down is that when<br /> one initially creates a Customer entity, there is a tendency to<br /> populate it with any attribute that one can think of being associated<br /> with a customer. This is a data-centric approach that overlooks<br /> behaviors ultimately leading to an anemic domain model.</p></blockquote><p>Off topic, but I thought <em>anemic domain model</em> results from moving <em>behavior</em> out of an <em>entity</em>, while your example is populating an <em>entity</em> with lots of <em>attributes</em>, which would result in <code>Customer</code> having too much <em>behavior</em> ( since we&#39;d probably also include in <code>Customer</code> the <em>behaviors</em> which modify these additional <em>attributes</em> ) and thus in violation of SRP?</p><p>thanks</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Behavior in this context is refering to semantic behavior. For example, a Property on a class (i.e. attribute on a domain object) that is used to uniquely identify it has a behavior. While this is not represented in code directly. The expected <em>behavior</em> is that there will not be any duplicate values for that property. Something such as an <em>Address</em> which may have its own identity, but does not exist outside of the context of a Person Entity should still be moved out into it&#39;s own object. Thus promoting the Entity into an Aggregate Root.</p><p>Furthmore, a property such as Age has no context outside of a Person Entity, and as such, makes no sense to move into a different object. The context would be lost, and therefore you can safely determine that it is a value that is essential to the Person Entity. You could not locate the value otherwise. However that information could easily be stored in a separate location that the unique identifier, hence the confusing reference to <em>behavior</em>. Age could be a lazy loaded value.</p><p>So to answer your question. No, it does not violate the Single Responsibility Principle. It is mearly stating that a Person should have only person stuff, and not something like Address, which is more complex and related to a person, should exist as its own entity.</p><p>You could easily have operations specific to Address such as verification that it is a valid address. You may not know that at design time, but this whole concept is to break down objects into their smallest parts so that something like this is relatively simple when done after the fact.</p><p>Update:
1) In most cases this identity validation is done upon saving an object out to a data store. Which means that the code representing the entity validation exists, but it exists elsewhere. It usually exists with the code that is responsible for issuing the identity value. Which is why I state that the uniqueness is not represented <em>directly</em> in the code for the entity.</p><p>2) The correct statement would be that <code>Age</code> is an attribute that has behavior. You would need to document the fact that Age is lazy loaded so that a developer consuming that property can make an accurate decision on how to consume that property</p><p>3) <code>DateOfBirth</code> usually is a different object; A date object that already has predefined operations on it. In some languages the date object already has a whole domain model defined on it. For example in c# you can specifiy the timezone, if the date is UTC, add and subtract dates to get a timespan. So your assumption about moving <code>DateOfBirth</code> would be correct.</p><p>4) If the only thing that <code>MyEntity</code> does is delegation and cooridination then no it does not violate SRP. Its single responsibility is to delegate and coordinate and is refered to as the <a href="http://en.wikipedia.org/wiki/Facade_pattern" rel="noreferrer">Facade</a> pattern</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../a-value-object-in-domain-driven-design/'>A value object in domain-driven design</a></li><li class="list-group-item"><a href='../low-coupling-single-responsibility-principle-vs-cohesion/'>Low Coupling: Single Responsibility Principle vs Cohesion</a></li><li class="list-group-item"><a href='../object-oriented-large-class-with-single-responsibility/'>Object-oriented &#8211; Large class with single responsibility</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>