<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; How to design the application to use REST for itself &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082253 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082253" class="post-1082253 software type-software status-publish hentry category-software tag-architecture tag-mvc tag-php tag-rest"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; How to design the application to use REST for itself</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">mvc</span><span class="mr-2 badge badge-warning">PHP</span><span class="mr-2 badge badge-primary">rest</span></p><div class="entry-content"><p>I&#39;m not sure how to ask this.  I know this is simplistic, but I understand (I think):</p><ul><li>REST is an architecture, not required, simply a way to build</li><li>REST is a style and a community standard for transfer of data</li><li>REST uses verbs and nouns, mostly the latter, GET, POST, PUT,<br /> DELETE&#8230;</li></ul><p>As I read I only see the architecture from the consumers point of view and the creator of the API for the consumer.</p><p>What I cannot find is how to do this for just my application.  What if I&#39;m not sharing anything with anyone at the moment.  I want to build my application to follow this architecture for the future.</p><p>What do I do now?  If I want to use this type of construct:</p><p><a href="http://www.restapitutorial.com/lessons/httpmethods.html" rel="nofollow">Examples</a>:</p><ul><li>PUT http://www.example.com/customers/12345</li><li>PUT http://www.example.com/customers/12345/orders/98765</li><li>PUT http://www.example.com/buckets/secret_stuff</li></ul><p>I my application, when I create a new person, I use an HTML <code>&lt;form action=&#34;something.php&#34; method=POST&gt;</code> Now how do I do this with PUT?  Where does this go?</p><p>If I use http://www.example.com/customers/12345 how do I know within <em>my</em> application that I want to PUT or GET or whatever?</p><p>I&#39;m using MVC, where&#39;s my action?  I realize the consumer might use my architecture/service with nouns, but this is for only me.  How do I know what to do, if I can&#39;t use PUT in a form tag?</p><p>Right now I use my PHP page to grab the query string based upon a RewriteRule:</p><pre><code>require_once(&#34;database\\adapters\\PDO\\Database.bootstrap.php&#34;);
class App {
    protected $_controller = &#39;Welcome&#39;;
    protected $_method = &#39;index&#39;;
    protected $_params = [];
    protected $_model = &#39;Welcome&#39;;

    public function __construct(){
    $url = $this-&gt;parseURL();
    //This works because I put the rewrite rules in IIS; 
    //Our RewriteRule in IIS (or Apache) is ^(.+)$  This is any character saved to a variable.
    //The new location is index.php?url=$1 [QSA, L].  This will look a little different after you import it into IIS.

    if (file_exists(&#39;app\\controllers\\&#39; . $url[0] . &#39;.controller.php&#39;)){
        $this-&gt;_controller = $url[0];
        $this-&gt;_model = $url[0];
        unset($url[0]);  //Unset removes that element from the array; 
        //var_dump($url);
    }

    //Get the controller and model.  All done by convention over configuration;
    require_once &#39;app\\controllers\\&#39; . $this-&gt;_controller . &#39;.controller.php&#39;;
    require_once &#39;app\\models\\Parent.model.php&#39;;

    //get a new Database object from the bootstrap;
    $_DB = new DatabaseBootstrap();

    $this-&gt;_controller = $this-&gt;_controller . &#34;Controller&#34;; 

    $this-&gt;_model = new ParentModel($_DB-&gt;getAdapter());
    $this-&gt;_controller = new $this-&gt;_controller($this-&gt;_model);

    //This checks to see if our method from the url exists;
    //Your querystring will look like this - http://server/virtualdirectory/controller/action/variables1/variable2.....

    if(isset($url[1])){
        if(method_exists($this-&gt;_controller,$url[1])){
            $this-&gt;_method = $url[1];
            unset($url[1]);
        }
    }

    $this-&gt;_params = $url ? array_values($url) : [];

    //This calls your controller and your method and sends over your array of parameters
    call_user_func_array([$this-&gt;_controller, $this-&gt;_method],$this-&gt;_params)
}

public function parseURL(){
    if(isset($_GET[&#39;url&#39;])){
        return $url = explode(&#39;/&#39;,filter_var(rtrim($_GET[&#39;url&#39;],&#39;/&#39;),FILTER_SANITIZE_URL));
        }
    }
</code></pre><p>EDIT:  Based upon my reading of the answers, it appears I cannot use REST natively as in using HTTP verbs.  I either have to use the name of the types in AJAX or I have to have a hidden field that contains my REST method like so (<a href="http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html" rel="nofollow">example from cakePHP</a>):</p><pre><code>&lt;form id=&#34;RecipeEditForm&#34; method=&#34;post&#34; action=&#34;/recipes/edit/5&#34;&gt;
&lt;input type=&#34;hidden&#34; name=&#34;_method&#34; value=&#34;PUT&#34; /&gt;
</code></pre><p>And it seems this is done for the &#34;greater good.&#34;  That is, so that others can consume my API services using libraries such as curl or using AJAX where one can create any request method they wish (?).  Since we are using a REST architecture, the consumer using the API would simply put PUT, DELETE, etc.  Some future architecture might not use those verbs, so we make up new keywords.  It&#39;s just that PUT, etc. are in the w3 specs for HTTP, which are not very well supported.?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>One popular php framework allows faking PUT/DELETE requests by adding a _method=PUT argument to your form action:</p><pre><code>&lt;form method=&#34;POST&#34; action=&#34;/customers/12345?_method=PUT&#34;&gt;
</code></pre><p>Internally, the framework converts the POST request to a PUT request.</p><p><a href="http://symfony.com/doc/current/cookbook/routing/method_parameters.html#faking-the-method-with-method" rel="nofollow">http://symfony.com/doc/current/cookbook/routing/method_parameters.html#faking-the-method-with-method</a></p><p>Easy enough to implement.  But I would follow @vrostu&#39;s advice and look into a javascript REST framework instead of trying to use forms.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-using-default-parameters-for-404-error-php-with-mvc-design/'>Php &#8211; Using default parameters for 404 error (PHP with mvc design)</a></li><li class="list-group-item"><a href='../rest-a-web-application-as-a-rest-api-client-how-to-handle-resource-identifiers/'>Rest &#8211; A Web application as a REST API client: how to handle resource identifiers</a></li><li class="list-group-item"><a href='../php-slower-ajax-response/'>Php &#8211; Slower Ajax Response</a></li><li class="list-group-item"><a href='../php-designing-a-ticketing-system-where-the-user-and-administrator-have-similar-but-different-functionality/'>Php &#8211; Designing a ticketing system where the User and Administrator have similar but different functionality</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>