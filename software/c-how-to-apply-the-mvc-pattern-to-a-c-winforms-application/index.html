<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; How to apply the MVC pattern to a C# WinForms application &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1066269 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1066269" class="post-1066269 software type-software status-publish hentry category-software tag-c tag-mvc tag-winforms"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; How to apply the MVC pattern to a C# WinForms application</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">mvc</span><span class="mr-2 badge badge-warning">winforms</span></p><div class="entry-content"><p>I&#39;m a C++ developer who has been using the MVC pattern to design GUIs ever since.</p><p>Recently I wanted to get back into C#, and I set up a Windows Forms application, but now I am a little bit lost on how to push it to a MVC compliant structure.</p><p>What I am currently trying to do is to &#34;declare&#34; the class I am given for the WinForms as a View, and add a class for the Model and Controller in the background. However, I am not really sure on how to interact with events, like a button click. Usually I would redirect these events to the controller, and perform an action on the View once I am done.</p><p>This feels pretty unsatisfying in this constellation though. For example, if I wanted to implement an &#34;Exit&#34; button, I would have to redirect the event from the View to the Controller, as well as implement an extra public method in my View which can then be called from the Controller, while I could simply call Close() from the View in the first instance.</p><p>Do you have any advice for me? Is my understanding of Windows Forms in C# just not good enough yet to try out a MVC implementation? Am I giving the forms class a wrong role? Is MVC simply an inappropriate architecture for this use case?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Coincidentally, I am working on a WinForms project that is patterned after MVC. I wouldn&#39;t call this a perfect answer, but I will explain my overall design and hopefully this can help you come up with your own.</p><p>Based on the reading I did before starting this project, there seems to be no &#34;right&#34; way to implement this. I followed simple OOP and MVC design principles and the rest was trial and error as I developed a workflow.</p><blockquote><p>Is MVC simply an inappropriate architecture for this use case?</p></blockquote><p><em>No</em>..? There is not enough context in your question to provide a direct answer to that. Why are you using MVC in the first place? What are the non functional requirements of your project? Is your project going to be very UI heavy? Do you care more about security and would rather a layered architecture? What are the main components of your project? Perhaps each component needs a different design pattern. Find out why you want to use this design pattern in the first place and you might answer your own question ;)</p><p>My reason for using MVC: its a fairly simple design pattern to understand in my opinion and my design is based heavily on user interaction. The way MVC allows the developer to seperate concerns is sufficient for my application as well. This makes my code <strong>alot</strong> more maintainable and testable.</p><p>I also suppose I am using more of a hybrid design. Usually, the ideal concept presented in software engineering does not actually play out in practice. You can modify the design to suit the needs of your project. No need to get caught up in what is right or wrong. There are general practices, but rules can always be bent or broken as long as you don&#39;t shoot yourself in the foot.</p><p>My implementation started with a high level design which gave me an idea on what components I will need. Its best to start this way and work your way down in the architecture. Here is the package diagram for the project (created in StarUML): <a href="../../../i.stack.imgur.com/9x8yL.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/9x8yL.png" alt="enter image description here"/></a></p><p>Notice every single layer except the presentation layer depends on the Messaging System. This is a common &#34;language&#34; which the lower layers and sub systems of those layers use to communicate with each other. In my case, it was a simple enumeration based on operations that can be performed. Which brings me to the next point...</p><p>Think of operations or commands as the basis for your implementation. What do you want your application to do? Break it down into the most fundamental operations. For example: CreateProject, WriteNotes, SaveProject, LoadProject etc. The GUI (or Form classes) are going to have some event occur (like a button press). Every operation has a controller method associated with it. In this case something like Exit is too simple. The application can simply be closed from the Form class. But suppose I wanted to persist some application data to a file first? I will call the &#34;Save&#34; method from the respective controller class within my button press method.</p><p>From there, the controller will call the correct set of operations from the  Service classes. The service classes in my application act as an interface to the domain layer. They will validate input received from the controller method call (and thus from the GUI) and manipulate the data model.</p><p>Once validation and the corresponding object manipulation is complete, the service method will return a message code to the controller. For example, <code>MessageCodes.SaveSuccess</code>. Both the controller and service classes were based on the domain objects and/or the general set of operations that can be grouped together.</p><p>For example: <code>FileMenuController</code> (operations: NewProject, SaveProject, LoadProject) -&gt; <code>ProjectServices</code> (CreateProject, PersistProjectToFile, LoadProjectFromFile). Where <code>Project</code> would be a domain class in your data model. Controller and Service classes in my case were non-instantiable classes with static methods.</p><p>Then, the controller recognizes the operation as completing un/successfully. Now, the controller has its own messaging system which it uses to interact with the presentation layer, hence the double dependency between the Service and Presentation layers. In this case a class called <code>ViewState</code> in the <code>ViewModels</code> package is always returned to the GUI by the controller. This state contains information like: &#34;<em>is the state you tried to put the application in valid?</em>&#34;, &#34;<em>a human readable message about the operation you tried to perform and why it was or was not successful (error messages)</em>&#34; and a <code>ViewModel</code> class.</p><p>The <code>ViewModel</code> class contains relevant data from the domain layer that the GUI will use to update the view. These view models look like the domain classes but in my case I used very <em>skinny</em> objects. Basically they have pretty much no behaviour, just relay information about the lower level state of the application. In other words, I am <strong>NEVER</strong> going to give away my domain classes to the presentation layer. This is also why the <code>Controllers</code> and <code>Services</code> packages split the service layer into two parts. Controllers will never handle domain classes or validate their state. They just act as a boundary converting GUI relevant data into domain relevant data the services can use and vice -versa.  Including the service logic in the controller would lead to very <em>fat</em> controllers, which are harder to maintain.</p><p>I hope this gives you a starting point.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-how-to-design-an-application-that-read-files-using-mvc-pattern/'>Java &#8211; How to design an application that read files using MVC pattern</a></li><li class="list-group-item"><a href='../object-oriented-how-exactly-to-use-the-mvc-design-pattern/'>Object-oriented &#8211; How exactly to use the MVC design pattern</a></li><li class="list-group-item"><a href='../mvc-how-dumb-should-the-view-be/'>MVC: How dumb should the view be</a></li><li class="list-group-item"><a href='../mvc-how-to-move-from-web-forms-to-asp-net-mvc-5/'>Mvc &#8211; How to move from Web Forms to ASP .NET MVC 5</a></li><li class="list-group-item"><a href='../c-i-have-a-few-questions-about-the-mvp-pattern-in-a-winforms-project/'>C# &#8211; I have a few questions about the MVP pattern in a WinForms project</a></li><li class="list-group-item"><a href='../java-how-to-implement-the-mvc-design-pattern-with-javafx-written-in-pure-java/'>Java &#8211; How to implement the MVC design pattern with JavaFX written in pure Java</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>