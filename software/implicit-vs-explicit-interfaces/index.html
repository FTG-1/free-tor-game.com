<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Implicit vs explicit interfaces &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1068957 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1068957" class="post-1068957 software type-software status-publish hentry category-software tag-duck-typing tag-explicit tag-interfaces tag-polymorphism tag-templates"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Implicit vs explicit interfaces</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">duck-typing</span><span class="mr-2 badge badge-info">explicit</span><span class="mr-2 badge badge-warning">interfaces</span><span class="mr-2 badge badge-primary">polymorphism</span><span class="mr-2 badge badge-danger">templates</span></p><div class="entry-content"><p>I think I understand the actual limitations of compile-time polymorphism and run-time polymorphism. But <strong>what are the conceptual differences between explicit interfaces (run-time polymorphism. ie virtual functions and pointers/references) and implicit interfaces (compile-time polymorphism. ie. templates)</strong>.</p><p>My thoughts are that two objects that offer the same explicit interface must be the same type of object (or have a common ancestor), while two objects that offer the same implicit interface need not be the same type of object, and, excluding the implicit interface that they both offer, can have quite different functionality.</p><p>Any thoughts on this?</p><p>And if two objects offer the same implicit interface, what reasons (beside the technical benefit of not needing dynamic dispatch w/ a virtual function lookup table, etc) are there for not having these objects inherit from a base object that declares that interface, thus making it an <em>explicit</em> interface? Another way of saying it: can you give me a case where two objects that offer the same implicit interface (and therefore can be used as types to the sample template class) should not inherit from a base class that makes that interface explicit?</p><p>Some related posts:</p><ul><li><a href="https://stackoverflow.com/a/7264550/635125">https://stackoverflow.com/a/7264550/635125</a></li><li><a href="https://stackoverflow.com/a/7264689/635125">https://stackoverflow.com/a/7264689/635125</a></li><li><a href="https://stackoverflow.com/a/8009872/635125">https://stackoverflow.com/a/8009872/635125</a></li></ul><hr/><p>Here&#39;s an example to make this question more concrete:</p><p>Implicit Interface:</p><pre class="lang-cxx prettyprint-override"><code>class Class1
{
public:
  void interfaceFunc();
  void otherFunc1();
};

class Class2
{
public:
  void interfaceFunc();
  void otherFunc2();
};

template &lt;typename T&gt;
class UseClass
{
public:
  void run(T &amp; obj)
  {
    obj.interfaceFunc();
  }
};
</code></pre><p>Explicit Interface:</p><pre class="lang-cxx prettyprint-override"><code>class InterfaceClass
{
public:
  virtual void interfaceFunc() = 0;
};

class Class1 : public InterfaceClass
{
public:
  virtual void interfaceFunc();
  void otherFunc1();
};

class Class2 : public InterfaceClass
{
public:
  virtual void interfaceFunc();
  void otherFunc2();
};

class UseClass
{
public:
  void run(InterfaceClass &amp; obj)
  {
    obj.interfaceFunc();
  }
};
</code></pre><hr/><p>An even more in-depth, concrete example:</p><p>Some C++ problems can be solved with either:</p><ol><li>a templated class whose template type provides an implicit interface</li><li>a non-templated class that takes a base-class pointer which provides an explicit interface</li></ol><p>Code that doesn&#39;t change:</p><pre class="lang-cxx prettyprint-override"><code>class CoolClass
{
public:
  virtual void doSomethingCool() = 0;
  virtual void worthless() = 0;
};

class CoolA : public CoolClass
{
public:
  virtual void doSomethingCool()
  { /* Do cool stuff that an A would do */ }

  virtual void worthless()
  { /* Worthless, but must be implemented */ }
};

class CoolB : public CoolClass
{
public:
  virtual void doSomethingCool()
  { /* Do cool stuff that a B would do */ }

  virtual void worthless()
  { /* Worthless, but must be implemented */ }
};
</code></pre><p><strong>Case 1</strong>. A non-templated class that takes a base-class pointer which provides an explicit interface:</p><pre class="lang-cxx prettyprint-override"><code>class CoolClassUser
{
public:  
  void useCoolClass(CoolClass * coolClass)
  { coolClass.doSomethingCool(); }
};

int main()
{
  CoolA * c1 = new CoolClass;
  CoolB * c2 = new CoolClass;

  CoolClassUser user;
  user.useCoolClass(c1);
  user.useCoolClass(c2);

  return 0;
}
</code></pre><p><strong>Case 2</strong>. A templated class whose template type provides an implicit interface:</p><pre class="lang-cxx prettyprint-override"><code>template &lt;typename T&gt;
class CoolClassUser
{
public:  
  void useCoolClass(T * coolClass)
  { coolClass-&gt;doSomethingCool(); }
};

int main()
{
  CoolA * c1 = new CoolClass;
  CoolB * c2 = new CoolClass;

  CoolClassUser&lt;CoolClass&gt; user;
  user.useCoolClass(c1);
  user.useCoolClass(c2);

  return 0;
}
</code></pre><p><strong>Case 3</strong>. A templated class whose template type provides an implicit interface (this time, not deriving from <code>CoolClass</code>:</p><pre class="lang-cxx prettyprint-override"><code>class RandomClass
{
public:
  void doSomethingCool()
  { /* Do cool stuff that a RandomClass would do */ }

  // I don&#39;t have to implement worthless()! Na na na na na!
}


template &lt;typename T&gt;
class CoolClassUser
{
public:  
  void useCoolClass(T * coolClass)
  { coolClass-&gt;doSomethingCool(); }
};

int main()
{
  RandomClass * c1 = new RandomClass;
  RandomClass * c2 = new RandomClass;

  CoolClassUser&lt;RandomClass&gt; user;
  user.useCoolClass(c1);
  user.useCoolClass(c2);

  return 0;
}
</code></pre><p>Case 1 requires that the object being passed in to <code>useCoolClass()</code> be a child of <code>CoolClass</code> (and implement <code>worthless()</code>). Cases 2 and 3, on the other hand, will take <em>any</em> class that has a <code>doSomethingCool()</code> function.</p><p>If users of the code were always fine subclassing <code>CoolClass</code>, then Case 1 makes intuitive sense, since the <code>CoolClassUser</code> would always be expecting an implementation of a <code>CoolClass</code>. But assume this code will be part of an API framework, so I cannot predict if users will want to subclass <code>CoolClass</code> or roll their own class that has a <code>doSomethingCool()</code> function.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You&#39;ve already defined the important point- one is <em>run-time</em> and the other is <em>compile-time</em>. The real information you need is the ramifications of this choice.</p><p>Compiletime:</p><ul><li>Pro: Compile-time interfaces are much more granular than run-time ones. By that, what I mean is that you can use only the requirements of a single function, or a set of functions, as you call them. You don&#39;t have to always do the whole interface. The requirements are only and exactly what you need.</li><li>Pro: Techniques like CRTP mean that you can use implicit interfaces to default implementations of things like operators. You could never do such a thing with run-time inheritance.</li><li>Pro: Implicit interfaces are <em>much</em> easier to compose and multiply &#34;inherit&#34; than run-time interfaces, and don&#39;t impose any kind of binary restrictions- for example, POD classes can use implicit interfaces. There&#39;s no need for <code>virtual</code> inheritance or other shenanigans with implicit interfaces- a big advantage.</li><li>Pro: The compiler can do way more optimizations for compile-time interfaces. In addition, the extra type safety makes for safer code.</li><li>Pro: It&#39;s impossible to do value typing for run-time interfaces, because you don&#39;t know the size or alignment of the final object. This means that any case which needs/benefits from value typing gains big benefits from templates.</li><li>Con: Templates are a bitch to compile and use, and they can be fiddly porting between compilers</li><li>Con: Templates cannot be loaded at run-time (obviously), so they have limits in expressing dynamic data structures, for example.</li></ul><p>Runtime:</p><ul><li>Pro: The final type doesn&#39;t have to be decided until run-time. This means that run-time inheritance can express some data structures much easier, if templates can do it at all. Also you can export run-time polymorphic types across C boundaries, for example, COM.</li><li>Pro: It&#39;s much easier to specify and implement run-time inheritance, and you won&#39;t really get any compiler-specific behaviour.</li><li>Con: Run-time inheritance can be slower than compile-time inheritane.</li><li>Con: Run-time inheritance loses type information.</li><li>Con: Run-time inheritance is way less flexible.</li><li>Con: Multiple inheritance is a bitch.</li></ul><p>Given the relative list, if you do not need a <em>specific</em> advantage of run-time inheritance, do not use it. It is slower, less flexible, and less safe than templates.</p><p>Edit: It&#39;s worth noting that in C++ particularly there are uses for inheritance <em>other</em> than run-time polymorphism. For example, you can inherit typedefs, or use it for type tagging, or use the CRTP. Ultimately, though, these techniques (and others) really fall under &#34;Compile-time&#34;, even though they are implemented using <code>class X : public Y</code>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-limitations-of-polymorphism-in-statically-typed-languages/'>Java &#8211; Limitations of Polymorphism in statically typed languages</a></li><li class="list-group-item"><a href='../design-implicit-optimization-versus-explicit-optimization/'>Design &#8211; Implicit optimization versus explicit optimization</a></li><li class="list-group-item"><a href='../python-duck-typing-data-validation-and-assertive-programming-in-python/'>Python &#8211; Duck typing, data validation and assertive programming in Python</a></li><li class="list-group-item"><a href='../object-oriented-classic-inheritance-problem/'>Object-oriented &#8211; Classic inheritance problem</a></li><li class="list-group-item"><a href='../c-how-to-best-to-organize-class-and-interface-files/'>C# &#8211; How to best to organize class and interface files</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>