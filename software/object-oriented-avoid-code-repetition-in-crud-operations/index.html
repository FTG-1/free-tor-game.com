<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Avoid code repetition in CRUD operations &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083120 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083120" class="post-1083120 software type-software status-publish hentry category-software tag-dry tag-object-oriented tag-php"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Avoid code repetition in CRUD operations</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">dry</span><span class="mr-2 badge badge-info">object-oriented</span><span class="mr-2 badge badge-warning">PHP</span></p><div class="entry-content"><p>I&#39;m developing a PHP application and I find myself doing basically the same code for, say, creating an object based on a form filled by the user.</p><p>The objects are of different classes, but the process is mostly the same: take the data from the form, apply validation, save/return error.</p><p>Is there a way to automatize this process? I ask also because I intend to write a public API and use the same code to do those operations, instead of just copy/pasting.</p><p>I thought of making a kind of <a href="http://en.wikipedia.org/wiki/Factory_method_pattern#PHP_2" rel="nofollow">Factory Method pattern</a> that receives the type and the data from the form (or any array), create an instance and set the data, testing the validation afterwards (each object knows how to validate their own fields). And that for each of the other CRUD operations as well.</p><p>Is that feasible/good practice? Should I just repeat the similar code? There are any other way to do it?</p><p>For the record, I&#39;m using ORM already (Doctrine). Still, I think that a lot of <code>create</code> functions with pretty much the same code (a bunch of <code>set*</code>) is something too repetitive.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If you&#39;re not already using an ORM, you&#39;re probably doing it wrong, because you&#39;re not taking advantage of the leverage that an ORM can provide to the practice of writing CRUD methods.</p><p>However, there&#39;s a bit of history to all this, so I&#39;m now going to tell you a little bedtime story.</p><p>In the beginning, there were SQL databases, and life was good.  Web sites were pretty sparse little affairs, and everyone got along by writing data access code by hand.</p><p>Then the wolly mammoths came.</p><p><img src="https://i.stack.imgur.com/ObMni.jpg" alt="enter image description here"/></p><p>No, not that wooly mammoth.</p><p><strong>This</strong> woolly mammoth.  Databases that encompass an entire business domain:</p><p><img src="https://i.stack.imgur.com/g9BqR.png" alt="enter image description here"/></p><p>Suddenly, data access code written by hand didn&#39;t cut it anymore.  So we invented ORM&#39;s, code-generation programs that produced one class for each table, complete with CRUD methods.  It&#39;s a lot of code, but you didn&#39;t have to write it, did you?</p><p>Great story, huh bro?  Well, not exactly.</p><p>You see, someone came along and said &#34;Why do I need to know database theory, when I could just write my classes and then have the ORM generate my tables for me?&#34;</p><p>OK, but now you&#39;re gonna have to write all of those classes by hand, aren&#39;t you?</p><p>Which brings us to the question you asked, which essentially is this: why can&#39;t I just write a function that accepts a type T, and returns an object of type T, like this?</p><pre><code>public T Read(int id); // C#, for those of you so challenged.
</code></pre><p><em>Sigh.</em> Well, you can, actually.  It&#39;s called a Generic Repository.  If you want to find out how to build one, you can look <a href="http://www.devshed.com/c/a/PHP/Roll-Your-Own-Repository-in-PHP-Defining-a-Generic-Data-Mapper/" rel="noreferrer">here</a>.  It starts with something like this:</p><pre><code>public function select($table, $where = &#39;&#39;, $fields = &#39;*&#39;, $order = &#39;&#39;, $limit = null, $offset = null)
{
    $query = &#39;SELECT &#39; . $fields . &#39; FROM &#39; . $table
           . (($where) ? &#39; WHERE &#39; . $where : &#39;&#39;)
           . (($limit) ? &#39; LIMIT &#39; . $limit : &#39;&#39;)
           . (($offset &amp;&amp; $limit) ? &#39; OFFSET &#39; . $offset : &#39;&#39;)
           . (($order) ? &#39; ORDER BY &#39; . $order : &#39;&#39;);
    $this-&gt;query($query);
    return $this-&gt;countRows();
}
</code></pre><p>...and builds on that humble beginning (and other functions to round out the CRUD) to create a complete generic repository.  Add some IoC to it, and you&#39;ll have something that any Architecture Astronaut would consider worthy enough to take to interstellar space.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/validation-of-the-input-parameter-in-caller-code-duplication/'>Validation of the input parameter in caller: code duplication</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-does-the-aggregate-root-concept-and-the-repository-pattern-solve-dry-in-database-operations/'>How does the Aggregate Root concept and the Repository Pattern solve DRY in database operations</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/object-oriented-architecture-design-pattern-for-login-signup/'>Object-oriented &#8211; Architecture / Design Pattern for Login Signup</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>