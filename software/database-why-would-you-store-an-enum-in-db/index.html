<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; Why would you store an enum in DB &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063204 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063204" class="post-1063204 software type-software status-publish hentry category-software tag-database tag-database-design tag-design tag-enum"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; Why would you store an enum in DB</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">database</span><span class="mr-2 badge badge-info">database-design</span><span class="mr-2 badge badge-warning">design</span><span class="mr-2 badge badge-primary">enum</span></p><div class="entry-content"><p>I&#39;ve seen a number of questions, like <a href="https://stackoverflow.com/questions/229856/ways-to-save-enums-in-database">this</a>, asking for advice on how to store enums in DB. But I wonder <strong>why</strong> would you do that. So let&#39;s say that I have an entity <code>Person</code> with a <code>gender</code> field, and a <code>Gender</code> enum. Then, my person table has a column gender.</p><p>Besides the obvious reason of enforcing correctness, I don&#39;t see why I would create an extra table <code>gender</code> to map what I already have in my application. And I don&#39;t really like having that duplication.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Let&#39;s take another example that is less fraught with conceptions and expectations. I&#39;ve got an enum here, and it is the set of priorities for a bug.</p><h3>What value are you storing in the database?</h3><p>So, I could be storing <code>&#39;C&#39;</code>, <code>&#39;H&#39;</code>, <code>&#39;M&#39;</code>, and <code>&#39;L&#39;</code> in the database. Or <code>&#39;HIGH&#39;</code> and so on. This has the problem of <em>stringly-typed</em> data. There&#39;s a known set of valid values, and if you <em>aren&#39;t</em> storing that set in the database, it can be difficult to work with.</p><h3>Why are you storing the data in the code?</h3><p>You&#39;ve got <code>List&lt;String&gt; priorities = {&#39;CRITICAL&#39;, &#39;HIGH&#39;, &#39;MEDIUM&#39;, &#39;LOW&#39;};</code> or something to that effect in the code. It means that you&#39;ve got various mappings of this data to the proper format (you&#39;re inserting all caps into the database, but you&#39;re displaying it as <code>Critical</code>). Your code is now also difficult to localize.  You have bound the database representation of the idea to a string that is stored in the code.</p><p>Anywhere you need to access this list, you either need to have code duplication or a class with a bunch of constants. Neither of which are good options. One should also not forget that there are <em>other</em> applications that may use this data (which may be written in other languages - the Java web application has a <a href="http://en.wikipedia.org/wiki/Crystal_Reports" rel="noreferrer">Crystal Reports</a> reporting system used and a <a href="http://en.wikipedia.org/wiki/Perl" rel="noreferrer">Perl</a> batch job feeding data into it). The reporting engine would need to know the valid list of data (what happens if there&#39;s nothing marked in <code>&#39;LOW&#39;</code> priority and you need to know that that is a valid priority for the report?), and the batch job would have the information about what the valid values are.</p><p>Hypothetically, you <em>might</em> say &#34;we&#39;re a single-language shop - everything is written in Java&#34; and have a single .jar that contains this information - but now it means that your <em>applications</em> are tightly coupled to each other and that .jar containing the data. You&#39;ll need to release the reporting part and the batch update part along with the web application each time there is a change - and <em>hope</em> that that release goes smoothly for all parts.</p><h3>What happens when your boss wants another priority?</h3><p>Your boss came by today. There&#39;s a new priority - <code>CEO</code>. Now you have to go and change all the <em>code</em> and do a recompile and redeploy.</p><p>With an &#39;enum-in-the-table&#39; approach, you update the enum list to have a new priority. All the code that gets the list pulls it from the database.</p><h3>Data rarely stands alone</h3><p>With priorities, the data keys into <em>other</em> tables that might contain information about workflows, or who can set this priority or whatnot.</p><p>Going back to the gender as mentioned in the question for a bit: Gender has a link to the pronouns in use: <code>he/his/him</code> and <code>she/hers/her</code>... and you want to avoid hard coding that into the code itself. And <em>then</em> your boss comes by and you need to add you&#39;ve got the <code>&#39;OTHER&#39;</code> gender (to keep it simple) and you need to relate this gender to <code>they/their/them</code>... and your boss sees what Facebook has and... well, yeah.</p><p>By restricting yourself to a stringly-typed bit of data rather than an enum table, you&#39;ve now needed to replicate that string in a bunch of other tables to maintain this relationship between the data and its other bits.</p><h3>What about other datastores?</h3><p>No matter where you store this, the same principle exists.</p><ul><li><p>You could have a file, <code>priorities.prop</code>, that has the list of priorities. You read this list in from a property file.</p></li><li><p>You could have a document store database (like <a href="http://en.wikipedia.org/wiki/CouchDB" rel="noreferrer">CouchDB</a>) that has an entry for <code>enums</code> (and then <a href="http://guide.couchdb.org/draft/validation.html" rel="noreferrer">write a validation function in JavaScript</a>):</p><pre><code>  {
     &#34;_id&#34;: &#34;c18b0756c3c08d8fceb5bcddd60006f4&#34;,
     &#34;_rev&#34;: &#34;1-c89f76e36b740e9b899a4bffab44e1c2&#34;,
     &#34;priorities&#34;: [ &#34;critical&#34;, &#34;high&#34;, &#34;medium&#34;, &#34;low&#34; ],
     &#34;severities&#34;: [ &#34;blocker&#34;, &#34;bad&#34;, &#34;annoying&#34;, &#34;cosmetic&#34; ]
  }
</code></pre></li><li><p>You could have an XML file with a bit of a schema:</p><pre><code>  &lt;xs:element name=&#34;priority&#34; type=&#34;priorityType&#34;/&gt;

  &lt;xs:simpleType name=&#34;priorityType&#34;&gt;
    &lt;xs:restriction base=&#34;xs:string&#34;&gt;
      &lt;xs:enumeration value=&#34;critical&#34;/&gt;
      &lt;xs:enumeration value=&#34;high&#34;/&gt;
      &lt;xs:enumeration value=&#34;medium&#34;/&gt;
      &lt;xs:enumeration value=&#34;low&#34;/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
</code></pre></li></ul><p>The core idea is the same. The data store itself is where the list of valid values needs to be stored and enforced. By placing it here, it is easier to reason about the code and the data. You don&#39;t have to worry about defensively checking what you have each time (is it upper case? or lower? Why is there a <code>critical</code> type in this column? etc...) because you know what you are getting back from the datastore is exactly what the datastore is expecting you to send otherwise - and you can query the datastore for a list of valid values.</p><h3>The takeaway</h3><p>The set of valid values is <em>data</em>, not code. You <em>do</em> need to strive for <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noreferrer">DRY</a> code - but the issue of duplication is that you are duplicating the <em>data</em> in the code, rather than respecting its place as data and storing it in a database.</p><p>It makes writing multiple applications against the datastore easier and avoids having instances where you will need to deploy everything that is tightly coupled to the data itself - because you <em>haven&#39;t</em> coupled your code to the data.</p><p>It makes testing applications easier because you don&#39;t have to retest the entire application when the <code>CEO</code> priority is added - because you don&#39;t have any code that cares about the actual value of the priority.</p><p>Being able to reason about the code and the data independently from each other makes it easier to find and fix bugs when doing maintenance.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-sql-empty-string-vs-null-value/'>Database &#8211; SQL: empty string vs NULL value</a></li><li class="list-group-item"><a href='../database-why-dont-relational-databases-support-returning-information-in-a-nested-format/'>Database &#8211; Why don&#8217;t relational databases support returning information in a nested format</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>