<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; Web API: REST-ish pattern for flexible querying of time-series data &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081636 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081636" class="post-1081636 software type-software status-publish hentry category-software tag-api-design tag-rest tag-web-api"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; Web API: REST-ish pattern for flexible querying of time-series data</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api-design</span><span class="mr-2 badge badge-info">rest</span><span class="mr-2 badge badge-warning">web-api</span></p><div class="entry-content"><p>I&#39;m working on a product that exposes a RESTful API to interact with system entities (the usual CRUD), which works very well.</p><p>In addition to CRUD, we&#39;ve recently encountered a need to expose the ability to query different time series based data, with different filters and at varying aggregation resolutions (but based on pretty much the same aggregate functions).</p><p>For example, consider a system that manages wind turbines. You would have usual CRUD operations to add / remove turbines, but also some kind of API to query the turbines electrical output or the rotation speed over time. You might want to get these metrics averaged out across all turbines in a site, or for a single turbine, or for all turbines from a specific maker (these are your &#34;filters&#34;). You might want the raw data (that is every measurement done in a given time period), or hourly data points, or daily or weekly ones (this is your granularity or resolution).</p><p>You can safely assume that all queries have a start / end time filters and that sorting is always based on time.</p><p>The main consumer of this data is a GUI that renders charts based on it. It is helpful, although not strictly required, that multiple metrics are encapsulated in a single endpoint (that is you can get both the turbine&#39;s rotation speed and output for a point in time with a single query).</p><p>What we&#39;ve done historically is consider such a data point as a REST entity (say we call it <code>TurbineStats</code>), and have an endpoint that only supported listing entities, and accept filters &amp; resolution as query parameters. For example:</p><pre><code>GET /turbine/stats ⏎
    ?start=2018-01-01T10:11:12 ⏎
    &amp;end=2018-01-01T10:11:12 ⏎
    &amp;site_id=1234abcd ⏎
    &amp;model=ABCXYZ ⏎
    &amp;resolution=hourly

[
    {     
         &#34;timestamp&#34;: &#34;2018-01-01T11:00:00&#34;,
         &#34;rotation_speed&#34;: 523.53,
         &#34;output_kwh&#34;: 20.5
    },
    {     
         &#34;timestamp&#34;: &#34;2018-01-01T12:00:00&#34;,
         &#34;rotation_speed&#34;: 433.13,
         &#34;output_kwh&#34;: 18.5
    },
    {     
         &#34;timestamp&#34;: &#34;2018-01-01T13:00:00&#34;,
         &#34;rotation_speed&#34;: 569.0,
         &#34;output_kwh&#34;: 24.1
    },
    ...
]
</code></pre><p>This works, but feels to us more and more like an anti-pattern, mostly because:</p><ul><li>While entities look more or less the same and have the same fields, the data can have different meaning depending on the query. For example <code>rotation_speed</code> can be exact or averaged.</li><li>There&#39;s important meta-data (like what are the filters, how many points were considered, how many turbines are included, etc.) which can be included as part of the entities but mixing data and metadata feels awkward.</li><li>Requesting a single entity makes little sense. This is basically a &#34;list only&#34; API</li><li>Entities are computed and do not have unique identifiers. We can come up with computed identifier but it feels like we&#39;re doing that just to be &#34;RESTful&#34; and not for a real use.</li></ul><p>Can you give an example of time series querying API that works well and feels well-designed, RESTful or not? Are there any good patterns to look at?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>REST is not perfect. It&#39;s essentially object focused, and you create and delete those objects. That means OPERATIONS are not in the REST sweet spot ;-)</p><p>Before REST became popular, the &#39;in&#39; way to do web-services was SOAP. It had no objects, and instead was OPERATION focused. It handled beautifully what you are looking for.</p><p>The truth is that neither approach works very well, but REST is in vogue today, so it makes sense to structure your web services using this approach.</p><p>But start out understanding, that for a good percentage of your design (how much vary&#39;s a great deal from project to project) - you will need to stretch the definitions/best practices to make sense for your application.</p><p>What many people do with REST to deal with this problem, is conceptualize &#39;virtual objects&#39;. These (generally) cannot be created, but are in essence views or ways to package up your operations in vaguely a object-oriented organization.</p><p>That&#39;s basically what you&#39;ve come up with on your own (except that when people do it, they often make the objects sibling to the CRUD objects, not sub-objects), its the best approach I&#39;m aware of when using a REST pattern.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-the-best-pattern-for-adding-an-existing-item-to-a-collection-in-rest-api/'>Rest &#8211;  the best pattern for adding an existing item to a collection in REST API</a></li><li class="list-group-item"><a href='../rest-a-separate-endpoint-specifically-for-sync-in-a-rest-api/'>Rest &#8211; A separate endpoint specifically for sync in a REST api</a></li><li class="list-group-item"><a href='../rest-api-design-for-web-pages-with-wizards/'>REST API design for web pages with wizards</a></li><li class="list-group-item"><a href='../rest-can-a-rest-api-return-multiple-resources-as-one-single-compound-resource/'>Rest &#8211; Can a REST API return multiple resources as one single compound resource</a></li><li class="list-group-item"><a href='../rest-designing-a-rest-api-with-resource-relationships/'>Rest &#8211; Designing a REST API with resource relationships</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>