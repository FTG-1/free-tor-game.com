<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Logging paradigms, DI/IoC, object hierarchies &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087172 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087172" class="post-1087172 software type-software status-publish hentry category-software tag-c tag-dependency-injection tag-design-patterns tag-logging"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Logging paradigms, DI/IoC, object hierarchies</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">dependency-injection</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">logging</span></p><div class="entry-content"><p>I&#39;m trying to figure out how to support the following example scenario</p><p>ill be using C# as the example language.</p><h2>Scenario</h2><p>NASA is sending <strong>Rovers</strong> and <strong>Satellites</strong> to different <strong>Planets</strong></p><p>these vehicles need a lot of logging, and to reduce clutter, would like to be able to filter these logs in the following ways:</p><p>i should be able to combine/pick one of these:</p><ul><li>Log only <strong>Rovers</strong> in <strong>Mercury</strong></li><li>Log everything on <strong>Mars</strong></li><li>Log all <strong>Satellites</strong></li></ul><h2>Implementation</h2><p>Object Graph</p><p><a href="../../../i.stack.imgur.com/4Dhq8.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/4Dhq8.png" alt="Object Graph"/></a></p><p>so we have 3 object types, Planet, Rover and Satellite</p><p>Earth contains 3 Satellite&#39;s</p><p>Mars contains 1 Satellite, and 2 Rovers.</p><p>Mercury contains 2 Satellite&#39;s and 1 Rover.</p><p>the usual way to add a log to objects is as such:</p><pre><code>public class Mars : Planet {

 private static ILog Log = LogManager.GetCurrentClassLogger();

}
</code></pre><p>this would usually return a logger named &#34;NASA.Mars&#34;<br /> which makes it easy to simply configure the framework to log all &#34;NASA.Mars&#34;<br /> the same would happen with a Rover</p><pre><code>public class Rover {
 private static ILog Log = LogManager.GetCurrentClassLogger();
}
</code></pre><p>I would get a logger named &#34;NASA.Rover&#34;</p><p>but how could would I know that rover is in mercury? since this is a requirement of the logging subsystem, it shouldn&#39;t exist as property on the <strong>Rover</strong> class.</p><h2>Idea</h2><p>Dependency injection</p><p>if i design my classes to accept an ILog instance in the constructor I could in theory, control a child objects log name</p><p>(possible to use the parent <strong>Planet</strong> class, omitted for brevity)</p><pre><code>public class Mars : Planet {
  private static ILog Log = LogManager.GetCurrentClassLogger();

  void Mars() {
    this.Rovers.Add(new Rover(LogManager.GetLogger(Log.Name + &#34;.Rover&#34;));
  } 
}

public class Rover {
 private ILog Log;

 void Rover(ILog log) {
   Log = log;
 }
}
</code></pre><p>My problems with this approach:</p><ul><li>creating a logger for each child object feels kind of &#34;off&#34; perhaps even an anti-pattern</li><li>this can get very messy when dealing with deeper levels of hierarchy (think planet -&gt; area -&gt; station -&gt; rover )</li><li>deciphering object hierarchy from the logger name string (NASA.Mars.Rover) is problematic (wild cards sometimes wont be enough, some names might not be unique enough).</li></ul><p>I&#39;m looking for a good idea to solve this, without cluttering code, something generic</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>With the limited amount of information, I am making the assumption that planets themselves don&#39;t require logging, it&#39;s only the readings from Rovers and Satellites that do (they are the monitoring devices). In that case each Rover and Satellite should have their own instance of a logger, but perhaps log to the same log file.</p><p>By flipping your design to instead of Planets owning Rovers and Satellites, Satellites and Rovers tracking their point of origin, you could simplify this problem.</p><pre><code>public class Satellite
{
    private ILog Log;
    void Satellite(Planet origin)
    {
        //include logic here on when not to instantiate logger e.g. origin.Name != &#34;Mercury&#34;
        Log = LogManager.GetLogger(&#34;Satellite&#34;);
    }
}
</code></pre><p>If you want to keep track of the number of satellites and rovers at each planet you can do so with Linq queries if you keep track of the collection of registered ones and filter them by what planet they are originate from.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-sanity-of-design-for-the-in-memory-object-representations-of-database-rows/'>C# &#8211; Sanity of design for the in-memory object representations of database rows</a></li><li class="list-group-item"><a href='../java-log4j-logger-per-class-vs-logger-per-application/'>Java &#8211; Log4j logger per class vs logger per application</a></li><li class="list-group-item"><a href='../c-has-no-friend-class-what-are-better-options/'>C# has no friend class &#8211; what are better options</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>