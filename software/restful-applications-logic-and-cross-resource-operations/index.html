<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>RESTful applications logic and cross resource operations &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083221 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083221" class="post-1083221 software type-software status-publish hentry category-software tag-api tag-rest tag-web-applications"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">RESTful applications logic and cross resource operations</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">rest</span><span class="mr-2 badge badge-warning">web-applications</span></p><div class="entry-content"><p>I have an RESTful api that allows my users to receive enquiries about their business e.g. &#39;I would like to book service x on date y. Is this available?&#39;. The api saves this information as a resource to the following URI</p><pre><code>users/{userId}/enquiries/{enquiryId}
</code></pre><p>The information shown when this resource is retrieved are the standard sort of things you&#39;d expect from an enquiry &#8211; email, first_name, last_name, address, message</p><p>The api also allows customers to be created for a user. The customer has a login and password and also a profile. The following URIs expose these two resources</p><pre><code>PUT users/{userId}/customers/{customerId}
PUT users/{userId}/customers/{customerId}/profile
</code></pre><p>The problem I am having is that I would like to have the ability to allow users to create a customer from an enquiry. For example, the user is able to offer their service on the date requested and will then want to setup a customer with login details etc to allow them to manage the rest of the process.</p><p>The obvious answer would be to use a URI like</p><pre><code> users/{userId}/enquiries/{enquiryId}/convert-to-client
</code></pre><p>The problem with this is is that it somewhat goes against a lot of what I&#39;ve been reading about how to implement REST (specifically from the book Restful Web Services which suggests that URIs should point to resources not operations on resources).</p><p>The other option would be to get the client application (i.e. the code that calls the api) to handle some of this application logic. This doesn&#39;t quite feel right to me. I have implemented in my design that the client app is fairly dumb. It knows just enough to display the results from the API, and does not contain any application logic.</p><p>Would be great to hear what others views are on the best way of setting this up</p><p>Am I wrong to have no application logic in the client app? How would I perform this operation purely in the REST api?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I <strong>highly</strong> recommend reading <a href="http://shop.oreilly.com/product/9780596529260.do" rel="noreferrer">RESTful Webservices</a>, especially the chapters on the difference between RESTful and RPC style web programming; and the chapters on resource discovery and how to deal with the apparent need for &#34;verbs&#34; (they are usually a different resource in disguise).</p><p>Converting an enquiry to a customer does not need a &#34;convert&#34; verb. You wouldn&#39;t delete the enquiry just because you create a customer and thus you are simply creating a customer with the information from the enquiry as input.</p><pre><code>POST /users/{userId}/customers?enquiry={EnguiryId}
</code></pre><p>or simply</p><pre><code>POST /users/{userId}/customers
</code></pre><p>with the enquiry information in the request body.</p><p>By the way, I use POST on customers because that is the way to do it if the server application is in control of the identifier generation. Only use PUT to create resources if the caller is the one determining the identifiers.</p><p>On a side note: have you considered the security and privacy issues relating to including /users/{UserId} in your URI&#39;s? Anybody can now start trying different userid&#39;s to get at information of different users of your application. You really should consider leaving them off your URI&#39;s and having them determined by the authentication information that should be send with each request (and possibly refreshed with each response).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-when-to-use-nested-resources-in-a-restful-api/'>Rest &#8211; When to use nested resources in a RESTful API</a></li><li class="list-group-item"><a href='../rest-a-web-application-as-a-rest-api-client-how-to-handle-resource-identifiers/'>Rest &#8211; A Web application as a REST API client: how to handle resource identifiers</a></li><li class="list-group-item"><a href='../rest-payment-gateways-and-restful-api/'>Rest &#8211; Payment Gateways and RESTful API</a></li><li class="list-group-item"><a href='../restful-api-resource-path-for-resource-with-complex-relationship/'>RESTful API resource path for resource with complex relationship</a></li><li class="list-group-item"><a href='../rest-relationship-between-restful-uris-and-pubsub-topics/'>Rest &#8211; Relationship between RESTful URIs and PubSub topics</a></li><li class="list-group-item"><a href='../java-rest-api-and-resource-authorization/'>Java &#8211; Rest API and resource authorization</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>