<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Unit testing C++: What to test &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1068569 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1068569" class="post-1068569 software type-software status-publish hentry category-software tag-c tag-integration-tests tag-tdd tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Unit testing C++: What to test</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">integration-tests</span><span class="mr-2 badge badge-warning">tdd</span><span class="mr-2 badge badge-primary">unit testing</span></p><div class="entry-content"><p><strong>TL;DR</strong></p><p>Writing good, useful tests is hard, and has a high cost in C++. Can you experienced developers share your rationale on what and when to test?</p><p><strong>Long story</strong></p><p>I used to do test-driven development, my whole team in fact, but it didn&#39;t work well for us. We have many tests, but they never seem to cover the cases where we have actual bugs and regressions &#8211; which usually occur when units are interacting, not from their isolated behaviour.</p><p>This is often so hard to test on the unit level that we stopped doing TDD (except for components where it really speeds up development), and instead invested more time increasing the integration test coverage. While the small unit tests never caught any real bugs and were basically just maintenance overhead, the integration tests have really been worth the effort.</p><p>Now I&#39;ve inherited a new project, and am wondering how to go about testing it. It&#39;s a native C++/OpenGL application, so integration tests are not really an option. But unit testing in C++ is a bit harder than in Java (you have to explicitely make stuff <code>virtual</code>), and the program isn&#39;t heavily object oriented, so I can&#39;t mock/stub some stuff away.</p><p>I don&#39;t want to rip apart and OO-ize the whole thing just to write some tests for the sake of writing tests. So I&#39;m asking you: What is it I should write tests for? e.g.:</p><ul><li>Functions/Classes that I expect to change frequently?</li><li>Functions/Classes that are more difficult to test manually?</li><li>Functions/Classes that are easy to test already?</li></ul><p>I began to investigate some respectful C++ code bases to see how they go about testing. Right now I&#39;m looking into the Chromium source code, but I&#39;m finding it hard to extract their testing rationale from the code. If anyone has a good example or post on how popular C++ users (guys from the committee, book authors, Google, Facebook, Microsoft, &#8230;) approach this, that&#39;d be extra helpful.</p><p><strong>Update</strong></p><p>I have searched my way around this site and the web since writing this. Found some good stuff:</p><ul><li><a href="https://softwareengineering.stackexchange.com/questions/66480/when-is-it-appropriate-to-not-unit-test?rq=1">When is it appropriate to not unit test?</a></li><li><a href="https://stackoverflow.com/questions/109432/what-not-to-test-when-it-comes-to-unit-testing">https://stackoverflow.com/questions/109432/what-not-to-test-when-it-comes-to-unit-testing</a></li><li><a href="http://junit.sourceforge.net/doc/faq/faq.htm#best" rel="nofollow noreferrer">http://junit.sourceforge.net/doc/faq/faq.htm#best</a></li></ul><p>Sadly, all of these are rather Java/C# centric. Writing lots of tests in Java/C# is not a big problem, so the benefit usually outweights the costs.</p><p>But as I wrote above, it&#39;s more difficult in C++. Especially if your code base is not-so-OO, you have to severely mess things up to get a good unit test coverage. For instance: The application I inherited has a <code>Graphics</code> name space that is a thin layer above OpenGL. In order to test any of the entities &#8211; which all use its functions directly &#8211; I&#39;d have to turn this into an interface and a class and inject it in all the entities. That&#39;s just one example.</p><p>So when answering this question, please keep in mind that I have to make a rather big investment for writing tests.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Well, Unit Testing is only one part. Integration tests help you with the problem of your team.  Integration Tests can be written for all kinds of applications, also for native and OpenGL applications. You should check out &#34;Growing Object Oriented Software Guided by Tests&#34; by Steve Freemann and Nat Pryce (e.g. <a href="http://rads.stackoverflow.com/amzn/click/0321503627" rel="noreferrer">http://www.amazon.com/Growing-Object-Oriented-Software-Guided-Signature/dp/0321503627</a>). It leads you step by step through the development of an application with GUI and network communication.</p><p>Testing Software that was not test driven is another story. Check Michael Feathers &#34;Working Effectively with Legacy Code&#34; (http://www.amazon.com/Working-Effectively-Legacy-Michael-Feathers/dp/0131177052).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-is-unit-testing-or-test-driven-development-worthwhile/'>Unit-testing &#8211; Is unit testing or test-driven development worthwhile</a></li><li class="list-group-item"><a href='../unit-testing-do-i-need-unit-test-if-i-already-have-integration-test/'>Unit-testing &#8211; Do I need unit test if I already have integration test</a></li><li class="list-group-item"><a href='../unit-testing-unit-test-json-parsing-code/'>Unit-testing &#8211; Unit test JSON parsing code</a></li><li class="list-group-item"><a href='../java-unit-testing-competition/'>Java &#8211; Unit Testing Competition</a></li><li class="list-group-item"><a href='../unit-testing-black-box-unit-testing/'>Unit-testing &#8211;  black box unit testing</a></li><li class="list-group-item"><a href='../unit-testing-is-testing-behavior-of-many-classes-in-one-test-still-unit-testing/'>Unit-testing &#8211; Is testing behavior of many classes in one test still unit testing</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>