<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Four-way XML comparison in C# &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1070341 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1070341" class="post-1070341 software type-software status-publish hentry category-software tag-c tag-comparison tag-net tag-xml"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Four-way XML comparison in C#</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">comparison</span><span class="mr-2 badge badge-warning">net</span><span class="mr-2 badge badge-primary">xml</span></p><div class="entry-content"><p>I have 4 XML files: A, B, C, and D. I want to know if the difference between A and B is the same as the difference between C and D.</p><p>The XML files are serializations of the same .NET object; one of the primary differences will be in a particular list that describes the features available on a particular product. (A description of the feature is itself another object).</p><p>All four have very similar structures, but there may be values present in one that aren&#39;t present in another, and some values may be changed. For example, if we consider document <code>A</code>:</p><pre class="lang-xml prettyprint-override"><code>&lt;xmldoc&gt;
   &lt;a&gt;&lt;/a&gt;
   &lt;c&gt;&lt;/c&gt;
   &lt;d&gt;&lt;/d&gt;
&lt;xmldoc&gt;
</code></pre><p>Document <code>B</code>:</p><pre class="lang-xml prettyprint-override"><code>&lt;xmldoc&gt;
   &lt;a&gt;&lt;/a&gt;
   &lt;b&gt;&lt;/b&gt; -- Added 
   &lt;c&gt;&lt;/c&gt; -- C and D are still ordered in the same way (except for the addition of &lt;b&gt;
   &lt;d&gt;&lt;/d&gt;
   &lt;e&gt;&lt;/e&gt; -- Also added, but it doesn&#39;t affect the sort of the other ones
&lt;xmldoc&gt;
</code></pre><p>Now suppose that I have the following documents. Document <code>C</code> is exactly identical to document <code>A</code>:</p><pre class="lang-xml prettyprint-override"><code>&lt;xmldoc&gt;
   &lt;a&gt;&lt;/a&gt;
   &lt;c&gt;&lt;/c&gt;
   &lt;d&gt;&lt;/d&gt;
&lt;xmldoc&gt;
</code></pre><p>Document <code>D</code> is identical to document <code>B</code>.</p><p>Since the difference between <code>C</code> and <code>D</code> is exactly the same as the difference between <code>A</code> and <code>B</code>, this should pass. However, suppose that instead we have document <code>D</code> as follows:</p><pre class="lang-xml prettyprint-override"><code>&lt;xmldoc&gt;
   &lt;a&gt;&lt;/a&gt;
   &lt;b&gt;&lt;/b&gt; 
   &lt;f&gt;&lt;/f&gt; &lt;!-- Added --&gt;
   &lt;c&gt;&lt;/c&gt;
   &lt;d&gt;&lt;/d&gt;
   &lt;e&gt;&lt;/e&gt;
   &lt;f&gt;&lt;/f&gt;
&lt;xmldoc&gt;
</code></pre><p>The difference between <code>C</code> and <code>D</code> is no longer the same as the difference between <code>A</code> and <code>B</code>.</p><p>I&#39;m pretty sure that we won&#39;t have a case where document <code>A</code> shows up as:</p><pre class="lang-xml prettyprint-override"><code>&lt;xmldoc&gt;
   &lt;c&gt;&lt;/c&gt;
   &lt;a&gt;&lt;/a&gt; -- This is the same as the original document A except that this was reordered - this shouldn&#39;t happen
   &lt;d&gt;&lt;/d&gt;
&lt;xmldoc&gt;
</code></pre><p>My first thought was to use Microsoft&#39;s <a href="https://msdn.microsoft.com/en-us/library/aa302295.aspx" rel="nofollow noreferrer">XML Diff Patch</a> library, which compares two files and generates a DiffGram, which is an XML document that describes the difference between the two files being compared. My thought is that I could compare A to B to get DiffGram X and C to D to get DiffGram Y, and then do a third XML comparison between X and Y.</p><p>The idea sounds good on paper; unfortunately it&#39;s not turning out to be so simple. The difference between A and B is very similar to the difference between C and D, but X and Y look nothing like each other.</p><p>The problem is it gives DiffGrams like the following:</p><pre class="lang-xml prettyprint-override"><code>&lt;xd:node match=&#34;4&#34;&gt;
           &lt;xd:node match=&#34;2&#34;&gt;
              &lt;xd:node match=&#34;1&#34;&gt;
                 &lt;xd:remove match=&#34;1-3&#34; /&gt;
              &lt;/xd:node&gt;
           &lt;/xd:node&gt;

           &lt;xd:node match=&#34;1&#34;&gt;
              &lt;xd:node match=&#34;1&#34;&gt;
                 &lt;xd:remove match=&#34;1-3&#34; /&gt;
              &lt;/xd:node&gt;
           &lt;/xd:node&gt;
        &lt;/xd:node&gt;
</code></pre><p>This has two problems: first, it&#39;s <em>extremely</em> cryptic &#8211; I&#39;d prefer it if it was more human-readable, but it&#39;s not the end of the world if that&#39;s not the case (since my primary purpose is programmatic here). Secondly (and much more critically), it seems like that&#39;s very tightly coupled to the specific XML files that are in <em>that particular</em> comparison.</p><p>I originally posted on the Software Recommendation Stack Exchange asking for recommendations for a .NET library (preferably a available as a NuGet package) that would be suitable for this purpose but didn&#39;t have much luck getting a recommendation. (Full disclosure: I haven&#39;t deleted that question yet but intend to do so shortly). If such a library exists, I haven&#39;t been able to find it (a lot of them seem like they&#39;re not designed for the purpose I want to use them for and/or aren&#39;t written for the .NET framework), but if anyone&#39;s aware of such a library that would definitely be an acceptable solution as well (in fafct, I would strongly prefer that to having to implement it myself).</p><p>Has anyone successfully done something like this (either by creating your own solution, using Microsoft&#39;s XML Diff library, or using another third-party library)? If so, what did you do?</p><p>I&#39;m hoping that this isn&#39;t too broad of a question (if so let me know and I&#39;ll edit), but what would be a good approach to this if I end up writing this myself?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>My thought is that I could compare A to B to get DiffGram X and C to D to get DiffGram Y, and then do a third XML comparison between X and Y.</p></blockquote><p>That seems to be a good start. I guess what is missing here is something like a program or xslt script to transform &#34;DiffGram X&#34; to a readable representation X&#39;. Then you can apply the same transformation to Diffgram Y, leading to a readable Y&#39;. Comparing X&#39; and Y&#39; gives you a final DiffGram Z, which might be transformed to a readable Z&#39;.</p><p>How this script or program will loook like probably depends on what kind of assumptions you can make about the structure of the input files. Do they really consist of arbitrary nested XML trees? Do you need to compare attributes, name space differences elements and element texts as well? I would be astonished if one cannot use that knowledge to simplify the DiffGrams.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-shifting-between-xml-schemas-and-c-classes-in-a-sensible-fashion/'>C# &#8211; Shifting between XML schemas and C# classes in a sensible fashion</a></li><li class="list-group-item"><a href='../java-optimize-strategies-for-xml-parsing/'>Java &#8211; Optimize strategies for xml parsing</a></li><li class="list-group-item"><a href='../python-proving-two-zip-file-are-identical/'>Python &#8211; Proving Two Zip file are identical</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>