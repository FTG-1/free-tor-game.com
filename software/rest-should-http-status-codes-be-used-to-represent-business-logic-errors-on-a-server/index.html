<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; Should HTTP status codes be used to represent business logic errors on a server &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063931 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063931" class="post-1063931 software type-software status-publish hentry category-software tag-api tag-rest tag-web"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; Should HTTP status codes be used to represent business logic errors on a server</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">rest</span><span class="mr-2 badge badge-warning">web</span></p><div class="entry-content"><p>I&#39;m at a bit of a crossroads with some API design for a client (JS in a browser) to talk to a server. We use HTTP 409 Conflict to represent the failing of an action because of a safety lock in effect. The satefy lock prevents devs from accidentally making changes in our customers&#39; production systems. I&#39;ve been tasked with handling 409s a bit more gracefully on the client to indicate why a particular API call failed.</p><p>My solution was to wrap the failure handlers of any of our AJAX calls which will display a notification on the client when something fails due to 409 &#8211; this is all fine and works well alongside other 4XX and 5XX errors which use the same mechanism.</p><p>A problem has arisen where one of our route handlers responds with 409s when encountering a business logic error &#8211; my AJAX wrapper reports that the safety lock is on, whilst the client&#39;s existing failure handler reports what (it thinks) the problem is based on the body of the response. A simple solution would be to change either the handler&#39;s response or the status code we use to represent the safety lock.</p><p>Which brings me to my crossroad: should HTTP status codes even be used to represent business logic errors? <a href="https://stackoverflow.com/a/40167019/1527537">This question</a> addresses the same issue I am facing but it did not gain much traction. As suggested in the linked answer, I&#39;m leaning towards using HTTP 200 OK with an appropriate body to represent failure within the business logic.</p><p>Does anyone have any strong opinions here? Is anyone able to convince me this is the wrong way to represent failure?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><a href="https://softwareengineering.stackexchange.com/a/341739/199871">Kasey</a> covers the main point.</p><p>The key idea in any web api: you are adapting your domain to look like a document store.  GET/PUT/POST/DELETE and so on are all ways of interacting with the document store.</p><p>So <em>a</em> way of thinking about what codes to use, is to understand what the analogous operation is in a document store, and what this failure would look like in that analog.</p><p><a href="https://www.rfc-editor.org/rfc/rfc7231#section-6.3" rel="nofollow noreferrer">2xx is completely unsuitable</a></p><blockquote><p>The 2xx (Successful) class of status code indicates that the client&#39;s
request was successfully received, understood, and accepted.</p></blockquote><p><a href="https://www.rfc-editor.org/rfc/rfc7231#section-6.6" rel="nofollow noreferrer">5xx is also unsuitable</a></p><blockquote><p>The 5xx (Server Error) class of status code indicates that the server is aware that it has erred</p></blockquote><p>In this case, the server didn&#39;t make a mistake; it&#39;s aware that you aren&#39;t supposed to modify that resource that way at this time.</p><p>Business logic errors (meaning that the business invariant doesn&#39;t allow the proposed edit at this time) are probably a <a href="https://www.rfc-editor.org/rfc/rfc7231#section-6.5.8" rel="nofollow noreferrer">409</a></p><blockquote><p>The 409 (Conflict) status code indicates that the request could not
be completed due to a conflict with the current state of the target
resource.  This code is used in situations where the user might be
able to resolve the conflict and resubmit the request.  The server
SHOULD generate a payload that includes enough information for a user
to recognize the source of the conflict.</p></blockquote><p>Note this last bit -- the payload of the 409 response should be communicating information to the consumer about what has gone wrong, and ideally includes hypermedia controls that lead the consumer to the resources that can help to resolve the conflict.</p><blockquote><p>My solution was to wrap the failure handlers of any of our AJAX calls which will display a notification on the client when something fails due to 409 - this is all fine and works well alongside other 4XX and 5XX errors which use the same mechanism.</p></blockquote><p>And I would point to this as the problem; your implementation at the client assumed that the status code was sufficient to define the problem.  Instead, your client code should be reviewing the payload, and acting on the information available there.</p><p>That is, after all, how a document store would do it</p><pre><code>409  Conflict

your proposed change has been declined because ${REASON}.  
The following resolution protocols are available: ${LINKS[@]})
</code></pre><p>The same approach with a <code>400 Bad Request</code> would also be acceptable; which roughly&#34; translates to &#34;There was a problem with your request.  We can&#39;t be bothered to figure out which status code is the best fit, so here you go.  See the payload for details.&#34;</p><blockquote><p>I would use 422. Input is valid so 400 is not the right error code to use</p></blockquote><p>The WebDAV specification includes <a href="https://www.rfc-editor.org/rfc/rfc4918#section-11.2" rel="nofollow noreferrer">this recommendation</a></p><blockquote><p>The 422 (Unprocessable Entity) status code means the server understands the content type of the request entity (hence a 415(Unsupported Media Type) status code is inappropriate), and the syntax of the request entity is correct (thus a 400 (Bad Request) status code is inappropriate) but was unable to process the contained instructions.  For example, this error condition may occur if an XML request body contains well-formed (i.e., syntactically correct), but semantically erroneous, XML instructions.</p></blockquote><p>I don&#39;t believe that&#39;s quite a match (although I agree that it sheds some doubt on <code>400</code> as an alternative).  My interpretation is that <code>422</code> means &#34;you&#39;ve sent the wrong entity&#34; where <code>409</code> is &#34;you&#39;ve sent the entity at the wrong time&#34;.</p><p>Put another way, <code>422</code> indicates an issue with the request message considered in isolation, where <code>409</code> indicates that the request message conflicts with the current state of the resource.</p><p><a href="https://www.bennadel.com/blog/2434-http-status-codes-for-invalid-data-400-vs-422.htm" rel="nofollow noreferrer">Ben Nadal&#39;s discussion of 422</a> may be useful to consider.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-invalid-operation-status-code-in-a-hateoas-rest-api/'>Rest &#8211; &#8220;Invalid operation&#8221; status code in a HATEOAS REST API</a></li><li class="list-group-item"><a href='../rest-should-an-http-api-always-return-a-body/'>Rest &#8211; Should an HTTP API always return a body</a></li><li class="list-group-item"><a href='../rest-designing-a-rest-api-setting-business-logic-error-codes-in-http-headers-or-within-the-response-payload/'>Rest &#8211; Designing a REST API: setting business logic error codes in http headers or within the response payload</a></li><li class="list-group-item"><a href='../rest-how-to-determine-transient-exceptions/'>REST: How to determine transient exceptions</a></li><li class="list-group-item"><a href='../restful-api-represent-the-absence-of-a-thing/'>RESTful API represent the absence of a thing</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>