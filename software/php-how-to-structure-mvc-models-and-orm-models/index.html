<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; how to structure MVC models and ORM models &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076858 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076858" class="post-1076858 software type-software status-publish hentry category-software tag-directory-structure tag-mvc tag-php"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; how to structure MVC models and ORM models</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">directory-structure</span><span class="mr-2 badge badge-info">mvc</span><span class="mr-2 badge badge-warning">PHP</span></p><div class="entry-content"><p>I have some trouble getting a good folder structure in my project and i would like to know what other ways i could use to structure my files.</p><p>I&#39;m currently working in an MVC sturctured folder.</p><pre><code>www/
  Controllers/
  Models/
  Views/
</code></pre><p>Nothing special so far. But i&#39;m also using an ORM system. With it i can easily get an &#39;object&#39; from my database like:</p><pre><code>ORM::load(&#39;table&#39;);
</code></pre><p>Now this sort of code should reside in a Model right? So i&#39;d get something like this:</p><pre><code>&lt;?php
class userModel
{
    public function getAllUsers ( )
    {
        return ORM::load(&#39;table&#39;);
    }

    public function getUserById ( $id )
    {
        return ORM::load(&#39;table&#39;, &#39;userid=?&#39;, array($id));
    }
}
?&gt;
</code></pre><p>Looks good so far in my opinion&#8230; But there&#39;s one more thing. I can also specify a &#39;model&#39; when using the ORM system. With this model i can basically set up validation rules. Like so:</p><pre><code>ORM::withModel(&#39;authModel&#39;);
</code></pre><p>This lets the ORM know that before it adds a new row (or updates an existing one) to the DB, that it should check the following model first for validation rules.</p><pre><code>&lt;?php
class authModel //Or maybe authValidation??
{
    // Method gets automatically triggered when an update is done with the ORM
    public function onUpdate ( $obj )
    {
        if ( $obj-&gt;username == &#39;&#39; )
            throw new \Exception(&#39;No username&#39;);
    }

    public function onInsert ( $obj )
    {
        // Validations here too.
    }
}
?&gt;
</code></pre><p>Now the problem is, is that i have 2 sorts of models. One where i basically use getters/setters to get and store data to the database (from my controller to my model).</p><p>And i have another model in which validation rules are set&#8230; I don&#39;t want to mix both in the same folder. So i must come up with another structure for this. Something like:</p><pre><code>www/
  Controllers/
  Models/
    Repositories/
    Entities/
  Views/
</code></pre><p>It&#39;s just that my model isn&#39;t a real &#39;repository&#39;, since it doesn&#39;t store any objects in the repo class and doesn&#39;t have a commit() method or anything like that.</p><p>I also can&#39;t store the 2nd model (for validations) in the Entities folder, because they&#39;re not Entities at all&#8230;</p><p>Any idea how i should structure this..??</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I would not call myself a backend developer, so before I answer, I will strongly encourage you to spend some time looking at how others are doing MVC architecture. I think <a href="https://github.com/cakephp/cakephp" rel="nofollow">CakePHP</a> is a great place to start (and their code is very well documented!).</p><p>The way I would set out about doing it is to make a /Utilities folder that other parts of your program can call on when needed. Things that you might often be using in multiple controllers, views or models. You could place standard validation rules -- notEmpty(), alphaNumeric(), email(), etc. --  in this file (/Utilites/Validation.php).</p><p>Then you might make a /Models/Model.php that has your basic model template (save, delete, update, beforeSave, etc.) that would let new models inherit from it so you don&#39;t have to copy/paste repeated lines of code everywhere. Then you could make your userModel and if necessary have custom validation inside of that file.</p><p>Again, not a back end developer but I am familiar with CakePHP and looking out how they decided to handle these difficulties might give you some ideas!</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../php-is-mvc-just-the-seo-of-php-programming/'>Php &#8211; Is MVC just the SEO of PHP programming</a></li><li class="list-group-item"><a href='../php-how-to-design-a-model-layer-without-orm-and-when-should-i-use-it/'>Php &#8211; How to design a model layer without ORM, and when should I use it</a></li><li class="list-group-item"><a href='../mvc-net-mvc-project-architecture-layering/'>Mvc &#8211; .NET MVC project architecture / layering</a></li><li class="list-group-item"><a href='../mvc-nything-wrong-with-the-project-structure-and-naming-convention-in-asp-net-mvc-and-web-api/'>Mvc &#8211; nything wrong with the project structure and naming convention in ASP.NET MVC and Web API</a></li><li class="list-group-item"><a href='../mvc-in-mvc-soa-architecture-what-is-the-rationale-for-placing-business-logic-in-models/'>Mvc &#8211; In MVC + SOA Architecture, What is the Rationale for Placing Business Logic in Models</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>