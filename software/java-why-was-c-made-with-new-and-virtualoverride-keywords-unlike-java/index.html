<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Why was C# made with &#8220;new&#8221; and &#8220;virtual+override&#8221; keywords unlike Java &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064511 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064511" class="post-1064511 software type-software status-publish hentry category-software tag-c tag-implementations tag-java tag-language-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Why was C# made with &#8220;new&#8221; and &#8220;virtual+override&#8221; keywords unlike Java</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">implementations</span><span class="mr-2 badge badge-warning">java</span><span class="mr-2 badge badge-primary">language-design</span></p><div class="entry-content"><p>In Java there are no <code>virtual</code>, <code>new</code>, <code>override</code> keywords for method definition. So the working of a method is easy to understand. Cause if <em>DerivedClass</em> extends <em>BaseClass</em> and has a method with same name and same signature of <em>BaseClass</em> then the overriding will take place at run-time polymorphism (provided the method is not <code>static</code>).</p><pre class="lang-java prettyprint-override"><code>BaseClass bcdc = new DerivedClass(); 
bcdc.doSomething() // will invoke DerivedClass&#39;s doSomething method.
</code></pre><hr/><p>Now come to C# there can be so much confusion and hard to understand how the <code>new</code> or <code>virtual+derive</code> or <a href="https://stackoverflow.com/questions/1508350/why-does-this-polymorphic-c-sharp-code-print-what-it-does/1510702#1510702">new + virtual override</a> is working.</p><p>I&#39;m not able to understand why in the world I&#39;m going to add a method in my <code>DerivedClass</code> with same name and same signature as <code>BaseClass</code> and define a new behaviour but at the run-time polymorphism, the <code>BaseClass</code> method will be invoked! (which is not overriding but logically it should be).</p><p>In case of <code>virtual + override</code> though the logical implementation is correct, but the programmer has to think which method he should give permission to user to override at the time of coding. Which has some <em>pro-con</em> (let&#39;s not go there now).</p><p>So why in C# there are so much space for <em>un</em>-logical reasoning and confusion. So may I reframe my question as in which real world context should I think of use <code>virtual + override</code> instead of <code>new</code> and also use of <code>new</code> instead of <code>virtual + override</code>?</p><hr/><p>After some very good answers especially from <a href="https://softwareengineering.stackexchange.com/a/245419/95732">Omar</a>, I get that C# designers gave stress more about programmers should think before they make a method, which is good and handles some rookie mistakes from Java.</p><p>Now I&#39;ve a question in mind. As in Java if I had a code like</p><pre class="lang-java prettyprint-override"><code>Vehicle vehicle = new Car();
vehicle.accelerate();
</code></pre><p>and later I make new class <code>SpaceShip</code> derived from <code>Vehicle</code>. Then I want to change all <code>car</code> to a <code>SpaceShip</code> object I just have to change single line of code</p><pre><code>Vehicle vehicle = new SpaceShip();
vehicle.accelerate();
</code></pre><p>This will not break any of my logic at any point of code.</p><p>But in case of C# if <code>SpaceShip</code> does not override the <code>Vehicle</code> class&#39; <code>accelerate</code> and use <code>new</code> then the logic of my code will be broken. Isn&#39;t that a disadvantage?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Since you asked why C# did it this way, it&#39;s best to ask the C# creators. Anders Hejlsberg, the lead architect for C#, answered why they chose not to go with virtual by default (as in Java) in an <a href="https://www.artima.com/intv/nonvirtual.html" rel="nofollow noreferrer">interview</a>, pertinent snippets are below.</p><p>Keep in mind that Java has virtual by default with the <a href="https://en.wikipedia.org/wiki/Final_(Java)" rel="nofollow noreferrer">final</a> keyword to mark a method as non-virtual. Still two concepts to learn, but many folks do not know about the final keyword or don&#39;t use it proactively. C# forces one to use virtual and new/override to consciously make those decisions.</p><blockquote><p>There are several reasons. One is <strong>performance</strong>. We can observe that as
people write code in Java, they forget to mark their methods final.
Therefore, those methods are virtual. Because they&#39;re virtual, they
don&#39;t perform as well. There&#39;s just performance overhead associated
with being a virtual method. That&#39;s one issue.</p><p>A more important issue is <strong>versioning</strong>. There are two schools of thought
about virtual methods. The academic school of thought says,
&#34;Everything should be virtual, because I might want to override it
someday.&#34; The pragmatic school of thought, which comes from building
real applications that run in the real world, says, &#34;We&#39;ve got to be
real careful about what we make virtual.&#34;</p><p>When we make something virtual in a platform, we&#39;re making an awful
lot of promises about how it evolves in the future. For a non-virtual
method, we promise that when you call this method, x and y will
happen. When we publish a virtual method in an API, we not only
promise that when you call this method, x and y will happen. We also
promise that when you override this method, we will call it in this
particular sequence with regard to these other ones and the state will
be in this and that invariant.</p><p>Every time you say virtual in an API, you are creating a call back
hook. As an OS or API framework designer, you&#39;ve got to be real
careful about that. You don&#39;t want users overriding and hooking at any
arbitrary point in an API, because you cannot necessarily make those
promises. And people may not fully understand the promises they are
making when they make something virtual.</p></blockquote><p>The interview has more discussion about how developers think about class inheritance design, and how that led to their decision.</p><p>Now to the following question:</p><blockquote><p>I&#39;m not able to understand why in the world I&#39;m going to add a method
in my DerivedClass with same name and same signature as BaseClass and
define a new behaviour but at the run-time polymorphism, the BaseClass
method will be invoked! (which is not overriding but logically it
should be).</p></blockquote><p>This would be when a derived class wants to declare that it does not abide by the contract of the base class, but has a method with the same name. (For anyone who doesn&#39;t know the difference between <code>new</code> and <code>override</code> in C#, see this <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/new-modifier" rel="nofollow noreferrer">Microsoft Docs page</a>).</p><p>A very practical scenario is this:</p><ul><li><p>You created an API, which has a class called <code>Vehicle</code>.</p></li><li><p>I started using your API and derived <code>Vehicle</code>.</p></li><li><p>Your <code>Vehicle</code> class did not have any method <code>PerformEngineCheck()</code>.</p></li><li><p>In my <code>Car</code> class, I add a method <code>PerformEngineCheck()</code>.</p></li><li><p>You released a new version of your API and added a <code>PerformEngineCheck()</code>.</p></li><li><p>I cannot rename my method because my clients are dependent on my API, and it would break them.</p></li><li><p>So when I recompile against your new API, C# warns me of this issue, e.g.</p><p>If the base <code>PerformEngineCheck()</code> was not <code>virtual</code>:</p><pre class="lang-none prettyprint-override"><code> app2.cs(15,17): warning CS0108: &#39;Car.PerformEngineCheck()&#39; hides inherited member &#39;Vehicle.PerformEngineCheck()&#39;.
 Use the new keyword if hiding was intended.
</code></pre><p>And if the base <code>PerformEngineCheck()</code> was <code>virtual</code>:</p><pre class="lang-none prettyprint-override"><code> app2.cs(15,17): warning CS0114: &#39;Car.PerformEngineCheck()&#39; hides inherited member &#39;Vehicle.PerformEngineCheck()&#39;.
 To make the current member override that implementation, add the override keyword. Otherwise add the new keyword.
</code></pre></li><li><p>Now, I must explicitly make a decision whether my class is actually extending the base class&#39; contract, or if it is a different contract but happens to be the same name.</p></li><li><p>By making it <code>new</code>, I do not break my clients if the functionality of the base method was different from the derived method. Any code that referenced <code>Vehicle</code> will not see <code>Car.PerformEngineCheck()</code> called, but code that had a reference to <code>Car</code> will continue to see the same functionality that I had offered in <code>PerformEngineCheck()</code>.</p></li></ul><p>A similar example is when another method in the base class might be calling <code>PerformEngineCheck()</code> (esp. in the newer version), how does one prevent it from calling the <code>PerformEngineCheck()</code> of the derived class? In Java, that decision would rest with the base class, but it does not know anything about the derived class. In C#, that decision rests <em>both</em> on the base class (via the <code>virtual</code> keyword), <em>and</em> on the derived class (via the <code>new</code> and <code>override</code> keywords).</p><p>Of course, the errors that the compiler throws also provide a useful tool for the programmers to not unexpectedly make errors (i.e. either override or provide new functionality without realizing so.)</p><p>Like Anders said, real world forces us into such issues which, if we were to start from scratch, we would never want to get into.</p><p>EDIT: Added an example of where <code>new</code> would have to be used for ensuring interface compatibility.</p><p>EDIT: While going through the comments, I also came across a <a href="https://docs.microsoft.com/en-us/archive/blogs/ericlippert/virtual-methods-and-brittle-base-classes" rel="nofollow noreferrer">write-up by Eric Lippert</a> (then one of the members of C# design committee) on other example scenarios (mentioned by Brian).</p><hr/><p><strong>PART 2: Based on updated question</strong></p><blockquote><p>But in case of C# if SpaceShip does not override the Vehicle class&#39;
accelerate and use new then the logic of my code will be broken. Isn&#39;t
that a disadvantage?</p></blockquote><p>Who decides whether <code>SpaceShip</code> is actually overriding the <code>Vehicle.accelerate()</code> or if it&#39;s different? It has to be the <code>SpaceShip</code> developer. So if <code>SpaceShip</code> developer decides that they are not keeping the contract of the base class, then your call to <code>Vehicle.accelerate()</code> should not go to <code>SpaceShip.accelerate()</code>, or should it? That is when they will mark it as <code>new</code>. However, if they decide that it does indeed keep the contract, then they will in fact mark it <code>override</code>. In either case, your code will behave correctly by calling the correct method based on the <strong>contract</strong>. How can your code decide whether <code>SpaceShip.accelerate()</code> is actually overriding <code>Vehicle.accelerate()</code> or if it is a name collision? (See my example above).</p><p>However, in the case of implicit inheritance, even if <code>SpaceShip.accelerate()</code> did not keep the <strong>contract</strong> of <code>Vehicle.accelerate()</code>, the method call would still go to <code>SpaceShip.accelerate()</code>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/c-s-o-l-i-d-avoiding-anemic-domains-dependency-injection/'>C# &#8211; S.O.L.I.D., avoiding anemic domains, dependency injection</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-does-java-allow-to-implement-different-interfaces-each-containing-a-method-with-the-same-signature/'>Java &#8211; Why does Java allow to implement different interfaces, each containing a method with the same signature</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-are-interfaces-with-java-8-virtual-extension-methods-the-same-thing-as-mixins/'>Java &#8211; Are Interfaces with Java 8 Virtual Extension Methods the Same Thing as Mixins</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-why-were-default-and-static-methods-added-to-interfaces-in-java-8-when-we-already-had-abstract-classes/'>Java &#8211; Why were default and static methods added to interfaces in Java 8 when we already had abstract classes</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-force-derived-class-to-implement-static-method-c/'>C# &#8211; Force Derived Class to Implement Static Method C#</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>