<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Construct Entities via Dependency Injection Framework &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087183 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087183" class="post-1087183 software type-software status-publish hentry category-software tag-dependency-injection tag-domain-driven-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Construct Entities via Dependency Injection Framework</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">dependency-injection</span><span class="mr-2 badge badge-info">domain-driven-design</span></p><div class="entry-content"><p>I need help settling a disagreement, a co-worker and I have. We&#39;re working on a pretty huge Angular project and are in the process of looking at incorporating some Domain Driven Design principles into our project.</p><p>While we were looking at this picture, we discussed how our Dependency Injection Framework would factor into this.</p><p><a href="../../../i.stack.imgur.com/3H0v6.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/3H0v6.png" alt="enter image description here"/></a></p><p><strong>My stance:</strong> Dependency Injection Frameworks should be used for Application Services, Domain Services, Repositories and Factories only. Domain Objects on the other hand are basically newable (though not typically newed except inside a factory) and don&#39;t have any constructor dependencies themselves.<br /> <strong>His stance:</strong> That is impossible, because we have a DI-Framework and we should use it. His fear are huge monolith classes. He argues, that when classes have too many methods it&#39;s perfectly normal to split these into into smaller classes (because of the SRP) and bundle them in some sort of instrumentor class. This would be a chore without dependency injection. He claims, that DI-Frameworks are normal to use in every bigger project, and not using as much is possible is foolish.<br /> <strong>Why it&#39;s so hard for me to convince him:</strong> We work with tables a lot and there is a class, that more or less represents the &#39;model&#39; of a table (ignore for a second, that in most projects a &#39;table&#39; is not really part of the problem domain, and accept the premise, that it might be in ours). Now first of all &#8211; even if our data and tables were simple &#8211; a class representing a table would have dozens of methods. Between adding and removing rows, resizing columns, getting and setting states like row selection, highlighting columns what have you.<br /> Additionally even things that are conventionally simple, like adding a row, often have 5 different side effects on other parts of the table (these are actual requirements). So I think you can all agree, that having a 4000 line Table class is unacceptable. Consequentially we have to move some of its functionality to smaller classes, that only do one thing, or even just part of one thing. And now we&#39;re at an impasse. I think this still needs to be a class without dependency injection, but I don&#39;t know how to do it and he&#39;s adamant, that I&#39;m just imagining this as a problem and wants to finagle services into the class, that do the jobs, that it conventionally should do itself.</p><p>So am I crazy? Is he crazy? Additionally, if you don&#39;t agree with him, you get bonus points for linking reputable sources, because &#39;anyone can write anything on stackoverflow&#39;</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If you were to be guided by <a href="http://wiki.c2.com/?YouArentGonnaNeedIt" rel="noreferrer">YAGNI</a>, I don&#39;t think you would ever get to the point where you would introduce dependency injection into your domain objects.</p><p>Dependency injection is a manifestation of the strategy pattern; the value in having injectable dependencies is that you can replace one behavior with another.  Of course, the easy way to replace one behavior with another is simply to rewrite the method in question -- so what we <em>really</em> mean is that we want to support two (or more) candidate behaviors and be able to make that choice from the outside.</p><p>The classical example would be an interface with side effects - say, to send an email.  In production, we really connect to an SMTP server; in test, we just pretend to.  So we would want to be able to control the behavior from the outside.</p><p>Domain objects are in memory representations of the businesses that they are modeling.  They don&#39;t have (direct) side effects.  Invoking a method on a domain object typically just reads from, or writes to, the private memory of the process.</p><p>When we want to include side effects as part of the work done by the domain model, we pass the capability as an argument to the method we are calling.  That&#39;s one of the roles of domain services -- to act as a proxy for the outside world.</p><p>Because the domain model itself doesn&#39;t have side effects, the benefits one normally accrues from isolating a test subject from its environment don&#39;t usually apply.  Unless your domain logic is extremely complicated, you aren&#39;t going to gain much from simplifying your call graph.</p><p>See Ian Cooper&#39;s talk <a href="https://www.youtube.com/watch?v=EZ05e7EMOLM" rel="noreferrer">TDD: Where did it all go wrong</a> for additional discussion of test variation.</p><p>The one other flavor of variation that may be interesting is variation of data structure -- should this value in your domain model be a linked list or an array list, or maybe a heap....  To some extent, the entire point of &#34;value objects&#34; is to abstract away from the domain logic the concerns about how the data is arranged in memory.</p><p>In languages that require being specific about types (Java, for instance), the interfaces that you need to write to support substitution of graphs of value objects are complicated -- the variations of type don&#39;t get encapsulated.  So you <em>really</em> have to want it.</p><p>The investment odds are lousy for introducing dependency injection into your domain model before you have a demonstrated need for it.  The problems being that the probability of a payoff is small, and doing the work early doesn&#39;t significantly improve the payoff/cost ratio.</p><blockquote><p>This... is wrong tool.  -- Zathras</p></blockquote><h1>Links</h1><ul><li><a href="https://thinkbeforecoding.com/post/2009/03/04/How-not-to-inject-services-in-entities" rel="noreferrer">Jeremie Chassaing</a></li><li><a href="https://www.oreilly.com/library/view/implementing-domain-driven-design/9780133039900/ch10lev2sec25.html" rel="noreferrer">Vaughn Vernon</a></li><li><a href="http://paul-m-jones.com/archives/6755" rel="noreferrer">Paul M Jones</a></li><li><a href="https://stackoverflow.com/questions/20035810/should-domain-objects-have-dependencies-injected-into-them">StackOverflow</a></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../dependency-injection-dependency-chain-pattern/'>Dependency Injection &#8211; Dependency Chain Pattern</a></li><li class="list-group-item"><a href='../c-organising-data-access-for-dependency-injection/'>C# &#8211; Organising data access for dependency injection</a></li><li class="list-group-item"><a href='../python-is-circular-dependency-injection-a-good-practice/'>Python &#8211; Is circular Dependency Injection a good practice</a></li><li class="list-group-item"><a href='../dependency-injection-use-in-clean-code-by-robert-martin/'>Dependency injection use in &#8220;Clean Code&#8221; by Robert Martin</a></li><li class="list-group-item"><a href='../c-are-there-any-alternatives-to-dependency-injection-for-stateless-classes/'>C++ &#8211; Are there any alternatives to dependency injection for stateless classes</a></li><li class="list-group-item"><a href='../service-locator-vs-dependency-injection/'>Service locator vs Dependency Injection</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>