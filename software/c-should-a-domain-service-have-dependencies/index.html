<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Should a Domain Service have dependencies &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072695 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072695" class="post-1072695 software type-software status-publish hentry category-software tag-c tag-domain-driven-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Should a Domain Service have dependencies</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">domain-driven-design</span></p><div class="entry-content"><p>I have read Eric Evans book.  I was under the impression that a Domain Model should not have dependencies injected (even repositories).</p><p>This statement is supported by questions like this: <a href="https://stackoverflow.com/questions/20035810/should-domain-objects-have-dependencies-injected-into-them">https://stackoverflow.com/questions/20035810/should-domain-objects-have-dependencies-injected-into-them</a>, where the answerer says that &#34;Domain Objects shouldn&#39;t depend on anything else&#34;.  However, I then see this: <a href="http://www.zankavtaskin.com/2013/11/applied-domain-driven-design-ddd-part-4.html" rel="noreferrer">http://www.zankavtaskin.com/2013/11/applied-domain-driven-design-ddd-part-4.html</a> i.e. a domain service in the domain model that depends on the repository.</p><p>Should a Domain <strong>service</strong> have dependencies? I realise that application services have repositories injected.</p><p>My use case is a domain model that figures out what offers a customer is entitled to based on their preferences.  There is a table in the database called offers, which contains the offer expiry date etc.  Does the domain model:</p><p>1) Tell the application service that the customer is entitled to offer a, b and c.  Then the application service goes to the database and gets the offers</p><p>or</p><p>2) The domain model (domain service?) goes to the database and gets details of the offers and returns them to the application service as a list of DTOs.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>I was under the impression that a Domain Model should not have dependencies injected (even repositories).</p></blockquote><p>Yes, that&#39;s right.</p><blockquote><p>Should a Domain service have dependencies? I realise that application services have repositories injected.</p></blockquote><p>Here&#39;s what Evans wrote</p><blockquote><p>A good SERVICE has three characteristics</p><ul><li>The operation relates to a domain concept that is not a natural part of an entity or value object</li><li>The interface is defined in terms of other elements of the domain model</li><li>The operation is stateless</li></ul><p>Statelessness here means that any client can use any instance of a particular SERVICE without regard to the instance&#39;s individual history.  The execution of a service will use information that is accessible globally, and may even change global information (that is, it may have side effects).</p></blockquote><p>Further along, he addresses your question, although somewhat obliquely</p><blockquote><p>But we are still left with calls to SERVICES in the interbank networks.  What&#39;s more, in most development systems, it is awkward to make a direct interface between a domain object and external resources.  _We can dress up such external SERVICES with a FACADE that takes inputs in terms of the model....</p></blockquote><p>The domain service (facade) would have a dependency on the external service.</p><p>That said; looking back 10 years later, I&#39;m not sure that he got the details of this one right.  When you interact with state that is distributed somewhere else, that somewhere else may not be available.  Distributed communication fails, and if that&#39;s not part of your domain, the logic for handling those failures starts to get in the way.</p><p><a href="https://www.destroyallsoftware.com/talks/boundaries" rel="noreferrer">Gary Bernhardt</a> and <a href="https://www.youtube.com/watch?v=7cC3_jGwl_U" rel="noreferrer">Cory Benfield</a> both have given very interesting talks about separating side effect concerns from those of the model.</p><p>A model that transforms inputs into outputs is simple to reason about; a model that transforms inputs into outputs plus side effects, that&#39;s not simple any more.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../design-ddd-repositories-in-application-or-domain-service/'>Design &#8211; DDD repositories in application or domain service</a></li><li class="list-group-item"><a href='../c-should-a-rich-domain-model-have-repositories-injected-in-some-situations/'>C# &#8211; Should a Rich Domain Model have repositories injected in some situations</a></li><li class="list-group-item"><a href='../c-return-domain-objects-from-the-repository/'>C# &#8211; Return domain objects from the repository</a></li><li class="list-group-item"><a href='../c-domain-driven-design-should-specification-pattern-exist-in-repository-or-application-level-for-paging/'>C# &#8211; Domain Driven Design: Should Specification Pattern exist in Repository or Application level for Paging</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>