<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Should the lexer allow what is obviously a syntax error &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087854 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087854" class="post-1087854 software type-software status-publish hentry category-software tag-compiler tag-lexer tag-parsing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Should the lexer allow what is obviously a syntax error</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">compiler</span><span class="mr-2 badge badge-info">lexer</span><span class="mr-2 badge badge-warning">parsing</span></p><div class="entry-content"><p><sub><sup>This is kinda like a concrete version of the question <a href="https://softwareengineering.stackexchange.com/q/136430/316099">Coming up with tokens for a lexer</a>.</sup></sub></p><p>I&#39;m writing a lexer for a small subset of HTML. I&#39;m wondering what should I do when the input stream ends and I&#39;m in a state where I&#39;ve successfully recognized a token, but <em>I know</em> that it will be a syntax error.</p><p>I emphasise &#34;I know&#34; because this is the human me knowing, because I&#39;m aware of the grammar rules which are &#34;parser rules&#34; (vs. &#34;lexer rules&#34;). I know that this is malformed: <code>&lt;b&gt;hello&lt;/b</code>, but there&#39;s nothing stopping the lexer from emitting the following.</p><pre><code>Token: BEGIN-OPEN-TAG
Token: TAG-NAME           Value: b
Token: END-TAG
Token: DATA               Value: hello
Token: BEGIN-CLOSE-TAG    
Token: TAG-NAME           Value: b
</code></pre><p>Then <em>parser</em> would catch this as an error and report it. The reason I know that I can throw an error earlier is only because I&#39;m aware of the <em>parser</em> and rules defined there. <strong>Do I get any benefit from marking this as invalid sequence of tokens, or should I try to keep such logic away from the lexer?</strong> <em>When</em> should a lexer emit an error anyway?</p><p>Should it allow <code>&lt;b&lt;hello&lt;/b&gt;</code> then? How should a lexer handle a random <code>&lt;</code> in the middle of the text: <code>The \lt sign is &lt;b&gt;&lt;&lt;/b&gt;</code>? Backtracking? Or should I record it as <code>[data] [&lt;] [tagname] [&gt;] [&lt;] [&lt;/] [tagname] [&gt;]</code> and then let the parser know that <code>[&lt;]</code> is valid in the middle of data?</p><p>The above are not questions which I expect an answer on, but more of a &#34;if I decide on the question above, then it&#39;s an abyss of more blurred lines, which is why I&#39;m having all these doubts&#34;. I&#39;m having hard time deciding what should the lexer care about. If I make it care too much, I&#39;m creating a parser at the same time. If I don&#39;t make it care enough, I&#39;m pretty much making a &#34;split at whitespace&#34; procedure.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your lexer is never going to be able to diagnose <em>all</em> syntax errors unless you make it as powerful as the parser itself. This would be a large and totally unnecessary amount of work, and the only benefit would be that illegal documents are recognized as illegal very slightly faster. That&#39;s not enough value for the high price.</p><p>Therefore you should keep your lexer as simple as possible, emitting primitives and not worrying its little head about syntax rules. Your code base will be much easier to understand if each component does one thing only.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../python-coming-up-with-tokens-for-a-lexer/'>Python &#8211; Coming up with tokens for a lexer</a></li><li class="list-group-item"><a href='../the-proper-way-to-distinguish-between-keywords-and-identifiers/'>The proper way to distinguish between keywords and identifiers</a></li><li class="list-group-item"><a href='../right-way-to-read-from-token-list-to-implement-parse-tree/'>Right way to read from token list to implement parse tree</a></li><li class="list-group-item"><a href='../what-should-be-the-datatype-of-the-tokens-a-lexer-returns-to-its-parser/'>What should be the datatype of the tokens a lexer returns to its parser</a></li><li class="list-group-item"><a href='../when-to-use-a-parser-combinator-when-to-use-a-parser-generator/'>When to use a Parser Combinator? When to use a Parser Generator</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>