<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>JSON without quotes for keys &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065471 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065471" class="post-1065471 software type-software status-publish hentry category-software tag-json tag-linux tag-serialization"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">JSON without quotes for keys</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">json</span><span class="mr-2 badge badge-info">linux</span><span class="mr-2 badge badge-warning">serialization</span></p><div class="entry-content"><p>I need a textual human readable format which is reasonably compact and version-control friendly to serialize a persistent memory heap. My <a href="https://github.com/bstarynk/bismon/" rel="noreferrer">Bismon</a> system (GPLv3) has such a format (it is textual, human-readable, <code>git</code>-friendly, occasionally editable under <code>emacs</code>, but specific to Bismon. It is usually loaded and dumped by the <code>bismon</code> program.). That format is documented in the <a href="http://starynkevitch.net/Basile/bismon-chariot-doc.pdf" rel="noreferrer">Bismon technical draft report</a> (please skip the first few pages for H2020 bureaucracy), chapter <em>ยง2 Data and its persistence in Bismon</em>. For an example of a file using that format, look into Bismon&#39;s <a href="https://github.com/bstarynk/bismon/blob/master/store1.bmon" rel="noreferrer">store1.bmon</a> (and other <code>store*.bmon</code> files).</p><p>I am considering that such a format might better be JSON like (but I am not sure). Just because many developers are familiar with JSON.</p><p>The <a href="https://json.org/" rel="noreferrer">JSON</a> format requires object keys to be quoted strings, e.g. <code>{ &#34;x&#34;:1, &#34;y&#34;:2 }</code>.</p><p>I am thinking of an application (maybe <a href="https://gitlab.com/refpersys/refpersys" rel="noreferrer">RefPerSys</a>, which conceptually could become a Bismon done right) where a JSON notation is very useful (and where a human-readable textual file format is essential), but where we deal with only JSON objects whose keys are <em>always</em> C-identifiers like (starts with an latin letter, contains letters, digits, underscores). However, that application may need to parse perhaps a million of such objects, and parsing performance does matter a little, and more significantly <strong>file space will matter</strong> a lot (since for <code>{x:1,y:2}</code> only 9 bytes are needed, but <code>{&#34;x&#34;:1,&#34;y&#34;:2}</code> requires 13 bytes, i.e. about 40% more space). My exact goal is any textual, human-readable, quickly and easily machine-parsable, tree-structured, compact version-controllable (i.e. <code>git</code> friendly) format. Most of the time it is dumped and loaded by the <em>same</em> application. Occasionally, I may need to glance into it with some editor, and perhaps even to change a small bit of it with that editor. I am not imagining needing a generic JSON transformer or processor like <a href="https://stedolan.github.io/jq/" rel="noreferrer">jq</a>.</p><p>But my feeling is that, when the keys are C identifiers like (and different of the three JSON keywords: <code>true</code>, <code>false</code>, <code>null</code>), the quotes could be avoided, like for example in <code>{x:1, y:2}</code>. I am also understanding that some JavaScript implementations might be able to parse that.</p><p>I am obviously guessing that parsing <code>{x:1,y:2}</code> is faster than parsing <code>{ &#34;x&#34;:1, &#34;y&#34;:2 }</code> or even <code>{&#34;x&#34;:1,&#34;y&#34;:2}</code> (simply because the textual representation is slightly shorter) especially when we deal with millions of such JSON objects.</p><p>In a Bismon or RefPerSys like system, a possible example could be:</p><pre><code>{ oid: _7T9OwSFlgov_0wVJaK1eZbn,
  name: word,
  mtime: 1502296590.98,
  class: _7T9OwSFlgov_0wVJaK1eZbn,
  attrs: [ { at:  _01h86SAfOfg_1q2oMegGRwW, va: &#34;for words&#34; } ]
}
</code></pre><p>(currently, in commit <a href="https://github.com/bstarynk/bismon/commit/ff19f15ecd2f647d42b7849b0d85167620b9803c" rel="noreferrer">ff19f15ecd2f647d42</a> of Bismon, the equivalent is in <a href="https://github.com/bstarynk/bismon/blob/master/store1.bmon#L1011" rel="noreferrer">lines 1011</a> and following of <code>store1.bmon</code>; the <code>|</code> there delimits comments and these comments like <code>|=word|</code> there could be removed, since skipped at parsing; the comments in these dumped and loaded <code>*.bmon</code> files will be removed once Bismon is stable enough)</p><p>In a few years, I could have many millions of such JSON objects. The <code>bismon</code> program is a server, started every morning (it then loads its persistent state in textual format) and ended every evening (it then dumps its persistent state in textual format). So taking one or a few minutes to load, and one or a few minutes to dump, a large persistent state is definitely acceptable. But the <code>git commit</code>ed disk size of that textual persistent state is more a concern (since both <code>gitlab</code> and <code>github</code> are unhappy with large textual files).</p><p>Since humans will <em>very rarely</em> look into the textual persistent store (as rarely as a compiler writer is looking into generated assembler, or as rarely as the sqlite team is looking into huge <code>*.sql</code> files), I value compactness and <code>git</code>-friendliness  over readability. So I could even consider something as compact as:</p><pre><code> {oid:_7T9OwSFlgov_0wVJaK1eZbn,nam:word,mti:1502296590.98,
  cla:_7T9OwSFlgov_0wVJaK1eZbn,
  att:[{a:_01h86SAfOfg_1q2oMegGRwW,v:&#34;for words&#34;}]}
</code></pre><p>or even the same in a <em>single</em> line. However, being occasionally able to <code>git diff</code> is valuable.</p><p>In other words, the JSON model is very nice to me. But its concrete syntax less so. Patching most JSON libraries to such a simplified syntax is very probably trivial work.</p><p>This brings three questions:</p><ul><li><p>what is the exact name of such common variant of a JSON format with such only C-identifier keys. (It seems that the <a href="https://yaml.org/spec/1.2/spec.html" rel="noreferrer">YAML</a> specification still suggests it to be JSON, but it is not exactly JSON but something very close to it). While that format is not exactly JSON, it is very JSON like (and the conversion to exact JSON is trivial, assuming a parsing library exists for it).</p></li><li><p>what are open source C or C++ libraries dealing with that format (for Linux/x86-64)? I am guessing that adapting the source code of JSON parsing libraries to that special case is trivial. But I really want to <em>avoid</em> <a href="https://en.wikipedia.org/wiki/Fork_(software_development)" rel="noreferrer">forking</a> one.</p></li><li><p>can recent Web browsers (Firefox or Chrome) efficiently parse <code>{x:1,y:2}</code> as JSON? I tend to believe that yes (since that notation is <em>exactly</em> compatible with JavaScript).</p></li></ul><p>This <a href="https://stackoverflow.com/a/49457191/841108">GIT and YAML</a> answer could be relevant.</p><p>And I just discovered <a href="https://hjson.org/" rel="noreferrer">HJSON</a> which might be what I want.</p><hr/><p>PS. I can avoid any set of given C keywords or identifiers in the keys, if I have such a list of forbidden or reserved names. In particular, I will avoid every JavaScript or C++ keyword (like <code>for</code> or <code>auto</code> or <code>while</code>) for key names. The only platform I care about is Linux (currently x86-64).</p><p>PPS. Another application where human-readable textual file format is essential is my <a href="https://github.com/bstarynk/bismon/" rel="noreferrer">Bismon</a> project (a persistent reflexive monitor for static source code analysis, under GPLv3+ license), and I am explaining why in the <a href="http://starynkevitch.net/Basile/bismon-chariot-doc.pdf" rel="noreferrer">Bismon draft report</a> (that is a H2020 draft deliverable, so please skip the first few pages for H2020 bureaucracy). I have chosen in Bismon to have my own human-readable textual format, but that particular choice might have been a big mistake, and I probably should have used some JSON-like one (or even JSON itself), like suggested in this question. The RefPerSys project might become a &#34;Bismon done right&#34; project. And the persistent data of Bismon (e.g. its <a href="https://github.com/bstarynk/bismon/blob/master/store2.bmon" rel="noreferrer"><code>store2.bmon</code></a> textual file) is <code>git</code>-version controlled and <em>occasionally</em> hand-edited (but most of the time, loaded and dumped by <code>bismon</code> itself). So, yes, there are cases where textual data cares about a 20% space difference: for both <code>gitlab</code> and <code>github</code>, a textual version-controlled file of 700Kbytes or of 1.1Mbytes is presented <a href="https://help.github.com/en/articles/limits-for-viewing-content-and-diffs-in-a-repository" rel="noreferrer"><em>very</em> differently</a>: in Bismon, its <a href="https://github.com/bstarynk/bismon/blob/master/store2.bmon" rel="noreferrer">store2.bmon</a> file is already shown only in raw format.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Keys in a JSON dictionary are not quoted strings, they are strings. Strings in JSON start with a quote, continue with escaped or unescaped characters, and end with a string. You canโt have different JSON. You can define a different exchange format, but it wonโt be JSON and you are completely on your own.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../use-of-abstract-syntax-notation-asn-1/'>Use of Abstract Syntax Notation (ASN.1)</a></li><li class="list-group-item"><a href='../inserting-json-document-with-in-key-to-mongodb/'>Inserting JSON document with `.` in key to MongoDB</a></li><li class="list-group-item"><a href='../c-is-it-rational-to-convert-protobuf-into-json-to-send-it-to-a-web-server/'>C++ &#8211; Is it rational to convert protobuf into json to send it to a web server</a></li><li class="list-group-item"><a href='../are-unknown-json-keys-a-valid-approach-to-sending-data/'>Are Unknown JSON Keys a Valid Approach to Sending Data</a></li><li class="list-group-item"><a href='../can-two-web-browser-tabs-be-distinguished-in-a-single-page-application/'>Can two web browser tabs be distinguished in a single-page application</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>