<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Handling large amounts of sockets &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086580 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086580" class="post-1086580 software type-software status-publish hentry category-software tag-real-time tag-sockets"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Handling large amounts of sockets</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">real time</span><span class="mr-2 badge badge-info">sockets</span></p><div class="entry-content"><p>I am working on a project in which we have a desktop application that should be able to receive commands from a web application. To solve this issue, using sockets seems like a good approach (instead of long polling and various other techniques).</p><p>The desktop application also uses a web API, and this is secured with mutual authentication in SSL. The sockets should also be secured with SSL.</p><p>The question is: what is the best way to handle large amounts of sockets?</p><p>I have thought of a solution which involves using a &#34;relay socket&#34;. Basically the desktop application creates a socket to [The Relay Station]. Whenever an action should be sent from the web application, the web app also creates a socket to the relay station.</p><p>The web app sends a command saying &#34;relay [this] to [socket]&#34;.</p><p>This approach requires that:</p><ul><li>All the desktop-to-relay sockets must be persistent</li><li>The desktop application must identify himself, so that the webapp can reference him in his commands</li><li>The relay station needs to keep track of all the desktop application sockets, and map those to a unique identifier.</li></ul><p>This gives me a good structure, but it also arises some questions:</p><ul><li>What should the identifier be?</li><li>Is there a better way of sending commands from [WebApp] to the correct desktop application, without using such approach?</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The question is whether you&#39;d rather the linking application run on your web server (as a relay server) or the desktop (your app accepts lots of connections). That&#39;s a design decision, I think, rather than a programming one.</p><p>Somewhere you need an application that will accept large numbers of connections. One per instance of the web app, presumably. <a href="http://www.metabrew.com/article/a-million-user-comet-application-with-mochiweb-part-1" rel="nofollow">A million is fairly straightforward</a> and doesn&#39;t have to be done in C (example uses erlang and duplicates the code using C).</p><p>How many commands are you looking at, total, and how many instances of the web app (tens? thousands? millions?) If it&#39;s millions, it doesn&#39;t really matter whether you funnel those down using a relay, you&#39;re going to spend a lot of time dealing with replication and multiple instances of your endpoints. A million instances sending one command a minute is 16k commands a second.</p><p>I think the identifier question is pretty obvious - use the native identifier that comes with the connection (the socket handle or class reference), then whatever mapping system your language provides to link that to the ID of the web app or command. If you must construct your own ID and don&#39;t care about the identity of the command source, just use the IP details directly, otherwise use the user or command ID that you have. It&#39;s much easier when debugging to see</p><pre><code>user 123456 issued command Fubar(everything) from 192.168.0.255:54012
</code></pre><p>than have an artificial ID in there (or have to look it up).</p><p>I suggest the ID be the source address and port, plus the input port (your IP will be fixed, unless you have multiple IPs in which case store that too). With IPv4 that&#39;s 32 bits per IP plus 16 per port, for a maximum of 96. With IPv6 it&#39;s 160 bits. Either way, that&#39;s not going to be your biggest memory suck. Once you put that into a list of some sort you&#39;re going to have a pointer or a native int, which becomes your &#34;real ID&#34;. Ideally you&#39;ll be able to use a direct link into the network layer in your software for that, to save a layer of indirection.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/android-design-service-vs-thread-for-networking/'>Android Design &#8211; Service vs Thread for Networking</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-how-to-you-add-acknowledgement-functionality-to-a-command-pattern-given-the-response-from-receiver-is-gotten-asynchronously-on-server/'>C# &#8211; How to you add acknowledgement functionality to a Command pattern, given the response from receiver is gotten asynchronously on Server</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/problem-holding-large-numbers-of-open-socket-connections-for-lengthy-periods-of-time/'>Problem holding large numbers of open socket connections for lengthy periods of time</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-desktop-application-requirement-is-sockets-the-preferred-choice/'>Java Desktop Application Requirement &#8211; Is sockets the preferred choice</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-a-good-way-for-tomcat-to-interact-with-another-java-application-running-on-the-local-machine/'>Java &#8211;  a good way for Tomcat to interact with another Java application running on the local machine</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/database-how-to-balance-100-clients-checking-the-same-database-table-in-a-loop/'>Database &#8211; How to balance 100 clients checking the same database table in a loop</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-web-application-architecture-for-real-time-app/'>Java &#8211; Web application Architecture for real time app</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>