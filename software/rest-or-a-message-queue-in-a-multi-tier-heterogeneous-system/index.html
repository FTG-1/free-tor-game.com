<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>REST or a message queue in a multi-tier heterogeneous system &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1066353 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1066353" class="post-1066353 software type-software status-publish hentry category-software tag-architecture tag-message-queue tag-rest tag-web-services tag-websockets"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">REST or a message queue in a multi-tier heterogeneous system</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">message-queue</span><span class="mr-2 badge badge-warning">rest</span><span class="mr-2 badge badge-primary">web services</span><span class="mr-2 badge badge-danger">websockets</span></p><div class="entry-content"><p>I&#39;m designing a REST API for a three-tier system like: <code>Client application</code> -&gt; <code>Front-end API cloud server</code> -&gt; <code>user&#39;s home API server (Home)</code>.</p><p><code>Home</code> is a home device, and is supposed to maintain connection to <code>Front-end</code> via Websocket or a long poll <em>(this is the first place where we&#39;re violating REST. It gets even worse later on)</em>. <code>Front-end</code> mostly tunnels <code>Client</code> requests to <code>Home</code> connection and handles some of the calls itself.<br /> Sometimes <code>Home</code> sends notifications to <code>Client</code>.</p><p><code>Front-end</code> and <code>Home</code> have basically the same API; <code>Client</code> might be connecting to <code>Home</code> directly, over LAN. In this case, <code>Home</code> needs to register some <code>Client</code> actions on a <code>Front-end</code> itself.</p><p>Pros for REST in this system are:</p><ul><li>REST is human-readable;</li><li>REST has a well-defined mapping of verbs (like CRUD), nouns and response codes to protocol objects;</li><li>It works over HTTP and passes all the possible proxies;</li></ul><p>REST contras are:</p><ul><li>We need not only a request-response communication style, but also a publish-subscribe;</li><li>HTTP error codes might be insufficient to handle three-tier communication errors; <code>Front-end</code> might return <code>202 Accepted</code> to some async call only to find out that necessary <code>Home</code> connection is broken and there should have been <code>503</code>;</li><li><code>Home</code> needs to send messages to <code>Client</code>. <code>Client</code> will have to poll <code>Front-end</code> or to maintain a connection.</li></ul><p>We are considering <a href="http://wamp.ws/">WAMP</a>/<a href="http://autobahn.ws/">Autobahn</a> over Websocket to get publish/subscribe functionality, when it struck me that it&#39;s already looking like a message queue.</p><p>Is it worth evaluating a sort of messaging queue as a transport?</p><p>Looks like message queue contras are:</p><ul><li>I&#39;ll need to define CRUD verbs and error codes myself on a message level.</li><li>I read something about &#34;higher maintenance cost&#34;, but what does it mean?</li></ul><p>how serious are these considerations?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If you have the connectivity, go with a message queue - although you have to define your own protocols (hardly a difficult task!) to send messages of a particular structure and format.</p><p>The problem with maintenance is that typically the client and server are built separately so you need to be careful to keep both ends using the same message definitions, but if you&#39;re not organised enough, just use the same XML you would use in your REST service.</p><p>If you have connectivity issues over the internet, with port 80 and http only and &#39;unidirectional&#39; comms then a REST style system is probably the best. Send and poll, or get a websocket going for callback data, but generally architect your system be be client/server. If you have the ability to get the connectivity, then messaging systems are great.</p><p>I&#39;d go with <a href="http://zeromq.org/" rel="noreferrer">ZeroMQ</a> for a messaging system, its configurable enough to twist in all manner of scenarios, including fault-tolerant ones. I&#39;m not sure that it <a href="http://zeromq.org/topics:0mq-over-http" rel="noreferrer">works over http</a> though.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-multiprocess-rpc-architecture-design/'>Architecture &#8211; Multiprocess RPC Architecture Design</a></li><li class="list-group-item"><a href='../architecture-for-real-time-application-avoiding-duplicate-messages-for-queues-with-no-active-consumers/'>Architecture for real-time application, avoiding duplicate messages for queues with no active consumers</a></li><li class="list-group-item"><a href='../do-i-actually-need-a-message-broker-or-are-websockets-enough/'>Do I actually need a message broker or are websockets enough</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>