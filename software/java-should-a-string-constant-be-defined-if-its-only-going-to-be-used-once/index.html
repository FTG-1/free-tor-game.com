<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Should a string constant be defined if it&#8217;s only going to be used once &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064373 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064373" class="post-1064373 software type-software status-publish hentry category-software tag-coding-style tag-java tag-strings"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Should a string constant be defined if it&#8217;s only going to be used once</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">coding-style</span><span class="mr-2 badge badge-info">java</span><span class="mr-2 badge badge-warning">strings</span></p><div class="entry-content"><p>We&#39;re implementing an adapter for Jaxen (an XPath library for Java) that allows us to use XPath to access the data model of our application.</p><p>This is done by implementing classes which map strings (passed to us from Jaxen) into elements of our data model. We estimate we&#39;ll need around 100 classes with over 1000 string comparisons in total.</p><p>I think that the best way to do this is simple if/else statements with the strings written directly into the code â€” rather than defining each strings as a constant. For example:</p><pre><code>public Object getNode(String name) {
    if (&#34;name&#34;.equals(name)) {
        return contact.getFullName();
    } else if (&#34;title&#34;.equals(name)) {
        return contact.getTitle();
    } else if (&#34;first_name&#34;.equals(name)) {
        return contact.getFirstName();
    } else if (&#34;last_name&#34;.equals(name)) {
        return contact.getLastName();
    ...
</code></pre><p>However I was always taught that we should not embed string values directly into code, but create string constants instead. That would look something like this:</p><pre><code>private static final String NAME = &#34;name&#34;;
private static final String TITLE = &#34;title&#34;;
private static final String FIRST_NAME = &#34;first_name&#34;;
private static final String LAST_NAME = &#34;last_name&#34;;

public Object getNode(String name) {
    if (NAME.equals(name)) {
        return contact.getFullName();
    } else if (TITLE.equals(name)) {
        return contact.getTitle();
    } else if (FIRST_NAME.equals(name)) {
        return contact.getFirstName();
    } else if (LAST_NAME.equals(name)) {
        return contact.getLastName();
    ...
</code></pre><p>In this case I think it&#39;s a bad idea. The constant will only ever be used once, in the <code>getNode()</code> method. Using the strings directly is just as easy to read and understand as using constants, and saves us writing at least a thousand lines of code.</p><p>So is there any reason to define string constants for a single use? Or is it acceptable to use strings directly?</p><hr/><p>PS. Before anyone suggests using enums instead, we prototyped that but the enum conversion is 15 times slower than simple string comparison so it&#39;s not being considered.</p><hr/><p><strong>Conclusion:</strong><br /> The answers below expanded the scope of this question beyond just string constants, so I have two conclusions:</p><ul><li>It&#39;s probably OK to use the strings directly rather than string constants in this scenario, <strong>but</strong></li><li>There are ways to avoid using strings at all, which might be better.</li></ul><p>So I&#39;m going to try the wrapper technique which avoids strings completely. Unfortunately we can&#39;t use the string switch statement because we&#39;re not on Java 7 yet. Ultimately, though, I think the best answer for us is to try each technique and evaluate its performance. The reality is that if one technique is clearly faster then we&#39;ll probably choose it regardless of its beauty or adherence to convention.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Try this.  The initial reflection is certainly expensive, but if you&#39;re going to use it many many times, which I think you will, this is most certainly a better solution what what you&#39;re proposing.  I don&#39;t like using reflection, but I find myself using it when I don&#39;t like the alternative to reflection.  I do think that this will save your team a lot of headache, but you must pass the name of the method (in lowercase).</p><p>In other words, rather than pass &#34;name&#34;, you would pass &#34;fullname&#34; because the name of the get method is &#34;getFullName()&#34;.</p><pre><code>Map&lt;String, Method&gt; methodMapping = null;

public Object getNode(String name) {
    Map&lt;String, Method&gt; methods = getMethodMapping(contact.getClass());
    return methods.get(name).invoke(contact);
}

public Map&lt;String, Method&gt; getMethodMapping(Class&lt;?&gt; contact) {
    if(methodMapping == null) {
        Map&lt;String, Method&gt; mapping = new HashMap&lt;String, Method&gt;();
        Method[] methods = contact.getDeclaredMethods();
        for(Method method : methods) {
            if(method.getParameterTypes().length() == 0) {
                if(method.getName().startsWith(&#34;get&#34;)) {
                    mapping.put(method.getName().substring(3).toLower(), method);
                } else if (method.getName().startsWith(&#34;is&#34;))) {
                    mapping.put(method.getName().substring(2).toLower(), method);
                }
            }
        }
        methodMapping = mapping;
    }
    return methodMapping;
}
</code></pre><p>If you need to access data contained within members of contact, you might consider building a wrapper class for contact which has all methods to access any information required.  This would also be useful for guaranteeing that the names of the access fields will always remain the same (I.e. if wrapper class has getFullName() and you call with fullname, it will always work even if contact&#39;s getFullName() has been renamed -- it would cause compilation error before it would let you do that).</p><pre><code>public class ContactWrapper {
    private Contact contact;

    public ContactWrapper(Contact contact) {
        this.contact = contact;
    }

    public String getFullName() {
        return contact.getFullName();
    }
    ...
}
</code></pre><p>This solution has saved me several times, namely when I wanted to have a single data representation to use in jsf datatables and when that data needed to be exported into a report using jasper (which doesn&#39;t handle complicated object accessors well in my experience).</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-using-nested-public-classes-to-organize-constants/'>Java &#8211; Using nested public classes to organize constants</a></li><li class="list-group-item"><a href='../java-articles-in-variable-names-and-hard-coding-strings/'>Java &#8211; articles in variable names and hard-coding strings</a></li><li class="list-group-item"><a href='../java-is-it-okay-to-go-against-all-caps-naming-for-enums-to-make-their-string-representation-simpler/'>Java &#8211; Is it okay to go against all-caps naming for enums to make their String representation simpler</a></li><li class="list-group-item"><a href='../java-would-combining-enums-with-static-strings-in-java-be-sloppy/'>Java &#8211; Would combining enums with static strings in java be sloppy</a></li><li class="list-group-item"><a href='../sql-query-and-java-constant-abuse/'>SQL Query and Java Constant Abuse</a></li><li class="list-group-item"><a href='../java-whats-the-best-way-to-merge-two-xml-strings-with-the-same-tag-names/'>Java &#8211; What&#8217;s the best way to merge two XML Strings with the same tag names</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>