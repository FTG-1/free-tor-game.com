<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; Levels of user permissions in a RESTful API &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067607 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067607" class="post-1067607 software type-software status-publish hentry category-software tag-http tag-http-response tag-rest tag-url"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; Levels of user permissions in a RESTful API</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">http</span><span class="mr-2 badge badge-info">http-response</span><span class="mr-2 badge badge-warning">rest</span><span class="mr-2 badge badge-primary">url</span></p><div class="entry-content"><p>Let&#39;s say I have a company that ranks the cutest cats on the internet.</p><p><strong>I offer a resource at <code>/cats/</code></strong> which provides users with the latest, cutest adorable cats.</p><p>Users can either get just the top 3 cats if they haven&#39;t paid at all or registered. The top 10 cats if they paid 337 dollars and are logged in, and the top 100 cats if they paid 1337 dollars and are logged in. I have a &#39;user identifier&#39; when making the request.</p><p>In short, <strong>consumers of <code>/cats/</code> get a different number of cats based on their &#39;user<br /> ranking&#39;</strong>. I do have a user identifier on the consuming end, but I have no explicit representation of the user level on the consuming end. <strong>I&#39;d like to inform users they can upgrade their subscription</strong> when making the request. That is, I need to distinguish between <em>3 cats since I only offer 3 cats</em> and <em>3 cats  because that&#39;s what the user level allowed</em>.</p><p>What is the best practice for distinguishing limiting the resource because the consumer does not have sufficient priviledges and limiting it because that&#39;s what the consumer has?</p><p><strong>How does the client know if  they can upgrade their ranking?</strong> That is, they only got a limited resource because <em>they</em> don&#39;t have permissions. What is the best practice here?</p><p>Note, this is a gross simplification of the actual case. Also, just to clarify &#8211; reading is appreciated.</p><hr/><p>Update:</p><h3>Here are options we&#39;ve considered:</h3><ul><li>Storing the user permissions objects once on the client, querying for it only when account login or upgrade is performed.</li><li>Passing <code>null</code> values in JSON indicating it exists, but an actual <em>nothing</em> was transfered. So 10 cats for a user with 3 cats could be <code>[&#34;Garfield&#34;,&#34;Sylvester&#34;,&#34;Puss in Boots&#34;,null*7]</code></li><li>Passing a resource permission pair <code>{cats:[&#34;Whiskers&#34;,&#34;Fluffy&#34;,&#34;Socks&#34;],authCount:3}</code></li></ul><p>I&#39;d like to do this right the first time to deliver the cutest cats in the best way possible and we&#39;d and we&#39;d like</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I&#39;d say it depends on your audience.</p><h2>No-dev</h2><p>If your audience is not a developer&#39;s one, I&#39;d go with the following way:</p><p>Let&#39;s say you return JSON for the sake of the example.</p><pre><code>GET /cats HTTP/1.1

{
    &#34;cats&#34;: [
        &#34;Can I haz cheeseburger&#34;,
        &#34;If it fits, I sits&#34;,
        &#34;It&#39;s caturday!&#34;
    ],
    &#34;permissions&#34;: {
        &#34;level&#34;: &#34;free&#34;,
        &#34;information&#34;: &#34;You have access to 3 cats. Upgrade to ... to get 10 cats!&#34;
    }
}
</code></pre><p>Or something similar.</p><p>It is informative for the user to know what the status of his account is, and it allows you to put whatever information you want, such as a marketing message. The most important point of this way is to give some easy visibility to your users of their current account.</p><h2>Dev</h2><p>However, if your audience is purely developers, then I&#39;d say: go with the full HTTP compliant way. To store the metadata, you use HTTP headers.</p><p>Here is an example:</p><pre><code>GET /cats HTTP/1.1

X-Account: anonymous
X-Account-Possible-Upgrades: 2
X-Account-Limit: 3
</code></pre><p>Then, provide a clear documentation of what these headers mean. Most developers will go straight for the documentation when they&#39;ll see these custom headers, especially if they&#39;re seeing a limit. You can go even further and show the link in the headers. Or you can show a link to the pricing page.</p><pre><code>X-Account-Doc: http://your/doc
</code></pre><p>But then again, many developers don&#39;t know how HTTP works.</p><h2>So it&#39;s your call</h2><p><strong>One is more correct, the other is more accessible.</strong></p><h2>Misc</h2><p>Some other miscellaneous stuff related to your question:</p><ul><li>Don&#39;t forget about <a href="https://www.rfc-editor.org/rfc/rfc6585" rel="nofollow noreferrer">429 Too many requests</a>.</li><li>Don&#39;t forget about the <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#www-authenticate-response-header" rel="nofollow noreferrer">WWW-Authenticate response header</a>.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../restful-http-options-request-content/'>RESTful HTTP OPTIONS request content</a></li><li class="list-group-item"><a href='../rest-trailing-slash-in-restful-api/'>Rest &#8211; Trailing slash in RESTful API</a></li><li class="list-group-item"><a href='../rest-ids-in-resource-urls-database-id-or-per-user-id/'>Rest &#8211; ID&#8217;s in resource URLs: database id or per-user id</a></li><li class="list-group-item"><a href='../php-fine-grained-data-level-permissions-on-a-laravel-restful-api/'>Php &#8211; Fine-grained data level permissions on a laravel RESTful API</a></li><li class="list-group-item"><a href='../restful-api-should-i-be-returning-the-object-that-was-created-updated/'>RESTful API. Should I be returning the object that was created / updated</a></li><li class="list-group-item"><a href='../restful-api-and-i18n-how-to-design-the-response/'>RESTful API and i18n: how to design the response</a></li><li class="list-group-item"><a href='../rest-should-no-results-be-an-error-in-a-restful-response/'>Rest &#8211; Should &#8220;No Results&#8221; be an error in a RESTful response</a></li><li class="list-group-item"><a href='../rest-how-to-distinguish-when-a-404-status-is-real-in-restful-service/'>Rest &#8211; How to Distinguish When a 404 Status is Real in RESTFul Service</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>