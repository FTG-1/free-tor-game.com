<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>ECommerce use case: removing a product &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081658 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081658" class="post-1081658 software type-software status-publish hentry category-software tag-database-design tag-e-commerce tag-web-services tag-web-applications"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">ECommerce use case: removing a product</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">database-design</span><span class="mr-2 badge badge-info">e-commerce</span><span class="mr-2 badge badge-warning">web services</span><span class="mr-2 badge badge-primary">web-applications</span></p><div class="entry-content"><p>I am starting to design the database schema for the eCommerce element of a web service I am creating.</p><p>The thing I&#39;m trying to get my head around is how to deal with the use case of a seller (user of my web service) deleting a product.</p><p>The issue I have is that this product could be referenced in a customers basket, to be paid orders, pending orders, deliveries, past orders etc&#8230;</p><p>This problem is surely one that everyone developing such a system has come across. I&#39;m just wondering if there is a best practice way to address it?</p><p>Can it be addressed at the database schema level? Or maybe it just requires certain validation checks on database data before allowing a product to be deleted, or to stop an error if a customer is trying to pay for an order that had a reference to a product, but that reference has been deleted (i.e. product was deleted).</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The standard approach is to mark the product as inactive, discontinued or otherwise not visible.  Deleting an entry from the database has an entire cascade of events that can be problematic.</p><p>This could be something as simple as a boolean, or a MySQL-esque enum, or its own table to join in (if you want to distinguish the difference between inactive (not yet available and not visible) and discontinued (previously available and not visible).</p><p>Consider a schema that is something like:</p><pre> +---------------+     +----------------+
 | Product       |     | Product_state  |
 |---------------|     |----------------|
 | id (PK)       |  +--+ id (PK)        |
 | status (FK)   +--+  | visibile       |
 | sku           |     | desc           |
 | vendor (FK)   |     +----------------+
 | desc          |
 | ...           |
 +---------------+
</pre><p>Make sure you have all the appropriate indexes on the tables (see <a href="http://www.oracle.com/technetwork/articles/sharma-indexes-093638.html" rel="nofollow noreferrer">Bitmap vs B-tree in Oracle</a> and <a href="http://en.wikipedia.org/wiki/Bitmap_index" rel="nofollow noreferrer">bitmap index at wikipedia</a>).  This, combined with the proper view will allow you to simplify the query logic.</p><p>Rarely do products exist on their own.  As you mention:</p><blockquote><p>The issue I have is that this product could be referenced in a customers basket, to be paid orders, pending orders, deliveries, past orders etc...</p></blockquote><p>Removing the product from the database would either leave dangling references to things that don&#39;t exist.  Even more &#39;fun&#39; is if the database was constructed with foreign keys that cascade, that <em>cascade</em> of events becomes even more &#34;fun&#34; with a cascade of deletes that wipes out data, or sets the values to <code>null</code> (depending on how the cascade is set up - see <a href="http://en.wikipedia.org/wiki/Foreign_key#Referential_actions" rel="nofollow noreferrer">Foreign key at Wikipedia</a>).  Note that you <em>can</em> use this approach in some RDBMs to <em>prevent</em> people from messing up the master table by using the <code>restrict</code> option on foreign keys.</p><p>You wouldn&#39;t just use this for &#39;in a cart&#39; as a thing, but as you mentioned, paid orders, pending, deliveries, warranties, etc...  Restricting the foreign key delete <em>will</em> give you a database error if you try to delete where it shouldn&#39;t be and it will be enforced by the database itself, rather than trying to implement checks in code.</p><p>Using the foreign key constraints will also make sure that your database maintains referential integrity - preventing people from accidentally linking an order to something that doesn&#39;t exist (which is just as bad as deleting).  It can also improve performance of reads (see <a href="https://stackoverflow.com/q/507179/289086">Does Foreign Key improve query performance?</a>)</p><p>For oracle, you can read about the constraints on foreign keys: <a href="http://docs.oracle.com/cd/E17952_01/refman-5.5-en/create-table-foreign-keys.html" rel="nofollow noreferrer">13.1.17.2 Using Foreign Key Constraints</a></p><p>For mysql, you can read about <a href="http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html" rel="nofollow noreferrer">14.2.7.6 InnoDB and foreign key constraints</a></p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-tracking-correct-order-details-in-commerce-database-when-modifying-products/'>Database &#8211; Tracking correct order details in commerce database when modifying &#8216;products&#8217;</a></li><li class="list-group-item"><a href='../database-using-a-single-table-for-identity-and-metadata/'>Database &#8211; Using a single table for identity and metadata</a></li><li class="list-group-item"><a href='../desktop-to-web-how-to-deal-with-user-interactive-workflows/'>Desktop to Web &#8211; How to deal with user-interactive workflows</a></li><li class="list-group-item"><a href='../database-how-to-synchronize-data-between-two-web-services/'>Database &#8211; How to synchronize data between two web services</a></li><li class="list-group-item"><a href='../java-product-search-design-in-ecommerce-application/'>Java &#8211; Product search design in ecommerce application</a></li><li class="list-group-item"><a href='../who-owns-the-orders-in-a-consumer-provider-marketplace-like-platform/'>Who owns the Orders in a consumer-provider marketplace like platform</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>