<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Architecture &#8211; Cyclic dependencies in microservices &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072723 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072723" class="post-1072723 software type-software status-publish hentry category-software tag-architectural-patterns tag-architecture tag-dependency-analysis tag-microservices"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Architecture &#8211; Cyclic dependencies in microservices</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">architectural-patterns</span><span class="mr-2 badge badge-info">Architecture</span><span class="mr-2 badge badge-warning">dependency analysis</span><span class="mr-2 badge badge-primary">microservices</span></p><div class="entry-content"><p>Just wanted to know if cyclic dependency is something that one should avoid in microservice design.</p><p>For example, let&#39;s say we have a simple web store that sells fruit.</p><p>It could have:</p><ul><li>Account Service &#8211; where all information about accounts is stored</li><li>Order Service &#8211; where all the information about orders is stored</li><li>Fruit Stock Service &#8211; a simple listing of fruits, their availability<br /> is stock and prices.</li></ul><p>Let&#39;s say that we want to forbid our users buying more than 10 bananas total. And put the info about banana availability on the screen.</p><p>So which is the better way to do it:</p><ol><li><p>Have Fruit Stock Service make a request to a Order Service to get all previous user orders and return it with the bananas price and stock info. In this case we have a cyclic dependency because Order Service needs to know about fruit and Fruit Stock Service needs to know about orders</p></li><li><p>Have a separate request to Order Service (something like &#39;Can user 111 buy item 222&#39;). In this case we have to make 2 separate request to know if we should show bananas to this user or not.</p></li></ol></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Let&#39;s first get rid of a misconception</h2><p>The <a href="https://microservices.io/patterns/microservices.html" rel="nofollow noreferrer">microservice architecture</a> &#34;<em>structures the application as a set of loosely coupled, collaborating services</em>&#34;:</p><ul><li><em><strong>Collaborating</strong></em> mean that microservices may need to work together to achieve a higher objective. They may therefore need to know (or find out) how to work with other microservices, and perhaps even to rely on them.</li><li><em><strong>Loosely coupled</strong></em> means that each microservice is well encapsulated and can be replaced by another microservice offering the same &#34;contract&#34;, the same external interface.</li></ul><p>The goal of this architecture is allow you to compose many simpler microservices in order to offer complex services that can be scaled. Achieving this goal does not mean that microservices are independent, but that they are that are <em><strong>independently deployable</strong></em>. And that&#39;s a big difference</p><h2>Your question in theory</h2><p>If a microservice A depends on a microservice B you must be able to deploy a new version of A without touching B. So the services are dependent but they can be independently deployed.  As a real-life example, look at the relation between authorisation and product microservices <a href="https://medium.com/@tharanganilupul/microservices-implementation-netflix-stack-ba4f4a57a79f" rel="nofollow noreferrer">in the Netflix stack</a>.</p><p>If there is a cycle however, one should analyse if the service decomposition did went to far:</p><ul><li>If microservice A depends on B, but at the same time B depends on A,  it starts to look very much like a strong coupling. This means that something did not work as it should.  Verify if both functionality should not be packaged as a single microservice.</li><li>If a microservice A depends on a microservice B, which depends on microservice C which depends on microservice A, it&#39;s less obvious, but the service decomposition should be challenged for the same reason.</li></ul><p>Note that the dependency can very well be indirect (e.g. via a message queue)</p><h2>Your question in practice</h2><p>Let&#39;s look at the rule: &#34;<em>forbid our users buying more than 10 bananas total</em>&#34;:</p><ul><li>the rule is a condition for accepting the order, so it needs to be checked as part of <code>Order Service</code></li><li>to verify the rule, you need to find all past orders of the customer (in a given time frame?) and aggregate the quantity by product.  This would therefore typically be implemented as part of <code>Order Service</code></li><li>so for your question, there is no need for questions: everything would be performed as part of one microservice.</li></ul><p>But you could imagine less trivial scenarios:</p><ul><li><code>Order Service</code> could need to look for stock availability to inform the user of out-of-stock items during the ordering process.  Either you&#39;d make sure that all stock events are forwarded to order service.  Or you would make <code>Order Service</code> addressing a request to <code>Stock Service</code>.</li><li>In B2B, it would not be uncommon that <code>Order Service</code> needs to do a credit check for accepting an order, since the customer would pay after having received the goods. <code>Credit management</code> usually combines information from lot of sources  (e.g. external credit rating agencies, outstanding orders, outstanding invoices, payment history, etc...).  It would be a good candidate for a microservice.  But credit management requires to get invoices from accounting, which might receive them from order management.   So a circular dependency is something that can happen.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/populate-user-info-between-services-on-microservices-architecture/'>Populate User info between services on microservices architecture</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/a-canonical-schema-in-a-context-of-microservices-architecture/'>A canonical schema in a context of microservices architecture</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/what-can-be-the-design-of-a-distributed-high-available-trade-exchange/'>What can be the design of a distributed high available trade exchange</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>