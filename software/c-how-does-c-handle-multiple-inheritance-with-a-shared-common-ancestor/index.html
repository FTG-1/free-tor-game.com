<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; How does C++ handle multiple inheritance with a shared common ancestor &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069340 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069340" class="post-1069340 software type-software status-publish hentry category-software tag-c tag-language-design tag-multiple-inheritance"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; How does C++ handle multiple inheritance with a shared common ancestor</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">language-design</span><span class="mr-2 badge badge-warning">multiple-inheritance</span></p><div class="entry-content"><p>I&#39;m not a C++ guy, but I&#39;m forced to think about this. Why is multiple inheritance possible in C++, but not in C#? (I know of the <a href="http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem">diamond problem</a>, but that&#39;s not what I&#39;m asking here). How does C++ resolve the ambiguity of identical method signatures inherited from multiple base classes? And why is the same design not incorporated into C#?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>Why is multiple inheritance possible in C++, but not in C#?</p></blockquote><p>I think (without having hard reference),Â that in Java they wanted to limit the expressiveness of the language to make the language easier to learn and because code using multiple inheritance is more often too complex for its own good than not. And because full multiple inheritance is a lot more complicated to implement, so it simplified the virtual machine a lot too (multiple inheritance interacts especially badly with garbage collector, because it requires keeping pointers into the middle of object (at the beginning of the base))</p><p>And when designing C# I think they looked at Java, saw that full multiple inheritance indeed wasn&#39;t missed much and elected to keep things simple as well.</p><blockquote><p>How does C++ resolve the ambiguity of identical method signatures inherited from multiple base classes?</p></blockquote><p>It does <strong>not</strong>. There is a syntax to call base class method from specific base explicitly, but there is no way to override only one of the virtual methods and if you don&#39;t override the method in the subclass, it&#39;s not possible to call it without specifying the base class.</p><blockquote><p>And why is the same design not incorporated into C#?</p></blockquote><p>There is nothing to incorporate.</p><hr/><p>Since Giorgio mentioned interface extension methods in comments, I&#39;ll explain what mixins are and how they are implemented in various languages.</p><p>Interfaces in Java and C# are limited to declaring methods only. But the methods have to be implemented in each class that inherits the interface. There is however large class of interfaces, where it would be useful to provide default implementations of some methods in terms of others. Common example is comparable (in pseudo-language):</p><pre><code>mixin IComparable {
    public bool operator&lt;(IComparable r) = 0;
    public bool operator&gt;(IComparable r) { return r &lt; this; }
    public bool operator&lt;=(IComparable r) { return !(r &lt; this); }
    public bool operator&gt;=(IComparable r) { return !(r &gt; this); }
    public bool operator==(IComparable r) { return !(r &lt; this) &amp;&amp; !(r &gt; this); }
    public bool operator!=(IComparable r) { return r &lt; this || r &gt; this; }
};
</code></pre><p>Difference from full class is that this can&#39;t contain any data members. There are several options for implementing this. Obviously multiple inheritance is one. But multiple inheritance is rather complicated to implement. But it&#39;s not really needed here. Instead, many languages implement this by splitting the mixin in an interface, which is implemented by the class and a repository of method implementations, that are either injected into the class itself or an intermediate base class is generated and they are placed there. This is implemented in Ruby and <a href="http://dlang.org/" rel="nofollow">D</a>, will be implemented in Java 8 and can be implemented manually in C++ using the <a href="http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern" rel="nofollow">curiously recurring template pattern</a>. The above, in CRTP form, looks like:</p><pre><code>template &lt;typename Derived&gt;
class IComparable {
    const Derived &amp;_d() const { return static_cast&lt;const Derived &amp;&gt;(*this); }
public:
    bool operator&gt;(const IComparable &amp;r) const { r._d() &lt; _d(); }
    bool operator&lt;=(const IComparable &amp;r) const { !(r._d() &lt; _d(); }
    ...
};
</code></pre><p>and is used like:</p><pre><code>class Concrete : public IComparable&lt;Concrete&gt; { ... };
</code></pre><p>This does not require anything to be declared virtual as regular base class would, so if the interface is used in templates leaves useful optimization options open. Note, that in C++ this would probably still be inherited as second parent, but in languages that don&#39;t allow multiple inheritance it&#39;s inserted into the single inheritance chain, so it&#39;s more like</p><pre><code>template &lt;typename Derived, typename Base&gt;
class IComparable : public Base { ... };
class Concrete : public IComparable&lt;Concrete, Base&gt; { ... };
</code></pre><p>The compiler implementation may or may not avoid the virtual dispatch.</p><p>A different implementation was selected in C#. In C# the implementations are static methods of completely separate class and the method call syntax is appropriately interpreted by compiler if a method of given name does not exist, but an &#34;extension method&#34; is defined. This has the advantage that extension methods can be added to already compiled class and the disadvantage that such methods can&#39;t be overriden e.g. to provide optimized version.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../architecture-ny-real-reason-multiple-inheritance-is-hated/'>Architecture &#8211; ny &#8220;real&#8221; reason multiple inheritance is hated</a></li><li class="list-group-item"><a href='../c-help-with-inheritance-hierarchy-design/'>C# &#8211; Help with inheritance hierarchy design</a></li><li class="list-group-item"><a href='../how-do-traits-in-scala-avoid-the-diamond-error/'>How do Traits in Scala avoid the &#8220;diamond error&#8221;</a></li><li class="list-group-item"><a href='../c-code-re-use-in-c-via-multiple-inheritance-or-composition-or/'>C++ &#8211; Code re-use in C++, via multiple inheritance or composition? Or&#8230;</a></li><li class="list-group-item"><a href='../c-alternatives-to-multiple-inheritance-for-the-architecture-npcs-in-a-realtime-strategy-game/'>C# &#8211; Alternatives to multiple inheritance for the architecture (NPCs in a Realtime Strategy game)</a></li><li class="list-group-item"><a href='../why-do-you-reduce-multiple-inheritance-to-the-diamond-problem/'>Why do you reduce multiple inheritance to the diamond problem</a></li><li class="list-group-item"><a href='../object-oriented-interfaces-in-python-multiple-inheritance-vs-a-home-made-solution/'>Object-oriented &#8211; Interfaces in Python, multiple inheritance vs. a home-made solution</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>