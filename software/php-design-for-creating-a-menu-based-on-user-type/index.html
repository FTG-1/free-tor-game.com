<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; Design for creating a menu based on user type &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1074338 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1074338" class="post-1074338 software type-software status-publish hentry category-software tag-design-patterns tag-object-oriented-design tag-php"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; Design for creating a menu based on user type</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span><span class="mr-2 badge badge-info">object-oriented-design</span><span class="mr-2 badge badge-warning">PHP</span></p><div class="entry-content"><p><strong>Problem</strong><br /> I am building a PHP application which has a main menu, which in turn contains various &#34;sections&#34; or &#34;subheadings&#34; with various links. There are several user types such as SuperAdmin, Admin, Teacher, Student, etc, and each type should see a potentially different menu structure. It seems that my client would like to add more types down the line.</p><p>Currently I have a huge if/elseif/&#8230; block that checks what user type you are and creates an array with arrays for all the sections, containing yet more arrays for each link (these arrays contain the url, class and caption of the url). It&#39;s about 700 lines long at the moment. As you can see, this is becoming quite complex and tiresome to get working. So what I&#39;ve attempted to do is use some design patterns (of which my knowledge is not that amazing).</p><p><strong>Failed attempts</strong><br /> Firstly I attempted to create a few <em>Builder</em> implementations: one for the link itsself, one for the &#34;section&#34;, and finally one for the menu itself. Then I attempted implementing a <em>Strategy</em> pattern to check current user type, and add links to sections and these sections to the menu. The final attempt was to serialize this menu object to the DB and just read it from there (as some user types can have dynamically configured sections/links)</p><p><strong>The real question</strong><br /> I have no clue whether my rationale is even remotely correct in this regard, because I&#39;ve created and completely deleted all my code about 4 times now as it becomes complex to comprehend just what must go where. So I guess my actual question is this: <strong>If you had to build this kind of implementation for menus (or anything where multiple objects are built into another object, and multiple objects of that type are built into yet another object), how would you go about it?</strong> What patterns would be useful and how would one structure them to work together without killing your brain?</p><p>Thanks!</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>PHP Dynamic and Recursive Menu System</strong></p><p>When building the dynamic menu at my previous job, for our CMS, we had one class that dynamicly builds/prints the menu based on the menu object.</p><p><strong><a href="http://mybutterfly.se/test.php" rel="nofollow">View output example of the code below</a></strong></p><p>Since you&#39;re kind of new, I don&#39;t suggest making any overkill menu, but try to keep it as simple as possible.</p><p>I suggest making a class for the menu, where you send/store the menu array. This way you can make other objects unlock/lock different menu objects, or even send a sub-menu to that menu class (depending on how complex you want to make it).</p><p>This allows you to dynamicly build the menu as you run through the system code, and print the menu when your code is finished running. That way you can put the user based menu items in each section of the code, which handles that part.</p><p>For example, when running the system, make a function/method that checks the user access and for simple solutions, have hard-coded arrays with menu objects for each user access, or if going hardcore, build the menu arrays dynamicly. That&#39;s up to you.</p><pre><code>&lt;?php
// Let&#39;s create the child menu array for the &#34;Home&#34; menu structure
$home[] = array(&#39;TITLE&#39; =&gt; &#39;Home 1&#39;,
                &#39;URL&#39; =&gt; &#39;/home-1-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu&#39;,
                &#39;CHILDREN&#39; =&gt; $home1Child);

$home[] = array(&#39;TITLE&#39; =&gt; &#39;Home 2&#39;,
                &#39;URL&#39; =&gt; &#39;/home-2-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu&#39;);

// Now we create the whole home array, with the children
$homeMenu = array(&#39;CSS_CLASS&#39; =&gt; &#39;top-css-class&#39;,
                 &#39;TITLE&#39; =&gt; &#39;Home&#39;,
                 // If the top menu item is just a link, specify an URL
                 &#39;URL&#39; =&gt; &#39;&#39;, 
                 // Or if it has children pass them on
                 &#39;CHILDREN&#39; =&gt; $home);

// Let&#39;s create the child menu array for the &#34;Gallery&#34; menu structure
$gallery[] = array(&#39;TITLE&#39; =&gt; &#39;Gallery 1&#39;,
                &#39;URL&#39; =&gt; &#39;/gallery-1-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu&#39;);

$gallery2Child[] = array(&#39;TITLE&#39; =&gt; &#39;Gallery 2.1&#39;,
                &#39;URL&#39; =&gt; &#39;/gallery-2.1-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu-child&#39;);
$gallery2Child[] = array(&#39;TITLE&#39; =&gt; &#39;Gallery 2.2&#39;,
                &#39;URL&#39; =&gt; &#39;/gallery-2.2-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu-child&#39;);

$gallery[] = array(&#39;TITLE&#39; =&gt; &#39;Gallery 2&#39;,
                &#39;URL&#39; =&gt; &#39;/gallery-2-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu&#39;,
                &#39;CHILDREN&#39; =&gt; $gallery2Child);

// Now we create the whole gallery array, with the children
$galleryMenu = array(&#39;CSS_CLASS&#39; =&gt; &#39;top-css-class&#39;,
                 &#39;TITLE&#39; =&gt; &#39;Gallery&#39;,
                 // If the top menu item is just a link, specify an URL
                 &#39;URL&#39; =&gt; &#39;&#39;, 
                 // Or if it has children pass them on
                 &#39;CHILDREN&#39; =&gt; $gallery);

$menu = new menu;
// Store the menu items we want in the menu
$menu-&gt;storeItem($homeMenu);
$menu-&gt;storeItem($galleryMenu);
// Print the menu
echo $menu-&gt;buildMenu();
</code></pre><p>If you want to make sub-menus aswell, make the menu class work recursively.</p><pre><code>class menu {
   private $mainMenuClass = &#39;main-menu-class&#39;;
   private $parentClass = &#39;parent-menu-class&#39;;
   private $menu;

   public function storeItem($menuItem, $parentClass = &#39;&#39;) { // If no $parentClass is specified, pick the default one
      // This stores the menu in an array
      $this-&gt;menu[] = $menuItem;
   }

   public function buildMenu() {
      // Let&#39;s break down the menu array, and start building it
      $html = &#39;&lt;ul class=&#34;&#39;. $this-&gt;mainMenuClass .&#39;&#34;&gt;&#39;. PHP_EOL;
      foreach($this-&gt;menu as $parentClass =&gt; $item) {
         $html .= &#39;&lt;li class=&#34;&#39;. $item[&#39;CSS_CLASS&#39;] .&#39;&#34;&gt;&lt;a href=&#34;&#39;. $item[&#39;URL&#39;] .&#39;&#34;&gt;&#39;. $item[&#39;TITLE&#39;] .&#39;&lt;/a&gt;&#39;. PHP_EOL;
         // Check if it&#39;s a recursive sub-menu (with children)
         // Now we send the children array to the buildChildrenItems() method
         $html .= $this-&gt;buildChildrenItems($item[&#39;CHILDREN&#39;]);
         $html .= &#39;&lt;/li&gt;&#39;. PHP_EOL;
      }
      $html .= &#39;&lt;/ul&gt;&#39;. PHP_EOL;
   return $html;
   }

   public function buildChildrenItems($menuSection) {
      // Put the recursive logics here so we can keep looping
      $html = &#39;&lt;ul class=&#34;&#39;. $this-&gt;parentClass .&#39;&#34;&gt;&#39;. PHP_EOL;
      foreach($menuSection as $item) {
          $html .= &#39;&lt;li class=&#34;&#39;. $item[&#39;CSS_CLASS&#39;] .&#39;&#34;&gt;&lt;a href=&#34;&#39;. $item[&#39;URL&#39;] .&#39;&#34;&gt;&#39;. $item[&#39;TITLE&#39;] .&#39;&lt;/a&gt;&#39;. PHP_EOL;
          // Now here is where the recursive magic happends
          // If the child item has even more children, call this method once again for those children
          $html .= ( isset($item[&#39;CHILDREN&#39;]) &amp;&amp; is_array($item[&#39;CHILDREN&#39;]) ) ? $this-&gt;buildChildrenItems($item[&#39;CHILDREN&#39;]) : &#39;&#39;; 
          $html .= &#39;&lt;/li&gt;&#39;. PHP_EOL;
      }
      $html .= &#39;&lt;/ul&gt;&#39;. PHP_EOL;
   return $html;
   }
}
</code></pre><p>?&gt;</p><p>From here you just design the menu as you want, using the CSS classes.</p><p>If you want to make it recursive (with dynamic sub-menus), then simply make the recursive logics before calling the buildChildrenItems() method. This is included in the code example above.</p><p>For more complex recursive menus, try these arrays.</p><pre><code>$home1Child[] = array(&#39;TITLE&#39; =&gt; &#39;Home 1.1&#39;,
                &#39;URL&#39; =&gt; &#39;/home-1.1-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu-child&#39;);

$home121Child[] = array(&#39;TITLE&#39; =&gt; &#39;Home 1.2.1&#39;,
                    &#39;URL&#39; =&gt; &#39;/home-1.2.1-url-here&#39;,
                    &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu-child&#39;);

    $home121Child[] = array(&#39;TITLE&#39; =&gt; &#39;Home 1.2.2&#39;,
                    &#39;URL&#39; =&gt; &#39;/home-1.2.2-url-here&#39;,
                    &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu-child&#39;);

$home1Child[] = array(&#39;TITLE&#39; =&gt; &#39;Home 1.2&#39;,
                &#39;URL&#39; =&gt; &#39;/home-1.2-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu-child&#39;,
                &#39;CHILDREN&#39; =&gt; $home121Child);

$home1Child[] = array(&#39;TITLE&#39; =&gt; &#39;Home 1.3&#39;,
                &#39;URL&#39; =&gt; &#39;/home-1.3-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu-child&#39;);

$home[] = array(&#39;TITLE&#39; =&gt; &#39;Home 1&#39;,
                &#39;URL&#39; =&gt; &#39;/home-1-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu&#39;,
                &#39;CHILDREN&#39; =&gt; $home1Child);

$home[] = array(&#39;TITLE&#39; =&gt; &#39;Home 2&#39;,
                &#39;URL&#39; =&gt; &#39;/home-2-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu&#39;);

$home[] = array(&#39;TITLE&#39; =&gt; &#39;Home 3&#39;,
                &#39;URL&#39; =&gt; &#39;/home-3-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu&#39;);

// Now we create the whole home array, with the children

$homeMenu = array(&#39;CSS_CLASS&#39; =&gt; &#39;top-css-class&#39;,
                 &#39;TITLE&#39; =&gt; &#39;Home&#39;,
                 // If the top menu item is just a link, specify an URL
                 &#39;URL&#39; =&gt; &#39;&#39;, 
                 // Or if it has children pass them on
                 &#39;CHILDREN&#39; =&gt; $home);

// Let&#39;s create the child menu array for the &#34;Gallery&#34; menu structure
$gallery[] = array(&#39;TITLE&#39; =&gt; &#39;Gallery 1&#39;,
                &#39;URL&#39; =&gt; &#39;/gallery-1-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu&#39;);

$gallery2Child[] = array(&#39;TITLE&#39; =&gt; &#39;Gallery 2.1&#39;,
                &#39;URL&#39; =&gt; &#39;/gallery-2.1-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu-child&#39;);
$gallery2Child[] = array(&#39;TITLE&#39; =&gt; &#39;Gallery 2.2&#39;,
                &#39;URL&#39; =&gt; &#39;/gallery-2.2-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu-child&#39;);

$gallery[] = array(&#39;TITLE&#39; =&gt; &#39;Gallery 2&#39;,
                &#39;URL&#39; =&gt; &#39;/gallery-2-url-here&#39;,
                &#39;CSS_CLASS&#39; =&gt; &#39;sub-menu&#39;,
                &#39;CHILDREN&#39; =&gt; $gallery2Child);

// Now we create the whole gallery array, with the children
$galleryMenu = array(&#39;CSS_CLASS&#39; =&gt; &#39;top-css-class&#39;,
                 &#39;TITLE&#39; =&gt; &#39;Gallery&#39;,
                 // If the top menu item is just a link, specify an URL
                 &#39;URL&#39; =&gt; &#39;&#39;, 
                 // Or if it has children pass them on
                 &#39;CHILDREN&#39; =&gt; $gallery);
</code></pre><p><strong><a href="http://mybutterfly.se/test.php" rel="nofollow">View output example of the code above</a></strong></p><p>Finally, in the different classes for example, let&#39;s say the Gallery. Create the gallery menu array, check what kind of access the user has, and build it properly. Then you send the gallery menu array to the menu class, as shown above.</p><p>This concept is also good for future expansions, so when adding a new class/section on the website, let&#39;s say a guestbook. All the menu logics are built in that class and just sent to the dynamic menu class which builds it.</p><p>I do not recommend putting all the menu logics inside one big menu file, but as you run the system code, process each section and build the menu object as you go.</p><p>Hope this helps you on your way!</p><p>PS. If you have alot of user access types, and want to keep a clean code, put the menu arrays for each user access in seperate php files. (user_type_member.php or user_type_admin.php).</p><p>In the php code, where the arrays are written, just make a user type check, and call the according php file to load the array for that user.</p><pre><code>switch($userType) {
   default: 
   case &#39;visitor&#39;: include(&#39;user_type_visitor.php&#39;); break;
   case &#39;member&#39;: include(&#39;user_type_member.php&#39;); break;
   case &#39;admin&#39;: include(&#39;user_type_admin.php&#39;); break;
}
</code></pre><p>Regards,
Andreas.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/design-is-context-inheritance-as-shown-by-head-first-design-patterns-duck-example-irrelevant-to-strategy-pattern/'>Design &#8211; Is context inheritance, as shown by Head First Design Patterns&#8217; Duck example, irrelevant to strategy pattern</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>