<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Php &#8211; How to write a command interpreter/parser &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067695 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067695" class="post-1067695 software type-software status-publish hentry category-software tag-algorithms tag-command-line tag-parsing tag-perl tag-php"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Php &#8211; How to write a command interpreter/parser</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">algorithms</span><span class="mr-2 badge badge-info">command line</span><span class="mr-2 badge badge-warning">parsing</span><span class="mr-2 badge badge-primary">perl</span><span class="mr-2 badge badge-danger">PHP</span></p><div class="entry-content"><p>Problem: Run commands in the form of a string.</p><ul><li><p>command example:</p><p><code>/user/files/ list all;</code><br /> equivalent to:<br /> <code>/user/files/ ls -la;</code></p></li><li><p>another one:</p><p><code>post tw fb &#34;HOW DO YOU STOP THE TICKLE MONSTER?;&#34;</code></p></li></ul><p>equivalent to:<br /> <code>post -tf &#34;HOW DO YOU STOP THE TICKLE MONSTER?;&#34;</code></p><p>Current solution:</p><pre><code>tokenize string(string, array);

switch(first item in array) {
    case &#34;command&#34;:
        if ( argument1 &gt; stuff) {
           // do the actual work;
        }
}
</code></pre><p>The problems I see in this solution are:</p><ul><li>No error checking other than nested ifs-else inside each case. The<br /> script becomes very big and hard to mantain.</li><li>Commands and responses are hardcoded.</li><li>No way of knowing if flags are correct or missing parameters.</li><li>Lack of intelligence to suggest &#34;you might wanted to run $command&#34;.</li></ul><p>And the last thing I can&#39;t address is synonyms in different encodings, example:</p><pre><code>case command:
case command_in_hebrew:
    do stuff;
break;
</code></pre><p>The last one might be trivial, but well, what I want to see is the solid fundations of this kind of program.</p><p>I&#39;m currently programming this in PHP but might do it in PERL.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Let me admit frankly, building parser is a tedious job and comes close to compiler technology but building one would turn out to be a good adventure. And a parser comes with interpreter. So you got to build both.</p><p><strong>A quick introduction to parser and interpreters</strong></p><p>This is not too technical. So experts don&#39;t fret at me.</p><p>When you feed some input into a terminal, the terminal splits the input into multiple units. The input is called expression and the multiple units are called tokens. These tokens can be operators or symbols. So if you enter <strong>4+5</strong> in a calculator, this expression gets split into three tokens 4,+,5. The plus is considered an operator while 4 and 5 symbols. This is passed to a program (consider this as an interpreter) which contains the definition for the operators. Based on the definition (in our case, add), it adds the two symbols and returns the result to the terminal. All compilers are based on this technology. 
The program that splits an expression into multiple tokens is called a lexer and the program that converts these tokens into tags for further processing and execution is called parser.</p><p><a href="http://dinosaur.compilertools.net/">Lex and Yacc</a> are the canonical forms for building lexers and parsers based on <a href="http://en.wikipedia.org/wiki/Backusâ€“Naur_Form">BNF</a> grammar under C and it is the recommended option. Most parsers are a clone of Lex and Yacc.</p><p><strong>Steps in building a parser/intrepreter</strong></p><ol><li>Classify your tokens into symbols, operators and keywords (keywords are operators)</li><li>Build your grammar using the BNF form</li><li>Write parser functions for your operations</li><li>Compile it an run as a program</li></ol><p>So in the above case your of addition tokens would be any digits and a plus sign with definition of what to do with the plus sign in the lexer</p><p><strong>Notes and Tips</strong></p><ul><li>Choose a parser technique that evaluates from left to right <a href="http://en.wikipedia.org/wiki/LALR_parser">LALR</a></li><li>Read this dragon book on <a href="http://books.google.co.in/books?id=kLVv4MSa7EUC&amp;printsec=frontcover&amp;dq=compilers%20principles%20techniques%20and%20tools&amp;hl=en&amp;sa=X&amp;ei=ENDxTuO0M4OJrAedio3VDw&amp;sqi=2&amp;ved=0CDkQ6AEwAQ">Compilers</a> to get a feel of it. I personally haven&#39;t finished the book</li><li>This <a href="http://www.google.com/url?sa=t&amp;rct=j&amp;q=dabeaz%20lex%20pdf&amp;source=web&amp;cd=1&amp;sqi=2&amp;ved=0CBwQFjAA&amp;url=http://www.dabeaz.com/ply/PLYTalk.pdf&amp;ei=S9HxTo7HFozRrQe3l63eDw&amp;usg=AFQjCNHZw3SBlHuzFCiCVzQkoEJ6q4l11A">link</a> would give a super-fast insight into Lex and Yacc under Python</li></ul><p><strong>A simple approach</strong></p><p>If you just need a simple parsing mechanism with limited functions, turn your requirement into a Regular Expression and just create a whole bunch of functions. To illustrate, assume a simple parser for the four arithmetic functions. So you would be the calling the operator first and then the list of functions (similar to lisp) in the style <code>(+ 4 5)</code> or <code>(add [4,5])</code> then you could use a simple RegExp to get the list of operators and the symbols to be operated upon.</p><p>Most common cases could be easily solved by this approach. The downside is you can&#39;t have a lot of nested expressions with a clear syntax and you can&#39;t have easy higher order functions.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-do-i-speedily-traverse-a-file-system-while-extracting-extrapolating-various-data-and-provide-user-feedback/'>How do i speedily traverse a file system while extracting/extrapolating various data and provide user feedback</a></li><li class="list-group-item"><a href='../what-are-the-arguments-against-parsing-the-cthulhu-way/'>What are the arguments against parsing the Cthulhu way</a></li><li class="list-group-item"><a href='../php-how-to-choose-a-proper-parser-generator-for-php/'>Php &#8211; How to choose a proper parser generator for PHP</a></li><li class="list-group-item"><a href='../php-custom-php-template-engine/'>Php &#8211; Custom PHP Template Engine</a></li><li class="list-group-item"><a href='../php-using-the-command-pattern-for-a-sequence-of-tasks/'>Php &#8211; Using the command pattern for a sequence of tasks</a></li><li class="list-group-item"><a href='../javascript-preserving-pre-formatted-multi-line-strings-in-node-js-scripts/'>Javascript &#8211; Preserving Pre-formatted Multi-Line Strings in Node.js Scripts</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>