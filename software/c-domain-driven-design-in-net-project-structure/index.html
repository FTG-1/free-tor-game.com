<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Domain Driven Design in Net &#8211; Project Structure &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067347 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067347" class="post-1067347 software type-software status-publish hentry category-software tag-c tag-domain-driven-design tag-projects-and-solutions"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Domain Driven Design in Net &#8211; Project Structure</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">domain-driven-design</span><span class="mr-2 badge badge-warning">projects-and-solutions</span></p><div class="entry-content"><p>I&#39;m getting my head around DDD and how to build up an C# Project structure for an .Net Core WebApp.<br /> I searched quite a bit around the web, for example <a href="https://softwareengineering.stackexchange.com/questions/352083/how-to-structure-a-domain-driven-design-in-an-onion-architecture">How to structure a Domain Driven Design in an Onion Architecture?</a>, <a href="https://github.com/zkavtaskin/Domain-Driven-Design-Example" rel="noreferrer">https://github.com/zkavtaskin/Domain-Driven-Design-Example</a> and several Pluralsight courses.</p><p>What bogs me is the fact, that this HelloWorld-examples don&#39;t seem to work very well in the real life:<br /> Let&#39;s say we build the propagated onion structure of Application, Domain and Infrastructure. Application would in this case be the WebApi-part, Domain the Domain-Services, Entities, Value Objects etc. and Infrastructure the implementation of the Interfaces defined in the Domain-Assembly.</p><p>So far so good, but with this approach, I&#39;d need to define every bit of helping code in the Domain-Layer. For Services, Handlers, etc. I could define just the Interfaces and let the implementation inject from the Infrastructure-layer. But as soon as I started coding like this, I had folders like Attributes, Handlers (low level services for REST, Files etc.) and a ton of other technical stuff in my domain-layer.<br /> For the sake of testing, I tried to revert the dependency, so the Domain targets the Infrastructure. This allows to move all the supporting code and low-level handlers to the Infrastructure, but makes communication awkward: Since the entities and value objects are still in the Domain, the Infrastructure doesn&#39;t know them anymore, so I&#39;d need to map them to DTOs, adding another mapping layer just for this communication.</p><p>From reading Eric Evans book, I took the idea, that the Domain-Layer should be written in the ubiquitous language, be technical agnostic and be the communcation platform with the domain experts. But I can&#39;t find a good solution to have the both of best worlds. Am I missing something crucial here?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I think that we often out-think ourselves when we are trying to learn a new way of doing things.  Instead of boiling the problem down to the smallest thing that can possibly work, we think about things that aren&#39;t important right now.  Onion architecture and DDD work together to provide a way of letting you define that <em>simplest</em> way of doing things.</p><h2>What&#39;s really your domain?</h2><p>That&#39;s the question you need to be asking yourself.  The most core concepts are:</p><ul><li>How domain objects interact with other domain objects</li><li>How domain objects interact with primary services</li></ul><p>Everything else is completely outside the domain.  Whether you use a Repository pattern for persistence or something else is beside the point.  There will be points where your domain object needs to interact with a service.  That&#39;s OK.</p><ul><li>Stub your services using interfaces and domain terminology</li></ul><p>And stop.  You can have a fully unit tested domain driven design with these two concepts.</p><h2>Services from the inside out</h2><p>In an Onion architecture, the implementation of your services are done at a layer outside of your domain model.  That keeps the domain clean, and separated from the concerns of your service.</p><p>One example would be using a SQL database for persistence.  If you need to change that in the future, or add other types of databases (graph, search, etc) to facilitate your system, you can localize those changes behind the service you defined in the domain model.</p><p>Common things that are not central to the domain:</p><ul><li>Authentication</li><li>Persistence</li><li>Rendering (i.e. REST services, full web application, desktop app, etc)</li><li>Internationalization</li><li>Messaging</li></ul><p>That is not a full and exhaustive list.</p><p>Your domain may have users, and those users have roles... but how the user is authenticated and those roles supplied are things that will change over time.</p><p>Modes of messaging may change over time, as well as specific content, but the types of messages and triggers that kick them off are related to the domain.</p><p>Feel free to apply the same concepts to implementing your services as you did for the core domain.  The only difference is the domain for a persistence service is different than for your core application.</p><h2>Project Structure</h2><p>It really depends on how granular you want to go, but at the very least you should have one library as your core domain model.  You can have service implementations in separate projects, or group some things together.</p><pre><code>+ Solution
  + Project.Domain (or Core if you prefer)
  + Project.Domain.Test
  + Project.Persistence.Service
  -- etc.
  * WebAPI
</code></pre><p>Don&#39;t be overly religious about your project organization.  It only needs to be reasonably clear where to look for things.  Your core domain library has the domain objects and interfaces for services as necessary.  The only rule I&#39;d recommend is to have a clear hierarchy of project dependencies.  Project.Domain shouldn&#39;t depend on anything outside of your standard library for the language you are using.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-is-this-a-good-visual-studio-solution-structure-for-a-domain-driven-design-restful-web-service/'>C# &#8211; Is this a good Visual Studio solution structure for a domain driven design RESTful web service</a></li><li class="list-group-item"><a href='../architecture-how-to-structure-a-domain-driven-design-in-an-onion-architecture/'>Architecture &#8211; How to structure a Domain Driven Design in an Onion Architecture</a></li><li class="list-group-item"><a href='../c-domain-driven-design-in-an-onion-architecture/'>C# &#8211; Domain Driven Design in an Onion Architecture</a></li><li class="list-group-item"><a href='../c-how-to-structure-an-onion-project/'>C# &#8211; How to structure an Onion project</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>