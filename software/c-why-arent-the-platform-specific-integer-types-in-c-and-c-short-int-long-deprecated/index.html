<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; why aren&#8217;t the platform specific integer types in C and C++ (short, int, long) deprecated &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1080885 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1080885" class="post-1080885 software type-software status-publish hentry category-software tag-c tag-data-types"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; why aren&#8217;t the platform specific integer types in C and C++ (short, int, long) deprecated</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">data types</span></p><div class="entry-content"><p>TL;DR: Why isn&#39;t everybody screaming, &#34;Don&#39;t use <code>short</code>, <code>int</code>, and <code>long</code> unless you really need to, and you very likely don&#39;t need to!&#34;</p><hr/><p>I understand that, in theory, by using the types <code>short</code>, <code>int</code>, and <code>long</code>, you let the compiler choose the length that is most efficient for the given processor.</p><p>But is this a case of premature optimization being the root of all evil?</p><p>Suppose I have an integer variable that I know will always hold numbers from 1 to 1000. My understanding is that, assuming I am not worried about the memory difference between two and four bytes, the proponents of <code>short</code>/<code>int</code>/<code>long</code> would have me make that variable an <code>int</code> because that way the compiler can choose 16 bits or 32 bits depending on what is more efficient for the processor. If I had made it a <code>uint16_t</code>, the compiler may not be able to make code that is quite as fast.</p><p>But on modern hardware is that even true? Or rather, is the speed that&#39;s going to gain me (if any), really worth the much more likely possibility that using an imprecise type leads to a major bug in my program? For instance, I might use <code>int</code> throughout my program and think of it as representing a 32 bit value because that&#39;s what it&#39;s represented on every platform I&#39;ve used for the past 20 years, but then my code is compiled on an unusual platform where <code>int</code> is two bytes and all sorts of bugs happen.</p><p>And aside from bugs, it just seems like an annoyingly imprecise way for programmers to talk about data. As an example, here is the definition that <a href="https://docs.microsoft.com/en-us/windows/win32/api/guiddef/ns-guiddef-guid" rel="noreferrer">Microsoft gives</a> in 2019 for a GUID structure:</p><pre><code>typedef struct _GUID {
  unsigned long  Data1;
  unsigned short Data2;
  unsigned short Data3;
  unsigned char  Data4[8];
} GUID;
</code></pre><p>Because of what a Uuid is, that long <em>has</em> to mean 32 bits, those shorts <em>have</em> to mean 16 bits, and that char <em>has</em> to mean 8 bits. So why continue to talk in this imprecise language of &#34;short&#34;, &#34;long&#34; and (heaven help us) &#34;long long&#34;?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><blockquote><p>I understand that, in theory, by using the types short, int, and long, you let the compiler choose the length that is most efficient for the given processor.</p></blockquote><p>That is only partially true. All those types have a <a href="https://stackoverflow.com/questions/14815180/guarantateed-minimum-size-range-of-c-data-types">guaranteed minimum size</a> in ANSI C (AFAIK even in ANSI C89). Code relying only on those minimum sizes is still portable. Cases where the maximum size of a type matters to portability are way less frequent. Said that, I have seen (and written) lots of code over the years where <code>int</code> was assumed to be 32 bit as minimum, written clearly for environments with &gt;=32 bit CPUs at minimum.</p><blockquote><p>But is this a case of premature optimization [...]?</p></blockquote><p>Premature optimization is not only about optimizing for speed. It is about investing <strong>extra effort</strong> into code, and making code <strong>more complicated</strong>, for a (often pathological) &#34;just in case&#34; reason. &#34;Just in case it could be slow&#34; is only one of those potential reasons. So avoiding the usage of <code>int</code> &#34;just in case&#34; it could be ported to a 16 bit platform in the future could also be seen as a form of premature optimization, when this kind of porting will likely never happen.</p><p>Said that, I think the part you wrote about <code>int</code> is to some degree correct: in case there is any evidence a program might get ported from a 32 to a 16 bit platform, it would be best not to rely on <code>int</code> having 32 bits, and to use either <code>long</code>, a <a href="https://en.wikipedia.org/wiki/C_data_types#Fixed-width_integer_types" rel="nofollow noreferrer">specific C99 data type like <code>int32_t</code> or <code>int_least32_t</code></a> whereever one is unsure whether 16 bits are enough, or not. One could also use a global <code>typedef</code> to define <code>int32_t</code> on platforms which are not C99 compliant. All of this is a little bit of extra effort (at least in teaching the team which special data types were used in the project, and why).</p><p>See also <a href="https://stackoverflow.com/questions/13413521/is-there-any-reason-not-to-use-fixed-width-integer-types-e-g-uint8-t">this older SO article</a>, for which the top most answer says, most people don&#39;t need that degree of portability.</p><p>And to your example about the GUID structure: the shown data structure seems to be mostly ok, it uses data types which are guaranteed to be large enough for each of the parts on each ANSI compliant platform. So even if someone tries to use this structure for writing portable code, that would perfectly be possible.</p><p>As you noted by yourself, if someone would try to use this structure as a spec for a GUID, they could complain about the fact it is to some degree imprecise and that it requires the read the documentation in full for getting an unambigous spec. This is one of the less frequent cases where maximum size of the types may matter.</p><p>Other problems could arise when the content of such a <code>struct</code> is string-formatted, binary serialized, stored or transmitted somewhere, whilst making assumptions about the individual maximum size of each field, or the total size being exactly 128 bit, the endianness, or the precise binary encoding of those data types. But since the documentation of the GUID struct does not make any promises about the underlying binary representation, one should not make any assumptions about it when trying to write portable code.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../why-were-short-int-and-long-invented-in-c/'>Why were short, int, and long invented in C</a></li><li class="list-group-item"><a href='../correct-for-loop-design/'>Correct For Loop Design</a></li><li class="list-group-item"><a href='../has-variable-width-types-been-replaced-by-fixed-types-in-modern-c/'>Has variable width types been replaced by fixed types in modern C</a></li><li class="list-group-item"><a href='../c-how-to-store-various-sized-values-in-a-vector/'>C++ &#8211; How to store various sized values in a vector</a></li><li class="list-group-item"><a href='../c-does-a-long-ban-make-sense/'>C++ &#8211; Does a `long` ban make sense</a></li><li class="list-group-item"><a href='../is-using-64-bit-integers-long-long-faster-than-less-bits-ones/'>Is using 64 bit integers (long long) faster than less bits ones</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>