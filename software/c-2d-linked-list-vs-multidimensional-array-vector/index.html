<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; 2D linked list vs. multidimensional array/vector &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072285 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072285" class="post-1072285 software type-software status-publish hentry category-software tag-array tag-c tag-data-structures tag-linked-list"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; 2D linked list vs. multidimensional array/vector</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">array</span><span class="mr-2 badge badge-info">c</span><span class="mr-2 badge badge-warning">data structures</span><span class="mr-2 badge badge-primary">linked list</span></p><div class="entry-content"><p>I hope that programmers is the correct stack exchange for this, as it is quite a concept based question.</p><p>I&#39;m working on a data structure in C++ that is a represents data in 3D space. The x-y plane is large (say 0 &#8211; 10 000) while the z-axis has a very small range (0 &#8211; 10). All the data is located on integer (x,y,z) points. However there can be more than one than one data point on an (x,y,z) coordinate.</p><p>I have thought of three ways of approaching this subject, and don&#39;t have the necessary experience to choose between them.</p><ol><li><p>Using a 2D linked list inside vectors (dynamic arrays) <code>vector&lt;vector&lt;structureA*&gt;&gt; Data</code> where the first list item for that (x,y) point can be accessed using <code>Data[x][y]</code>. structureA contains an its z value, its actual data, as well as a pointer to the next structure in the list (that may, or may not have a different z coordinate, but is located  on the same line defined by x and y). Accessing elements at the middle and end of this list is slow.</p></li><li><p>Using a three dimensional array/vector: <code>vector&lt;vector&lt;vector&lt;structureB&gt;&gt;&gt; Data</code>. In this case the first two vectors define the x and y coordinates (as before) and the third vector gives us an array of all of the elements on that line defined by x and y. We can quickly determine how many elements are on this line (by querying the third vector) and can iterate from the back and the front. <code>structureB</code> contains, the point&#39;s z value and its data. This seems like a fairly good and safe (regarding memory allocation) solution to me.</p></li><li>Using a three dimensional array/vector and a linked list. In this case the data could be accessed as such: <code>Data[x][y][z]</code> and would point to the first element of a linked list of data that resides at this coordinate. The structure pointed to would not contain its z value here as this is already dealt with in its address in the array. However, many (x,y,z) points have no data, whereas most of those that do have data have 10+ data structures. (All lines defined by a specific (x,y) contain at least one structure). This seems the worst solution to me as in many cases I would have to iterate through empty z coordinates, before hitting a linked list to iterate through.</li></ol><p>The emphasis in this program is speed, my data set is less than 100MB on a modern computer, so even an inefficient method of storing it in RAM is fine. Option 2 seems the best to me, although in the past I&#39;ve normally seen people more inclined to go with option 1. I&#39;m interested to hear your opinions on the best way to handle this along with your reasoning.<br /> Many Thanks.</p><p><strong>Update</strong></p><p>Thanks for the responses, I stand to learn quite a lot from your comments as I am a hobby programmer, having taken only one short course on the fundamentals of C a few years back.</p><p>@MorphingDragon The array is not jagged, all z &#34;slices&#34; have the same range of x and y. The values also don&#39;t seem sparse enough for a hash table (which IIRC slow down significantly on hash collision &#8211; which is guaranteed as multiple elements have the same (x,y,z)). The dimensions of the set are known on file load (they are included in the file header along with an md5 hash of the file for error checking and a few bit relevant to the analysis).</p><p>@J Trana / Florian F The data set is pre-built and is infrequently modified by the program &#8211; a piece of data may need to be moved or deleted. For adjusting data particularly just adjusting its z-value (or removing it), which are the most frequent operations. The linked list will be faster as these operations are O(1) as opposed to O(n) in a vector. However, I believe these changes are infrequent enough that having O(n) for changes may be worthwhile if the lookup speed is even marginally faster (as this is the more frequent operation).</p><p>The majority of the time the data will be accessed iteratively, taking an n*p slice  from the x-y plane. Pseudocode example:</p><pre><code>for each y between startY and (startY + p)
  for each x between startX and (startX + n)
    read all nodes in Data[x][y] //gets nodes for each z on an (x,y) line
    analyse(&amp;nodes) //possibly modify the nodes, possibly just compute something based on their values
</code></pre><p>Data access is <strong>always</strong> related to the (x,y) line an element is on, but we  don&#39;t always need all the nodes on that line (dependant on their z). So we either have a structure that doesn&#39;t require us to retrieve all of them (just the ones we want) or we perform a secondary sort. The data on file represents a sorted list in ascending z for each (x,y).</p><p>I will also look into those other data structures. I&#39;ve never met them, as with very little training, my method is to use STL vectors or lists for everything. I&#39;d like to spend the time to do this properly this time though.</p><p>I spent a fair amount of time thinking about this last night after posting the question and seeing the first responses. I realised that &#34;if one piece of data from a point (x,y,z) is required, then all elements from that point are required at the same time.&#34; This has led me to think that option 3, my least preferred when I started this yesterday afternoon, is actually the best of the options I&#39;ve enumerated. If I use a three-dimensional dynamic array of pointers to linked list, I don&#39;t exactly lose much speed or heap space setting a pointer to NULL rather than attaching a struct. This also allows full access to any 3d, which while not currently <em>required</em> may reduce some operations from O(n) to O(1).</p><p>Having had a brief look over octaves/r-trees, I feel safe saying that my data set is not complex enough to require such an engineering heavy solution. When it comes down to it, i am fairly sure that any of the three options I outlined would work, even if not the fastest, but I would like to learn a good and relatively efficient method, rather than just relying on the awesome power of modern computers to brute force a problem like I normally do.<br /> Thanks for the replies and suggestions so far. 🙂</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I hope it&#39;s ok to answer my own question.
I believe I have found the optimal (without overcomplicating the problem) data structure for my problem. There was at least minor idiocy on my part for not recognising this earlier. The data doesn&#39;t need to be accessed by (x,y,z) but instead by (x, y, range of z (say 0 - 3)). This give a C++ struct as follows:</p><pre><code>struct node {
  struct node *next;
  int zGroup;
  int z;
  50 bytes of misc data };
</code></pre><p>I can then address this through a 3D dynamic array (vectors):</p><pre><code>vector&lt; vector &lt; vector &lt; node* &gt; &gt; &gt; Data;
</code></pre><p>Any given <code>Data[x][y][zGroup]</code> points to the first element of a linked list, the entirety of which is needed every time one element of it is needed. No value of this array is NULL, every one contains a linked-list of at least one element.</p><p>The third dimension of the array - the zGroup has jagged dimensions, but with dynamic arrays this isn&#39;t an issue. Given the data and computations being performed on it, I know that the max x and y values are set when the file is read and do not change, neither does the number of z groups on any given (x,y) line, the actual z-values of nodes may change, but they will remain inside the same z-groups, giving a constant-sized, fully populated array.</p><p>With the way that the file is structured it is also easy enough to page it in and out of memory if I am brought to do this with much larger data sets.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../why-is-a-linked-list-implementation-considered-linear/'>Why is a linked list implementation considered linear</a></li><li class="list-group-item"><a href='../what-are-concrete-rules-for-using-a-linked-list-instead-of-an-array/'>What are concrete rules for using a linked list instead of an array</a></li><li class="list-group-item"><a href='../does-the-headstart-pointer-of-doubly-linked-list-points-previously-to-the-taillast-node/'>Does the Head(start) pointer of Doubly Linked list points previously to the tail(last) node</a></li><li class="list-group-item"><a href='../java-linked-list-clarification/'>Java &#8211; Linked list clarification</a></li><li class="list-group-item"><a href='../c-stdvector-non-array-implementation/'>C++ &#8211; std::vector Non-Array Implementation</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>