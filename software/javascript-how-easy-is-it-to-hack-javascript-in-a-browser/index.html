<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Javascript &#8211; How easy is it to hack JavaScript (in a browser) &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064363 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064363" class="post-1064363 software type-software status-publish hentry category-software tag-browser tag-hacking tag-javascript tag-security"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Javascript &#8211; How easy is it to hack JavaScript (in a browser)</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">browser</span><span class="mr-2 badge badge-info">hacking</span><span class="mr-2 badge badge-warning">javascript</span><span class="mr-2 badge badge-primary">Security</span></p><div class="entry-content"><p>My question has to do with JavaScript security.</p><p>Imagine an authentication system where you&#39;re using a JavaScript framework like <a href="../../../en.wikipedia.org/wiki/Backbone.html">Backbone</a> or <a href="http://en.wikipedia.org/wiki/AngularJS">AngularJS</a>, and you need secure endpoints. That&#39;s not a problem, as the server always has the last word and will check if you&#39;re authorized to do what you want.</p><p>But what if you need a little security without involving the server? Is that possible?</p><p>For example, say you&#39;ve got a client-side routing system and you want a concrete route to be protected for logged-in users. So you ping the server asking if you&#39;re allowed to visit protected routes and you go on. The problem is that when you ping the server, you store the response in a variable, so the next time you go to a private route, it will check that if you&#39;re already logged in (no ping to the server), and depending on the response it will go or not.</p><p><strong>How easy is for a user to modify that variable and get access?</strong></p><p>My security (and JavaScript) knowledge isn&#39;t great. But if a variable is not in global scope and is in the private part of a module pattern which only have getters but not setters, even in that case, can you hack the thing out?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Please read <a href="https://softwareengineering.stackexchange.com/a/200791/38148">Joachim&#39;s answer</a> before reading this one. He covers the general reasons behind client-side vulnerability. Now, for a suggestion how you might get around this problem...</p><h3>A secure scheme for client-server communication without having to authenticate with the server manually on every request:</h3><p></p><p>You&#39;re <em>still</em> letting the server have the last say, and the server <em>still</em> has to validate everything the client says, but it happens transparently.</p><p>Assume the <a href="http://en.wikipedia.org/wiki/HTTP_Secure" rel="noreferrer">HTTPS</a> protocol to prevent <a href="http://en.wikipedia.org/wiki/Man-in-the-middle_attack" rel="noreferrer">man-in-the-middle attacks</a> (MITMA).</p><ul><li><p>The client handshakes with the server for the first time, and the server generates a public key <em>for the client</em> and keeps a private one using an asymmetric encryption scheme. The client stores the server&#39;s &#34;public&#34; key in the local storage, encrypted with a secure password you don&#39;t save anywhere.</p></li><li><p>The client is now offline. The client wants to perform trusted actions. The client enters his password and grabs the server&#39;s public key.</p></li><li><p>The client now performs actions based on its knowledge of that data, and the client encrypts every action it performs with the server&#39;s public key <em>for that client</em>.</p></li><li><p>When the client is online, client sends its client ID and all actions the client performed are sent to the server encrypted with the server&#39;s public key.</p></li><li><p>The server decrypts the actions, and if they are in correct format it trusts that they originated in the client.</p></li></ul><p><strong>Note:</strong></p><ul><li><p>You can&#39;t store the client&#39;s password anywhere, otherwise an attacker would be able to fetch the key and sign the actions as its own. The security of this scheme relies solely on the integrity of the key the server generates for the client. The client would still need to be authenticated with the server when asking for that key.</p></li><li><p>You&#39;re still in fact relying on the <em>server</em> for security and <em>not</em> the client. Every action the client performs you <em>must</em> validate on the server.</p></li><li><p>It&#39;s possible to run external scripts in <a href="http://en.wikipedia.org/wiki/Web_worker" rel="noreferrer">web workers</a>. Keep in mind <em>every</em> <a href="http://en.wikipedia.org/wiki/JSONP" rel="noreferrer">JSONP</a> request you have is now a much bigger security issue. You need to protect the key at all costs. Once you lose it, an attacker can impersonate the user.</p></li><li><p>This meets your demand that &#39;no ping to the server&#39; is performed. An attacker can&#39;t simply imitate an HTTP request with forged data if they don&#39;t know the key.</p></li><li><p>Joachim&#39;s answer is <strong>still correct</strong>. You&#39;re still, in fact, performing all authentication <strong>on the server</strong>. The only thing you saved here is the need for password validation with the server every time. You now need only to involve the server when you want to commit, or pull updated data. All we did here is save a trusted key on the client side and have the client re-validate it.</p></li><li><p>This is a pretty common scheme for single page applications (for example, with AngularJS).</p></li><li><p>I call the server&#39;s public key &#34;public&#34; because of what that means in schemes like <a href="http://en.wikipedia.org/wiki/RSA_(algorithm)" rel="noreferrer">RSA</a>, but it is in fact sensitive information in the scheme and should be safeguarded.</p></li><li><p>I wouldn&#39;t keep the password anywhere in memory. I&#39;d make the user submit his/her &#39;offline&#39; password every time he/she starts running offline code.</p></li><li><p><strong>Don&#39;t roll your own cryptography</strong> - use a known library like Stanford&#39;s for authentication.</p></li><li><p>Take this advice <em>as is</em>. Before you roll this sort of authentication in a real world business-critical application <strong>consult a security expert</strong>. This is a serious issue that is both <em>painful</em> and easy to get wrong.</p></li></ul><p>It&#39;s <em>critical</em> that no other scripts have access to the page. This means you only allow external scripts with web workers. You can&#39;t trust any other external scripts that might intercept your password when the user enters it.</p><p>Use a <code>prompt</code> and <em>not</em> an inline password field if you&#39;re not completely sure and don&#39;t defer its execution (that is, it shouldn&#39;t live to a point where events have access to it but only in sync code). And don&#39;t actually store the password in a variable -- again, this only works if you trust the user&#39;s computer isn&#39;t compromised (although that&#39;s all true for validating against a server too).</p><p>I&#39;d like to add again that <strong>we still don&#39;t trust the client</strong>. You <strong>can&#39;t</strong> trust the client alone, and I think Joachim&#39;s answer nails it. We only gained the convenience of not having to ping the server before starting to work.</p><p>Related material:</p><ul><li><a href="https://security.stackexchange.com/questions/3605/certificate-based-authentication-vs-username-and-password-authentication/3613#3613">Certificates vs username+password</a>.</li><li><a href="https://security.stackexchange.com/questions/3921/why-do-some-people-really-hate-security-via-client-side">Why can&#39;t we do security via client side?</a></li><li><a href="https://security.stackexchange.com/questions/2202/lessons-learned-and-misconceptions-regarding-encryption-and-cryptology/2210#2210">Don&#39;t roll your own crypto.</a></li><li><a href="http://lists.w3.org/Archives/Public/public-identity/2011Dec/0064.html" rel="noreferrer">Related discussion about making JS secure for crypto operations</a></li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../html5-localstorage-and-encrypted-sensitive-data/'>HTML5 localStorage and encrypted sensitive data</a></li><li class="list-group-item"><a href='../javascript-should-i-be-using-a-javascript-spa-designed-when-security-is-important/'>Javascript &#8211; Should I be using a JavaScript SPA designed when security is important</a></li><li class="list-group-item"><a href='../javascript-ny-reason-not-to-go-directly-from-client-side-javascript-to-a-database/'>Javascript &#8211; ny reason not to go directly from client-side Javascript to a database</a></li><li class="list-group-item"><a href='../javascript-angularjs-modules-implementation-technique-and-structure/'>JavaScript &#038; AngularJs Modules Implementation technique and structure</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>