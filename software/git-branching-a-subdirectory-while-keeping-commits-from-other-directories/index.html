<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Git &#8211; Branching a subdirectory while keeping commits from other directories &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083234 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083234" class="post-1083234 software type-software status-publish hentry category-software tag-git tag-svn"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Git &#8211; Branching a subdirectory while keeping commits from other directories</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">git</span><span class="mr-2 badge badge-info">svn</span></p><div class="entry-content"><p>I currently have a single pre-existing Git repo for a client/server solution that contains three subdirectories for 3 sub-projects:</p><pre><code>/client  - An Angular2 SPA application (client-side TypeScript)
/dtos    - Language-agnostic web-service DTO (data contract) definitions written in T4
    /client - T4-generated TypeScript typings *.d.ts files
    /server - T4-generated C# DTO classes
/server  - The web-service
</code></pre><p>So far this is all in a single <code>master</code> branch, with appropriate temporary <code>dev/</code> branches that are merged when their work is complete:</p><pre><code>o--o--o--o - master
 \   /
  o-o      - dev/foo
</code></pre><p>We need to do some A/B (or rather, A/B/C/D) testing on radically different UX options in the Angular2 project &#8211; I would like to branch-off for each UX option, to generate different builds we can test, then after our UX research is done we merge that specific branch back into <code>master</code> for the remainder of the project:</p><pre><code>o             - master
 \
  o--o--o---o - ux/red-background
   \
    o--o----o - ux/new-sidebar
        \
         o--o - ux/new-sidebar-and-banner
</code></pre><p>However I only want to branch the <code>/Client</code> directory off &#8211; so the <code>/DTOs</code> and <code>/Server</code> directories always contain the latest code.</p><p>In SVN and TFS this is easily doable because branches can be made from subdirectories, not just the entire repository (as they are with git), so if this were an SVN project then I would do something like this:</p><pre><code>cd trunk  # this is the solution root with the client, dtos and server directories
svn copy ^/trunk/client ^/branches/red-background
svn copy ^/branches/red-background ^/branches/new-sidebar
# then after some commits to &#39;new-sidebar&#39;...
svn copy ^/branches/new-sidebar ^/branches/new-sidebar-and-banner
</code></pre><p>Then to build the solution with each different branch of <code>/client</code> we modify the symlink:</p><pre><code>cd trunk
# to &#39;checkout&#39; the red-background version prior to building:
ln -s branches/red-background client
# or the new-sidebar version:
ln -s branches/new-sidebar client
</code></pre><p>The main advantage of this approach is that commits can continue to be made to the <code>/dtos</code> and <code>/server</code> directories without affecting <code>client</code> at all &#8211; regardless of whatever branch of <code>client</code> is being worked-in.</p><p>Whereas with git, a branch is a separate timeline entirely, so this scenario becomes impossible.</p><p>I understand that to get the result I want, I would still need to create different branches for each version to test or build, but changes to <code>/dtos</code> or <code>/server</code> would still need to happen in <code>master</code> (just like in <code>trunk</code> in SVN) but after every commit everyone working on the different <code>client</code> branches would need to <code>rebase</code> or <code>merge</code> from <code>master</code>, and that has the potential to get really ugly (especially if individual people <code>rebase</code> from multiple commits to <code>/server</code> choosing their own rebase points &#8211; they might end up with identical codebases but different commit hashes).</p><p>What&#39;s the solution?</p><p>(Another solution is to move <code>client</code> to its own git repo &#8211; then merging it back into the solution repo when it&#39;s all done &#8211; I&#39;m not opposed to this but let&#39;s pretend that we&#39;ve hit our maximum repo count in our organizational GitHub account)</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The ideal way is to move client to its own repository and make it a submodule of the super project. But if you do not want to create a new repository you can try one of these solutions.</p><h1>Multiple directories in one branch</h1><p>If you are able to configure your project to use directory /client_A instead of /client then you can clone the directory /client to multiple directories</p><ul><li>/client_A</li><li>/client_B</li><li>/client_C</li></ul><p>and do separate development in each of these directories. Up to this point it is enough to use only master branch.<br/> Later when you decide to &#34;merge&#34; directory /client_A to directory /client create a branch named e.g. branch_A. In this branch replace the content of directory /client with content of directory /client_A, delete directory /client_A and commit this state. Then merge branch_A to master and solve conflicts if any.<br/> Do the same with directories /client_B and /client_C if you want to &#34;merge&#34; them with directory /client. You can choose different times for &#34;merging&#34; directories /client_A, /client_B and /client_C into directory /client.</p><h1>Multiple branches without cloning directories</h1><p>Choose a suitable start time and make as many branches from master as you want</p><ul><li>branch_A</li><li>branch_B</li><li>branch_C</li></ul><p>From this start time use strictly</p><ul><li>master for changes in directories other than /client (/dtos and /server)</li><li>branch_A, branch_B, branch_C for changes in /client directory</li></ul><p>Use branch_A, branch_B, branch_C for building different versions of your project. Merge master branch into these branches before building. Avoid merging these branches into master branch (the opposite direction).<br/> Later you can merge e.g. branch_A into master. But after doing this you can&#39;t merge master into branch_B or branch_C. This means that you need to choose suitable end time and merge all branches branch_A, branch_B, branch_C into master at this time.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../git-how-to-clone-an-svn-repository-that-changed-layouts-with-git-maintaining-full-history/'>Git &#8211; How to clone an svn repository that changed layouts with git maintaining full history</a></li><li class="list-group-item"><a href='../git-merge-bug-fixes-from-trunk-in-old-branches/'>Git &#8211; Merge bug fixes from trunk in old branches</a></li><li class="list-group-item"><a href='../git-rebase-your-own-branch-and-force-push/'>Git &#8211; rebase your own branch and force push</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>