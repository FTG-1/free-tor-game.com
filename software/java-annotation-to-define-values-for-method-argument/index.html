<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; Annotation to define values for method argument &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1071417 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1071417" class="post-1071417 software type-software status-publish hentry category-software tag-annotations tag-java tag-reflection"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; Annotation to define values for method argument</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">annotations</span><span class="mr-2 badge badge-info">java</span><span class="mr-2 badge badge-warning">reflection</span></p><div class="entry-content"><p>In a project, I have a task scheduling service, which is allowed to execute certain public methods from other services. Each service decides itself, which methods it want to make available for the task scheduling service by annotating them with <code>@Operation</code>. The task scheduling service simply will scan all given services for this annotation to get aware of methods it is allowed to be configured to execute. This means a user which wants to create a task will have a list of <code>@Operation</code> methods presented.</p><p>Let&#39;s take the example following example of an update service (one service among a few)</p><pre><code>public interface UpdateService extends Service{

    @Operation
    public void update(String updateFileName);

    public List&lt;String&gt; getAvailableUpdateFileNames();

    @Operation
    public void ...

    ...
}
</code></pre><p>The way the <code>UpdateService</code> interface is declared, a user may create a task over the task service executing the <code>update</code> method. By letting the user freely configure a task with any string is mostly certain erroneous. The interface, in this case, therefore should present a list of predefined values, which can be used with the <code>update</code> method.</p><p>As it is, the update service also knows a getter method which reveals all available update. This would be ideal as a source for the predefined values.</p><p>That&#39;s why I came with the following approach:</p><pre><code>public interface UpdateService extends Service{

    @Operation(sourceClass=UpdateService.class,sourceMethod=&#34;getAvailableUpdateFileNames&#34;)
    public void update(String updateFileName);

    public List&lt;String&gt; getAvailableUpdateFileNames();
}
</code></pre><p>The <code>@Operation</code> interface is introduced to a couple parameters.<br /> The task service still scans all given service interfaces for <code>@Operation</code> annotations, to present a defined list to the user.</p><p>The Task manager also understands the arguments:</p><ul><li>sourceClass: This class has to contain the source method</li><li>sourceMethod: This method returns values which can be used for the annotated interface function.</li></ul><p>With the help of reflection, the task service executes the sourceMethod and will offer the returned values generically as predefined values for the task configuration of the <code>update(String updateFileName)</code> method in the user interface. The user can select such a value and schedule the <code>update</code> method with this selected value as an argument.</p><p>This example is very basic and currently would only work if the annotated method would have 1 argument. Although it would be completely generic and decoupled.</p><p>Is there a better way to solve this issue? Or isn&#39;t this approach that bad at all?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The design you presented has issues</p><ul><li>You&#39;re using an annotation where an additional method of your <code>Service</code> interface should probably be used instead. Something like an <code>execute()</code> method that can call <code>getAvailableUpdateFileNames</code> and then invoke <code>update</code>. You&#39;re already implementing <code>Service</code>. Why design this complex reflection-based system to invoke <code>update</code>?</li><li>The workaround to the problem you&#39;ve designed with a parameterized annotation is short-sighted. It may solve your immediate issues with <code>UpdateService</code>, but you&#39;ll likely encounter another service that you want to behave slightly differently (like having two parameters as you&#39;ve acknowledged), and you&#39;ve set a precedent for introducing annotation parameters to solve these problems.</li><li>Annotations, while fancy and widely-used, introduce <a href="http://blog.snacktrace.com/post/143152023186/java-annotations-are-evil" rel="nofollow noreferrer">several problems</a> that affect your code&#39;s readability, maintainability, and testability. I would not use them when another design is clearly present.</li></ul><p>If you want to separate the concerns of updating and the service that executes it, I suggest collaboration.</p><p><a href="../../../i.stack.imgur.com/a3SiX.png" rel="nofollow noreferrer"><img src="../../../i.stack.imgur.com/a3SiX.png" alt="enter image description here"/></a></p><p>Where <code>UpdateService.execute</code> is implemented like:</p><pre><code>List&lt;String&gt; fileNames = updater.getAvailableFileNames();
updater.update(fileNames.get(0));
</code></pre><p>This design has the benefit that it can execute <em>any</em> method on <em>any</em> object instead of just those with a single parameter. The concerns are separated, and each piece can be unit-tested independently.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-var-args-constructors-methods-vs-lists/'>Java &#8211; var args constructors/methods vs lists</a></li><li class="list-group-item"><a href='../java-service-method-bean-as-an-argument-and-mandatory-attributes/'>Java &#8211; Service method, bean as an argument and mandatory attributes</a></li><li class="list-group-item"><a href='../java-the-process-of-determining-which-method-in-a-class-hierarchy-should-execute-known-as/'>Java &#8211;  the process of determining which method in a class hierarchy should execute known as</a></li><li class="list-group-item"><a href='../java-recommended-value-to-pass-instead-of-string-parameter-for-a-method-in-java/'>Java &#8211; Recommended value to pass instead of String parameter for a method in java</a></li><li class="list-group-item"><a href='../java-why-is-cyclomatic-complexity-that-important-for-a-single-method/'>Java &#8211; Why is cyclomatic complexity that important for a single method</a></li><li class="list-group-item"><a href='../java-service-layer-with-dto/'>Java &#8211; Service layer with DTO</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>