<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Is including headers inside a namespace always a bad idea &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069996 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069996" class="post-1069996 software type-software status-publish hentry category-software tag-c tag-include tag-namespace"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Is including headers inside a namespace always a bad idea</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">include</span><span class="mr-2 badge badge-warning">namespace</span></p><div class="entry-content"><p>The replies in <a href="https://softwareengineering.stackexchange.com/questions/298576/c-extensible-namespaces-how-to-force-declarations-back-into-global-namespace">this</a> post come very strongly against including headers inside a namespace and <code>Doxygen</code> is confused if that is done (which suggests that its team did not consider that usage either). I would like to ask whether including headers inside a namespace is justified in the following case.</p><p>I am developing a header-only framework for exploring a certain family of algorithms. Once first released, extensions in the form of header files will be contributed by the members of the research community. A contributed header file may implement a new algorithm or a policy of an existing algorithm or something else. Depending on what the new header implements, it will be placed in the relevant folder.</p><p>The namespaces in the framework mimic the folder structure. So, consider a folder <code>A/B/</code> of the framework and suppose that the headers <code>x.h</code>, <code>y.h</code> and <code>z.h</code> are in that folder. Without including headers inside namespaces, the file <code>x.h</code> would look something like this:</p><pre><code>namespace N { // The namespace in which the whole framework resides
namespace A { // Folder A/
namespace B { // Folder A/B/
namespace X { // The facilities provided by x.h are related
    ... // Definition of the facilities
}
}
}
}
</code></pre><p>The files <code>y.h</code> and <code>z.h</code> would begin with opening four namespaces as well. Furthermore, if a user contributes <code>w.h</code> to this folder, he will need to remember to open the namespaces <code>N</code>, <code>A</code> and <code>B</code> to not break the design.</p><p>In the <strong>alternative</strong> (and better in my opinion) design, each folder has a <code>headers.h</code> file as follows.</p><p><code>A/B/headers.h</code> is:</p><pre><code>namespace B {
    #include &#34;x.h&#34;
    #include &#34;y.h&#34;
    #include &#34;z.h&#34;
}
</code></pre><p><code>A/headers.h</code> is:</p><pre><code>namespace A {
    #include &#34;B/headers.h&#34;
    ... // includes headers.h of other sub-folders of A/
}
</code></pre><p>Then <code>x.h</code> looks like this</p><pre><code>namespace X { // The facilities provided by x.h are related
    ...
}
</code></pre><p>Are there strong reasons not to use this alternative design?</p><p>Please note that the library is meant to be included into the <code>.cpp</code> as a whole (i.e. the top-level <code>header.h</code> is included). This does not incur long compile times, because the library is heavily templated and only a few templates (i.e. the algorithm under study, its policies and the related facilities) end up instantiated. Hence, I do not worry about the possibility of wrongly including an individual header without its namespace context.</p><p>There are no dependencies at the bottom (i.e. leaf) level, where all the headers implementing the actual facilities (such as <code>x.h</code>, <code>y.h</code> and <code>z.h</code> in the example) are located. So, a <code>headers.h</code> at the bottom level (such as <code>A/B/headers.h</code> in the example) may list the included headers in alphabetical order. A <code>headers.h</code> at a non-bottom level (such as <code>A/headers.h</code> in the example) includes <code>headers.h</code> from each sub-folder in the order that respects dependencies. That order is fixed (e.g. all the policies are included before all the algorithms) and the users will not need to deal with it.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>Reasons this is a bad idea:</strong></p><ul><li><strong>Knowledge about your design is now partly stored in the directory structure.</strong> This isn&#39;t a good place for design logic to be placed.<ul><li>What if someone just receives the file x.h?  They won&#39;t be able to tell from the code itself what its classification is, because only with the full directory and all files can someone tell that x.h is properly located within N -&gt; A -&gt; B</li><li>There may be errors from accidentally putting something in the wrong place.</li><li>Logically, you would like someone who only has permission to use the parent to be able to extend it, but now you can only extend something that you have permission to modify it.</li></ul></li><li><strong>You can&#39;t add a new element just by adding a new header.</strong> Instead, you also have to update the appropriate &#34;headers.h&#34; file, leading to extra complexity and potential conflicts when adding new things.</li><li><strong>You are making a design decision that the entire header file <em>must be included forever.</em></strong> In your question, you note that this is not a problem right now.  But are you really sure that there will never, ever be a time in the future where someone will want to include individual headers?</li><li><strong>You are making a design decision that there <em>cannot ever be significant interdependencies.</em></strong> Again, this is not true now, but are you really so sure it will never be true?</li><li><strong>You are doing something weird</strong> which is a downside in itself, since now everyone using this code has to take time to learn your unique design, which no one else uses.</li></ul><p>I would avoid this.  Also, <a href="https://stackoverflow.com/questions/713698/c-namespaces-advice">is it possible you should not be using nested namespaces</a>?</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../including-local-headers-first/'>Including local headers first</a></li><li class="list-group-item"><a href='../c-splitting-and-hiding-headers-in-a-static-library/'>C++ &#8211; Splitting and hiding headers in a static library</a></li><li class="list-group-item"><a href='../c-enforcing-manual-inclusion-of-a-specific-header-file-banned-h/'>C++ &#8211; Enforcing manual inclusion of a specific header file (banned.h)</a></li><li class="list-group-item"><a href='../c-including-standard-library-headers-only-once-across-multiple-program-headers/'>C++ &#8211; Including standard library headers only once across multiple program headers</a></li><li class="list-group-item"><a href='../detecting-header-inclusion-chains-and-dependencies-in-c/'>Detecting header inclusion chains and dependencies in C++</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>