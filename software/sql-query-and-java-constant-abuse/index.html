<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>SQL Query and Java Constant Abuse &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1072024 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1072024" class="post-1072024 software type-software status-publish hentry category-software tag-coding-style tag-const tag-sql"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">SQL Query and Java Constant Abuse</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">coding-style</span><span class="mr-2 badge badge-info">const</span><span class="mr-2 badge badge-warning">sql</span></p><div class="entry-content"><p>I am currently charged with taking over a lot of code that is written with fields names placed into Java constant at the top of the file, and then the SQL queries constructed using string concatenation with the field names.  At the top of the file is the following block:</p><pre><code>private static final String TABLE_VALID_USER = &#34;valid_user_table&#34;;
private static final String TABLE_USER_MANAGEMENT = &#34;V1_USER_MANAGEMENT_TABLE&#34;;
private static final String TABLE_ROLE_DEFINITION = &#34;V1_ROLE_DEFINITION_TABLE&#34;;
private static final String TABLE_ROLE_MANAGEMENT = &#34;V1_ROLE_MANAGEMENT_TABLE&#34;;
private static final String TABLE_USER_STATUS_DEF = &#34;V1_USER_STATUS_DEFNITION&#34;;

private static final String COLUMN_NAME_OPEN_ID = &#34;hashed_open_id&#34;;

private static final String COLUMN_NAME_INTERNAL_USER_ID = &#34;internal_user_id&#34;;
private static final String COLUMN_NAME_USER_ID = &#34;hashed_open_id&#34;;
private static final String COLUMN_NAME_USER_NAME = &#34;name&#34;;
private static final String COLUMN_NAME_ROLE_ID = &#34;role_id&#34;;
private static final String COLUMN_NAME_ROLE_NAME = &#34;role_name&#34;;
private static final String COLUMN_NAME_USER_STATUS_CODE = &#34;status_code&#34;;
private static final String COLUMN_NAME_USER_STATUS_NAME = &#34;status_name&#34;;

private static final String DEFAULT_USER_STATUS = &#34;Pending&#34;;

private static final String AS_NAME_COUNT = &#34;cnt&#34;;
</code></pre><p>Later in the code, there are SQL queries that are constructed like this using these constants in the string construction.</p><p>What you have to remember is that these are very far apart in the code, so to find out what a field name is, you have to scroll up and down all the time.  To be able to read the query, requires a lot of mental exercise.  I realize for the original programmer this is not a big deal, because the column might be <code>hashed_open_id</code> but that programmer felt that the constant name <code>COLUMN_NAME_USER_ID</code> was a perfectly acceptable replacement for that.  The good news is that this is explained to be the user id.</p><p>The bad news is that the actual column in the database is named hashed_open_id which is not obvious.  When you read the code, you have learn this new, arbitrary symbol <code>COLUMN_NAME_USER_ID</code> and you have to remember that it really means <code>hashed_open_id</code> and you have to do this for every column in the table!   It would seem to double the amount of things that you have to learn in order to read the code.</p><p>To understand the query, you need to have knowledge of the database.  When using the database, you have to have the real column names in mind.  The Java constant symbols are not helpful when dealing with the SQL data browser.</p><pre><code>String sql = 
    &#34;SELECT &#34;
    + &#34;COUNT(&#34; + COLUMN_NAME_OPEN_ID +&#34;) as &#34; + AS_NAME_COUNT + &#34;, &#34; 
    + &#34;FROM &#34;
        + TABLE_VALID_USER + &#34; &#34; 
    + &#34;WHERE &#34;
        + COLUMN_NAME_OPEN_ID + &#34;= ? &#34;
        + &#34;;&#34;;
</code></pre><p>Wouldn&#39;t it be better to just use the real table names and the real column names directly?   If you did so, the query would be in the code as:</p><pre><code>    String sql = 
        &#34;SELECT COUNT(hashed_open_id) as cnt, &#34; 
        + &#34;FROM valid_user_table &#34; 
        + &#34;WHERE hashed_open_id= ? ;&#34;;
</code></pre><p>This latter query is clearly easier to read and understand, especially if you know the actual table structure.  You can easily see exactly what the table name is being manipulated, and what columns are involved.  Go back to the original, and try looking up the values in the constants to arrive at the same understanding.   And you HAVE to know the table structure because it is manipulated by other classes and other programs.   Does anyone really believe that using constants as an extra level of symbol redirection in this way is a benefit?</p><p>Theoretically, if you decide to change a column name, then you go to one place, and it propagates through the entire code.  Hey, that is cool, but how often do you do that?  And it only changes this class &#8230; there are other classes and programs, some written in different languages, that manipulate the table.  One change of the constant will never change everything.</p><p>Readability is important.  Isn&#39;t the ability to read, review, and quickly understand code by the programmers that are going to maintain the code more important than the rare convenience of changing a column?  Consider code that lives for 10 years.  How many new programmers will have to read this code?  How many times will a column name change?</p><p>And, imagine that you do need to change a column name from <code>hashed_open_id</code> to <code>standard_user_id</code> is it really that hard to do a search and replace?  You probably had to do the same thing in some SQL scripts used to create the table.  The constant is not a universal symbol for the column name.  The column name is a universal symbol for the column name.  Why not use it directly everywhere?  The point of a column name is to be a symbol for the data in the column.</p><p>Can anyone think of any reason that an extra level of indirection to make Java constants for each column is worth the problems that it causes?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I agree with what you say. Having worked in several companies on a variety of platforms I have not seen the level of abstraction you describe. Occassionally I will write code snippets and construct SQL from them, but couched in application and problem domain terms, not DB design terms. For example<br/> <code>where-cluase-for-employee = &#34;&lt;several lines of SQL&gt;&#34;</code><br/> whereas<br/> <code>where-clause-for-contractor=&#34;&lt;a different complex predicate&gt;&#34;</code>.</p><p>SQL is a programming language. No one would consider it best practice to construct a Java method call as a string then execute it. Why would this be done for SQL?</p><p>Maintainability and ease of change are important, too. I believe that code should be written with consideration for the unfortunate on-call person who has to fix it at 3am, never having seen it before. Make code efficient and compact by all means, but not so much that the writer&#39;s the only person who can understand it.</p><p>There is a different approach which can abstract table and column names from the Java and keep SQL as a compact block. It can also improve runtimes, depending on the applications workload. Put the SQL into a stored procedure. Good SP naming conventions will say exactly what it does (<code>read_count_by_user</code> for the example in the question), and the contract between application and SQL is defined. If the returned columns change the application must change, too, but this is a problem you face currently. Impact analysis is a text search of the source code. Modularity is improved. Tuning and re-writes can be done on a per-procedure basis.</p><p>If the developers&#39; only gripe is with the DB naming convention ask for a set of views to be defined with developer-friendly names for tables and columns. For the simple use cases shown these will have no impact on performance.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../why-is-prefixing-column-names-considered-bad-practice/'>Why is prefixing column names considered bad practice</a></li><li class="list-group-item"><a href='../java-articles-in-variable-names-and-hard-coding-strings/'>Java &#8211; articles in variable names and hard-coding strings</a></li><li class="list-group-item"><a href='../java-choosing-value-in-sql-query-vs-java-code/'>Java &#8211; Choosing value in SQL query vs (Java) code</a></li><li class="list-group-item"><a href='../is-this-use-of-a-symbolic-constant-overkill/'>Is this use of a symbolic constant overkill</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>