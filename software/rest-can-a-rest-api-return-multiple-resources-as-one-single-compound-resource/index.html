<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; Can a REST API return multiple resources as one single compound resource &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1067210 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1067210" class="post-1067210 software type-software status-publish hentry category-software tag-resources tag-rest tag-web-api"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; Can a REST API return multiple resources as one single compound resource</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">resources</span><span class="mr-2 badge badge-info">rest</span><span class="mr-2 badge badge-warning">web-api</span></p><div class="entry-content"><p>I&#39;m in the progress of creating a REST API and currently, I&#39;m encountering the following problem:</p><ul><li><code>Foo</code> is the first resource. CRUD operations can be applied via the <code>/foo/</code> URI.</li><li><code>Bar</code> is the second resource. CRUD operations can be applied via the <code>/bar/</code> URI.</li><li>Every <code>Foo</code> is associated with zero or one <code>Bar</code>. The reason why I don&#39;t treat <code>Bar</code> as a subresource of <code>Foo</code> is because the same <code>Bar</code> instance can be shared between mutiple <code>Foo</code>s. So I figured it&#39;s better to access it via an independent URI instead of <code>/foo/[id]/bar</code>.</li></ul><p>My problem is that in a significant amount of cases, clients which ask for a <code>Foo</code> instance are also interested in the associated <code>Bar</code> instance. Currently, this means that they have to perform two queries instead of one. I want to introduce a way that allows to get both objects with one single query, but I don&#39;t know how to model the API for doing that. What I came up with so far:</p><ul><li>I could introduce a query parameter similar to this: <code>/foo/[id]?include_bar=true</code>. The problem with this approach is that the resource representation (e.g. the JSON structure) of the response would need to look different (e.g. a container such as <code>{ foo: ..., bar: ... }</code> instead of just a serialized <code>Foo</code>), which makes the <code>Foo</code> resource endpoint &#34;heterogeneous&#34;. I don&#39;t think that&#39;s a good thing. When querying <code>/foo</code>, clients should always get the same resource representation (structure), regardless of query parameters.</li><li>Another idea is to introduce a new read-only endpoint, e.g. <code>/fooandbar/[foo-id]</code>. In this case, it&#39;s no problem to return a representation like <code>{ foo: ..., bar: ... }</code>, because then it&#39;s just the &#34;official&#34; representation of the <code>fooandbar</code> resource. However, I don&#39;t know if such a helper endpoint is really RESTful (this is why I wrote &#34;can&#34; in the title of the question. Of course it&#39;s technically possible, but I don&#39;t know if it&#39;s a good idea).</li></ul><p>What do you think? Are there any other possibilities?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>A <a href="http://martinfowler.com/articles/richardsonMaturityModel.html" rel="noreferrer">level 3</a> REST API would return you a <code>Foo</code> and also a link indicating the related <code>Bar</code>.</p><pre><code>GET /foo/123
&lt;foo id=&#34;123&#34;&gt;
  ..foo stuff..
  &lt;link rel=&#34;bar&#34; uri=&#34;/bar/456&#34;/&gt;
&lt;/foo&gt;
</code></pre><p>You could then add a &#34;drill down&#34; feature to your API which allows the navigation of links;</p><pre><code>GET /foo/123?drilldown=bar
&lt;foo id=&#34;123&#34;&gt;
  ..foo stuff..
  &lt;link rel=&#34;bar&#34; uri=&#34;/bar/456&#34;&gt;
    &lt;bar id=&#34;456&#34;&gt;
      ..bar stuff...
    &lt;/bar&gt;
  &lt;/link&gt;
&lt;/foo&gt;
</code></pre><p>The drill down feature would sit in front of the APIs and intercept responses. It would make the drill down calls and fill in the details before handing the response back to the caller.</p><p>This is a pretty common thing in level 3 REST as it much reduces client/server chattiness over slow http. The company I work for produces a level 3 REST API with exactly this feature.</p><p><strong>Update:</strong> For what its worth, here&#39;s how it might look in JSON. This is how our API would structure it. Note that you can nest your drill downs to pull links of links etc.</p><pre><code>GET /foo/123?drilldown=bar

{
  &#34;self&#34;: {
    &#34;type&#34;: &#34;thing.foo&#34;,
    &#34;uri&#34;: &#34;/foo/123=?drilldown=bar&#34;,
    &#34;href&#34;: &#34;http://localhost/api/foo/123?drilldown=bar&#34;
  },
  &#34;links&#34;: [
    {
      &#34;rel&#34;: &#34;bar&#34;,
      &#34;rev&#34;: &#34;foo&#34;,
      &#34;type&#34;: &#34;thing.bar&#34;,
      &#34;uri&#34;: &#34;/bar/456&#34;,
      &#34;href&#34;: &#34;http://localhost/api/bar/456&#34;
    }
  ],
  &#34;_bar&#34;: [
    {
      &#34;self&#34;: {
        &#34;type&#34;: &#34;thing.bar&#34;,
        &#34;uri&#34;: &#34;/bar/456&#34;,
        &#34;href&#34;: &#34;http://localhost/api/bar/456&#34;
      },
      &#34;links&#34;: [
        {
          ..other link..
        },
        {
          ..other link..
        }
      ]
    }
  ]
}
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-best-solution-to-authorize-that-a-user-is-only-allowed-to-modify-act-with-their-own-resources-in-a-rest-api/'>Rest &#8211; Best solution to authorize that a user is only allowed to modify/act with their own resources in a REST API</a></li><li class="list-group-item"><a href='../rest-retrieving-json-and-image-representation-of-a-resource/'>Rest &#8211; Retrieving JSON and image representation of a resource</a></li><li class="list-group-item"><a href='../rest-how-to-design-a-rest-api-that-can-prompt-the-client-about-long-running-operations/'>Rest &#8211; How to design a REST API that can &#8220;prompt&#8221; the client about long-running operations</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>