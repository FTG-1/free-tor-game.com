<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; With TDD, tests obviously fail first.But is that really true &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084218 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084218" class="post-1084218 software type-software status-publish hentry category-software tag-patterns-and-practices tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; With TDD, tests obviously fail first.But is that really true</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">patterns-and-practices</span><span class="mr-2 badge badge-info">unit testing</span></p><div class="entry-content"><p>I have been taught that with TDD, the tests &#34;naturally fail first but it is a good habit to run them anyway to see the red light&#34;. Well, but I am quite sure a unit test written first for a new feature might actually pass, if such a feature is already implemented (and for example somehow inhibited).</p><p>I am borrowing the following example from <a href="https://stackoverflow.com/a/50411451/3001761">this answer</a>:</p><blockquote><pre><code>    public string ShowScoreEvaluation(byte points)
    {
        switch(points)
         case 3:
            return &#34;You are good!&#34;;
         case 2:
            return &#34;Not bad!&#34;;
         case 1:
            return &#34;Quite bad&#34;;
         case 0:
            return &#34;You suck!&#34;
      return null;

    }

    //caller code
    if (Points&gt;0)
      Display(ShowScoreEvaluation(Points));
</code></pre><p>In the code above, the calling code does not expect to call the method<br /> when Points=0. Maybe during the implementation of that method, the<br /> programmer just put something there (as a joke or a placeholder) even<br /> for the case when points=0.</p><p>And now imagine, that you join the project and get a new request<br /> &#34;When player has 0 points, show an encouraging message blabla&#34;. You<br /> write a unit test with Points=0 and expecting a string with<br /> length&gt;0&#8230;and it did not fail, although you would expect it.</p></blockquote><p>Could this not happen in the real life? I mean, to me this is the reason why I truly should see whether a new test fails, because then how could I know what made it pass?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>I guess for what you really want to know, your example is not well suited, so let me describe a better one.</p><p>There are several programming problems where the most elegant, shortest implementation is not the one which just serves a few test cases, but one which solves the problem <strong>in a more general fashion</strong> than specified by the tests.</p><p>For example, one can implement a sorting algorithm incrementally by writing some test cases in a TDD fashion for sorting two, three or four elements. Maybe one starts with an implementation which can only sort two elements, like</p><pre><code>int[] Sort(int[] list)
{
     // ... maybe some handling for lists with 0 or 1 element here ...
     if(list[0]&gt;list[1])
        return new[]{list[1],list[0]};
     else
        return new[]{list[0],list[1]};
}
</code></pre><p>Now, a test which passes 3 elements into this function will fail. However, when you extend this code to 3, 4 or more elements, you will quickly reach the point where a general algorithm like a bubble sort or insertion sort (which works for arbitrary list lengths) is simpler than an implementation which works only for a fixed number of elements. In fact, by doing TDD, you might have started with a convoluted algorithm which compared up to 4 elements one-by-one against each other, but in the refactoring step, you replaced this by a more general sorting algorithm, which makes the overall implementation simpler.</p><p>Now it should not be very astonishing when you add further tests with more elements, these tests won&#39;t fail, though you followed all the TDD rules literally, and though <strong>you did not implement more code than needed to satisfy all existing tests</strong>.</p><p>And yes, that is a real-world case, far more likely to happen as <a href="https://softwareengineering.stackexchange.com/a/371176/9113">this answer</a> pretends. I have encountered this situation lots of times for all different kind of problems in string processing, set manipulation, mathematical or geometrical algorithms: general implementations are very often simpler than specialized ones.</p><p>So what should one do in this case? Leaving out the additional tests with 5, 8 or 20 elements, just because the code &#34;is already complete, and the additional tests won&#39;t induce any more code changes&#34;? I would not recommend this - it is obviously good to have such additional tests for a complex algorithm, it will give you much more confidence into the correctness of the code.</p><p>The better alternative here is to make your additional tests <strong>artificially fail</strong> for a short time. The main purpose of seeing any tests failing first before they pass in TDD is to make sure the test is actually executed - it is a &#34;test for the test&#34;. You could, for example, add a statement like</p><pre><code>if(list.Length&gt;=5)
    return null;
</code></pre><p>somewhere inside the <code>Sort</code> function, and remove it after you saw it the test failing. That proofs your new tests are actually executed, and you did not intermix it with some existing test.</p><hr/><p>Since you asked for another example: lets say you have a function</p><pre><code>`string TrimNumeric(string value)`
</code></pre><p>which is expected to replace non-numeric characters from the beginning or end of the input string <code>value</code> and return the result. What happens with non-numeric characters in the middle is not specified so far. The following test cases are already passing:</p><pre><code>Assert.AreEqual(&#34;123&#34;,TrimNumeric(&#34;abc123&#34;));
Assert.AreEqual(&#34;123&#34;,TrimNumeric(&#34;123xyz&#34;));
Assert.AreEqual(&#34;456&#34;,TrimNumeric(&#34;abc456xyz&#34;));
</code></pre><p>Now you get an additional requirement: non-numeric characters in the middle shall be stripped as well. You start by adding a test:</p><pre><code>Assert.AreEqual(&#34;123&#34;,TrimNumeric(&#34;1a2b3cxyz&#34;));
</code></pre><p>In such a case, if you don&#39;t know how <code>TrimNumeric</code> is implemented internally, there is no indication if this test will fail or not. Indeed, if <code>TrimNumeric</code> was implemented in a straightforward, simple, and general fashion, by iterating over all characters and keeping only the numeric ones, it is IMHO pretty likely this test will pass immediately. Nevertheless it should be clear why is necessary to write such a test. Maybe the test will not pass, if the implementation looks differently. But if it passes right from the start, make sure you make it fail at least temporarily, to be sure it gets executed.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-the-value-of-checking-in-failing-unit-tests/'>Unit-testing &#8211;  the value of checking in failing unit tests</a></li><li class="list-group-item"><a href='../c-interfacing-application-code-with-unit-tests/'>C++ &#8211; Interfacing application code with unit tests</a></li><li class="list-group-item"><a href='../unit-testing-in-tdd-is-it-bad-practice-to-write-helper-class-for-unit-tests/'>Unit-testing &#8211; In TDD, is it bad practice to write helper class for unit tests</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>