<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Why do we need to include the .h while everything works when including only the .cpp file &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063601 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063601" class="post-1063601 software type-software status-publish hentry category-software tag-c tag-headers tag-include tag-linking"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Why do we need to include the .h while everything works when including only the .cpp file</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">headers</span><span class="mr-2 badge badge-warning">include</span><span class="mr-2 badge badge-primary">linking</span></p><div class="entry-content"><p>Why do we need to include both the <code>.h</code> and <code>.cpp</code> files while we can make it work solely by including the <code>.cpp</code> file?</p><p>For example: creating a <code>file.h</code> containing declarations, then creating a <code>file.cpp</code> containing definitions and including both in <code>main.cpp</code>.</p><p>Alternatively: creating a <code>file.cpp</code> containing declaration/definitions ( no prototypes ) including  it in <code>main.cpp</code>.</p><p>Both work for me. I can&#39;t see the difference. Maybe some insight into the compiling and linking process may help.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>While you <em>can</em> include <code>.cpp</code> files as you mentioned, this is a bad idea.</p><p>As you mentioned, declarations belong in header files. These cause no problems when included in multiple compilation units because they do not include implementations. Including a the definition of a function or class member multiple times will normally cause a problem (but not always) because the linker will get confused and throw an error.</p><p>What should happen is each <code>.cpp</code> file includes definitions for a subset of the program, such as a class, logically organized group of functions, global static variables (use sparingly if at all), etc.</p><p>Each <em>compilation unit</em> (<code>.cpp</code> file) then includes whatever declarations it needs to compile the definitions it contains. It keeps track of the functions and classes it references but does not contain, so the linker can resolve them later when it combines the object code into an executable or library.</p><p><strong>Example</strong></p><ul><li><code>Foo.h</code> -&gt; contains declaration (interface) for class Foo.</li><li><code>Foo.cpp</code> -&gt; contains definition (implementation) for class Foo.</li><li><code>Main.cpp</code> -&gt; contains main method, program entry point. This code instantiates a Foo and uses it.</li></ul><p>Both <code>Foo.cpp</code> and <code>Main.cpp</code> need to include <code>Foo.h</code>. <code>Foo.cpp</code> needs it because it is defining the code that backs the class interface, so it needs to know what that interface is. <code>Main.cpp</code> needs it because it is creating a Foo and invoking its behavior, so it has to know what that behavior is, the size of a Foo in memory and how to find its functions, etc. but it does not need the actual implementation just yet.</p><p>The compiler will generate <code>Foo.o</code> from <code>Foo.cpp</code> which contains all of the Foo class code in compiled form. It also generates <code>Main.o</code> which includes the main method and unresolved references to class Foo.</p><p>Now comes the linker, which combines the two object files <code>Foo.o</code> and <code>Main.o</code> into an executable file. It sees the unresolved Foo references in <code>Main.o</code> but sees that <code>Foo.o</code> contains the necessary symbols, so it &#34;connects the dots&#34; so to speak. A function call in <code>Main.o</code> is now connected to the actual location of the compiled code so at runtime, the program can jump to the correct location.</p><p>If you had included the <code>Foo.cpp</code> file in <code>Main.cpp</code>, there would be <em>two</em> definitions of class Foo. The linker would see this and say &#34;I don&#39;t know which one to pick, so this is an error.&#34; The compiling step would succeed, but linking would not. (Unless you just do not compile <code>Foo.cpp</code> but then why is it in a separate <code>.cpp</code> file?)</p><p>Finally, the idea of different file types is irrelevant to a C/C++ compiler. It compiles &#34;text files&#34; which hopefully contain valid code for the desired language. Sometimes it may be able to tell the language based on the file extension. For example, compile a <code>.c</code> file with no compiler options and it will assume C, while a <code>.cc</code> or <code>.cpp</code> extension would tell it to assume C++. However, I can easily tell a compiler to compile a <code>.h</code> or even <code>.docx</code> file as C++, and it will emit an object (<code>.o</code>) file if it contains valid C++ code in plain text format. These extensions are more for the benefit of the programmer. If I see <code>Foo.h</code> and <code>Foo.cpp</code>, I immediately assume that the first contains the declaration of the class and the second contains the definition.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/c-what-to-do-if-i-hate-c-header-files/'>C++ &#8211; What to do if I hate C++ header files</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-finding-header-files/'>C++ &#8211; Finding header files</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-the-exact-syntax-of-inline/'>C++ &#8211;  the exact syntax of inline</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-exactly-does-a-program-executable-image-and-library-pre-compiled-image-link-together/'>How exactly does a program (executable image) and library (pre-compiled image) &#8220;link&#8221; together</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/cpp-and-h-hpp-include-why-question/'>Cpp and h/hpp #include: &#8220;why&#8221; question</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-including-standard-library-headers-only-once-across-multiple-program-headers/'>C++ &#8211; Including standard library headers only once across multiple program headers</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>