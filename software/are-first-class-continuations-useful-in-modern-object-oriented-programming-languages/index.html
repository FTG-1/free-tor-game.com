<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Are first-class continuations useful in modern object-oriented programming languages &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084034 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084034" class="post-1084034 software type-software status-publish hentry category-software tag-continuation tag-language-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Are first-class continuations useful in modern object-oriented programming languages</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">continuation</span><span class="mr-2 badge badge-info">language-design</span></p><div class="entry-content"><p>Continuations are extremely useful in functional programming languages (e.g. the <code>Cont</code> monad in Haskell) because they allow a simple and regular notation for imperative-style code.  They&#39;re also useful in some older imperative languages because they can be used to implement missing language features (e.g. exceptions, coroutines, green threads).  But for a modern object-oriented language with support built in for these features, what arguments would there be for also adding support for first-class continuations (whether the more modern delimited style <code>reset</code> and <code>shift</code> or scheme-like <code>call-with-current-continuation</code>)?</p><p>Are there arguments <em>against</em> adding support other than performance and complexity of implementation?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><a href="https://web.archive.org/web/20151023002552/http://blogs.msdn.com:80/b/ericlippert/archive/2010/10/26/continuation-passing-style-revisited-part-four-turning-yourself-inside-out.aspx" rel="nofollow noreferrer">Let&#39;s let Eric Lippert answer this one:</a></p><blockquote><p>The obvious question at this point is: if CPS is so awesome then why
don’t we use it all the time? Why have most professional developers
never heard of it, or, those who have, think of it as something only
those crazy Scheme programmers do?</p><p>First of all, it is simply hard for most people who are used to
thinking about subroutines, loops, try-catch-finally and so on to
reason about delegates being used for control flow in this way. I am
reviewing my notes on CPS from CS442 right now and I see that in 1995
I wrote down a profQUOTE: “With continuations you have to sort of
stand on your head and pull yourself inside out”. Professor Duggan (*)
was absolutely correct in saying that. Recall from a couple days ago
that our tiny little example of CPS transformation of the C#
expression M(B()?C():D()) involved four lambdas. Not everyone is good
at reading code that uses higher-order functions. It imposes a large
cognitive burden.</p><p>Moreover: one of the nice things about having specific control flow
statements baked in to a language is that they let your code clearly
express the meaning of the control flow while hiding the mechanisms –
the call stacks and return addresses and exception handler lists and
protected regions and so on. <strong>Continuations make the mechanisms of
control flow explicit in the structure of the code.</strong> All that emphasis
on <em>mechanism</em> can overwhelm the <em>meaning</em> of the code.</p></blockquote><p>In <a href="https://web.archive.org/web/20151023002553/http://blogs.msdn.com:80/b/ericlippert/archive/2010/10/27/continuation-passing-style-revisited-part-five-cps-and-asynchrony.aspx" rel="nofollow noreferrer">the next article</a>, he explains how asynchrony and continuations are exactly equivalent to one another, and goes over a demonstration of taking a simple, (but blocking,) synchronous network operation and rewriting it in asyncronous style, making sure to cover all the hidden gotchas that have to be covered in order to get it right.  It turns into a <em>massive</em> mess of code.  His summary at the end:</p><blockquote><p>Holy goodness, what a godawful mess we’ve made. We&#39;ve expanded two
lines of perfectly clear code into two dozen lines of the most
godawful spaghetti you&#39;ve ever seen. And of course it still doesn’t
even compile because the labels aren’t in scope and we have a definite
assignment error. We;d still need to further rewrite the code to fix
those problems.</p><p>Remember what I was saying about the pros and cons of CPS?</p><ul><li>PRO: Arbitrarily complex and interesting control flows can be built out of simple parts – check.</li><li>CON: The reification of control flow via continuations is hard to read and hard to reason about – check.</li><li>CON: The code that represents the mechanisms of control flow completely overwhelms the meaning of the code – check.</li><li>CON: The transformation of ordinary code control flow into CPS is the kind of thing that compilers are good at, and almost no one else
is – check.</li></ul><p><strong>This is not some intellectual exercise. Real people end up writing
code morally equivalent to the above all the time when they deal with
asynchrony.</strong> And, ironically, even as processors have gotten faster and
cheaper, we spend more and more of our time <em>waiting for stuff that
isn’t processor-bound.</em> In many programs, much of the time spent is
with the processor pegged to zero waiting for network packets to make
the trip from England to Japan and back again, or for disks to spin,
or whatever.</p><p>And I haven&#39;t even talked about what happens if you want to compose
asynchronous operations further. Suppose you want to make
ArchiveDocuments an asynchronous operation that takes a delegate. Now
all the code that calls it has to be written in CPS as well. The taint
just spreads.</p><p>Getting asynchronous logic right is <strong>important,</strong> it’s only going to be <strong>more important in the future,</strong> and the tools we have given you make you <em>“stand on your head and turn yourself inside out”</em> as Professor Duggan
wisely said.</p><p>Continuation passing style is powerful, yes, but there&#39;s got to be a
better way of making good use of that power than the code above.</p></blockquote><p>Both articles, and <a href="https://web.archive.org/web/20190112214749/https://blogs.msdn.microsoft.com/ericlippert/tag/async/" rel="nofollow noreferrer">the following series</a> on a new C# language feature that moves all this mess into the compiler and lets you write your code as normal control flow with a special keyword to mark certain parts as asynchronous, are well worth reading even if you&#39;re not a C# developer.  I&#39;m not, but it was still quite the enlightening experience when I ran across it for the first time.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/why-is-there-such-limited-support-for-design-by-contract-in-most-modern-programming-languages/'>Why is there such limited support for Design by Contract in most modern programming languages</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/are-there-any-programming-languages-that-make-use-of-adjectives/'>Are there any programming languages that make use of adjectives</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/why-does-the-type-go-after-the-variable-name-in-modern-programming-languages/'>Why does the type go after the variable name in modern programming languages</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>