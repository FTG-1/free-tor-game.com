<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Git &#8211; In git, is it a bad idea to create a tag with the same name as a deleted branch &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1064529 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1064529" class="post-1064529 software type-software status-publish hentry category-software tag-branching tag-git tag-gitflow tag-version-control"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Git &#8211; In git, is it a bad idea to create a tag with the same name as a deleted branch</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">branching</span><span class="mr-2 badge badge-info">git</span><span class="mr-2 badge badge-warning">gitflow</span><span class="mr-2 badge badge-primary">version control</span></p><div class="entry-content"><p>I have a project with a git branching model that roughly follows that of <a href="http://nvie.com/posts/a-successful-git-branching-model/">nvie&#39;s git-flow</a>.</p><p>Our release branches are named in a <a href="http://semver.org/">SemVer</a> format, e.g. <code>v1.5.2</code></p><p>Once a release branch is given the green light for production, we close the branch, by merging it into master, applying a tag, and then deleting the branch.</p><p>As we immediately delete the release branch, we&#39;ve been using the same identifier for tagging the branch, e.g. <code>v1.5.2</code></p><p>Here&#39;s the commands we&#39;d use to close a release branch:</p><pre><code>$ git checkout master
$ git merge v1.5.2
$ git tag -a v1.5.2 -m &#34;Version 1.5.2 - foo bar, baz, etc&#34;
$ git branch -d v1.5.2
$ git branch -dr origin/v1.5.2
$ git push origin :v1.5.2
$ git push
$ git push --tags
</code></pre><p>This seems to work in the majority of cases, however it&#39;s causing an issue in the scenario where another instance of the git repo (e.g. another dev machine, or staging environment) has a local checkout of the v1.5.2 branch.</p><p>The <code>git push origin :v1.5.2</code> command will delete the branch in the remote, but does not delete the local version of the branch (if it exists) in all repos.</p><p>This leads to an ambiguous reference, when trying checkout <code>v1.5.2</code> in those repos:</p><pre><code>$ git checkout v1.5.2
warning: refname &#39;v1.5.2&#39; is ambiguous.
</code></pre><p>Can this be avoided without using a different syntax for the branches, e.g. <code>release-v1.5.2</code>, or <code>v1.5.2-rc</code>?</p><p>Or is it unavoidable, and therefore a fundamentally bad idea to create a tag with the same name as a deleted branch?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If you absolutely want to keep this naming scheme, you might:</p><h3>Decide that you don&#39;t care about these warnings</h3><p>That is, if you&#39;re happy with the fact that:</p><ul><li><code>git checkout &lt;ref&gt;</code> will check out <code>refs/heads/&lt;ref&gt;</code> over <code>refs/tags/&lt;ref&gt;</code> (see <a href="https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html">git-checkout</a>)</li><li>other commands will use <code>refs/tags/&lt;ref&gt;</code> over <code>refs/heads/&lt;ref&gt;</code> (see <a href="https://www.kernel.org/pub/software/scm/git/docs/gitrevisions.html">gitrevisions</a>)</li></ul><p>For example, in this test repository, the <code>v1.5.2</code> branch points to commit B, but the <code>v1.5.2</code> tag points to commit A.</p><pre><code>% git log --oneline --decorate
8060f6f (HEAD, v1.5.2, master) commit B
0e69483 (tag: v1.5.2) commit A
</code></pre><p><code>git checkout</code> prefers branch names:</p><pre><code>% git checkout v1.5.2
warning: refname &#39;v1.5.2&#39; is ambiguous.
Switched to branch &#39;v1.5.2&#39;
% git log --decorate --oneline -1
8060f6f (HEAD, v1.5.2, master) commit B
</code></pre><p>but <code>git log</code> will use the tag name:</p><pre><code>% git log --decorate --oneline -1 v1.5.2
warning: refname &#39;v1.5.2&#39; is ambiguous.
0e69483 (tag: v1.5.2) commit A
</code></pre><p>This could be confusing.</p><h3>Train people to delete their local branches when they see a new tag</h3><p>This might be hard/awkward depending on the size of your organisation.</p><h3>Write a wrapper around &#34;git pull&#34; and &#34;git fetch&#34;</h3><p>That is, write a wrapper that checks if there are any tags that shadow branch names, and warn about (or delete) those branches. This sounds painful, and it could be undesirable if the shadowed branch is currently checked out.</p><p>Unfortunately, it sounds like the easiest way to solve this problem might be to change the way you name your branches. The link you posted uses different naming schemes for tags and branches: if you&#39;re already mostly following that method, adopting its naming scheme might be the easiest solution.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../git-how-to-prevent-users-from-merging-origin-x-into-y-in-git/'>Git &#8211; How to prevent users from merging origin/X into Y in git</a></li><li class="list-group-item"><a href='../git-branching-and-tagging-best-practices/'>Git branching and tagging best practices</a></li><li class="list-group-item"><a href='../git-in-git-is-the-use-of-a-production-branch-necessary-and-or-would-it-be-feasible-to-have-more-than-one-of-them/'>Git &#8211; In Git, is the use of a &#8216;PRODUCTION&#8217; branch necessary and/or would it be feasible to have more than one of them</a></li><li class="list-group-item"><a href='../git-tag-and-or-branch-strategies-for-environments-when-using-git/'>Git &#8211; Tag and/or branch strategies for environments when using git</a></li><li class="list-group-item"><a href='../git-why-does-git-have-tags/'>Git &#8211; Why does Git have tags</a></li><li class="list-group-item"><a href='../git-understanding-the-difference-of-branch-between-svn-and-git/'>Git &#8211; Understanding the difference of branch between SVN and Git</a></li><li class="list-group-item"><a href='../should-a-release-branch-or-the-master-branch-be-tagged-when-the-gitflow-is-used/'>Should a release branch or the master branch be tagged when the gitflow is used</a></li><li class="list-group-item"><a href='../git-rebase-your-own-branch-and-force-push/'>Git &#8211; rebase your own branch and force push</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>