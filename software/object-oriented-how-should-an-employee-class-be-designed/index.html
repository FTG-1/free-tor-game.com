<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; How should an `Employee` class be designed &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069592 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069592" class="post-1069592 software type-software status-publish hentry category-software tag-class tag-class-design tag-object-oriented"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; How should an `Employee` class be designed</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">class</span><span class="mr-2 badge badge-info">class-design</span><span class="mr-2 badge badge-warning">object-oriented</span></p><div class="entry-content"><p>I am trying to create a program for managing employees. I cannot, however, figure out how to design the <code>Employee</code> class. My goal is to be able to create and manipulate employee data on the database using an <code>Employee</code> object.</p><p>The basic implementation I thought of, was this simple one:</p><pre><code>class Employee
{
    // Employee data (let&#39;s say, dozens of properties).

    Employee() {}
    Create() {}
    Update() {}
    Delete() {}
}
</code></pre><p>Using this implementation, I encountered several issues.</p><ol><li>The <code>ID</code> of an employee is given by the database, so if I use the object for describing a new employee, there will be no <code>ID</code> to store yet, while an object representing an existing employee <strong>will</strong> have an <code>ID</code>. So I have a property that sometimes describes the object and sometimes doesn&#39;t (Which could indicate that we violate <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">SRP</a>? Since we use the same class for representing new and existing employees&#8230;).</li><li>The <code>Create</code> method is supposed to create an employee on the database, while the <code>Update</code> and <code>Delete</code> are supposed to act on an existing employee (Again, <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">SRP</a>&#8230;).</li><li>What parameters should the &#39;Create&#39; method have? Dozens of parameters for all of the employee data or maybe an <code>Employee</code> object?</li><li>Should the class be immutable?</li><li>How will the <code>Update</code> work? Will it take the properties and update the database? Or maybe it will take two objects &#8211; an &#34;old&#34; one and a &#34;new&#34; one, and update the database with the differences between them? (I think the answer has to do with the answer about the mutability of the class).</li><li>What would be the responsibility of the constructor? What would be the parameters it takes? Would it fetch employee data from the database using an <code>id</code> parameter and them populate the properties?</li></ol><p>So, as you can see, I have a bit of a mess in my head, and I am very confused. Could You please help me understand how such a class should look like?</p><p>Please notice that I do not want opinions, just to understand how such a frequently used class is generally designed.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><sub>This is a more well-formed transcription of my initial comment under your question. The answers to questions addressed by the OP may be found at the bottom of this answer. Also please check the <strong>important note</strong> located at the same place.</sub></p><hr/><p>What you are currently describing, Sipo, is a design pattern called <a href="https://en.wikipedia.org/wiki/Active_record_pattern" rel="noreferrer">Active record</a>. As with everything, even this one has found its place among programmers, but has been discarded in favour of <a href="http://martinfowler.com/eaaCatalog/repository.html" rel="noreferrer">repository</a> and the <a href="http://martinfowler.com/eaaCatalog/dataMapper.html" rel="noreferrer">data mapper</a> patterns for one simple reason, scalability.</p><p>In short, an active record is an object, which:</p><ul><li>represents an object in your domain (includes business rules, knows how to handle certain operations on the object, such as if you can or cannot change a username and so forth),</li><li>knows how to retrieve, update, save and delete the entity.</li></ul><p>You address several issues with your current design and the main problem of your design is addressed in the last, 6th, point (last but not least, I guess). When you have a class for which you are designing a constructor and you do not even know what the constructor should do, the class is probably doing something wrong. That happened in your case.</p><p>But fixing the design is actually pretty simple by splitting the entity representation and CRUD logic into two (or more) classes.</p><p><strong>This is what your design looks like now:</strong></p><ul><li><code>Employee</code> - contains information about the employee structure (its attributes) and methods how to modify the entity (if you decide to go the mutable way), contains CRUD logic for the <code>Employee</code> entity, can return a list of <code>Employee</code> objects, accepts an <code>Employee</code> object when you want to update an employee, can return a single <code>Employee</code> through a method like <code>getSingleById(id : string) : Employee</code></li></ul><p><sub>Wow, the class seems huge.</sub></p><p><strong>This will be the proposed solution:</strong></p><ul><li><code>Employee</code> - contains information about the employee structure (its attributes) and methods how to modify the entity (if you decide to go the mutable way)</li><li><code>EmployeeRepository</code> - contains CRUD logic for the <code>Employee</code> entity, can return a list of <code>Employee</code> objects, accepts an <code>Employee</code> object when you want to update an employee, can return a single <code>Employee</code> through a method like <code>getSingleById(id : string) : Employee</code></li></ul><p>Have you heard of <a href="https://en.wikipedia.org/wiki/Separation_of_concerns" rel="noreferrer">separation of concerns</a>? No, you will now. It is the less strict version of the Single Responsibility Principle, which says a class should actually have only one responsibility, or as Uncle Bob says:</p><blockquote><p>A module should have one and only one reason to change.</p></blockquote><p>It is quite clear that if I was able to clearly split your initial class into two which still have a well rounded interface, the initial class was probably doing too much, and it was.</p><p>What is great about the repository pattern, it not only acts as an abstraction to provide a middle layer between database (which can be anything, file, noSQL, SQL, object-oriented one), but it does not even need to be a concrete class. In many OO languages, you can define the interface as an actual <code>interface</code> (or a class with a pure virtual method if you are in C++) and then have multiple implementations.</p><p>This completely lifts the decision whether a repository is an actual implementation of you are simply relying on the interface by actually relying on a structure with the <code>interface</code> keyword. And repository is exactly that, it is an fancy term for data layer abstraction, namely mapping data to your domain and vice versa.</p><p>Another great thing about separating it into (at least) two classes is that now the <code>Employee</code> class can clearly manage its own data and do it very well, because it does not need to take care of other difficult things.</p><p><strong>Question 6:</strong> So what should the constructor do in the newly created <code>Employee</code> class? It is simple. It should take the arguments, check if they are valid (such as an age shouldn&#39;t probably be negative or name shouldn&#39;t be empty), raise an error when the data was invalid and if the validation passed assign the arguments to private variables of the entity. It now cannot communicate with the database, because it simply has no idea how to do it.</p><hr/><p><strong>Question 4:</strong> Cannot be answered at all, not generally, because the answer heavily depends on what exactly you need.</p><hr/><p><strong>Question 5:</strong> Now that you have separated the bloated class into two, you can have multiple update methods directly on the <code>Employee</code> class, like <code>changeUsername</code>, <code>markAsDeceased</code>, which will manipulate the data of the <code>Employee</code> class <strong>only in RAM</strong> and then you could introduce a method such as <code>registerDirty</code> from the <a href="http://martinfowler.com/eaaCatalog/unitOfWork.html" rel="noreferrer">Unit of Work</a> pattern to the repository class, through which you would let the repository know that this object has changed properties and will need to be updated after you call the <code>commit</code> method.</p><p>Obviously, for an update an object requires to have an id and thus be already saved, and it&#39;s the repository&#39;s responbitility to detect this and raise an error when the criteria is not met.</p><hr/><p><strong>Question 3:</strong> If you decide to go with the Unit of Work pattern, the <code>create</code> method will now be <code>registerNew</code>. If you do not, I would probably call it <code>save</code> instead. The goal of a repository is to provide an abstraction between the domain and the data layer, because of this I would recommend you that this method (be it <code>registerNew</code> or <code>save</code>) accepts the <code>Employee</code> object and it is up to the classes implementing the repository interface, which attributes they decide to take out of the entity. Passing an entire object is better so you do not need to have many optional parameters.</p><hr/><p><strong>Question 2:</strong> Both methods will now be a part of the repository interface and they do not violate the single responsibility principle. The responsibility of the repository is to provide CRUD operations for the <code>Employee</code> objects, that is what it does (besides Read and Delete, CRUD translates to both Create and Update). Obviously, you could split the repository even further by having an <code>EmployeeUpdateRepository</code> and so forth, but that is rarely needed and a single implementation can usually contain all CRUD operations.</p><hr/><p><strong>Question 1:</strong> You ended up with a simple <code>Employee</code> class which will now (among other attributes) have id. Whether the id is filled or empty (or <code>null</code>) depends on whether the object has been already saved. Nonetheless, an id is still an attribute the entity owns and the responsibility of the <code>Employee</code> entity is to take care of its attributes, hence taking care of its id.</p><p>Whether an entity does or does not have an id does not usually matter untill you try to do some persistence-logic on it. As mentioned in the answer to the question 5, it is the repository&#39;s responsibility to detect you aren&#39;t trying to save an entity which has already been saved or trying to update an entity without an id.</p><hr/><h2>Important note</h2><p>Please be aware that although separation of concerns is great, actually designing a functional repository layer is quite a tedious work and in my experience is a bit more difficult to get right than the active record approach. But you will end up with a design which is far more flexible and scalable, which may be a good thing.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-call-the-database-every-time-or-create-an-object-in-memory-and-if-so-how-and-how-often-to-update/'>Object-oriented &#8211; Call the database every time, or create an object in memory, and if so, how and how often to update</a></li><li class="list-group-item"><a href='../c-refactoring-when-to-add-a-new-class-in-the-project/'>C# &#8211; Refactoring: When to add a new class in the project</a></li><li class="list-group-item"><a href='../java-the-id-of-an-object-is-null-at-start-does-that-make-the-object-state-invalid-and-violate-encapsulation/'>Java &#8211; The ID of an object is null at start. Does that make the object state invalid and violate encapsulation</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>