<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Multi tenant in a micro-service &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083549 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083549" class="post-1083549 software type-software status-publish hentry category-software tag-microservices tag-multitenancy"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Multi tenant in a micro-service</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">microservices</span><span class="mr-2 badge badge-info">multitenancy</span></p><div class="entry-content"><p>We are creating a SaaS multi-tenant (separate databases) with micro-service architecture, which causing a lot of discussion between me and my manager trying to determine if it needs to be multi-tenant or the databases can be related to the service no matter which tenant it is (each service with its serving data).</p><p>From what I understand about micro-services that each service is a stand alone application down to the data layer, but the multi-tenant needs some sort of router/persistence layer and a shared database to pass the tenant identifier (which can be replaced by the API gateway policies). and hence in this way micro-service becomes an SOA as it will connect to a single point to the data layer.</p><p>Points we argued a lot:</p><ol><li><p>Manageability in one database, or separate databases for each tenant, if easy in one, nightmare in the other?</p><ul><li>Backup</li><li>Load Balancing</li></ul></li><li><p>In case of a db crash, or data loss incident? which is better?</p></li><li><p>How can we measure the feasibility of multi-tenant databases approach for the micro-service application?</p></li><li><p>Security wise, is there any upper hand for on over the other, if we excluded tenant isolation in the multi tenancy?</p></li></ol><p>P.S: micro-services is a must due to the fact that some services will have huge load which needs to be balanced separately</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><strong>Bottom Line Up Front:</strong> You will likely have to start with a compromise.</p><p>Micro-services, and multi-tenancy are hard.  You have to consider the trade-offs on cost to run, maintain, and build your solutions.  The answers are going to conflict with what makes the system more robust and secure.  The challenge is to figure out where your project needs to start, and what compromises you have to accept for the moment.</p><p>There are a couple axioms to keep in mind:</p><ul><li><strong>Complexity and cost are directly related.</strong> The more complex something is, the more expensive it will be to build it and maintain it.</li><li><strong>Isolated systems are generally safer, but also are more complex.</strong> When two tenants data never touch, they can&#39;t affect the other.</li><li><strong>We are not all FaceBook.</strong> Meaning that most companies have to worry about cost more than isolation and the required complexity that comes with it.</li></ul><p>When you start breaking down the different topics, you are going to find that what is more correct for one answer is less correct for another.  For example, your first topic and your second topic have different answers.</p><p><strong>Maintainability</strong></p><p>One thing is easier to maintain than several things.  That goes even more for your database.</p><p>Having one large shared database cluster is going to be easier to manage the following:</p><ul><li>Backup/Restore</li><li>Load balancing a cluster</li></ul><p>At least they will up to a point.  The problem you may get to is that one of your application&#39;s tenants has vastly more demands than another.  If your database is a shared resource between the tenants, you will eventually run into the situation where your super users are impacting your service to the other tenants.  That may not be something you have to worry about on day one.</p><p><strong>Impact of Disasters</strong></p><p>If your database goes down, you will need to restore the database server then restore the latest backup.</p><ul><li>All tenants served by the database server that went down are affected.<ul><li>One database for all tenants means all your customers are affected</li><li>Separate databases for each tenant means only that tenant is affected</li></ul></li><li>Some databases are designed to scale out<ul><li>Sharding spreads the data across multiple nodes in a cluster</li><li>Replication adds redundancy to your data spread across those nodes</li><li>These are designed to allow a single node to be lost, and replaced without any loss of data or service</li></ul></li></ul><p>It&#39;s worth looking in to databases that are designed to scale out.  Examples would be Apache Cassandra, Mongo DB, Raven DB, etc.  Most <a href="https://en.wikipedia.org/wiki/NoSQL" rel="noreferrer">NoSQL</a> databases are designed around this concept.  The upshot is that you have one &#34;logical&#34; database, but multiple processing nodes allow you to expand capacity as you need.  It might be a worthwhile compromise to simplify your data design while having the robustness and safety you need.</p><p><strong>Feasibility of multi-tenant database approach</strong></p><p>That&#39;s something you&#39;ll have to evaluate.  The approaches you are weighing against each other are:</p><ul><li>One database for everything</li><li>One database per tenant</li><li>One database per micro-service</li><li>One database per micro-service per tenant (the utmost in isolation)</li></ul><p>To perform a useful analysis of alternatives, you need to define:</p><ul><li>Key performance areas/Requirements -- know what is important for your app</li><li>Cost of the solution</li><li>T-shirt size estimates of what it would take to implement each approach</li></ul><p>Create the chart, see how each approach hits those check marks, and then make a decision.  Remember the axiom about complexity and cost being directly related?  The decision you have to make right now may not be what the pundits say is the most correct thing.  You have to live within budget constraints.  As your application brings in more revenue, your budget will increase, which will allow you to update your system in ways you can&#39;t consider right now.</p><p><strong>Security</strong></p><p>Security is a complicated topic, that has so many facets that again you have to make decisions based on the real legal requirements you have in your country, or that your clients demand.  Below are a just a few security related concepts:</p><ul><li>Non-repudiation (i.e. a user cannot deny the actions they performed)</li><li>Auditing (i.e. you can reconstruct the actions a user performed to find bad actors)</li><li>Data protection (i.e. a user cannot see information they are not allowed to see)</li><li>Infrastructure security (i.e. network access, file access, etc. are properly protected)</li><li>Data encryption (i.e. a user cannot discover someone else&#39;s data by sniffing network packets)</li></ul><p>There is even more than that.  Many security aspects will be constant across your alternatives (like encryption, infrastructure security, etc.)  However, the answer to the concept of data protection is more secure if your database does not have data from multiple tenants inside of it.  That may not matter if the user can&#39;t access the database directly.</p><p>When dealing with security concerns, it&#39;s best to understand what you are actually required to handle:</p><ul><li>Are there legal requirements you need to comply with?  (UK and several other countries have very strict user privacy laws, while other countries do not)</li><li>Are there standards your clients demand?</li><li>Are there simple and low cost things you can do to improve security?</li></ul><p>Even when you consider user privacy laws, the security demands of a bank or health care system are going to be much greater than those needed for a social networking app.</p><p><strong>Summary</strong></p><p>Your team (manager included) need to define the following:</p><ul><li>Requirements -- what your multi-tenant application really needs, also the security requirements</li><li>Constraints -- budget, schedule, tools (some shops will define tools that cannot be used, and others may define tools that must be used)</li><li>Key Performance Areas -- includes performance criteria, management support, etc.</li></ul><p>Without those, you won&#39;t be able to settle on something that fits the unique demands of your application.  The most correct thing is going to a bit different for each application because the unique requirements and constraints you have to work with influence what that actually is.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/architecture-multi-tenancy-or-multi-instance/'>Architecture &#8211; Multi tenancy or multi instance</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-to-handle-db-authentication-in-multi-tenant-application-with-separate-databases/'>How to handle db authentication in multi tenant application with separate databases</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-architecture-for-queuing-based-technology-in-a-micro-service-multi-tenant-environment/'>C# &#8211; Architecture for Queuing based technology in a Micro-Service, Multi-Tenant Environment</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/using-redis-as-a-cache-in-a-multi-tenant-application/'>Using Redis as a cache in a Multi-Tenant application</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>