<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211;  the best way to get a list of Business objects from a list of entities &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069064 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069064" class="post-1069064 software type-software status-publish hentry category-software tag-c tag-entity-framework tag-layers"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211;  the best way to get a list of Business objects from a list of entities</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">entity-framework</span><span class="mr-2 badge badge-warning">layers</span></p><div class="entry-content"><p>I am using entity framework to get a <code>IEnumerable&lt;CustomersEntity&gt;</code>, and I need to cast this to a <code>IEnumerable&lt;CustomerBO&gt;</code> to display it in some view. <strong>I know how to do cast a <code>IEnumerable&lt;T1&gt;</code> to a <code>IEnumerable&lt;T2&gt;</code></strong>; but in this case, who will be in charge of it ? I thought <code>CustomerBO</code> could do it, but is it correct for an object return a list of itself ? or have I to write a layer with only one function ? I am in a MVC project, so maybe the controller could be involved; but if possible I prefer to decouple it from the DAL&#8230;</p><p>Here is what I currently have:</p><p>Entity :</p><pre><code>public class CustomerEntity
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Street { get; set; }
    public string City { get; set; }
    public string Country { get; set; }
    public IEnumerable&lt;Invoices&gt; Invoices { get; set; }
}
</code></pre><p>And Business object:</p><pre><code>public class CustomerBO
{
    public string FullName { get; set; }
    public string FullAddress { get; set; }
    public string InvoicesNumber { get; set; }
    public string InvoicesTotalAmount { get; set; }

    public CustomerBO(CustomerEntity customer)
    {
        //Instanciate the object
    }
}
</code></pre><p>Note I need a one-way only process; I won&#39;t have to insert a <code>CustomerBO</code> in the database.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Your CustomerBO class should have NO reference to the EF entity. This conversion should take place in side a repository. If the business object has any reference to the entity, it is still coupled to the database, and it can be difficult to run simulations, &#34;what-if-scenarios&#34; ect, independent of your data if you need to.</p><pre><code>public class CustomerRepository
{
     // dont forget to close your connections, which I left out...
     public CustomerBO GetCustomer(id)
     {
          return Map(DBContext.Customers.Where(c =&gt; c.Id == id).Single());
     }

     public IEnumerable&lt;CustomerBO&gt; GetAllCustomers()
     {
          return Map(DBContext.Customers.Select(c =&gt; Map(c));
     }

     private CustomerBO Map(CustomerEntity entity)
     {
          CustomerBo bo = new CustomerBO();
          bo.FirstName = entity.FirstName;
          //etc
          bo.InvoicesNumber = entity.invoices.Count();
          bo.InvoicesTotalAmount = entity.invoices.select(i =&gt; i.Amount).Sum();
     }


}
</code></pre><p>You may think, this seems slow, but do not be tempted by the siren of premature optimization. Also, if you are very concerned about speed, you should use Dapper.net instead of entity framework.</p><p>You then call the repository from your controller, and map the BO to the view model in the controller, or just use the BO directly if it suits your purposes.</p><p>There is still coupling inside the repository, but it is limited to only there, so if you need to change your DB, you only have to change it one place</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/c-design-many-properties-complex-constructor-and-equality/'>C# Design, many properties, complex constructor and equality</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-best-way-to-remove-list-items-from-an-existing-record/'>C# &#8211; Best way to remove list items from an existing record</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/nesting-linq-to-objects-query-within-linq-to-entities-query-what-is-happening-under-the-covers/'>Nesting Linq-to-Objects query within Linq-to-Entities query â€“what is happening under the covers</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-di-ioc-abstract-factory-galore/'>C# &#8211; DI / IoC Abstract Factory Galore</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/is-moving-entity-framework-objects-over-a-webservice-really-the-best-way/'>Is Moving Entity Framework objects over a webservice really the best way</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/entity-framework-entities-some-data-from-web-service-best-architecture/'>Entity Framework Entities &#8211; Some Data From Web Service &#8211; Best Architecture</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-how-to-add-properties-to-subclasses-and-access-them-without-casting-from-a-superclass/'>C# &#8211; How to add properties to subclasses and access them without casting from a superclass</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-how-to-argue-against-this-completely-public-mindset-of-business-object-class-design/'>C# &#8211; How to argue against this &#8220;completely public&#8221; mindset of business object class design</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-passing-state-or-context-across-layers-in-web-api/'>C# &#8211; Passing State or Context Across Layers in Web API</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/how-to-get-orm-ef-core-entities-follow-a-ddd-style-which-is-the-best-approach/'>How to get ORM (Ef Core) Entities follow a DDD style . Which is the best approach</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>