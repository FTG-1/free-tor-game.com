<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; C++ delete vs Java GC &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1074235 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1074235" class="post-1074235 software type-software status-publish hentry category-software tag-c tag-garbage-collection tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; C++ delete vs Java GC</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">garbage-collection</span><span class="mr-2 badge badge-warning">java</span></p><div class="entry-content"><p>Java garbage collection takes care of dead objects on the heap, but freezes the world sometimes. In C++ I have to call <code>delete</code> to dispose a created object at the end of it&#39;s life cycle.</p><p>This <code>delete</code> seems like a very low price to pay for non-freezing environment. Placing all relevant <code>delete</code> keywords is a mechanical task. One can write a script that would travel through the code and place delete once no new branches use a given object.</p><p>So, what are the pros and cons of Java build in vs C++ diy model of garbage collection.</p><hr/><p>I don&#39;t want to start a C++ vs Java thread. My question is different.<br /> This whole GC thing &#8211; does it boil down to &#34;just be neat, don&#39;t forget to delete objects you have created &#8211; and you will not need any dedicated GC? Or is it more like &#34;disposing objects in C++ is really tricky &#8211; I spend 20% of my time on it and yet, memory leaks are a common place&#34;?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h3>The C++ object lifecycle</h3><p>If you create local objects, you don&#39;t need to delete them:  the compiler generates code to delete them automatically when the object goes out of scope</p><p>If you use object pointers and create objects on the free store, then you have to take care of deleting the object when it&#39;s no longer needed (as you have described).  Unfortunately, in complex software this might be much more challenging than it looks like (e.g. what if an exception is raised and the expected delete part is never reached ?).</p><p>Fortunately, in modern C++ (aka C++11 and later), you have smart pointers, such as for example <a href="http://www.cplusplus.com/reference/memory/shared_ptr/" rel="noreferrer"><code>shared_ptr</code></a>.  They reference-count the created object in a very efficient manner, a little bit like a garbage collector would do in Java.  And as soon as the object is no longer referenced, the last active <code>shared_ptr</code> deletes the object for you.  Automatically. Like garbage collector, but one object at a time and without delay (Ok: you need some extra care and <code>weak_ptr</code> to cope with circular references).</p><p><em><strong>Conclusion:</strong></em> you can nowadays write C++ code without having to worry about memory allocation, and which is as leak-free as with a GC, but without the freeze effect.</p><h3>The Java object lifecycle</h3><p>The nice thing is that you don&#39;t have to worry about object lifecycle. You just create them and java takes care of the rest. A <a href="http://www.gamedev.net/page/resources/_/technical/general-programming/modern-garbage-collectors-under-the-hood-r2995" rel="noreferrer">modern GC</a> will identify and destroy the objects that are no longer needed (including if there are <a href="https://stackoverflow.com/questions/1910194/how-does-java-garbage-collection-work-with-circular-references">circular references</a> between dead objects).</p><p>Unfortunately, due to this comfort, you have no real control of <a href="https://stackoverflow.com/q/5757552/3723423">when the object is really deleted</a>.  Semantically, the <a href="https://stackoverflow.com/q/171952/3723423">deletion/destruction coincides with the garbage collection</a>.</p><p>This is perfectly fine if looking at objects only in terms of memory. Except for the freeze, but these are <a href="http://blog.mgm-tp.com/2013/03/garbage-collection-tuning/" rel="noreferrer">not a fatality</a> (people are working on this).  I&#39;m not Java expert, but I think that the delayed destruction makes it more difficult to identify <a href="https://stackoverflow.com/q/6470651/3723423">leaking in java</a> due to references accidentally kept despite objects are no longer needed (i.e. you can&#39;t really monitor the deletion of objects).</p><p>But what if the object has to control other resources than memory, for example an open file, a semaphore, a system service ?  Your class must provide a method to release these resources.  And you&#39;ll have the responsibility to make sure that this method is called when the resources are no longer needed. In every possible branching path through your code, ensuring it is also invoked in case of exceptions.  The challenge is very similar  the explicit deletion in C++.</p><p><em><strong>Conclusion:</strong></em> the GC solves a memory management issue.  But it doesn&#39;t address the the management of other system resources.  The absence of &#34;just-in-time&#34; deletion might make resource management very challenging.</p><h3>Deletion, garbage collection, and RAII</h3><p>When you can control the deletion of an object and the the destructor that is to be invoked at deletion, you can take benefit of the <a href="https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization" rel="noreferrer">RAII</a>.  This approach views memory only as a special case of resource allocation and links resource management more safely to the object life cycle, thus ensuring tightly controlled usage of resources.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-when-to-deprecate-and-when-to-delete-in-java/'>Java &#8211; When to deprecate and when to delete in Java</a></li><li class="list-group-item"><a href='../java-except-garbage-collector-what-else-makes-java-a-non-real-time-programming-language/'>Java &#8211; Except garbage collector, what else makes Java a non real time programming language</a></li><li class="list-group-item"><a href='../java-why-cant-java-c-implement-raii/'>Java &#8211; Why can&#8217;t Java/C# implement RAII</a></li><li class="list-group-item"><a href='../c-should-class-own-or-observe-its-dependencies/'>C++: Should class own or observe its dependencies</a></li><li class="list-group-item"><a href='../java-explicit-call-to-finalize-method-in-java/'>Java &#8211; Explicit call to finalize() method in Java</a></li><li class="list-group-item"><a href='../java-why-arent-java-objects-deleted-immediately-after-they-are-no-longer-referenced/'>Java &#8211; Why aren&#8217;t Java objects deleted immediately after they are no longer referenced</a></li><li class="list-group-item"><a href='../object-oriented-c-gof-design-patterns-heavily-depends-on-new-or-shared_ptr/'>Object-oriented &#8211; C++ Gof Design Patterns heavily depends on new or shared_ptr</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>