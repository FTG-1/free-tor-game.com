<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Should repository have a method for every specific database operation &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084913 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084913" class="post-1084913 software type-software status-publish hentry category-software tag-design-patterns tag-patterns-and-practices tag-repository"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Should repository have a method for every specific database operation</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span><span class="mr-2 badge badge-info">patterns-and-practices</span><span class="mr-2 badge badge-warning">repository</span></p><div class="entry-content"><p>When following the standard service and repository patterns, should your repository contain a specific method for every database operation or should you just use the general methods, e.g. update? Take for example the following service method:</p><pre><code>DisableUser(User user) {
    user.enabled = false;
    userRepo.update(user); // General user update method
}
</code></pre><p>This performs its changes on the user record, then requests the repo update the database by calling the general user update method.</p><p>Or should it be more specific, like:</p><pre><code>DisableUser(User user) {
    userRepo.disable(user); // Specific operation, matching the service
}
</code></pre><p>Obviously this is a very simple example but I feel the conclusion affects the way I move forward with repository&#39;s in general and this same logic applies to many scenarios.</p><p>What further confuses me is that in the first case using the standard update method may be seen as inefficient, because it may update every column on the record, but I happen to be using Entity Framework so it will take care of checking what fields have changed and only updating the changed field for me. But should I be making that assumption from my service?</p><p>If I were to write an alternate plain sql implementation of the repository id have to update all fields there, or implement field change detection myself. So that part leans me towards the specific implementation, but with that I&#39;m adding a lot more methods and perhaps it feels a bit unnecessary.</p><p>So in a nutshell, should your repo just have the standard methods, update, insert, findById, findAll, delete. Or should it have a method for every specific database operation, like stored procedures.</p><p>There&#39;s probably several other considerations that I&#39;m not grasping. Any advice would be appreciated.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>To provide a different perspective than the already existing answer I would say that <em>it depends</em>.</p><p>The generic one is more reusable, but the domain-specific one signals intent and better separates your domain model from the choice of persistance. If you do</p><p><code>var user = repo.GetUser(id);
user.Enabled = false;
repo.Update(user); </code></p><p>Then the repo has no real idea what it is doing (which can be a good thing from the reusability perspective). But you have also lost the possibility of remembering the intent of the operation.</p><p>If you do the domain-specific one:</p><p><code> repo.DisableUser(id); </code></p><p>First of all, maybe you can implement your repository more efficiently. You might not need to get the user to disable him - maybe you can just do an <code>UPDATE</code> and be done with it. Also, you <em>know</em> what you are doing, so you could choose to also add a good log message in an audit log or something similiar at the repository level. While you could still do audit logging with the more generic version you would get a generic &#34;customer updated&#34; entry instead of a domain specific &#34;customer disabled&#34; entry. This can in many cases be very nice and valuable.</p><p>This is more work though, which is why in general people will go with the generic solution because it is more generic and easier to implement. But dont disregard the domain-specific repository as unusable or bad, the answer is always <em>it depends</em>.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../web-development-do-you-still-need-created_by-and-updated_by-attributes-with-dedicated-auditing/'>Web-development &#8211; Do you still need created_by and updated_by attributes with dedicated auditing</a></li><li class="list-group-item"><a href='../c-what-kind-of-base-for-decorator-interface-abstract-class-non-abstract/'>C++ &#8211; What kind of base for Decorator: interface, abstract class, non-abstract</a></li><li class="list-group-item"><a href='../object-oriented-calling-a-service-method-from-another-service-method/'>Object-oriented &#8211; Calling a service method from another service method</a></li><li class="list-group-item"><a href='../java-service-layer-with-dto/'>Java &#8211; Service layer with DTO</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>