<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Unit-testing &#8211; Determining what is a useful unit test &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073336 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073336" class="post-1073336 software type-software status-publish hentry category-software tag-unit-testing"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Unit-testing &#8211; Determining what is a useful unit test</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">unit testing</span></p><div class="entry-content"><p>I&#39;ve been going through phpunit&#39;s docs and came accross the following quote:</p><blockquote><p>You can always write more tests. However, you will quickly find that only a fraction of the tests you can imagine are actually useful. What you want is to write tests that fail even though you think they should work, or tests that succeed even though you think they should fail. Another way to think of it is in cost/benefit terms. You want to write tests that will pay you back with information.<br /> &#8211;Erich Gamma</p></blockquote><p>It got me wondering. How do you determine what makes a unit test more useful than another, aside from what&#39;s stated in that quote about cost/benefit. How do you go about deciding which piece of your code you create unit tests for? I&#39;m asking that because another of those quotes also said:</p><blockquote><p>So if it&#39;s not about testing, what&#39;s it about?<br /> It&#39;s about figuring out what you are trying to do before you run off half-cocked to try to do it. You write a specification that nails down a small aspect of behaviour in a concise, unambiguous, and executable form. It&#39;s that simple. Does that mean you write tests? No. It means you write specifications of what your code will have to do. It means you specify the behaviour of your code ahead of time. But not far ahead of time. In fact, just before you write the code is best because that&#39;s when you have as much information at hand as you will up to that point. Like well done TDD, you work in tiny increments&#8230; specifying one small aspect of behaviour at a time, then implementing it.<br /> When you realize that it&#39;s all about specifying behaviour and not writing tests, your point of view shifts. Suddenly the idea of having a Test class for each of your production classes is ridiculously limiting. And the thought of testing each of your methods with its own test method (in a 1-1 relationship) will be laughable.<br /> &#8211;Dave Astels</p></blockquote><p>The important section of that is</p><blockquote><p>*<em>And the thought of testing each of your methods with its own test method (in a 1-1 relationship) will be laughable. *</em></p></blockquote><p>So if creating a test for each method is &#39;laughable&#39;, how/when do you chose what you write tests for?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>How many tests per method?</h2><p>Well the theoretical and highly impractical maximum is the <a href="http://portal.acm.org/citation.cfm?id=42379">N-Path complexity</a> (assume the tests all cover different ways through the code ;)). <strong>The minimum is ONE!.</strong> Per <strong>public</strong> method that is, he don&#39;t test implementation details, only external behaviors of a class (return values &amp; calling other objects).</p><p>You quote:</p><blockquote><p>*And the thought of testing each of your methods with its own test method (in a 1-1 relationship) will be laughable. *</p></blockquote><p>and then ask:</p><blockquote><p>So if creating a test for each method is &#39;laughable&#39;, how/when do you chose what you write tests for?</p></blockquote><p>But i think you misunderstood the author here:</p><p>The idea of having <code>one test method</code> per <code>one method in the class to test</code> is what the author calls &#34;laughable&#34;.</p><p><strong>(For me at least) It&#39;s not about about &#39;less&#39; it&#39;s about &#39;more&#39;</strong></p><p>So let me rephrase like i understood him:</p><p>And the thought of testing each of your methods with <strong>ONLY ONE METHOD</strong> (its own test method in a 1-1 relationship) will be laughable.</p><p>To quote your quote again:</p><blockquote><p>When you realize that it&#39;s all about specifying behaviour and not writing tests, your point of view shifts.</p></blockquote><hr/><h2>When you practice TDD you <strong>don&#39;t think</strong>:</h2><p>I have a method <code>calculateX($a, $b);</code> and it needs a test <code>testCalculcateX</code> that tests EVERYTHING about the method.</p><h2>What TDD tells you is to think about <strong>what your code SHOULD DO</strong> like:</h2><p>I need to calculate the bigger of two values (<strong>first test case!</strong>) but if $a is smaller than zero then it should produce an error (<strong>second test case!</strong>) and if $b is smaller than zero it should .... (<strong>third test case!</strong>) and so on.</p><hr/><p>You want to test behaviors, not just single methods without context.</p><p>That way you get a test suite that is documentation for your code and REALLY explains what it is expected to do, maybe even why :)</p><hr/><h2>How do you go about deciding which piece of your code you create unit tests for?</h2><p>Well everything that ends up in the repository or anywhere near production needs a test. I don&#39;t think the author of your quotes would disagree with that as i tried to state in the above.</p><p>If you don&#39;t have a test for it it gets way harder (more expensive) to change the code, especially if it&#39;s not you making the change.</p><p>TDD is a way to ensure that you have tests for EVERYTHING but as long as you WRITE the tests it&#39;s fine. Usually writing them on the same day helps since you are not going to do it later, are you? :)</p><hr/><hr/><h2>Response to comments:</h2><blockquote><p>a decent amount of methods can&#39;t be tested within a particular context because they either depend or are dependent upon other methods</p></blockquote><p>Well there are three thing those methods can call:</p><p><strong>Public methods of other classes</strong></p><p>We can mock out other classes so we have defined state there. We are in control of the context so thats not a problem there.</p><p>*<em>Protected or Private methods on the same *</em></p><p>Anything that isn&#39;t part of the public API of a class doesn&#39;t get tested directly, usually.</p><p>You want to test behavior and not implementation and if a class does all it&#39;s work in one big public method or in many smaller protected methods that get called is <strong>implementation</strong>. You want to be able to CHANGE those protected methods WITHOUT touching your tests. Because your tests will break if your code changes change behavior! Thats what your tests are there for, to tell you when you break something :)</p><p><strong>Public methods on the same class</strong></p><p>That doesn&#39;t happen very often does it? And if it does like in the following example there are a few ways of handling this:</p><pre><code>$stuff = new Stuff();
$stuff-&gt;setBla(12);
$stuff-&gt;setFoo(14);
$stuff-&gt;execute(); 
</code></pre><p>That the setters exist and are not part of the execute method signature is another topic ;)</p><p>What we can test here is if executes does blow up when we set the wrong values. That <code>setBla</code> throws an exception when you pass a string can be tested separately but if we want to test that those two allowed values (12 &amp; 14) don&#39;t work TOGETHER (for whatever reason) than thats one test case.</p><p>If you want a &#34;good&#34; test suite you can, in php, maybe(!) add a <code>@covers Stuff::execute</code> annotation to make sure you only generate code coverage for this method and the other stuff that is just setup needs to be tested separately (again, if you want that).</p><p><strong>So the point is:</strong> Maybe you need to create some of the surrounding world first but you should be able to write meaningful test cases that usually only span one or maybe two real functions (setters don&#39;t count here). The rest can be ether mocked away or be tested first and then relied upon (see <code>@depends</code>)</p><hr/><p>*Note: The question was migrated from SO and initially was about PHP/PHPUnit, thats why the sample code and references are from the php world, i think this is also applicable to other languages as phpunit doesn&#39;t differ that much from other xUnit testing frameworks.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../unit-testing-should-each-unit-test-be-able-to-be-run-independently-of-other-tests/'>Unit-testing &#8211; Should each unit test be able to be run independently of other tests</a></li><li class="list-group-item"><a href='../c-unit-testing-c-what-to-test/'>C++ &#8211; Unit testing C++: What to test</a></li><li class="list-group-item"><a href='../unit-testing-how-to-detect-dependency-problems-with-unit-tests-when-you-use-mock-objects/'>Unit-testing &#8211; How to detect dependency problems with unit tests when you use mock objects</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>