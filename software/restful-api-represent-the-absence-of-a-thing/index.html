<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>RESTful API represent the absence of a thing &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1073436 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1073436" class="post-1073436 software type-software status-publish hentry category-software tag-rest"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">RESTful API represent the absence of a thing</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">rest</span></p><div class="entry-content"><p>Imagine an API to identify whether a person has selected their spirit animal. They can only have zero or one spirit animals.</p><p>Currently:</p><p><code>/person/{id}/selectedSpiritAnimal</code></p><p>when they have selected an animal returns http 200 and <code>{selectedAnimal:mole}</code></p><p>but when they have no selection it returns http 404.</p><p>This makes my spirit animal unhappy as we&#39;re representing a valid domain concern &#8211; having not yet selected a spirit animal &#8211; as an HTTP error.</p><p>Plus, as a business &#8211; erm Sprit-Animal-Hampers-R-us &#8211; we want to know when someone has no selection so we can prompt them.</p><p>What&#39;s a better response here:</p><p>HTTP 200 and <code>{selectedAnimal:null}</code></p><p>or even more explicit</p><p>HTTP 200 and <code>{selectedAnimal:null, spiritAnimalSelected: false}</code></p><p>Or is it better to return a 404? Since much like <code>this image has not yet been uploaded</code> when viewing an image online would be a 404. <code>this person has not selected a spirit animal</code> might be a 404</p><hr/><p><a href="https://softwareengineering.stackexchange.com/questions/341732/should-http-status-codes-be-used-to-represent-business-logic-errors-on-a-server">This question</a> has been proposed as a duplicate but that question addresses an otherwise valid URL being requested when the application has been configured to not allow the change that URL represents.</p><p>Whereas here I&#39;m looking at how one represents a resource where the absence of the resource is meaningful. I.e. it is valid for the client to request the URL and the response is you have successfully requested the resource which represents an absence of a thing.</p><p>So this isn&#39;t &#39;business logic&#39; but rather a circumstance where the absence of a thing has meaning (it may be as many of my colleagues are arguing that 404 is still correct) but I&#39;m not sure how to map that to the spec.</p><hr/><p>Very difficult to pick an answer. I&#39;ve changed my mind multiple times over the conversation here and the one ongoing at work.</p><p>The thing that settles it for me here is that <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4" rel="noreferrer">the spec says that a 4xx is when the client has erred</a>. In this instance the client has been told to expect a response from the selectedSpiritAnimal url so has not erred.</p><p>The consensus amongst my colleagues is that this is a symptom of a bad API design</p><p>It would probably be better that we simply request /person/{id} and that returns a set of link relations for the person&#8230; then if you aren&#39;t given the /selectedSpiritAnimal link (when a person has no selection) but you call it anyway then a 404 makes sense. Or that you implement partial responses and let /person/{id} return a more full document unless the client requests a subset of the data</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>HTTP 4xx codes are probably not the right choice for this scenario. You state that having zero spirit animals is a valid state, and the API route <code>person/{id}/selectedSpiritAnimal</code> will account for whether person <code>id</code> does or does not have one.</p><p>HTTP 4xx responses are reserved for the situation when a client has done something incorrect in the request (see <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4" rel="noreferrer">w3&#39;s archive of the original spec</a>). But the client is making a valid request, whether or not person <code>id</code> has a spirit animal.</p><p>So I lean toward the second solutions using a properly formatted JSON body in the response and an HTTP 2xx code.</p><p>Now if you get such a request and it turns out person <code>id</code> does not exist, a 4xx code makes more sense.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../rest-invalid-operation-status-code-in-a-hateoas-rest-api/'>Rest &#8211; &#8220;Invalid operation&#8221; status code in a HATEOAS REST API</a></li><li class="list-group-item"><a href='../rest-should-an-http-api-always-return-a-body/'>Rest &#8211; Should an HTTP API always return a body</a></li><li class="list-group-item"><a href='../restful-api-send-email-with-links-to-client-url/'>RESTful Api: Send email with links to client URL</a></li><li class="list-group-item"><a href='../rest-json-api-specification-when-do-i-need-to-return-a-404-not-found/'>Rest &#8211; JSON API specification : When do I need to return a 404 not found</a></li><li class="list-group-item"><a href='../rest-mvc-and-restful-api-service/'>Rest &#8211; MVC and RESTful API service</a></li><li class="list-group-item"><a href='../rest-handling-token-renewal-session-expiration-in-a-restful-api/'>Rest &#8211; Handling token renewal / session expiration in a RESTful API</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>