<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design &#8211; Who should read Exception.Message if at all &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1075582 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1075582" class="post-1075582 software type-software status-publish hentry category-software tag-design tag-exceptions"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design &#8211; Who should read Exception.Message if at all</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design</span><span class="mr-2 badge badge-info">exceptions</span></p><div class="entry-content"><p>When designing exceptions should I write messages that a user or a developer should understand? Who should actually be the reader of exception messages?</p><p>I find exception messages aren&#39;t useful at all and I always have a hard time writing them. By convention the type of the exception should already tell us why something didn&#39;t work and custom properties might add even more information like file names, indexes, keys etc. so why repeating it in the message itself? An autogenerated message could also do and all what it had to contain is the name of the exception with a list of additional properties. This would be exactly as useful as a handwritten text.</p><p>Wouldn&#39;t it be better to not write messages at all but instead have special exception renderers that takes care of creating meaningful messages maybe in different languages rather then hardcoding them in code?</p><hr/><p>I&#39;ve been asked whether either of those questions provide an answer to my question:</p><ul><li><a href="https://softwareengineering.stackexchange.com/questions/29433/how-to-write-a-good-exception-message">How to write a good exception message</a></li><li><a href="https://softwareengineering.stackexchange.com/questions/278949/why-do-many-exception-messages-not-contain-useful-details">Why do many exception messages not contain useful details?</a></li></ul><p>I&#39;ve read them both and I wasn&#39;t happy with their answers. They talk about <em>users</em> in general and focus on the content of the message itself rather then on the addressee and it turns out there can be at least two of them: the end-user and the developer. I never know which one I should speak to when writing exception messages.</p><p>I even think that the famous message doesn&#39;t have any real value at all as it just repeats the name of the exception type in different words so why bother writing them at all? I can perfectly generate them automatically.</p><p>To me exception message lacks a differentiation of its readers. A <em>perfect</em> exception would need to provide at least two versions of the message: one for the end-user and one for the developer. Calling it just a message is too generic. A developer message should be then written in English but the end-user&#39;s message might need to be translated into other languages. It is not possible to achieve all this with only one message so an exception would need to provide some identifier to the end-user message that as I just said, might be available in different languages.</p><p>When I read all the other linked questions I get the impression that an exception message is indeed intended to be read by an end-user and not a developer&#8230; a single message is like to have a cake and eat it too.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><h2>Those messages are for other developers</h2><p>Those messages are <strong>expected to be read by developers</strong> to help them debug the application. This can take two forms:</p><ul><li><p>Active debugging. You&#39;re actually running a debugger while writing code and trying to figure out what happens. In this context, a helpful exception will guide you by making it easy to understand what&#39;s going wrong, or eventually suggesting a workaround (although this is optional).</p></li><li><p>Passive debugging. The code runs in production and fails. The exception is logged, but you only get the message and the stack trace. In this context, a helpful exception message will help you quickly localize the bug.</p><p>Since those messages are often logged, it also means that you shouldn&#39;t include sensitive information there (such as private keys or passwords, even if it could be useful to debug the app).</p></li></ul><p>For instance, <code>IOSecurityException</code> type of an exception thrown when writing a file is not very explicit about the problem: is it because we don&#39;t have permissions to access a file? Or maybe we can read it, but not write? Or maybe the file doesn&#39;t exist and we don&#39;t have permissions to create files there? Or maybe it&#39;s locked (hopefully, the type of the exception will be different in this case, but in practice, types can sometimes be cryptic). Or maybe Code Access Security prevents us from doing any I/O operation?</p><p>Instead:</p><blockquote><p>IOSecurityException: the file was found but the permission to read its contents was denied.</p></blockquote><p>is much more explicit. Here, we immediately know that permissions on the directory are set correctly (otherwise, we won&#39;t be able to know that the file exists), but permissions at file level are problematic.</p><p>This also means that <strong>if you cannot provide any additional information which is not already in the type of the exception, you can keep the message empty.</strong> <code>DivisionByZeroException</code> is a good example where the message is redundant. On the other hand, the fact that most languages let you throw an exception without specifying its message is done for a different reason: either because the default message is already available, or because it will be generated <em>later</em> if needed (and the generation of this message is enclosed within the exception type, which makes perfect sense, <em>&#34;OOPly&#34;</em> speaking).</p><p>Note that for technical (often performance) reasons, some messages end up being much more cryptic than they should be. .NET&#39;s <code>NullReferenceException</code>:</p><blockquote><p>Object reference not set to an instance of an object.</p></blockquote><p>is an excellent example of a message which is not helpful. A helpful message would be:</p><blockquote><p>Object reference <code>product</code> not set to an instance of an object when called in <code>product.Price</code>.</p></blockquote><h2>Those messages are not for end users!</h2><p><strong>End users are not expected to see exception messages. Never.</strong> Although some developers end up showing those messages to the users, this leads to poor user experience and frustration. Messages such as:</p><blockquote><p>Object reference not set to an instance of an object.</p></blockquote><p>mean absolutely nothing to an end user, and should be avoided at all costs.</p><p>The worst case scenario is to have a global try/catch which throws the exception to the user and exits the app. An application which cares about its users:</p><ul><li><p>Handles exceptions in the first place. Most ones can be handled without disturbing the user. Network is down? Why not wait for a few seconds and try again?</p></li><li><p>Prevents a user from leading the application to an exceptional case. If you ask the user to enter two numbers and divide the first one by the second one, why would you let the user to enter zero in the second case in order to <em>blame</em> him a few seconds later? What about highlighting the text box in red (with a helpful tool tip telling that the number should be different than zero) and disabling the validation button until the field remains red?</p></li><li><p>Invites a user to perform an action in a form which is not an error. There are no enough permissions to access a file? Why not ask the user to grant administrative permissions, or pick a different file?</p></li><li><p>If nothing else works, shows a helpful, friendly error which is specifically written to reduce user&#39;s frustration, help the user to understand what went wrong and eventually solve the problem, and also help him prevent the error in the future (when applicable).</p><p>In your question, you suggested to have two messages in an exception: a technical one for developers, and the one for end users. While this is a valid suggestion in some minor cases, most exceptions are produced at a level where it is impossible to produce a meaningful message for the users. Take <code>DivisionByZeroException</code> and imagine that we couldn&#39;t prevent the exception from happening and can&#39;t handle it ourselves. When the division occurs, does the framework (since it&#39;s the framework, and not business code, which throws the exception) know what will be a helpful message for a user? Absolutely not:</p><blockquote><p>The division by zero occurred. [OK]</p></blockquote><p>Instead, one can let it throw the exception, and then catch it at a higher level where we knew the business context and could act accordingly in order to actually help the end user, thus showing something like:</p><blockquote><p>The field D13 cannot have the value identical to the one in field E6, because the subtraction of those values is used as a divisor. [OK]</p></blockquote><p>or maybe:</p><blockquote><p>The values reported by ATP service are inconsistent with the local data. This may be caused by the local data being out of sync. Would you like to synchronize the shipping information and retry? [Yes] [No]</p></blockquote></li></ul><h2>Those messages are not for parsing</h2><p>Exception messages are <strong>not expected to be parsed</strong> or used programmatically either. If you think that additional information can be needed by the caller, include it in the exception side by side with the message. This is important, because the message is subject to change without notice. Type is a part of the interface, but the message is not: <strong>never rely on it for exception handling.</strong></p><p>Imagine the exception message:</p><blockquote><p>Connecting to the caching sever timed out after waiting for 500 ms. Either increase the timeout or check the performance monitoring to identify a drop in server performance. The average wait time for caching server was 6 ms. for the last month, 4 ms. for the last week and 377 ms. for the last hour.</p></blockquote><p>You want to extract the “500”, “6”, “4” and “377” values. Think a bit about the approach you will use to do the parsing, and only then continue reading.</p><p>You have the idea? Great.</p><p>Now, the original developer discovered a typo:</p><pre><code>Connecting to the caching sever timed out after waiting [...]
</code></pre><p>should be:</p><pre><code>                            ↓
Connecting to the caching server timed out after waiting [...]
</code></pre><p>Moreover, the developer considers that month/week/one hour are not particularly relevant, so he also does an additional change:</p><blockquote><p>The average wait time for caching server was 6 ms. for the last month, 5 ms. <strong>for the last 24 hours</strong> and 377 ms. for the last hour.</p></blockquote><p>What happens with your parsing?</p><p>Instead of parsing, you could be using exception properties (which can contain whatever one wants, as soon as the data can be serialized):</p><pre class="lang-js prettyprint-override"><code>{
    message: &#34;Connecting to the caching [...]&#34;,
    properties: {
        &#34;timeout&#34;: 500,
        &#34;statistics&#34;: [
            { &#34;timespan&#34;: 1, &#34;unit&#34;: &#34;month&#34;, &#34;average-timeout&#34;: 6 },
            { &#34;timespan&#34;: 7, &#34;unit&#34;: &#34;day&#34;, &#34;average-timeout&#34;: 4 },
            { &#34;timespan&#34;: 1, &#34;unit&#34;: &#34;hour&#34;, &#34;average-timeout&#34;: 377 },
        ]
    }
}
</code></pre><p>How easy is to use this data now?</p><p>Sometimes (such as within .NET), the message can even be translated into user&#39;s language (IMHO, translating those messages is absolutely wrong, since any developer is expected to be able to read in English). Parsing such messages is close to impossible.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-to-write-a-good-exception-message/'>How to write a good exception message</a></li><li class="list-group-item"><a href='../c-why-do-many-exception-messages-not-contain-useful-details/'>C# &#8211; Why do many exception messages not contain useful details</a></li><li class="list-group-item"><a href='../python-exception-handling-in-python-am-i-doing-this-wrong-and-why/'>Python &#8211; Exception handling in Python &#8211; Am I doing this wrong (and why?)</a></li><li class="list-group-item"><a href='../should-i-localize-exception-messages/'>Should I localize exception messages</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>