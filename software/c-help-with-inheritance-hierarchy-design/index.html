<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Help with inheritance hierarchy design &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1085299 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1085299" class="post-1085299 software type-software status-publish hentry category-software tag-c tag-design-patterns tag-inheritance"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Help with inheritance hierarchy design</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">design-patterns</span><span class="mr-2 badge badge-warning">inheritance</span></p><div class="entry-content"><p>I&#39;m having trouble designing an inheritance hierarchy.</p><p>In the figure:</p><p><strong>Base class:</strong></p><ul><li>This uses the Template Method.</li><li>Contains core logic/algorithm that<br /> calls virtual/abstract methods</li></ul><p><strong>Derived types:</strong></p><ul><li>These classes provides concrete implementation of the virtual/abstract methods expected by the Base.</li></ul><p><strong>Conditions:</strong></p><ol><li>I have a virtual method (Run).</li><li>The default Run method uses another virtual method (Proc).</li><li>If a derived class uses the default Run behaviour, they must implement Proc.</li><li>If a derived class overrides the Run behaviour, then it shouldn&#39;t have to care about the existence of Proc, let alone overriding it.</li></ol><p><img src="../../../i.stack.imgur.com/fPlc6.png" alt="enter image description here"/></p><p>I&#39;ve considered making Run() abstract and let each derived class handle their own.<br /> But then I&#39;ll end up with duplicate code.</p><p><img src="../../../i.stack.imgur.com/kJ5Gp.png" alt="enter image description here"/></p><p>I&#39;m using a simplified example here.</p><p>In my actual project, I have several &#34;Run&#34;-typed virtual methods, each calling several &#34;Proc&#34;-typed methods.</p><p>Because of that, I have a whole bunch of virtual &#34;Proc&#34; methods with &#34;throw new NotImplementedException()&#34;</p><p>Creating a new derived type is also confusing, because the coder may not know which virtual methods must be implemented/can be ignored/etc.</p><p>I&#39;ve considered using a strategy pattern, but since I have several &#34;Run&#34; methods, each one of those would have to be a strategy, which seems like overkill/overengineering.</p><p><img src="../../../i.stack.imgur.com/IWsqE.png" alt="enter image description here"/></p><p>Is there any way to simplify this?</p><hr/><p><strong>[Update 1]</strong></p><p>Here&#39;s an example that&#39;s closer to the kind of methods I&#39;m working with</p><p><img src="../../../i.stack.imgur.com/rsuoV.png" alt="enter image description here"/></p><p>And imagine yet another method:</p><p><img src="../../../i.stack.imgur.com/QXu3b.png" alt="enter image description here"/></p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You have created your own, unnecessary problem here.</p><ol><li>Everything must be <strong>runnable</strong></li><li>The default implementation of <strong>run</strong> requires <strong>proc</strong></li><li>Anybody implementing their own <strong>run</strong> can ignore <strong>proc</strong> (but all that useless code still adorns the class and any descendants).</li><li>Your concrete, exception-throwing implementation of <strong>proc</strong> <em>enables</em> people to set up themselves up for runtime errors.  Why do that?</li></ol><p>OK, so you wanted to be helpful by providing a default implementation but you have bolted on implementation details which you <em>know</em> will not always be desired.  You say you want to avoid code duplication but you have encumbered your hierarchy with code which will be obsolete as soon as somebody extends it.</p><p>I would strongly urge you to go the interface/abstract-base-class route here:</p><ol><li>Abstract base class <strong>runnable</strong></li><li>Abstract base class <strong>proccer</strong></li><li>Create proc-calling concrete implementation of <strong>runnable</strong>.</li><li>Wherever possible (even in <strong>proc-caller</strong> class methods) refer to <strong>runnables</strong> and not <strong>proc-callers</strong>).</li></ol><p>So your default <strong>run</strong> implentation can be used where desired but can be dropped without penalty.  Also, this way people are forced to implement <strong>proc</strong> if they mix in <strong>proc-caller</strong> but you don&#39;t have to write that &#34;Not implemented&#34; version of <strong>proc</strong> - they can&#39;t compile their code if they do not implement <strong>proc</strong>.  Why create that runtime trap when you can require them to fix things at compile time?</p><p>If you think there are other useful behaviours which should be available, you can avoid code duplication by providing &#34;interfaces&#34; in the same way I have shown for <strong>proc</strong>.  Anybody who wants that can mix it in.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-derived-class-method-naming/'>C# &#8211; Derived Class Method Naming</a></li><li class="list-group-item"><a href='../c-why-override-a-static-method-of-an-abstract-base-class/'>C# &#8211; Why override a static method of an abstract base class</a></li><li class="list-group-item"><a href='../object-oriented-avoiding-instanceof-vs-abstract-god-class-do-i-have-an-alternative/'>Object-oriented &#8211; Avoiding instanceof vs abstract God Class. Do I have an alternative</a></li><li class="list-group-item"><a href='../java-designing-generic-type-inheritance-hierarchy/'>Java &#8211; Designing generic type inheritance hierarchy</a></li><li class="list-group-item"><a href='../c-never-make-public-members-virtual-abstract-really/'>C# &#8211; Never make public members virtual/abstract &#8211; really</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>