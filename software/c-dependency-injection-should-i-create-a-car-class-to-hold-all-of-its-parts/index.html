<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C++ &#8211; Dependency Injection: Should I create a Car class to hold all of its parts &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1081901 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1081901" class="post-1081901 software type-software status-publish hentry category-software tag-c tag-dependency-injection"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C++ &#8211; Dependency Injection: Should I create a Car class to hold all of its parts</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">dependency-injection</span></p><div class="entry-content"><p>I have many cars in my C++ application all contained withing a RaceTrack.</p><p>Each car consists of hundreds of parts. Each part depends on some other part or two.</p><p>I&#39;ve read a lot of SO questions on DI and Mark Seemann&#39;s book and it looks like I should not define a Car class just to hold car parts because all car parts will depend on each other and this soup of parts is a car. Am I right?</p><p>So when I place all of my racing cars into the RaceTrack there will be no car entities but a lot of car parts depending on each other racing on track?? Am I right?</p><p>EDIT:</p><p>For ages I was programming Car classes because it was obvious for me that I need a Car class if I am programming a car logic. But with DI it is not so obvious to me. Still wondering is it an idiomatic for DI not to create a Car class if I have no defined role for it?</p><p>I mean is it okay to have a SteeringWheel for driving, BoltsAndNuts on wheels for pit crew and all sorts of other funny interfaces without having an instance that represents a car as a whole?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>What good are a bunch of car parts sitting on a race track doing anyone?</p><p>If all your car class does is hold car parts it&#39;s as useful as a wet bag of parts.</p><h2>Usage</h2><p>As the driver, what I want is something I can control.  That responds when I ask for speed.  That handles like its on rails. That can stop on a dime.</p><p>What I want is a car class that is usable.  That I can tell to do things without having to think about how the carburetor works. I just think about the gas pedal. How those are connected isn&#39;t something I worry about. That&#39;s abstraction.</p><h2>Dependency Injection</h2><p><a href="https://en.wikipedia.org/wiki/Dependency_injection" rel="nofollow noreferrer">Dependency injection</a> has nothing to do with that. When I&#39;m driving the car I&#39;m not thinking about how it was built. As long as it works, I don&#39;t care how they put it together.</p><p>No, DI is what lets my pit crew quickly swap out my tires for better ones when it starts raining on the track. It&#39;s nice to be able to do that without having to hop into a completely different car.</p><p>DI is really about following a principle: <a href="http://www.netobjectives.net/files/books/esad/essential-skills-separate-use-from-construction.pdf" rel="nofollow noreferrer">Separate use from construction</a>.</p><p>A car that can install new tires at 90 miles an hour might sound cool but I don&#39;t think it&#39;s going to win any races with a tire installing contraption on it.</p><p>DI is about installing your parts in a way that let&#39;s your pit crew get to them.  When you use <code>new</code> in the same place you program behavior it&#39;s like you&#39;re welding the carburetor into place.  Sure an acetylene torch could remove it but please consider using nuts and bolts first.</p><p>That&#39;s what DI is.  Sure it&#39;s not as easy as <code>new</code>ing up something as soon as you realize you want it. Instead you have to write separate code that knows how to build your car. But it sure makes it easier to change things later. And it means you don&#39;t have to drag a car assembly plant around the track with you.</p><h2>Construction</h2><p>Something, somewhere, has to know if the tires are Goodyear. Where then to put the car construction code? If not the car then the pit crew? No. The track? No. All of those have behavior code. Code that must perform during the race.  Constructing the car should happen before the race in a place removed from behavior code. Mark Seemans called this place the <a href="http://blog.ploeh.dk/2011/07/28/CompositionRoot/" rel="nofollow noreferrer">Composition Root</a>. Most people call it main.</p><p>It&#39;s a simple pattern. In main, construct the object graph then call one behavioral method on one object in the object graph. That&#39;s it. This is the <strong>ONLY</strong> place construction and behavior have to be together.</p><p>That doesn&#39;t mean construction has to be a pile of procedural code all laid out sequentially in main. You are free to use every tool in the language to do construction. Just don&#39;t mix it with behavior.</p><p>Doing this in the language and not using some DI framework or IoC container is called <a href="http://blog.ploeh.dk/2014/06/10/pure-di/" rel="nofollow noreferrer">pure DI</a>. It works very well. Has for a long time. We used to just call it <a href="http://www.jamesshore.com/Blog/Dependency-Injection-Demystified.html" rel="nofollow noreferrer">reference passing</a>.</p><h2>DI tools</h2><p>What a DI tool buys you is the construction details moved into a different language (xml, json, whatever) that enforces the separation between construction and behavior. If you don&#39;t trust your fellow programmers not to use <code>new</code> when they shouldn&#39;t that can be appealing.</p><p>The draw back is that it&#39;s tempting to let the DI tool details spread throughout the code base. Sometimes infecting the code base with proprietary annotations. The examples they provide certainly encourage this.  The tool tends to move into the language space until you can&#39;t just advertise the job as a Java programming job but as a Java/Spring programming job.</p><h2>Design Principles</h2><blockquote><p>For ages I was programming Car classes because it was obvious for me that I need a Car class if I am programming a car logic. But with DI it is not so obvious to me. Still wondering is it an idiomatic for DI not to create a Car class if I have no defined role for it?</p></blockquote><p>I think you&#39;re learning about abstraction and changing how you decide a class is needed. That&#39;s good. But that&#39;s not about DI. DI doesn&#39;t help you decide if you need a car class. DI helps you keep the car from knowing, and therefor caring, if the tires are Goodyear tires. DI helps you keep the track from knowing if the cars are made in Japan.</p><p>One of the most fundamental questions in software design is
&#34;what knows about what?&#34; That&#39;s the main thing a UML diagram shows you. When you new up something you&#39;re reaching past it&#39;s interface to the concrete thing that you&#39;re now tied to. The car now has to know that the tires are Goodyear. Which kinda sucks if Michelin want&#39;s to sponsor you.</p><p>Avoiding doing that is called following the <a href="https://en.wikipedia.org/wiki/Dependency_inversion_principle" rel="nofollow noreferrer">dependency inversion principle</a>. Formally, a high level module (like the car class) should not directly depend on low level modules (like the GoodyearTire class). It should depend on an abstraction (like a Tire interface).</p><p>A way to avoid doing that is called <a href="https://en.wikipedia.org/wiki/Inversion_of_control" rel="nofollow noreferrer">Inversion of control</a>.  Here the emphasis is on changing the flow of control.  Do the tires move the car or does the car move the tires? Thinking about this the right way allows us to not statically couple the car and tires together. DI is one particular way to follow Inversion of Control.</p><p>None of this tells you if you need a car class.  If you&#39;re programming &#34;car logic&#34; it&#39;s nice if there is one place to keep it rather then scattering it every where. Just don&#39;t be fooled into thinking car construction logic is the same as car behavior logic so it all has to live in the same place.  But if you have no defined roll for a car then you don&#39;t need either. Race motorcycles around the track if you like.</p><blockquote><p>I mean is it okay to have a SteeringWheel for driving, BoltsAndNuts on wheels for pit crew and all sorts of other funny interfaces without having an instance that represents a car as a whole?</p></blockquote><p>DI or no DI, it&#39;s fine to have an instance that represents a car as a whole, but that instance isn&#39;t something I want to know about directly if I don&#39;t have to.  Give me a car abstraction so I don&#39;t have to care if it runs on gas, diesel, or electricity when I use it. That&#39;s only something I should care about when I&#39;m building it or maintaining it. It&#39;s nice if the code that uses car doesn&#39;t have to know or care how it works. &#34;I don&#39;t know. I don&#39;t want to know.&#34;</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../c-how-to-avoid-writing-lots-of-pass-through-functions-in-a-wrapper/'>C++ &#8211; How to avoid writing lots of pass-through functions in a wrapper</a></li><li class="list-group-item"><a href='../c-should-class-own-or-observe-its-dependencies/'>C++: Should class own or observe its dependencies</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>