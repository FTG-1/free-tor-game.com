<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Is Double Dispatch an anti pattern &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1086316 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1086316" class="post-1086316 software type-software status-publish hentry category-software tag-c tag-domain-driven-design"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Is Double Dispatch an anti pattern</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">domain-driven-design</span></p><div class="entry-content"><p>Please see the link here: <a href="https://lostechies.com/derekgreer/2010/04/19/double-dispatch-is-a-code-smell/" rel="nofollow noreferrer">https://lostechies.com/derekgreer/2010/04/19/double-dispatch-is-a-code-smell/</a>, which describes Double Dispatch as a code smell.  Now see this link: <a href="https://lostechies.com/jimmybogard/2010/03/30/strengthening-your-domain-the-double-dispatch-pattern/" rel="nofollow noreferrer">https://lostechies.com/jimmybogard/2010/03/30/strengthening-your-domain-the-double-dispatch-pattern/</a>, which talks about double dispatch strenghtening the domain.  The same author of the second link (who believes in Double Despatch) wrote the code here: <a href="https://github.com/jbogard/presentations/blob/master/WickedDomainModels/After/Model/Member.cs" rel="nofollow noreferrer">https://github.com/jbogard/presentations/blob/master/WickedDomainModels/After/Model/Member.cs</a> and specifically this (which I believe is the Double Despatch pattern):</p><pre><code>public Offer AssignOffer(OfferType offerType, IOfferValueCalculator valueCalculator) 
{ 
    DateTime dateExpiring = offerType.CalculateExpirationDate(); 
    int value = valueCalculator.CalculateValue(this, offerType); 
    var offer = new Offer(this, offerType, dateExpiring, value); 
    _assignedOffers.Add(offer); 
    NumberOfActiveOffers++; 
    return offer; 
} 
</code></pre><p>From what I can understand; the first author is saying that double despatch is an anti pattern because it violates SOLID principles.  However, I believe the SOLID principles are violated in his code because of the way he has designed the classes; not specifically because of Double despatch.  I also notice that the two articles were written within one month of each other in 2010.</p><p>Is Double Dispatch an anti pattern?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>No, double dispatch is not an antipattern, it is a perfectly valid technique.</p><p>What the article describes is <a href="https://en.wikipedia.org/wiki/Expression_problem" rel="noreferrer">the expression problem</a>. You want to be able to add new shapes <em>and</em> new drawing surfaces without violating the open/closed principle. Double dispatch is a possible <em>solution</em> to this problem. But it <em>is</em> possible to use it in such a way that it violates the open/closed principle, e.g. if you require each shape to have a draw method for each surface, then you would have to modify all shapes when adding a new drawing surface. If for some reason you want to avoid that, you could solve it by having some rendering adapters between the shapes and the surfaces, and use double dispatch to invoke the correct adapter.</p><p>In any case, even if some technique is in violation of the open/closed principle or SOLID in general, that does not make it an antipattern. SOLID is not an absolute good, it is just a set of guidelines (grouped under a catchy name) which are context-dependent and have limited applicability.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-inheritance-using-non-abstract-base-class/'>Object-oriented &#8211; Inheritance using non-abstract base class</a></li><li class="list-group-item"><a href='../c-service-locator-anti-pattern-alternative/'>C# &#8211; Service-locator anti-pattern alternative</a></li><li class="list-group-item"><a href='../c-microservice-and-anti-pattern/'>C# &#8211; Microservice and anti-pattern</a></li><li class="list-group-item"><a href='../c-the-best-way-to-apprach-validation-from-the-perspective-of-a-ddd-purist/'>C# &#8211;  the &#8220;best&#8221; way to apprach validation from the perspective of a DDD purist</a></li><li class="list-group-item"><a href='../c-is-it-acceptable-for-a-domain-entity-to-implement-an-interface/'>C# &#8211; Is it acceptable for a Domain Entity to implement an interface</a></li><li class="list-group-item"><a href='../c-generic-repository-pattern-ef-and-unit-of-work/'>C# &#8211; Generic repository pattern +EF and unit of work</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>