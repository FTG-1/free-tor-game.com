<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Why use Either over (checked) Exception &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1071176 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1071176" class="post-1071176 software type-software status-publish hentry category-software tag-coding-style tag-either tag-exceptions tag-scala"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Why use Either over (checked) Exception</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">coding-style</span><span class="mr-2 badge badge-info">either</span><span class="mr-2 badge badge-warning">exceptions</span><span class="mr-2 badge badge-primary">scala</span></p><div class="entry-content"><p>Not too long ago I started using Scala instead of Java. Part of the &#34;conversion&#34; process between the languages for me was learning to use <code>Either</code>s instead of (checked) <code>Exception</code>s. I&#39;ve been coding this way for a while, but recently I started wondering if that&#39;s really a better way to go.</p><p>One major advantage <code>Either</code> has over <code>Exception</code> is better performance; an <code>Exception</code> needs to build a stack-trace and is being thrown. As far as I understand, though, throwing the <code>Exception</code> isn&#39;t the demanding part, but building the stack-trace is.</p><p>But then, one can always construct/inherit <code>Exception</code>s with <code>scala.util.control.NoStackTrace</code>, and even more so, I see plenty of cases where the left side of an <code>Either</code> is in fact an <code>Exception</code> (forgoing the performance boost).</p><p>One other advantage <code>Either</code> has is compiler-safety; the Scala compiler won&#39;t complain about non-handled <code>Exception</code>s (unlike the Java&#39;s compiler). But if I&#39;m not mistaken, this decision is reasoned with the same reasoning that is being discussed in this topic, so&#8230;</p><p>In terms of syntax, I feel like <code>Exception</code>-style is way clearer. Examine the following code blocks (both achieving the same functionality):</p><p><code>Either</code> style:</p><pre class="lang-scala prettyprint-override"><code>def compute(): Either[String, Int] = {

    val aEither: Either[String, String] = if (someCondition) Right(&#34;good&#34;) else Left(&#34;bad&#34;)

    val bEithers: Iterable[Either[String, Int]] = someSeq.map {
        item =&gt; if (someCondition(item)) Right(item.toInt) else Left(&#34;bad&#34;)
    }

    for {
        a &lt;- aEither.right
        bs &lt;- reduce(bEithers).right
        ignore &lt;- validate(bs).right
    } yield compute(a, bs)
}

def reduce[A,B](eithers: Iterable[Either[A,B]]): Either[A, Iterable[B]] = ??? // utility code

def validate(bs: Iterable[Int]): Either[String, Unit] = if (bs.sum &gt; 22) Left(&#34;bad&#34;) else Right()

def compute(a: String, bs: Iterable[Int]): Int = ???
</code></pre><p><code>Exception</code> style:</p><pre><code>@throws(classOf[ComputationException])
def compute(): Int = {

    val a = if (someCondition) &#34;good&#34; else throw new ComputationException(&#34;bad&#34;)
    val bs = someSeq.map {
        item =&gt; if (someCondition(item)) item.toInt else throw new ComputationException(&#34;bad&#34;)
    }

    if (bs.sum &gt; 22) throw new ComputationException(&#34;bad&#34;)

    compute(a, bs)
}

def compute(a: String, bs: Iterable[Int]): Int = ???
</code></pre><p>The latter looks a lot cleaner to me, and the code handling the failure (either pattern-matching on <code>Either</code> or <code>try-catch</code>) is pretty clear in both cases.</p><p>So my question is &#8211; why use <code>Either</code> over (checked) <code>Exception</code>?</p><p><strong>Update</strong></p><p>After reading the answers, I realized that I might have failed to present the core of my dilemma. My concern is <strong>not</strong> with the lack of the <code>try-catch</code>; one can either &#34;catch&#34; an <code>Exception</code> with <code>Try</code>, or use the <code>catch</code> to wrap the exception with <code>Left</code>.</p><p>My main problem with <code>Either</code>/<code>Try</code> comes when I write code that might fail at many points along the way; in these scenarios, when encountering a failure, I have to propagate that failure throughout my entire code, thus making the code way more cumbersome (as shown in the aforementioned examples).</p><p>There is actually another way of breaking the code without <code>Exception</code>s by using <code>return</code> (which in fact is another &#34;taboo&#34; in Scala). The code would be still clearer than the <code>Either</code> approach, and while being a bit less clean than the <code>Exception</code> style, there would be no fear of non-caught <code>Exception</code>s.</p><pre class="lang-scala prettyprint-override"><code>def compute(): Either[String, Int] = {

  val a = if (someCondition) &#34;good&#34; else return Left(&#34;bad&#34;)

  val bs: Iterable[Int] = someSeq.map {
    item =&gt; if (someCondition(item)) item.toInt else return Left(&#34;bad&#34;)
  }

  if (bs.sum &gt; 22) return Left(&#34;bad&#34;)

  val c = computeC(bs).rightOrReturn(return _)

  Right(computeAll(a, bs, c))
}

def computeC(bs: Iterable[Int]): Either[String, Int] = ???

def computeAll(a: String, bs: Iterable[Int], c: Int): Int = ???

implicit class ConvertEither[L, R](either: Either[L, R]) {

  def rightOrReturn(f: (Left[L, R]) =&gt; R): R = either match {
    case Right(r) =&gt; r
    case Left(l) =&gt; f(Left(l))
  }
}
</code></pre><p>Basically the <code>return Left</code> replaces <code>throw new Exception</code>, and the implicit method on either, <code>rightOrReturn</code>, is a supplement for the automatic exception propagation up the stack.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>If you only use an <code>Either</code> exactly like an imperative <code>try-catch</code> block, of course it&#39;s going to look like different syntax to do exactly the same thing. <code>Eithers</code> are a <em>value</em>.  They don&#39;t have the same limitations.  You can:</p><ul><li>Stop your habit of keeping your try blocks small and contiguous.  The &#34;catch&#34; part of <code>Eithers</code> doesn&#39;t need to be right next to the &#34;try&#34; part.  It may even be shared in a common function.  This makes it much easier to separate concerns properly.</li><li>Store <code>Eithers</code> in data structures.  You can loop through them and consolidate error messages, find the first one that didn&#39;t fail, lazily evaluate them, or similar.</li><li>Extend and customize them.  Don&#39;t like some boilerplate you&#39;re forced to write with <code>Eithers</code>?  You can write helper functions to make them easier to work with for your particular use cases.  Unlike try-catch, you are not permanently stuck with only the default interface the language designers came up with.</li></ul><p>Note for most use cases, a <code>Try</code> has a simpler interface, has most of the above benefits, and usually meets your needs just as well.  An <code>Option</code> is even simpler if all you care about is success or failure and don&#39;t need any state information like error messages about the failure case.</p><p>In my experience, <code>Eithers</code> aren&#39;t really preferred over <code>Trys</code> unless the <code>Left</code> is something other than an <code>Exception</code>, perhaps a validation error message, and you want to aggregate the <code>Left</code> values.  For example, you are processing some input and you want to collect <em>all</em> the error messages, not just error out on the first one.  Those situations don&#39;t come up very often in practice, at least for me.</p><p>Look beyond the try-catch model and you&#39;ll find <code>Eithers</code> much more pleasant to work with.</p><p>Update: this question is still getting attention, and I hadn&#39;t seen the OP&#39;s update clarifying the syntax question, so I thought I&#39;d add more.</p><p>As an example of breaking out of the exception mindset, this is how I would typically write your example code:</p><pre><code>def compute(): Either[String, Int] = {
  Right(someSeq)
    .filterOrElse(someACondition,            &#34;someACondition failed&#34;)
    .filterOrElse(_ forall someSeqCondition, &#34;someSeqCondition failed&#34;)
    .map(_ map {_.toInt})
    .filterOrElse(_.sum &lt;= 22, &#34;Sum is greater than 22&#34;)
    .map(compute(&#34;good&#34;,_))
}
</code></pre><p>Here you can see that the semantics of <code>filterOrElse</code> perfectly capture what we are primarily doing in this function: checking conditions and associating error messages with the given failures.  Since this is a very common use case, <code>filterOrElse</code> is in the standard library, but if it wasn&#39;t, you could create it.</p><p>This is the point where someone comes up with a counter-example that can&#39;t be solved precisely the same way as mine, but the point I&#39;m trying to make is there is not just one way to use <code>Eithers</code>, unlike exceptions.  There are ways to simplify the code for most any error-handling situation, if you explore <em>all</em> the functions available to use with <code>Eithers</code> and are open to experimentation.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/checked-vs-unchecked-vs-no-exception-a-best-practice-of-contrary-beliefs/'>Checked vs Unchecked vs No Exception&#8230; A best practice of contrary beliefs</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/design-how-bad-is-unrelated-code-in-try-catch-finally-block/'>Design &#8211; &#8220;how bad&#8221; is unrelated code in try-catch-finally block</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-better-way-to-define-an-exception-thrown-by-a-method-in-java/'>Java &#8211; better way to define an exception thrown by a method in Java</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/java-how-to-deal-with-ioexception-when-file-to-be-opened-already-checked-for-existence/'>Java &#8211; How to deal with IOException when file to be opened already checked for existence</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/exception-propagation-when-should-i-catch-exceptions/'>Exception propagation: When should I catch exceptions</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>