<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Java &#8211; In Java, why does (unsorted) Set implement Iterable, but SortedMap does not &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1083577 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1083577" class="post-1083577 software type-software status-publish hentry category-software tag-collections tag-iterator tag-java"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Java &#8211; In Java, why does (unsorted) Set implement Iterable, but SortedMap does not</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">collections</span><span class="mr-2 badge badge-info">iterator</span><span class="mr-2 badge badge-warning">java</span></p><div class="entry-content"><p>There are two aspects to this question that I felt were too closely related to ask as separate questions.</p><ol><li>Why doesn&#39;t <code>SortedMap</code> implement <code>Iterable&lt;Map.Entry&lt;K,V&gt;&gt;</code>?</li></ol><p>If you need to perform an action on every key-value pair in a map, iterating over the entrySet() seems like the way to go.  So why not provide a direct iterator() method on SortedMap?  Unless you are worried about iteration order being inconsistent in a HashMap.  Which leads me to:</p><ol start="2"><li>Does implementing <code>Iterable</code> imply a stable ordering?</li></ol><p>Iterating over an ordered collection (List, SortedMap, SortedSet) is a great way to reliably implement equals() (see Note 1) and do other things that have to produce the same result every time.  Iterating over an unsorted set or map could yield different ordering if you call it multiple times, so is unsuitable for these purposes.  Especially if you are comparing HashSets or HashMaps &#8211; two of them could contain the same objects, but the order of their iterators would be different.</p><p>I guess there are 2 aspects to those questions:</p><ol><li><p>What are the historical reasons for these design decisions?</p></li><li><p>If doing it again today, are there correct answers to these questions?  Maybe <code>OrderedIterable</code> should extend <code>Iterable</code> to guarantee order?</p></li></ol><p><strong>Notes:</strong></p><ol><li>I had originally suggested that you needed a reliable ordering to implement hashCode(), but if you sum all the hashcodes, it turns out that you don&#39;t need a reliable ordering if your hashing algorithm is commutative.  Addition is commonly used for hashCodes and it is commutative: a + b = b + a and B. even with overflow, addition is still commutative so that a + Integer.MAX_VALUE = Integer.MAX_VALUE + a.  You do still need a reliable ordering to implement equals() so that you can compare the first item of one to the first item of the other, etc.</li></ol><p><strong>P.S.</strong></p><p>This question is about the interfaces <code>Iterable</code>, <code>Set</code>, <code>SortedSet</code>, <code>Map</code>, and <code>SortedMap</code>.  It&#39;s fine to bring up other interfaces as examples, but<br /> I do not think the <code>Collection</code> interface is relevant to this question.  It&#39;s quirky and has the potential to be a distraction.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Although it is correct from a narrowly technical point of view to say that <code>Set</code> implements <code>Iterable</code>, but <code>SortedMap</code> does not, it is not a very useful question to ask.  A more useful question to ask is whether both classes <strong><em>offer</em></strong> the <code>Iterable</code> interface, and they certainly both do.</p><p>As you know, there are three ways to offer an interface:</p><ol><li>By explicitly implementing it using the <code>implements</code> keyword.</li><li>By implementing an interface which extends the interface in question.</li><li>By exposing a function which returns the interface in question.</li></ol><p><code>Set</code> is declared as follows: <code>public interface Set&lt;E&gt; extends Collection&lt;E&gt; {...</code> so, as you can see, <code>Set</code> does not directly implement <code>Iterable</code>, it only implements it indirectly, by virtue of implementing <code>Collection</code>, which extends <code>Iterable</code>.</p><p>Now, <code>SortedMap</code> <em>would</em> also be implementing <code>Iterable</code> indirectly, just as <code>Set</code> does, if it was implementing <code>Collection</code>, but it does not even do that.  Instead, it exposes an <code>entrySet()</code> function, which returns a <code>Collection</code>, which extends <code>Iterable</code>.</p><p>So, you can have your much desired <code>Iterable</code> in both cases.</p><p>If you would like to insist on the narrowly technical question of why <code>Set</code> (indirectly) implements <code>Iterable</code>, but <code>SortedMap</code> offers it via a function instead, the answer is that the designers of the java language runtime made the decision a long time ago to refrain from making extensive use of  interfaces extending other interfaces. That&#39;s why <code>Map&lt;K,V&gt;</code> does not extend <code>Collection&lt;Map.Entry&lt;K,V&gt;&gt;</code>, offering an <code>entrySet()</code> method instead.</p><p>They could have done the opposite, and as a matter of fact the designers of the C# language runtime did choose to go the other way, so <code>IDictionary&lt;K,V&gt;</code> extends <code>ICollection&lt;KeyValuePair&lt;K,V&gt;&gt;</code>.</p><p>I have experimented with both ways, and I still have not arrived at a conclusive decision as to which one is better.  They simply appear to be two different ways of accomplishing the same thing.</p><p>The implementation of <code>Iterator</code> does not imply a stable ordering, as you seem to understand (and therefore it is not clear to me where your question is in that respect.)  You may iterate over an unsorted map, in which case nobody can tell what the order of the items will be, and you may insert an element to the map and re-iterate, in which case the order of the items may be completely different from the previous time.  (Not just different by one item: all items may appear to be re-arranged.)</p><p>There is no need for an <code>OrderedIterable</code> interface because its signature would be identical to <code>Iterable</code>.  (And don&#39;t get me started on the choice of the java people to introduce a <code>Set</code> besides <code>Collection</code>.)  You can just invoke <code>OrderedMap.entrySet()</code>, which the documentation promises will return an <em>ordered</em> set, which means that the <code>Iterator</code> of that set will always yield items in order.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-a-design-decision-in-composition-or-aggregation/'>Java &#8211; A design decision in composition or aggregation</a></li><li class="list-group-item"><a href='../design-why-does-sorteddictionary-not-implement-ireadonlydictionary/'>Design &#8211; Why does SortedDictionary not implement IReadOnlyDictionary</a></li><li class="list-group-item"><a href='../java-why-does-java-collections-not-supply-a-function-for-the-index-of-max-value/'>Java &#8211; Why does java collections not supply a function for the index of max value</a></li><li class="list-group-item"><a href='../java-why-do-collections-accept-a-comparator-but-not-a-hypothetical-hasher-and-equator/'>Java: why do collections accept a Comparator but not (a hypothetical) Hasher and Equator</a></li><li class="list-group-item"><a href='../java-packaging-structure-of-java-collections-java-util-why-does-iterable-sit-in-java-lang/'>Java &#8211; Packaging structure of Java collections (java.util) &#8211; why does Iterable sit in java.lang</a></li><li class="list-group-item"><a href='../iterate-over-collection-while-removing-elements-from-it/'>Iterate over Collection while removing elements from it</a></li><li class="list-group-item"><a href='../java-reason-iterator-and-stream-do-not-implement-iterable/'>Java &#8211;  reason Iterator and Stream do not implement Iterable</a></li><li class="list-group-item"><a href='../java-collections-why-are-vectors-not-used-anymore-but-are-still-around/'>Java &#8211; Collections: Why are Vectors not used anymore but are still around</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>