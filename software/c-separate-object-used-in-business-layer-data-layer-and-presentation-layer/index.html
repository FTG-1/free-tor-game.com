<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Separate object used in business layer, data layer and presentation layer &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1079215 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1079215" class="post-1079215 software type-software status-publish hentry category-software tag-c tag-layers tag-object-oriented tag-separation-of-concerns"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Separate object used in business layer, data layer and presentation layer</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">layers</span><span class="mr-2 badge badge-warning">object-oriented</span><span class="mr-2 badge badge-primary">separation-of-concerns</span></p><div class="entry-content"><p>I&#39;m building an application that is responsible for reading data from files and displaying them in charts. The whole application is responsible for manipulating data from files, which means I have to use different parts of the same object in almost every part of my project. Charts need actual data, list of opened files needs names and states of data, etc. On top of that my application uses <code>MEF</code>, so others can add new functionality and modify current modules.</p><p>My biggest problem is how to separate that data, so each layer of my application has access only to part of that data that is required for it to work. What I mean by data is:</p><ol><li>Name of file</li><li>Guid Id</li><li><code>List&lt;IColumn&gt;</code> data or <code>byte[]</code> data</li><li>Additional future variables</li></ol><p>I decided to use across my application <code>IDocument</code>. This is my custom representation of one file that can be read and displayed in chart. Each <code>IDocument</code> must have an <code>Id</code> and <code>Name</code> because every computer file has a name. This has all the information that is needed for a simple list of files that were imported into the application. But it doesn&#39;t have the actual data that I want to display, so I use NoSQL database for storing <code>IDocumentData</code> that has <code>List&lt;IColumn&gt; Columns</code> that I can throw into a chart. <code>IColumn</code> has only <code>List&lt;object&gt; Rows</code> which basically mimics a table.</p><p>So I seperated my file into <code>IDocument</code> and <code>IDocumentData</code>, now how do I keep track of which data belongs to which document? I get <code>IDocumentData</code> from <code>IReader</code> module and I get <code>IWizardData</code> from <code>IFileImporterWizard</code> module.<br /> I was thinking about creating some kind of builder that would assign the same Id to <code>IDocument</code> and <code>IWizardData</code>(contains importated <code>Name</code> and <code>Id</code>) and when I would want to access data I would pass <code>Id</code> from <code>IDocument</code>. Is this a good approach?</p><p>So for example:</p><pre><code>public class DocumentBuilder {

  private IDocumentFactory _documentFactory;
  private IDocumentDataRepository _documentDataRepository;

  public DocumentBuilder(IDocumentFactory documentFactory, IDocumentDataRepository documentDataRepository)
  {
     _documentFactory = documentFactory;
     _documentDataRepository = documentDataRepository;
  }

  public IDocument Build(IWizardData wizardData, IDocumentData documentData) 
  {
      var document = _documentFactory.Create();
      document.Id = wizardData.Id;
      documentData.Id = wizardData.Id;

      _documentDataRepository.Add(documentData);
      return document;
  }
}
</code></pre><p>So my thinking looks like this: Open File wizard returns <code>IWizardData</code>(name, filePath) -&gt; <code>IReader</code> returns <code>IDocumentData</code>(<code>List&lt;IColumn&gt;</code> columns) -&gt; <code>DocumentBuilder</code> builds <code>IDocument</code> and saves data</p><p><strong>EDIT:</strong></p><p>So I figured out how to separate business and data layers by creating</p><pre><code>interface IDocument : IDocumentData, IDocumentInformation 
</code></pre><p><code>IDocumentInformation</code> has a name and other information. <code>IDocumentData</code> has <code>Id</code> and <code>DataTable Data { get; set; }</code>. I can save <code>IDocumentData</code> and <code>IDocumentInformation</code> separately and still have <code>Id</code> that is the same for both of them.</p><p>I decided to change <code>IColumn</code> and <code>List&lt;object&gt; Rows</code>, because I hope <code>DataTable</code> will cause less problems. Although I&#39;m still wondering if <code>DataTable</code> is a good choice, because it will probably decrease performance when loading data. I thought that it would be a good idea to load from <code>NoSQL</code> only a couple of records and then add them to chart and loop it until the end.</p><p>So now <code>IFileWizard</code> returns <code>IDocumentInformation</code>, <code>IReader</code> takes <code>IDocumentInformation</code> and returns <code>IDocumentData</code> and then they get combined.</p><p>Naming these things takes some time, because they all use parts of the same object, but seeing <code>IFileWizard</code> returning <code>IDocumentInformation</code> is a little bit weird. On the other hand in order to make them easily interchangeable I would have to declare even more common interfaces and create <code>interface IFileWizardResult:IInfo</code> and have <code>interface IDocumentInformation:IInfo</code> and then return <code>IFileWizardResult</code> and cast it to <code>IInfo</code>, etc. I don&#39;t know if this is too much decoupling or not. I want this application to be easily scalable, but making a lot of interfaces not always means better decoupling.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>The answer to your question depends primarily on two factors:</p><h1>The overall complexity of the application</h1><p>To be extreme, if you are simply writing a script to process a bunch of files, you would probably be going overboard having multiple layers to your application in the first place.</p><p>On the other hand, if you are writing a full blown enterprise application, separating layers and data representation between these layers will guarantee long term maintainability and stability of the application.</p><p>There are many variations and trade offs between these layers.</p><h1>The differences in representation needed by each layer</h1><p>On one hand, you could have an application that needs JSON format all the way through, from client to data storage. If there are no future requirements predicted that might change that, you can use JSON on the client, process the JSON in the business layer and write the JSON to a file or a NoSQL database.</p><p>On the other hand, every layer might best work with a different format. Let&#39;s say your storage requirements might be binary files, so you would have to read that out on the data layer and convert it into sensible objects that can be processed by the business layer and then that business layer would process and summarize the data an turn it into charts. Just by the virtue of that it would make sense to have a different representation.</p><p>There are many variations in between, but in your case it sounds like the latter is the case, but if you have the choice you might also review storing your data in a format that is more useful to the other layers.</p><h2>Notes on the Presentation Layer</h2><p>In practice I have learned to pretty much always give the Presentation Layer it&#39;s own model, separate from what the datastore and the business layer use. This is for multiple reasons:</p><ol><li><p>The presentation layer should not perform any business logic. However, if the model does not match what is to be shown you start finding funny pieces of business logic creeping into the presentation code.</p></li><li><p>Typesafe Languages like C# and Java are many times easier to refactor than templating languages and JavaScript. Thus if you tightly couple into such languages, you will loose much of the benefit of having used a typesafe language in the first place.</p></li><li><p>From what I have seen user interface technology still changes drastically, in the last 7 years I have gone from Flash/Flex to plain JS to jQuery, to Backbone to React. In other words the UI has seen many more rewrites than the backend code. Again, if you are loosely coupled this is much easier to deal with.</p></li></ol></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-effective-programming-of-data-layer-management-access/'>Java &#8211; Effective programming of data layer management/access</a></li><li class="list-group-item"><a href='../how-do-the-application-and-database-interface-layers-interact-at-their-boundary/'>How do the Application and Database Interface Layers interact at their boundary</a></li><li class="list-group-item"><a href='../object-oriented-what-are-the-advantages-of-strictly-maintaining-separate-data-algorithm-interface-layers/'>Object-oriented &#8211; What are the advantages of strictly maintaining separate data | algorithm | interface layers</a></li><li class="list-group-item"><a href='../c-in-memory-data-collection-objects-vs-database/'>C# &#8211; In-memory data collection object(s) vs database</a></li><li class="list-group-item"><a href='../java-class-design-for-jpa-entities-with-multiple-tables-referring-to-same-business-object/'>Java &#8211; Class Design for JPA Entities with Multiple Tables Referring to Same Business Object</a></li><li class="list-group-item"><a href='../separate-presentation-layer-from-data-entities/'>Separate presentation layer from data entities</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>