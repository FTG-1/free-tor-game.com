<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Functional programming and Text adventures &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1084728 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1084728" class="post-1084728 software type-software status-publish hentry category-software tag-functional-programming"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Functional programming and Text adventures</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">functional programming</span></p><div class="entry-content"><p>This is mostly a theoretical question about FP, but I&#39;ll take text adventures (like old-school Zork) to illustrate my point. I&#39;d like to know your opinions on how would you model a stateful simulation with FP.</p><p>Text adventures really seem to call for OOP. For example, all the &#34;rooms&#34; are instances of a <code>Room</code> class, you can have a basic <code>Item</code> class and interfaces like <code>Item&lt;Pickable&gt;</code> for things you can carry and so on.</p><p>World modeling in FP works differently, especially if you want to enforce immutability in a world that <em>must</em> mutate as the game progresses (objects are moved, enemies are defeated, the scoring grows, the player changes its location). I imagine a single big object <code>World</code> that has it all: what are the rooms you can explore, how they are linked, what the player is carrying, what levers have been triggered.</p><p>I think that a pure approach would be to basically pass this big object to any function and have it returned by them (possibly modified). For example, i have a <code>moveToRoom</code> function that gets <code>World</code> and returns it with <code>World.player.location</code> changed to the new room, <code>World.rooms[new_room].visited = True</code> and so on.</p><p>Even if this is the more &#34;correct&#34; way, it seems to be enforcing pureness for the sake of it. Depending on the programming language, passing this potentially very big <code>World</code> object back and forth may be expensive. Also, <em>every</em> function may need to have access to any <code>World</code> object. For example, a room may be accessible or not depending on a lever triggered in another room because it may be flooded, but if the player carries a life jacket, it can enter it anyway. A monster may be aggressive or not depending on whether the player has slayered his cousin in another room . This means that the <code>roomCanBeEntered</code> function needs to access <code>World.player.invetory</code> and <code>World.rooms</code>, <code>describeMonster</code> needs to access <code>World.monsters</code> and so on (basically, you <em>must</em> pass the whole load around). This really seems to me to call for a global variable, even if this is all but good programming style especially in FP.</p><p>How would you solve this problem?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Mind that functional languages use data structures and separated functions instead of objects. For example you would have a set of rooms and a list of inventory items as a world instead.</p><p>Ideally you would also limit the amount of data you give to functions to how much they actually require as much as possible instead of passing the entire world (say you extract a single relevant room from your world; of course completely interdependent worlds can be hard to separate). The result would be reincorporated into the world data structure, creating a new state.
You cannot model state without using state; as you say some things inherently require mutation.</p><p>Most practical functional languages provide a way to realize mutation either directly (say the ST monad in Haskell or transients in Clojure), or simulate it efficiently (often by reusing unchanged parts of the data structure (Clojure&#39;s default data structures are a good example here)). Either way purity is maintained.</p><p>Since the amount of state that needs to be mutated seems limited, I wouldn&#39;t worry too much about performance issues and go with the (possibly already optimized) naive functional approach.</p><p>A different option I have seen would be returning only instructions to change some part of the world from your individual functions, and then updating your world according to these. A series of blog posts describing this is available at <a href="http://prog21.dadgum.com/23.html" rel="nofollow noreferrer">http://prog21.dadgum.com/23.html</a>.</p><p>Both of these answers deal more with how to organize changes than to not pass your entire world to functions, because <strong>a perfectly interdependent one cannot be segmented by definition</strong> - but try and do so as best as you can in your case, which is not only functional, but also good practice.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/why-functional-programming/'>Why Functional Programming</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/javascript-functional-programming-and-parallel-processing/'>Javascript, functional programming and parallel processing</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/internal-mutation-of-persistent-data-structures/'>Internal Mutation of Persistent Data Structures</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/the-difference-between-functional-relational-programming-and-functional-programming/'>The difference between functional relational programming and functional programming</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/functional-programming-and-stateful-algorithms/'>Functional programming and stateful algorithms</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/python-how-should-you-cleanly-restrict-object-property-types-and-values-in-python/'>Python &#8211; How should you cleanly restrict object property types and values in Python</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/object-oriented-apis-and-functional-programming/'>Object-oriented &#8211; APIs and functional programming</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-when-programming-in-functional-style-do-you-have-a-single-application-state-that-you-weave-through-the-application-logic/'>C# &#8211; When programming in Functional style, do you have a single application state that you weave through the application logic</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>