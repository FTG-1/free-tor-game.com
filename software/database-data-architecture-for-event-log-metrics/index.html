<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Database &#8211; Data architecture for event log metrics &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1068678 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1068678" class="post-1068678 software type-software status-publish hentry category-software tag-architecture tag-database tag-metrics"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Database &#8211; Data architecture for event log metrics</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">database</span><span class="mr-2 badge badge-warning">metrics</span></p><div class="entry-content"><p>My service has a large ongoing number of user events, and we would like to do things like &#34;count occurrence of event type <em>T</em> since date <em>D</em>.&#34;</p><p>We are trying to make two basic decisions:</p><ol><li><p>What to store?  Storing every event vs. only storing aggregates</p><ul><li>(Event log style) log every event and count them later, vs.</li><li>(Time-series style) store a single aggregated &#34;count of event <em>E</em> for date <em>D</em>&#34; for every day</li></ul></li><li><p>Where to store the data</p><ul><li>In a relational database (particularly MySQL)</li><li>In a non-relational (NoSQL) database</li><li>In flat log files (collected centrally over the network via <code>syslog-ng</code>)</li></ul></li></ol><p>What is standard practice / where can I read more about comparing the different types of systems?</p><hr/><p>Additional details:</p><ul><li>The total event stream is large, potentially hundreds of thousands of entries per day</li><li>But our current need is only to count certain types of events within it</li><li>We don&#39;t necessarily need real-time access to the raw data or aggregation results</li></ul><hr/><p>IMHO, &#34;log all events to files, crawl them at a later time to filter and aggregate the stream&#34; is a pretty standard UNIX Way, but my Rails-y compatriots seem to think that nothing is real unless it&#39;s in MySQL.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>It always depends, I&#39;ll give you my advice to offer you a new perspective</p><blockquote><p>What to store? Storing every event vs. only storing aggregates</p><p>(Event log style) log every event and count them later, vs.</p></blockquote><p>If you plan to don&#39;t miss any detail, even though now they are not relevant, on my eyes that&#39;s the best approach, because sometimes, as the results comes, then you find some other events that for X or Y they were not relevant, or they didn&#39;t bring any extra information, but after some analysis, it simply does, and you need to also track that one, then because its recorded but not accounted it would take you some time before you can add it to the picture.</p><blockquote><p>(Time-series style) store a single aggregated &#34;count of event E for date D&#34; for every day</p></blockquote><p>If you want to implement and use it tomorrow, it can work, but then if you have a new requirements, or you find a correlation with another event that you omitted for any reason, then you need to add this new event and then wait some long time to have nice aggregation levels</p><blockquote><p>Where to store the data</p><p>In a relational database (particularly MySQL)</p></blockquote><p>The first option can be heavy for a DB if you go for recording all events, so MySQL I&#39;m afraid can become too small, and if you want to go for RDBMS solutions you may think bigger, like PostgreSQL or proprietary like Oracle or DB2.</p><p>But for the aggregation would be a good choice, depending of the load generated you can aggregate in code and insert those aggregations in the DB.</p><blockquote><p>In a non-relational (NoSQL) database</p></blockquote><p>If you go for this solution, you need to see which approach you want to follow nice <a href="http://en.wikipedia.org/wiki/NoSQL" rel="nofollow noreferrer">read on wikipedia</a> may help you, I can&#39;t help you much on that topic because I simply don&#39;t have enough experience, I mostly use rdbms.</p><blockquote><p>In flat log files (collected centrally over the network via syslog-ng)</p></blockquote><p>I personally would discourage you to go for that option, If the file grows too much, it would be more difficult to parse, but still I don&#39;t know the main purpose, is to follow up on a system, or simply check a log file ...</p><p>Hope it helps!</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../database-how-to-store-a-simple-db-in-the-cloud/'>Database &#8211; How to store a simple DB &#8220;in the cloud&#8221;</a></li><li class="list-group-item"><a href='../database-log-to-file-or-to-database-table/'>Database &#8211; Log to file or to database table</a></li><li class="list-group-item"><a href='../database-how-to-efficiently-store-big-time-series-data/'>Database &#8211; How to efficiently store big time series data</a></li><li class="list-group-item"><a href='../database-vs-flat-files-for-rarely-accessed-data/'>Database vs Flat files for rarely accessed data</a></li><li class="list-group-item"><a href='../architecture-serverless-event-sourced-architecture-using-aws-offerings/'>Architecture &#8211; Serverless event-sourced architecture using AWS offerings</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>