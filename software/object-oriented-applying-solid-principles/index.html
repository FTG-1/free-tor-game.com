<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Object-oriented &#8211; Applying SOLID principles &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1076845 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1076845" class="post-1076845 software type-software status-publish hentry category-software tag-design tag-object-oriented tag-solid"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Object-oriented &#8211; Applying SOLID principles</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design</span><span class="mr-2 badge badge-info">object-oriented</span><span class="mr-2 badge badge-warning">solid</span></p><div class="entry-content"><p>I am quite new to the <a href="http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)" rel="noreferrer">S.O.L.I.D.</a> design principles. I understand their cause and benefits, but yet i fail to apply them to a smaller project which I want to refactor as a practical exercise to use the SOLID principles. I know there is no need to change an application that works perfectly, but I want to refactor it anyway so I gain design experience for future projects.</p><p>The application has the following task (actually a lot more than that but let&#39;s keep it simple):<br /> It has to read an XML file which contains Database Table/Column/View etc definitions and create an SQL file which can be used in order to create an ORACLE database schema.</p><p>(Note: Please refrain from discussing why I need it or why I don&#39;t use XSLT and so on, there are reasons, but they are off-topic.)</p><p>As a start, I chose to look only at Tables and Constraints. If you ignore columns, you could state it the following way:</p><p>A constraint is part of a table (or more precisely, part of a CREATE TABLE statement), and a constraint may also reference another table.</p><p>First, I will explain what the application looks like right now (not applying SOLID):</p><p>At the moment, the application has a &#34;Table&#34; class which contains a list of pointers to Constraints owned by the table, and a list of pointers to Constraints referencing this table. Whenever a connection gets established, the backwards connection will be established as well.<br /> The table has a createStatement() method which in turn calls the createStatement() function of each Constraint. Said method will itself use the connections to the owner table and referenced table in order to retrieve their names.</p><p>Obviously, this doesn&#39;t apply to SOLID at all.<br /> For example, there are circular dependencies, which bloated the code in terms of &#34;add&#34;/&#34;remove&#34; methods required and some large object destructors.</p><p>So there are a couple of questions:</p><ol><li>Should I resolve the circular dependencies using Dependency Injection? If so, I suppose the Constraint should receive the owner (and optionally the referenced) table in its constructor. But how could I run over the list of constraints for a single table then?</li><li>If the Table class both stores the state of itself (e.g. table name, table comment etc) and the links to Constraints, are these one or two &#34;responsibilities&#34;, thinking of the Single Responsibility Principle?</li><li>In case 2. is right, should I just create a new class in the logical business layer which manages the links? If so, 1. would obviously no longer be relevant.</li><li>Should the &#34;createStatement&#34; methods be part of the Table/Constraint classes or should I move them out as well? If so, where to? One Manager class per each data storage class (i.e. Table, Constraint, &#8230;)? Or rather create a manager class per link (similar to 3.)?</li></ol><p>Whenever I try to answer one of these questions I find myself running in circles somewhere.</p><p>The problem obviously gets a lot more complex if you include columns, indices and so on, but if you guys help me out with the simple Table/Constraint thing, I can maybe work out the rest on my own.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>You may start from a different point of view to apply &#34;Single Responsibility Principle&#34; here. What you have shown to us is (more or less) only the data model of your application. SRP here means: make sure your data model is responsible only for keeping data - no less, no more.</p><p>So when you are going to read your XML file, create a data model from it and write SQL, what you should <em>not</em> do is implement anything into your <code>Table</code> class which is XML or SQL specific. Your want your data flow look like this:</p><pre><code>[XML] -&gt; (&#34;Read XML&#34;) -&gt; [Data model of DB definition] -&gt; (&#34;Write SQL&#34;) -&gt; [SQL]
</code></pre><p>So the only place where XML specific code should be placed is a class named, for instance, <code>Read_XML</code>. The only place for SQL specific code should be a class like <code>Write_SQL</code>. Of course, maybe you are going to split those 2 tasks into more sub-tasks (and split your classes into multiple manager classes), but your &#34;data model&#34; should not take any responsibility from that layer. So don&#39;t add a <code>createStatement</code> to any of your data model classes, since this gives your data model responsibility for the SQL.</p><p>I don&#39;t see any problem when you are describing that a Table is responsible for holding all it&#39;s parts, (name, columns, comments, constraints ...), that is the idea behind a data model.  But you described &#34;Table&#34; is also responsible for the memory management of some of its parts. That&#39;s a C++ specific issue, which you would not face so easily in languages like Java or C#. The C++ way of getting rid of those responsibility is using smart pointers, delegating ownership to a different layer (for example, the boost library or to your own &#34;smart&#34; pointer layer). But beware, your cyclic dependencies may &#34;irritate&#34; some smart pointer implementations.</p><p>Something more about SOLID: here is nice article</p><p><a href="http://cre8ivethought.com/blog/2011/08/23/software-development-is-not-a-jenga-game" rel="nofollow noreferrer">http://cre8ivethought.com/blog/2011/08/23/software-development-is-not-a-jenga-game</a></p><p>explaining SOLID by a small example. Let&#39;s try to apply that to your case:</p><ul><li><p>you will need not only classes <code>Read_XML</code> and <code>Write_SQL</code>, but also a third class which manages the interaction of those 2 classes. Lets call it a <code>ConversionManager</code>.</p></li><li><p>Applying DI principle could mean here: ConversionManager should not create instances of <code>Read_XML</code> and <code>Write_SQL</code> by itself. Instead, those objects can be injected through the constructor. And the constructor should have a signature like this</p><p><code>ConversionManager(IDataModelReader reader, IDataModelWriter writer)</code></p></li></ul><p>where <code>IDataModelReader</code> is an interface from which <code>Read_XML</code> inherits, and <code>IDataModelWriter</code> the same for <code>Write_SQL</code>. This makes a <code>ConversionManager</code> open for extensions (you very easily provide different readers or writers) without having to change it - so we have an example for the Open/Closed principle. Think about it what you will have to change when you want to support another database vendor -ideally, you don&#39;t have to change anything in your datamodel, just provide another SQL-Writer instead.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../object-oriented-solid-vs-avoiding-premature-abstraction/'>Object-oriented &#8211; SOLID vs. Avoiding Premature Abstraction</a></li><li class="list-group-item"><a href='../object-oriented-ioc-containers-break-oop-principles/'>Object-oriented &#8211; IOC Containers break OOP Principles</a></li><li class="list-group-item"><a href='../object-oriented-how-to-use-solid-principles-in-this-example/'>Object-oriented &#8211; How to use SOLID principles in this example</a></li><li class="list-group-item"><a href='../is-the-solid-principles-applicable-to-apis/'>Is the SOLID principles applicable to API:s</a></li><li class="list-group-item"><a href='../object-oriented-which-solid-principles-are-broken-by-this-class-diagram/'>Object-oriented &#8211; Which SOLID principles are broken by this class diagram</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>