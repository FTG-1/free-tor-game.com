<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>The point of rooms in socket.io &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1066401 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1066401" class="post-1066401 software type-software status-publish hentry category-software tag-node-js tag-socket-io tag-websockets"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">The point of rooms in socket.io</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">node.js</span><span class="mr-2 badge badge-info">socket.io</span><span class="mr-2 badge badge-warning">websockets</span></p><div class="entry-content"><p>I was wondering what the purpose of rooms is. See: <a href="https://socket.io/docs/rooms-and-namespaces/" rel="nofollow noreferrer">https://socket.io/docs/rooms-and-namespaces/</a></p><p>You can basically mimic <code>join</code> and <code>leave</code> with just <code>socket.on</code> and <code>socket.off</code></p><p>Take for example:</p><p>(no room)</p><p>client:</p><pre><code>socket.on(&#39;chat&#39;, (data) =&gt; {
    console.log(&#34;chat received&#34;, data)
    $(this.$refs.chatBox).append(`
        &lt;div&gt;
            ${data}
        &lt;/div&gt;
    `)
})
</code></pre><p>server:</p><pre><code>socket.on(&#39;chat&#39;, function (id, msg) {
    console.log(&#34;id:&#34;, id, &#39;message:&#39;, msg)
    socket.broadcast.emit(&#39;chat&#39;, msg);
    // io.emit(&#39;chat&#39;, msg)
})
</code></pre><p>This will now listen to the <code>&#34;chat&#34;</code> and I can turn it off using <code>socket.off(&#34;chat&#34;)</code></p><hr/><p>Now I do something similar but with a room:</p><p>client:</p><pre><code>// to join
socket.emit(&#39;waiting room&#39;, socket.id)
// to message
socket.emit(&#39;waiting room chat&#39;, { msg: this.$refs.waiting_input.value })
</code></pre><p>server:</p><pre><code>socket.on(&#39;waiting room&#39;, function (id) {
    console.log(&#34;socket has joined the waiting room&#34;, id);
    socket.join(&#34;waiting room&#34;)
})

socket.on(&#34;waiting room chat&#34;, function(payload) {
    console.log(&#34;waiting room chat:&#34;, payload.msg)
    // io.to(&#34;waiting room&#34;).emit(&#39;waiting room&#39;, payload.msg)
    socket.broadcast.to(&#34;waiting room&#34;).emit(&#39;waiting room&#39;, payload.msg)
})
</code></pre><p>Now if I send a message to <code>waiting room chat</code> but a socket hasn&#39;t joined the room, it won&#39;t receive it. But what advantage does the second method have over the first?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Rooms are a tool in socket.io servers for keeping track of groups of connected users.  You can then iterate the sockets in a room or broadcast to all of them.  There&#39;s really nothing more to them than that.  The server can put a socket into a room or remove one from a room.  When a socket disconnects, it is automatically removed from all rooms it is in.</p><p>Each socket is also automatically put into a room whose name is constructed from its <code>socket.id</code>. That allows socket.io to send to any socket when you only have its id.</p><p>Your scheme for using only messages and then letting each client decide which messages to listen to is a client-driven scheme (client decides which messages to pay attention to) as opposed to a server-driven scheme and it probably doesn&#39;t scale as well because it requires you to send all messages to all clients so that all clients have a chance to listen to them all.  Rooms, on the other hand, are a server-driven scheme where the server keeps track (in advance) of which sockets are in which group and only sends messages to the clients that should get those messages.  The server both controls things and does it more efficiently.</p><p>Plus, in some cases, you can&#39;t leave it up to the client to decide what it&#39;s allowed to listen to.  Imagine you have a chat server that sets up private 1-on-1 chat sessions.  In that case, you can&#39;t have any circumstance where clientA is allowed to listen in on chat messages for some other chat session.  To enforce that, the server has to ONLY send chat messages to the pairwise participants.  This is a feature that rooms would be very useful for and your scheme would not.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../proper-usages-of-rooms-namespaces-when-making-a-news-feed-with-socket-io/'>Proper usages of rooms/namespaces when making a News Feed with socket.io</a></li><li class="list-group-item"><a href='../design-pattern-for-socket-io-and-express/'>Design pattern for socket.io and Express</a></li><li class="list-group-item"><a href='../database-how-to-balance-100-clients-checking-the-same-database-table-in-a-loop/'>Database &#8211; How to balance 100 clients checking the same database table in a loop</a></li><li class="list-group-item"><a href='../django-and-websockets-channels-vs-socket-io-vs-other/'>Django and websockets: Channels vs Socket.io vs other</a></li><li class="list-group-item"><a href='../do-i-actually-need-a-message-broker-or-are-websockets-enough/'>Do I actually need a message broker or are websockets enough</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>