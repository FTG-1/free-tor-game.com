<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Rest &#8211; How should a REST API handle PUT requests to partially-modifiable resources &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1063663 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1063663" class="post-1063663 software type-software status-publish hentry category-software tag-http tag-http-request tag-rest"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Rest &#8211; How should a REST API handle PUT requests to partially-modifiable resources</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">http</span><span class="mr-2 badge badge-info">http-request</span><span class="mr-2 badge badge-warning">rest</span></p><div class="entry-content"><p>Suppose a REST API, in response to a HTTP <code>GET</code> request, returns some additional data in a sub-object <code>owner</code>:</p><pre><code>{
  id: &#39;xyz&#39;,
  ... some other data ...
  owner: {
    name: &#39;Jo Bloggs&#39;,
    role: &#39;Programmer&#39;
  }
}
</code></pre><p>Clearly, we don&#39;t want anyone to be able to <code>PUT</code> back</p><pre><code>{
  id: &#39;xyz&#39;,
  ... some other data ...
  owner: {
    name: &#39;Jo Bloggs&#39;,
    role: &#39;CEO&#39;
  }
}
</code></pre><p>and have that succeed. Indeed, we probably aren&#39;t going to even <em>implement</em> a way for that to even potentially succeed, in this case.</p><p>But this question is not just about sub-objects: what, in general, should be done with data that should not be modifiable in a PUT request?</p><p>Should it be required to be missing from the PUT request?</p><p>Should it be silently discarded?</p><p>Should it be checked, and if it differs from the old value of that attribute, return a HTTP error code in the response?</p><p>Or should we use RFC 6902 JSON patches instead of sending the whole JSON?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>There is no rule, either in the W3C spec or the unofficial rules of REST, that says that a <code>PUT</code> must use the same schema/model as its corresponding <code>GET</code>.</p><p>It&#39;s nice if they&#39;re <em>similar</em>, but it&#39;s not unusual for <code>PUT</code> to do things slightly differently. For example, I&#39;ve seen a lot of APIs that include some kind of ID in the content returned by a <code>GET</code>, for convenience. But with a <code>PUT</code>, that ID is determined exclusively by the URI and has no meaning in the content. Any ID found in the body will be silently ignored.</p><p>REST and the web in general is heavily tied to the <a href="http://en.wikipedia.org/wiki/Robustness_principle" rel="noreferrer">Robustness Principle</a>: <em>&#34;Be conservative in what you do [send], be liberal in what you accept.&#34;</em> If you agree philosophically with this, then the solution is obvious: Ignore any invalid data in <code>PUT</code> requests. That applies to both immutable data, as in your example, and actual nonsense, e.g. unknown fields.</p><p><code>PATCH</code> is potentially another option, but you shouldn&#39;t implement <code>PATCH</code> unless you&#39;re actually going to support partial updates. <code>PATCH</code> means <em>only update the specific attributes I include in the content</em>; it does <strong>not</strong> mean <em>replace the entire entity but exclude some specific fields</em>. What you&#39;re actually talking about is not really a partial update, it&#39;s a full update, idempotent and all, it&#39;s just that part of the resource is read-only.</p><p>A nice thing to do if you choose this option would be to send back a 200 (OK) <em>with the actual updated entity</em> in the response, so that clients can clearly see that the read-only fields were not updated.</p><p>There are certainly <a href="https://stackoverflow.com/q/9470429/38360">some people</a> who think the other way - that it should be an error to attempt to update a read-only portion of a resource. There is some justification for this, primarily on the basis that you would definitely return an error if the <em>entire</em> resource was read-only and the user tried to update it. It definitely goes against the robustness principle, but you might consider it to be more &#34;self-documenting&#34; for users of your API.</p><p>There are two conventions for this, both of which correspond to your original ideas, but I&#39;ll expand on them. The first is to prohibit the read-only fields from appearing in the content, and return an HTTP 400 (Bad Request) if they do. APIs of this sort should also return an HTTP 400 if there are any other unrecognized/unusable fields. The second is to require the read-only fields to be identical to the current content, and return a 409 (Conflict) if the values do not match.</p><p>I really dislike the equality check with 409 because it invariably requires the client to do a <code>GET</code> in order to retrieve the current data before being able to do a <code>PUT</code>. That&#39;s just not nice and is probably going to lead to poor performance, for somebody, somewhere. I also <em>really</em> don&#39;t like 403 (Forbidden) for this as it implies that the <em>entire</em> resource is protected, not just a part of it. So my opinion is, if you absolutely must validate instead of following the robustness principle, validate <em>all</em> of your requests and return a 400 for any that have extra or non-writable fields.</p><p>Make sure your 400/409/whatever includes information about what the specific problem is and how to fix it.</p><p>Both of these approaches are valid, but I prefer the former one in keeping with the robustness principle. If you&#39;ve ever experienced working <em>with</em> a large REST API, you&#39;ll appreciate the value of backward compatibility. If you ever decide to remove an existing field or make it read-only, it is a backward compatible change if the server just ignores those fields, and old clients will still work. However, if you do strict validation on the content, it is <em>not</em> backward compatible anymore, and old clients will cease to work. The former generally means less work for both the maintainer of an API and its clients.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/rest-a-web-application-as-a-rest-api-client-how-to-handle-resource-identifiers/'>Rest &#8211; A Web application as a REST API client: how to handle resource identifiers</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/rest-how-to-handle-business-rules-with-a-rest-api/'>Rest &#8211; How to handle business rules with a REST API</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/rest-webservices-post-put-which-type-of-parameter-should-i-choose-and-when/'>REST Webservices (post / put) : which type of parameter should I choose, and when</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/what-reasons-are-there-against-using-only-post-http-verb-in-an-api/'>What reasons are there AGAINST using only POST HTTP verb in an API</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>