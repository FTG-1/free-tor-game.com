<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Combining template method with strategy &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1068303 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1068303" class="post-1068303 software type-software status-publish hentry category-software tag-design-patterns"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Combining template method with strategy</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">design-patterns</span></p><div class="entry-content"><p>An assignment in my software engineering class is to design an application which can play different forms a particular game. The game in question is Mancala, some of these games are called Wari or Kalah. These games differ in some aspects but for my question it&#39;s only important to know that the games could differ in the following:</p><ul><li>The way in which the result of a move is handled</li><li>The way in which the end of the game is determined</li><li>The way in which the winner is determined</li></ul><p>The first thing that came to my mind to design this was to use the strategy pattern, I have a variation in algorithms (the actual rules of the game). The design could look like this:<br /> <img src="../../../i.stack.imgur.com/mk3EA.png" alt="enter image description here"/></p><p>I then thought to myself that in the game of Mancala and Wari the way the winner is determined is exactly the same and the code would be duplicated. I don&#39;t think this is by definition a violation of the &#39;one rule, one place&#39; or DRY principle seeing as a change in rules for Mancala wouldn&#39;t automatically mean that rule should be changed in Wari as well. Nevertheless from the feedback I got from my professor I got the impression to find a different design.</p><p>I then came up with this:<br /> <img src="../../../i.stack.imgur.com/3Ad2p.png" alt="enter image description here"/></p><p>Each game (Mancala, Wari, Kalah, &#8230;) would just have attribute of the type of each rule&#39;s interface, i.e. <code>WinnerDeterminer</code> and if there&#39;s a Mancala 2.0 version which is the same as Mancala 1.0 except for how the winner is determined it can just use the Mancala versions.</p><p>I think the implementation of these rules as a strategy pattern is certainly valid. But the real problem comes when I want to design it further.</p><p>In reading about the template method pattern I immediately thought it could be applied to this problem. The actions that are done when a user makes a move are always the same, and in the same order, namely:</p><ul><li>deposit stones in holes (this is the same for all games, so would be implemented in the template method itself)</li><li>determine the result of the move</li><li>determine if the game has finished because of the previous move</li><li>if the game has finished, determine who has won</li></ul><p>Those three last steps are all in my strategy pattern described above. I&#39;m having a lot of trouble combining these two. One possible solution I found would be to abandon the strategy pattern and do the following:<br /> <img src="../../../i.stack.imgur.com/uiopy.png" alt="enter image description here"/></p><p>I don&#39;t really see the design difference between the strategy pattern and this? But I am certain I need to use a template method (although I was just as sure about having to use a strategy pattern).</p><p>I also can&#39;t determine who would be responsible for creating the <code>TurnTemplate</code> object, whereas with the strategy pattern I feel I have families of objects (the three rules) which I could easily create using an abstract factory pattern. I would then have a <code>MancalaRuleFactory</code>, <code>WariRuleFactory</code>, etc. and they would create the correct instances of the rules and hand me back a <code>RuleSet</code> object.</p><p>Let&#39;s say that I use the strategy + abstract factory pattern and I have a <code>RuleSet</code> object which has algorithms for the three rules in it. The only way I feel I can still use the template method pattern with this is to pass this <code>RuleSet</code> object to my <code>TurnTemplate</code>. The &#39;problem&#39; that then surfaces is that I would never need my concrete implementations of the <code>TurnTemplate</code>, these classes would become obsolete. In my protected methods in the <code>TurnTemplate</code> I could just call <code>ruleSet.determineWinner()</code>. As a consequence, the <code>TurnTemplate</code> class would no longer be abstract but would have to become concrete, is it then still a template method pattern?</p><p>To summarize, am I thinking in the right way or am I missing something easy? If I&#39;m on the right track, how do I combine a strategy pattern and a template method pattern?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>After looking at your designs, both your first and third iterations appear to be more elegant designs. However, you mention that you&#39;re a student and your professor gave you some feedback. Without knowing exactly what your assignment or the purpose of the class is or more information about what your professor suggested, I would take anything I say below with a grain of salt.</p><p>In your first design, you declare your <code>RuleInterface</code> to be an interface that defines how to handle each player&#39;s turn, how to determine if the game is over, and how to determine a winner after the game ends. It seems like that&#39;s a valid interface to a family of games that experiences variation. However, depending on the games, you might have duplicated code. I&#39;d agree that the flexibility to change the rules of one game is a good thing, but I&#39;d also argue that code duplication is terrible for defects. If you copy/paste defective code between implementations and one has a bug in it, you now have multiple bugs that need to be fixed in different locations. If you rewrite the implementations at different times, you could introduce defects in different locations. Neither of those is desirable.</p><p>Your second design seems rather complex, with a deep inheritance tree. At least, it&#39;s deeper than I would expect for solving this type of problem. You&#39;re also starting to break up implementation details into other classes. Ultimately, you are modeling and implementing a game. This might be an interesting approach if you were required mix-and-match your rules for determining the results of a move, the end of the game, and a winner, that doesn&#39;t seem to be in the requirements that you&#39;ve mentioned. Your games are well defined sets of rules, and I&#39;d try to encapsulate the games as much as I can into separate entities.</p><p>Your third design is one that I like the best. My only concern is that it&#39;s not at the right level of abstraction. Right now, you appear to be modeling a turn. I would recommend considering designing the game. Consider that you have players who are making moves on some kind of board, using stones. Your game requires these actors to be present. From there, your algorithm is not <code>doTurn()</code> but <code>playGame()</code>, which goes from the initial move to the final move, after which it terminates. After every player&#39;s move, it adjusts the state of the game, determines if the game is in a final state, and if it is, determines the winner.</p><p>I would recommend taking closer looks at your first and third designs and working with them. It might also help to think in terms of prototypes. What would the clients that use these interfaces look like? Does one design approach make more sense for implementing a client that&#39;s actually going to instantiate a game and play the game? You need to realize what it&#39;s interacting with. In your particular case, it&#39;s the <code>Game</code> class, and any other associated elements - you can&#39;t design in isolation.</p><hr/><p>Since you mention you&#39;re a student, I&#39;d like to share a few things from a time when I was the TA for a software design course:</p><ul><li>Patterns are simply a way of capturing things that have worked in the past, but abstracting them to a point where they can be used in other designs. Each catalog of design patterns gives a name to a pattern, explains its intentions and where it can be used, and situations where it would ultimately constrain your design.</li><li>Design comes with experience. The best way to get good at design isn&#39;t to simply focus on the modeling aspects, but realize what goes into the implementation of that model. The most elegant design is useful if it can&#39;t easily be implemented or it doesn&#39;t fit into the larger design of the system or with other systems.</li><li>Very few designs are &#34;right&#34; or &#34;wrong&#34;. As long as the design fulfills the requirements of the system, it can&#39;t be wrong. Once there&#39;s a mapping from each requirement into some representation of how the system is going to meet that requirement, the design can&#39;t be wrong. It&#39;s only a qualitative at this point about concepts such as flexibility or reusability or testability or maintainability.</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../java-template-pattern-with-varying-input-type-in-overridden-method/'>Java &#8211; Template pattern with varying input type in overridden method</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>