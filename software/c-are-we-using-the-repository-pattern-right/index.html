<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; Are we using the repository pattern right &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1069584 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1069584" class="post-1069584 software type-software status-publish hentry category-software tag-c tag-design tag-design-patterns tag-repository"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; Are we using the repository pattern right</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">design-patterns</span><span class="mr-2 badge badge-primary">repository</span></p><div class="entry-content"><p>We are using a bunch of separate classes suffixed with <code>-repository</code> to retrieve the data from the database; for each table its own repository.</p><p>We have for instance a <code>customerrepository</code> class which has all kind of methods to retrieve customers, and a <code>vacancyrepository</code> which has all kind of methods to retrieve vacancies.</p><p>I have two questions about this way of doing things:</p><ol><li><p>How about getting data which spans multiple tables? For instance I have a screen which shows all customers who have not yet created a vacancy. Can a <code>customerrepository</code> use methods from the <code>vacancyrespository</code>, or do both repositories return results and is there a class higher in the hierarchy (let&#39;s name it a <code>dataservice</code>) which gets the results from both repositories and combine them into 1 result?</p></li><li><p>how much logic can such a repository handle?<br /> I think it&#39;s OK to implement the &#39;where active == true&#39; in a repository to retrieve only active records, or should even that simple logic be handled by a class higher in the hierarchy (let&#39;s name it a <code>dataservice</code>)?</p></li></ol><p>The example I was running into now is this one:</p><p>We have a questions list, which contains one or more questions.<br /> The question can have a result, which is hold in a separate table.<br /> So when you want to retrieve the total result of the questions list, you have to combine data from the <code>questionlist</code> table, the question table and the <code>questionstatus</code> table.</p><p>Right now we have 3 different repositories for these tables.</p><p>If I would ask the <code>questionlistrepository</code> what it&#39;s the total result for list number 12, it would have to get data from two other repositories and hence have some logic in it, is that allowed?</p><p>Or is there a <code>questionlistdataservice</code> which knows which repositories to use?</p><p>One more thing: our repositories can result an <code>IQueryable</code> so a calling service can easily combine the results, but how about when this isn&#39;t the case, I don&#39;t think it&#39;s a good idea to retrieve all the content of all three tables from the database.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p><a href="http://martinfowler.com/eaaCatalog/repository.html">Repository</a> returns domain objects and is built on top of mapping layers. For a very simple domain domain objects and database tables can be very much the same.</p><p>If your repository is always returning exact representation of your data structure then it might actually be <a href="http://martinfowler.com/eaaCatalog/tableDataGateway.html">Table Data Gateway</a> aka Data Access Object(DAO).</p><p>Example:
Your database has tables for person and address. In your application domain address is not an entity of it&#39;s own, it is just a property of Person. In this case you would not have PersonRepository and AddressRepository. You just have PersonRepository. Domain should not be concerned how the domain data is persisted. Those responsibilites are in a layer behind repository.</p><p>From your example it would seem you actually have DAOs and have just named them Repositories.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../what-should-a-repository-really-do/'>What should a repository really do</a></li><li class="list-group-item"><a href='../c-effective-repository-in-c-where-to-put-methods/'>C# &#8211; Effective Repository in C# &#8211; Where to put methods</a></li><li class="list-group-item"><a href='../php-is-this-a-valid-implementation-of-the-repository-pattern/'>Php &#8211; Is this a valid implementation of the repository pattern</a></li><li class="list-group-item"><a href='../c-mvc-core-repository-pattern-for-multiple-lookup-tables/'>C# &#8211; MVC Core Repository Pattern for Multiple Lookup tables</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>