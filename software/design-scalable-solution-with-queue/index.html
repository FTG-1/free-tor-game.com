<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>Design scalable solution with queue &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087614 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087614" class="post-1087614 software type-software status-publish hentry category-software tag-architecture tag-design tag-messaging tag-microservices tag-scalability"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">Design scalable solution with queue</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">Architecture</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">messaging</span><span class="mr-2 badge badge-primary">microservices</span><span class="mr-2 badge badge-danger">scalability</span></p><div class="entry-content"><p>Assuming the following scenario:</p><p>A web application that receives inputs from the user and process the inputs through an algorithm which takes between 5 to 25 minutes (depending on the inputs) and provide a differed result. By the differed results I mean, the user won&#39;t wait for the result behind the UI and he will be notified through an email when the calculation is done.</p><ul><li>The algorithm part which processes inputs should be scalable.</li><li>The application should be hosted on premises.</li><li>Requests came from paid users should be at the front of the queue.</li></ul><p> I am trying to design a high-level architecture and am new to the world of scalable software, containers and microservices. <br /> This is a rough basic design which I came with so far:<br /> <a href="https://i.stack.imgur.com/oHfO1.jpg" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/oHfO1.jpg" alt="enter image description here"/></a><br /> <br /> In above:</p><ul><li>The front-end app is responsible for receiving user inputs. (doesn&#39;t need to be scalable for the time being) and does publish requests into the messaging server.</li><li>The messaging server is a server that hosts a software like RabbitMQ.</li><li>The &#34;queue manager&#34; is a software that needs to be developed which is subscribed to the messages and allocates requests when an unallocated instance of the algorithm runner is available. Also, it is responsible for the order of the queue, depending on the plan which the user is subscribed too, so the paid user&#39;s request will be prioritised.</li><li>Algorithm runner instance is inside a container (for example docker) which we can scale up by increasing the number of the instances.<br /></li></ul><p>Here are my questions.</p><ul><li><p>Does this architecture/design make sense at all? Is it not overkill or the other way around, it may be too simple?</p></li><li><p>My biggest doubt is, is there need for the queue manager app at all or should let the containers be subscribe to the messages directly. If that&#39;s the case how the prioritisation would work?</p></li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Only one comment - personally I&#39;d keep the Queue Manager service.</p><p>While it <em>might</em> be possible for the &#34;worker&#34; containers to subscribe to the messages themselves to perform the algorithm tasks, it&#39;s be inefficient/difficult/impossible to implement several pieces of functionality (which IMHO would sooner or later be needed) from executing the code in a &#34;worker&#34; context:</p><ul><li>providing a dynamic/global view of the system/service</li><li>performing the priority scheduling</li><li>performing the worker container monitoring and failure/recovery logic</li><li>bringing the containers up and down as needed/scaling the worker container pool</li><li>scaling up the entire service</li></ul><p>With a dedicated, centralized Queue Manager it would be much easier IMHO to implement the above items:</p><ul><li>it already has the centralized/global view of the service</li><li>it owns the centralized job scheduling decision, it&#39;s almost trivial to implement priority or any similar quality of service logic</li><li>it could be the central entity monitoring the status of the worker containers performing jobs, easy to detect failures. Could be pulled out as a separate microservice.</li><li>the service info used in making the scheduling decisions, complemented by  service status info obtained from the scheduling activity are typically the very bits of info necessary for making working container pool scaling decisions. The Queue Manager can itself drive the execution of those decision or just provide triggers to a separate service dedicated for that.</li><li>scaling the system would not normally require scaling the worker containers (which would be required if they&#39;d perform the queue manager functionality).</li></ul></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/design-system-design-scalable-chat-server/'>Design &#8211; System Design: Scalable Chat Server</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/web-development-what-architecture-design-is-used-to-create-a-virtual-queue/'>Web-development &#8211; What architecture design is used to create a virtual queue</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/design-architecture-for-message-processing-with-scheduling-at-scale/'>Design &#8211; Architecture for message processing with scheduling, at scale</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>