<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>When should pointers be checked for NULL in C &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1065381 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1065381" class="post-1065381 software type-software status-publish hentry category-software tag-c tag-null tag-validation"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">When should pointers be checked for NULL in C</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">null</span><span class="mr-2 badge badge-warning">validation</span></p><div class="entry-content"><p><strong>Summary</strong>:</p><p>Should a function in C always check to make sure it is not dereferencing a <code>NULL</code> pointer?  If not when is it appropriate to skip these checks?</p><p><strong>Details</strong>:</p><p>I&#39;ve been reading some books about programming interviews and I&#39;m wondering what the appropriate degree of input validation for function arguments in C is?  Obviously any function that takes input from a user needs to perform validation, including checking for a <code>NULL</code> pointer before dereferencing it.  But what about in the case of a function within the same file that you don&#39;t expect to expose through your API?</p><p>For example the <a href="https://github.com/git/git/blob/4b32367ddc63fc2a3e50986509f2f6323f227fef/graph.c#L379" rel="nofollow noreferrer">following</a> appears in the source code of git:</p><pre><code>static unsigned short graph_get_current_column_color(const struct git_graph *graph)
{
    if (!want_color(graph-&gt;revs-&gt;diffopt.use_color))
        return column_colors_max;
    return graph-&gt;default_column_color;
}
</code></pre><p>If <code>*graph</code> is <code>NULL</code> then a null pointer will be dereferenced, probably crashing the program, but possibly resulting in some other unpredictable behavior.  On the other hand the function is <code>static</code> and so maybe the programmer already validated the input.  I don&#39;t know, I just selected it at random because it was a short example in an application program written in C.  I&#39;ve seen many other places where pointers are used without checking for NULL. My question is general not specific to this code segment.</p><p>I saw a similar question asked within the context of <a href="https://softwareengineering.stackexchange.com/questions/147480/should-one-check-for-null-if-he-does-not-expect-null">exception handing</a>.  However, for a unsafe language such as C or C++ there is no automatic error propagation of unhandled exceptions.</p><p>On the other hand I have seen lots of code in open source projects (such as the example above) that does not do any checks of pointers before using them. I&#39;m wondering if anyone has thoughts on guidelines for when to put checks in a function vs. assuming that the function was called with correct arguments.</p><p>I&#39;m interested in this question in general for writing production code.  But I&#39;m also interested within the context of programming interviews.  For instance many algorithm textbooks (such as CLR) tend to present the algorithms in pseudocode without any error checking.  However, while this is good for understanding the core of an algorithm it&#39;s obviously not a good programming practice.  So I would not want to tell an interviewer that I was skipping error checking to simplify my code examples (as a textbook might). But I also would not want to appear to produce inefficient code with excessive error checking.  For instance the <code>graph_get_current_column_color</code> could have been modified to check <code>*graph</code> for null but its not clear what it would do if <code>*graph</code> was null, other than it should not dereference it.</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Invalid null pointers can either be caused by programmer error or by runtime error.  Runtime errors are something a programmer can&#39;t fix, like a <code>malloc</code> failing due to low memory or the network dropping a packet or the user entering something stupid.  Programmer errors are caused by a programmer using the function incorrectly.</p><p>The general rule of thumb I&#39;ve seen is that runtime errors should always be checked, but programmer errors don&#39;t have to be checked every time.  Let&#39;s say some idiot programmer directly called <code>graph_get_current_column_color(0)</code>.  It will segfault the first time it&#39;s called, but once you fix it, the fix is compiled in permanently.  No need to check every single time it&#39;s run.</p><p>Sometimes, especially in third party libraries, you&#39;ll see an <code>assert</code> to check for the programmer errors instead of an <code>if</code> statement.  That allows you to compile in the checks during development, and leave them out in production code.  I&#39;ve also occasionally seen gratuitous checks where the source of the potential programmer error is far removed from the symptom.</p><p>Obviously, you can always find someone more pedantic, but most C programmers I know favor less cluttered code over code that is marginally safer.  And &#34;safer&#34; is a subjective term.  A blatant segfault during development is preferable to a subtle corruption error in the field.</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../how-should-i-handle-invalid-user-input/'>How should I handle invalid user input</a></li><li class="list-group-item"><a href='../c-how-does-throwing-an-argumentnullexception-help/'>C# &#8211; How does throwing an ArgumentNullException help</a></li><li class="list-group-item"><a href='../should-one-check-for-null-if-he-does-not-expect-null/'>Should one check for null if he does not expect null</a></li><li class="list-group-item"><a href='../null-pointers-vs-null-object-pattern/'>Null pointers vs. Null Object Pattern</a></li><li class="list-group-item"><a href='../c-is-it-good-practice-to-have-your-c-qt-functions-always-check-all-its-arguments-for-null-values/'>C++ &#8211; Is it good practice to have your C++/Qt functions always check all its arguments for null values</a></li><li class="list-group-item"><a href='../c-is-it-possible-to-make-nonnull-become-part-of-c-type-system/'>C++ &#8211; Is it possible to make nonnull become part of C++ type system</a></li><li class="list-group-item"><a href='../c-when-do-the-benefits-of-nullable-value-types-outweigh-the-cost-of-null-pointers/'>C# &#8211; When do the benefits of nullable value types outweigh the cost of null pointers</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>