<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="../../wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>REST API Authentication: Cookie vs Web Storage &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min40df.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.mina352.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='../../../stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min40df.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.minb8ff.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.minc9a3.js?ver=11.2.0' id='highlight-js'></script>            <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1087570 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="../../3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="../../contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1087570" class="post-1087570 software type-software status-publish hentry category-software tag-api tag-authentication tag-jwt tag-mobile tag-rest"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">REST API Authentication: Cookie vs Web Storage</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">api</span><span class="mr-2 badge badge-info">authentication</span><span class="mr-2 badge badge-warning">jwt</span><span class="mr-2 badge badge-primary">mobile</span><span class="mr-2 badge badge-danger">rest</span></p><div class="entry-content"><p><strong>Note:</strong> This question might sound like a duplicate, but all other similar questions did not take into account (mobile apps, iot&#39;s, web, 3rd party usage). Specifically, in dealing with the clients together with cookies.</p><p>I&#39;m building a REST API (laravel based) that is to be consumed by multiple clients like web, mobile apps &amp; iot applications. Personally, I&#39;m decently experienced in traditional MPA web applications. So I already am aware of the major security concerns and have dealt with them acceptably so far.</p><p>However, this time I need to make a SPA web application. Correct me if I am wrong, but in this type of situations separating the server from the frontend is a good practice, since the web SPA is not the only client benefiting from the API. Which itself, is kinda the point of RESTful API&#39;s in the first place.</p><p>I have spent the past 2 weeks extensively researching the proper way of authenticating/authorizing REST API applications. The more I researched, the more the dilemma (which I will explain below) got complicated.</p><p>Given the following conditions/requirements:</p><ul><li>Each request made to the API must be run through a database authentication/authorization check. So stateless JWT tokens are out of the question.</li><li>Some kind of a token based authentication must be implemented. I don&#39;t think it&#39;s a good idea to ask for credentials at each request.</li><li>Some kind of a &#34;remember me/keep me logged in&#34; mechanism has to be implemented. So if the user logs in, chooses to be remembered and then closes the browser, he should stay logged in the next time he opens the SPA, given the usual expiration/validity problems are dealt with on the first &#34;next&#34; request. So just storing in JS context memory is also out of question.</li><li>Other clients like native mobile apps should not be forgotten. Also, I am not sure about this, but I think dealing with cookies in mobile/iot apps is pain in the a**.</li></ul><hr/><p>Basically, what I came to understand is that it basically boils down to 2 options for persisting the &#34;access/bearer token&#34; or as known traditionally: the session.</p><p><strong>1)</strong> Bite the bullet and go with the good old httpOnly, HTTPS secure <strong>cookie</strong> way</p><p><strong>Pros:</strong></p><ul><li>Immunity to <strong>XSS</strong>(*Some terms and conditions apply).</li></ul><p><strong>Cons:</strong></p><ul><li>Needs <strong>XSRF</strong> protection. Therefore, needs to have a common backend (or at least a proxy server). And I don&#39;t even want to imagine how this is going to account for mobile apps/iot&#39;s with the even added headache of cookies. This also means that in the future the API cannot be consumed by 3rd party applications.</li></ul><p><strong>2)</strong> The modern <strong>JWT</strong> way</p><p><strong>Pros:</strong></p><ul><li>Immunity to <strong>XSRF</strong>. Which means the API is ready to be consumed by both 1st party and 3rd party consumers. This also makes it easy to implement across most clients (web, mobile apps, iot).</li></ul><p><strong>Cons:</strong></p><ul><li>Prone to <strong>XSS</strong>. Because it somehow needs to be stored in webstorage to meet the requirements mentioned earlier(&#34;Keep me logged in&#34; to be particularly pointy). Especially since user input is accepted and frameworks like Vue.js is used in the SPA.</li></ul><hr/><p>On one hand, you have Microsoft employees suggesting to completely drop out cookies with SPA, i.e.: Forget <strong>XSRF</strong> and deal with <strong>XSS</strong>. Since this is kind of the purpose of REST API&#39;s and since <strong>XSS</strong> is the elephant in the room that has to be dealt with eventually. They also mention how this makes CORS easier for 3rd party applications to consume the API.</p><p>On the other hand, you have other experts (like Auth0) suggesting to avoid dealing with <strong>XSS</strong>, and to deal with the easier to handle <strong>XSRF</strong>.</p><p>Personally, I am leaning towards using <strong>JWT</strong>&#39;s and dealing with <strong>XSS</strong>. Maybe because of keeping RESTful or maybe because I just don&#39;t want to handle cookies in other clients(also how the server is going to deal with <strong>XSRF</strong> in mobile app/iot&#39;s).</p><p>My reasoning is to just store <strong>JWT</strong> in localStorage, and hope for the best. Not forgetting to implement <strong>XSS</strong> protection measures in the first place with other possible combinations like CSP. Is my conclusion going the right way? Is there something I&#39;m missing out? Is there something I got wrong?</p></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>Use both.</p><p>In your mobile app, you have better control over the code that runs and can avoid XSS vulnerabilities. So storing the token is not so problematic and you can have your code pass it to the API</p><p>In your webpage you do have to worry more about injected code, so use the secure cookie to store the token and have the browser pass it automatically</p><p>After all the API just has to read the token from the request. It can look in the Headers and the Cookies no problem and be hosted behind multiple domains</p></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='../deprecate-a-web-api-best-practices/'>Deprecate a web API: Best Practices</a></li><li class="list-group-item"><a href='../rest-how-should-an-api-use-http-basic-authentication/'>Rest &#8211; How should an API use http basic authentication</a></li><li class="list-group-item"><a href='../rest-how-to-safeguard-a-rest-api-for-only-trusted-mobile-applications/'>Rest &#8211; How to safeguard a REST API for only trusted mobile applications</a></li><li class="list-group-item"><a href='../rest-api-security-stored-token-vs-jwt-vs-oauth/'>REST API security Stored token vs JWT vs OAuth</a></li><li class="list-group-item"><a href='../cookie-vs-session-vs-jwt/'>Cookie vs. session vs jwt</a></li><li class="list-group-item"><a href='../architecture-when-to-create-a-nuget-package-vs-creating-a-web-api/'>Architecture &#8211; When to create a nuget package vs creating a web api</a></li><li class="list-group-item"><a href='../rest-stateful-authentication-in-rest-api-using-tokens/'>Rest &#8211; Stateful authentication in REST API using tokens</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml40df.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min43d3.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='../../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min5b31.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="../../wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>