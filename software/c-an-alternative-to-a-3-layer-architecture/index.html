<!doctype html><html lang="en-US"><!--  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- / -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">  <link media="all" href="https://free-tor-game.com/wp-content/cache/autoptimize/4/css/autoptimize_dc56928889f08ceb40a4520f8ece953b.css" rel="stylesheet" /><title>C# &#8211; An alternative to a 3-layer-architecture &#8211; free-tor-game.com</title> <script>MathJax = {
  tex: {
    inlineMath: [['$','$'],['\\(','\\)']], 
    processEscapes: true
  },
  options: {
    ignoreHtmlClass: 'tex2jax_ignore|editor-rich-text'
  }
};</script> <link rel='dns-prefetch' href='http://cdn.jsdelivr.net/' /><link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' /><link rel='dns-prefetch' href='http://stackpath.bootstrapcdn.com/' /><link rel='dns-prefetch' href='http://s.w.org/' /><link rel='stylesheet' id='highlight-css'  href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/vs2015.min.css?ver=5.6' type='text/css' media='all' /><link rel='stylesheet' id='bootstrap-css'  href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css?ver=4.1.3' type='text/css' media='all' /><link rel='stylesheet' id='icons-css'  href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.6' type='text/css' media='all' /> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4' id='jquery-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js?ver=11.2.0' id='highlight-js'></script>     <script>( function( w, d, s, l, i ) {
				w[l] = w[l] || [];
				w[l].push( {'gtm.start': new Date().getTime(), event: 'gtm.js'} );
				var f = d.getElementsByTagName( s )[0],
					j = d.createElement( s ), dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore( j, f );
			} )( window, document, 'script', 'dataLayer', ' ' );</script>      <script>hljs.highlightAll();</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1731162805004860" crossorigin="anonymous"></script></head><body class="software-template-default single single-software postid-1082815 no-sidebar"><div id="page" class="site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><header id="topnav" class="sticky-top"><nav class="navbar navbar-expand-md navbar-light bg-light" role="navigation"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-primary" aria-controls="navbar-primary" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="#">free-tor-game.com</a><div id="navbar-primary" class="collapse navbar-collapse"><ul id="menu-primary-top-menu" class="nav navbar-nav"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-192" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children dropdown menu-item-192 nav-item"><a title="Tools" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle nav-link" id="menu-item-dropdown-192">Tools</a><ul class="dropdown-menu" aria-labelledby="menu-item-dropdown-192" role="menu"><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-193" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-193 nav-item"><a title="ARFCN-Frequency Converter" href="https://free-tor-game.com/3gpp-arfcn-frequency-converter/" class="dropdown-item">ARFCN-Frequency Converter</a></li></ul></li><li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-2301" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2301 nav-item"><a title="Contact Us" href="https://free-tor-game.com/contact/" class="nav-link">Contact Us</a></li></ul></div></nav></header><div id="content" class="site-content"><div id="primary" class="content-area"><main id="main" class="site-main"><div id="main-container" class="container"><div id="main-row" class="row"><div id="main-col" class="col-12"><article id="post-1082815" class="post-1082815 software type-software status-publish hentry category-software tag-c tag-design tag-layers"><div class="row"><div class="col-12 col-md-8"><header class="entry-header"><h1 class="entry-title text-danger">C# &#8211; An alternative to a 3-layer-architecture</h1></header><p style='font-size:1.2em'><span class="mr-2 badge badge-success">c</span><span class="mr-2 badge badge-info">design</span><span class="mr-2 badge badge-warning">layers</span></p><div class="entry-content"><p>At work, a <em>3-layer-architecture</em> is the go to whenever a web application is needed.</p><p>I don&#39;t mind this, but many of the applications we start, do not seem to have an initial need for this. These applications are pretty much just a user interface to the database. This results in a ton of business logic that just sends the data from the data layer to the presentation layer.</p><hr/><p>I have come up with an alternative, however I have not tried it yet.</p><p><strong>Normal 3-Layer-Architecture: <em></em></strong><em>(Arrows denote dependency)</em><br /> <a href="https://i.stack.imgur.com/dR5uH.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/dR5uH.png" alt="Normal 3-layer-architecture"/></a></p><p><strong>Updated design:</strong><br /> <a href="https://i.stack.imgur.com/R5KH0.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/R5KH0.png" alt="enter image description here"/></a></p><p>Instead I can do this, allowing me to keep a layer of indirection, but by having it be only interfaces, the implementation cost (and chance of error) is lowered.</p><p><strong>Updated design,</strong> <em>when business becomes relevant at a later stage:<a href="https://i.stack.imgur.com/wEXml.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/wEXml.png" alt="enter image description here"/></a></em></p><p>This would look similar to this:</p><pre><code>public class BusinessClass : IDataAccessInterface&lt;string&gt;
{
    public BusinessClass(IDataAccessInterface&lt;string&gt; dataRepository)
    {
        this.dataRepository = dataRepository;
    }

    public string Read()
    {
        var something = dataRepository.Read();
        //Do something with something
        return something;
    }
}
</code></pre><p>And my DI would simply inject an implementation from the <code>DataAccess implementation</code> into my <code>business class</code>, and my <code>business class</code> into my presentation, which was already using the same interface.</p><p><em>My question is:</em></p><ul><li>Are there drawbacks I am blind to?</li><li>Do you use this approach (is it well spread)?</li><li>Any other arguments I might bring with me to work?</li></ul></div>     <div id="comments" class="comments-area"><div class="row"><div class="col-12"><div class="mt-3 border-bottom border-success"><h4 class="text-success"><i class='fa fa-check-circle text-success mr-3'></i><span>Best Answer</span></h4></div><div class='bg-transparent mb-3'><p>It looks like your design is biased by your experience of Applications which have no functionality other than reading from/updating a database.</p><p>Normally you would not expect the business logic layer&#39;s exposed method to mirror the Data Access Layer.</p><p>To take your <code>Read()</code> example, I would expect the Business logic to expose say, <code>Read(string userId)</code> and have some logic checking filtering the DAL read results to only return those which apply to the user.</p><p>An Update() call on the DAL would never be directly called by the UI, instead we would expect something like Purchase() or Calculate() which after business rules had been applied might result in a number of Update() calls to the DAL layer.</p><p>Obviously if the client has full access to call update in anyway they please they could bypass business rules such as having to pay for your purchases!!</p><p>I can see how having the Business layer mirror the DAL might help, for those applications where you are simply prototyping and just want to expose a CRUD interface so your UI can work with sample data and the user can click through a process and see state persisted.</p><p>But I would advise sticking to the 3 layer model and not inheriting the DAL interface in your business objects. Its not much more code.</p><pre><code>public class ShoppingBasket //Business Layer Object
{
    public Business(IDAL dataLayer)
    {
        this.dataLayer = dataLayer; // DAL object
    }
    public Order GetOrderForUser(string userId)
    {
        return this.dataLayer.Read();
        //todo:: implement business logic here later!
    }

    public void Purchase(Order order)
    {
         this.dataLayer.Update(order);
         //todo:: update the audit and billing tables!
    }

    //no requirement to implement this method. calling it directly would bypass the user filtering.
    //public Order Read()

    //no requirement to implement this method. calling it directly would bypass audit/payment requirements
    //public void Update(Order order)
}
</code></pre></div></div><div class="col-4"></div></div></div></div><div class="col-12 col-md-4"> <ins class="adsbygoogle"
 style="display:block"
 data-ad-client="ca-pub-1731162805004860"
 data-ad-slot="1340983829"
 data-ad-format="auto"
 data-full-width-responsive="true"></ins>   <div class='mt-3 ml-4 border-bottom border-success'><h6><span>Related Question</span></h6></div><ul class='list-group list-group-flush'><li class="list-group-item"><a href='https://free-tor-game.com/software/c-an-alternative-to-multiple-inheritance-when-creating-an-abstraction-layer/'>C# &#8211; An alternative to multiple inheritance when creating an abstraction layer</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-relaxed-architecture-dal-or-anemic-bll/'>C# &#8211; Relaxed architecture DAL or anemic BLL</a></li><li class="list-group-item"><a href='https://free-tor-game.com/software/c-domain-driven-design-in-an-onion-architecture/'>C# &#8211; Domain Driven Design in an Onion Architecture</a></li></ul></div></div><footer class="entry-footer"></footer></article></div></div></div></main></div></div><footer id="colophon" class="site-footer"><div class="site-info"></div></footer></div>    <script type='text/javascript' src='http://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=5.6' id='mathjax-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/esm/popper.min.js?ver=1.14.7' id='popper-js'></script> <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js?ver=4.3.1' id='bootstrap4-js'></script> <script type='text/javascript' id='itectec-common-js-extra'>var globalObject = {"homeUrl":"https:\/\/free-tor-game.com\/"};</script> <script defer src="https://free-tor-game.com/wp-content/cache/autoptimize/4/js/autoptimize_63b39f43631847816e6b0e70ea726624.js"></script></body></html>